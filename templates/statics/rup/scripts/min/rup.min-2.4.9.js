/*!
 * jQuery JavaScript Library v1.8.0
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: Thu Aug 09 2012 16:24:48 GMT-0400 (Eastern Daylight Time)
 */
function tableToGrid(e,t){jQuery(e).each(function(){if(!this.grid){jQuery(this).width("99%");var e=jQuery(this).width(),i=jQuery("tr td:first-child input[type=checkbox]:first",jQuery(this)),r=jQuery("tr td:first-child input[type=radio]:first",jQuery(this)),a=i.length>0,n=!a&&r.length>0,o=a||n,s=[],l=[];jQuery("th",jQuery(this)).each(function(){0===s.length&&o?(s.push({name:"__selection__",index:"__selection__",width:0,hidden:!0}),l.push("__selection__")):(s.push({name:jQuery(this).attr("id")||jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(" ").join("_"),index:jQuery(this).attr("id")||jQuery.trim(jQuery.jgrid.stripHtml(jQuery(this).html())).split(" ").join("_"),width:jQuery(this).width()||150}),l.push(jQuery(this).html()))});var d=[],u=[],c=[];jQuery("tbody > tr",jQuery(this)).each(function(){var e={},t=0;jQuery("td",jQuery(this)).each(function(){if(0===t&&o){var i=jQuery("input",jQuery(this)),r=i.attr("value");u.push(r||d.length),i.is(":checked")&&c.push(r),e[s[t].name]=i.attr("value")}else e[s[t].name]=jQuery(this).html();t++}),t>0&&d.push(e)}),jQuery(this).empty(),jQuery(this).addClass("scroll"),jQuery(this).jqGrid(jQuery.extend({datatype:"local",width:e,colNames:l,colModel:s,multiselect:a},t||{}));var p;for(p=0;p<d.length;p++){var h=null;u.length>0&&(h=u[p],h&&h.replace&&(h=encodeURIComponent(h).replace(/[.\-%]/g,"_"))),null===h&&(h=p+1),jQuery(this).jqGrid("addRowData",h,d[p])}for(p=0;p<c.length;p++)jQuery(this).jqGrid("setSelection",c[p])}})}!function(e,t){function i(e){var t=fe[e]={};return J.each(e.split(te),function(e,i){t[i]=!0}),t}function r(e,i,r){if(r===t&&1===e.nodeType){var a="data-"+i.replace(me,"-$1").toLowerCase();if(r=e.getAttribute(a),"string"==typeof r){try{r="true"===r||"false"!==r&&("null"===r?null:+r+""===r?+r:ge.test(r)?J.parseJSON(r):r)}catch(n){}J.data(e,i,r)}else r=t}return r}function a(e){var t;for(t in e)if(("data"!==t||!J.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function n(){return!1}function o(){return!0}function s(e){return!e||!e.parentNode||11===e.parentNode.nodeType}function l(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function d(e,t,i){if(t=t||0,J.isFunction(t))return J.grep(e,function(e,r){var a=!!t.call(e,r,e);return a===i});if(t.nodeType)return J.grep(e,function(e,r){return e===t===i});if("string"==typeof t){var r=J.grep(e,function(e){return 1===e.nodeType});if(qe.test(t))return J.filter(t,r,!i);t=J.filter(t,r)}return J.grep(e,function(e,r){return J.inArray(e,t)>=0===i})}function u(e){var t=Ne.split("|"),i=e.createDocumentFragment();if(i.createElement)for(;t.length;)i.createElement(t.pop());return i}function c(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function p(e,t){if(1===t.nodeType&&J.hasData(e)){var i,r,a,n=J._data(e),o=J._data(t,n),s=n.events;if(s){delete o.handle,o.events={};for(i in s)for(r=0,a=s[i].length;r<a;r++)J.event.add(t,i,s[i][r])}o.data&&(o.data=J.extend({},o.data))}}function h(e,t){var i;1===t.nodeType&&(t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),i=t.nodeName.toLowerCase(),"object"===i?(t.parentNode&&(t.outerHTML=e.outerHTML),J.support.html5Clone&&e.innerHTML&&!J.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===i&&Ke.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===i?t.selected=e.defaultSelected:"input"===i||"textarea"===i?t.defaultValue=e.defaultValue:"script"===i&&t.text!==e.text&&(t.text=e.text),t.removeAttribute(J.expando))}function f(e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName("*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll("*"):[]}function g(e){Ke.test(e.type)&&(e.defaultChecked=e.checked)}function m(e,t){if(t in e)return t;for(var i=t.charAt(0).toUpperCase()+t.slice(1),r=t,a=mt.length;a--;)if(t=mt[a]+i,t in e)return t;return r}function v(e,t){return e=t||e,"none"===J.css(e,"display")||!J.contains(e.ownerDocument,e)}function b(e,t){for(var i,r,a=[],n=0,o=e.length;n<o;n++)i=e[n],i.style&&(a[n]=J._data(i,"olddisplay"),t?(a[n]||"none"!==i.style.display||(i.style.display=""),""===i.style.display&&v(i)&&(a[n]=J._data(i,"olddisplay",w(i.nodeName)))):(r=it(i,"display"),a[n]||"none"===r||J._data(i,"olddisplay",r)));for(n=0;n<o;n++)i=e[n],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?a[n]||"":"none"));return e}function _(e,t,i){var r=dt.exec(t);return r?Math.max(0,r[1]-(i||0))+(r[2]||"px"):t}function y(e,t,i,r){for(var a=i===(r?"border":"content")?4:"width"===t?1:0,n=0;a<4;a+=2)"margin"===i&&(n+=J.css(e,i+gt[a],!0)),r?("content"===i&&(n-=parseFloat(it(e,"padding"+gt[a]))||0),"margin"!==i&&(n-=parseFloat(it(e,"border"+gt[a]+"Width"))||0)):(n+=parseFloat(it(e,"padding"+gt[a]))||0,"padding"!==i&&(n+=parseFloat(it(e,"border"+gt[a]+"Width"))||0));return n}function x(e,t,i){var r="width"===t?e.offsetWidth:e.offsetHeight,a=!0,n=J.support.boxSizing&&"border-box"===J.css(e,"boxSizing");if(r<=0){if(r=it(e,t),(r<0||null==r)&&(r=e.style[t]),ut.test(r))return r;a=n&&(J.support.boxSizingReliable||r===e.style[t]),r=parseFloat(r)||0}return r+y(e,t,i||(n?"border":"content"),a)+"px"}function w(e){if(pt[e])return pt[e];var t=J("<"+e+">").appendTo(L.body),i=t.css("display");return t.remove(),"none"!==i&&""!==i||(rt=L.body.appendChild(rt||J.extend(L.createElement("iframe"),{frameBorder:0,width:0,height:0})),at&&rt.createElement||(at=(rt.contentWindow||rt.contentDocument).document,at.write("<!doctype html><html><body>"),at.close()),t=at.body.appendChild(at.createElement(e)),i=it(t,"display"),L.body.removeChild(rt)),pt[e]=i,i}function j(e,t,i,r){var a;if(J.isArray(t))J.each(t,function(t,a){i||_t.test(e)?r(e,a):j(e+"["+("object"==typeof a?t:"")+"]",a,i,r)});else if(i||"object"!==J.type(t))r(e,t);else for(a in t)j(e+"["+a+"]",t[a],i,r)}function k(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var r,a,n,o=t.toLowerCase().split(te),s=0,l=o.length;if(J.isFunction(i))for(;s<l;s++)r=o[s],n=/^\+/.test(r),n&&(r=r.substr(1)||"*"),a=e[r]=e[r]||[],a[n?"unshift":"push"](i)}}function C(e,i,r,a,n,o){n=n||i.dataTypes[0],o=o||{},o[n]=!0;for(var s,l=e[n],d=0,u=l?l.length:0,c=e===Et;d<u&&(c||!s);d++)s=l[d](i,r,a),"string"==typeof s&&(!c||o[s]?s=t:(i.dataTypes.unshift(s),s=C(e,i,r,a,s,o)));return!c&&s||o["*"]||(s=C(e,i,r,a,"*",o)),s}function D(e,i){var r,a,n=J.ajaxSettings.flatOptions||{};for(r in i)i[r]!==t&&((n[r]?e:a||(a={}))[r]=i[r]);a&&J.extend(!0,e,a)}function S(e,i,r){var a,n,o,s,l=e.contents,d=e.dataTypes,u=e.responseFields;for(n in u)n in r&&(i[u[n]]=r[n]);for(;"*"===d[0];)d.shift(),a===t&&(a=e.mimeType||i.getResponseHeader("content-type"));if(a)for(n in l)if(l[n]&&l[n].test(a)){d.unshift(n);break}if(d[0]in r)o=d[0];else{for(n in r){if(!d[0]||e.converters[n+" "+d[0]]){o=n;break}s||(s=n)}o=o||s}if(o)return o!==d[0]&&d.unshift(o),r[o]}function T(e,t){var i,r,a,n,o=e.dataTypes.slice(),s=o[0],l={},d=0;if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),o[1])for(i in e.converters)l[i.toLowerCase()]=e.converters[i];for(;a=o[++d];)if("*"!==a){if("*"!==s&&s!==a){if(i=l[s+" "+a]||l["* "+a],!i)for(r in l)if(n=r.split(" "),n[1]===a&&(i=l[s+" "+n[0]]||l["* "+n[0]])){i===!0?i=l[r]:l[r]!==!0&&(a=n[0],o.splice(d--,0,a));break}if(i!==!0)if(i&&e["throws"])t=i(t);else try{t=i(t)}catch(u){return{state:"parsererror",error:i?u:"No conversion from "+s+" to "+a}}}s=a}return{state:"success",data:t}}function P(){try{return new e.XMLHttpRequest}catch(t){}}function I(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function $(){return setTimeout(function(){Wt=t},0),Wt=J.now()}function F(e,t){J.each(t,function(t,i){for(var r=(Jt[t]||[]).concat(Jt["*"]),a=0,n=r.length;a<n;a++)if(r[a].call(e,t,i))return})}function M(e,t,i){var r,a=0,n=Yt.length,o=J.Deferred().always(function(){delete s.elem}),s=function(){for(var t=Wt||$(),i=Math.max(0,l.startTime+l.duration-t),r=1-(i/l.duration||0),a=0,n=l.tweens.length;a<n;a++)l.tweens[a].run(r);return o.notifyWith(e,[l,r,i]),r<1&&n?i:(o.resolveWith(e,[l]),!1)},l=o.promise({elem:e,props:J.extend({},t),opts:J.extend(!0,{specialEasing:{}},i),originalProperties:t,originalOptions:i,startTime:Wt||$(),duration:i.duration,tweens:[],createTween:function(t,i,r){var a=J.Tween(e,l.opts,t,i,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(a),a},stop:function(t){for(var i=0,r=t?l.tweens.length:0;i<r;i++)l.tweens[i].run(1);return t?o.resolveWith(e,[l,t]):o.rejectWith(e,[l,t]),this}}),d=l.props;for(A(d,l.opts.specialEasing);a<n;a++)if(r=Yt[a].call(l,e,d,l.opts))return r;return F(l,d),J.isFunction(l.opts.start)&&l.opts.start.call(e,l),J.fx.timer(J.extend(s,{anim:l,queue:l.opts.queue,elem:e})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function A(e,t){var i,r,a,n,o;for(i in e)if(r=J.camelCase(i),a=t[r],n=e[i],J.isArray(n)&&(a=n[1],n=e[i]=n[0]),i!==r&&(e[r]=n,delete e[i]),o=J.cssHooks[r],o&&"expand"in o){n=o.expand(n),delete e[r];for(i in n)i in e||(e[i]=n[i],t[i]=a)}else t[r]=a}function E(e,t,i){var r,a,n,o,s,l,d,u,c=this,p=e.style,h={},f=[],g=e.nodeType&&v(e);i.queue||(d=J._queueHooks(e,"fx"),null==d.unqueued&&(d.unqueued=0,u=d.empty.fire,d.empty.fire=function(){d.unqueued||u()}),d.unqueued++,c.always(function(){c.always(function(){d.unqueued--,J.queue(e,"fx").length||d.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===J.css(e,"display")&&"none"===J.css(e,"float")&&(J.support.inlineBlockNeedsLayout&&"inline"!==w(e.nodeName)?p.zoom=1:p.display="inline-block")),i.overflow&&(p.overflow="hidden",J.support.shrinkWrapBlocks||c.done(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]}));for(r in t)if(n=t[r],Vt.exec(n)){if(delete t[r],n===(g?"hide":"show"))continue;f.push(r)}if(o=f.length)for(s=J._data(e,"fxshow")||J._data(e,"fxshow",{}),g?J(e).show():c.done(function(){J(e).hide()}),c.done(function(){var t;J.removeData(e,"fxshow",!0);for(t in h)J.style(e,t,h[t])}),r=0;r<o;r++)a=f[r],l=c.createTween(a,g?s[a]:0),h[a]=s[a]||J.style(e,a),a in s||(s[a]=l.start,g&&(l.end=l.start,l.start="width"===a||"height"===a?1:0))}function q(e,t,i,r,a){return new q.prototype.init(e,t,i,r,a)}function O(e,t){for(var i,r={height:e},a=0;a<4;a+=2-t)i=gt[a],r["margin"+i]=r["padding"+i]=e;return t&&(r.opacity=r.width=e),r}function R(e){return J.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}var N,G,L=e.document,z=e.location,Q=e.navigator,H=e.jQuery,B=e.$,W=Array.prototype.push,U=Array.prototype.slice,V=Array.prototype.indexOf,K=Object.prototype.toString,X=Object.prototype.hasOwnProperty,Y=String.prototype.trim,J=function(e,t){return new J.fn.init(e,t,N)},Z=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,ee=/\S/,te=/\s+/,ie=ee.test(" ")?/^[\s\xA0]+|[\s\xA0]+$/g:/^\s+|\s+$/g,re=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,ae=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ne=/^[\],:{}\s]*$/,oe=/(?:^|:|,)(?:\s*\[)+/g,se=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,le=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,de=/^-ms-/,ue=/-([\da-z])/gi,ce=function(e,t){return(t+"").toUpperCase()},pe=function(){L.addEventListener?(L.removeEventListener("DOMContentLoaded",pe,!1),J.ready()):"complete"===L.readyState&&(L.detachEvent("onreadystatechange",pe),J.ready())},he={};J.fn=J.prototype={constructor:J,init:function(e,i,r){var a,n,o;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if("string"==typeof e){if(a="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:re.exec(e),!a||!a[1]&&i)return!i||i.jquery?(i||r).find(e):this.constructor(i).find(e);if(a[1])return i=i instanceof J?i[0]:i,o=i&&i.nodeType?i.ownerDocument||i:L,e=J.parseHTML(a[1],o,!0),ae.test(a[1])&&J.isPlainObject(i)&&this.attr.call(e,i,!0),J.merge(this,e);if(n=L.getElementById(a[2]),n&&n.parentNode){if(n.id!==a[2])return r.find(e);this.length=1,this[0]=n}return this.context=L,this.selector=e,this}return J.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),J.makeArray(e,this))},selector:"",jquery:"1.8.0",length:0,size:function(){return this.length},toArray:function(){return U.call(this)},get:function(e){return null==e?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,i){var r=J.merge(this.constructor(),e);return r.prevObject=this,r.context=this.context,"find"===t?r.selector=this.selector+(this.selector?" ":"")+i:t&&(r.selector=this.selector+"."+t+"("+i+")"),r},each:function(e,t){return J.each(this,e,t)},ready:function(e){return J.ready.promise().done(e),this},eq:function(e){return e=+e,e===-1?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(U.apply(this,arguments),"slice",U.call(arguments).join(","))},map:function(e){return this.pushStack(J.map(this,function(t,i){return e.call(t,i,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:W,sort:[].sort,splice:[].splice},J.fn.init.prototype=J.fn,J.extend=J.fn.extend=function(){var e,i,r,a,n,o,s=arguments[0]||{},l=1,d=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[1]||{},l=2),"object"==typeof s||J.isFunction(s)||(s={}),d===l&&(s=this,--l);l<d;l++)if(null!=(e=arguments[l]))for(i in e)r=s[i],a=e[i],s!==a&&(u&&a&&(J.isPlainObject(a)||(n=J.isArray(a)))?(n?(n=!1,o=r&&J.isArray(r)?r:[]):o=r&&J.isPlainObject(r)?r:{},s[i]=J.extend(u,o,a)):a!==t&&(s[i]=a));return s},J.extend({noConflict:function(t){return e.$===J&&(e.$=B),t&&e.jQuery===J&&(e.jQuery=H),J},isReady:!1,readyWait:1,holdReady:function(e){e?J.readyWait++:J.ready(!0)},ready:function(e){if(e===!0?!--J.readyWait:!J.isReady){if(!L.body)return setTimeout(J.ready,1);J.isReady=!0,e!==!0&&--J.readyWait>0||(G.resolveWith(L,[J]),J.fn.trigger&&J(L).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===J.type(e)},isArray:Array.isArray||function(e){return"array"===J.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):he[K.call(e)]||"object"},isPlainObject:function(e){if(!e||"object"!==J.type(e)||e.nodeType||J.isWindow(e))return!1;try{if(e.constructor&&!X.call(e,"constructor")&&!X.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}var r;for(r in e);return r===t||X.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,i){var r;return e&&"string"==typeof e?("boolean"==typeof t&&(i=t,t=0),t=t||L,(r=ae.exec(e))?[t.createElement(r[1])]:(r=J.buildFragment([e],t,i?null:[]),J.merge([],(r.cacheable?J.clone(r.fragment):r.fragment).childNodes))):null},parseJSON:function(t){return t&&"string"==typeof t?(t=J.trim(t),e.JSON&&e.JSON.parse?e.JSON.parse(t):ne.test(t.replace(se,"@").replace(le,"]").replace(oe,""))?new Function("return "+t)():void J.error("Invalid JSON: "+t)):null},parseXML:function(i){var r,a;if(!i||"string"!=typeof i)return null;try{e.DOMParser?(a=new DOMParser,r=a.parseFromString(i,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(i))}catch(n){r=t}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length||J.error("Invalid XML: "+i),r},noop:function(){},globalEval:function(t){t&&ee.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(de,"ms-").replace(ue,ce)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toUpperCase()===t.toUpperCase()},each:function(e,i,r){var a,n=0,o=e.length,s=o===t||J.isFunction(e);if(r)if(s){for(a in e)if(i.apply(e[a],r)===!1)break}else for(;n<o&&i.apply(e[n++],r)!==!1;);else if(s){for(a in e)if(i.call(e[a],a,e[a])===!1)break}else for(;n<o&&i.call(e[n],n,e[n++])!==!1;);return e},trim:Y?function(e){return null==e?"":Y.call(e)}:function(e){return null==e?"":e.toString().replace(ie,"")},makeArray:function(e,t){var i,r=t||[];return null!=e&&(i=J.type(e),null==e.length||"string"===i||"function"===i||"regexp"===i||J.isWindow(e)?W.call(r,e):J.merge(r,e)),r},inArray:function(e,t,i){var r;if(t){if(V)return V.call(t,e,i);for(r=t.length,i=i?i<0?Math.max(0,r+i):i:0;i<r;i++)if(i in t&&t[i]===e)return i}return-1},merge:function(e,i){var r=i.length,a=e.length,n=0;if("number"==typeof r)for(;n<r;n++)e[a++]=i[n];else for(;i[n]!==t;)e[a++]=i[n++];return e.length=a,e},grep:function(e,t,i){var r,a=[],n=0,o=e.length;for(i=!!i;n<o;n++)r=!!t(e[n],n),i!==r&&a.push(e[n]);return a},map:function(e,i,r){var a,n,o=[],s=0,l=e.length,d=e instanceof J||l!==t&&"number"==typeof l&&(l>0&&e[0]&&e[l-1]||0===l||J.isArray(e));if(d)for(;s<l;s++)a=i(e[s],s,r),null!=a&&(o[o.length]=a);else for(n in e)a=i(e[n],n,r),null!=a&&(o[o.length]=a);return o.concat.apply([],o)},guid:1,proxy:function(e,i){var r,a,n;return"string"==typeof i&&(r=e[i],i=e,e=r),J.isFunction(e)?(a=U.call(arguments,2),n=function(){return e.apply(i,a.concat(U.call(arguments)))},n.guid=e.guid=e.guid||n.guid||J.guid++,n):t},access:function(e,i,r,a,n,o,s){var l,d=null==r,u=0,c=e.length;if(r&&"object"==typeof r){for(u in r)J.access(e,i,u,r[u],1,o,a);n=1}else if(a!==t){if(l=s===t&&J.isFunction(a),d&&(l?(l=i,i=function(e,t,i){return l.call(J(e),i)}):(i.call(e,a),i=null)),i)for(;u<c;u++)i(e[u],r,l?a.call(e[u],u,i(e[u],r)):a,s);n=1}return n?e:d?i.call(e):c?i(e[0],r):o},now:function(){return(new Date).getTime()}}),J.ready.promise=function(t){if(!G)if(G=J.Deferred(),"complete"===L.readyState||"loading"!==L.readyState&&L.addEventListener)setTimeout(J.ready,1);else if(L.addEventListener)L.addEventListener("DOMContentLoaded",pe,!1),e.addEventListener("load",J.ready,!1);else{L.attachEvent("onreadystatechange",pe),e.attachEvent("onload",J.ready);var i=!1;try{i=null==e.frameElement&&L.documentElement}catch(r){}i&&i.doScroll&&!function a(){if(!J.isReady){try{i.doScroll("left")}catch(e){return setTimeout(a,50)}J.ready()}}()}return G.promise(t)},J.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){he["[object "+t+"]"]=t.toLowerCase()}),N=J(L);var fe={};J.Callbacks=function(e){e="string"==typeof e?fe[e]||i(e):J.extend({},e);var r,a,n,o,s,l,d=[],u=!e.once&&[],c=function(t){for(r=e.memory&&t,a=!0,l=o||0,o=0,s=d.length,n=!0;d&&l<s;l++)if(d[l].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,d&&(u?u.length&&c(u.shift()):r?d=[]:p.disable())},p={add:function(){if(d){var t=d.length;!function i(t){J.each(t,function(t,r){!J.isFunction(r)||e.unique&&p.has(r)?r&&r.length&&i(r):d.push(r)})}(arguments),n?s=d.length:r&&(o=t,c(r))}return this},remove:function(){return d&&J.each(arguments,function(e,t){for(var i;(i=J.inArray(t,d,i))>-1;)d.splice(i,1),n&&(i<=s&&s--,i<=l&&l--)}),this},has:function(e){return J.inArray(e,d)>-1},empty:function(){return d=[],this},disable:function(){return d=u=r=t,this},disabled:function(){return!d},lock:function(){return u=t,r||p.disable(),this},locked:function(){return!u},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!d||a&&!u||(n?u.push(t):c(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!a}};return p},J.extend({Deferred:function(e){var t=[["resolve","done",J.Callbacks("once memory"),"resolved"],["reject","fail",J.Callbacks("once memory"),"rejected"],["notify","progress",J.Callbacks("memory")]],i="pending",r={state:function(){return i},always:function(){return a.done(arguments).fail(arguments),this},then:function(){var e=arguments;return J.Deferred(function(i){J.each(t,function(t,r){var n=r[0],o=e[t];a[r[1]](J.isFunction(o)?function(){var e=o.apply(this,arguments);e&&J.isFunction(e.promise)?e.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[n+"With"](this===a?i:this,[e])}:i[n])}),e=null}).promise()},promise:function(e){return"object"==typeof e?J.extend(e,r):r}},a={};return r.pipe=r.then,J.each(t,function(e,n){var o=n[2],s=n[3];r[n[1]]=o.add,s&&o.add(function(){i=s},t[1^e][2].disable,t[2][2].lock),a[n[0]]=o.fire,a[n[0]+"With"]=o.fireWith}),r.promise(a),e&&e.call(a,a),a},when:function(e){var t,i,r,a=0,n=U.call(arguments),o=n.length,s=1!==o||e&&J.isFunction(e.promise)?o:0,l=1===s?e:J.Deferred(),d=function(e,i,r){return function(a){i[e]=this,r[e]=arguments.length>1?U.call(arguments):a,r===t?l.notifyWith(i,r):--s||l.resolveWith(i,r)}};if(o>1)for(t=new Array(o),i=new Array(o),r=new Array(o);a<o;a++)n[a]&&J.isFunction(n[a].promise)?n[a].promise().done(d(a,r,n)).fail(l.reject).progress(d(a,i,t)):--s;return s||l.resolveWith(r,n),l.promise()}}),J.support=function(){var t,i,r,a,n,o,s,l,d,u,c,p=L.createElement("div");if(p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=p.getElementsByTagName("*"),r=p.getElementsByTagName("a")[0],r.style.cssText="top:1px;float:left;opacity:.5",!i||!i.length||!r)return{};a=L.createElement("select"),n=a.appendChild(L.createElement("option")),o=p.getElementsByTagName("input")[0],t={leadingWhitespace:3===p.firstChild.nodeType,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:"/a"===r.getAttribute("href"),opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:"on"===o.value,optSelected:n.selected,getSetAttribute:"t"!==p.className,enctype:!!L.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==L.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===L.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},o.checked=!0,t.noCloneChecked=o.cloneNode(!0).checked,a.disabled=!0,t.optDisabled=!n.disabled;try{delete p.test}catch(h){t.deleteExpando=!1}if(!p.addEventListener&&p.attachEvent&&p.fireEvent&&(p.attachEvent("onclick",c=function(){t.noCloneEvent=!1}),p.cloneNode(!0).fireEvent("onclick"),p.detachEvent("onclick",c)),o=L.createElement("input"),o.value="t",o.setAttribute("type","radio"),t.radioValue="t"===o.value,o.setAttribute("checked","checked"),o.setAttribute("name","t"),p.appendChild(o),s=L.createDocumentFragment(),s.appendChild(p.lastChild),t.checkClone=s.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=o.checked,s.removeChild(o),s.appendChild(p),p.attachEvent)for(d in{submit:!0,change:!0,focusin:!0})l="on"+d,u=l in p,u||(p.setAttribute(l,"return;"),u="function"==typeof p[l]),t[d+"Bubbles"]=u;return J(function(){var i,r,a,n,o="padding:0;margin:0;border:0;display:block;overflow:hidden;",s=L.getElementsByTagName("body")[0];s&&(i=L.createElement("div"),i.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",s.insertBefore(i,s.firstChild),r=L.createElement("div"),i.appendChild(r),r.innerHTML="<table><tr><td></td><td>t</td></tr></table>",a=r.getElementsByTagName("td"),a[0].style.cssText="padding:0;margin:0;border:0;display:none",u=0===a[0].offsetHeight,a[0].style.display="",a[1].style.display="none",t.reliableHiddenOffsets=u&&0===a[0].offsetHeight,r.innerHTML="",r.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=4===r.offsetWidth,t.doesNotIncludeMarginInBodyOffset=1!==s.offsetTop,e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(r,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(r,null)||{width:"4px"}).width,n=L.createElement("div"),n.style.cssText=r.style.cssText=o,n.style.marginRight=n.style.width="0",r.style.width="1px",r.appendChild(n),t.reliableMarginRight=!parseFloat((e.getComputedStyle(n,null)||{}).marginRight)),"undefined"!=typeof r.style.zoom&&(r.innerHTML="",r.style.cssText=o+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===r.offsetWidth,r.style.display="block",r.style.overflow="visible",r.innerHTML="<div></div>",r.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==r.offsetWidth,i.style.zoom=1),s.removeChild(i),i=r=a=n=null)}),s.removeChild(p),i=r=a=n=o=s=p=null,t}();var ge=/^(?:\{.*\}|\[.*\])$/,me=/([A-Z])/g;J.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(J.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?J.cache[e[J.expando]]:e[J.expando],!!e&&!a(e)},data:function(e,i,r,a){if(J.acceptData(e)){var n,o,s=J.expando,l="string"==typeof i,d=e.nodeType,u=d?J.cache:e,c=d?e[s]:e[s]&&s;if(c&&u[c]&&(a||u[c].data)||!l||r!==t)return c||(d?e[s]=c=J.deletedIds.pop()||++J.uuid:c=s),u[c]||(u[c]={},d||(u[c].toJSON=J.noop)),"object"!=typeof i&&"function"!=typeof i||(a?u[c]=J.extend(u[c],i):u[c].data=J.extend(u[c].data,i)),n=u[c],a||(n.data||(n.data={}),n=n.data),r!==t&&(n[J.camelCase(i)]=r),l?(o=n[i],null==o&&(o=n[J.camelCase(i)])):o=n,o}},removeData:function(e,t,i){if(J.acceptData(e)){var r,n,o,s=e.nodeType,l=s?J.cache:e,d=s?e[J.expando]:J.expando;if(l[d]){if(t&&(r=i?l[d]:l[d].data)){J.isArray(t)||(t in r?t=[t]:(t=J.camelCase(t),t=t in r?[t]:t.split(" ")));for(n=0,o=t.length;n<o;n++)delete r[t[n]];if(!(i?a:J.isEmptyObject)(r))return}(i||(delete l[d].data,a(l[d])))&&(s?J.cleanData([e],!0):J.support.deleteExpando||l!=l.window?delete l[d]:l[d]=null)}}},_data:function(e,t,i){return J.data(e,t,i,!0)},acceptData:function(e){var t=e.nodeName&&J.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),J.fn.extend({data:function(e,i){var a,n,o,s,l,d=this[0],u=0,c=null;if(e===t){if(this.length&&(c=J.data(d),1===d.nodeType&&!J._data(d,"parsedAttrs"))){for(o=d.attributes,l=o.length;u<l;u++)s=o[u].name,0===s.indexOf("data-")&&(s=J.camelCase(s.substring(5)),r(d,s,c[s]));J._data(d,"parsedAttrs",!0)}return c}return"object"==typeof e?this.each(function(){J.data(this,e)}):(a=e.split(".",2),a[1]=a[1]?"."+a[1]:"",n=a[1]+"!",J.access(this,function(i){return i===t?(c=this.triggerHandler("getData"+n,[a[0]]),c===t&&d&&(c=J.data(d,e),c=r(d,e,c)),c===t&&a[1]?this.data(a[0]):c):(a[1]=i,void this.each(function(){var t=J(this);t.triggerHandler("setData"+n,a),J.data(this,e,i),t.triggerHandler("changeData"+n,a)}))},null,i,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){J.removeData(this,e)})}}),J.extend({queue:function(e,t,i){var r;if(e)return t=(t||"fx")+"queue",r=J._data(e,t),i&&(!r||J.isArray(i)?r=J._data(e,t,J.makeArray(i)):r.push(i)),r||[]},dequeue:function(e,t){t=t||"fx";var i=J.queue(e,t),r=i.shift(),a=J._queueHooks(e,t),n=function(){J.dequeue(e,t)};"inprogress"===r&&(r=i.shift()),r&&("fx"===t&&i.unshift("inprogress"),delete a.stop,r.call(e,n,a)),!i.length&&a&&a.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return J._data(e,i)||J._data(e,i,{empty:J.Callbacks("once memory").add(function(){J.removeData(e,t+"queue",!0),J.removeData(e,i,!0)})})}}),J.fn.extend({queue:function(e,i){var r=2;return"string"!=typeof e&&(i=e,e="fx",r--),arguments.length<r?J.queue(this[0],e):i===t?this:this.each(function(){var t=J.queue(this,e,i);J._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&J.dequeue(this,e)})},dequeue:function(e){return this.each(function(){J.dequeue(this,e)})},delay:function(e,t){return e=J.fx?J.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,i){var r=setTimeout(t,e);i.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,i){var r,a=1,n=J.Deferred(),o=this,s=this.length,l=function(){--a||n.resolveWith(o,[o])};for("string"!=typeof e&&(i=e,e=t),e=e||"fx";s--;)(r=J._data(o[s],e+"queueHooks"))&&r.empty&&(a++,r.empty.add(l));return l(),n.promise(i)}});var ve,be,_e,ye=/[\t\r\n]/g,xe=/\r/g,we=/^(?:button|input)$/i,je=/^(?:button|input|object|select|textarea)$/i,ke=/^a(?:rea|)$/i,Ce=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,De=J.support.getSetAttribute;J.fn.extend({attr:function(e,t){return J.access(this,J.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){J.removeAttr(this,e)})},prop:function(e,t){return J.access(this,J.prop,e,t,arguments.length>1)},removeProp:function(e){return e=J.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(i){}})},addClass:function(e){var t,i,r,a,n,o,s;if(J.isFunction(e))return this.each(function(t){J(this).addClass(e.call(this,t,this.className))});if(e&&"string"==typeof e)for(t=e.split(te),i=0,r=this.length;i<r;i++)if(a=this[i],1===a.nodeType)if(a.className||1!==t.length){for(n=" "+a.className+" ",o=0,s=t.length;o<s;o++)~n.indexOf(" "+t[o]+" ")||(n+=t[o]+" ");a.className=J.trim(n)}else a.className=e;return this},removeClass:function(e){var i,r,a,n,o,s,l;if(J.isFunction(e))return this.each(function(t){J(this).removeClass(e.call(this,t,this.className))});if(e&&"string"==typeof e||e===t)for(i=(e||"").split(te),s=0,l=this.length;s<l;s++)if(a=this[s],1===a.nodeType&&a.className){for(r=(" "+a.className+" ").replace(ye," "),n=0,o=i.length;n<o;n++)for(;r.indexOf(" "+i[n]+" ")>-1;)r=r.replace(" "+i[n]+" "," ");a.className=e?J.trim(r):""}return this},toggleClass:function(e,t){var i=typeof e,r="boolean"==typeof t;return J.isFunction(e)?this.each(function(i){J(this).toggleClass(e.call(this,i,this.className,t),t)}):this.each(function(){if("string"===i)for(var a,n=0,o=J(this),s=t,l=e.split(te);a=l[n++];)s=r?s:!o.hasClass(a),o[s?"addClass":"removeClass"](a);else"undefined"!==i&&"boolean"!==i||(this.className&&J._data(this,"__className__",this.className),this.className=this.className||e===!1?"":J._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",i=0,r=this.length;i<r;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(ye," ").indexOf(t)>-1)return!0;return!1},val:function(e){var i,r,a,n=this[0];{if(arguments.length)return a=J.isFunction(e),this.each(function(r){var n,o=J(this);1===this.nodeType&&(n=a?e.call(this,r,o.val()):e,null==n?n="":"number"==typeof n?n+="":J.isArray(n)&&(n=J.map(n,function(e){return null==e?"":e+""})),i=J.valHooks[this.type]||J.valHooks[this.nodeName.toLowerCase()],i&&"set"in i&&i.set(this,n,"value")!==t||(this.value=n))});if(n)return i=J.valHooks[n.type]||J.valHooks[n.nodeName.toLowerCase()],i&&"get"in i&&(r=i.get(n,"value"))!==t?r:(r=n.value,"string"==typeof r?r.replace(xe,""):null==r?"":r)}}}),J.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,i,r,a,n=e.selectedIndex,o=[],s=e.options,l="select-one"===e.type;if(n<0)return null;for(i=l?n:0,r=l?n+1:s.length;i<r;i++)if(a=s[i],a.selected&&(J.support.optDisabled?!a.disabled:null===a.getAttribute("disabled"))&&(!a.parentNode.disabled||!J.nodeName(a.parentNode,"optgroup"))){if(t=J(a).val(),l)return t;o.push(t)}return l&&!o.length&&s.length?J(s[n]).val():o},set:function(e,t){var i=J.makeArray(t);return J(e).find("option").each(function(){this.selected=J.inArray(J(this).val(),i)>=0}),i.length||(e.selectedIndex=-1),i}}},attrFn:{},attr:function(e,i,r,a){var n,o,s,l=e.nodeType;if(e&&3!==l&&8!==l&&2!==l)return a&&J.isFunction(J.fn[i])?J(e)[i](r):"undefined"==typeof e.getAttribute?J.prop(e,i,r):(s=1!==l||!J.isXMLDoc(e),s&&(i=i.toLowerCase(),o=J.attrHooks[i]||(Ce.test(i)?be:ve)),r!==t?null===r?void J.removeAttr(e,i):o&&"set"in o&&s&&(n=o.set(e,r,i))!==t?n:(e.setAttribute(i,""+r),r):o&&"get"in o&&s&&null!==(n=o.get(e,i))?n:(n=e.getAttribute(i),null===n?t:n))},removeAttr:function(e,t){var i,r,a,n,o=0;if(t&&1===e.nodeType)for(r=t.split(te);o<r.length;o++)a=r[o],a&&(i=J.propFix[a]||a,n=Ce.test(a),n||J.attr(e,a,""),e.removeAttribute(De?a:i),n&&i in e&&(e[i]=!1))},attrHooks:{type:{set:function(e,t){if(we.test(e.nodeName)&&e.parentNode)J.error("type property can't be changed");else if(!J.support.radioValue&&"radio"===t&&J.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}},value:{get:function(e,t){return ve&&J.nodeName(e,"button")?ve.get(e,t):t in e?e.value:null;
},set:function(e,t,i){return ve&&J.nodeName(e,"button")?ve.set(e,t,i):void(e.value=t)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,i,r){var a,n,o,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return o=1!==s||!J.isXMLDoc(e),o&&(i=J.propFix[i]||i,n=J.propHooks[i]),r!==t?n&&"set"in n&&(a=n.set(e,r,i))!==t?a:e[i]=r:n&&"get"in n&&null!==(a=n.get(e,i))?a:e[i]},propHooks:{tabIndex:{get:function(e){var i=e.getAttributeNode("tabindex");return i&&i.specified?parseInt(i.value,10):je.test(e.nodeName)||ke.test(e.nodeName)&&e.href?0:t}}}}),be={get:function(e,i){var r,a=J.prop(e,i);return a===!0||"boolean"!=typeof a&&(r=e.getAttributeNode(i))&&r.nodeValue!==!1?i.toLowerCase():t},set:function(e,t,i){var r;return t===!1?J.removeAttr(e,i):(r=J.propFix[i]||i,r in e&&(e[r]=!0),e.setAttribute(i,i.toLowerCase())),i}},De||(_e={name:!0,id:!0,coords:!0},ve=J.valHooks.button={get:function(e,i){var r;return r=e.getAttributeNode(i),r&&(_e[i]?""!==r.value:r.specified)?r.value:t},set:function(e,t,i){var r=e.getAttributeNode(i);return r||(r=L.createAttribute(i),e.setAttributeNode(r)),r.value=t+""}},J.each(["width","height"],function(e,t){J.attrHooks[t]=J.extend(J.attrHooks[t],{set:function(e,i){if(""===i)return e.setAttribute(t,"auto"),i}})}),J.attrHooks.contenteditable={get:ve.get,set:function(e,t,i){""===t&&(t="false"),ve.set(e,t,i)}}),J.support.hrefNormalized||J.each(["href","src","width","height"],function(e,i){J.attrHooks[i]=J.extend(J.attrHooks[i],{get:function(e){var r=e.getAttribute(i,2);return null===r?t:r}})}),J.support.style||(J.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=""+t}}),J.support.optSelected||(J.propHooks.selected=J.extend(J.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),J.support.enctype||(J.propFix.enctype="encoding"),J.support.checkOn||J.each(["radio","checkbox"],function(){J.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),J.each(["radio","checkbox"],function(){J.valHooks[this]=J.extend(J.valHooks[this],{set:function(e,t){if(J.isArray(t))return e.checked=J.inArray(J(e).val(),t)>=0}})});var Se=/^(?:textarea|input|select)$/i,Te=/^([^\.]*|)(?:\.(.+)|)$/,Pe=/(?:^|\s)hover(\.\S+|)\b/,Ie=/^key/,$e=/^(?:mouse|contextmenu)|click/,Fe=/^(?:focusinfocus|focusoutblur)$/,Me=function(e){return J.event.special.hover?e:e.replace(Pe,"mouseenter$1 mouseleave$1")};J.event={add:function(e,i,r,a,n){var o,s,l,d,u,c,p,h,f,g,m;if(3!==e.nodeType&&8!==e.nodeType&&i&&r&&(o=J._data(e))){for(r.handler&&(f=r,r=f.handler,n=f.selector),r.guid||(r.guid=J.guid++),l=o.events,l||(o.events=l={}),s=o.handle,s||(o.handle=s=function(e){return"undefined"==typeof J||e&&J.event.triggered===e.type?t:J.event.dispatch.apply(s.elem,arguments)},s.elem=e),i=J.trim(Me(i)).split(" "),d=0;d<i.length;d++)u=Te.exec(i[d])||[],c=u[1],p=(u[2]||"").split(".").sort(),m=J.event.special[c]||{},c=(n?m.delegateType:m.bindType)||c,m=J.event.special[c]||{},h=J.extend({type:c,origType:u[1],data:a,handler:r,guid:r.guid,selector:n,namespace:p.join(".")},f),g=l[c],g||(g=l[c]=[],g.delegateCount=0,m.setup&&m.setup.call(e,a,p,s)!==!1||(e.addEventListener?e.addEventListener(c,s,!1):e.attachEvent&&e.attachEvent("on"+c,s))),m.add&&(m.add.call(e,h),h.handler.guid||(h.handler.guid=r.guid)),n?g.splice(g.delegateCount++,0,h):g.push(h),J.event.global[c]=!0;e=null}},global:{},remove:function(e,t,i,r,a){var n,o,s,l,d,u,c,p,h,f,g,m=J.hasData(e)&&J._data(e);if(m&&(p=m.events)){for(t=J.trim(Me(t||"")).split(" "),n=0;n<t.length;n++)if(o=Te.exec(t[n])||[],s=l=o[1],d=o[2],s){for(h=J.event.special[s]||{},s=(r?h.delegateType:h.bindType)||s,f=p[s]||[],u=f.length,d=d?new RegExp("(^|\\.)"+d.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null,c=0;c<f.length;c++)g=f[c],!a&&l!==g.origType||i&&i.guid!==g.guid||d&&!d.test(g.namespace)||r&&r!==g.selector&&("**"!==r||!g.selector)||(f.splice(c--,1),g.selector&&f.delegateCount--,h.remove&&h.remove.call(e,g));0===f.length&&u!==f.length&&(h.teardown&&h.teardown.call(e,d,m.handle)!==!1||J.removeEvent(e,s,m.handle),delete p[s])}else for(s in p)J.event.remove(e,s+t[n],i,r,!0);J.isEmptyObject(p)&&(delete m.handle,J.removeData(e,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(i,r,a,n){if(!a||3!==a.nodeType&&8!==a.nodeType){var o,s,l,d,u,c,p,h,f,g,m=i.type||i,v=[];if(!Fe.test(m+J.event.triggered)&&(m.indexOf("!")>=0&&(m=m.slice(0,-1),s=!0),m.indexOf(".")>=0&&(v=m.split("."),m=v.shift(),v.sort()),a&&!J.event.customEvent[m]||J.event.global[m]))if(i="object"==typeof i?i[J.expando]?i:new J.Event(m,i):new J.Event(m),i.type=m,i.isTrigger=!0,i.exclusive=s,i.namespace=v.join("."),i.namespace_re=i.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,c=m.indexOf(":")<0?"on"+m:"",a){if(i.result=t,i.target||(i.target=a),r=null!=r?J.makeArray(r):[],r.unshift(i),p=J.event.special[m]||{},!p.trigger||p.trigger.apply(a,r)!==!1){if(f=[[a,p.bindType||m]],!n&&!p.noBubble&&!J.isWindow(a)){for(g=p.delegateType||m,d=Fe.test(g+m)?a:a.parentNode,u=a;d;d=d.parentNode)f.push([d,g]),u=d;u===(a.ownerDocument||L)&&f.push([u.defaultView||u.parentWindow||e,g])}for(l=0;l<f.length&&!i.isPropagationStopped();l++)d=f[l][0],i.type=f[l][1],h=(J._data(d,"events")||{})[i.type]&&J._data(d,"handle"),h&&h.apply(d,r),h=c&&d[c],h&&J.acceptData(d)&&h.apply(d,r)===!1&&i.preventDefault();return i.type=m,n||i.isDefaultPrevented()||p._default&&p._default.apply(a.ownerDocument,r)!==!1||"click"===m&&J.nodeName(a,"a")||!J.acceptData(a)||c&&a[m]&&("focus"!==m&&"blur"!==m||0!==i.target.offsetWidth)&&!J.isWindow(a)&&(u=a[c],u&&(a[c]=null),J.event.triggered=m,a[m](),J.event.triggered=t,u&&(a[c]=u)),i.result}}else{o=J.cache;for(l in o)o[l].events&&o[l].events[m]&&J.event.trigger(i,r,o[l].handle.elem,!0)}}},dispatch:function(i){i=J.event.fix(i||e.event);var r,a,n,o,s,l,d,u,c,p,h=(J._data(this,"events")||{})[i.type]||[],f=h.delegateCount,g=[].slice.call(arguments),m=!i.exclusive&&!i.namespace,v=J.event.special[i.type]||{},b=[];if(g[0]=i,i.delegateTarget=this,!v.preDispatch||v.preDispatch.call(this,i)!==!1){if(f&&(!i.button||"click"!==i.type))for(o=J(this),o.context=this,n=i.target;n!=this;n=n.parentNode||this)if(n.disabled!==!0||"click"!==i.type){for(l={},u=[],o[0]=n,r=0;r<f;r++)c=h[r],p=c.selector,l[p]===t&&(l[p]=o.is(p)),l[p]&&u.push(c);u.length&&b.push({elem:n,matches:u})}for(h.length>f&&b.push({elem:this,matches:h.slice(f)}),r=0;r<b.length&&!i.isPropagationStopped();r++)for(d=b[r],i.currentTarget=d.elem,a=0;a<d.matches.length&&!i.isImmediatePropagationStopped();a++)c=d.matches[a],(m||!i.namespace&&!c.namespace||i.namespace_re&&i.namespace_re.test(c.namespace))&&(i.data=c.data,i.handleObj=c,s=((J.event.special[c.origType]||{}).handle||c.handler).apply(d.elem,g),s!==t&&(i.result=s,s===!1&&(i.preventDefault(),i.stopPropagation())));return v.postDispatch&&v.postDispatch.call(this,i),i.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,i){var r,a,n,o=i.button,s=i.fromElement;return null==e.pageX&&null!=i.clientX&&(r=e.target.ownerDocument||L,a=r.documentElement,n=r.body,e.pageX=i.clientX+(a&&a.scrollLeft||n&&n.scrollLeft||0)-(a&&a.clientLeft||n&&n.clientLeft||0),e.pageY=i.clientY+(a&&a.scrollTop||n&&n.scrollTop||0)-(a&&a.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&s&&(e.relatedTarget=s===e.target?i.toElement:s),e.which||o===t||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[J.expando])return e;var t,i,r=e,a=J.event.fixHooks[e.type]||{},n=a.props?this.props.concat(a.props):this.props;for(e=J.Event(r),t=n.length;t;)i=n[--t],e[i]=r[i];return e.target||(e.target=r.srcElement||L),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,a.filter?a.filter(e,r):e},special:{ready:{setup:J.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,i){J.isWindow(this)&&(this.onbeforeunload=i)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,i,r){var a=J.extend(new J.Event,i,{type:e,isSimulated:!0,originalEvent:{}});r?J.event.trigger(a,null,t):J.event.dispatch.call(t,a),a.isDefaultPrevented()&&i.preventDefault()}},J.event.handle=J.event.dispatch,J.removeEvent=L.removeEventListener?function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)}:function(e,t,i){var r="on"+t;e.detachEvent&&("undefined"==typeof e[r]&&(e[r]=null),e.detachEvent(r,i))},J.Event=function(e,t){return this instanceof J.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?o:n):this.type=e,t&&J.extend(this,t),this.timeStamp=e&&e.timeStamp||J.now(),void(this[J.expando]=!0)):new J.Event(e,t)},J.Event.prototype={preventDefault:function(){this.isDefaultPrevented=o;var e=this.originalEvent;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=o;var e=this.originalEvent;e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=o,this.stopPropagation()},isDefaultPrevented:n,isPropagationStopped:n,isImmediatePropagationStopped:n},J.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){J.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,r=this,a=e.relatedTarget,n=e.handleObj;n.selector;return a&&(a===r||J.contains(r,a))||(e.type=n.origType,i=n.handler.apply(this,arguments),e.type=t),i}}}),J.support.submitBubbles||(J.event.special.submit={setup:function(){return!J.nodeName(this,"form")&&void J.event.add(this,"click._submit keypress._submit",function(e){var i=e.target,r=J.nodeName(i,"input")||J.nodeName(i,"button")?i.form:t;r&&!J._data(r,"_submit_attached")&&(J.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),J._data(r,"_submit_attached",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&J.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return!J.nodeName(this,"form")&&void J.event.remove(this,"._submit")}}),J.support.changeBubbles||(J.event.special.change={setup:function(){return Se.test(this.nodeName)?("checkbox"!==this.type&&"radio"!==this.type||(J.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),J.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),J.event.simulate("change",this,e,!0)})),!1):void J.event.add(this,"beforeactivate._change",function(e){var t=e.target;Se.test(t.nodeName)&&!J._data(t,"_change_attached")&&(J.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||J.event.simulate("change",this.parentNode,e,!0)}),J._data(t,"_change_attached",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type)return e.handleObj.handler.apply(this,arguments)},teardown:function(){return J.event.remove(this,"._change"),Se.test(this.nodeName)}}),J.support.focusinBubbles||J.each({focus:"focusin",blur:"focusout"},function(e,t){var i=0,r=function(e){J.event.simulate(t,e.target,J.event.fix(e),!0)};J.event.special[t]={setup:function(){0===i++&&L.addEventListener(e,r,!0)},teardown:function(){0===--i&&L.removeEventListener(e,r,!0)}}}),J.fn.extend({on:function(e,i,r,a,o){var s,l;if("object"==typeof e){"string"!=typeof i&&(r=r||i,i=t);for(l in e)this.on(l,i,r,e[l],o);return this}if(null==r&&null==a?(a=i,r=i=t):null==a&&("string"==typeof i?(a=r,r=t):(a=r,r=i,i=t)),a===!1)a=n;else if(!a)return this;return 1===o&&(s=a,a=function(e){return J().off(e),s.apply(this,arguments)},a.guid=s.guid||(s.guid=J.guid++)),this.each(function(){J.event.add(this,e,a,r,i)})},one:function(e,t,i,r){return this.on(e,t,i,r,1)},off:function(e,i,r){var a,o;if(e&&e.preventDefault&&e.handleObj)return a=e.handleObj,J(e.delegateTarget).off(a.namespace?a.origType+"."+a.namespace:a.origType,a.selector,a.handler),this;if("object"==typeof e){for(o in e)this.off(o,i,e[o]);return this}return i!==!1&&"function"!=typeof i||(r=i,i=t),r===!1&&(r=n),this.each(function(){J.event.remove(this,e,r,i)})},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,i){return J(this.context).on(e,this.selector,t,i),this},die:function(e,t){return J(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,i,r){return this.on(t,e,i,r)},undelegate:function(e,t,i){return 1==arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},trigger:function(e,t){return this.each(function(){J.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return J.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,i=e.guid||J.guid++,r=0,a=function(i){var a=(J._data(this,"lastToggle"+e.guid)||0)%r;return J._data(this,"lastToggle"+e.guid,a+1),i.preventDefault(),t[a].apply(this,arguments)||!1};for(a.guid=i;r<t.length;)t[r++].guid=i;return this.click(a)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),J.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){J.fn[t]=function(e,i){return null==i&&(i=e,e=null),arguments.length>0?this.on(t,null,e,i):this.trigger(t)},Ie.test(t)&&(J.event.fixHooks[t]=J.event.keyHooks),$e.test(t)&&(J.event.fixHooks[t]=J.event.mouseHooks)}),/*!
 * Sizzle CSS Selector Engine
 *  Copyright 2012 jQuery Foundation and other contributors
 *  Released under the MIT license
 *  http://sizzlejs.com/
 */
function(e,t){function i(e,t,i,r){for(var a=0,n=t.length;a<n;a++)ne(e,t[a],i,r)}function r(e,t,r,a,n,o){var s,l=oe.setFilters[t.toLowerCase()];return l||ne.error(t),!e&&(s=n)||i(e||"*",a,s=[],n),s.length>0?l(s,r,o):[]}function a(e,a,n,o,s){for(var l,d,u,c,p,h,f,g,m=0,v=s.length,b=H.POS,_=new RegExp("^"+b.source+"(?!"+k+")","i"),y=function(){for(var e=1,i=arguments.length-2;e<i;e++)arguments[e]===t&&(l[e]=t)};m<v;m++){for(b.exec(""),e=s[m],c=[],u=0,p=o;l=b.exec(e);)g=b.lastIndex=l.index+l[0].length,g>u&&(f=e.slice(u,l.index),u=g,h=[a],A.test(f)&&(p&&(h=p),p=o),(d=G.test(f))&&(f=f.slice(0,-5).replace(A,"$&*")),l.length>1&&l[0].replace(_,y),p=r(f,l[1],l[2],h,p,d));p?(c=c.concat(p),(f=e.slice(u))&&")"!==f?A.test(f)?i(f,c,n,o):ne(f,a,n,o?o.concat(p):p):w.apply(n,c)):ne(e,a,n,o)}return 1===v?n:ne.uniqueSort(n)}function n(e,t,i){for(var r,a,n,o=[],s=0,l=q.exec(e),d=!l.pop()&&!l.pop(),u=d&&e.match(E)||[""],c=oe.preFilter,p=oe.filter,h=!i&&t!==g;null!=(a=u[s])&&d;s++)for(o.push(r=[]),h&&(a=" "+a);a;){d=!1,(l=A.exec(a))&&(a=a.slice(l[0].length),d=r.push({part:l.pop().replace(M," "),captures:l}));for(n in p)!(l=H[n].exec(a))||c[n]&&!(l=c[n](l,t,i))||(a=a.slice(l.shift().length),d=r.push({part:n,captures:l}));if(!d)break}return d||ne.error(e),o}function o(e,t,i){var r=t.dir,a=y++;return e||(e=function(e){return e===i}),t.first?function(t,i){for(;t=t[r];)if(1===t.nodeType)return e(t,i)&&t}:function(t,i){for(var n,o=a+"."+c,s=o+"."+u;t=t[r];)if(1===t.nodeType){if((n=t[j])===s)return t.sizset;if("string"==typeof n&&0===n.indexOf(o)){if(t.sizset)return t}else{if(t[j]=s,e(t,i))return t.sizset=!0,t;t.sizset=!1}}}}function s(e,t){return e?function(i,r){var a=t(i,r);return a&&e(a===!0?i:a,r)}:t}function l(e,t,i){for(var r,a,n=0;r=e[n];n++)oe.relative[r.part]?a=o(a,oe.relative[r.part],t):(r.captures.push(t,i),a=s(a,oe.filter[r.part].apply(null,r.captures)));return a}function d(e){return function(t,i){for(var r,a=0;r=e[a];a++)if(r(t,i))return!0;return!1}}var u,c,p,h,f,g=e.document,m=g.documentElement,v="undefined",b=!1,_=!0,y=0,x=[].slice,w=[].push,j=("sizcache"+Math.random()).replace(".",""),k="[\\x20\\t\\r\\n\\f]",C="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",D=C.replace("w","w#"),S="([*^$|!~]?=)",T="\\["+k+"*("+C+")"+k+"*(?:"+S+k+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+D+")|)|)"+k+"*\\]",P=":("+C+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|((?:[^,]|\\\\,|(?:,(?=[^\\[]*\\]))|(?:,(?=[^\\(]*\\))))*))\\)|)",I=":(nth|eq|gt|lt|first|last|even|odd)(?:\\((\\d*)\\)|)(?=[^-]|$)",$=k+"*([\\x20\\t\\r\\n\\f>+~])"+k+"*",F="(?=[^\\x20\\t\\r\\n\\f])(?:\\\\.|"+T+"|"+P.replace(2,7)+"|[^\\\\(),])+",M=new RegExp("^"+k+"+|((?:^|[^\\\\])(?:\\\\.)*)"+k+"+$","g"),A=new RegExp("^"+$),E=new RegExp(F+"?(?="+k+"*,|$)","g"),q=new RegExp("^(?:(?!,)(?:(?:^|,)"+k+"*"+F+")*?|"+k+"*(.*?))(\\)|$)"),O=new RegExp(F.slice(19,-6)+"\\x20\\t\\r\\n\\f>+~])+|"+$,"g"),R=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,N=/[\x20\t\r\n\f]*[+~]/,G=/:not\($/,L=/h\d/i,z=/input|select|textarea|button/i,Q=/\\(?!\\)/g,H={ID:new RegExp("^#("+C+")"),CLASS:new RegExp("^\\.("+C+")"),NAME:new RegExp("^\\[name=['\"]?("+C+")['\"]?\\]"),TAG:new RegExp("^("+C.replace("[-","[-\\*")+")"),ATTR:new RegExp("^"+T),PSEUDO:new RegExp("^"+P),CHILD:new RegExp("^:(only|nth|last|first)-child(?:\\("+k+"*(even|odd|(([+-]|)(\\d*)n|)"+k+"*(?:([+-]|)"+k+"*(\\d+)|))"+k+"*\\)|)","i"),POS:new RegExp(I,"ig"),needsContext:new RegExp("^"+k+"*[>+~]|"+I,"i")},B={},W=[],U={},V=[],K=function(e){return e.sizzleFilter=!0,e},X=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}},Y=function(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}},Z=function(e){var t=!1,i=g.createElement("div");try{t=e(i)}catch(r){}return i=null,t},ee=Z(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),te=Z(function(e){e.id=j+0,e.innerHTML="<a name='"+j+"'></a><div name='"+j+"'></div>",m.insertBefore(e,m.firstChild);var t=g.getElementsByName&&g.getElementsByName(j).length===2+g.getElementsByName(j+0).length;return f=!g.getElementById(j),m.removeChild(e),t}),ie=Z(function(e){return e.appendChild(g.createComment("")),0===e.getElementsByTagName("*").length}),re=Z(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==v&&"#"===e.firstChild.getAttribute("href")}),ae=Z(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!(!e.getElementsByClassName||0===e.getElementsByClassName("e").length)&&(e.lastChild.className="e",1!==e.getElementsByClassName("e").length)}),ne=function(e,t,i,r){i=i||[],t=t||g;var a,n,o,s,l=t.nodeType;if(1!==l&&9!==l)return[];if(!e||"string"!=typeof e)return i;if(o=le(t),!o&&!r&&(a=R.exec(e)))if(s=a[1]){if(9===l){if(n=t.getElementById(s),!n||!n.parentNode)return i;if(n.id===s)return i.push(n),i}else if(t.ownerDocument&&(n=t.ownerDocument.getElementById(s))&&de(t,n)&&n.id===s)return i.push(n),i}else{if(a[2])return w.apply(i,x.call(t.getElementsByTagName(e),0)),i;if((s=a[3])&&ae&&t.getElementsByClassName)return w.apply(i,x.call(t.getElementsByClassName(s),0)),i}return pe(e,t,i,r,o)},oe=ne.selectors={cacheLength:50,match:H,order:["ID","TAG"],attrHandle:{},createPseudo:K,find:{ID:f?function(e,t,i){if(typeof t.getElementById!==v&&!i){var r=t.getElementById(e);return r&&r.parentNode?[r]:[]}}:function(e,i,r){if(typeof i.getElementById!==v&&!r){var a=i.getElementById(e);return a?a.id===e||typeof a.getAttributeNode!==v&&a.getAttributeNode("id").value===e?[a]:t:[]}},TAG:ie?function(e,t){if(typeof t.getElementsByTagName!==v)return t.getElementsByTagName(e)}:function(e,t){var i=t.getElementsByTagName(e);if("*"===e){for(var r,a=[],n=0;r=i[n];n++)1===r.nodeType&&a.push(r);return a}return i}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(Q,""),e[3]=(e[4]||e[5]||"").replace(Q,""),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1]?(e[2]||ne.error(e[0]),e[3]=+(e[3]?e[4]+(e[5]||1):2*("even"===e[2]||"odd"===e[2])),e[4]=+(e[6]+e[7]||"odd"===e[2])):e[2]&&ne.error(e[0]),e},PSEUDO:function(e){var t,i=e[4];return H.CHILD.test(e[0])?null:(i&&(t=q.exec(i))&&t.pop()&&(e[0]=e[0].slice(0,t[0].length-i.length-1),i=t[0].slice(0,-1)),e.splice(2,3,i||e[3]),e)}},filter:{ID:f?function(e){return e=e.replace(Q,""),function(t){return t.getAttribute("id")===e}}:function(e){return e=e.replace(Q,""),function(t){var i=typeof t.getAttributeNode!==v&&t.getAttributeNode("id");return i&&i.value===e}},TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(Q,"").toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=B[e];return t||(t=B[e]=new RegExp("(^|"+k+")"+e+"("+k+"|$)"),W.push(e),W.length>oe.cacheLength&&delete B[W.shift()]),function(e){return t.test(e.className||typeof e.getAttribute!==v&&e.getAttribute("class")||"")}},ATTR:function(e,t,i){return t?function(r){var a=ne.attr(r,e),n=a+"";if(null==a)return"!="===t;switch(t){case"=":return n===i;case"!=":return n!==i;case"^=":return i&&0===n.indexOf(i);case"*=":return i&&n.indexOf(i)>-1;case"$=":return i&&n.substr(n.length-i.length)===i;case"~=":return(" "+n+" ").indexOf(i)>-1;case"|=":return n===i||n.substr(0,i.length+1)===i+"-"}}:function(t){return null!=ne.attr(t,e)}},CHILD:function(e,t,i,r){if("nth"===e){var a=y++;return function(e){var t,n,o=0,s=e;if(1===i&&0===r)return!0;if(t=e.parentNode,t&&(t[j]!==a||!e.sizset)){for(s=t.firstChild;s&&(1!==s.nodeType||(s.sizset=++o,s!==e));s=s.nextSibling);t[j]=a}return n=e.sizset-r,0===i?0===n:n%i===0&&n/i>=0}}return function(t){var i=t;switch(e){case"only":case"first":for(;i=i.previousSibling;)if(1===i.nodeType)return!1;if("first"===e)return!0;i=t;case"last":for(;i=i.nextSibling;)if(1===i.nodeType)return!1;return!0}}},PSEUDO:function(e,t,i,r){var a=oe.pseudos[e]||oe.pseudos[e.toLowerCase()];return a||ne.error("unsupported pseudo: "+e),a.sizzleFilter?a(t,i,r):a}},pseudos:{not:K(function(e,t,i){var r=ce(e.replace(M,"$1"),t,i);return function(e){return!r(e)}}),enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!oe.pseudos.empty(e)},empty:function(e){var t;for(e=e.firstChild;e;){if(e.nodeName>"@"||3===(t=e.nodeType)||4===t)return!1;e=e.nextSibling}return!0},contains:K(function(e){return function(t){return(t.textContent||t.innerText||ue(t)).indexOf(e)>-1}}),has:K(function(e){return function(t){return ne(e,t).length>0}}),header:function(e){return L.test(e.nodeName)},text:function(e){var t,i;return"input"===e.nodeName.toLowerCase()&&"text"===(t=e.type)&&(null==(i=e.getAttribute("type"))||i.toLowerCase()===t)},radio:X("radio"),checkbox:X("checkbox"),file:X("file"),password:X("password"),image:X("image"),submit:Y("submit"),reset:Y("reset"),button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},input:function(e){return z.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return e===t.activeElement&&(!t.hasFocus||t.hasFocus())&&!(!e.type&&!e.href)},active:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(e,t,i){return i?e.slice(1):[e[0]]},last:function(e,t,i){var r=e.pop();return i?e:[r]},even:function(e,t,i){for(var r=[],a=i?1:0,n=e.length;a<n;a+=2)r.push(e[a]);return r},odd:function(e,t,i){for(var r=[],a=i?0:1,n=e.length;a<n;a+=2)r.push(e[a]);return r},lt:function(e,t,i){return i?e.slice(+t):e.slice(0,+t)},gt:function(e,t,i){return i?e.slice(0,+t+1):e.slice(+t+1)},eq:function(e,t,i){var r=e.splice(+t,1);return i?e:r}}};oe.setFilters.nth=oe.setFilters.eq,oe.filters=oe.pseudos,re||(oe.attrHandle={href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}}),te&&(oe.order.push("NAME"),oe.find.NAME=function(e,t){if(typeof t.getElementsByName!==v)return t.getElementsByName(e)}),ae&&(oe.order.splice(1,0,"CLASS"),oe.find.CLASS=function(e,t,i){if(typeof t.getElementsByClassName!==v&&!i)return t.getElementsByClassName(e)});try{x.call(m.childNodes,0)[0].nodeType}catch(se){x=function(e){for(var t,i=[];t=this[e];e++)i.push(t);return i}}var le=ne.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},de=ne.contains=m.compareDocumentPosition?function(e,t){return!!(16&e.compareDocumentPosition(t))}:m.contains?function(e,t){var i=9===e.nodeType?e.documentElement:e,r=t.parentNode;return e===r||!!(r&&1===r.nodeType&&i.contains&&i.contains(r))}:function(e,t){for(;t=t.parentNode;)if(t===e)return!0;return!1},ue=ne.getText=function(e){var t,i="",r=0,a=e.nodeType;if(a){if(1===a||9===a||11===a){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=ue(e)}else if(3===a||4===a)return e.nodeValue}else for(;t=e[r];r++)i+=ue(t);return i};ne.attr=function(e,t){var i,r=le(e);return r||(t=t.toLowerCase()),oe.attrHandle[t]?oe.attrHandle[t](e):ee||r?e.getAttribute(t):(i=e.getAttributeNode(t),i?"boolean"==typeof e[t]?e[t]?t:null:i.specified?i.value:null:null)},ne.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},[0,0].sort(function(){return _=0}),m.compareDocumentPosition?p=function(e,t){return e===t?(b=!0,0):(e.compareDocumentPosition&&t.compareDocumentPosition?4&e.compareDocumentPosition(t):e.compareDocumentPosition)?-1:1}:(p=function(e,t){if(e===t)return b=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var i,r,a=[],n=[],o=e.parentNode,s=t.parentNode,l=o;if(o===s)return h(e,t);if(!o)return-1;if(!s)return 1;for(;l;)a.unshift(l),l=l.parentNode;for(l=s;l;)n.unshift(l),l=l.parentNode;i=a.length,r=n.length;for(var d=0;d<i&&d<r;d++)if(a[d]!==n[d])return h(a[d],n[d]);return d===i?h(e,n[d],-1):h(a[d],t,1)},h=function(e,t,i){if(e===t)return i;for(var r=e.nextSibling;r;){if(r===t)return-1;r=r.nextSibling}return 1}),ne.uniqueSort=function(e){var t,i=1;if(p&&(b=_,e.sort(p),b))for(;t=e[i];i++)t===e[i-1]&&e.splice(i--,1);return e};var ce=ne.compile=function(e,t,i){var r,a,o,s=U[e];if(s&&s.context===t)return s;for(a=n(e,t,i),o=0;r=a[o];o++)a[o]=l(r,t,i);return s=U[e]=d(a),s.context=t,s.runs=s.dirruns=0,V.push(e),V.length>oe.cacheLength&&delete U[V.shift()],s};ne.matches=function(e,t){return ne(e,null,null,t)},ne.matchesSelector=function(e,t){return ne(t,null,null,[e]).length>0};var pe=function(e,t,i,r,n){e=e.replace(M,"$1");var o,s,l,d,p,h,f,g,m,v=e.match(E),b=e.match(O),_=t.nodeType;if(H.POS.test(e))return a(e,t,i,r,v);if(r)o=x.call(r,0);else if(v&&1===v.length){if(b.length>1&&9===_&&!n&&(v=H.ID.exec(b[0]))){if(t=oe.find.ID(v[1],t,n)[0],!t)return i;e=e.slice(b.shift().length)}for(g=(v=N.exec(b[0]))&&!v.index&&t.parentNode||t,m=b.pop(),h=m.split(":not")[0],l=0,d=oe.order.length;l<d;l++)if(f=oe.order[l],v=H[f].exec(h)){if(o=oe.find[f]((v[1]||"").replace(Q,""),g,n),null==o)continue;h===m&&(e=e.slice(0,e.length-m.length)+h.replace(H[f],""),e||w.apply(i,x.call(o,0)));break}}if(e)for(s=ce(e,t,n),c=s.dirruns++,null==o&&(o=oe.find.TAG("*",N.test(e)&&t.parentNode||t)),l=0;p=o[l];l++)u=s.runs++,s(p,t)&&i.push(p);return i};g.querySelectorAll&&!function(){var e,t=pe,i=/'|\\/g,r=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,a=[],n=[":active"],o=m.matchesSelector||m.mozMatchesSelector||m.webkitMatchesSelector||m.oMatchesSelector||m.msMatchesSelector;Z(function(e){e.innerHTML="<select><option selected></option></select>",e.querySelectorAll("[selected]").length||a.push("\\["+k+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||a.push(":checked")}),Z(function(e){e.innerHTML="<p test=''></p>",e.querySelectorAll("[test^='']").length&&a.push("[*^$]="+k+"*(?:\"\"|'')"),e.innerHTML="<input type='hidden'>",e.querySelectorAll(":enabled").length||a.push(":enabled",":disabled")}),a=a.length&&new RegExp(a.join("|")),pe=function(e,r,n,o,s){if(!(o||s||a&&a.test(e)))if(9===r.nodeType)try{return w.apply(n,x.call(r.querySelectorAll(e),0)),n}catch(l){}else if(1===r.nodeType&&"object"!==r.nodeName.toLowerCase()){var d=r.getAttribute("id"),u=d||j,c=N.test(e)&&r.parentNode||r;d?u=u.replace(i,"\\$&"):r.setAttribute("id",u);try{return w.apply(n,x.call(c.querySelectorAll(e.replace(E,"[id='"+u+"'] $&")),0)),n}catch(l){}finally{d||r.removeAttribute("id")}}return t(e,r,n,o,s)},o&&(Z(function(t){e=o.call(t,"div");try{o.call(t,"[test!='']:sizzle"),n.push(oe.match.PSEUDO)}catch(i){}}),n=new RegExp(n.join("|")),ne.matchesSelector=function(t,i){if(i=i.replace(r,"='$1']"),!(le(t)||n.test(i)||a&&a.test(i)))try{var s=o.call(t,i);if(s||e||t.document&&11!==t.document.nodeType)return s}catch(l){}return ne(i,null,null,[t]).length>0})}(),ne.attr=J.attr,J.find=ne,J.expr=ne.selectors,J.expr[":"]=J.expr.pseudos,J.unique=ne.uniqueSort,J.text=ne.getText,J.isXMLDoc=ne.isXML,J.contains=ne.contains}(e);var Ae=/Until$/,Ee=/^(?:parents|prev(?:Until|All))/,qe=/^.[^:#\[\.,]*$/,Oe=J.expr.match.needsContext,Re={children:!0,contents:!0,next:!0,prev:!0};J.fn.extend({find:function(e){var t,i,r,a,n,o,s=this;if("string"!=typeof e)return J(e).filter(function(){for(t=0,i=s.length;t<i;t++)if(J.contains(s[t],this))return!0});for(o=this.pushStack("","find",e),t=0,i=this.length;t<i;t++)if(r=o.length,J.find(e,this[t],o),t>0)for(a=r;a<o.length;a++)for(n=0;n<r;n++)if(o[n]===o[a]){o.splice(a--,1);break}return o},has:function(e){var t,i=J(e,this),r=i.length;return this.filter(function(){for(t=0;t<r;t++)if(J.contains(this,i[t]))return!0})},not:function(e){return this.pushStack(d(this,e,!1),"not",e)},filter:function(e){return this.pushStack(d(this,e,!0),"filter",e)},is:function(e){return!!e&&("string"==typeof e?Oe.test(e)?J(e,this.context).index(this[0])>=0:J.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){for(var i,r=0,a=this.length,n=[],o=Oe.test(e)||"string"!=typeof e?J(e,t||this.context):0;r<a;r++)for(i=this[r];i&&i.ownerDocument&&i!==t&&11!==i.nodeType;){if(o?o.index(i)>-1:J.find.matchesSelector(i,e)){n.push(i);break}i=i.parentNode}return n=n.length>1?J.unique(n):n,this.pushStack(n,"closest",e)},index:function(e){return e?"string"==typeof e?J.inArray(this[0],J(e)):J.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var i="string"==typeof e?J(e,t):J.makeArray(e&&e.nodeType?[e]:e),r=J.merge(this.get(),i);return this.pushStack(s(i[0])||s(r[0])?r:J.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),J.fn.andSelf=J.fn.addBack,J.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return J.dir(e,"parentNode")},parentsUntil:function(e,t,i){return J.dir(e,"parentNode",i)},next:function(e){return l(e,"nextSibling")},prev:function(e){return l(e,"previousSibling")},nextAll:function(e){return J.dir(e,"nextSibling")},prevAll:function(e){return J.dir(e,"previousSibling")},nextUntil:function(e,t,i){return J.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return J.dir(e,"previousSibling",i)},siblings:function(e){return J.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return J.sibling(e.firstChild)},contents:function(e){return J.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:J.merge([],e.childNodes)}},function(e,t){J.fn[e]=function(i,r){var a=J.map(this,t,i);return Ae.test(e)||(r=i),r&&"string"==typeof r&&(a=J.filter(r,a)),a=this.length>1&&!Re[e]?J.unique(a):a,this.length>1&&Ee.test(e)&&(a=a.reverse()),this.pushStack(a,e,U.call(arguments).join(","))}}),J.extend({filter:function(e,t,i){return i&&(e=":not("+e+")"),1===t.length?J.find.matchesSelector(t[0],e)?[t[0]]:[]:J.find.matches(e,t)},dir:function(e,i,r){for(var a=[],n=e[i];n&&9!==n.nodeType&&(r===t||1!==n.nodeType||!J(n).is(r));)1===n.nodeType&&a.push(n),n=n[i];return a},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}});var Ne="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Ge=/ jQuery\d+="(?:null|\d+)"/g,Le=/^\s+/,ze=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Qe=/<([\w:]+)/,He=/<tbody/i,Be=/<|&#?\w+;/,We=/<(?:script|style|link)/i,Ue=/<(?:script|object|embed|option|style)/i,Ve=new RegExp("<(?:"+Ne+")[\\s/>]","i"),Ke=/^(?:checkbox|radio)$/,Xe=/checked\s*(?:[^=]|=\s*.checked.)/i,Ye=/\/(java|ecma)script/i,Je=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Ze={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},et=u(L),tt=et.appendChild(L.createElement("div"));Ze.optgroup=Ze.option,Ze.tbody=Ze.tfoot=Ze.colgroup=Ze.caption=Ze.thead,Ze.th=Ze.td,J.support.htmlSerialize||(Ze._default=[1,"X<div>","</div>"]),J.fn.extend({text:function(e){return J.access(this,function(e){return e===t?J.text(this):this.empty().append((this[0]&&this[0].ownerDocument||L).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(J.isFunction(e))return this.each(function(t){J(this).wrapAll(e.call(this,t))});if(this[0]){var t=J(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return J.isFunction(e)?this.each(function(t){J(this).wrapInner(e.call(this,t))}):this.each(function(){var t=J(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=J.isFunction(e);return this.each(function(i){J(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){J.nodeName(this,"body")||J(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){1!==this.nodeType&&11!==this.nodeType||this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){1!==this.nodeType&&11!==this.nodeType||this.insertBefore(e,this.firstChild)})},before:function(){if(!s(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=J.clean(arguments);return this.pushStack(J.merge(e,this),"before",this.selector)}},after:function(){if(!s(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=J.clean(arguments);return this.pushStack(J.merge(this,e),"after",this.selector)}},remove:function(e,t){for(var i,r=0;null!=(i=this[r]);r++)e&&!J.filter(e,[i]).length||(t||1!==i.nodeType||(J.cleanData(i.getElementsByTagName("*")),J.cleanData([i])),i.parentNode&&i.parentNode.removeChild(i));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)for(1===e.nodeType&&J.cleanData(e.getElementsByTagName("*"));e.firstChild;)e.removeChild(e.firstChild);return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return J.clone(this,e,t)})},html:function(e){return J.access(this,function(e){var i=this[0]||{},r=0,a=this.length;if(e===t)return 1===i.nodeType?i.innerHTML.replace(Ge,""):t;if("string"==typeof e&&!We.test(e)&&(J.support.htmlSerialize||!Ve.test(e))&&(J.support.leadingWhitespace||!Le.test(e))&&!Ze[(Qe.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(ze,"<$1></$2>");try{for(;r<a;r++)i=this[r]||{},1===i.nodeType&&(J.cleanData(i.getElementsByTagName("*")),i.innerHTML=e);i=0}catch(n){}}i&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return s(this[0])?this.length?this.pushStack(J(J.isFunction(e)?e():e),"replaceWith",e):this:J.isFunction(e)?this.each(function(t){var i=J(this),r=i.html();i.replaceWith(e.call(this,t,r))}):("string"!=typeof e&&(e=J(e).detach()),this.each(function(){var t=this.nextSibling,i=this.parentNode;J(this).remove(),t?J(t).before(e):J(i).append(e)}))},detach:function(e){return this.remove(e,!0)},domManip:function(e,i,r){e=[].concat.apply([],e);var a,n,o,s,l=0,d=e[0],u=[],p=this.length;if(!J.support.checkClone&&p>1&&"string"==typeof d&&Xe.test(d))return this.each(function(){J(this).domManip(e,i,r)});if(J.isFunction(d))return this.each(function(a){var n=J(this);e[0]=d.call(this,a,i?n.html():t),n.domManip(e,i,r)});if(this[0]){if(a=J.buildFragment(e,this,u),o=a.fragment,n=o.firstChild,1===o.childNodes.length&&(o=n),n)for(i=i&&J.nodeName(n,"tr"),s=a.cacheable||p-1;l<p;l++)r.call(i&&J.nodeName(this[l],"table")?c(this[l],"tbody"):this[l],l===s?o:J.clone(o,!0,!0));o=n=null,u.length&&J.each(u,function(e,t){t.src?J.ajax?J.ajax({url:t.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):J.error("no ajax"):J.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Je,"")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),J.buildFragment=function(e,i,r){var a,n,o,s=e[0];return i=i||L,i=(i[0]||i).ownerDocument||i[0]||i,"undefined"==typeof i.createDocumentFragment&&(i=L),!(1===e.length&&"string"==typeof s&&s.length<512&&i===L&&"<"===s.charAt(0))||Ue.test(s)||!J.support.checkClone&&Xe.test(s)||!J.support.html5Clone&&Ve.test(s)||(n=!0,a=J.fragments[s],o=a!==t),a||(a=i.createDocumentFragment(),J.clean(e,i,a,r),n&&(J.fragments[s]=o&&a)),{fragment:a,cacheable:n}},J.fragments={},J.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){J.fn[e]=function(i){var r,a=0,n=[],o=J(i),s=o.length,l=1===this.length&&this[0].parentNode;if((null==l||l&&11===l.nodeType&&1===l.childNodes.length)&&1===s)return o[t](this[0]),this;for(;a<s;a++)r=(a>0?this.clone(!0):this).get(),J(o[a])[t](r),n=n.concat(r);return this.pushStack(n,e,o.selector)}}),J.extend({clone:function(e,t,i){var r,a,n,o;if(J.support.html5Clone||J.isXMLDoc(e)||!Ve.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(tt.innerHTML=e.outerHTML,tt.removeChild(o=tt.firstChild)),!(J.support.noCloneEvent&&J.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||J.isXMLDoc(e)))for(h(e,o),r=f(e),a=f(o),n=0;r[n];++n)a[n]&&h(r[n],a[n]);if(t&&(p(e,o),i))for(r=f(e),a=f(o),n=0;r[n];++n)p(r[n],a[n]);return r=a=null,o},clean:function(e,t,i,r){var a,n,o,s,l,d,c,p,h,f,m,v=0,b=[];for(t&&"undefined"!=typeof t.createDocumentFragment||(t=L),n=t===L&&et;null!=(o=e[v]);v++)if("number"==typeof o&&(o+=""),o){if("string"==typeof o)if(Be.test(o)){for(n=n||u(t),c=c||n.appendChild(t.createElement("div")),o=o.replace(ze,"<$1></$2>"),s=(Qe.exec(o)||["",""])[1].toLowerCase(),l=Ze[s]||Ze._default,d=l[0],c.innerHTML=l[1]+o+l[2];d--;)c=c.lastChild;if(!J.support.tbody)for(p=He.test(o),h="table"!==s||p?"<table>"!==l[1]||p?[]:c.childNodes:c.firstChild&&c.firstChild.childNodes,a=h.length-1;a>=0;--a)J.nodeName(h[a],"tbody")&&!h[a].childNodes.length&&h[a].parentNode.removeChild(h[a]);!J.support.leadingWhitespace&&Le.test(o)&&c.insertBefore(t.createTextNode(Le.exec(o)[0]),c.firstChild),o=c.childNodes,c=n.lastChild}else o=t.createTextNode(o);o.nodeType?b.push(o):b=J.merge(b,o)}if(c&&(n.removeChild(c),o=c=n=null),!J.support.appendChecked)for(v=0;null!=(o=b[v]);v++)J.nodeName(o,"input")?g(o):"undefined"!=typeof o.getElementsByTagName&&J.grep(o.getElementsByTagName("input"),g);if(i)for(f=function(e){if(!e.type||Ye.test(e.type))return r?r.push(e.parentNode?e.parentNode.removeChild(e):e):i.appendChild(e)},v=0;null!=(o=b[v]);v++)J.nodeName(o,"script")&&f(o)||(i.appendChild(o),"undefined"!=typeof o.getElementsByTagName&&(m=J.grep(J.merge([],o.getElementsByTagName("script")),f),b.splice.apply(b,[v+1,0].concat(m)),v+=m.length));return b},cleanData:function(e,t){for(var i,r,a,n,o=0,s=J.expando,l=J.cache,d=J.support.deleteExpando,u=J.event.special;null!=(a=e[o]);o++)if((t||J.acceptData(a))&&(r=a[s],i=r&&l[r])){if(i.events)for(n in i.events)u[n]?J.event.remove(a,n):J.removeEvent(a,n,i.handle);l[r]&&(delete l[r],d?delete a[s]:a.removeAttribute?a.removeAttribute(s):a[s]=null,J.deletedIds.push(r))}}}),function(){var e,t;J.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e=J.uaMatch(Q.userAgent),t={},e.browser&&(t[e.browser]=!0,t.version=e.version),t.webkit&&(t.safari=!0),J.browser=t,J.sub=function(){function e(t,i){return new e.fn.init(t,i)}J.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(i,r){return r&&r instanceof J&&!(r instanceof e)&&(r=e(r)),J.fn.init.call(this,i,r,t)},e.fn.init.prototype=e.fn;var t=e(L);return e}}();var it,rt,at,nt=/alpha\([^)]*\)/i,ot=/opacity=([^)]*)/,st=/^(top|right|bottom|left)$/,lt=/^margin/,dt=new RegExp("^("+Z+")(.*)$","i"),ut=new RegExp("^("+Z+")(?!px)[a-z%]+$","i"),ct=new RegExp("^([-+])=("+Z+")","i"),pt={},ht={position:"absolute",visibility:"hidden",display:"block"},ft={letterSpacing:0,fontWeight:400,lineHeight:1},gt=["Top","Right","Bottom","Left"],mt=["Webkit","O","Moz","ms"],vt=J.fn.toggle;J.fn.extend({css:function(e,i){return J.access(this,function(e,i,r){return r!==t?J.style(e,i,r):J.css(e,i)},e,i,arguments.length>1)},show:function(){return b(this,!0)},hide:function(){return b(this)},toggle:function(e,t){var i="boolean"==typeof e;return J.isFunction(e)&&J.isFunction(t)?vt.apply(this,arguments):this.each(function(){(i?e:v(this))?J(this).show():J(this).hide()})}}),J.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=it(e,"opacity");return""===i?"1":i}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":J.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,i,r,a){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var n,o,s,l=J.camelCase(i),d=e.style;if(i=J.cssProps[l]||(J.cssProps[l]=m(d,l)),s=J.cssHooks[i]||J.cssHooks[l],r===t)return s&&"get"in s&&(n=s.get(e,!1,a))!==t?n:d[i];if(o=typeof r,"string"===o&&(n=ct.exec(r))&&(r=(n[1]+1)*n[2]+parseFloat(J.css(e,i)),o="number"),!(null==r||"number"===o&&isNaN(r)||("number"!==o||J.cssNumber[l]||(r+="px"),s&&"set"in s&&(r=s.set(e,r,a))===t)))try{d[i]=r}catch(u){}}},css:function(e,i,r,a){var n,o,s,l=J.camelCase(i);return i=J.cssProps[l]||(J.cssProps[l]=m(e.style,l)),s=J.cssHooks[i]||J.cssHooks[l],s&&"get"in s&&(n=s.get(e,!0,a)),n===t&&(n=it(e,i)),"normal"===n&&i in ft&&(n=ft[i]),r||a!==t?(o=parseFloat(n),r||J.isNumeric(o)?o||0:n):n},swap:function(e,t,i){var r,a,n={};for(a in t)n[a]=e.style[a],e.style[a]=t[a];r=i.call(e);for(a in t)e.style[a]=n[a];return r}}),e.getComputedStyle?it=function(e,t){var i,r,a,n,o=getComputedStyle(e,null),s=e.style;return o&&(i=o[t],""!==i||J.contains(e.ownerDocument.documentElement,e)||(i=J.style(e,t)),ut.test(i)&&lt.test(t)&&(r=s.width,a=s.minWidth,n=s.maxWidth,s.minWidth=s.maxWidth=s.width=i,i=o.width,s.width=r,s.minWidth=a,s.maxWidth=n)),i}:L.documentElement.currentStyle&&(it=function(e,t){var i,r,a=e.currentStyle&&e.currentStyle[t],n=e.style;return null==a&&n&&n[t]&&(a=n[t]),ut.test(a)&&!st.test(t)&&(i=n.left,r=e.runtimeStyle&&e.runtimeStyle.left,r&&(e.runtimeStyle.left=e.currentStyle.left),n.left="fontSize"===t?"1em":a,a=n.pixelLeft+"px",n.left=i,r&&(e.runtimeStyle.left=r)),""===a?"auto":a}),J.each(["height","width"],function(e,t){J.cssHooks[t]={get:function(e,i,r){if(i)return 0!==e.offsetWidth||"none"!==it(e,"display")?x(e,t,r):J.swap(e,ht,function(){return x(e,t,r)})},set:function(e,i,r){return _(e,i,r?y(e,t,r,J.support.boxSizing&&"border-box"===J.css(e,"boxSizing")):0)}}}),J.support.opacity||(J.cssHooks.opacity={get:function(e,t){return ot.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var i=e.style,r=e.currentStyle,a=J.isNumeric(t)?"alpha(opacity="+100*t+")":"",n=r&&r.filter||i.filter||"";i.zoom=1,t>=1&&""===J.trim(n.replace(nt,""))&&i.removeAttribute&&(i.removeAttribute("filter"),r&&!r.filter)||(i.filter=nt.test(n)?n.replace(nt,a):n+" "+a)}}),J(function(){J.support.reliableMarginRight||(J.cssHooks.marginRight={get:function(e,t){return J.swap(e,{display:"inline-block"},function(){if(t)return it(e,"marginRight")})}}),!J.support.pixelPosition&&J.fn.position&&J.each(["top","left"],function(e,t){J.cssHooks[t]={get:function(e,i){if(i){var r=it(e,t);return ut.test(r)?J(e).position()[t]+"px":r}}}})}),J.expr&&J.expr.filters&&(J.expr.filters.hidden=function(e){return 0===e.offsetWidth&&0===e.offsetHeight||!J.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||it(e,"display"))},J.expr.filters.visible=function(e){return!J.expr.filters.hidden(e)}),J.each({margin:"",padding:"",border:"Width"},function(e,t){J.cssHooks[e+t]={expand:function(i){var r,a="string"==typeof i?i.split(" "):[i],n={};for(r=0;r<4;r++)n[e+gt[r]+t]=a[r]||a[r-2]||a[0];return n}},lt.test(e)||(J.cssHooks[e+t].set=_)});var bt=/%20/g,_t=/\[\]$/,yt=/\r?\n/g,xt=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,wt=/^(?:select|textarea)/i;J.fn.extend({serialize:function(){return J.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?J.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||wt.test(this.nodeName)||xt.test(this.type))}).map(function(e,t){var i=J(this).val();return null==i?null:J.isArray(i)?J.map(i,function(e,i){return{name:t.name,value:e.replace(yt,"\r\n")}}):{name:t.name,value:i.replace(yt,"\r\n")}}).get()}}),J.param=function(e,i){var r,a=[],n=function(e,t){t=J.isFunction(t)?t():null==t?"":t,
a[a.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(i===t&&(i=J.ajaxSettings&&J.ajaxSettings.traditional),J.isArray(e)||e.jquery&&!J.isPlainObject(e))J.each(e,function(){n(this.name,this.value)});else for(r in e)j(r,e[r],i,n);return a.join("&").replace(bt,"+")};var jt,kt,Ct=/#.*$/,Dt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,St=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Tt=/^(?:GET|HEAD)$/,Pt=/^\/\//,It=/\?/,$t=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Ft=/([?&])_=[^&]*/,Mt=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,At=J.fn.load,Et={},qt={},Ot=["*/"]+["*"];try{jt=z.href}catch(Rt){jt=L.createElement("a"),jt.href="",jt=jt.href}kt=Mt.exec(jt.toLowerCase())||[],J.fn.load=function(e,i,r){if("string"!=typeof e&&At)return At.apply(this,arguments);if(!this.length)return this;var a,n,o,s=this,l=e.indexOf(" ");return l>=0&&(a=e.slice(l,e.length),e=e.slice(0,l)),J.isFunction(i)?(r=i,i=t):"object"==typeof i&&(n="POST"),J.ajax({url:e,type:n,dataType:"html",data:i,complete:function(e,t){r&&s.each(r,o||[e.responseText,t,e])}}).done(function(e){o=arguments,s.html(a?J("<div>").append(e.replace($t,"")).find(a):e)}),this},J.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){J.fn[t]=function(e){return this.on(t,e)}}),J.each(["get","post"],function(e,i){J[i]=function(e,r,a,n){return J.isFunction(r)&&(n=n||a,a=r,r=t),J.ajax({type:i,url:e,data:r,success:a,dataType:n})}}),J.extend({getScript:function(e,i){return J.get(e,t,i,"script")},getJSON:function(e,t,i){return J.get(e,t,i,"json")},ajaxSetup:function(e,t){return t?D(e,J.ajaxSettings):(t=e,e=J.ajaxSettings),D(e,t),e},ajaxSettings:{url:jt,isLocal:St.test(kt[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Ot},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":J.parseJSON,"text xml":J.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:k(Et),ajaxTransport:k(qt),ajax:function(e,i){function r(e,i,r,o){var d,c,b,_,x,j=i;2!==y&&(y=2,l&&clearTimeout(l),s=t,n=o||"",w.readyState=e>0?4:0,r&&(_=S(p,w,r)),e>=200&&e<300||304===e?(p.ifModified&&(x=w.getResponseHeader("Last-Modified"),x&&(J.lastModified[a]=x),x=w.getResponseHeader("Etag"),x&&(J.etag[a]=x)),304===e?(j="notmodified",d=!0):(d=T(p,_),j=d.state,c=d.data,b=d.error,d=!b)):(b=j,j&&!e||(j="error",e<0&&(e=0))),w.status=e,w.statusText=""+(i||j),d?g.resolveWith(h,[c,j,w]):g.rejectWith(h,[w,j,b]),w.statusCode(v),v=t,u&&f.trigger("ajax"+(d?"Success":"Error"),[w,p,d?c:b]),m.fireWith(h,[w,j]),u&&(f.trigger("ajaxComplete",[w,p]),--J.active||J.event.trigger("ajaxStop")))}"object"==typeof e&&(i=e,e=t),i=i||{};var a,n,o,s,l,d,u,c,p=J.ajaxSetup({},i),h=p.context||p,f=h!==p&&(h.nodeType||h instanceof J)?J(h):J.event,g=J.Deferred(),m=J.Callbacks("once memory"),v=p.statusCode||{},b={},_={},y=0,x="canceled",w={readyState:0,setRequestHeader:function(e,t){if(!y){var i=e.toLowerCase();e=_[i]=_[i]||e,b[e]=t}return this},getAllResponseHeaders:function(){return 2===y?n:null},getResponseHeader:function(e){var i;if(2===y){if(!o)for(o={};i=Dt.exec(n);)o[i[1].toLowerCase()]=i[2];i=o[e.toLowerCase()]}return i===t?null:i},overrideMimeType:function(e){return y||(p.mimeType=e),this},abort:function(e){return e=e||x,s&&s.abort(e),r(0,e),this}};if(g.promise(w),w.success=w.done,w.error=w.fail,w.complete=m.add,w.statusCode=function(e){if(e){var t;if(y<2)for(t in e)v[t]=[v[t],e[t]];else t=e[w.status],w.always(t)}return this},p.url=((e||p.url)+"").replace(Ct,"").replace(Pt,kt[1]+"//"),p.dataTypes=J.trim(p.dataType||"*").toLowerCase().split(te),null==p.crossDomain&&(d=Mt.exec(p.url.toLowerCase()),p.crossDomain=!(!d||d[1]==kt[1]&&d[2]==kt[2]&&(d[3]||("http:"===d[1]?80:443))==(kt[3]||("http:"===kt[1]?80:443)))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=J.param(p.data,p.traditional)),C(Et,p,i,w),2===y)return w;if(u=p.global,p.type=p.type.toUpperCase(),p.hasContent=!Tt.test(p.type),u&&0===J.active++&&J.event.trigger("ajaxStart"),!p.hasContent&&(p.data&&(p.url+=(It.test(p.url)?"&":"?")+p.data,delete p.data),a=p.url,p.cache===!1)){var j=J.now(),k=p.url.replace(Ft,"$1_="+j);p.url=k+(k===p.url?(It.test(p.url)?"&":"?")+"_="+j:"")}(p.data&&p.hasContent&&p.contentType!==!1||i.contentType)&&w.setRequestHeader("Content-Type",p.contentType),p.ifModified&&(a=a||p.url,J.lastModified[a]&&w.setRequestHeader("If-Modified-Since",J.lastModified[a]),J.etag[a]&&w.setRequestHeader("If-None-Match",J.etag[a])),w.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Ot+"; q=0.01":""):p.accepts["*"]);for(c in p.headers)w.setRequestHeader(c,p.headers[c]);if(p.beforeSend&&(p.beforeSend.call(h,w,p)===!1||2===y))return w.abort();x="abort";for(c in{success:1,error:1,complete:1})w[c](p[c]);if(s=C(qt,p,i,w)){w.readyState=1,u&&f.trigger("ajaxSend",[w,p]),p.async&&p.timeout>0&&(l=setTimeout(function(){w.abort("timeout")},p.timeout));try{y=1,s.send(b,r)}catch(D){if(!(y<2))throw D;r(-1,D)}}else r(-1,"No Transport");return w},active:0,lastModified:{},etag:{}});var Nt=[],Gt=/\?/,Lt=/(=)\?(?=&|$)|\?\?/,zt=J.now();J.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Nt.pop()||J.expando+"_"+zt++;return this[e]=!0,e}}),J.ajaxPrefilter("json jsonp",function(i,r,a){var n,o,s,l=i.data,d=i.url,u=i.jsonp!==!1,c=u&&Lt.test(d),p=u&&!c&&"string"==typeof l&&!(i.contentType||"").indexOf("application/x-www-form-urlencoded")&&Lt.test(l);if("jsonp"===i.dataTypes[0]||c||p)return n=i.jsonpCallback=J.isFunction(i.jsonpCallback)?i.jsonpCallback():i.jsonpCallback,o=e[n],c?i.url=d.replace(Lt,"$1"+n):p?i.data=l.replace(Lt,"$1"+n):u&&(i.url+=(Gt.test(d)?"&":"?")+i.jsonp+"="+n),i.converters["script json"]=function(){return s||J.error(n+" was not called"),s[0]},i.dataTypes[0]="json",e[n]=function(){s=arguments},a.always(function(){e[n]=o,i[n]&&(i.jsonpCallback=r.jsonpCallback,Nt.push(n)),s&&J.isFunction(o)&&o(s[0]),s=o=t}),"script"}),J.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return J.globalEval(e),e}}}),J.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),J.ajaxTransport("script",function(e){if(e.crossDomain){var i,r=L.head||L.getElementsByTagName("head")[0]||L.documentElement;return{send:function(a,n){i=L.createElement("script"),i.async="async",e.scriptCharset&&(i.charset=e.scriptCharset),i.src=e.url,i.onload=i.onreadystatechange=function(e,a){(a||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,r&&i.parentNode&&r.removeChild(i),i=t,a||n(200,"success"))},r.insertBefore(i,r.firstChild)},abort:function(){i&&i.onload(0,1)}}}});var Qt,Ht=!!e.ActiveXObject&&function(){for(var e in Qt)Qt[e](0,1)},Bt=0;J.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&P()||I()}:P,function(e){J.extend(J.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(J.ajaxSettings.xhr()),J.support.ajax&&J.ajaxTransport(function(i){if(!i.crossDomain||J.support.cors){var r;return{send:function(a,n){var o,s,l=i.xhr();if(i.username?l.open(i.type,i.url,i.async,i.username,i.password):l.open(i.type,i.url,i.async),i.xhrFields)for(s in i.xhrFields)l[s]=i.xhrFields[s];i.mimeType&&l.overrideMimeType&&l.overrideMimeType(i.mimeType),i.crossDomain||a["X-Requested-With"]||(a["X-Requested-With"]="XMLHttpRequest");try{for(s in a)l.setRequestHeader(s,a[s])}catch(d){}l.send(i.hasContent&&i.data||null),r=function(e,a){var s,d,u,c,p;try{if(r&&(a||4===l.readyState))if(r=t,o&&(l.onreadystatechange=J.noop,Ht&&delete Qt[o]),a)4!==l.readyState&&l.abort();else{s=l.status,u=l.getAllResponseHeaders(),c={},p=l.responseXML,p&&p.documentElement&&(c.xml=p);try{c.text=l.responseText}catch(e){}try{d=l.statusText}catch(h){d=""}s||!i.isLocal||i.crossDomain?1223===s&&(s=204):s=c.text?200:404}}catch(f){a||n(-1,f)}c&&n(s,d,c,u)},i.async?4===l.readyState?setTimeout(r,0):(o=++Bt,Ht&&(Qt||(Qt={},J(e).unload(Ht)),Qt[o]=r),l.onreadystatechange=r):r()},abort:function(){r&&r(0,1)}}}});var Wt,Ut,Vt=/^(?:toggle|show|hide)$/,Kt=new RegExp("^(?:([-+])=|)("+Z+")([a-z%]*)$","i"),Xt=/queueHooks$/,Yt=[E],Jt={"*":[function(e,t){var i,r,a,n=this.createTween(e,t),o=Kt.exec(t),s=n.cur(),l=+s||0,d=1;if(o){if(i=+o[2],r=o[3]||(J.cssNumber[e]?"":"px"),"px"!==r&&l){l=J.css(n.elem,e,!0)||i||1;do a=d=d||".5",l/=d,J.style(n.elem,e,l+r),d=n.cur()/s;while(1!==d&&d!==a)}n.unit=r,n.start=l,n.end=o[1]?l+(o[1]+1)*i:i}return n}]};J.Animation=J.extend(M,{tweener:function(e,t){J.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var i,r=0,a=e.length;r<a;r++)i=e[r],Jt[i]=Jt[i]||[],Jt[i].unshift(t)},prefilter:function(e,t){t?Yt.unshift(e):Yt.push(e)}}),J.Tween=q,q.prototype={constructor:q,init:function(e,t,i,r,a,n){this.elem=e,this.prop=i,this.easing=a||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=n||(J.cssNumber[i]?"":"px")},cur:function(){var e=q.propHooks[this.prop];return e&&e.get?e.get(this):q.propHooks._default.get(this)},run:function(e){var t,i=q.propHooks[this.prop];return this.pos=t=J.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration),this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):q.propHooks._default.set(this),this}},q.prototype.init.prototype=q.prototype,q.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=J.css(e.elem,e.prop,!1,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){J.fx.step[e.prop]?J.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[J.cssProps[e.prop]]||J.cssHooks[e.prop])?J.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},q.propHooks.scrollTop=q.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},J.each(["toggle","show","hide"],function(e,t){var i=J.fn[t];J.fn[t]=function(r,a,n){return null==r||"boolean"==typeof r||!e&&J.isFunction(r)&&J.isFunction(a)?i.apply(this,arguments):this.animate(O(t,!0),r,a,n)}}),J.fn.extend({fadeTo:function(e,t,i,r){return this.filter(v).css("opacity",0).show().end().animate({opacity:t},e,i,r)},animate:function(e,t,i,r){var a=J.isEmptyObject(e),n=J.speed(t,i,r),o=function(){var t=M(this,J.extend({},e),n);a&&t.stop(!0)};return a||n.queue===!1?this.each(o):this.queue(n.queue,o)},stop:function(e,i,r){var a=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=i,i=e,e=t),i&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",n=J.timers,o=J._data(this);if(i)o[i]&&o[i].stop&&a(o[i]);else for(i in o)o[i]&&o[i].stop&&Xt.test(i)&&a(o[i]);for(i=n.length;i--;)n[i].elem!==this||null!=e&&n[i].queue!==e||(n[i].anim.stop(r),t=!1,n.splice(i,1));!t&&r||J.dequeue(this,e)})}}),J.each({slideDown:O("show"),slideUp:O("hide"),slideToggle:O("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){J.fn[e]=function(e,i,r){return this.animate(t,e,i,r)}}),J.speed=function(e,t,i){var r=e&&"object"==typeof e?J.extend({},e):{complete:i||!i&&t||J.isFunction(e)&&e,duration:e,easing:i&&t||t&&!J.isFunction(t)&&t};return r.duration=J.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in J.fx.speeds?J.fx.speeds[r.duration]:J.fx.speeds._default,null!=r.queue&&r.queue!==!0||(r.queue="fx"),r.old=r.complete,r.complete=function(){J.isFunction(r.old)&&r.old.call(this),r.queue&&J.dequeue(this,r.queue)},r},J.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},J.timers=[],J.fx=q.prototype.init,J.fx.tick=function(){for(var e,t=J.timers,i=0;i<t.length;i++)e=t[i],e()||t[i]!==e||t.splice(i--,1);t.length||J.fx.stop()},J.fx.timer=function(e){e()&&J.timers.push(e)&&!Ut&&(Ut=setInterval(J.fx.tick,J.fx.interval))},J.fx.interval=13,J.fx.stop=function(){clearInterval(Ut),Ut=null},J.fx.speeds={slow:600,fast:200,_default:400},J.fx.step={},J.expr&&J.expr.filters&&(J.expr.filters.animated=function(e){return J.grep(J.timers,function(t){return e===t.elem}).length});var Zt=/^(?:body|html)$/i;J.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){J.offset.setOffset(this,e,t)});var i,r,a,n,o,s,l,d,u,c,p=this[0],h=p&&p.ownerDocument;if(h)return(a=h.body)===p?J.offset.bodyOffset(p):(r=h.documentElement,J.contains(r,p)?(i=p.getBoundingClientRect(),n=R(h),o=r.clientTop||a.clientTop||0,s=r.clientLeft||a.clientLeft||0,l=n.pageYOffset||r.scrollTop,d=n.pageXOffset||r.scrollLeft,u=i.top+l-o,c=i.left+d-s,{top:u,left:c}):{top:0,left:0})},J.offset={bodyOffset:function(e){var t=e.offsetTop,i=e.offsetLeft;return J.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(J.css(e,"marginTop"))||0,i+=parseFloat(J.css(e,"marginLeft"))||0),{top:t,left:i}},setOffset:function(e,t,i){var r=J.css(e,"position");"static"===r&&(e.style.position="relative");var a,n,o=J(e),s=o.offset(),l=J.css(e,"top"),d=J.css(e,"left"),u=("absolute"===r||"fixed"===r)&&J.inArray("auto",[l,d])>-1,c={},p={};u?(p=o.position(),a=p.top,n=p.left):(a=parseFloat(l)||0,n=parseFloat(d)||0),J.isFunction(t)&&(t=t.call(e,i,s)),null!=t.top&&(c.top=t.top-s.top+a),null!=t.left&&(c.left=t.left-s.left+n),"using"in t?t.using.call(e,c):o.css(c)}},J.fn.extend({position:function(){if(this[0]){var e=this[0],t=this.offsetParent(),i=this.offset(),r=Zt.test(t[0].nodeName)?{top:0,left:0}:t.offset();return i.top-=parseFloat(J.css(e,"marginTop"))||0,i.left-=parseFloat(J.css(e,"marginLeft"))||0,r.top+=parseFloat(J.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(J.css(t[0],"borderLeftWidth"))||0,{top:i.top-r.top,left:i.left-r.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||L.body;e&&!Zt.test(e.nodeName)&&"static"===J.css(e,"position");)e=e.offsetParent;return e||L.body})}}),J.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,i){var r=/Y/.test(i);J.fn[e]=function(a){return J.access(this,function(e,a,n){var o=R(e);return n===t?o?i in o?o[i]:o.document.documentElement[a]:e[a]:void(o?o.scrollTo(r?J(o).scrollLeft():n,r?n:J(o).scrollTop()):e[a]=n)},e,a,arguments.length,null)}}),J.each({Height:"height",Width:"width"},function(e,i){J.each({padding:"inner"+e,content:i,"":"outer"+e},function(r,a){J.fn[a]=function(a,n){var o=arguments.length&&(r||"boolean"!=typeof a),s=r||(a===!0||n===!0?"margin":"border");return J.access(this,function(i,r,a){var n;return J.isWindow(i)?i.document.documentElement["client"+e]:9===i.nodeType?(n=i.documentElement,Math.max(i.body["scroll"+e],n["scroll"+e],i.body["offset"+e],n["offset"+e],n["client"+e])):a===t?J.css(i,r,a,s):J.style(i,r,a,s)},i,o?a:t,o)}})}),e.jQuery=e.$=J,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return J})}(window),/*!
 * Copyright 2016 E.J.I.E., S.A.
 *
 * Licencia con arreglo a la EUPL, Versión 1.1 exclusivamente (la «Licencia»);
 * Solo podrá usarse esta obra si se respeta la Licencia.
 * Puede obtenerse una copia de la Licencia en
 *
 *      http://ec.europa.eu/idabc/eupl.html
 *
 * Salvo cuando lo exija la legislación aplicable o se acuerde por escrito,
 * el programa distribuido con arreglo a la Licencia se distribuye «TAL CUAL»,
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ni expresas ni implícitas.
 * Véase la Licencia en el idioma concreto que rige los permisos y limitaciones
 * que establece la Licencia.
 */
function(e){e.rup_utils={},e.rup_utils.arr=[],e.rup_utils.autoGenerateIdNum=0,e.extend(e.rup_utils,{capitalizedLang:function(){return null==e.rup.lang?"":e.rup.lang.charAt(0).toUpperCase()+e.rup.lang.slice(1)},getJson:function(t,i){var r=e.extend({},t),a=i.split(".");if(1===a.length)return t[a[0]];for(var n=0;n<a.length;n++)r=r[a[n]];return r},setJson:function(e,t,i){var r=e,a=t.split(".");if(1===a.length)e[a[0]]=i;else{for(var n=0;n<a.length-1;n++)r=r[a[n]];r[a[a.length-1]]=i}},jsontoarray:function(e){function t(e,r){if(r=r||"",void 0===e||null===e)t("",r);else if(e.constructor==Object)for(var a in e){var n=r+(""==r?a:"."+a);t(e[a],n)}else if(e.constructor==Array)if(0==e.length)t("[]",r);else for(var o=0;o<e.length;o++){var s="["+o+"]",n=r+s;t(e[o],n)}else void 0==i[r]?i[r]=e:i[r].constructor!=Array?i[r]=[i[r],e]:i[r].push(e)}var i=[];return t(e),i},unnestjson:function(t){var i=e.rup_utils.jsontoarray(t),r={};for(key in i)e.isFunction(i[key])||(r[key]=i[key]);return r},elementFromPoint:function(t,i,r){var a=!0,n=r||!0;if(!document.elementFromPoint)return null;if(!n){var o;(o=e(document).scrollTop())>0?a=null==document.elementFromPoint(0,o+e(window).height()-1):(o=e(document).scrollLeft())>0&&(a=null==document.elementFromPoint(o+e(window).width()-1,0)),n=o>0}return a||(t+=e(document).scrollLeft(),i+=e(document).scrollTop()),document.elementFromPoint(t,i)},firstCharToLowerCase:function(e){return e.substring(0,1).toLowerCase()+e.substring(1)},getJQueryId:function(e,t){var i;return"string"==typeof e?(i=e,t===!0&&(i=String(i).replace(/[!"#$%&'()*+,.\/:; <=>?@\[\\\]\^`{|}~]/g,"\\$&")),"#"===i[0]?i:"#"+i):null},queryStringToJson:function(e){function t(e,t,i){if(t.length>1){var r=t.shift();"undefined"==typeof e[r]&&(e[r]=""==t[0]?[]:{}),arguments.callee(e[r],t,i)}else e instanceof Array?e.push(i):e[t]=i}for(var i,r,a,n,o,s=e.split("&"),l={},d=0;d<s.length;d++)i=s[d].split("="),r=decodeURIComponent(i[0]),a=decodeURIComponent(i[1]),n=r.match(/(^[^\[]+)(\[.*\]$)?/),o=n[1],n=n[2]?n[2].match(/(?=\[(.*)\]$)/)[1].split("]["):[],n.unshift(o),t(l,n,a);return l},populateForm:function(t,i){var r,a,n;if(t)for(var o in t)if(a=new Array,r=e("[name='"+o+"']",i),0==r.length&&(n=o.substr(0,o.indexOf("[")),r=e("[name='"+n+"']",i)),r.is("[ruptype]"))if(r.hasClass("jstree")){for(var s in t)s.substr(0,s.indexOf("["))==n&&a.push(t[s]);r["rup_"+r.attr("ruptype")]("setRupValue",a);var l=[];l[n]=a,r.on("loaded.jstree",function(t,i){var r=this.id;e(this).trigger("rup_filter_treeLoaded",l[r])})}else r["rup_"+r.attr("ruptype")]("setRupValue",t[o]);else r.is("input:radio")||r.is("input:checkbox")?r.each(function(){e(this).val()==t[o]?e(this).attr("checked","checked"):e(this).removeAttr("checked")}):r.is("select")?r.val(t[o]).click():r.is(":not(img)")&&r.val(t[o])},createDate:function(t,i,r){return e.datepicker.formatDate(e.rup.i18n.base.rup_date.dateFormat,new Date(r,i-1,t))},createTime:function(e,t,i){return new Date(null,null,null,e,t,i)},/*!
		 * jQuery CooQuery Plugin v2
		 * http://cooquery.lenonmarcel.com.br/
		 *
		 * Copyright 2009, 2010 Lenon Marcel
		 * Dual licensed under the MIT and GPL licenses.
		 * http://www.opensource.org/licenses/mit-license.php
		 * http://www.gnu.org/licenses/gpl.html
		 *
		 * Date: 2010-01-24 (Sun, 24 January 2010)
		 */
setCookie:function(t,i,r){if("undefined"==typeof t||"undefined"==typeof i||null===t||null===i)return e.rup.errorGestor("["+e.rup.i18nParse(e.rup.i18n.base,"rup_global.metodError")+"setCookie] - "+e.rup.i18nParse(e.rup.i18n.base,"rup_utils.paramsError")),!1;var a=t+"="+encodeURIComponent(i);if("undefined"!=typeof r&&null!==r){if(r.domain&&(a+="; domain="+r.domain),r.path&&(a+="; path="+r.path),r.duration){var n=new Date;n.setTime(n.getTime()+24*r.duration*60*60*1e3),a+="; expires="+n.toGMTString()}r.secure&&(a+="; secure")}return document.cookie=a},delCookie:function(t){return"undefined"==typeof t||null===t?(e.rup.errorGestor("["+e.rup.i18nParse(e.rup.i18n.base,"rup_global.metodError")+"delCookie] - "+e.rup.i18nParse(e.rup.i18n.base,"rup_utils.paramsError")),!1):e.rup_utils.setCookie(t,"",{duration:-1})},readCookie:function(t){if("undefined"==typeof t||null===t)return e.rup.errorGestor("["+e.rup.i18nParse(e.rup.i18n.base,"rup_global.metodError")+"readCookie] - "+e.rup.i18nParse(e.rup.i18n.base,"rup_utils.paramsError")),!1;var i=document.cookie.match("(?:^|;)\\s*"+t.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")+"=([^;]*)");return i?decodeURIComponent(i[1]):null},get:function(t,i){var r=null;if(document.cookie&&""!=document.cookie)for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var o=e.trim(a[n]);if(o.substring(0,t.length+1)==t+"="){r=i?e.JSON.decode(decodeURIComponent(o.substring(t.length+1))):decodeURIComponent(o.substring(t.length+1));break}}return r},set:function(t,i,r){r=e.extend({},r),null===i&&(i="",r.expires=-1);var a="";if(r.expires&&("number"==typeof r.expires||r.expires.toUTCString)){var n;"number"==typeof r.expires?(n=new Date,n.setTime(n.getTime()+24*r.expires*60*60*1e3)):n=r.expires,a="; expires="+n.toUTCString()}i=r.json?encodeURIComponent(e.JSON.encode(i)):encodeURIComponent(i);var o=r.path?"; path="+r.path:"",s=r.domain?"; domain="+r.domain:"",l=r.secure?"; secure":"";document.cookie=[t,"=",i,a,o,s,l].join("")},compareObjects:function(e,t){var i=!0;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e)if("object"==typeof e[r]&&"object"==typeof t[r]){if(i=compareObjects(e[r],t[r]),!i)break}else if(e[r]!==t[r]){i=!1;break}return i},escapeId:function(e){return e?e.replace(/([ #;&,.+*~\':"!^$[\]()=>|\/@])/g,"\\$1"):""},selectorId:function(e){return"string"==typeof e&&"#"!==e.substring(0,1)?"#"+e:e},randomIdGenerator:function(t){var i="rupRandomLayerId-"+e.rup_utils.autoGenerateIdNum;return t.attr("id",i).addClass("rupRandomLayerId"),e.rup_utils.autoGenerateIdNum=e.rup_utils.autoGenerateIdNum+1,i},setNoPortalParam:function(t){return void 0!==t&&null!==t&&(null!==e.rup_utils.readCookie("r01PortalInfo")&&null===t.match("R01HNoPortal")&&e("div.r01gContainer").length>0||e("div.r01gApplication").length>0)?t+(null===t.match("\\?")?"?":"&")+"R01HNoPortal=true":t},aplicatioInPortal:function(){return null!==e.rup_utils.readCookie("r01PortalInfo")&&e("div.r01gContainer").length>0},relToAbsUrl:function(t){var i=e(location);if("string"==typeof t){var r=t.substring(0,1),a=t.substring(1,2);if(void 0===e.url(t).attr("protocol")||""===e.url(t).attr("protocol")){if("/"===r)return void 0===a||"/"!==a?i.attr("protocol")+"//"+i.attr("host")+t:i.attr("protocol")+t;if("."===r){if(void 0===a)return void e.rup.errorGestor(e.rup.i18nParse(e.rup.i18n.base,"rup_utils.relToAbsUrlParamError")+t+e.rup.i18nParse(e.rup.i18n.base,"rup_utils.relToAbsUrlParamErrorEnd"));if("/"===a){var n=e.url(i.attr("href"),!0);return n.attr("base")+n.attr("directory")+t.substring(2,t.length)}if("."===a){var o=i.attr("pathname").split("/"),s=o.length-2;if(void 0!==t.substring(2,3)&&"/"===t.substring(2,3)){var l=t.split("../"),d=l.length-1;if(d>=s)return i.attr("protocol")+"//"+i.attr("host")+"/"+l[l.length-1];for(var u="",c=s-d;c>0;c--)u=o[c]+"/"+u;return i.attr("protocol")+"//"+i.attr("host")+"/"+u+l[l.length-1]}var l=t.split(".."),d=l.length-1;if(d>=s)return i.attr("protocol")+"//"+i.attr("host")+l[l.length-1];for(var u="",c=s-d;c>0;c--)u=o[c]+"/"+u;return i.attr("protocol")+"//"+i.attr("host")+"/"+u+l[l.length-1]}return void e.rup.errorGestor(e.rup.i18nParse(e.rup.i18n.base,"rup_utils.relToAbsUrlParamError")+t+e.rup.i18nParse(e.rup.i18n.base,"rup_utils.relToAbsUrlParamErrorEnd"))}var n=e.url(i.attr("href"),!0);return n.attr("base")+n.attr("directory")+t}return t}return void e.rup.errorGestor(e.rup.i18nParse(e.rup.i18n.base,"rup_utils.relToAbsUrlParamFormatError"))},printMsg:function(t){var i="";if("string"==typeof t)return t+"<br/>";if("object"==typeof t){if(jQuery.isArray(t)){for(var r=0;r<t.length;r++)i+=e.rup_utils.printMsgAux(t[r],1);return i}i+=e.rup_utils.printMsgAux(t,1)}return i},printMsgAux:function(t,i){var r="";if("string"==typeof t)return e("<span>").append(t)[0].outerHTML+"<br/>";if("object"==typeof t){if(jQuery.isArray(t)){for(var a=e("<ul>").addClass("rup-maint_feedbackUL"),n=0;n<t.length;n++)1===i?a.append(e("<li>").append(e.rup_utils.printMsgAux(t[n],i+1))):a.append(e.rup_utils.printMsgAux(t[n],i+1));return r+=a[0].outerHTML}var o=e("<span>");return void 0!==t.style&&o.addClass(t.style),void 0!==t.label&&o.append(t.label),o[0].outerHTML+"<br/>"}},getUrlVars:function(){if(void 0===e.rup.getParams){for(var t,i={},r=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),a=0;a<r.length;a++)t=decodeURIComponent(r[a]).split("="),i[t[0]]=t[1];e.rup.getParams=i}return e.rup.getParams},getUrlVar:function(t){return e.rup_utils.getUrlVars()[t]},sortArray:function(t,i){function r(e,t){return e-t}function a(e,t){var i;do{i=!1;for(var r=0;r<e.length-1;r++)if(t(e[r],e[r+1])<0){var a=e[r];e[r]=e[r+1],e[r+1]=a,i=!0}}while(i)}e.isArray(t)&&(e.isFunction(i)?a(t,i):a(t,r))},insertSorted:function(t,i,r){function a(e,t){return t-e}if(e.isArray(t))return t.push(i),e.isFunction(r)?e.rup_utils.sortArray(t,r):e.rup_utils.sortArray(t,a),e.inArray(i,t)},getRupValueAsJson:function(e,t){var i,r,a,n,o=!1,r=[];if(e){if(i=e.split("."),i.length>1?(o=!0,a=i[i.length-1]):a=i[0],jQuery.isArray(t)){for(var s=0;s<t.length;s++)n={},o?(n[a]=t[s],r.push(n)):(n[a]=t[s],r.push(n));return r}return n={},n[a]=t,n}return null},getRupValueWrapped:function(e,t){var i,r,a=!1,n={};return e?(i=e.split("."),i.length>1?(a=!0,r=i[i.length-1],n[r]=t,n):t):null}}),e.fn.serializeToObject=function(){var t={},i=this.serializeArrayWithoutNulls();return e.each(i,function(){t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value}),t},e.fn.serializeArrayWithoutNulls=function(){return this.map(function(){return this.elements?jQuery.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||/select|textarea/i.test(this.nodeName)||/color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week/i.test(this.type))}).map(function(e,t){var i=jQuery(this).val();return jQuery(this).hasClass("numeric")||jQuery(this).hasClass("datepicker")?{name:t.name,value:null}:null===i||""===i?null:jQuery.isArray(i)?jQuery.map(i,function(e,i){return{name:t.name,value:e}}):{name:t.name,value:i}}).get()},e.fn.serializeObject=function(){var t={},i=this.serializeArrayNull();return e.each(i,function(){t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value}),t},e.fn.serializeArrayNull=function(){return this.map(function(){return this.elements?jQuery.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||/select|textarea/i.test(this.nodeName)||/color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week/i.test(this.type))}).map(function(e,t){var i=jQuery(this).val();return(jQuery(this).hasClass("numeric")||jQuery(this).hasClass("datepicker"))&&""===i?{name:t.name,value:null}:null===i?null:jQuery.isArray(i)?jQuery.map(i,function(e,i){return{name:t.name,value:e}}):{name:t.name,value:i}}).get()},jQuery.rup_utils.base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,i,r,a,n,o,s,l="",d=0;for(e=jQuery.rup_utils.base64._utf8_encode(e);d<e.length;)t=e.charCodeAt(d++),i=e.charCodeAt(d++),r=e.charCodeAt(d++),a=t>>2,n=(3&t)<<4|i>>4,o=(15&i)<<2|r>>6,s=63&r,isNaN(i)?o=s=64:isNaN(r)&&(s=64),l=l+this._keyStr.charAt(a)+this._keyStr.charAt(n)+this._keyStr.charAt(o)+this._keyStr.charAt(s);return l},decode:function(e){var t,i,r,a,n,o,s,l="",d=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");d<e.length;)a=this._keyStr.indexOf(e.charAt(d++)),n=this._keyStr.indexOf(e.charAt(d++)),o=this._keyStr.indexOf(e.charAt(d++)),s=this._keyStr.indexOf(e.charAt(d++)),t=a<<2|n>>4,i=(15&n)<<4|o>>2,r=(3&o)<<6|s,l+=String.fromCharCode(t),64!=o&&(l+=String.fromCharCode(i)),64!=s&&(l+=String.fromCharCode(r));return l=jQuery.rup_utils.base64._utf8_decode(l)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var r=e.charCodeAt(i);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(63&r|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(63&r|128))}return t},_utf8_decode:function(e){for(var t="",i=0,r=c1=c2=0;i<e.length;)r=e.charCodeAt(i),r<128?(t+=String.fromCharCode(r),i++):r>191&&r<224?(c2=e.charCodeAt(i+1),t+=String.fromCharCode((31&r)<<6|63&c2),i+=2):(c2=e.charCodeAt(i+1),c3=e.charCodeAt(i+2),t+=String.fromCharCode((15&r)<<12|(63&c2)<<6|63&c3),i+=3);return t}}}(jQuery),/*!
 * Copyright 2013 E.J.I.E., S.A.
 *
 * Licencia con arreglo a la EUPL, Versión 1.1 exclusivamente (la «Licencia»);
 * Solo podrá usarse esta obra si se respeta la Licencia.
 * Puede obtenerse una copia de la Licencia en
 *
 *      http://ec.europa.eu/idabc/eupl.html
 *
 * Salvo cuando lo exija la legislación aplicable o se acuerde por escrito,
 * el programa distribuido con arreglo a la Licencia se distribuye «TAL CUAL»,
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ni expresas ni implícitas.
 * Véase la Licencia en el idioma concreto que rige los permisos y limitaciones
 * que establece la Licencia.
 */
function(e){function t(t){var i=this;e(this);clearTimeout(i.timeout)}function i(t){var i=this;e(this);clearTimeout(i.timeout)}function r(t){var i=this,r=e(this);clearTimeout(i.timeout),i.timeout=setTimeout(function(){r.trigger("mousestop",t)},r.data("mousestop").delay)}String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},e.extend({set_uda_ajax_mode_on:function(){e.ajax!==e.rup_ajax&&(e.ajaxUDA=e.ajax,e.ajax=e.rup_ajax)},rup_ajax:function(t){var i,r,a,n,o={cache:!1,error:null},s=e.extend({},o,t);r=s.error,i=function(t,i,a){var n=e.rup.rupAjaxDefaultError(t,i,a);null!=r?e(r(t,i,a)):n&&e.rup.showErrorToUser(n)},a=s.complete,n=function(t,i){e.ajax===e.rup_ajax&&e.ajaxUDA!==e.rup_ajax&&(e.ajax=e.ajaxUDA),null!=a&&a(t,i)},s.complete=n,s.error=i,s.url=e.rup_utils.setNoPortalParam(s.url),"function"==typeof e.ajaxUDA?e.ajaxUDA(s):e.ajax(s)}}),e.rup=e.rup||{},e.extend(e.rup,{i18n:{},appResources:{},lang:null,getBrowserLenguage:function(){return(navigator.language||navigator.userLanguage).split("-")[0].toLowerCase()},browser:{version:e.browser.version,versionNumber:e.isNumeric(e.browser.version)?parseInt(e.browser.version):void 0,isIE:/Trident\//.test(navigator.userAgent),isSafari:!(!e.browser.safari||!e.browser.webkit),isChrome:!(!e.browser.safari||!e.browser.webkit),isFF:!!e.browser.mozilla,isOpera:!!e.browser.opera,xhrFileUploadSupport:void 0!==(new XMLHttpRequest).upload},setLiterals:function(t){void 0!==t&&null!==t&&""!==t&&(e.rup.lang=t),e.rup_ajax({url:e.rup.RUP+"/resources/rup.i18n_"+e.rup.lang+".json",dataType:"json",type:"GET",async:!1,contentType:"application/x-www-form-urlencoded; charset=UTF-8",success:function(t){e.rup.i18n.base=t,e.jgrid={},e.extend(e.jgrid,t.rup_grid),e.jgrid.formatter.date.S=new Function("j",t.rup_grid.formatter.date.S)},error:function(e,t,i){alert("Se ha producido un error en el parseo del fichero JSON de literales => "+t+".\n\nError devuelto:\n"+t+": "+e.status+" - "+e.statusText)}})},getFile_i18n:function(){e.rup_ajax({url:e.rup.APP_STATICS+"/resources/"+e.rup.WAR_NAME+".i18n_"+e.rup.lang+".json",dataType:"json",type:"GET",async:!1,contentType:"application/x-www-form-urlencoded; charset=UTF-8",success:function(t){e.rup.i18n.app=t},error:function(e,t,i){alert("Se ha producido un error en el parseo del fichero JSON de literales de la aplicación => "+t+".\n\nError devuelto:\n"+t+": "+e.status+" - "+e.statusText)}})},getFile:function(t){void 0===t&&null===t&&""===t?e.rup.errorGestor("No se ha definido el fichero a cargar"):e.rup.i18n[t]||e.rup_ajax({url:e.rup.APP_STATICS+"/resources/"+t+".json",dataType:"json",type:"GET",async:!1,contentType:"application/x-www-form-urlencoded; charset=UTF-8",success:function(i,r,a){e.rup.i18n[t]=i},error:function(t,i,r){e.rup.errorGestor("Se ha producido un error en el parseo del fichero JSON de la aplicación => "+i+".<br>Error devuelto:<br>"+r)}})},i18nParse:function(t,i,r){if(void 0!==i&&null!==i&&""!==i){for(var a=i.split("."),n=t,o=0;o<a.length;o++){if(e.isEmptyObject(n)){n=void 0===r||null===r||""===r?i:r;break}n=n[a[o]]}return void 0==n?i:n}return"null_i18nCaption"},i18nTemplate:function(t,i){var r=jQuery.rup.i18nParse(t,i),a=e.makeArray(arguments).slice(2);return void 0===r&&(r=""),r.replace(/\{(\d+)\}/g,function(e,t){return a[t]})},errorGestor:function(t){throw e.rup_messages("msgError",{title:e.rup.i18nParse(e.rup.i18n.base,"rup_global.developerError"),message:"<p>"+t+"</p>"}),t},iniRup:function(){e.rup.i18n.app={},e.rup.i18n.base={},window.LOCALE_COOKIE_NAME||(LOCALE_COOKIE_NAME="language"),window.LOCALE_PARAM_NAME||(LOCALE_PARAM_NAME="locale"),e.rup.APP_RESOURCES=APP_RESOURCES,e.rup.APP_STATICS=STATICS+"/"+APP_RESOURCES,e.rup.CTX_PATH=CTX_PATH,e.rup.RUP=RUP,e.rup.STATICS=STATICS,e.rup.WAR_NAME=WAR_NAME,e.rup.AVAILABLE_LANGS=AVAILABLE_LANGS,e.rup.AVAILABLE_LANGS_ARRAY=e.map(e.rup.AVAILABLE_LANGS.split(","),function(e){return e.replace(/^\s*|\s*$/g,"")}),e.rup.LAYOUT=LAYOUT,e.rup.LOCALE_COOKIE_NAME=LOCALE_COOKIE_NAME,e.rup.LOCALE_PARAM_NAME=LOCALE_PARAM_NAME,e.rup.IFRAME_ONLY_SUPPORTED_METHODS=["GET","POST"],delete APP_RESOURCES,delete CTX_PATH,delete RUP,delete STATICS,delete WAR_NAME,delete AVAILABLE_LANGS,delete LAYOUT,delete LOCALE_COOKIE_NAME,delete LOCALE_PARAM_NAME;var t=e.rup_utils.get(e.rup.LOCALE_COOKIE_NAME);return null===t||""===t?(alert("No se ha encontrado la 'cookie' de idioma ("+e.rup.LOCALE_COOKIE_NAME+") requerida por UDA.\nRevise la configuración del navegador.\n\nLa página no se mostrará correctamente."),e.rup._avoidRUPFails(),!1):e.inArray(t,e.rup.AVAILABLE_LANGS_ARRAY)===-1?(alert("La 'cookie' de idioma ("+e.rup.LOCALE_COOKIE_NAME+") no se corresponde con los idiomas soportados.\n\nLa página no se mostrará correctamente."),e.rup._avoidRUPFails(),!1):(this.lang=t,e.rup.setLiterals(),void e.rup.getFile_i18n())},_avoidRUPFails:function(){var t=e.rup.i18nParse(e.rup.i18n.base,"rup_date.dateFormat");"rup_date.dateFormat"===t&&(e.rup.i18n.base.rup_date={dateFormat:"dd/mm/yy"}),e.jgrid={formatter:{integer:{}}}},getAccessor:function(t,i,r){if("string"==typeof r){if(fn=t[r],void 0!==fn)return fn;e.rup.errorGestor(i+' - No Existe el método "'+r+'"  en el patrón.')}else"function"==typeof r&&e.rup.errorGestor(i+" - No es posible pasar funciones al patrón.")},rupAjaxDefaultError:function(t,i,r){var a=null;if(0==t.status)a=e.rup.i18nParse(e.rup.i18n.base,"rup_ajax.httpStatus0");else if(401==t.status)a=e.rup.i18nParse(e.rup.i18n.base,"rup_ajax.httpStatus401");else if(404==t.status)a=e.rup.i18nParse(e.rup.i18n.base,"rup_ajax.httpStatus404");else if(500==t.status)a=e.rup.i18nParse(e.rup.i18n.base,"rup_ajax.httpStatus500");else if(503==t.status)a=e.rup.i18nParse(e.rup.i18n.base,"rup_ajax.httpStatus503");else if(406==t.status){var n="";try{n=JSON.parse(t.responseText)}catch(o){a=t.responseText}}else if(413==t.status){var n="";try{n=JSON.parse(t.responseText),a=n.rupFeedback.message.label}catch(o){a=t.responseText}}return a},rupObjectConstructor:function(t,i){void 0===e[t]&&(e[t]=function(t){var t=t,r="string"==typeof t,a=e.makeArray(arguments).slice(1),n=this;if(r&&"_"===t.charAt(0))return n;if(r)if("extend"!==t){var o=e.isEmptyObject(e.data(i))?e.data(i,i):e.data(i),s=o&&e.isFunction(o[t])?o[t].apply(o,a):"no-function";if("no-function"===s)return!1;n=s}else i=e.extend.apply(null,[!0,i].concat(a[0]));else{var o=e.isEmptyObject(e.data(i))?e.data(i,i):e.data(i);o&&void 0!==i._init&&null!==i._init&&o._init(e.makeArray(arguments))}return n})},rupSelectorObjectConstructor:function(t,i){void 0===e.fn[t]&&(e.fn[t]=function(t){var t=t,r="string"==typeof t,a=e.makeArray(arguments).slice(1),n=this;if(r&&"_"===t.charAt(0))return n;if(r)if("extend"!==t){var o=e.extend(this,i),s=o&&e.isFunction(o[t])?o[t].apply(o,a):"no-function";if("no-function"===s)return!1;n=s}else i=e.fn.extend.apply(null,[!0,i].concat(a[0]));else{var o=e.extend(this,i);o&&void 0!==i._init&&null!==i._init&&o._init(e.makeArray(arguments))}return n})},showErrorToUser:function(t){if(null!=t&&""!==t){var i=e(".ui-dialog:visible .rup-feedback"),r=0!==i.length?i:e(".rup-feedback");if(0!=r.length){var a={delay:null},n=e("#"+r[0].id);n.rup_feedback("option",a),n.rup_feedback("set",t,"error"),n.rup_feedback("show")}else e.rup_messages("msgError",{title:e.rup.i18nParse(e.rup.i18n.base,"rup_ajax.errorTitle"),message:t})}}}),e.fn.extend({storeEvents:function(){return this.each(function(){e(this).data("storedEvents",e.extend(!0,{},e._data(e(this)[0],"events")))}),e(this).unbind(),this},restoreEvents:function(){return this.each(function(){var t=e.data(this,"storedEvents");if(t){e(this).unbind();for(var i in t)for(var r in t[i])e.event.add(this,i,t[i][r],t[i][r].data)}}),this}}),e.fn.mousestop={},e.fn.mousestop.defaults={delay:300},e.event.special.mousestop={setup:function(a){var n=e(this);n.data("mousestop",e.extend(!0,{},e.fn.mousestop.defaults,a)),n.on({"mouseenter.rup_mousestop":t,"mouseleave.rup_mousestop":i,"mousemove.rup_mousestop":r})},teardown:function(){e(this).removeData("mousestop").off(".rup_mousestop")}},jQuery("body").on({"keydown.rup":function(e){var t,i=jQuery("body");switch(e.which){case 16:if(i.data("tmp.multiselect.shiftPressed")!==!0&&(i.data("tmp.multiselect.shiftPressed",!0),t=i.triggerHandler("rup_shiftKeyDown"),t===!1))return e.preventDefault(),!1;break;case 17:if(i.data("tmp.multiselect.ctrlPressed")!==!0&&(i.data("tmp.multiselect.ctrlPressed",!0),t=i.triggerHandler("rup_ctrlKeyDown"),t===!1))return e.preventDefault(),!1}},"keyup.rup":function(e){var t,i=jQuery("body");switch(e.which){case 16:if(i.data("tmp.multiselect.shiftPressed")!==!1&&(i.data("tmp.multiselect.shiftPressed",!1),t=i.triggerHandler("rup_shiftKeyUp"),t===!1))return!1;break;case 17:if(i.data("tmp.multiselect.ctrlPressed")!==!1&&(i.data("tmp.multiselect.ctrlPressed",!1),t=i.triggerHandler("rup_ctrlKeyUp"),t===!1))return!1}}}),jQuery.extend(e.rup,{isCtrlPressed:function(){return jQuery("body").data("tmp.multiselect.ctrlPressed")===!0},isShiftPressed:function(){return jQuery("body").data("tmp.multiselect.shiftPressed")===!0}}),e.rup.iniRup()}(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery","private-jqueryui-menu"],e):e(jQuery)}(function(e,t){e.rup.compatibility=e.rup.compatibility||{},e.extend(e.rup.compatibility,{menu:{delay:7,outDelay:7,focus:function(t,i){var r,a,n,o,s,l,d;this.blur(t),this._hasScroll()&&(a=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,o=i.offset().top-this.activeMenu.offset().top-a-n,s=this.activeMenu.scrollTop(),l=this.activeMenu.height(),d=i.height(),o<0?this.activeMenu.scrollTop(s+o):o+d>l&&this.activeMenu.scrollTop(s+o-l+d));var u=this.activeMenu;this.active=i.first(),this.active.hasClass("rup_menu_horizontal_children")?(this.element.attr("aria-activedescendant",this.active.children("a").attr("id")),this.active.addClass("ui-state-focus")):this.element.attr("aria-activedescendant",this.active.children("a").addClass("ui-state-focus").attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),this.active.children("a").hasClass("ui-state-active")?(this.active.children("a").removeClass("ui-state-active"),this.active.find("[aria-expanded = 'true']").size()>1&&this._close(u)):(this._close(),r=e("> .ui-menu",i),(r.length&&/^focus/.test(t.type)&&"true"!==i.attr("rupMenu_firsLevel")||r.length&&/^click/.test(t.type)&&"true"===i.attr("rupMenu_firsLevel"))&&this._startOpening(r)),this.activeMenu=i.parent()},_getWidgetMenu:function(){return void 0!==window.widgetMenu?window.widgetMenu:t},_create:function(){this.activeMenu=this.element,this.menuId=this.element.attr("id")||"ui-menu-"+idIncrement++,this.element.find(".ui-icon").length&&this.element.addClass("ui-menu-icons"),this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({id:this.menuId,role:"menu",tabIndex:0}).bind("click.menu",e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled"),this._bind({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){t.stopImmediatePropagation();var i=e(t.currentTarget);"true"===i.attr("rupMenu_firsLevel")&&(i.children("[aria-expanded = 'true']").size()>0?this._close(i):this.focus(t,i))},"focus .ui-menu-item a":function(t){var i=e(t.currentTarget).parent();this.focus(t,i)},focus:function(t){void 0===e(t.currentTarget).attr("rup_shift_nofocus")?void 0===e("#"+this.menuId).attr("rup_menu_nofocus")&&e(t.currentTarget).find(".ui-menu-item a").first().focus():e(t.currentTarget).removeAttr("rup_shift_nofocus")},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.restoreScrollEvents(),this._bind(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t)}})},_open:function(t){clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents()).hide().attr("aria-hidden","true");var i=e.extend({},{of:this.active},"function"===e.type(this.options.position)?this.options.position(this.active):this.options.position);"true"===t.parent().attr("rupMenu_firsLevel")&&(i.my="left top",i.at="left bottom");var r=this._getWidgetMenu()(t);r.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").not(".ui-state-disabled").first();if(t&&t.length)return this._open(t.parent()),this._delay(function(){t.children("a").focus()},this.delay),!0},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var r;r=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu")),r.length||(r=this.element),this._close(r),this.blur(t),this.activeMenu=r},this.outDelay)},blur:function(e){clearTimeout(this.timer),this.active&&(this.active.hasClass("ui-state-focus")?this.active.removeClass("ui-state-focus"):this.active.find(".ui-state-focus").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_keydown:function(t){function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}e(t.currentTarget).attr("rup_menu_click","true"),t.stopPropagation();var r=e(t.currentTarget).hasClass("rup_menu_horizontal")&&0===e(t.currentTarget).find(".ui-state-focus").size()||e(t.currentTarget).find(".ui-state-focus").children().hasClass("rup_menu_horizontal_children_entry");switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t),t.preventDefault(),t.stopImmediatePropagation(),e.merge(e(t.currentTarget).find(".ui-state-focus").children("a"),e(t.currentTarget).find(".ui-state-focus").not("li")).focus();break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t),t.preventDefault(),t.stopImmediatePropagation(),e.merge(e(t.currentTarget).find(".ui-state-focus").children("a"),e(t.currentTarget).find(".ui-state-focus").not("li")).focus();break;case e.ui.keyCode.HOME:this._move("first","first",t),t.preventDefault(),t.stopImmediatePropagation(),e.merge(e(t.currentTarget).find(".ui-state-focus").children("a"),e(t.currentTarget).find(".ui-state-focus").not("li")).focus();break;case e.ui.keyCode.END:this._move("last","last",t),t.preventDefault(),t.stopImmediatePropagation(),e.merge(e(t.currentTarget).find(".ui-state-focus").children("a"),e(t.currentTarget).find(".ui-state-focus").not("li")).focus();break;case e.ui.keyCode.UP:if(t.preventDefault(),t.stopImmediatePropagation(),r){this.collapse(t),e.merge(e(t.currentTarget).find(".ui-state-focus").children("a"),e(t.currentTarget).find(".ui-state-focus").not("li")).focus();break}this.previous(t),e.merge(e(t.currentTarget).find(".ui-state-focus").children("a"),e(t.currentTarget).find(".ui-state-focus").not("li")).focus();break;case e.ui.keyCode.DOWN:if(t.preventDefault(),t.stopImmediatePropagation(),r){this.expand(t),e.merge(e(t.currentTarget).find(".ui-state-focus").children("a"),e(t.currentTarget).find(".ui-state-focus").not("li")).focus();break}this.next(t),e.merge(e(t.currentTarget).find(".ui-state-focus").children("a"),e(t.currentTarget).find(".ui-state-focus").not("li")).focus();break;case e.ui.keyCode.LEFT:if(r){this.previous(t),t.stopImmediatePropagation(),e.merge(e(t.currentTarget).find(".ui-state-focus").children("a"),e(t.currentTarget).find(".ui-state-focus").not("li")).focus();break}e(t.target).parent().parent().parent().children("a").focus(),t.stopImmediatePropagation(),t.preventDefault(),e.merge(e(t.currentTarget).find(".ui-state-focus").children("a"),e(t.currentTarget).find(".ui-state-focus").not("li")).focus();break;case e.ui.keyCode.RIGHT:if(r){this.next(t),t.stopImmediatePropagation(),e.merge(e(t.currentTarget).find(".ui-state-focus").children("a"),e(t.currentTarget).find(".ui-state-focus").not("li")).focus();break}this.expand(t)&&t.stopImmediatePropagation(),t.preventDefault(),e.merge(e(t.currentTarget).find(".ui-state-focus").children("a"),e(t.currentTarget).find(".ui-state-focus").not("li")).focus();break;case e.ui.keyCode.ENTER:t.stopImmediatePropagation(),t.preventDefault(),null===this.active&&(this.active=e(t.currentTarget).find(".ui-state-focus")),this.active.children("a[aria-haspopup='true']").length?this.expand(t)&&t.stopImmediatePropagation():(this.select(t),t.stopImmediatePropagation()),t.preventDefault();break;case e.ui.keyCode.ESCAPE:this.collapse(t)&&t.stopImmediatePropagation(),t.preventDefault(),e.merge(e(t.currentTarget).find(".ui-state-focus").children("a"),e(t.currentTarget).find(".ui-state-focus").not("li")).focus();break;case e.ui.keyCode.TAB:if(this.collapseAll(t,!0),!t.shiftKey){var a=e(t.target).parent().parent();if(a.children().find("a").last().html()!==e(t.target).html())t.stopImmediatePropagation(),t.preventDefault(),null===this.active&&(this.active=e(t.currentTarget).find(".ui-state-focus")),this.active.children("a[aria-haspopup='true']").length?this.expand(t):(this.next(t),e.merge(e(t.currentTarget).find(".ui-state-focus").children("a"),e(t.currentTarget).find(".ui-state-focus").not("li")).focus());else if(a.children().find("a").last().html()!==e(t.currentTarget).find("a").last().html()){t.stopImmediatePropagation(),t.preventDefault();for(var n=a.parent(),o=n.nextAll("[role='presentation']:not(.ui-state-disabled):first");0===o.length;)n=n.parent(),o=n.parent().nextAll("[role='presentation']:not(.ui-state-disabled):first");o.children("a").focus()}break}e(t.currentTarget).attr("rup_shift_nofocus","true"),e(t.currentTarget).focus();default:clearTimeout(this.filterTimer);var s,l=this.previousFilter||"",d=String.fromCharCode(t.keyCode),u=!1;d===l?u=!0:d=l+d,s=this.activeMenu.children(".ui-menu-item").filter(function(){return new RegExp("^"+i(d),"i").test(e(this).children("a").text())}),s=u&&s.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):s,s.length||(d=String.fromCharCode(t.keyCode),s=this.activeMenu.children(".ui-menu-item").filter(function(){return new RegExp("^"+i(d),"i").test(e(this).children("a").text())})),s.length?(this.focus(t,s),s.length>1?(this.previousFilter=d,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}},_move:function(e,t,i){var r,a=this;this.active&&(r="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").not(".ui-state-disabled").eq(-1):this.active[e+"All"](".ui-menu-item").not(".ui-state-disabled").eq(0)),r&&r.length&&this.active||(r=this.activeMenu.children(".ui-menu-item")[t]()),this.element.off("mouseleave"),this.element.off("mouseover"),this.element.one("mousemove",function(e){var t=a._getWidgetMenu();t(e.currentTarget).rupMenu("restoreScrollEvents"),t(e.currentTarget).off("mousemove")}),this.focus(i,r),r.is(".ui-state-disabled")&&this._move(e,t,i)},restoreScrollEvents:function(){this._bind({mouseover:function(t){e("#"+this.menuId).attr("rup_menu_nofocus","true")},"mouseover .rup_menu_horizontal_children":function(t){var i=e(t.currentTarget);e(".ui-state-focus").removeClass("ui-state-focus"),i.addClass("ui-state-focus"),e(i).focus()},"mouseover .ui-menu-item":function(t){e("#"+this.menuId).attr("rup_menu_nofocus","true"),t.stopImmediatePropagation();var i=e(t.currentTarget);if(i.siblings().children(".ui-state-active").removeClass("ui-state-active"),i.offset().left+i.width()>t.pageX&&(i.offset().top+e("#"+this.menuId).height()>t.pageY||i.offset().top+i.height()>t.pageY))if(e("#"+i.children("a").attr("id")+":focus").size()>0)i.hasClass("rup_menu_horizontal_children")||e("#"+i.children("a").attr("id")).hasClass("ui-state-focus")||(e("#"+i.children("a").attr("id")).addClass("ui-state-focus"),"menuitem"===e("#"+i.children("a").attr("id")).attr("role")&&this._startOpening(e(i).children("[role = 'menu']")));else{t.target,e("#"+i.children("a").attr("id"));e("#"+i.children("a").attr("id")).focus(),e("#"+i.children("a").attr("id")).focus()}},mouseleave:function(t){this.collapseAll(t,!0),e(".ui-state-focus").removeClass("ui-state-focus"),e("#"+this.menuId).removeAttr("rup_menu_nofocus")},"mouseleave .ui-menu-item":function(t){var i=e(t.currentTarget);(void 0===i.attr("rupmenu_firslevel")||i.offset().top-1<t.pageY&&i.offset().top+e("#"+this.menuId).height()+1<t.pageY)&&(this._close(),e(".ui-state-focus").removeClass("ui-state-focus"))},"mouseleave .rup_menu_horizontal_children_last":function(t){this.collapseAll(t,!0),e(".ui-state-focus").removeClass("ui-state-focus")}}),this.refresh()}},jstree:{hotkeys:{"ctrl+space":function(e){return delete e.target,e.type="click",this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(e),!1},"shift+space":function(e){return delete e.target,e.type="click",this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(e),!1}},rup_extend:{_fn:{cleanCut:function(){this.data.crrm.ct_nodes=!1},set_contextmenu_items:function(e){var t=this.get_settings();t.contextmenu.items=e,this._set_settings(t)},set_theme_data:function(e){this.data.themes.theme=e},types_portal_css:function(){var t=this._get_settings().types,i=t.types,r=t.type_attr,a="",n=this;e.each(i,function(t,i){return e.each(i,function(e,t){/^(max_depth|max_children|icon|valid_children)$/.test(e)||n.data.types.attach_to.push(e)}),!i.icon||void((i.icon.image||i.icon.position)&&(a+="div.r01gContainer ",a+="default"==t?".jstree-"+n.get_index()+" a > .jstree-icon { ":".jstree-"+n.get_index()+" li["+r+'="'+t+'"] > a > .jstree-icon { ',i.icon.image&&(a+=" background-image:url("+i.icon.image+"); "),a+=i.icon.position?" background-position:"+i.icon.position+"; ":" background-position:0 0; ",a+="} "))});var o=e("#jstree-types-stylesheet");void 0!==o&&o.remove(),""!==a&&e.vakata.css.add_sheet({str:a,title:"jstree-porta-types"})}}}}})}),/*!
 * jQuery UI 1.8.23
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI
 */
function(e,t){function i(t,i){var a=t.nodeName.toLowerCase();if("area"===a){var n,o=t.parentNode,s=o.name;return!(!t.href||!s||"map"!==o.nodeName.toLowerCase())&&(n=e("img[usemap=#"+s+"]")[0],!!n&&r(n))}return(/input|select|textarea|button|object/.test(a)?!t.disabled:"a"==a?t.href||i:i)&&r(t)}function r(t){return!e(t).parents().andSelf().filter(function(){return"hidden"===e.curCSS(this,"visibility")||e.expr.filters.hidden(this)}).length}e.ui=e.ui||{},e.ui.version||(e.extend(e.ui,{version:"1.8.23",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),e.fn.extend({propAttr:e.fn.prop||e.fn.attr,_focus:e.fn.focus,focus:function(t,i){return"number"==typeof t?this.each(function(){var r=this;setTimeout(function(){e(r).focus(),i&&i.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return t=e.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.curCSS(this,"position",1))&&/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var r,a,n=e(this[0]);n.length&&n[0]!==document;){if(r=n.css("position"),("absolute"===r||"relative"===r||"fixed"===r)&&(a=parseInt(n.css("zIndex"),10),!isNaN(a)&&0!==a))return a;n=n.parent()}return 0},disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(i,r){function a(t,i,r,a){return e.each(n,function(){i-=parseFloat(e.curCSS(t,"padding"+this,!0))||0,r&&(i-=parseFloat(e.curCSS(t,"border"+this+"Width",!0))||0),a&&(i-=parseFloat(e.curCSS(t,"margin"+this,!0))||0)}),i}var n="Width"===r?["Left","Right"]:["Top","Bottom"],o=r.toLowerCase(),s={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(i){return i===t?s["inner"+r].call(this):this.each(function(){e(this).css(o,a(this,i)+"px")})},e.fn["outer"+r]=function(t,i){return"number"!=typeof t?s["outer"+r].call(this,t):this.each(function(){e(this).css(o,a(this,t,!0,i)+"px")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,r){return!!e.data(t,r[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var r=e.attr(t,"tabindex"),a=isNaN(r);return(a||r>=0)&&i(t,!a)}}),e(function(){var t=document.body,i=t.appendChild(i=document.createElement("div"));i.offsetHeight,e.extend(i.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=100===i.offsetHeight,e.support.selectstart="onselectstart"in i,t.removeChild(i).style.display="none"}),e.curCSS||(e.curCSS=e.css),e.extend(e.ui,{plugin:{add:function(t,i,r){var a=e.ui[t].prototype;for(var n in r)a.plugins[n]=a.plugins[n]||[],a.plugins[n].push([i,r[n]])},call:function(e,t,i){var r=e.plugins[t];if(r&&e.element[0].parentNode)for(var a=0;a<r.length;a++)e.options[r[a][0]]&&r[a][1].apply(e.element,i)}},contains:function(e,t){return document.compareDocumentPosition?16&e.compareDocumentPosition(t):e!==t&&e.contains(t)},hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var r=i&&"left"===i?"scrollLeft":"scrollTop",a=!1;return t[r]>0||(t[r]=1,a=t[r]>0,t[r]=0,a)},isOverAxis:function(e,t,i){return e>t&&e<t+i},isOver:function(t,i,r,a,n,o){return e.ui.isOverAxis(t,r,n)&&e.ui.isOverAxis(i,a,o)}}))}(jQuery),/*!
 * jQuery UI Widget 1.8.23
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Widget
 */
function(e,t){if(e.cleanData){var i=e.cleanData;e.cleanData=function(t){for(var r,a=0;null!=(r=t[a]);a++)try{e(r).triggerHandler("remove")}catch(n){}i(t)}}else{var r=e.fn.remove;e.fn.remove=function(t,i){return this.each(function(){return i||t&&!e.filter(t,[this]).length||e("*",this).add([this]).each(function(){try{e(this).triggerHandler("remove")}catch(t){}}),r.call(e(this),t,i)})}}e.widget=function(t,i,r){var a,n=t.split(".")[0];t=t.split(".")[1],a=n+"-"+t,r||(r=i,i=e.Widget),e.expr[":"][a]=function(i){return!!e.data(i,t)},e[n]=e[n]||{},e[n][t]=function(e,t){arguments.length&&this._createWidget(e,t)};var o=new i;o.options=e.extend(!0,{},o.options),e[n][t].prototype=e.extend(!0,o,{namespace:n,widgetName:t,widgetEventPrefix:e[n][t].prototype.widgetEventPrefix||t,widgetBaseClass:a},r),e.widget.bridge(t,e[n][t])},e.widget.bridge=function(i,r){e.fn[i]=function(a){var n="string"==typeof a,o=Array.prototype.slice.call(arguments,1),s=this;return a=!n&&o.length?e.extend.apply(null,[!0,a].concat(o)):a,n&&"_"===a.charAt(0)?s:(n?this.each(function(){var r=e.data(this,i),n=r&&e.isFunction(r[a])?r[a].apply(r,o):r;if(n!==r&&n!==t)return s=n,!1}):this.each(function(){var t=e.data(this,i);t?t.option(a||{})._init():e.data(this,i,new r(a,this))}),s)}},e.Widget=function(e,t){arguments.length&&this._createWidget(e,t)},e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(t,i){e.data(i,this.widgetName,this),this.element=e(i),this.options=e.extend(!0,{},this.options,this._getCreateOptions(),t);var r=this;this.element.bind("remove."+this.widgetName,function(){r.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(i,r){var a=i;if(0===arguments.length)return e.extend({},this.options);if("string"==typeof i){if(r===t)return this.options[i];a={},a[i]=r}return this._setOptions(a),this},_setOptions:function(t){var i=this;return e.each(t,function(e,t){i._setOption(e,t)}),this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&this.widget()[t?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",t),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(t,i,r){var a,n,o=this.options[t];if(r=r||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],n=i.originalEvent)for(a in n)a in i||(i[a]=n[a]);return this.element.trigger(i,r),!(e.isFunction(o)&&o.call(this.element[0],i,r)===!1||i.isDefaultPrevented())}}}(jQuery),/*!
 * jQuery UI Mouse 1.8.23
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Mouse
 *
 * Depends:
 *	jquery.ui.widget.js
 */
function(e,t){var i=!1;e(document).mouseup(function(e){i=!1}),e.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){if(!0===e.data(i.target,t.widgetName+".preventClickEvent"))return e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!i){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,a=1==t.which,n=!("string"!=typeof this.options.cancel||!t.target.nodeName)&&e(t.target).closest(this.options.cancel).length;return!(a&&!n&&this._mouseCapture(t))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),i=!0,!0))}},_mouseMove:function(t){return!e.browser.msie||document.documentMode>=9||t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target==this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}})}(jQuery),/*!
 * jQuery UI Position 1.8.23
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Position
 */
function(e,t){e.ui=e.ui||{};var i=/left|center|right/,r=/top|center|bottom/,a="center",n={},o=e.fn.position,s=e.fn.offset;e.fn.position=function(t){if(!t||!t.of)return o.apply(this,arguments);t=e.extend({},t);var s,l,d,u=e(t.of),c=u[0],p=(t.collision||"flip").split(" "),h=t.offset?t.offset.split(" "):[0,0];return 9===c.nodeType?(s=u.width(),l=u.height(),d={top:0,left:0}):c.setTimeout?(s=u.width(),l=u.height(),d={top:u.scrollTop(),left:u.scrollLeft()}):c.preventDefault?(t.at="left top",s=l=0,d={top:t.of.pageY,left:t.of.pageX}):(s=u.outerWidth(),l=u.outerHeight(),d=u.offset()),e.each(["my","at"],function(){var e=(t[this]||"").split(" ");1===e.length&&(e=i.test(e[0])?e.concat([a]):r.test(e[0])?[a].concat(e):[a,a]),e[0]=i.test(e[0])?e[0]:a,e[1]=r.test(e[1])?e[1]:a,t[this]=e}),1===p.length&&(p[1]=p[0]),h[0]=parseInt(h[0],10)||0,1===h.length&&(h[1]=h[0]),h[1]=parseInt(h[1],10)||0,"right"===t.at[0]?d.left+=s:t.at[0]===a&&(d.left+=s/2),"bottom"===t.at[1]?d.top+=l:t.at[1]===a&&(d.top+=l/2),d.left+=h[0],d.top+=h[1],this.each(function(){var i,r=e(this),o=r.outerWidth(),u=r.outerHeight(),c=parseInt(e.curCSS(this,"marginLeft",!0))||0,f=parseInt(e.curCSS(this,"marginTop",!0))||0,g=o+c+(parseInt(e.curCSS(this,"marginRight",!0))||0),m=u+f+(parseInt(e.curCSS(this,"marginBottom",!0))||0),v=e.extend({},d);"right"===t.my[0]?v.left-=o:t.my[0]===a&&(v.left-=o/2),"bottom"===t.my[1]?v.top-=u:t.my[1]===a&&(v.top-=u/2),n.fractions||(v.left=Math.round(v.left),v.top=Math.round(v.top)),i={left:v.left-c,top:v.top-f},e.each(["left","top"],function(r,a){e.ui.position[p[r]]&&e.ui.position[p[r]][a](v,{targetWidth:s,targetHeight:l,elemWidth:o,elemHeight:u,collisionPosition:i,collisionWidth:g,collisionHeight:m,offset:h,my:t.my,at:t.at})}),e.fn.bgiframe&&r.bgiframe(),r.offset(e.extend(v,{using:t.using}))})},e.ui.position={fit:{left:function(t,i){var r=e(window),a=i.collisionPosition.left+i.collisionWidth-r.width()-r.scrollLeft();t.left=a>0?t.left-a:Math.max(t.left-i.collisionPosition.left,t.left)},top:function(t,i){var r=e(window),a=i.collisionPosition.top+i.collisionHeight-r.height()-r.scrollTop();t.top=a>0?t.top-a:Math.max(t.top-i.collisionPosition.top,t.top)}},flip:{left:function(t,i){if(i.at[0]!==a){var r=e(window),n=i.collisionPosition.left+i.collisionWidth-r.width()-r.scrollLeft(),o="left"===i.my[0]?-i.elemWidth:"right"===i.my[0]?i.elemWidth:0,s="left"===i.at[0]?i.targetWidth:-i.targetWidth,l=-2*i.offset[0];t.left+=i.collisionPosition.left<0?o+s+l:n>0?o+s+l:0}},top:function(t,i){if(i.at[1]!==a){var r=e(window),n=i.collisionPosition.top+i.collisionHeight-r.height()-r.scrollTop(),o="top"===i.my[1]?-i.elemHeight:"bottom"===i.my[1]?i.elemHeight:0,s="top"===i.at[1]?i.targetHeight:-i.targetHeight,l=-2*i.offset[1];t.top+=i.collisionPosition.top<0?o+s+l:n>0?o+s+l:0}}}},e.offset.setOffset||(e.offset.setOffset=function(t,i){/static/.test(e.curCSS(t,"position"))&&(t.style.position="relative");var r=e(t),a=r.offset(),n=parseInt(e.curCSS(t,"top",!0),10)||0,o=parseInt(e.curCSS(t,"left",!0),10)||0,s={top:i.top-a.top+n,left:i.left-a.left+o};"using"in i?i.using.call(t,s):r.css(s)},e.fn.offset=function(t){var i=this[0];return i&&i.ownerDocument?t?e.isFunction(t)?this.each(function(i){e(this).offset(t.call(this,i,e(this).offset()))}):this.each(function(){e.offset.setOffset(this,t)}):s.call(this):null}),e.curCSS||(e.curCSS=e.css),function(){var t,i,r,a,o,s=document.getElementsByTagName("body")[0],l=document.createElement("div");t=document.createElement(s?"div":"body"),r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},s&&e.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(var d in r)t.style[d]=r[d];t.appendChild(l),i=s||document.documentElement,i.insertBefore(t,i.firstChild),l.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",a=e(l).offset(function(e,t){return t}).offset(),t.innerHTML="",i.removeChild(t),o=a.top+a.left+(s?2e3:0),n.fractions=o>21&&o<22}()}(jQuery),/*!
 * jQuery UI Draggable 1.8.23
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Draggables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
function(e,t){e.widget("ui.draggable",e.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"!=this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(this.element.data("draggable"))return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(t){var i=this.options;return!(this.helper||i.disabled||e(t.target).is(".ui-resizable-handle"))&&(this.handle=this._getHandle(t),!!this.handle&&(i.iframeFix&&e(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0))},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),i.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(i=e.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1);for(var r=this.element[0],a=!1;r&&(r=r.parentNode);)r==document&&(a=!0);if(!a&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!i||"valid"==this.options.revert&&i||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)){var n=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",t)!==!1&&n._clear()})}else this._trigger("stop",t)!==!1&&this._clear();return!1},_mouseUp:function(t){return this.options.iframeFix===!0&&e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var i=!this.options.handle||!e(this.options.handle,this.element).length;return e(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(i=!0)}),i},_createHelper:function(t){var i=this.options,r=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"==i.helper?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo("parent"==i.appendTo?this.element[0].parentNode:i.appendTo),r[0]==this.element[0]||/(fixed|absolute)/.test(r.css("position"))||r.css("position","absolute"),r},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&e.browser.msie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;if("parent"==t.containment&&(t.containment=this.helper[0].parentNode),"document"!=t.containment&&"window"!=t.containment||(this.containment=["document"==t.containment?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==t.containment?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==t.containment?0:e(window).scrollLeft())+e("document"==t.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==t.containment?0:e(window).scrollTop())+(e("document"==t.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(t.containment)||t.containment.constructor==Array)t.containment.constructor==Array&&(this.containment=t.containment);else{var i=e(t.containment),r=i[0];if(!r)return;var a=(i.offset(),"hidden"!=e(r).css("overflow"));this.containment=[(parseInt(e(r).css("borderLeftWidth"),10)||0)+(parseInt(e(r).css("paddingLeft"),10)||0),(parseInt(e(r).css("borderTopWidth"),10)||0)+(parseInt(e(r).css("paddingTop"),10)||0),(a?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(e(r).css("borderLeftWidth"),10)||0)-(parseInt(e(r).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(a?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(e(r).css("borderTopWidth"),10)||0)-(parseInt(e(r).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i}},_convertPositionTo:function(t,i){i||(i=this.position);var r="absolute"==t?1:-1,a=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),n=/(html|body)/i.test(a[0].tagName);return{top:i.top+this.offset.relative.top*r+this.offset.parent.top*r-(e.browser.safari&&e.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():n?0:a.scrollTop())*r),left:i.left+this.offset.relative.left*r+this.offset.parent.left*r-(e.browser.safari&&e.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():n?0:a.scrollLeft())*r)}},_generatePosition:function(t){var i=this.options,r="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(r[0].tagName),n=t.pageX,o=t.pageY;if(this.originalPosition){var s;if(this.containment){if(this.relative_container){var l=this.relative_container.offset();s=[this.containment[0]+l.left,this.containment[1]+l.top,this.containment[2]+l.left,this.containment[3]+l.top]}else s=this.containment;t.pageX-this.offset.click.left<s[0]&&(n=s[0]+this.offset.click.left),t.pageY-this.offset.click.top<s[1]&&(o=s[1]+this.offset.click.top),t.pageX-this.offset.click.left>s[2]&&(n=s[2]+this.offset.click.left),t.pageY-this.offset.click.top>s[3]&&(o=s[3]+this.offset.click.top)}if(i.grid){var d=i.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1]:this.originalPageY;o=s&&(d-this.offset.click.top<s[1]||d-this.offset.click.top>s[3])?d-this.offset.click.top<s[1]?d+i.grid[1]:d-i.grid[1]:d;var u=i.grid[0]?this.originalPageX+Math.round((n-this.originalPageX)/i.grid[0])*i.grid[0]:this.originalPageX;n=s&&(u-this.offset.click.left<s[0]||u-this.offset.click.left>s[2])?u-this.offset.click.left<s[0]?u+i.grid[0]:u-i.grid[0]:u}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&e.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():a?0:r.scrollTop()),left:n-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&e.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():a?0:r.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]==this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[i,r]),"drag"==t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,r)},plugins:{},_uiHash:function(e){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.extend(e.ui.draggable,{version:"1.8.23"}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var r=e(this).data("draggable"),a=r.options,n=e.extend({},i,{item:r.element});r.sortables=[],e(a.connectToSortable).each(function(){var i=e.data(this,"sortable");i&&!i.options.disabled&&(r.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,n))})},stop:function(t,i){var r=e(this).data("draggable"),a=e.extend({},i,{item:r.element});e.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"==r.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,a))})},drag:function(t,i){var r=e(this).data("draggable"),a=this;e.each(r.sortables,function(n){this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(a).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,i){var r=e("body"),a=e(this).data("draggable").options;r.css("cursor")&&(a._cursor=r.css("cursor")),r.css("cursor",a.cursor)},stop:function(t,i){var r=e(this).data("draggable").options;r._cursor&&e("body").css("cursor",r._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i){var r=e(i.helper),a=e(this).data("draggable").options;r.css("opacity")&&(a._opacity=r.css("opacity")),r.css("opacity",a.opacity)},stop:function(t,i){var r=e(this).data("draggable").options;r._opacity&&e(i.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(t,i){var r=e(this).data("draggable");r.scrollParent[0]!=document&&"HTML"!=r.scrollParent[0].tagName&&(r.overflowOffset=r.scrollParent.offset())},drag:function(t,i){var r=e(this).data("draggable"),a=r.options,n=!1;r.scrollParent[0]!=document&&"HTML"!=r.scrollParent[0].tagName?(a.axis&&"x"==a.axis||(r.overflowOffset.top+r.scrollParent[0].offsetHeight-t.pageY<a.scrollSensitivity?r.scrollParent[0].scrollTop=n=r.scrollParent[0].scrollTop+a.scrollSpeed:t.pageY-r.overflowOffset.top<a.scrollSensitivity&&(r.scrollParent[0].scrollTop=n=r.scrollParent[0].scrollTop-a.scrollSpeed)),a.axis&&"y"==a.axis||(r.overflowOffset.left+r.scrollParent[0].offsetWidth-t.pageX<a.scrollSensitivity?r.scrollParent[0].scrollLeft=n=r.scrollParent[0].scrollLeft+a.scrollSpeed:t.pageX-r.overflowOffset.left<a.scrollSensitivity&&(r.scrollParent[0].scrollLeft=n=r.scrollParent[0].scrollLeft-a.scrollSpeed))):(a.axis&&"x"==a.axis||(t.pageY-e(document).scrollTop()<a.scrollSensitivity?n=e(document).scrollTop(e(document).scrollTop()-a.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<a.scrollSensitivity&&(n=e(document).scrollTop(e(document).scrollTop()+a.scrollSpeed))),a.axis&&"y"==a.axis||(t.pageX-e(document).scrollLeft()<a.scrollSensitivity?n=e(document).scrollLeft(e(document).scrollLeft()-a.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<a.scrollSensitivity&&(n=e(document).scrollLeft(e(document).scrollLeft()+a.scrollSpeed)))),n!==!1&&e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(r,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,i){var r=e(this).data("draggable"),a=r.options;r.snapElements=[],e(a.snap.constructor!=String?a.snap.items||":data(draggable)":a.snap).each(function(){var t=e(this),i=t.offset();this!=r.element[0]&&r.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})})},drag:function(t,i){for(var r=e(this).data("draggable"),a=r.options,n=a.snapTolerance,o=i.offset.left,s=o+r.helperProportions.width,l=i.offset.top,d=l+r.helperProportions.height,u=r.snapElements.length-1;u>=0;u--){var c=r.snapElements[u].left,p=c+r.snapElements[u].width,h=r.snapElements[u].top,f=h+r.snapElements[u].height;if(c-n<o&&o<p+n&&h-n<l&&l<f+n||c-n<o&&o<p+n&&h-n<d&&d<f+n||c-n<s&&s<p+n&&h-n<l&&l<f+n||c-n<s&&s<p+n&&h-n<d&&d<f+n){if("inner"!=a.snapMode){var g=Math.abs(h-d)<=n,m=Math.abs(f-l)<=n,v=Math.abs(c-s)<=n,b=Math.abs(p-o)<=n;g&&(i.position.top=r._convertPositionTo("relative",{top:h-r.helperProportions.height,left:0}).top-r.margins.top),m&&(i.position.top=r._convertPositionTo("relative",{top:f,left:0}).top-r.margins.top),v&&(i.position.left=r._convertPositionTo("relative",{top:0,left:c-r.helperProportions.width}).left-r.margins.left),b&&(i.position.left=r._convertPositionTo("relative",{top:0,left:p}).left-r.margins.left)}var _=g||m||v||b;if("outer"!=a.snapMode){var g=Math.abs(h-l)<=n,m=Math.abs(f-d)<=n,v=Math.abs(c-o)<=n,b=Math.abs(p-s)<=n;g&&(i.position.top=r._convertPositionTo("relative",{top:h,left:0}).top-r.margins.top),m&&(i.position.top=r._convertPositionTo("relative",{top:f-r.helperProportions.height,left:0}).top-r.margins.top),v&&(i.position.left=r._convertPositionTo("relative",{top:0,left:c}).left-r.margins.left),b&&(i.position.left=r._convertPositionTo("relative",{top:0,left:p-r.helperProportions.width}).left-r.margins.left)}!r.snapElements[u].snapping&&(g||m||v||b||_)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[u].item})),r.snapElements[u].snapping=g||m||v||b||_}else r.snapElements[u].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[u].item})),r.snapElements[u].snapping=!1}}}),e.ui.plugin.add("draggable","stack",{start:function(t,i){var r=e(this).data("draggable").options,a=e.makeArray(e(r.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});if(a.length){var n=parseInt(a[0].style.zIndex)||0;e(a).each(function(e){this.style.zIndex=n+e}),this[0].style.zIndex=n+a.length}}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i){var r=e(i.helper),a=e(this).data("draggable").options;r.css("zIndex")&&(a._zIndex=r.css("zIndex")),r.css("zIndex",a.zIndex)},stop:function(t,i){var r=e(this).data("draggable").options;r._zIndex&&e(i.helper).css("zIndex",r._zIndex)}})}(jQuery),/*!
 * jQuery UI Droppable 1.8.23
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Droppables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.mouse.js
 *	jquery.ui.draggable.js
 */
function(e,t){e.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var t=this.options,i=t.accept;this.isover=0,this.isout=1,this.accept=e.isFunction(i)?i:function(e){return e.is(i)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var t=e.ui.ddmanager.droppables[this.options.scope],i=0;i<t.length;i++)t[i]==this&&t.splice(i,1);return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(t,i){"accept"==t&&(this.accept=e.isFunction(i)?i:function(e){return e.is(i)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(i)))},_drop:function(t,i){var r=i||e.ui.ddmanager.current;if(!r||(r.currentItem||r.element)[0]==this.element[0])return!1;var a=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope==r.options.scope&&t.accept.call(t.element[0],r.currentItem||r.element)&&e.ui.intersect(r,e.extend(t,{offset:t.element.offset()}),t.options.tolerance))return a=!0,!1}),!a&&(!!this.accept.call(this.element[0],r.currentItem||r.element)&&(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element))},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.extend(e.ui.droppable,{version:"1.8.23"}),e.ui.intersect=function(t,i,r){if(!i.offset)return!1;var a=(t.positionAbs||t.position.absolute).left,n=a+t.helperProportions.width,o=(t.positionAbs||t.position.absolute).top,s=o+t.helperProportions.height,l=i.offset.left,d=l+i.proportions.width,u=i.offset.top,c=u+i.proportions.height;switch(r){case"fit":return l<=a&&n<=d&&u<=o&&s<=c;case"intersect":return l<a+t.helperProportions.width/2&&n-t.helperProportions.width/2<d&&u<o+t.helperProportions.height/2&&s-t.helperProportions.height/2<c;case"pointer":var p=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,h=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,f=e.ui.isOver(h,p,u,l,i.proportions.height,i.proportions.width);return f;case"touch":return(o>=u&&o<=c||s>=u&&s<=c||o<u&&s>c)&&(a>=l&&a<=d||n>=l&&n<=d||a<l&&n>d);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,i){var r=e.ui.ddmanager.droppables[t.options.scope]||[],a=i?i.type:null,n=(t.currentItem||t.element).find(":data(droppable)").andSelf();e:for(var o=0;o<r.length;o++)if(!(r[o].options.disabled||t&&!r[o].accept.call(r[o].element[0],t.currentItem||t.element))){for(var s=0;s<n.length;s++)if(n[s]==r[o].element[0]){r[o].proportions.height=0;continue e}r[o].visible="none"!=r[o].element.css("display"),r[o].visible&&("mousedown"==a&&r[o]._activate.call(r[o],i),r[o].offset=r[o].element.offset(),r[o].proportions={width:r[o].element[0].offsetWidth,height:r[o].element[0].offsetHeight})}},drop:function(t,i){var r=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(r=this._drop.call(this,i)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,i)))}),r},dragStart:function(t,i){t.element.parents(":not(body,html)").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(t,i){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,i),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var r=e.ui.intersect(t,this,this.options.tolerance),a=r||1!=this.isover?r&&0==this.isover?"isover":null:"isout";if(a){var n;if(this.options.greedy){var o=this.element.parents(":data(droppable):eq(0)");o.length&&(n=e.data(o[0],"droppable"),n.greedyChild="isover"==a?1:0)}n&&"isover"==a&&(n.isover=0,n.isout=1,n._out.call(n,i)),this[a]=1,this["isout"==a?"isover":"isout"]=0,this["isover"==a?"_over":"_out"].call(this,i),n&&"isout"==a&&(n.isout=0,n.isover=1,n._over.call(n,i))}}})},dragStop:function(t,i){t.element.parents(":not(body,html)").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}}}(jQuery),/*!
 * jQuery UI Resizable 1.8.23
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Resizables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
function(e,t){e.widget("ui.resizable",e.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var t=this,i=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=i.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var r=this.handles.split(",");this.handles={};for(var a=0;a<r.length;a++){var n=e.trim(r[a]),o="ui-resizable-"+n,s=e('<div class="ui-resizable-handle '+o+'"></div>');s.css({zIndex:i.zIndex}),"se"==n&&s.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[n]=".ui-resizable-"+n,this.element.append(s)}}this._renderAxis=function(t){t=t||this.element;for(var i in this.handles){if(this.handles[i].constructor==String&&(this.handles[i]=e(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var r=e(this.handles[i],this.element),a=0;a=/sw|ne|nw|se|n|s/.test(i)?r.outerHeight():r.outerWidth();var n=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join("");t.css(n,a),this._proportionallyResize()}e(this.handles[i]).length}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!t.resizing){if(this.className)var e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);t.axis=e&&e[1]?e[1]:"se"}}),i.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").hover(function(){i.disabled||(e(this).removeClass("ui-resizable-autohide"),t._handles.show())},function(){i.disabled||t.resizing||(e(this).addClass("ui-resizable-autohide"),t._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var t=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){t(this.element);var i=this.element;i.after(this.originalElement.css({position:i.css("position"),width:i.outerWidth(),height:i.outerHeight(),top:i.css("top"),left:i.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement),this},_mouseCapture:function(t){var i=!1;for(var r in this.handles)e(this.handles[r])[0]==t.target&&(i=!0);return!this.options.disabled&&i},_mouseStart:function(t){var r=this.options,a=this.element.position(),n=this.element;this.resizing=!0,this.documentScroll={top:e(document).scrollTop(),left:e(document).scrollLeft()},(n.is(".ui-draggable")||/absolute/.test(n.css("position")))&&n.css({position:"absolute",top:a.top,left:a.left}),this._renderProxy();var o=i(this.helper.css("left")),s=i(this.helper.css("top"));r.containment&&(o+=e(r.containment).scrollLeft()||0,s+=e(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:o,top:s},this.size=this._helper?{width:n.outerWidth(),height:n.outerHeight()}:{width:n.width(),height:n.height()},this.originalSize=this._helper?{width:n.outerWidth(),height:n.outerHeight()}:{width:n.width(),height:n.height()},this.originalPosition={left:o,top:s},this.sizeDiff={width:n.outerWidth()-n.width(),height:n.outerHeight()-n.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof r.aspectRatio?r.aspectRatio:this.originalSize.width/this.originalSize.height||1;var l=e(".ui-resizable-"+this.axis).css("cursor");return e("body").css("cursor","auto"==l?this.axis+"-resize":l),n.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var i=this.helper,r=(this.options,this.originalMousePosition),a=this.axis,n=t.pageX-r.left||0,o=t.pageY-r.top||0,s=this._change[a];if(!s)return!1;var l=s.apply(this,[t,n,o]);e.browser.msie&&e.browser.version<7,this.sizeDiff;return this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(l=this._updateRatio(l,t)),l=this._respectSize(l,t),this._propagate("resize",t),i.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(l),this._trigger("resize",t,this.ui()),!1},_mouseStop:function(t){this.resizing=!1;var i=this.options,r=this;if(this._helper){var a=this._proportionallyResizeElements,n=a.length&&/textarea/i.test(a[0].nodeName),o=n&&e.ui.hasScroll(a[0],"left")?0:r.sizeDiff.height,s=n?0:r.sizeDiff.width,l={width:r.helper.width()-s,height:r.helper.height()-o},d=parseInt(r.element.css("left"),10)+(r.position.left-r.originalPosition.left)||null,u=parseInt(r.element.css("top"),10)+(r.position.top-r.originalPosition.top)||null;i.animate||this.element.css(e.extend(l,{top:u,left:d})),r.helper.height(r.size.height),r.helper.width(r.size.width),this._helper&&!i.animate&&this._proportionallyResize()}return e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,i,a,n,o,s=this.options;o={minWidth:r(s.minWidth)?s.minWidth:0,maxWidth:r(s.maxWidth)?s.maxWidth:1/0,minHeight:r(s.minHeight)?s.minHeight:0,maxHeight:r(s.maxHeight)?s.maxHeight:1/0},(this._aspectRatio||e)&&(t=o.minHeight*this.aspectRatio,a=o.minWidth/this.aspectRatio,i=o.maxHeight*this.aspectRatio,n=o.maxWidth/this.aspectRatio,t>o.minWidth&&(o.minWidth=t),a>o.minHeight&&(o.minHeight=a),i<o.maxWidth&&(o.maxWidth=i),n<o.maxHeight&&(o.maxHeight=n)),this._vBoundaries=o},_updateCache:function(e){this.options;this.offset=this.helper.offset(),r(e.left)&&(this.position.left=e.left),r(e.top)&&(this.position.top=e.top),r(e.height)&&(this.size.height=e.height),r(e.width)&&(this.size.width=e.width)},_updateRatio:function(e,t){var i=(this.options,this.position),a=this.size,n=this.axis;return r(e.height)?e.width=e.height*this.aspectRatio:r(e.width)&&(e.height=e.width/this.aspectRatio),"sw"==n&&(e.left=i.left+(a.width-e.width),e.top=null),"nw"==n&&(e.top=i.top+(a.height-e.height),e.left=i.left+(a.width-e.width)),e},_respectSize:function(e,t){var i=(this.helper,this._vBoundaries),a=(this._aspectRatio||t.shiftKey,this.axis),n=r(e.width)&&i.maxWidth&&i.maxWidth<e.width,o=r(e.height)&&i.maxHeight&&i.maxHeight<e.height,s=r(e.width)&&i.minWidth&&i.minWidth>e.width,l=r(e.height)&&i.minHeight&&i.minHeight>e.height;s&&(e.width=i.minWidth),l&&(e.height=i.minHeight),n&&(e.width=i.maxWidth),o&&(e.height=i.maxHeight);var d=this.originalPosition.left+this.originalSize.width,u=this.position.top+this.size.height,c=/sw|nw|w/.test(a),p=/nw|ne|n/.test(a);s&&c&&(e.left=d-i.minWidth),n&&c&&(e.left=d-i.maxWidth),l&&p&&(e.top=u-i.minHeight),o&&p&&(e.top=u-i.maxHeight);var h=!e.width&&!e.height;return h&&!e.left&&e.top?e.top=null:h&&!e.top&&e.left&&(e.left=null),e},_proportionallyResize:function(){this.options;if(this._proportionallyResizeElements.length)for(var t=this.helper||this.element,i=0;i<this._proportionallyResizeElements.length;i++){var r=this._proportionallyResizeElements[i];if(!this.borderDif){var a=[r.css("borderTopWidth"),r.css("borderRightWidth"),r.css("borderBottomWidth"),r.css("borderLeftWidth")],n=[r.css("paddingTop"),r.css("paddingRight"),r.css("paddingBottom"),r.css("paddingLeft")];this.borderDif=e.map(a,function(e,t){var i=parseInt(e,10)||0,r=parseInt(n[t],10)||0;return i+r})}e.browser.msie&&(e(t).is(":hidden")||e(t).parents(":hidden").length)||r.css({height:t.height()-this.borderDif[0]-this.borderDif[2]||0,width:t.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t=this.element,i=this.options;if(this.elementOffset=t.offset(),this._helper){this.helper=this.helper||e('<div style="overflow:hidden;"></div>');var r=e.browser.msie&&e.browser.version<7,a=r?1:0,n=r?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+n,height:this.element.outerHeight()+n,position:"absolute",left:this.elementOffset.left-a+"px",top:this.elementOffset.top-a+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(e,t,i){return{width:this.originalSize.width+t}},w:function(e,t,i){var r=(this.options,this.originalSize),a=this.originalPosition;return{left:a.left+t,width:r.width-t}},n:function(e,t,i){var r=(this.options,this.originalSize),a=this.originalPosition;return{top:a.top+i,height:r.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,r]))},sw:function(t,i,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,r]))},ne:function(t,i,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,r]))},nw:function(t,i,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,r]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!=t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.extend(e.ui.resizable,{version:"1.8.23"}),e.ui.plugin.add("resizable","alsoResize",{start:function(t,i){var r=e(this).data("resizable"),a=r.options,n=function(t){e(t).each(function(){var t=e(this);t.data("resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof a.alsoResize||a.alsoResize.parentNode?n(a.alsoResize):a.alsoResize.length?(a.alsoResize=a.alsoResize[0],n(a.alsoResize)):e.each(a.alsoResize,function(e){n(e)})},resize:function(t,i){var r=e(this).data("resizable"),a=r.options,n=r.originalSize,o=r.originalPosition,s={height:r.size.height-n.height||0,width:r.size.width-n.width||0,top:r.position.top-o.top||0,left:r.position.left-o.left||0},l=function(t,r){e(t).each(function(){var t=e(this),a=e(this).data("resizable-alsoresize"),n={},o=r&&r.length?r:t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var i=(a[t]||0)+(s[t]||0);i&&i>=0&&(n[t]=i||null)}),t.css(n)})};"object"!=typeof a.alsoResize||a.alsoResize.nodeType?l(a.alsoResize):e.each(a.alsoResize,function(e,t){l(e,t)})},stop:function(t,i){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","animate",{stop:function(t,i){var r=e(this).data("resizable"),a=r.options,n=r._proportionallyResizeElements,o=n.length&&/textarea/i.test(n[0].nodeName),s=o&&e.ui.hasScroll(n[0],"left")?0:r.sizeDiff.height,l=o?0:r.sizeDiff.width,d={width:r.size.width-l,height:r.size.height-s},u=parseInt(r.element.css("left"),10)+(r.position.left-r.originalPosition.left)||null,c=parseInt(r.element.css("top"),10)+(r.position.top-r.originalPosition.top)||null;r.element.animate(e.extend(d,c&&u?{top:c,left:u}:{}),{duration:a.animateDuration,easing:a.animateEasing,step:function(){var i={width:parseInt(r.element.css("width"),10),height:parseInt(r.element.css("height"),10),top:parseInt(r.element.css("top"),10),left:parseInt(r.element.css("left"),10)};n&&n.length&&e(n[0]).css({width:i.width,height:i.height}),r._updateCache(i),r._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(t,r){var a=e(this).data("resizable"),n=a.options,o=a.element,s=n.containment,l=s instanceof e?s.get(0):/parent/.test(s)?o.parent().get(0):s;if(l)if(a.containerElement=e(l),/document/.test(s)||s==document)a.containerOffset={left:0,top:0},a.containerPosition={left:0,top:0},a.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight};else{var d=e(l),u=[];e(["Top","Right","Left","Bottom"]).each(function(e,t){u[e]=i(d.css("padding"+t))}),a.containerOffset=d.offset(),a.containerPosition=d.position(),a.containerSize={height:d.innerHeight()-u[3],width:d.innerWidth()-u[1]};var c=a.containerOffset,p=a.containerSize.height,h=a.containerSize.width,f=e.ui.hasScroll(l,"left")?l.scrollWidth:h,g=e.ui.hasScroll(l)?l.scrollHeight:p;a.parentData={element:l,left:c.left,top:c.top,width:f,height:g}}},resize:function(t,i){var r=e(this).data("resizable"),a=r.options,n=(r.containerSize,r.containerOffset),o=(r.size,r.position),s=r._aspectRatio||t.shiftKey,l={top:0,left:0},d=r.containerElement;d[0]!=document&&/static/.test(d.css("position"))&&(l=n),o.left<(r._helper?n.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-n.left:r.position.left-l.left),s&&(r.size.height=r.size.width/r.aspectRatio),r.position.left=a.helper?n.left:0),o.top<(r._helper?n.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-n.top:r.position.top),s&&(r.size.width=r.size.height*r.aspectRatio),r.position.top=r._helper?n.top:0),r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top;var u=Math.abs((r._helper?r.offset.left-l.left:r.offset.left-l.left)+r.sizeDiff.width),c=Math.abs((r._helper?r.offset.top-l.top:r.offset.top-n.top)+r.sizeDiff.height),p=r.containerElement.get(0)==r.element.parent().get(0),h=/relative|absolute/.test(r.containerElement.css("position"));p&&h&&(u-=r.parentData.left),u+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-u,s&&(r.size.height=r.size.width/r.aspectRatio)),c+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-c,s&&(r.size.width=r.size.height*r.aspectRatio))},stop:function(t,i){var r=e(this).data("resizable"),a=r.options,n=(r.position,r.containerOffset),o=r.containerPosition,s=r.containerElement,l=e(r.helper),d=l.offset(),u=l.outerWidth()-r.sizeDiff.width,c=l.outerHeight()-r.sizeDiff.height;r._helper&&!a.animate&&/relative/.test(s.css("position"))&&e(this).css({left:d.left-o.left-n.left,width:u,height:c}),r._helper&&!a.animate&&/static/.test(s.css("position"))&&e(this).css({left:d.left-o.left-n.left,width:u,height:c})}}),e.ui.plugin.add("resizable","ghost",{start:function(t,i){var r=e(this).data("resizable"),a=r.options,n=r.size;r.ghost=r.originalElement.clone(),r.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof a.ghost?a.ghost:""),r.ghost.appendTo(r.helper)},resize:function(t,i){var r=e(this).data("resizable");r.options;r.ghost&&r.ghost.css({position:"relative",height:r.size.height,width:r.size.width})},stop:function(t,i){var r=e(this).data("resizable");r.options;r.ghost&&r.helper&&r.helper.get(0).removeChild(r.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(t,i){var r=e(this).data("resizable"),a=r.options,n=r.size,o=r.originalSize,s=r.originalPosition,l=r.axis;a._aspectRatio||t.shiftKey;a.grid="number"==typeof a.grid?[a.grid,a.grid]:a.grid;var d=Math.round((n.width-o.width)/(a.grid[0]||1))*(a.grid[0]||1),u=Math.round((n.height-o.height)/(a.grid[1]||1))*(a.grid[1]||1);/^(se|s|e)$/.test(l)?(r.size.width=o.width+d,r.size.height=o.height+u):/^(ne)$/.test(l)?(r.size.width=o.width+d,r.size.height=o.height+u,r.position.top=s.top-u):/^(sw)$/.test(l)?(r.size.width=o.width+d,r.size.height=o.height+u,r.position.left=s.left-d):(r.size.width=o.width+d,r.size.height=o.height+u,r.position.top=s.top-u,r.position.left=s.left-d)}});var i=function(e){return parseInt(e,10)||0},r=function(e){return!isNaN(parseInt(e,10))}}(jQuery),/*!
 * jQuery UI Selectable 1.8.23
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Selectables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
function(e,t){e.widget("ui.selectable",e.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var t=this;this.element.addClass("ui-selectable"),this.dragged=!1;var i;this.refresh=function(){i=e(t.options.filter,t.element[0]),i.addClass("ui-selectee"),i.each(function(){var t=e(this),i=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:i.left,top:i.top,right:i.left+t.outerWidth(),bottom:i.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=i.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},destroy:function(){return this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy(),this},_mouseStart:function(t){var i=this;if(this.opos=[t.pageX,t.pageY],!this.options.disabled){var r=this.options;this.selectees=e(r.filter,this.element[0]),this._trigger("start",t),e(r.appendTo).append(this.helper),this.helper.css({left:t.clientX,top:t.clientY,width:0,height:0}),r.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var r=e.data(this,"selectable-item");r.startselected=!0,t.metaKey||t.ctrlKey||(r.$element.removeClass("ui-selected"),r.selected=!1,r.$element.addClass("ui-unselecting"),r.unselecting=!0,i._trigger("unselecting",t,{unselecting:r.element}))}),e(t.target).parents().andSelf().each(function(){var r=e.data(this,"selectable-item");if(r){var a=!t.metaKey&&!t.ctrlKey||!r.$element.hasClass("ui-selected");return r.$element.removeClass(a?"ui-unselecting":"ui-selected").addClass(a?"ui-selecting":"ui-unselecting"),r.unselecting=!a,r.selecting=a,r.selected=a,a?i._trigger("selecting",t,{selecting:r.element}):i._trigger("unselecting",t,{unselecting:r.element}),!1}})}},_mouseDrag:function(t){var i=this;if(this.dragged=!0,!this.options.disabled){var r=this.options,a=this.opos[0],n=this.opos[1],o=t.pageX,s=t.pageY;if(a>o){var l=o;o=a,a=l}if(n>s){var l=s;s=n,n=l}return this.helper.css({left:a,top:n,width:o-a,height:s-n}),this.selectees.each(function(){var l=e.data(this,"selectable-item");if(l&&l.element!=i.element[0]){var d=!1;"touch"==r.tolerance?d=!(l.left>o||l.right<a||l.top>s||l.bottom<n):"fit"==r.tolerance&&(d=l.left>a&&l.right<o&&l.top>n&&l.bottom<s),d?(l.selected&&(l.$element.removeClass("ui-selected"),l.selected=!1),l.unselecting&&(l.$element.removeClass("ui-unselecting"),l.unselecting=!1),l.selecting||(l.$element.addClass("ui-selecting"),l.selecting=!0,i._trigger("selecting",t,{selecting:l.element}))):(l.selecting&&((t.metaKey||t.ctrlKey)&&l.startselected?(l.$element.removeClass("ui-selecting"),l.selecting=!1,l.$element.addClass("ui-selected"),l.selected=!0):(l.$element.removeClass("ui-selecting"),l.selecting=!1,l.startselected&&(l.$element.addClass("ui-unselecting"),l.unselecting=!0),i._trigger("unselecting",t,{unselecting:l.element}))),l.selected&&(t.metaKey||t.ctrlKey||l.startselected||(l.$element.removeClass("ui-selected"),l.selected=!1,l.$element.addClass("ui-unselecting"),l.unselecting=!0,i._trigger("unselecting",t,{unselecting:l.element}))))}}),!1}},_mouseStop:function(t){var i=this;this.dragged=!1;this.options;return e(".ui-unselecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-unselecting"),r.unselecting=!1,r.startselected=!1,i._trigger("unselected",t,{unselected:r.element})}),e(".ui-selecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-selecting").addClass("ui-selected"),r.selecting=!1,r.selected=!0,r.startselected=!0,i._trigger("selected",t,{selected:r.element})}),this._trigger("stop",t),this.helper.remove(),!1}}),e.extend(e.ui.selectable,{version:"1.8.23"})}(jQuery),/*!
 * jQuery UI Sortable 1.8.23
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Sortables
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
function(e,t){e.widget("ui.sortable",e.ui.mouse,{widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&("x"===e.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display"))),this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},destroy:function(){e.Widget.prototype.destroy.call(this),this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,i){"disabled"===t?(this.options[t]=i,this.widget()[i?"addClass":"removeClass"]("ui-sortable-disabled")):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,i){var r=this;if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(t);var a=null,n=this;e(t.target).parents().each(function(){if(e.data(this,r.widgetName+"-item")==n)return a=e(this),!1});if(e.data(t.target,r.widgetName+"-item")==n&&(a=e(t.target)),!a)return!1;if(this.options.handle&&!i){var o=!1;if(e(this.options.handle,a).find("*").andSelf().each(function(){this==t.target&&(o=!0)}),!o)return!1}return this.currentItem=a,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,i,r){var a=this.options,n=this;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),a.containment&&this._setContainment(),a.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",a.cursor)),a.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",a.opacity)),a.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",a.zIndex)),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!r)for(var o=this.containers.length-1;o>=0;o--)this.containers[o]._trigger("activate",t,n._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!a.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var i=this.options,r=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-this.overflowOffset.top<i.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-i.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-this.overflowOffset.left<i.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-i.scrollSpeed)):(t.pageY-e(document).scrollTop()<i.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed)),t.pageX-e(document).scrollLeft()<i.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed))),r!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)}this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(var a=this.items.length-1;a>=0;a--){var n=this.items[a],o=n.item[0],s=this._intersectsWithPointer(n);if(s&&!(o==this.currentItem[0]||this.placeholder[1==s?"next":"prev"]()[0]==o||e.ui.contains(this.placeholder[0],o)||"semi-dynamic"==this.options.type&&e.ui.contains(this.element[0],o))){if(this.direction=1==s?"down":"up","pointer"!=this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(t,n),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var r=this,a=r.placeholder.offset();r.reverting=!0,e(this.helper).animate({left:a.left-this.offset.parent.left-r.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:a.top-this.offset.parent.top-r.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){var t=this;if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("deactivate",null,t._uiHash(this)),this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",null,t._uiHash(this)),this.containers[i].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);i&&r.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},i.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,r=this.positionAbs.top,a=r+this.helperProportions.height,n=e.left,o=n+e.width,s=e.top,l=s+e.height,d=this.offset.click.top,u=this.offset.click.left,c=r+d>s&&r+d<l&&t+u>n&&t+u<o;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?c:n<t+this.helperProportions.width/2&&i-this.helperProportions.width/2<o&&s<r+this.helperProportions.height/2&&a-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var i="x"===this.options.axis||e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),r="y"===this.options.axis||e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),a=i&&r,n=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return!!a&&(this.floating?o&&"right"==o||"down"==n?2:1:n&&("down"==n?2:1))},_intersectsWithSides:function(t){var i=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),r=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),a=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection();return this.floating&&n?"right"==n&&r||"left"==n&&!r:a&&("down"==a&&i||"up"==a&&!i)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!=e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!=e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor==String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var i=[],r=[],a=this._connectWith();if(a&&t)for(var n=a.length-1;n>=0;n--)for(var o=e(a[n]),s=o.length-1;s>=0;s--){var l=e.data(o[s],this.widgetName);l&&l!=this&&!l.options.disabled&&r.push([e.isFunction(l.options.items)?l.options.items.call(l.element):e(l.options.items,l.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),l])}r.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var n=r.length-1;n>=0;n--)r[n][0].each(function(){i.push(this)});return e(i)},_removeCurrentsFromItems:function(){for(var e=this.currentItem.find(":data("+this.widgetName+"-item)"),t=0;t<this.items.length;t++)for(var i=0;i<e.length;i++)e[i]==this.items[t].item[0]&&this.items.splice(t,1)},_refreshItems:function(t){this.items=[],this.containers=[this];var i=this.items,r=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],a=this._connectWith();if(a&&this.ready)for(var n=a.length-1;n>=0;n--)for(var o=e(a[n]),s=o.length-1;s>=0;s--){var l=e.data(o[s],this.widgetName);l&&l!=this&&!l.options.disabled&&(r.push([e.isFunction(l.options.items)?l.options.items.call(l.element[0],t,{item:this.currentItem}):e(l.options.items,l.element),l]),this.containers.push(l))}for(var n=r.length-1;n>=0;n--)for(var d=r[n][1],u=r[n][0],s=0,c=u.length;s<c;s++){var p=e(u[s]);p.data(this.widgetName+"-item",d),i.push({item:p,instance:d,width:0,height:0,left:0,top:0})}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var i=this.items.length-1;i>=0;i--){var r=this.items[i];if(r.instance==this.currentContainer||!this.currentContainer||r.item[0]==this.currentItem[0]){var a=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item;t||(r.width=a.outerWidth(),r.height=a.outerHeight());var n=a.offset();r.left=n.left,r.top=n.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var i=this.containers.length-1;i>=0;i--){var n=this.containers[i].element.offset();this.containers[i].containerCache.left=n.left,this.containers[i].containerCache.top=n.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight()}return this},_createPlaceholder:function(t){var i=t||this,r=i.options;if(!r.placeholder||r.placeholder.constructor==String){var a=r.placeholder;r.placeholder={element:function(){var t=e(document.createElement(i.currentItem[0].nodeName)).addClass(a||i.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return a||(t.style.visibility="hidden"),t},update:function(e,t){a&&!r.forcePlaceholderSize||(t.height()||t.height(i.currentItem.innerHeight()-parseInt(i.currentItem.css("paddingTop")||0,10)-parseInt(i.currentItem.css("paddingBottom")||0,10)),t.width()||t.width(i.currentItem.innerWidth()-parseInt(i.currentItem.css("paddingLeft")||0,10)-parseInt(i.currentItem.css("paddingRight")||0,10)))}}}i.placeholder=e(r.placeholder.element.call(i.element,i.currentItem)),i.currentItem.after(i.placeholder),r.placeholder.update(i,i.placeholder)},_contactContainers:function(t){for(var i=null,r=null,a=this.containers.length-1;a>=0;a--)if(!e.ui.contains(this.currentItem[0],this.containers[a].element[0]))if(this._intersectsWith(this.containers[a].containerCache)){if(i&&e.ui.contains(this.containers[a].element[0],i.element[0]))continue;i=this.containers[a],r=a}else this.containers[a].containerCache.over&&(this.containers[a]._trigger("out",t,this._uiHash(this)),this.containers[a].containerCache.over=0);if(i)if(1===this.containers.length)this.containers[r]._trigger("over",t,this._uiHash(this)),this.containers[r].containerCache.over=1;else if(this.currentContainer!=this.containers[r]){for(var n=1e4,o=null,s=this.positionAbs[this.containers[r].floating?"left":"top"],l=this.items.length-1;l>=0;l--)if(e.ui.contains(this.containers[r].element[0],this.items[l].item[0])){var d=this.containers[r].floating?this.items[l].item.offset().left:this.items[l].item.offset().top;Math.abs(d-s)<n&&(n=Math.abs(d-s),o=this.items[l],this.direction=d-s>0?"down":"up")}if(!o&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[r],o?this._rearrange(t,o,null,!0):this._rearrange(t,null,this.containers[r].element,!0),this._trigger("change",t,this._uiHash()),this.containers[r]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[r]._trigger("over",t,this._uiHash(this)),this.containers[r].containerCache.over=1}},_createHelper:function(t){var i=this.options,r=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"==i.helper?this.currentItem.clone():this.currentItem;return r.parents("body").length||e("parent"!=i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==r[0].style.width||i.forceHelperSize)&&r.width(this.currentItem.width()),(""==r[0].style.height||i.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&e.browser.msie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;if("parent"==t.containment&&(t.containment=this.helper[0].parentNode),"document"!=t.containment&&"window"!=t.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"==t.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"==t.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),!/^(document|window|parent)$/.test(t.containment)){var i=e(t.containment)[0],r=e(t.containment).offset(),a="hidden"!=e(i).css("overflow");this.containment=[r.left+(parseInt(e(i).css("borderLeftWidth"),10)||0)+(parseInt(e(i).css("paddingLeft"),10)||0)-this.margins.left,r.top+(parseInt(e(i).css("borderTopWidth"),10)||0)+(parseInt(e(i).css("paddingTop"),10)||0)-this.margins.top,r.left+(a?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(e(i).css("borderLeftWidth"),10)||0)-(parseInt(e(i).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,r.top+(a?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(e(i).css("borderTopWidth"),10)||0)-(parseInt(e(i).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,i){i||(i=this.position);var r="absolute"==t?1:-1,a=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),n=/(html|body)/i.test(a[0].tagName);return{top:i.top+this.offset.relative.top*r+this.offset.parent.top*r-(e.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():n?0:a.scrollTop())*r),left:i.left+this.offset.relative.left*r+this.offset.parent.left*r-(e.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():n?0:a.scrollLeft())*r)}},_generatePosition:function(t){var i=this.options,r="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(r[0].tagName);"relative"!=this.cssPosition||this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());var n=t.pageX,o=t.pageY;if(this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(n=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(n=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),i.grid)){var s=this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1];o=this.containment&&(s-this.offset.click.top<this.containment[1]||s-this.offset.click.top>this.containment[3])?s-this.offset.click.top<this.containment[1]?s+i.grid[1]:s-i.grid[1]:s;var l=this.originalPageX+Math.round((n-this.originalPageX)/i.grid[0])*i.grid[0];n=this.containment&&(l-this.offset.click.left<this.containment[0]||l-this.offset.click.left>this.containment[2])?l-this.offset.click.left<this.containment[0]?l+i.grid[0]:l-i.grid[0]:l}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():a?0:r.scrollTop()),left:n-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():a?0:r.scrollLeft())}},_rearrange:function(e,t,i,r){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var a=this,n=this.counter;window.setTimeout(function(){n==a.counter&&a.refreshPositions(!r)},0)},_clear:function(t,i){this.reverting=!1;var r=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var a in this._storedCSS)"auto"!=this._storedCSS[a]&&"static"!=this._storedCSS[a]||(this._storedCSS[a]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();if(this.fromOutside&&!i&&r.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev==this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent==this.currentItem.parent()[0]||i||r.push(function(e){this._trigger("update",e,this._uiHash())}),!e.ui.contains(this.element[0],this.currentItem[0])){i||r.push(function(e){this._trigger("remove",e,this._uiHash())});for(var a=this.containers.length-1;a>=0;a--)e.ui.contains(this.containers[a].element[0],this.currentItem[0])&&!i&&(r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.containers[a])),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.containers[a])))}for(var a=this.containers.length-1;a>=0;a--)i||r.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[a])),this.containers[a].containerCache.over&&(r.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[a])),this.containers[a].containerCache.over=0);if(this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!i){this._trigger("beforeStop",t,this._uiHash());for(var a=0;a<r.length;a++)r[a].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}if(i||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!i){for(var a=0;a<r.length;a++)r[a].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}}),e.extend(e.ui.sortable,{version:"1.8.23"})}(jQuery),/*!
 * jQuery UI Accordion 1.8.23
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Accordion
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 */
function(e,t){e.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var t=this,i=t.options;if(t.running=0,t.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix"),t.headers=t.element.find(i.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){i.disabled||e(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){i.disabled||e(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){i.disabled||e(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){i.disabled||e(this).removeClass("ui-state-focus")}),t.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom"),i.navigation){var r=t.element.find("a").filter(i.navigationFilter).eq(0);if(r.length){var a=r.closest(".ui-accordion-header");a.length?t.active=a:t.active=r.closest(".ui-accordion-content").prev()}}t.active=t._findActive(t.active||i.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),t.active.next().addClass("ui-accordion-content-active"),t._createIcons(),t.resize(),t.element.attr("role","tablist"),t.headers.attr("role","tab").bind("keydown.accordion",function(e){return t._keydown(e)}).next().attr("role","tabpanel"),t.headers.not(t.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide(),t.active.length?t.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):t.headers.eq(0).attr("tabIndex",0),e.browser.safari||t.headers.find("a").attr("tabIndex",-1),i.event&&t.headers.bind(i.event.split(" ").join(".accordion ")+".accordion",function(e){t._clickHandler.call(t,e,this),e.preventDefault()})},_createIcons:function(){var t=this.options;t.icons&&(e("<span></span>").addClass("ui-icon "+t.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(t.icons.header).toggleClass(t.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove(),this.element.removeClass("ui-accordion-icons")},destroy:function(){var t=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex"),this.headers.find("a").removeAttr("tabIndex"),this._destroyIcons();var i=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");return(t.autoHeight||t.fillHeight)&&i.css("height",""),e.Widget.prototype.destroy.call(this)},_setOption:function(t,i){e.Widget.prototype._setOption.apply(this,arguments),"active"==t&&this.activate(i),"icons"==t&&(this._destroyIcons(),i&&this._createIcons()),"disabled"==t&&this.headers.add(this.headers.next())[i?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(t){if(!(this.options.disabled||t.altKey||t.ctrlKey)){var i=e.ui.keyCode,r=this.headers.length,a=this.headers.index(t.target),n=!1;switch(t.keyCode){case i.RIGHT:case i.DOWN:n=this.headers[(a+1)%r];break;case i.LEFT:case i.UP:n=this.headers[(a-1+r)%r];break;case i.SPACE:case i.ENTER:this._clickHandler({target:t.target},t.target),t.preventDefault()}return!n||(e(t.target).attr("tabIndex",-1),e(n).attr("tabIndex",0),n.focus(),!1)}},resize:function(){var t,i=this.options;if(i.fillSpace){if(e.browser.msie){var r=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}t=this.element.parent().height(),e.browser.msie&&this.element.parent().css("overflow",r),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")}else i.autoHeight&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).height("").height())}).height(t));return this},activate:function(e){this.options.active=e;var t=this._findActive(e)[0];return this._clickHandler({target:t},t),this},_findActive:function(t){return t?"number"==typeof t?this.headers.filter(":eq("+t+")"):this.headers.not(this.headers.not(t)):t===!1?e([]):this.headers.filter(":eq(0)")},_clickHandler:function(t,i){var r=this.options;if(!r.disabled){if(!t.target){if(!r.collapsible)return;this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(r.icons.headerSelected).addClass(r.icons.header),this.active.next().addClass("ui-accordion-content-active");var a=this.active.next(),n={options:r,newHeader:e([]),oldHeader:r.active,newContent:e([]),oldContent:a},o=this.active=e([]);return void this._toggle(o,a,n)}var s=e(t.currentTarget||i),l=s[0]===this.active[0];if(r.active=(!r.collapsible||!l)&&this.headers.index(s),!(this.running||!r.collapsible&&l)){var d=this.active,o=s.next(),a=this.active.next(),n={options:r,newHeader:l&&r.collapsible?e([]):s,oldHeader:this.active,newContent:l&&r.collapsible?e([]):o,oldContent:a},u=this.headers.index(this.active[0])>this.headers.index(s[0]);this.active=l?e([]):s,this._toggle(o,a,n,l,u),d.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(r.icons.headerSelected).addClass(r.icons.header),l||(s.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(r.icons.header).addClass(r.icons.headerSelected),s.next().addClass("ui-accordion-content-active"))}}},_toggle:function(t,i,r,a,n){var o=this,s=o.options;o.toShow=t,o.toHide=i,o.data=r;var l=function(){if(o)return o._completed.apply(o,arguments)};if(o._trigger("changestart",null,o.data),o.running=0===i.size()?t.size():i.size(),s.animated){var d={};d=s.collapsible&&a?{toShow:e([]),toHide:i,complete:l,down:n,autoHeight:s.autoHeight||s.fillSpace}:{toShow:t,toHide:i,complete:l,down:n,autoHeight:s.autoHeight||s.fillSpace},s.proxied||(s.proxied=s.animated),s.proxiedDuration||(s.proxiedDuration=s.duration),s.animated=e.isFunction(s.proxied)?s.proxied(d):s.proxied,s.duration=e.isFunction(s.proxiedDuration)?s.proxiedDuration(d):s.proxiedDuration;var u=e.ui.accordion.animations,c=s.duration,p=s.animated;!p||u[p]||e.easing[p]||(p="slide"),u[p]||(u[p]=function(e){this.slide(e,{easing:p,duration:c||700})}),u[p](d)}else s.collapsible&&a?t.toggle():(i.hide(),t.show()),l(!0);i.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur(),t.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(e){this.running=e?0:--this.running,this.running||(this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data))}}),e.extend(e.ui.accordion,{version:"1.8.23",animations:{slide:function(t,i){if(t=e.extend({easing:"swing",duration:300},t,i),!t.toHide.size())return void t.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},t);if(!t.toShow.size())return void t.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},t);var r,a=t.toShow.css("overflow"),n=0,o={},s={},l=["height","paddingTop","paddingBottom"],d=t.toShow;r=d[0].style.width,d.width(d.parent().width()-parseFloat(d.css("paddingLeft"))-parseFloat(d.css("paddingRight"))-(parseFloat(d.css("borderLeftWidth"))||0)-(parseFloat(d.css("borderRightWidth"))||0)),e.each(l,function(i,r){s[r]="hide";var a=(""+e.css(t.toShow[0],r)).match(/^([\d+-.]+)(.*)$/);o[r]={value:a[1],unit:a[2]||"px"}}),t.toShow.css({height:0,overflow:"hidden"}).show(),t.toHide.filter(":hidden").each(t.complete).end().filter(":visible").animate(s,{step:function(e,i){"height"==i.prop&&(n=i.end-i.start===0?0:(i.now-i.start)/(i.end-i.start)),t.toShow[0].style[i.prop]=n*o[i.prop].value+o[i.prop].unit},duration:t.duration,easing:t.easing,complete:function(){t.autoHeight||t.toShow.css("height",""),t.toShow.css({width:r,overflow:a}),t.complete()}})},bounceslide:function(e){this.slide(e,{easing:e.down?"easeOutBounce":"swing",duration:e.down?1e3:200})}}})}(jQuery),/*!
 * jQuery UI Autocomplete 1.8.23
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Autocomplete
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.position.js
 */
function(e,t){var i=0;e.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var t,i=this,r=this.element[0].ownerDocument;this.isMultiLine=this.element.is("textarea"),this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(r){if(!i.options.disabled&&!i.element.propAttr("readOnly")){t=!1;var a=e.ui.keyCode;switch(r.keyCode){case a.PAGE_UP:i._move("previousPage",r);break;case a.PAGE_DOWN:i._move("nextPage",r);break;case a.UP:i._keyEvent("previous",r);break;case a.DOWN:i._keyEvent("next",r);break;case a.ENTER:case a.NUMPAD_ENTER:i.menu.active&&(t=!0,r.preventDefault());case a.TAB:if(!i.menu.active)return;i.menu.select(r);break;case a.ESCAPE:i.element.val(i.term),i.close(r);break;default:clearTimeout(i.searching),i.searching=setTimeout(function(){i.term!=i.element.val()&&(i.selectedItem=null,i.search(null,r))},i.options.delay)}}}).bind("keypress.autocomplete",function(e){t&&(t=!1,e.preventDefault())}).bind("focus.autocomplete",function(){i.options.disabled||(i.selectedItem=null,i.previous=i.element.val())}).bind("blur.autocomplete",function(e){i.options.disabled||(clearTimeout(i.searching),i.closing=setTimeout(function(){i.close(e),i._change(e)},150))}),this._initSource(),this.menu=e("<ul></ul>").addClass("ui-autocomplete").appendTo(e(this.options.appendTo||"body",r)[0]).mousedown(function(t){var r=i.menu.element[0];e(t.target).closest(".ui-menu-item").length||setTimeout(function(){e(document).one("mousedown",function(t){t.target===i.element[0]||t.target===r||e.ui.contains(r,t.target)||i.close()})},1),setTimeout(function(){clearTimeout(i.closing)},13)}).menu({focus:function(e,t){var r=t.item.data("item.autocomplete");!1!==i._trigger("focus",e,{item:r})&&/^key/.test(e.originalEvent.type)&&i.element.val(r.value)},selected:function(e,t){var a=t.item.data("item.autocomplete"),n=i.previous;i.element[0]!==r.activeElement&&(i.element.focus(),i.previous=n,setTimeout(function(){i.previous=n,i.selectedItem=a},1)),!1!==i._trigger("select",e,{item:a})&&i.element.val(a.value),i.term=i.element.val(),i.close(e),i.selectedItem=a},blur:function(e,t){i.menu.element.is(":visible")&&i.element.val()!==i.term&&i.element.val(i.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),e.fn.bgiframe&&this.menu.element.bgiframe(),i.beforeunloadHandler=function(){i.element.removeAttr("autocomplete")},e(window).bind("beforeunload",i.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),e(window).unbind("beforeunload",this.beforeunloadHandler),e.Widget.prototype.destroy.call(this)},_setOption:function(t,i){e.Widget.prototype._setOption.apply(this,arguments),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(e(i||"body",this.element[0].ownerDocument)[0]),"disabled"===t&&i&&this.xhr&&this.xhr.abort()},_initSource:function(){var t,i,r=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,r){r(e.ui.autocomplete.filter(t,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,a){r.xhr&&r.xhr.abort(),r.xhr=e.ajax({url:i,data:t,dataType:"json",success:function(e,t){a(e)},error:function(){a([])}})}):this.source=this.options.source},search:function(e,t){return e=null!=e?e:this.element.val(),this.term=this.element.val(),e.length<this.options.minLength?this.close(t):(clearTimeout(this.closing),this._trigger("search",t)!==!1?this._search(e):void 0)},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:e},this._response())},_response:function(){var e=this,t=++i;return function(r){t===i&&e.__response(r),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){!this.options.disabled&&e&&e.length?(e=this._normalize(e),this._suggest(e),this._trigger("open")):this.close()},close:function(e){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",e))},_change:function(e){this.previous!==this.element.val()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var i=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(i,t),this.menu.deactivate(),this.menu.refresh(),i.show(),this._resizeMenu(),i.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new e.Event("mouseover"))},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,i){var r=this;e.each(i,function(e,i){r._renderItem(t,i)})},_renderItem:function(t,i){return e("<li></li>").data("item.autocomplete",i).append(e("<a></a>").text(i.label)).appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.first()&&/^previous/.test(e)||this.menu.last()&&/^next/.test(e)?(this.element.val(this.term),void this.menu.deactivate()):void this.menu[e](t):void this.search(null,t)},widget:function(){return this.menu.element},_keyEvent:function(e,t){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(e,t),t.preventDefault())}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(t,i){var r=new RegExp(e.ui.autocomplete.escapeRegex(i),"i");return e.grep(t,function(e){return r.test(e.label||e.value||e)})}})}(jQuery),/*
 * jQuery UI Menu (not officially released)
 * 
 * This widget isn't yet finished and the API is subject to change. We plan to finish
 * it for the next release. You're welcome to give it a try anyway and give us feedback,
 * as long as you're okay with migrating your code later on. We can help with that, too.
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Menu
 *
 * Depends:
 *	jquery.ui.core.js
 *  jquery.ui.widget.js
 */
function(e){e.widget("ui.menu",{_create:function(){var t=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(i){e(i.target).closest(".ui-menu-item a").length&&(i.preventDefault(),t.select(i))}),this.refresh()},refresh:function(){var t=this,i=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");i.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(i){t.activate(i,e(this).parent())}).mouseleave(function(){t.deactivate()})},activate:function(e,t){if(this.deactivate(),this.hasScroll()){var i=t.offset().top-this.element.offset().top,r=this.element.scrollTop(),a=this.element.height();i<0?this.element.scrollTop(r+i):i>=a&&this.element.scrollTop(r+i-a+t.height())}this.active=t.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",e,{item:t})},deactivate:function(){this.active&&(this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null)},next:function(e){this.move("next",".ui-menu-item:first",e)},previous:function(e){this.move("prev",".ui-menu-item:last",e)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(e,t,i){if(!this.active)return void this.activate(i,this.element.children(t));var r=this.active[e+"All"](".ui-menu-item").eq(0);r.length?this.activate(i,r):this.activate(i,this.element.children(t))},nextPage:function(t){if(this.hasScroll()){if(!this.active||this.last())return void this.activate(t,this.element.children(".ui-menu-item:first"));var i=this.active.offset().top,r=this.element.height(),a=this.element.children(".ui-menu-item").filter(function(){var t=e(this).offset().top-i-r+e(this).height();return t<10&&t>-10});a.length||(a=this.element.children(".ui-menu-item:last")),this.activate(t,a)}else this.activate(t,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(t){if(this.hasScroll()){if(!this.active||this.first())return void this.activate(t,this.element.children(".ui-menu-item:last"));var i=this.active.offset().top,r=this.element.height(),a=this.element.children(".ui-menu-item").filter(function(){var t=e(this).offset().top-i+r-e(this).height();return t<10&&t>-10});a.length||(a=this.element.children(".ui-menu-item:first")),this.activate(t,a)}else this.activate(t,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[e.fn.prop?"prop":"attr"]("scrollHeight")},select:function(e){this._trigger("selected",e,{item:this.active})}})}(jQuery),/*!
 * jQuery UI Button 1.8.23
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Button
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 */
function(e,t){var i,r,a,n,o="ui-button ui-widget ui-state-default ui-corner-all",s="ui-state-hover ui-state-active ",l="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",d=function(){var t=e(this).find(":ui-button");setTimeout(function(){t.button("refresh")},1)},u=function(t){var i=t.name,r=t.form,a=e([]);return i&&(a=r?e(r).find("[name='"+i+"']"):e("[name='"+i+"']",t.ownerDocument).filter(function(){return!this.form})),a};e.widget("ui.button",{options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",d),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.propAttr("disabled"):this.element.propAttr("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,s=this.options,l="checkbox"===this.type||"radio"===this.type,c="ui-state-hover"+(l?"":" ui-state-active"),p="ui-state-focus";null===s.label&&(s.label=this.buttonElement.html()),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter.button",function(){s.disabled||(e(this).addClass("ui-state-hover"),this===i&&e(this).addClass("ui-state-active"))}).bind("mouseleave.button",function(){s.disabled||e(this).removeClass(c)}).bind("click.button",function(e){s.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus.button",function(){t.buttonElement.addClass(p)}).bind("blur.button",function(){t.buttonElement.removeClass(p)}),l&&(this.element.bind("change.button",function(){n||t.refresh()}),this.buttonElement.bind("mousedown.button",function(e){s.disabled||(n=!1,r=e.pageX,a=e.pageY)}).bind("mouseup.button",function(e){s.disabled||r===e.pageX&&a===e.pageY||(n=!0)})),"checkbox"===this.type?this.buttonElement.bind("click.button",function(){return!s.disabled&&!n&&(e(this).toggleClass("ui-state-active"),void t.buttonElement.attr("aria-pressed",t.element[0].checked))}):"radio"===this.type?this.buttonElement.bind("click.button",function(){if(s.disabled||n)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var i=t.element[0];u(i).not(i).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown.button",function(){return!s.disabled&&(e(this).addClass("ui-state-active"),i=this,void e(document).one("mouseup",function(){i=null}))}).bind("mouseup.button",function(){return!s.disabled&&void e(this).removeClass("ui-state-active")}).bind("keydown.button",function(t){return!s.disabled&&void(t.keyCode!=e.ui.keyCode.SPACE&&t.keyCode!=e.ui.keyCode.ENTER||e(this).addClass("ui-state-active"))}).bind("keyup.button",function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",s.disabled),this._resetButton()},_determineButtonType:function(){if(this.element.is(":checkbox")?this.type="checkbox":this.element.is(":radio")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type){var e=this.element.parents().filter(":last"),t="label[for='"+this.element.attr("id")+"']";this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible");var i=this.element.is(":checked");i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.attr("aria-pressed",i)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" "+s+" "+l).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title"),e.Widget.prototype.destroy.call(this)},_setOption:function(t,i){return e.Widget.prototype._setOption.apply(this,arguments),"disabled"===t?void(i?this.element.propAttr("disabled",!0):this.element.propAttr("disabled",!1)):void this._resetButton()},refresh:function(){var t=this.element.is(":disabled");t!==this.options.disabled&&this._setOption("disabled",t),"radio"===this.type?u(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var t=this.buttonElement.removeClass(l),i=e("<span></span>",this.element[0].ownerDocument).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),r=this.options.icons,a=r.primary&&r.secondary,n=[];r.primary||r.secondary?(this.options.text&&n.push("ui-button-text-icon"+(a?"s":r.primary?"-primary":"-secondary")),r.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+r.primary+"'></span>"),r.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+r.secondary+"'></span>"),this.options.text||(n.push(a?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",i))):n.push("ui-button-text-only"),t.addClass(n.join(" "))}}),e.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,i){"disabled"===t&&this.buttons.button("option",t,i),e.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var t="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy"),e.Widget.prototype.destroy.call(this)}})}(jQuery),/*!
 * jQuery UI Dialog 1.8.23
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Dialog
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *  jquery.ui.button.js
 *	jquery.ui.draggable.js
 *	jquery.ui.mouse.js
 *	jquery.ui.position.js
 *	jquery.ui.resizable.js
 */
function(e,t){var i="ui-dialog ui-widget ui-widget-content ui-corner-all ",r={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},a={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(t){var i=e(this).css(t).offset().top;i<0&&e(this).css("top",t.top-i)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),"string"!=typeof this.originalTitle&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;var t=this,r=t.options,a=r.title||"&#160;",n=e.ui.dialog.getTitleId(t.element),o=(t.uiDialog=e("<div></div>")).appendTo(document.body).hide().addClass(i+r.dialogClass).css({zIndex:r.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(i){r.closeOnEscape&&!i.isDefaultPrevented()&&i.keyCode&&i.keyCode===e.ui.keyCode.ESCAPE&&(t.close(i),i.preventDefault())}).attr({role:"dialog","aria-labelledby":n}).mousedown(function(e){t.moveToTop(!1,e)}),s=(t.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(o),(t.uiDialogTitlebar=e("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(o)),l=e('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){l.addClass("ui-state-hover")},function(){l.removeClass("ui-state-hover")}).focus(function(){l.addClass("ui-state-focus")}).blur(function(){l.removeClass("ui-state-focus")}).click(function(e){return t.close(e),!1}).appendTo(s);(t.uiDialogTitlebarCloseText=e("<span></span>")).addClass("ui-icon ui-icon-closethick").text(r.closeText).appendTo(l),e("<span></span>").addClass("ui-dialog-title").attr("id",n).html(a).prependTo(s);e.isFunction(r.beforeclose)&&!e.isFunction(r.beforeClose)&&(r.beforeClose=r.beforeclose),s.find("*").add(s).disableSelection(),r.draggable&&e.fn.draggable&&t._makeDraggable(),r.resizable&&e.fn.resizable&&t._makeResizable(),t._createButtons(r.buttons),t._isOpen=!1,e.fn.bgiframe&&o.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var e=this;return e.overlay&&e.overlay.destroy(),e.uiDialog.hide(),e.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),e.uiDialog.remove(),e.originalTitle&&e.element.attr("title",e.originalTitle),e},widget:function(){return this.uiDialog},close:function(t){var i,r,a=this;if(!1!==a._trigger("beforeClose",t))return a.overlay&&a.overlay.destroy(),a.uiDialog.unbind("keypress.ui-dialog"),a._isOpen=!1,a.options.hide?a.uiDialog.hide(a.options.hide,function(){a._trigger("close",t)}):(a.uiDialog.hide(),a._trigger("close",t)),e.ui.dialog.overlay.resize(),a.options.modal&&(i=0,e(".ui-dialog").each(function(){this!==a.uiDialog[0]&&(r=e(this).css("z-index"),isNaN(r)||(i=Math.max(i,r)))}),e.ui.dialog.maxZ=i),a},isOpen:function(){return this._isOpen},moveToTop:function(t,i){var r,a=this,n=a.options;return n.modal&&!t||!n.stack&&!n.modal?a._trigger("focus",i):(n.zIndex>e.ui.dialog.maxZ&&(e.ui.dialog.maxZ=n.zIndex),a.overlay&&(e.ui.dialog.maxZ+=1,a.overlay.$el.css("z-index",e.ui.dialog.overlay.maxZ=e.ui.dialog.maxZ)),r={scrollTop:a.element.scrollTop(),scrollLeft:a.element.scrollLeft()},e.ui.dialog.maxZ+=1,a.uiDialog.css("z-index",e.ui.dialog.maxZ),a.element.attr(r),a._trigger("focus",i),a)},open:function(){if(!this._isOpen){var t=this,i=t.options,r=t.uiDialog;return t.overlay=i.modal?new e.ui.dialog.overlay(t):null,t._size(),t._position(i.position),r.show(i.show),t.moveToTop(!0),i.modal&&r.bind("keydown.ui-dialog",function(t){if(t.keyCode===e.ui.keyCode.TAB){var i=e(":tabbable",this),r=i.filter(":first"),a=i.filter(":last");return t.target!==a[0]||t.shiftKey?t.target===r[0]&&t.shiftKey?(a.focus(1),!1):void 0:(r.focus(1),!1)}}),e(t.element.find(":tabbable").get().concat(r.find(".ui-dialog-buttonpane :tabbable").get().concat(r.get()))).eq(0).focus(),t._isOpen=!0,t._trigger("open"),t}},_createButtons:function(t){var i=this,r=!1,a=e("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),n=e("<div></div>").addClass("ui-dialog-buttonset").appendTo(a);i.uiDialog.find(".ui-dialog-buttonpane").remove(),"object"==typeof t&&null!==t&&e.each(t,function(){return!(r=!0)}),r&&(e.each(t,function(t,r){r=e.isFunction(r)?{click:r,text:t}:r;var a=e('<button type="button"></button>').click(function(){r.click.apply(i.element[0],arguments)}).appendTo(n);e.each(r,function(e,t){"click"!==e&&(e in a?a[e](t):a.attr(e,t))}),e.fn.button&&a.button()}),a.appendTo(i.uiDialog))},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var i,r=this,a=r.options,n=e(document);r.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,o){i="auto"===a.height?"auto":e(this).height(),e(this).height(e(this).height()).addClass("ui-dialog-dragging"),r._trigger("dragStart",n,t(o))},drag:function(e,i){r._trigger("drag",e,t(i))},stop:function(o,s){a.position=[s.position.left-n.scrollLeft(),s.position.top-n.scrollTop()],e(this).removeClass("ui-dialog-dragging").height(i),r._trigger("dragStop",o,t(s)),e.ui.dialog.overlay.resize()}})},_makeResizable:function(i){function r(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}i=i===t?this.options.resizable:i;var a=this,n=a.options,o=a.uiDialog.css("position"),s="string"==typeof i?i:"n,e,s,w,se,sw,ne,nw";a.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:a.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:a._minHeight(),handles:s,start:function(t,i){e(this).addClass("ui-dialog-resizing"),a._trigger("resizeStart",t,r(i))},resize:function(e,t){a._trigger("resize",e,r(t))},stop:function(t,i){e(this).removeClass("ui-dialog-resizing"),n.height=e(this).height(),n.width=e(this).width(),a._trigger("resizeStop",t,r(i)),e.ui.dialog.overlay.resize()}}).css("position",o).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(t){var i,r=[],a=[0,0];t?(("string"==typeof t||"object"==typeof t&&"0"in t)&&(r=t.split?t.split(" "):[t[0],t[1]],1===r.length&&(r[1]=r[0]),e.each(["left","top"],function(e,t){+r[e]===r[e]&&(a[e]=r[e],r[e]=t)}),t={my:r.join(" "),at:r.join(" "),offset:a.join(" ")}),t=e.extend({},e.ui.dialog.prototype.options.position,t)):t=e.ui.dialog.prototype.options.position,i=this.uiDialog.is(":visible"),i||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(e.extend({of:window},t)),i||this.uiDialog.hide()},_setOptions:function(t){var i=this,n={},o=!1;e.each(t,function(e,t){i._setOption(e,t),e in r&&(o=!0),e in a&&(n[e]=t)}),o&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",n)},_setOption:function(t,r){var a=this,n=a.uiDialog;switch(t){case"beforeclose":t="beforeClose";break;case"buttons":a._createButtons(r);break;case"closeText":a.uiDialogTitlebarCloseText.text(""+r);break;case"dialogClass":n.removeClass(a.options.dialogClass).addClass(i+r);break;case"disabled":r?n.addClass("ui-dialog-disabled"):n.removeClass("ui-dialog-disabled");break;case"draggable":var o=n.is(":data(draggable)");o&&!r&&n.draggable("destroy"),!o&&r&&a._makeDraggable();break;case"position":a._position(r);break;case"resizable":var s=n.is(":data(resizable)");s&&!r&&n.resizable("destroy"),s&&"string"==typeof r&&n.resizable("option","handles",r),s||r===!1||a._makeResizable(r);break;case"title":e(".ui-dialog-title",a.uiDialogTitlebar).html(""+(r||"&#160;"))}e.Widget.prototype._setOption.apply(a,arguments)},_size:function(){var t,i,r=this.options,a=this.uiDialog.is(":visible");if(this.element.show().css({width:"auto",minHeight:0,height:0}),r.minWidth>r.width&&(r.width=r.minWidth),t=this.uiDialog.css({height:"auto",width:r.width}).height(),i=Math.max(0,r.minHeight-t),"auto"===r.height)if(e.support.minHeight)this.element.css({minHeight:i,height:"auto"});else{this.uiDialog.show();var n=this.element.css("height","auto").height();a||this.uiDialog.hide(),this.element.height(Math.max(n,i))}else this.element.height(Math.max(r.height-t,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),e.extend(e.ui.dialog,{version:"1.8.23",uuid:0,maxZ:0,getTitleId:function(e){var t=e.attr("id");return t||(this.uuid+=1,t=this.uuid),"ui-dialog-title-"+t},overlay:function(t){this.$el=e.ui.dialog.overlay.create(t)}}),e.extend(e.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:e.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(e){return e+".dialog-overlay"}).join(" "),create:function(t){0===this.instances.length&&(setTimeout(function(){e.ui.dialog.overlay.instances.length&&e(document).bind(e.ui.dialog.overlay.events,function(t){if(e(t.target).zIndex()<e.ui.dialog.overlay.maxZ)return!1})},1),e(document).bind("keydown.dialog-overlay",function(i){t.options.closeOnEscape&&!i.isDefaultPrevented()&&i.keyCode&&i.keyCode===e.ui.keyCode.ESCAPE&&(t.close(i),i.preventDefault())}),e(window).bind("resize.dialog-overlay",e.ui.dialog.overlay.resize));var i=(this.oldInstances.pop()||e("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return e.fn.bgiframe&&i.bgiframe(),this.instances.push(i),i},destroy:function(t){var i=e.inArray(t,this.instances);i!=-1&&this.oldInstances.push(this.instances.splice(i,1)[0]),0===this.instances.length&&e([document,window]).unbind(".dialog-overlay"),t.remove();var r=0;e.each(this.instances,function(){r=Math.max(r,this.css("z-index"))}),this.maxZ=r},height:function(){var t,i;return e.browser.msie&&e.browser.version<7?(t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),i=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),t<i?e(window).height()+"px":t+"px"):e(document).height()+"px"},width:function(){var t,i;return e.browser.msie?(t=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),i=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),t<i?e(window).width()+"px":t+"px"):e(document).width()+"px"},resize:function(){var t=e([]);e.each(e.ui.dialog.overlay.instances,function(){t=t.add(this)}),t.css({width:0,height:0}).css({width:e.ui.dialog.overlay.width(),height:e.ui.dialog.overlay.height()})}}),e.extend(e.ui.dialog.overlay.prototype,{destroy:function(){e.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),/*!
 * jQuery UI Slider 1.8.23
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Slider
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
function(e,t){var i=5;e.widget("ui.slider",e.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var t=this,r=this.options,a=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),n="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",o=r.values&&r.values.length||1,s=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(r.disabled?" ui-slider-disabled ui-disabled":"")),this.range=e([]),r.range&&(r.range===!0&&(r.values||(r.values=[this._valueMin(),this._valueMin()]),r.values.length&&2!==r.values.length&&(r.values=[r.values[0],r.values[0]])),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===r.range||"max"===r.range?" ui-slider-range-"+r.range:"")));for(var l=a.length;l<o;l+=1)s.push(n);this.handles=a.add(e(s.join("")).appendTo(t.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).hover(function(){r.disabled||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}).focus(function(){r.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(t){e(this).data("index.ui-slider-handle",t)}),this.handles.keydown(function(r){var a,n,o,s,l=e(this).data("index.ui-slider-handle");if(!t.options.disabled){switch(r.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(r.preventDefault(),!t._keySliding&&(t._keySliding=!0,e(this).addClass("ui-state-active"),a=t._start(r,l),a===!1))return}switch(s=t.options.step,n=o=t.options.values&&t.options.values.length?t.values(l):t.value(),r.keyCode){case e.ui.keyCode.HOME:o=t._valueMin();break;case e.ui.keyCode.END:o=t._valueMax();break;case e.ui.keyCode.PAGE_UP:o=t._trimAlignValue(n+(t._valueMax()-t._valueMin())/i);break;case e.ui.keyCode.PAGE_DOWN:o=t._trimAlignValue(n-(t._valueMax()-t._valueMin())/i);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(n===t._valueMax())return;o=t._trimAlignValue(n+s);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(n===t._valueMin())return;o=t._trimAlignValue(n-s)}t._slide(r,l,o)}}).keyup(function(i){var r=e(this).data("index.ui-slider-handle");t._keySliding&&(t._keySliding=!1,t._stop(i,r),t._change(i,r),e(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(t){var i,r,a,n,o,s,l,d,u,c=this.options;return!c.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},r=this._normValueFromMouse(i),a=this._valueMax()-this._valueMin()+1,o=this,this.handles.each(function(t){var i=Math.abs(r-o.values(t));a>i&&(a=i,n=e(this),s=t)}),c.range===!0&&this.values(1)===c.min&&(s+=1,n=e(this.handles[s])),l=this._start(t,s),l!==!1&&(this._mouseSliding=!0,o._handleIndex=s,n.addClass("ui-state-active").focus(),d=n.offset(),u=!e(t.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=u?{left:0,top:0}:{left:t.pageX-d.left-n.width()/2,top:t.pageY-d.top-n.height()/2-(parseInt(n.css("borderTopWidth"),10)||0)-(parseInt(n.css("borderBottomWidth"),10)||0)+(parseInt(n.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,s,r),this._animateOff=!0,!0))},_mouseStart:function(e){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,r,a,n;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),r=i/t,r>1&&(r=1),r<0&&(r=0),"vertical"===this.orientation&&(r=1-r),a=this._valueMax()-this._valueMin(),n=this._valueMin()+r*a,this._trimAlignValue(n)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var r,a,n;this.options.values&&this.options.values.length?(r=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&i>r||1===t&&i<r)&&(i=r),i!==this.values(t)&&(a=this.values(),a[t]=i,n=this._trigger("slide",e,{handle:this.handles[t],value:i,values:a}),r=this.values(t?0:1),n!==!1&&this.values(t,i,!0))):i!==this.value()&&(n=this._trigger("slide",e,{handle:this.handles[t],value:i}),n!==!1&&this.value(i))},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,i){var r,a,n;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(r=this.options.values,a=arguments[0],n=0;n<r.length;n+=1)r[n]=this._trimAlignValue(a[n]),this._change(null,n);this._refreshValue()},_setOption:function(t,i){var r,a=0;switch(e.isArray(this.options.values)&&(a=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"disabled":i?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),r=0;r<a;r+=1)this._change(null,r);this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,r;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);for(i=this.options.values.slice(),r=0;r<i.length;r+=1)i[r]=this._trimAlignValue(i[r]);return i},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,r=e-i;return 2*Math.abs(i)>=t&&(r+=i>0?t:-t),parseFloat(r.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,i,r,a,n,o=this.options.range,s=this.options,l=this,d=!this._animateOff&&s.animate,u={};this.options.values&&this.options.values.length?this.handles.each(function(r,a){t=(l.values(r)-l._valueMin())/(l._valueMax()-l._valueMin())*100,u["horizontal"===l.orientation?"left":"bottom"]=t+"%",e(this).stop(1,1)[d?"animate":"css"](u,s.animate),l.options.range===!0&&("horizontal"===l.orientation?(0===r&&l.range.stop(1,1)[d?"animate":"css"]({left:t+"%"},s.animate),1===r&&l.range[d?"animate":"css"]({width:t-i+"%"},{queue:!1,duration:s.animate})):(0===r&&l.range.stop(1,1)[d?"animate":"css"]({bottom:t+"%"},s.animate),1===r&&l.range[d?"animate":"css"]({height:t-i+"%"},{queue:!1,duration:s.animate}))),i=t}):(r=this.value(),a=this._valueMin(),n=this._valueMax(),t=n!==a?(r-a)/(n-a)*100:0,u["horizontal"===l.orientation?"left":"bottom"]=t+"%",this.handle.stop(1,1)[d?"animate":"css"](u,s.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[d?"animate":"css"]({width:t+"%"},s.animate),"max"===o&&"horizontal"===this.orientation&&this.range[d?"animate":"css"]({width:100-t+"%"},{queue:!1,duration:s.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[d?"animate":"css"]({height:t+"%"},s.animate),"max"===o&&"vertical"===this.orientation&&this.range[d?"animate":"css"]({height:100-t+"%"},{queue:!1,duration:s.animate}))}}),e.extend(e.ui.slider,{version:"1.8.23"})}(jQuery),/*!
 * jQuery UI Tabs 1.8.23
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Tabs
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 */
function(e,t){function i(){return++a}function r(){return++n}var a=0,n=0;e.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(e,t){if("selected"==e){if(this.options.collapsible&&t==this.options.selected)return;this.select(t)}else this.options[e]=t,this._tabify()},_tabId:function(e){return e.title&&e.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+i()},_sanitizeSelector:function(e){return e.replace(/:/g,"\\:")},_cookie:function(){var t=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+r());return e.cookie.apply(null,[t].concat(e.makeArray(arguments)))},_ui:function(e,t){return{tab:e,panel:t,index:this.anchors.index(e)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var t=e(this);t.html(t.data("label.tabs")).removeData("label.tabs")})},_tabify:function(i){function r(t,i){t.css("display",""),!e.support.opacity&&i.opacity&&t[0].style.removeAttribute("filter")}var a=this,n=this.options,o=/^#.+/;this.list=this.element.find("ol,ul").eq(0),this.lis=e(" > li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return e("a",this)[0]}),this.panels=e([]),this.anchors.each(function(t,i){var r,s=e(i).attr("href"),l=s.split("#")[0];if(l&&(l===location.toString().split("#")[0]||(r=e("base")[0])&&l===r.href)&&(s=i.hash,i.href=s),o.test(s))a.panels=a.panels.add(a.element.find(a._sanitizeSelector(s)));else if(s&&"#"!==s){e.data(i,"href.tabs",s),e.data(i,"load.tabs",s.replace(/#.*$/,""));var d=a._tabId(i);i.href="#"+d;var u=a.element.find("#"+d);u.length||(u=e(n.panelTemplate).attr("id",d).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(a.panels[t-1]||a.list),u.data("destroy.tabs",!0)),a.panels=a.panels.add(u)}else n.disabled.push(t)}),i?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),n.selected===t?(location.hash&&this.anchors.each(function(e,t){if(t.hash==location.hash)return n.selected=e,!1}),"number"!=typeof n.selected&&n.cookie&&(n.selected=parseInt(a._cookie(),10)),"number"!=typeof n.selected&&this.lis.filter(".ui-tabs-selected").length&&(n.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),n.selected=n.selected||(this.lis.length?0:-1)):null===n.selected&&(n.selected=-1),n.selected=n.selected>=0&&this.anchors[n.selected]||n.selected<0?n.selected:0,n.disabled=e.unique(n.disabled.concat(e.map(this.lis.filter(".ui-state-disabled"),function(e,t){return a.lis.index(e)}))).sort(),e.inArray(n.selected,n.disabled)!=-1&&n.disabled.splice(e.inArray(n.selected,n.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),n.selected>=0&&this.anchors.length&&(a.element.find(a._sanitizeSelector(a.anchors[n.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(n.selected).addClass("ui-tabs-selected ui-state-active"),a.element.queue("tabs",function(){a._trigger("show",null,a._ui(a.anchors[n.selected],a.element.find(a._sanitizeSelector(a.anchors[n.selected].hash))[0]))}),this.load(n.selected)),e(window).bind("unload",function(){a.lis.add(a.anchors).unbind(".tabs"),a.lis=a.anchors=a.panels=null})):n.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[n.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),n.cookie&&this._cookie(n.selected,n.cookie);for(var s,l=0;s=this.lis[l];l++)e(s)[e.inArray(l,n.disabled)==-1||e(s).hasClass("ui-tabs-selected")?"removeClass":"addClass"]("ui-state-disabled");if(n.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs"),"mouseover"!==n.event){var d=function(e,t){t.is(":not(.ui-state-disabled)")&&t.addClass("ui-state-"+e)},u=function(e,t){t.removeClass("ui-state-"+e)};this.lis.bind("mouseover.tabs",function(){d("hover",e(this))}),this.lis.bind("mouseout.tabs",function(){u("hover",e(this))}),this.anchors.bind("focus.tabs",function(){d("focus",e(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){u("focus",e(this).closest("li"))})}var c,p;n.fx&&(e.isArray(n.fx)?(c=n.fx[0],p=n.fx[1]):c=p=n.fx);var h=p?function(t,i){e(t).closest("li").addClass("ui-tabs-selected ui-state-active"),i.hide().removeClass("ui-tabs-hide").animate(p,p.duration||"normal",function(){r(i,p),a._trigger("show",null,a._ui(t,i[0]))})}:function(t,i){e(t).closest("li").addClass("ui-tabs-selected ui-state-active"),i.removeClass("ui-tabs-hide"),a._trigger("show",null,a._ui(t,i[0]))},f=c?function(e,t){t.animate(c,c.duration||"normal",function(){a.lis.removeClass("ui-tabs-selected ui-state-active"),t.addClass("ui-tabs-hide"),r(t,c),a.element.dequeue("tabs")})}:function(e,t,i){a.lis.removeClass("ui-tabs-selected ui-state-active"),t.addClass("ui-tabs-hide"),a.element.dequeue("tabs")};this.anchors.bind(n.event+".tabs",function(){var t=this,i=e(t).closest("li"),r=a.panels.filter(":not(.ui-tabs-hide)"),o=a.element.find(a._sanitizeSelector(t.hash));if(i.hasClass("ui-tabs-selected")&&!n.collapsible||i.hasClass("ui-state-disabled")||i.hasClass("ui-state-processing")||a.panels.filter(":animated").length||a._trigger("select",null,a._ui(this,o[0]))===!1)return this.blur(),!1;if(n.selected=a.anchors.index(this),a.abort(),n.collapsible){if(i.hasClass("ui-tabs-selected"))return n.selected=-1,n.cookie&&a._cookie(n.selected,n.cookie),a.element.queue("tabs",function(){f(t,r)}).dequeue("tabs"),this.blur(),!1;if(!r.length)return n.cookie&&a._cookie(n.selected,n.cookie),a.element.queue("tabs",function(){h(t,o)}),a.load(a.anchors.index(this)),this.blur(),!1}if(n.cookie&&a._cookie(n.selected,n.cookie),!o.length)throw"jQuery UI Tabs: Mismatching fragment identifier.";r.length&&a.element.queue("tabs",function(){f(t,r)}),a.element.queue("tabs",function(){h(t,o)}),a.load(a.anchors.index(this)),e.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return!1})},_getIndex:function(e){return"string"==typeof e&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},destroy:function(){var t=this.options;return this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var t=e.data(this,"href.tabs");t&&(this.href=t);var i=e(this).unbind(".tabs");e.each(["href","load","cache"],function(e,t){i.removeData(t+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){e.data(this,"destroy.tabs")?e(this).remove():e(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}),t.cookie&&this._cookie(null,t.cookie),this},add:function(i,r,a){a===t&&(a=this.anchors.length);var n=this,o=this.options,s=e(o.tabTemplate.replace(/#\{href\}/g,i).replace(/#\{label\}/g,r)),l=i.indexOf("#")?this._tabId(e("a",s)[0]):i.replace("#","");s.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var d=n.element.find("#"+l);return d.length||(d=e(o.panelTemplate).attr("id",l).data("destroy.tabs",!0)),d.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),a>=this.lis.length?(s.appendTo(this.list),d.appendTo(this.list[0].parentNode)):(s.insertBefore(this.lis[a]),d.insertBefore(this.panels[a])),o.disabled=e.map(o.disabled,function(e,t){return e>=a?++e:e}),this._tabify(),1==this.anchors.length&&(o.selected=0,s.addClass("ui-tabs-selected ui-state-active"),d.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){n._trigger("show",null,n._ui(n.anchors[0],n.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[a],this.panels[a])),this},remove:function(t){t=this._getIndex(t);var i=this.options,r=this.lis.eq(t).remove(),a=this.panels.eq(t).remove();return r.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(t+(t+1<this.anchors.length?1:-1)),i.disabled=e.map(e.grep(i.disabled,function(e,i){return e!=t}),function(e,i){return e>=t?--e:e}),this._tabify(),this._trigger("remove",null,this._ui(r.find("a")[0],a[0])),this},enable:function(t){t=this._getIndex(t);var i=this.options;if(e.inArray(t,i.disabled)!=-1)return this.lis.eq(t).removeClass("ui-state-disabled"),i.disabled=e.grep(i.disabled,function(e,i){return e!=t}),this._trigger("enable",null,this._ui(this.anchors[t],this.panels[t])),this},disable:function(e){e=this._getIndex(e);var t=this.options;return e!=t.selected&&(this.lis.eq(e).addClass("ui-state-disabled"),t.disabled.push(e),t.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[e],this.panels[e]))),this},select:function(e){if(e=this._getIndex(e),e==-1){if(!this.options.collapsible||this.options.selected==-1)return this;e=this.options.selected}return this.anchors.eq(e).trigger(this.options.event+".tabs"),this},load:function(t){t=this._getIndex(t);var i=this,r=this.options,a=this.anchors.eq(t)[0],n=e.data(a,"load.tabs");if(this.abort(),!n||0!==this.element.queue("tabs").length&&e.data(a,"cache.tabs"))return void this.element.dequeue("tabs");if(this.lis.eq(t).addClass("ui-state-processing"),r.spinner){var o=e("span",a);o.data("label.tabs",o.html()).html(r.spinner)}return this.xhr=e.ajax(e.extend({},r.ajaxOptions,{url:n,success:function(n,o){i.element.find(i._sanitizeSelector(a.hash)).html(n),i._cleanup(),r.cache&&e.data(a,"cache.tabs",!0),i._trigger("load",null,i._ui(i.anchors[t],i.panels[t]));try{r.ajaxOptions.success(n,o)}catch(s){}},error:function(e,n,o){i._cleanup(),i._trigger("load",null,i._ui(i.anchors[t],i.panels[t]));try{r.ajaxOptions.error(e,n,t,a)}catch(o){}}})),i.element.dequeue("tabs"),this},abort:function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},url:function(e,t){return this.anchors.eq(e).removeData("cache.tabs").data("load.tabs",t),this},length:function(){return this.anchors.length}}),e.extend(e.ui.tabs,{version:"1.8.23"}),e.extend(e.ui.tabs.prototype,{rotation:null,rotate:function(e,t){var i=this,r=this.options,a=i._rotate||(i._rotate=function(t){clearTimeout(i.rotation),i.rotation=setTimeout(function(){var e=r.selected;i.select(++e<i.anchors.length?e:0)},e),t&&t.stopPropagation()}),n=i._unrotate||(i._unrotate=t?function(e){a()}:function(e){e.clientX&&i.rotate(null)});return e?(this.element.bind("tabsshow",a),this.anchors.bind(r.event+".tabs",n),a()):(clearTimeout(i.rotation),this.element.unbind("tabsshow",a),this.anchors.unbind(r.event+".tabs",n),delete this._rotate,delete this._unrotate),this}})}(jQuery),/*!
 * jQuery UI Datepicker 1.8.23
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Datepicker
 *
 * Depends:
 *	jquery.ui.core.js
 */
function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.bind("mouseout",function(e){var i=$(e.target).closest(t);i.length&&i.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(i){var r=$(i.target).closest(t);!$.datepicker._isDisabledDatepicker(instActive.inline?e.parent()[0]:instActive.input[0])&&r.length&&(r.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),r.addClass("ui-state-hover"),r.hasClass("ui-datepicker-prev")&&r.addClass("ui-datepicker-prev-hover"),r.hasClass("ui-datepicker-next")&&r.addClass("ui-datepicker-next-hover"))})}function extendRemove(e,t){$.extend(e,t);for(var i in t)null!=t[i]&&t[i]!=undefined||(e[i]=t[i]);return e}function isArray(e){return e&&($.browser.safari&&"object"==typeof e&&e.length||e.constructor&&e.constructor.toString().match(/\Array\(\)/))}$.extend($.ui,{datepicker:{version:"1.8.23"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline="div"==nodeName||"span"==nodeName;target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),"input"==nodeName?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(e,t){var i=e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:i,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(e,t){var i=$(e);t.append=$([]),t.trigger=$([]),i.hasClass(this.markerClassName)||(this._attachments(i,t),i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,i,r){t.settings[i]=r}).bind("getData.datepicker",function(e,i){return this._get(t,i)}),this._autoSize(t),$.data(e,PROP_NAME,t),t.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,t){var i=this._get(t,"appendText"),r=this._get(t,"isRTL");t.append&&t.append.remove(),i&&(t.append=$('<span class="'+this._appendClass+'">'+i+"</span>"),e[r?"before":"after"](t.append)),e.unbind("focus",this._showDatepicker),t.trigger&&t.trigger.remove();var a=this._get(t,"showOn");if("focus"!=a&&"both"!=a||e.focus(this._showDatepicker),"button"==a||"both"==a){var n=this._get(t,"buttonText"),o=this._get(t,"buttonImage");t.trigger=$(this._get(t,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:o,alt:n,title:n}):$('<button type="button"></button>').addClass(this._triggerClass).html(""==o?n:$("<img/>").attr({src:o,alt:n,title:n}))),e[r?"before":"after"](t.trigger),t.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==e[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=e[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(e[0])):$.datepicker._showDatepicker(e[0]),!1})}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t=new Date(2009,11,20),i=this._get(e,"dateFormat");if(i.match(/[DM]/)){var r=function(e){for(var t=0,i=0,r=0;r<e.length;r++)e[r].length>t&&(t=e[r].length,i=r);return i};t.setMonth(r(this._get(e,i.match(/MM/)?"monthNames":"monthNamesShort"))),t.setDate(r(this._get(e,i.match(/DD/)?"dayNames":"dayNamesShort"))+20-t.getDay())}e.input.attr("size",this._formatDate(e,t).length)}},_inlineDatepicker:function(e,t){var i=$(e);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(t.dpDiv).bind("setData.datepicker",function(e,i,r){t.settings[i]=r}).bind("getData.datepicker",function(e,i){return this._get(t,i)}),$.data(e,PROP_NAME,t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block"))},_dialogDatepicker:function(e,t,i,r,a){var n=this._dialogInst;if(!n){this.uuid+=1;var o="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+o+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),n=this._dialogInst=this._newInst(this._dialogInput,!1),n.settings={},$.data(this._dialogInput[0],PROP_NAME,n)}if(extendRemove(n.settings,r||{}),t=t&&t.constructor==Date?this._formatDate(n,t):t,this._dialogInput.val(t),this._pos=a?a.length?a:[a.pageX,a.pageY]:null,!this._pos){var s=document.documentElement.clientWidth,l=document.documentElement.clientHeight,d=document.documentElement.scrollLeft||document.body.scrollLeft,u=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[s/2-100+d,l/2-150+u]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),n.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,n),this},_destroyDatepicker:function(e){var t=$(e),i=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var r=e.nodeName.toLowerCase();$.removeData(e,PROP_NAME),"input"==r?(i.append.remove(),i.trigger.remove(),t.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!=r&&"span"!=r||t.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(e){var t=$(e),i=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var r=e.nodeName.toLowerCase();if("input"==r)e.disabled=!1,i.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==r||"span"==r){var a=t.children("."+this._inlineClass);a.children().removeClass("ui-state-disabled"),a.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t})}},_disableDatepicker:function(e){var t=$(e),i=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var r=e.nodeName.toLowerCase();if("input"==r)e.disabled=!0,i.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==r||"span"==r){var a=t.children("."+this._inlineClass);a.children().addClass("ui-state-disabled"),a.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t}),this._disabledInputs[this._disabledInputs.length]=e}},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]==e)return!0;return!1},_getInst:function(e){try{return $.data(e,PROP_NAME)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,i){var r=this._getInst(e);if(2==arguments.length&&"string"==typeof t)return"defaults"==t?$.extend({},$.datepicker._defaults):r?"all"==t?$.extend({},r.settings):this._get(r,t):null;var a=t||{};if("string"==typeof t&&(a={},a[t]=i),r){this._curInst==r&&this._hideDatepicker();var n=this._getDateDatepicker(e,!0),o=this._getMinMaxDate(r,"min"),s=this._getMinMaxDate(r,"max");extendRemove(r.settings,a),null!==o&&a.dateFormat!==undefined&&a.minDate===undefined&&(r.settings.minDate=this._formatDate(r,o)),null!==s&&a.dateFormat!==undefined&&a.maxDate===undefined&&(r.settings.maxDate=this._formatDate(r,s)),this._attachments($(e),r),this._autoSize(r),this._setDate(r,n),this._updateAlternate(r),this._updateDatepicker(r)}},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(e){var t=$.datepicker._getInst(e.target),i=!0,r=t.dpDiv.is(".ui-datepicker-rtl");if(t._keyEvent=!0,$.datepicker._datepickerShowing)switch(e.keyCode){case 9:$.datepicker._hideDatepicker(),i=!1;break;case 13:var a=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",t.dpDiv);a[0]&&$.datepicker._selectDay(e.target,t.selectedMonth,t.selectedYear,a[0]);var n=$.datepicker._get(t,"onSelect");if(n){var o=$.datepicker._formatDate(t);n.apply(t.input?t.input[0]:null,[o,t])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&$.datepicker._clearDate(e.target),i=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&$.datepicker._gotoToday(e.target),i=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,r?1:-1,"D"),i=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,-7,"D"),i=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,r?-1:1,"D"),i=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,7,"D"),i=e.ctrlKey||e.metaKey;break;default:i=!1}else 36==e.keyCode&&e.ctrlKey?$.datepicker._showDatepicker(this):i=!1;i&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t=$.datepicker._getInst(e.target);if($.datepicker._get(t,"constrainInput")){var i=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),r=String.fromCharCode(e.charCode==undefined?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||r<" "||!i||i.indexOf(r)>-1}},_doKeyUp:function(e){var t=$.datepicker._getInst(e.target);if(t.input.val()!=t.lastVal)try{var i=$.datepicker.parseDate($.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,$.datepicker._getFormatConfig(t));i&&($.datepicker._setDateFromField(t),$.datepicker._updateAlternate(t),$.datepicker._updateDatepicker(t))}catch(r){$.datepicker.log(r)}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!=e.nodeName.toLowerCase()&&(e=$("input",e.parentNode)[0]),!$.datepicker._isDisabledDatepicker(e)&&$.datepicker._lastInput!=e){var t=$.datepicker._getInst(e);$.datepicker._curInst&&$.datepicker._curInst!=t&&($.datepicker._curInst.dpDiv.stop(!0,!0),t&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var i=$.datepicker._get(t,"beforeShow"),r=i?i.apply(e,[e,t]):{};if(r!==!1){extendRemove(t.settings,r),t.lastVal=null,$.datepicker._lastInput=e,$.datepicker._setDateFromField(t),$.datepicker._inDialog&&(e.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(e),$.datepicker._pos[1]+=e.offsetHeight);var a=!1;$(e).parents().each(function(){return a|="fixed"==$(this).css("position"),!a}),a&&$.browser.opera&&($.datepicker._pos[0]-=document.documentElement.scrollLeft,$.datepicker._pos[1]-=document.documentElement.scrollTop);var n={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};if($.datepicker._pos=null,t.dpDiv.empty(),t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(t),n=$.datepicker._checkOffset(t,n,a),t.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":a?"fixed":"absolute",display:"none",left:n.left+"px",top:n.top+"px"}),!t.inline){var o=$.datepicker._get(t,"showAnim"),s=$.datepicker._get(t,"duration"),l=function(){var e=t.dpDiv.find("iframe.ui-datepicker-cover");if(e.length){var i=$.datepicker._getBorders(t.dpDiv);e.css({left:-i[0],top:-i[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()})}};t.dpDiv.zIndex($(e).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&$.effects[o]?t.dpDiv.show(o,$.datepicker._get(t,"showOptions"),s,l):t.dpDiv[o||"show"](o?s:null,l),o&&s||l(),t.input.is(":visible")&&!t.input.is(":disabled")&&t.input.focus(),$.datepicker._curInst=t}}}},_updateDatepicker:function(e){var t=this;t.maxRows=4;var i=$.datepicker._getBorders(e.dpDiv);instActive=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var r=e.dpDiv.find("iframe.ui-datepicker-cover");r.length&&r.css({left:-i[0],top:-i[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()}),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var a=this._getNumberOfMonths(e),n=a[1],o=17;if(e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),n>1&&e.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",o*n+"em"),e.dpDiv[(1!=a[0]||1!=a[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e==$.datepicker._curInst&&$.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!=document.activeElement&&e.input.focus(),e.yearshtml){var s=e.yearshtml;setTimeout(function(){s===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),s=e.yearshtml=null},0)}},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(e,t,i){var r=e.dpDiv.outerWidth(),a=e.dpDiv.outerHeight(),n=e.input?e.input.outerWidth():0,o=e.input?e.input.outerHeight():0,s=document.documentElement.clientWidth+(i?0:$(document).scrollLeft()),l=document.documentElement.clientHeight+(i?0:$(document).scrollTop());return t.left-=this._get(e,"isRTL")?r-n:0,t.left-=i&&t.left==e.input.offset().left?$(document).scrollLeft():0,t.top-=i&&t.top==e.input.offset().top+o?$(document).scrollTop():0,t.left-=Math.min(t.left,t.left+r>s&&s>r?Math.abs(t.left+r-s):0),t.top-=Math.min(t.top,t.top+a>l&&l>a?Math.abs(a+o):0),t},_findPos:function(e){for(var t=this._getInst(e),i=this._get(t,"isRTL");e&&("hidden"==e.type||1!=e.nodeType||$.expr.filters.hidden(e));)e=e[i?"previousSibling":"nextSibling"];var r=$(e).offset();return[r.left,r.top]},_hideDatepicker:function(e){var t=this._curInst;if(t&&(!e||t==$.data(e,PROP_NAME))&&this._datepickerShowing){var i=this._get(t,"showAnim"),r=this._get(t,"duration"),a=function(){$.datepicker._tidyDialog(t)};$.effects&&$.effects[i]?t.dpDiv.hide(i,$.datepicker._get(t,"showOptions"),r,a):t.dpDiv["slideDown"==i?"slideUp":"fadeIn"==i?"fadeOut":"hide"](i?r:null,a),i||a(),this._datepickerShowing=!1;var n=this._get(t,"onClose");n&&n.apply(t.input?t.input[0]:null,[t.input?t.input.val():"",t]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if($.datepicker._curInst){var t=$(e.target),i=$.datepicker._getInst(t[0]);(t[0].id==$.datepicker._mainDivId||0!=t.parents("#"+$.datepicker._mainDivId).length||t.hasClass($.datepicker.markerClassName)||t.closest("."+$.datepicker._triggerClass).length||!$.datepicker._datepickerShowing||$.datepicker._inDialog&&$.blockUI)&&(!t.hasClass($.datepicker.markerClassName)||$.datepicker._curInst==i)||$.datepicker._hideDatepicker()}},_adjustDate:function(e,t,i){var r=$(e),a=this._getInst(r[0]);this._isDisabledDatepicker(r[0])||(this._adjustInstDate(a,t+("M"==i?this._get(a,"showCurrentAtPos"):0),i),this._updateDatepicker(a))},_gotoToday:function(e){var t=$(e),i=this._getInst(t[0]);if(this._get(i,"gotoCurrent")&&i.currentDay)i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear;else{var r=new Date;i.selectedDay=r.getDate(),i.drawMonth=i.selectedMonth=r.getMonth(),i.drawYear=i.selectedYear=r.getFullYear()}this._notifyChange(i),this._adjustDate(t)},_selectMonthYear:function(e,t,i){var r=$(e),a=this._getInst(r[0]);a["selected"+("M"==i?"Month":"Year")]=a["draw"+("M"==i?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(a),this._adjustDate(r)},_selectDay:function(e,t,i,r){var a=$(e);if(!$(r).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(a[0])){var n=this._getInst(a[0]);n.selectedDay=n.currentDay=$("a",r).html(),n.selectedMonth=n.currentMonth=t,n.selectedYear=n.currentYear=i,this._selectDate(e,this._formatDate(n,n.currentDay,n.currentMonth,n.currentYear))}},_clearDate:function(e){var t=$(e);this._getInst(t[0]);this._selectDate(t,"")},_selectDate:function(e,t){var i=$(e),r=this._getInst(i[0]);t=null!=t?t:this._formatDate(r),r.input&&r.input.val(t),this._updateAlternate(r);var a=this._get(r,"onSelect");a?a.apply(r.input?r.input[0]:null,[t,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],"object"!=typeof r.input[0]&&r.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var t=this._get(e,"altField");if(t){var i=this._get(e,"altFormat")||this._get(e,"dateFormat"),r=this._getDate(e),a=this.formatDate(i,r,this._getFormatConfig(e));$(t).each(function(){$(this).val(a)})}},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+4-(t.getDay()||7));var i=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((i-t)/864e5)/7)+1},parseDate:function(e,t,i){if(null==e||null==t)throw"Invalid arguments";if(t="object"==typeof t?t.toString():t+"",""==t)return null;var r=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff;r="string"!=typeof r?r:(new Date).getFullYear()%100+parseInt(r,10);for(var a=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,n=(i?i.dayNames:null)||this._defaults.dayNames,o=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,s=(i?i.monthNames:null)||this._defaults.monthNames,l=-1,d=-1,u=-1,c=-1,p=!1,h=function(t){var i=b+1<e.length&&e.charAt(b+1)==t;return i&&b++,i},f=function(e){var i=h(e),r="@"==e?14:"!"==e?20:"y"==e&&i?4:"o"==e?3:2,a=new RegExp("^\\d{1,"+r+"}"),n=t.substring(v).match(a);if(!n)throw"Missing number at position "+v;return v+=n[0].length,parseInt(n[0],10)},g=function(e,i,r){var a=$.map(h(e)?r:i,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)}),n=-1;if($.each(a,function(e,i){var r=i[1];if(t.substr(v,r.length).toLowerCase()==r.toLowerCase())return n=i[0],v+=r.length,!1}),n!=-1)return n+1;throw"Unknown name at position "+v},m=function(){if(t.charAt(v)!=e.charAt(b))throw"Unexpected literal at position "+v;v++},v=0,b=0;b<e.length;b++)if(p)"'"!=e.charAt(b)||h("'")?m():p=!1;else switch(e.charAt(b)){case"d":u=f("d");break;case"D":g("D",a,n);break;case"o":c=f("o");break;case"m":d=f("m");break;case"M":d=g("M",o,s);break;case"y":l=f("y");break;case"@":var _=new Date(f("@"));l=_.getFullYear(),d=_.getMonth()+1,u=_.getDate();break;case"!":var _=new Date((f("!")-this._ticksTo1970)/1e4);l=_.getFullYear(),d=_.getMonth()+1,u=_.getDate();break;case"'":h("'")?m():p=!0;break;default:m()}if(v<t.length)throw"Extra/unparsed characters found in date: "+t.substring(v);if(l==-1?l=(new Date).getFullYear():l<100&&(l+=(new Date).getFullYear()-(new Date).getFullYear()%100+(l<=r?0:-100)),c>-1)for(d=1,u=c;;){var y=this._getDaysInMonth(l,d-1);if(u<=y)break;d++,u-=y}var _=this._daylightSavingAdjust(new Date(l,d-1,u));if(_.getFullYear()!=l||_.getMonth()+1!=d||_.getDate()!=u)throw"Invalid date";return _},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(e,t,i){if(!t)return"";var r=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,a=(i?i.dayNames:null)||this._defaults.dayNames,n=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,o=(i?i.monthNames:null)||this._defaults.monthNames,s=function(t){var i=p+1<e.length&&e.charAt(p+1)==t;return i&&p++,i},l=function(e,t,i){var r=""+t;if(s(e))for(;r.length<i;)r="0"+r;return r},d=function(e,t,i,r){return s(e)?r[t]:i[t]},u="",c=!1;if(t)for(var p=0;p<e.length;p++)if(c)"'"!=e.charAt(p)||s("'")?u+=e.charAt(p):c=!1;else switch(e.charAt(p)){case"d":u+=l("d",t.getDate(),2);break;case"D":u+=d("D",t.getDay(),r,a);break;case"o":u+=l("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":u+=l("m",t.getMonth()+1,2);break;case"M":u+=d("M",t.getMonth(),n,o);break;case"y":u+=s("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":u+=t.getTime();break;case"!":u+=1e4*t.getTime()+this._ticksTo1970;break;case"'":s("'")?u+="'":c=!0;break;default:u+=e.charAt(p)}return u},_possibleChars:function(e){for(var t="",i=!1,r=function(t){var i=a+1<e.length&&e.charAt(a+1)==t;return i&&a++,i},a=0;a<e.length;a++)if(i)"'"!=e.charAt(a)||r("'")?t+=e.charAt(a):i=!1;else switch(e.charAt(a)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":r("'")?t+="'":i=!0;break;default:t+=e.charAt(a)}return t},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!=e.lastVal){var i,r,a=this._get(e,"dateFormat"),n=e.lastVal=e.input?e.input.val():null;i=r=this._getDefaultDate(e);var o=this._getFormatConfig(e);try{i=this.parseDate(a,n,o)||r}catch(s){this.log(s),n=t?"":n}e.selectedDay=i.getDate(),e.drawMonth=e.selectedMonth=i.getMonth(),e.drawYear=e.selectedYear=i.getFullYear(),e.currentDay=n?i.getDate():0,e.currentMonth=n?i.getMonth():0,e.currentYear=n?i.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(e,t,i){var r=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},a=function(t){try{return $.datepicker.parseDate($.datepicker._get(e,"dateFormat"),t,$.datepicker._getFormatConfig(e))}catch(i){}for(var r=(t.toLowerCase().match(/^c/)?$.datepicker._getDate(e):null)||new Date,a=r.getFullYear(),n=r.getMonth(),o=r.getDate(),s=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=s.exec(t);l;){switch(l[2]||"d"){case"d":case"D":o+=parseInt(l[1],10);break;case"w":case"W":o+=7*parseInt(l[1],10);break;case"m":case"M":n+=parseInt(l[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(a,n));break;case"y":case"Y":a+=parseInt(l[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(a,n))}l=s.exec(t)}return new Date(a,n,o)},n=null==t||""===t?i:"string"==typeof t?a(t):"number"==typeof t?isNaN(t)?i:r(t):new Date(t.getTime());return n=n&&"Invalid Date"==n.toString()?i:n,n&&(n.setHours(0),n.setMinutes(0),n.setSeconds(0),n.setMilliseconds(0)),this._daylightSavingAdjust(n)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var r=!t,a=e.selectedMonth,n=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),a==e.selectedMonth&&n==e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(r?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""==e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),i="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(i,-t,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(i,+t,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(i)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(i,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t=new Date;t=this._daylightSavingAdjust(new Date(t.getFullYear(),t.getMonth(),t.getDate()));var i=this._get(e,"isRTL"),r=this._get(e,"showButtonPanel"),a=this._get(e,"hideIfNoPrevNext"),n=this._get(e,"navigationAsDateFormat"),o=this._getNumberOfMonths(e),s=this._get(e,"showCurrentAtPos"),l=this._get(e,"stepMonths"),d=1!=o[0]||1!=o[1],u=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),c=this._getMinMaxDate(e,"min"),p=this._getMinMaxDate(e,"max"),h=e.drawMonth-s,f=e.drawYear;if(h<0&&(h+=12,f--),p){var g=this._daylightSavingAdjust(new Date(p.getFullYear(),p.getMonth()-o[0]*o[1]+1,p.getDate()));for(g=c&&g<c?c:g;this._daylightSavingAdjust(new Date(f,h,1))>g;)h--,h<0&&(h=11,f--)}e.drawMonth=h,e.drawYear=f;var m=this._get(e,"prevText");m=n?this.formatDate(m,this._daylightSavingAdjust(new Date(f,h-l,1)),this._getFormatConfig(e)):m;var v=this._canAdjustMonth(e,-1,f,h)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"e":"w")+'">'+m+"</span></a>":a?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"e":"w")+'">'+m+"</span></a>",b=this._get(e,"nextText");b=n?this.formatDate(b,this._daylightSavingAdjust(new Date(f,h+l,1)),this._getFormatConfig(e)):b;var _=this._canAdjustMonth(e,1,f,h)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+b+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"w":"e")+'">'+b+"</span></a>":a?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+b+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"w":"e")+'">'+b+"</span></a>",y=this._get(e,"currentText"),x=this._get(e,"gotoCurrent")&&e.currentDay?u:t;y=n?this.formatDate(y,x,this._getFormatConfig(e)):y;var w=e.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(e,"closeText")+"</button>",j=r?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(i?w:"")+(this._isInRange(e,x)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+y+"</button>":"")+(i?"":w)+"</div>":"",k=parseInt(this._get(e,"firstDay"),10);k=isNaN(k)?0:k;for(var C=this._get(e,"showWeek"),D=this._get(e,"dayNames"),S=(this._get(e,"dayNamesShort"),this._get(e,"dayNamesMin")),T=this._get(e,"monthNames"),P=this._get(e,"monthNamesShort"),I=this._get(e,"beforeShowDay"),F=this._get(e,"showOtherMonths"),M=this._get(e,"selectOtherMonths"),A=(this._get(e,"calculateWeek")||this.iso8601Week,this._getDefaultDate(e)),E="",q=0;q<o[0];q++){var O="";this.maxRows=4;for(var R=0;R<o[1];R++){var N=this._daylightSavingAdjust(new Date(f,h,e.selectedDay)),G=" ui-corner-all",L="";if(d){if(L+='<div class="ui-datepicker-group',o[1]>1)switch(R){case 0:L+=" ui-datepicker-group-first",G=" ui-corner-"+(i?"right":"left");break;case o[1]-1:L+=" ui-datepicker-group-last",G=" ui-corner-"+(i?"left":"right");break;default:L+=" ui-datepicker-group-middle",G=""}L+='">'}L+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+G+'">'+(/all|left/.test(G)&&0==q?i?_:v:"")+(/all|right/.test(G)&&0==q?i?v:_:"")+this._generateMonthYearHeader(e,h,f,c,p,q>0||R>0,T,P)+'</div><table class="ui-datepicker-calendar"><thead><tr>';for(var z=C?'<th class="ui-datepicker-week-col">'+this._get(e,"weekHeader")+"</th>":"",Q=0;Q<7;Q++){var H=(Q+k)%7;z+="<th"+((Q+k+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+D[H]+'">'+S[H]+"</span></th>"}L+=z+"</tr></thead><tbody>";var B=this._getDaysInMonth(f,h);f==e.selectedYear&&h==e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,B));var W=(this._getFirstDayOfMonth(f,h)-k+7)%7,U=Math.ceil((W+B)/7),V=d&&this.maxRows>U?this.maxRows:U;this.maxRows=V;for(var K=this._daylightSavingAdjust(new Date(f,h,1-W)),X=0;X<V;X++){L+="<tr>";for(var Y=C?'<td class="ui-datepicker-week-col">'+this._get(e,"calculateWeek")(K)+"</td>":"",Q=0;Q<7;Q++){var J=I?I.apply(e.input?e.input[0]:null,[K]):[!0,""],Z=K.getMonth()!=h,ee=Z&&!M||!J[0]||c&&K<c||p&&K>p;Y+='<td class="'+((Q+k+6)%7>=5?" ui-datepicker-week-end":"")+(Z?" ui-datepicker-other-month":"")+(K.getTime()==N.getTime()&&h==e.selectedMonth&&e._keyEvent||A.getTime()==K.getTime()&&A.getTime()==N.getTime()?" "+this._dayOverClass:"")+(ee?" "+this._unselectableClass+" ui-state-disabled":"")+(Z&&!F?"":" "+J[1]+(K.getTime()==u.getTime()?" "+this._currentClass:"")+(K.getTime()==t.getTime()?" ui-datepicker-today":""))+'"'+(Z&&!F||!J[2]?"":' title="'+J[2]+'"')+(ee?"":' data-handler="selectDay" data-event="click" data-month="'+K.getMonth()+'" data-year="'+K.getFullYear()+'"')+">"+(Z&&!F?"&#xa0;":ee?'<span class="ui-state-default">'+K.getDate()+"</span>":'<a class="ui-state-default'+(K.getTime()==t.getTime()?" ui-state-highlight":"")+(K.getTime()==u.getTime()?" ui-state-active":"")+(Z?" ui-priority-secondary":"")+'" href="#">'+K.getDate()+"</a>")+"</td>",
K.setDate(K.getDate()+1),K=this._daylightSavingAdjust(K)}L+=Y+"</tr>"}h++,h>11&&(h=0,f++),L+="</tbody></table>"+(d?"</div>"+(o[0]>0&&R==o[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),O+=L}E+=O}return E+=j+($.browser.msie&&parseInt($.browser.version,10)<7&&!e.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),e._keyEvent=!1,E},_generateMonthYearHeader:function(e,t,i,r,a,n,o,s){var l=this._get(e,"changeMonth"),d=this._get(e,"changeYear"),u=this._get(e,"showMonthAfterYear"),c='<div class="ui-datepicker-title">',p="";if(n||!l)p+='<span class="ui-datepicker-month">'+o[t]+"</span>";else{var h=r&&r.getFullYear()==i,f=a&&a.getFullYear()==i;p+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var g=0;g<12;g++)(!h||g>=r.getMonth())&&(!f||g<=a.getMonth())&&(p+='<option value="'+g+'"'+(g==t?' selected="selected"':"")+">"+s[g]+"</option>");p+="</select>"}if(u||(c+=p+(!n&&l&&d?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",n||!d)c+='<span class="ui-datepicker-year">'+i+"</span>";else{var m=this._get(e,"yearRange").split(":"),v=(new Date).getFullYear(),b=function(e){var t=e.match(/c[+-].*/)?i+parseInt(e.substring(1),10):e.match(/[+-].*/)?v+parseInt(e,10):parseInt(e,10);return isNaN(t)?v:t},_=b(m[0]),y=Math.max(_,b(m[1]||""));for(_=r?Math.max(_,r.getFullYear()):_,y=a?Math.min(y,a.getFullYear()):y,e.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';_<=y;_++)e.yearshtml+='<option value="'+_+'"'+(_==i?' selected="selected"':"")+">"+_+"</option>";e.yearshtml+="</select>",c+=e.yearshtml,e.yearshtml=null}return c+=this._get(e,"yearSuffix"),u&&(c+=(!n&&l&&d?"":"&#xa0;")+p),c+="</div>"},_adjustInstDate:function(e,t,i){var r=e.drawYear+("Y"==i?t:0),a=e.drawMonth+("M"==i?t:0),n=Math.min(e.selectedDay,this._getDaysInMonth(r,a))+("D"==i?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(r,a,n)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),"M"!=i&&"Y"!=i||this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),a=i&&t<i?i:t;return a=r&&a>r?r:a},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,r){var a=this._getNumberOfMonths(e),n=this._daylightSavingAdjust(new Date(i,r+(t<0?t:a[0]*a[1]),1));return t<0&&n.setDate(this._getDaysInMonth(n.getFullYear(),n.getMonth())),this._isInRange(e,n)},_isInRange:function(e,t){var i=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max");return(!i||t.getTime()>=i.getTime())&&(!r||t.getTime()<=r.getTime())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,r){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var a=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(r,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),a,this._getFormatConfig(e))}}),$.fn.datepicker=function(e){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv),$.datepicker.initialized=!0);var t=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!=e&&"getDate"!=e&&"widget"!=e?"option"==e&&2==arguments.length&&"string"==typeof arguments[1]?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t)):this.each(function(){"string"==typeof e?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this].concat(t)):$.datepicker._attachDatepicker(this,e)}):$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.8.23",window["DP_jQuery_"+dpuuid]=$}(jQuery),/*!
 * jQuery UI Progressbar 1.8.23
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Progressbar
 *
 * Depends:
 *   jquery.ui.core.js
 *   jquery.ui.widget.js
 */
function(e,t){e.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove(),e.Widget.prototype.destroy.apply(this,arguments)},value:function(e){return e===t?this._value():(this._setOption("value",e),this)},_setOption:function(t,i){"value"===t&&(this.options.value=i,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),e.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var e=this.options.value;return"number"!=typeof e&&(e=0),Math.min(this.options.max,Math.max(this.min,e))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var e=this.value(),t=this._percentage();this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),this.valueDiv.toggle(e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(t.toFixed(0)+"%"),this.element.attr("aria-valuenow",e)}}),e.extend(e.ui.progressbar,{version:"1.8.23"})}(jQuery),jQuery.effects||function(e,t){function i(t){var i;return t&&t.constructor==Array&&3==t.length?t:(i=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(t))?[parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10)]:(i=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(t))?[2.55*parseFloat(i[1]),2.55*parseFloat(i[2]),2.55*parseFloat(i[3])]:(i=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(t))?[parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16)]:(i=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(t))?[parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16),parseInt(i[3]+i[3],16)]:(i=/rgba\(0, 0, 0, 0\)/.exec(t))?d.transparent:d[e.trim(t).toLowerCase()]}function r(t,r){var a;do{if(a=(e.curCSS||e.css)(t,r),""!=a&&"transparent"!=a||e.nodeName(t,"body"))break;r="backgroundColor"}while(t=t.parentNode);return i(a)}function a(){var e,t,i=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,r={};if(i&&i.length&&i[0]&&i[i[0]])for(var a=i.length;a--;)e=i[a],"string"==typeof i[e]&&(t=e.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()}),r[t]=i[e]);else for(e in i)"string"==typeof i[e]&&(r[e]=i[e]);return r}function n(t){var i,r;for(i in t)r=t[i],(null==r||e.isFunction(r)||i in c||/scrollbar/.test(i)||!/color/i.test(i)&&isNaN(parseFloat(r)))&&delete t[i];return t}function o(e,t){var i,r={_:0};for(i in t)e[i]!=t[i]&&(r[i]=t[i]);return r}function s(t,i,r,a){return"object"==typeof t&&(a=i,r=null,i=t,t=i.effect),e.isFunction(i)&&(a=i,r=null,i={}),("number"==typeof i||e.fx.speeds[i])&&(a=r,r=i,i={}),e.isFunction(r)&&(a=r,r=null),i=i||{},r=r||i.duration,r=e.fx.off?0:"number"==typeof r?r:r in e.fx.speeds?e.fx.speeds[r]:e.fx.speeds._default,a=a||i.complete,[t,i,r,a]}function l(t){return!(t&&"number"!=typeof t&&!e.fx.speeds[t])||"string"==typeof t&&!e.effects[t]}e.effects={},e.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(t,a){e.fx.step[a]=function(e){e.colorInit||(e.start=r(e.elem,a),e.end=i(e.end),e.colorInit=!0),e.elem.style[a]="rgb("+Math.max(Math.min(parseInt(e.pos*(e.end[0]-e.start[0])+e.start[0],10),255),0)+","+Math.max(Math.min(parseInt(e.pos*(e.end[1]-e.start[1])+e.start[1],10),255),0)+","+Math.max(Math.min(parseInt(e.pos*(e.end[2]-e.start[2])+e.start[2],10),255),0)+")"}});var d={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},u=["add","remove","toggle"],c={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.effects.animateClass=function(t,i,r,s){return e.isFunction(r)&&(s=r,r=null),this.queue(function(){var l,d=e(this),c=d.attr("style")||" ",p=n(a.call(this)),h=d.attr("class")||"";e.each(u,function(e,i){t[i]&&d[i+"Class"](t[i])}),l=n(a.call(this)),d.attr("class",h),d.animate(o(p,l),{queue:!1,duration:i,easing:r,complete:function(){e.each(u,function(e,i){t[i]&&d[i+"Class"](t[i])}),"object"==typeof d.attr("style")?(d.attr("style").cssText="",d.attr("style").cssText=c):d.attr("style",c),s&&s.apply(this,arguments),e.dequeue(this)}})})},e.fn.extend({_addClass:e.fn.addClass,addClass:function(t,i,r,a){return i?e.effects.animateClass.apply(this,[{add:t},i,r,a]):this._addClass(t)},_removeClass:e.fn.removeClass,removeClass:function(t,i,r,a){return i?e.effects.animateClass.apply(this,[{remove:t},i,r,a]):this._removeClass(t)},_toggleClass:e.fn.toggleClass,toggleClass:function(i,r,a,n,o){return"boolean"==typeof r||r===t?a?e.effects.animateClass.apply(this,[r?{add:i}:{remove:i},a,n,o]):this._toggleClass(i,r):e.effects.animateClass.apply(this,[{toggle:i},r,a,n])},switchClass:function(t,i,r,a,n){return e.effects.animateClass.apply(this,[{add:i,remove:t},r,a,n])}}),e.extend(e.effects,{version:"1.8.23",save:function(e,t){for(var i=0;i<t.length;i++)null!==t[i]&&e.data("ec.storage."+t[i],e[0].style[t[i]])},restore:function(e,t){for(var i=0;i<t.length;i++)null!==t[i]&&e.css(t[i],e.data("ec.storage."+t[i]))},setMode:function(e,t){return"toggle"==t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var i,r;switch(e[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=e[0]/t.height}switch(e[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=e[1]/t.width}return{x:r,y:i}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var i={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},r=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),a=document.activeElement;try{a.id}catch(n){a=document.body}return t.wrap(r),(t[0]===a||e.contains(t[0],a))&&e(a).focus(),r=t.parent(),"static"==t.css("position")?(r.css({position:"relative"}),t.css({position:"relative"})):(e.extend(i,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,r){i[r]=t.css(r),isNaN(parseInt(i[r],10))&&(i[r]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),r.css(i).show()},removeWrapper:function(t){var i,r=document.activeElement;return t.parent().is(".ui-effects-wrapper")?(i=t.parent().replaceWith(t),(t[0]===r||e.contains(t[0],r))&&e(r).focus(),i):t},setTransition:function(t,i,r,a){return a=a||{},e.each(i,function(e,i){var n=t.cssUnit(i);n[0]>0&&(a[i]=n[0]*r+n[1])}),a}}),e.fn.extend({effect:function(t,i,r,a){var n=s.apply(this,arguments),o={options:n[1],duration:n[2],callback:n[3]},l=o.options.mode,d=e.effects[t];return e.fx.off||!d?l?this[l](o.duration,o.callback):this.each(function(){o.callback&&o.callback.call(this)}):d.call(this,o)},_show:e.fn.show,show:function(e){if(l(e))return this._show.apply(this,arguments);var t=s.apply(this,arguments);return t[1].mode="show",this.effect.apply(this,t)},_hide:e.fn.hide,hide:function(e){if(l(e))return this._hide.apply(this,arguments);var t=s.apply(this,arguments);return t[1].mode="hide",this.effect.apply(this,t)},__toggle:e.fn.toggle,toggle:function(t){if(l(t)||"boolean"==typeof t||e.isFunction(t))return this.__toggle.apply(this,arguments);var i=s.apply(this,arguments);return i[1].mode="toggle",this.effect.apply(this,i)},cssUnit:function(t){var i=this.css(t),r=[];return e.each(["em","px","%","pt"],function(e,t){i.indexOf(t)>0&&(r=[parseFloat(i),t])}),r}});var p={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,t){p[t]=function(t){return Math.pow(t,e+2)}}),e.extend(p,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,i=4;e<((t=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(p,function(t,i){e.easing["easeIn"+t]=i,e.easing["easeOut"+t]=function(e){return 1-i(1-e)},e.easing["easeInOut"+t]=function(e){return e<.5?i(2*e)/2:i(e*-2+2)/-2+1}})}(jQuery),/*!
 * jQuery UI Effects Blind 1.8.23
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Blind
 *
 * Depends:
 *	jquery.effects.core.js
 */
function(e,t){e.effects.blind=function(t){return this.queue(function(){var i=e(this),r=["position","top","bottom","left","right"],a=e.effects.setMode(i,t.options.mode||"hide"),n=t.options.direction||"vertical";e.effects.save(i,r),i.show();var o=e.effects.createWrapper(i).css({overflow:"hidden"}),s="vertical"==n?"height":"width",l="vertical"==n?o.height():o.width();"show"==a&&o.css(s,0);var d={};d[s]="show"==a?l:0,o.animate(d,t.duration,t.options.easing,function(){"hide"==a&&i.hide(),e.effects.restore(i,r),e.effects.removeWrapper(i),t.callback&&t.callback.apply(i[0],arguments),i.dequeue()})})}}(jQuery),/*!
 * jQuery UI Effects Bounce 1.8.23
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Bounce
 *
 * Depends:
 *	jquery.effects.core.js
 */
function(e,t){e.effects.bounce=function(t){return this.queue(function(){var i=e(this),r=["position","top","bottom","left","right"],a=e.effects.setMode(i,t.options.mode||"effect"),n=t.options.direction||"up",o=t.options.distance||20,s=t.options.times||5,l=t.duration||250;/show|hide/.test(a)&&r.push("opacity"),e.effects.save(i,r),i.show(),e.effects.createWrapper(i);var d="up"==n||"down"==n?"top":"left",u="up"==n||"left"==n?"pos":"neg",o=t.options.distance||("top"==d?i.outerHeight(!0)/3:i.outerWidth(!0)/3);if("show"==a&&i.css("opacity",0).css(d,"pos"==u?-o:o),"hide"==a&&(o/=2*s),"hide"!=a&&s--,"show"==a){var c={opacity:1};c[d]=("pos"==u?"+=":"-=")+o,i.animate(c,l/2,t.options.easing),o/=2,s--}for(var p=0;p<s;p++){var h={},f={};h[d]=("pos"==u?"-=":"+=")+o,f[d]=("pos"==u?"+=":"-=")+o,i.animate(h,l/2,t.options.easing).animate(f,l/2,t.options.easing),o="hide"==a?2*o:o/2}if("hide"==a){var c={opacity:0};c[d]=("pos"==u?"-=":"+=")+o,i.animate(c,l/2,t.options.easing,function(){i.hide(),e.effects.restore(i,r),e.effects.removeWrapper(i),t.callback&&t.callback.apply(this,arguments)})}else{var h={},f={};h[d]=("pos"==u?"-=":"+=")+o,f[d]=("pos"==u?"+=":"-=")+o,i.animate(h,l/2,t.options.easing).animate(f,l/2,t.options.easing,function(){e.effects.restore(i,r),e.effects.removeWrapper(i),t.callback&&t.callback.apply(this,arguments)})}i.queue("fx",function(){i.dequeue()}),i.dequeue()})}}(jQuery),/*!
 * jQuery UI Effects Clip 1.8.23
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Clip
 *
 * Depends:
 *	jquery.effects.core.js
 */
function(e,t){e.effects.clip=function(t){return this.queue(function(){var i=e(this),r=["position","top","bottom","left","right","height","width"],a=e.effects.setMode(i,t.options.mode||"hide"),n=t.options.direction||"vertical";e.effects.save(i,r),i.show();var o=e.effects.createWrapper(i).css({overflow:"hidden"}),s="IMG"==i[0].tagName?o:i,l={size:"vertical"==n?"height":"width",position:"vertical"==n?"top":"left"},d="vertical"==n?s.height():s.width();"show"==a&&(s.css(l.size,0),s.css(l.position,d/2));var u={};u[l.size]="show"==a?d:0,u[l.position]="show"==a?0:d/2,s.animate(u,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){"hide"==a&&i.hide(),e.effects.restore(i,r),e.effects.removeWrapper(i),t.callback&&t.callback.apply(i[0],arguments),i.dequeue()}})})}}(jQuery),/*!
 * jQuery UI Effects Drop 1.8.23
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Drop
 *
 * Depends:
 *	jquery.effects.core.js
 */
function(e,t){e.effects.drop=function(t){return this.queue(function(){var i=e(this),r=["position","top","bottom","left","right","opacity"],a=e.effects.setMode(i,t.options.mode||"hide"),n=t.options.direction||"left";e.effects.save(i,r),i.show(),e.effects.createWrapper(i);var o="up"==n||"down"==n?"top":"left",s="up"==n||"left"==n?"pos":"neg",l=t.options.distance||("top"==o?i.outerHeight(!0)/2:i.outerWidth(!0)/2);"show"==a&&i.css("opacity",0).css(o,"pos"==s?-l:l);var d={opacity:"show"==a?1:0};d[o]=("show"==a?"pos"==s?"+=":"-=":"pos"==s?"-=":"+=")+l,i.animate(d,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){"hide"==a&&i.hide(),e.effects.restore(i,r),e.effects.removeWrapper(i),t.callback&&t.callback.apply(this,arguments),i.dequeue()}})})}}(jQuery),/*!
 * jQuery UI Effects Explode 1.8.23
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Explode
 *
 * Depends:
 *	jquery.effects.core.js
 */
function(e,t){e.effects.explode=function(t){return this.queue(function(){var i=t.options.pieces?Math.round(Math.sqrt(t.options.pieces)):3,r=t.options.pieces?Math.round(Math.sqrt(t.options.pieces)):3;t.options.mode="toggle"==t.options.mode?e(this).is(":visible")?"hide":"show":t.options.mode;var a=e(this).show().css("visibility","hidden"),n=a.offset();n.top-=parseInt(a.css("marginTop"),10)||0,n.left-=parseInt(a.css("marginLeft"),10)||0;for(var o=a.outerWidth(!0),s=a.outerHeight(!0),l=0;l<i;l++)for(var d=0;d<r;d++)a.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-d*(o/r),top:-l*(s/i)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:o/r,height:s/i,left:n.left+d*(o/r)+("show"==t.options.mode?(d-Math.floor(r/2))*(o/r):0),top:n.top+l*(s/i)+("show"==t.options.mode?(l-Math.floor(i/2))*(s/i):0),opacity:"show"==t.options.mode?0:1}).animate({left:n.left+d*(o/r)+("show"==t.options.mode?0:(d-Math.floor(r/2))*(o/r)),top:n.top+l*(s/i)+("show"==t.options.mode?0:(l-Math.floor(i/2))*(s/i)),opacity:"show"==t.options.mode?1:0},t.duration||500);setTimeout(function(){"show"==t.options.mode?a.css({visibility:"visible"}):a.css({visibility:"visible"}).hide(),t.callback&&t.callback.apply(a[0]),a.dequeue(),e("div.ui-effects-explode").remove()},t.duration||500)})}}(jQuery),/*!
 * jQuery UI Effects Fade 1.8.23
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Fade
 *
 * Depends:
 *	jquery.effects.core.js
 */
function(e,t){e.effects.fade=function(t){return this.queue(function(){var i=e(this),r=e.effects.setMode(i,t.options.mode||"hide");i.animate({opacity:r},{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){t.callback&&t.callback.apply(this,arguments),i.dequeue()}})})}}(jQuery),/*!
 * jQuery UI Effects Fold 1.8.23
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Fold
 *
 * Depends:
 *	jquery.effects.core.js
 */
function(e,t){e.effects.fold=function(t){return this.queue(function(){var i=e(this),r=["position","top","bottom","left","right"],a=e.effects.setMode(i,t.options.mode||"hide"),n=t.options.size||15,o=!!t.options.horizFirst,s=t.duration?t.duration/2:e.fx.speeds._default/2;e.effects.save(i,r),i.show();var l=e.effects.createWrapper(i).css({overflow:"hidden"}),d="show"==a!=o,u=d?["width","height"]:["height","width"],c=d?[l.width(),l.height()]:[l.height(),l.width()],p=/([0-9]+)%/.exec(n);p&&(n=parseInt(p[1],10)/100*c["hide"==a?0:1]),"show"==a&&l.css(o?{height:0,width:n}:{height:n,width:0});var h={},f={};h[u[0]]="show"==a?c[0]:n,f[u[1]]="show"==a?c[1]:0,l.animate(h,s,t.options.easing).animate(f,s,t.options.easing,function(){"hide"==a&&i.hide(),e.effects.restore(i,r),e.effects.removeWrapper(i),t.callback&&t.callback.apply(i[0],arguments),i.dequeue()})})}}(jQuery),/*!
 * jQuery UI Effects Highlight 1.8.23
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Highlight
 *
 * Depends:
 *	jquery.effects.core.js
 */
function(e,t){e.effects.highlight=function(t){return this.queue(function(){var i=e(this),r=["backgroundImage","backgroundColor","opacity"],a=e.effects.setMode(i,t.options.mode||"show"),n={backgroundColor:i.css("backgroundColor")};"hide"==a&&(n.opacity=0),e.effects.save(i,r),i.show().css({backgroundImage:"none",backgroundColor:t.options.color||"#ffff99"}).animate(n,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){"hide"==a&&i.hide(),e.effects.restore(i,r),"show"==a&&!e.support.opacity&&this.style.removeAttribute("filter"),t.callback&&t.callback.apply(this,arguments),i.dequeue()}})})}}(jQuery),/*!
 * jQuery UI Effects Pulsate 1.8.23
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Pulsate
 *
 * Depends:
 *	jquery.effects.core.js
 */
function(e,t){e.effects.pulsate=function(t){return this.queue(function(){var i=e(this),r=e.effects.setMode(i,t.options.mode||"show"),a=2*(t.options.times||5)-1,n=t.duration?t.duration/2:e.fx.speeds._default/2,o=i.is(":visible"),s=0;o||(i.css("opacity",0).show(),s=1),("hide"==r&&o||"show"==r&&!o)&&a--;for(var l=0;l<a;l++)i.animate({opacity:s},n,t.options.easing),s=(s+1)%2;i.animate({opacity:s},n,t.options.easing,function(){0==s&&i.hide(),t.callback&&t.callback.apply(this,arguments)}),i.queue("fx",function(){i.dequeue()}).dequeue()})}}(jQuery),/*!
 * jQuery UI Effects Scale 1.8.23
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Scale
 *
 * Depends:
 *	jquery.effects.core.js
 */
function(e,t){e.effects.puff=function(t){return this.queue(function(){var i=e(this),r=e.effects.setMode(i,t.options.mode||"hide"),a=parseInt(t.options.percent,10)||150,n=a/100,o={height:i.height(),width:i.width()};e.extend(t.options,{fade:!0,mode:r,percent:"hide"==r?a:100,from:"hide"==r?o:{height:o.height*n,width:o.width*n}}),i.effect("scale",t.options,t.duration,t.callback),i.dequeue()})},e.effects.scale=function(t){return this.queue(function(){var i=e(this),r=e.extend(!0,{},t.options),a=e.effects.setMode(i,t.options.mode||"effect"),n=parseInt(t.options.percent,10)||(0==parseInt(t.options.percent,10)?0:"hide"==a?0:100),o=t.options.direction||"both",s=t.options.origin;"effect"!=a&&(r.origin=s||["middle","center"],r.restore=!0);var l={height:i.height(),width:i.width()};i.from=t.options.from||("show"==a?{height:0,width:0}:l);var d={y:"horizontal"!=o?n/100:1,x:"vertical"!=o?n/100:1};i.to={height:l.height*d.y,width:l.width*d.x},t.options.fade&&("show"==a&&(i.from.opacity=0,i.to.opacity=1),"hide"==a&&(i.from.opacity=1,i.to.opacity=0)),r.from=i.from,r.to=i.to,r.mode=a,i.effect("size",r,t.duration,t.callback),i.dequeue()})},e.effects.size=function(t){return this.queue(function(){var i=e(this),r=["position","top","bottom","left","right","width","height","overflow","opacity"],a=["position","top","bottom","left","right","overflow","opacity"],n=["width","height","overflow"],o=["fontSize"],s=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],l=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],d=e.effects.setMode(i,t.options.mode||"effect"),u=t.options.restore||!1,c=t.options.scale||"both",p=t.options.origin,h={height:i.height(),width:i.width()};if(i.from=t.options.from||h,i.to=t.options.to||h,p){var f=e.effects.getBaseline(p,h);i.from.top=(h.height-i.from.height)*f.y,i.from.left=(h.width-i.from.width)*f.x,i.to.top=(h.height-i.to.height)*f.y,i.to.left=(h.width-i.to.width)*f.x}var g={from:{y:i.from.height/h.height,x:i.from.width/h.width},to:{y:i.to.height/h.height,x:i.to.width/h.width}};"box"!=c&&"both"!=c||(g.from.y!=g.to.y&&(r=r.concat(s),i.from=e.effects.setTransition(i,s,g.from.y,i.from),i.to=e.effects.setTransition(i,s,g.to.y,i.to)),g.from.x!=g.to.x&&(r=r.concat(l),i.from=e.effects.setTransition(i,l,g.from.x,i.from),i.to=e.effects.setTransition(i,l,g.to.x,i.to))),"content"!=c&&"both"!=c||g.from.y!=g.to.y&&(r=r.concat(o),i.from=e.effects.setTransition(i,o,g.from.y,i.from),i.to=e.effects.setTransition(i,o,g.to.y,i.to)),e.effects.save(i,u?r:a),i.show(),e.effects.createWrapper(i),i.css("overflow","hidden").css(i.from),"content"!=c&&"both"!=c||(s=s.concat(["marginTop","marginBottom"]).concat(o),l=l.concat(["marginLeft","marginRight"]),n=r.concat(s).concat(l),i.find("*[width]").each(function(){var i=e(this);u&&e.effects.save(i,n);var r={height:i.height(),width:i.width()};i.from={height:r.height*g.from.y,width:r.width*g.from.x},i.to={height:r.height*g.to.y,width:r.width*g.to.x},g.from.y!=g.to.y&&(i.from=e.effects.setTransition(i,s,g.from.y,i.from),i.to=e.effects.setTransition(i,s,g.to.y,i.to)),g.from.x!=g.to.x&&(i.from=e.effects.setTransition(i,l,g.from.x,i.from),i.to=e.effects.setTransition(i,l,g.to.x,i.to)),i.css(i.from),i.animate(i.to,t.duration,t.options.easing,function(){u&&e.effects.restore(i,n)})})),i.animate(i.to,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){0===i.to.opacity&&i.css("opacity",i.from.opacity),"hide"==d&&i.hide(),e.effects.restore(i,u?r:a),e.effects.removeWrapper(i),t.callback&&t.callback.apply(this,arguments),i.dequeue()}})})}}(jQuery),/*!
 * jQuery UI Effects Shake 1.8.23
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Shake
 *
 * Depends:
 *	jquery.effects.core.js
 */
function(e,t){e.effects.shake=function(t){return this.queue(function(){var i=e(this),r=["position","top","bottom","left","right"],a=(e.effects.setMode(i,t.options.mode||"effect"),t.options.direction||"left"),n=t.options.distance||20,o=t.options.times||3,s=t.duration||t.options.duration||140;e.effects.save(i,r),i.show(),e.effects.createWrapper(i);var l="up"==a||"down"==a?"top":"left",d="up"==a||"left"==a?"pos":"neg",u={},c={},p={};u[l]=("pos"==d?"-=":"+=")+n,c[l]=("pos"==d?"+=":"-=")+2*n,p[l]=("pos"==d?"-=":"+=")+2*n,i.animate(u,s,t.options.easing);for(var h=1;h<o;h++)i.animate(c,s,t.options.easing).animate(p,s,t.options.easing);i.animate(c,s,t.options.easing).animate(u,s/2,t.options.easing,function(){e.effects.restore(i,r),e.effects.removeWrapper(i),t.callback&&t.callback.apply(this,arguments)}),i.queue("fx",function(){i.dequeue()}),i.dequeue()})}}(jQuery),/*!
 * jQuery UI Effects Slide 1.8.23
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Slide
 *
 * Depends:
 *	jquery.effects.core.js
 */
function(e,t){e.effects.slide=function(t){return this.queue(function(){var i=e(this),r=["position","top","bottom","left","right"],a=e.effects.setMode(i,t.options.mode||"show"),n=t.options.direction||"left";e.effects.save(i,r),i.show(),e.effects.createWrapper(i).css({overflow:"hidden"});var o="up"==n||"down"==n?"top":"left",s="up"==n||"left"==n?"pos":"neg",l=t.options.distance||("top"==o?i.outerHeight(!0):i.outerWidth(!0));"show"==a&&i.css(o,"pos"==s?isNaN(l)?"-"+l:-l:l);var d={};d[o]=("show"==a?"pos"==s?"+=":"-=":"pos"==s?"-=":"+=")+l,i.animate(d,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){"hide"==a&&i.hide(),e.effects.restore(i,r),e.effects.removeWrapper(i),t.callback&&t.callback.apply(this,arguments),i.dequeue()}})})}}(jQuery),/*!
 * jQuery UI Effects Transfer 1.8.23
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Effects/Transfer
 *
 * Depends:
 *	jquery.effects.core.js
 */
function(e,t){e.effects.transfer=function(t){return this.queue(function(){var i=e(this),r=e(t.options.to),a=r.offset(),n={top:a.top,left:a.left,height:r.innerHeight(),width:r.innerWidth()},o=i.offset(),s=e('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(t.options.className).css({top:o.top,left:o.left,height:i.innerHeight(),width:i.innerWidth(),position:"absolute"}).animate(n,t.duration,t.options.easing,function(){s.remove(),t.callback&&t.callback.apply(i[0],arguments),i.dequeue()})})}}(jQuery),/*
 * MultiDatesPicker v1.4.0
 * http://multidatespickr.sourceforge.net/
 *
 * Copyright 2010, Luca Lauretta
 * Dual licensed under the MIT or GPL Version 2 licenses.
 */
function(e){e.fn.multiDatesPicker=function(t){function r(e){return"avoided"==e?"avoidedDates":"selectedDates"}function a(e,t){this.multiDatesPicker[r(t)].splice(e,1)}function n(e,t){if(p.gotDate.call(this,e,t)===!1){var i=r(t);this.multiDatesPicker[i].push(o(e,"object")),this.multiDatesPicker[i].sort(p.compareDates)}}function o(e,t){return p.dateConvert(e,t)}var s=arguments,l=this,d=new Date,u=new Date(0),c={},p={init:function(t){$this=e(this),this.multiDatesPicker.changed=!1,t&&(this.multiDatesPicker.originalBeforeShow=t.beforeShow,this.multiDatesPicker.originalOnSelect=t.onSelect,this.multiDatesPicker.originalBeforeShowDay=t.beforeShowDay,this.multiDatesPicker.originalOnClose=t.onClose,this.multiDatesPicker.minDate=e.datepicker._determineDate(this,t.minDate,u),this.multiDatesPicker.firstAvailableDay=p.compareDates(this.multiDatesPicker.minDate,u),t.addDates&&p.addDates.call(this,t.addDates),t.addAvoidedDates&&p.addDates.call(this,t.addAvoidedDates,"avoided"),t.mode&&p.setMode.call(this,t.mode)),$this.datepicker(t),c={beforeShow:function(e,t){this.multiDatesPicker.changed=!1,this.multiDatesPicker.originalBeforeShow&&this.multiDatesPicker.originalBeforeShow.call(this,e,t)},onSelect:function(t,i){if(this.multiDatesPicker.changed=!0,t){e(this).multiDatesPicker("toggleDate",t);p.dateConvert(t,"object")}var r=e(this).multiDatesPicker("getDates"),a=this.multiDatesPicker.mode.options;if(r.length>0&&"normal"==this.multiDatesPicker.mode.modeName&&a.pickableRange){var n=p.compareDates(this.multiDatesPicker.minDate,d),o=n+a.pickableRangeDelay+pickableRange,s=p.compareDates(r[0],n),l=s+a.pickableRange;l>o?n=o-a.pickableRange+1:(o=l,n=s);var u;do{u=0;for(var c in this.multiDatesPicker.avoidedDates)p.compareDates(this.multiDatesPicker.avoidedDates[c],n)>=0&&p.compareDates(this.multiDatesPicker.avoidedDates[c],o)<=0&&u++;o+=u}while(0!=u);e(this).datepicker("option","minDate",n),e(this).datepicker("option","maxDate",o)}"INPUT"==this.tagName&&e(this).val(e(this).multiDatesPicker("getDates","string")),this.multiDatesPicker.originalOnSelect&&t&&this.multiDatesPicker.originalOnSelect.call(this,t,i)},beforeShowDay:function(t){var i=e(this).multiDatesPicker("gotDate",t)!==!1,r=i?"ui-state-highlight":"",a=e(this).multiDatesPicker("gotDate",t,"avoided")!==!1,n=this.multiDatesPicker.mode.options.maxPicks==e(this).multiDatesPicker("getDates").length,o=!(a||n&&!r);return this.multiDatesPicker.originalBeforeShowDay&&this.multiDatesPicker.originalBeforeShowDay.call(this,t),[o,r]},onClose:function(t,i){"INPUT"==this.tagName&&this.multiDatesPicker.changed&&(e(i.dpDiv[0]).stop(!1,!0),setTimeout('$("#'+i.id+'").datepicker("show")',50)),this.multiDatesPicker.originalOnClose&&this.multiDatesPicker.originalOnClose.call(this,t,i)}},$this.datepicker("option",c)},compareDates:function(e,t){var r=[e,t],a=new Array,n=864e5;for(i in r)a.push(o(r[i],"object"));var s=(a[0].getTime()-a[1].getTime())/n;return-1<s&&s<1?0:s<0?Math.ceil(s*-1)*-1:Math.ceil(s)},sumDays:function(e,t){var i=typeof e;return obj_date=o(e,"object"),obj_date.setDate(obj_date.getDate()+t),o(obj_date,i)},dateConvert:function(t,i){if("undefined"==typeof t&&(t=new Date(0)),"string"!=i&&"object"!=i&&e.error('Date format "'+i+'" not supported on jQuery.multiDatesPicker'),typeof t==i)return t;var r=typeof t+"->"+i;switch(r){case"object->string":return e.datepicker.formatDate(e.datepicker._defaults.dateFormat,t);case"string->object":return e.datepicker.parseDate(e.datepicker._defaults.dateFormat,t);default:e.error('Conversion "'+r+'" not allowed on jQuery.multiDatesPicker')}},gotDate:function(e,t){for(var i=0;i<this.multiDatesPicker[r(t)].length;i++)if(0==p.compareDates(this.multiDatesPicker[r(t)][i],e))return i;return!1},getDates:function(e,t){switch(e){case"object":return this.multiDatesPicker[r(t)];default:var a=new Array;for(i in this.multiDatesPicker[r(t)])a.push(o(this.multiDatesPicker[r(t)][i],"string"));return a}},addDates:function(t,r){switch(typeof t){case"object":case"array":if(t.length){for(i in t)n.call(this,t[i],r);break}case"string":n.call(this,t,r);break;default:e.error('Date format "'+typeof t+'" not allowed on jQuery.multiDatesPicker')}e(this).datepicker("refresh")},removeDates:function(t,r){if("array"==typeof index)for(i in t)a.call(this,i,r);else a.call(this,t,r);e(this).datepicker("refresh")},resetDates:function(t){this.multiDatesPicker[r(t)]=[],e(this).datepicker("refresh")},toggleDate:function(e,t){var i=p.gotDate.call(this,e),r=this.multiDatesPicker.mode;switch(r.modeName){case"daysRange":this.multiDatesPicker.selectedDates=[];var a=r.options.autoselectRange[1],n=r.options.autoselectRange[0];a<n&&(a=r.options.autoselectRange[0],n=r.options.autoselectRange[1]);for(var o=n;o<a;o++)p.addDates.call(this,p.sumDays(e,o));break;default:i===!1?p.addDates.call(this,e):p.removeDates.call(this,i)}},setMode:function(t){switch(this.multiDatesPicker.mode.modeName=t.modeName,t.modeName){case"normal":for(option in t.options)switch(option){case"maxPicks":case"minPicks":case"pickableRange":case"pickableRangeDelay":case"adjustRangeToAvoided":this.multiDatesPicker.mode.options[option]=t.options[option];break;default:e.error("Option "+option+" does not exist for setMode on jQuery.multiDatesPicker")}break;case"daysRange":case"weeksRange":var i=1;for(option in t.options)switch(option){case"autoselectRange":i--;case"pickableRange":case"pickableRangeDelay":case"adjustRangeToAvoided":this.multiDatesPicker.mode.options[option]=t.options[option];break;default:e.error("Option "+option+" does not exist for setMode on jQuery.multiDatesPicker")}i>0&&e.error("Some mandatory options not specified!")}t.options.pickableRange&&(e(this).datepicker("option","maxDate",t.options.pickableRange+(t.options.pickableRangeDelay||0)),e(this).datepicker("option","minDate",this.multiDatesPicker.minDate)),c.onSelect&&c.onSelect(),e(this).datepicker("refresh")}};return this.each(function(){if(this.multiDatesPicker||(this.multiDatesPicker={selectedDates:[],avoidedDates:[],mode:{modeName:"normal",options:{adjustRangeToAvoided:!0}}}),p[t]){var i=p[t].apply(this,Array.prototype.slice.call(s,1));switch(t){case"getDates":case"gotDate":case"sumDays":case"compareDates":case"dateConvert":l=i}return i}return"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.multiDatesPicker"):p.init.apply(this,s)}),l}}(jQuery),/*
* jQuery timepicker addon
* By: Trent Richardson [http://trentrichardson.com]
* Version 1.0.1
* Last Modified: 07/01/2012
*
* Copyright 2012 Trent Richardson
* You may use this project under MIT or GPL licenses.
* http://trentrichardson.com/Impromptu/GPL-LICENSE.txt
* http://trentrichardson.com/Impromptu/MIT-LICENSE.txt
*
* HERES THE CSS:
* .ui-timepicker-div .ui-widget-header { margin-bottom: 8px; }
* .ui-timepicker-div dl { text-align: left; }
* .ui-timepicker-div dl dt { height: 25px; margin-bottom: -25px; }
* .ui-timepicker-div dl dd { margin: 0 10px 10px 65px; }
* .ui-timepicker-div td { font-size: 90%; }
* .ui-tpicker-grid-label { background: none; border: none; margin: 0; padding: 0; }
*/
function($){function Timepicker(){this.regional=[],this.regional[""]={currentText:"Now",closeText:"Done",ampm:!1,amNames:["AM","A"],pmNames:["PM","P"],timeFormat:"hh:mm tt",timeSuffix:"",timeOnlyTitle:"Choose Time",timeText:"Time",hourText:"Hour",minuteText:"Minute",secondText:"Second",millisecText:"Millisecond",timezoneText:"Time Zone"},this._defaults={showButtonPanel:!0,timeOnly:!1,showHour:!0,showMinute:!0,showSecond:!1,showMillisec:!1,showTimezone:!1,showTime:!0,stepHour:1,stepMinute:1,stepSecond:1,stepMillisec:1,hour:0,minute:0,second:0,millisec:0,timezone:null,useLocalTimezone:!1,defaultTimezone:"+0000",hourMin:0,minuteMin:0,secondMin:0,millisecMin:0,hourMax:23,minuteMax:59,secondMax:59,millisecMax:999,minDateTime:null,maxDateTime:null,onSelect:null,hourGrid:0,minuteGrid:0,secondGrid:0,millisecGrid:0,alwaysSetTime:!0,separator:" ",altFieldTimeOnly:!0,showTimepicker:!0,timezoneIso8601:!1,timezoneList:null,addSliderAccess:!1,sliderAccessArgs:null},$.extend(this._defaults,this.regional[""])}function extendRemove(e,t){$.extend(e,t);for(var i in t)null!==t[i]&&void 0!==t[i]||(e[i]=t[i]);return e}if($.ui.timepicker=$.ui.timepicker||{},!$.ui.timepicker.version){$.extend($.ui,{timepicker:{version:"1.0.1"}}),$.extend(Timepicker.prototype,{$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,minute_slider:null,second_slider:null,millisec_slider:null,timezone_select:null,hour:0,minute:0,second:0,millisec:0,timezone:null,defaultTimezone:"+0000",hourMinOriginal:null,minuteMinOriginal:null,secondMinOriginal:null,millisecMinOriginal:null,hourMaxOriginal:null,minuteMaxOriginal:null,secondMaxOriginal:null,millisecMaxOriginal:null,ampm:"",formattedDate:"",formattedTime:"",formattedDateTime:"",timezoneList:null,setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_newInst:function($input,o){var tp_inst=new Timepicker,inlineSettings={};for(var attrName in this._defaults){var attrValue=$input.attr("time:"+attrName);if(attrValue)try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}if(tp_inst._defaults=$.extend({},this._defaults,inlineSettings,o,{beforeShow:function(e,t){if($.isFunction(o.beforeShow))return o.beforeShow(e,t,tp_inst)},onChangeMonthYear:function(e,t,i){tp_inst._updateDateTime(i),$.isFunction(o.onChangeMonthYear)&&o.onChangeMonthYear.call($input[0],e,t,i,tp_inst)},onClose:function(e,t){tp_inst.timeDefined===!0&&""!==$input.val()&&tp_inst._updateDateTime(t),$.isFunction(o.onClose)&&o.onClose.call($input[0],e,t,tp_inst)},timepicker:tp_inst}),tp_inst.amNames=$.map(tp_inst._defaults.amNames,function(e){return e.toUpperCase()}),tp_inst.pmNames=$.map(tp_inst._defaults.pmNames,function(e){return e.toUpperCase()}),null===tp_inst._defaults.timezoneList){for(var timezoneList=[],i=-11;i<=12;i++)timezoneList.push((i>=0?"+":"-")+("0"+Math.abs(i).toString()).slice(-2)+"00");tp_inst._defaults.timezoneIso8601&&(timezoneList=$.map(timezoneList,function(e){return"+0000"==e?"Z":e.substring(0,3)+":"+e.substring(3)})),tp_inst._defaults.timezoneList=timezoneList}return tp_inst.timezone=tp_inst._defaults.timezone,tp_inst.hour=tp_inst._defaults.hour,tp_inst.minute=tp_inst._defaults.minute,tp_inst.second=tp_inst._defaults.second,tp_inst.millisec=tp_inst._defaults.millisec,tp_inst.ampm="",tp_inst.$input=$input,o.altField&&(tp_inst.$altInput=$(o.altField).css({cursor:"pointer"}).focus(function(){$input.trigger("focus")})),0!==tp_inst._defaults.minDate&&0!==tp_inst._defaults.minDateTime||(tp_inst._defaults.minDate=new Date),0!==tp_inst._defaults.maxDate&&0!==tp_inst._defaults.maxDateTime||(tp_inst._defaults.maxDate=new Date),void 0!==tp_inst._defaults.minDate&&tp_inst._defaults.minDate instanceof Date&&(tp_inst._defaults.minDateTime=new Date(tp_inst._defaults.minDate.getTime())),void 0!==tp_inst._defaults.minDateTime&&tp_inst._defaults.minDateTime instanceof Date&&(tp_inst._defaults.minDate=new Date(tp_inst._defaults.minDateTime.getTime())),void 0!==tp_inst._defaults.maxDate&&tp_inst._defaults.maxDate instanceof Date&&(tp_inst._defaults.maxDateTime=new Date(tp_inst._defaults.maxDate.getTime())),void 0!==tp_inst._defaults.maxDateTime&&tp_inst._defaults.maxDateTime instanceof Date&&(tp_inst._defaults.maxDate=new Date(tp_inst._defaults.maxDateTime.getTime())),tp_inst},_addTimePicker:function(e){var t=this.$altInput&&this._defaults.altFieldTimeOnly?this.$input.val()+" "+this.$altInput.val():this.$input.val();this.timeDefined=this._parseTime(t),this._limitMinMaxDateTime(e,!1),this._injectTimePicker()},_parseTime:function(e,t){if(this.inst||(this.inst=$.datepicker._getInst(this.$input[0])),t||!this._defaults.timeOnly){var i=$.datepicker._get(this.inst,"dateFormat");try{var r=parseDateTimeInternal(i,this._defaults.timeFormat,e,$.datepicker._getFormatConfig(this.inst),this._defaults);if(!r.timeObj)return!1;$.extend(this,r.timeObj)}catch(a){return!1}return!0}var n=$.datepicker.parseTime(this._defaults.timeFormat,e,this._defaults);return!!n&&($.extend(this,n),!0)},_injectTimePicker:function(){var e=this.inst.dpDiv,t=this._defaults,i=this,r=parseInt(t.hourMax-(t.hourMax-t.hourMin)%t.stepHour,10),a=parseInt(t.minuteMax-(t.minuteMax-t.minuteMin)%t.stepMinute,10),n=parseInt(t.secondMax-(t.secondMax-t.secondMin)%t.stepSecond,10),o=parseInt(t.millisecMax-(t.millisecMax-t.millisecMin)%t.stepMillisec,10),s=this.inst.id.toString().replace(/([^A-Za-z0-9_])/g,"");if(0===e.find("div#ui-timepicker-div-"+s).length&&t.showTimepicker){var l=' style="display:none;"',d='<div class="ui-timepicker-div" id="ui-timepicker-div-'+s+'"><dl><dt class="ui_tpicker_time_label" id="ui_tpicker_time_label_'+s+'"'+(t.showTime?"":l)+">"+t.timeText+'</dt><dd class="ui_tpicker_time" id="ui_tpicker_time_'+s+'"'+(t.showTime?"":l)+'></dd><dt class="ui_tpicker_hour_label" id="ui_tpicker_hour_label_'+s+'"'+(t.showHour?"":l)+">"+t.hourText+"</dt>",u=0,c=0,p=0,h=0,f=null;if(d+='<dd class="ui_tpicker_hour"><div id="ui_tpicker_hour_'+s+'"'+(t.showHour?"":l)+"></div>",t.showHour&&t.hourGrid>0){d+='<div style="padding-left: 1px"><table class="ui-tpicker-grid-label"><tr>';for(var g=t.hourMin;g<=r;g+=parseInt(t.hourGrid,10)){u++;var m=t.ampm&&g>12?g-12:g;m<10&&(m="0"+m),t.ampm&&(0===g?m="12a":m+=g<12?"a":"p"),d+="<td>"+m+"</td>"}d+="</tr></table></div>"}if(d+="</dd>",d+='<dt class="ui_tpicker_minute_label" id="ui_tpicker_minute_label_'+s+'"'+(t.showMinute?"":l)+">"+t.minuteText+'</dt><dd class="ui_tpicker_minute"><div id="ui_tpicker_minute_'+s+'"'+(t.showMinute?"":l)+"></div>",t.showMinute&&t.minuteGrid>0){d+='<div style="padding-left: 1px"><table class="ui-tpicker-grid-label"><tr>';for(var v=t.minuteMin;v<=a;v+=parseInt(t.minuteGrid,10))c++,d+="<td>"+(v<10?"0":"")+v+"</td>";d+="</tr></table></div>"}if(d+="</dd>",d+='<dt class="ui_tpicker_second_label" id="ui_tpicker_second_label_'+s+'"'+(t.showSecond?"":l)+">"+t.secondText+'</dt><dd class="ui_tpicker_second"><div id="ui_tpicker_second_'+s+'"'+(t.showSecond?"":l)+"></div>",t.showSecond&&t.secondGrid>0){d+='<div style="padding-left: 1px"><table><tr>';for(var b=t.secondMin;b<=n;b+=parseInt(t.secondGrid,10))p++,d+="<td>"+(b<10?"0":"")+b+"</td>";d+="</tr></table></div>"}if(d+="</dd>",d+='<dt class="ui_tpicker_millisec_label" id="ui_tpicker_millisec_label_'+s+'"'+(t.showMillisec?"":l)+">"+t.millisecText+'</dt><dd class="ui_tpicker_millisec"><div id="ui_tpicker_millisec_'+s+'"'+(t.showMillisec?"":l)+"></div>",t.showMillisec&&t.millisecGrid>0){d+='<div style="padding-left: 1px"><table><tr>';for(var _=t.millisecMin;_<=o;_+=parseInt(t.millisecGrid,10))h++,d+="<td>"+(_<10?"0":"")+_+"</td>";d+="</tr></table></div>"}d+="</dd>",d+='<dt class="ui_tpicker_timezone_label" id="ui_tpicker_timezone_label_'+s+'"'+(t.showTimezone?"":l)+">"+t.timezoneText+"</dt>",d+='<dd class="ui_tpicker_timezone" id="ui_tpicker_timezone_'+s+'"'+(t.showTimezone?"":l)+"></dd>",d+="</dl></div>";var y=$(d);if(t.timeOnly===!0&&(y.prepend('<div class="ui-widget-header ui-helper-clearfix ui-corner-all"><div class="ui-datepicker-title">'+t.timeOnlyTitle+"</div></div>"),e.find(".ui-datepicker-header, .ui-datepicker-calendar").hide()),this.hour_slider=y.find("#ui_tpicker_hour_"+s).slider({orientation:"horizontal",value:this.hour,min:t.hourMin,max:r,step:t.stepHour,slide:function(e,t){i.hour_slider.slider("option","value",t.value),i._onTimeChange()}}),this.minute_slider=y.find("#ui_tpicker_minute_"+s).slider({orientation:"horizontal",value:this.minute,min:t.minuteMin,max:a,step:t.stepMinute,slide:function(e,t){i.minute_slider.slider("option","value",t.value),i._onTimeChange()}}),this.second_slider=y.find("#ui_tpicker_second_"+s).slider({orientation:"horizontal",value:this.second,min:t.secondMin,max:n,step:t.stepSecond,slide:function(e,t){i.second_slider.slider("option","value",t.value),i._onTimeChange()}}),this.millisec_slider=y.find("#ui_tpicker_millisec_"+s).slider({orientation:"horizontal",value:this.millisec,min:t.millisecMin,max:o,step:t.stepMillisec,slide:function(e,t){i.millisec_slider.slider("option","value",t.value),i._onTimeChange()}}),this.timezone_select=y.find("#ui_tpicker_timezone_"+s).append("<select></select>").find("select"),$.fn.append.apply(this.timezone_select,$.map(t.timezoneList,function(e,t){return $("<option />").val("object"==typeof e?e.value:e).text("object"==typeof e?e.label:e)})),"undefined"!=typeof this.timezone&&null!==this.timezone&&""!==this.timezone){var x=new Date(this.inst.selectedYear,this.inst.selectedMonth,this.inst.selectedDay,12),w=timeZoneString(x);w==this.timezone?selectLocalTimeZone(i):this.timezone_select.val(this.timezone)}else"undefined"!=typeof this.hour&&null!==this.hour&&""!==this.hour?this.timezone_select.val(t.defaultTimezone):selectLocalTimeZone(i);this.timezone_select.change(function(){i._defaults.useLocalTimezone=!1,i._onTimeChange()}),t.showHour&&t.hourGrid>0&&(f=100*u*t.hourGrid/(r-t.hourMin),y.find(".ui_tpicker_hour table").css({width:f+"%",marginLeft:f/(-2*u)+"%",borderCollapse:"collapse"}).find("td").each(function(e){$(this).click(function(){var e=$(this).html();if(t.ampm){var r=e.substring(2).toLowerCase(),a=parseInt(e.substring(0,2),10);e="a"==r?12==a?0:a:12==a?12:a+12}i.hour_slider.slider("option","value",e),i._onTimeChange(),i._onSelectHandler()}).css({cursor:"pointer",width:100/u+"%",textAlign:"center",overflow:"hidden"})})),t.showMinute&&t.minuteGrid>0&&(f=100*c*t.minuteGrid/(a-t.minuteMin),y.find(".ui_tpicker_minute table").css({width:f+"%",marginLeft:f/(-2*c)+"%",borderCollapse:"collapse"}).find("td").each(function(e){$(this).click(function(){i.minute_slider.slider("option","value",$(this).html()),i._onTimeChange(),i._onSelectHandler()}).css({cursor:"pointer",width:100/c+"%",textAlign:"center",overflow:"hidden"})})),t.showSecond&&t.secondGrid>0&&y.find(".ui_tpicker_second table").css({width:f+"%",marginLeft:f/(-2*p)+"%",borderCollapse:"collapse"}).find("td").each(function(e){$(this).click(function(){i.second_slider.slider("option","value",$(this).html()),i._onTimeChange(),i._onSelectHandler()}).css({cursor:"pointer",width:100/p+"%",textAlign:"center",overflow:"hidden"})}),t.showMillisec&&t.millisecGrid>0&&y.find(".ui_tpicker_millisec table").css({width:f+"%",marginLeft:f/(-2*h)+"%",borderCollapse:"collapse"}).find("td").each(function(e){$(this).click(function(){i.millisec_slider.slider("option","value",$(this).html()),i._onTimeChange(),i._onSelectHandler()}).css({cursor:"pointer",width:100/h+"%",textAlign:"center",overflow:"hidden"})});var j=e.find(".ui-datepicker-buttonpane");if(j.length?j.before(y):e.append(y),this.$timeObj=y.find("#ui_tpicker_time_"+s),null!==this.inst){var k=this.timeDefined;this._onTimeChange(),this.timeDefined=k}var C=function(){i._onSelectHandler()};if(this.hour_slider.bind("slidestop",C),this.minute_slider.bind("slidestop",C),this.second_slider.bind("slidestop",C),this.millisec_slider.bind("slidestop",C),this._defaults.addSliderAccess){var D=this._defaults.sliderAccessArgs;setTimeout(function(){if(0===y.find(".ui-slider-access").length){y.find(".ui-slider:visible").sliderAccess(D);var e=y.find(".ui-slider-access:eq(0)").outerWidth(!0);e&&y.find("table:visible").each(function(){var t=$(this),i=t.outerWidth(),r=t.css("marginLeft").toString().replace("%",""),a=i-e,n=r*a/i+"%";t.css({width:a,marginLeft:n})})}},0)}}},_limitMinMaxDateTime:function(e,t){var i=this._defaults,r=new Date(e.selectedYear,e.selectedMonth,e.selectedDay);if(this._defaults.showTimepicker){if(null!==$.datepicker._get(e,"minDateTime")&&void 0!==$.datepicker._get(e,"minDateTime")&&r){var a=$.datepicker._get(e,"minDateTime"),n=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0);null!==this.hourMinOriginal&&null!==this.minuteMinOriginal&&null!==this.secondMinOriginal&&null!==this.millisecMinOriginal||(this.hourMinOriginal=i.hourMin,this.minuteMinOriginal=i.minuteMin,this.secondMinOriginal=i.secondMin,this.millisecMinOriginal=i.millisecMin),e.settings.timeOnly||n.getTime()==r.getTime()?(this._defaults.hourMin=a.getHours(),this.hour<=this._defaults.hourMin?(this.hour=this._defaults.hourMin,this._defaults.minuteMin=a.getMinutes(),this.minute<=this._defaults.minuteMin?(this.minute=this._defaults.minuteMin,this._defaults.secondMin=a.getSeconds()):this.second<=this._defaults.secondMin?(this.second=this._defaults.secondMin,this._defaults.millisecMin=a.getMilliseconds()):(this.millisec<this._defaults.millisecMin&&(this.millisec=this._defaults.millisecMin),this._defaults.millisecMin=this.millisecMinOriginal)):(this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal)):(this._defaults.hourMin=this.hourMinOriginal,this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal)}if(null!==$.datepicker._get(e,"maxDateTime")&&void 0!==$.datepicker._get(e,"maxDateTime")&&r){var o=$.datepicker._get(e,"maxDateTime"),s=new Date(o.getFullYear(),o.getMonth(),o.getDate(),0,0,0,0);null!==this.hourMaxOriginal&&null!==this.minuteMaxOriginal&&null!==this.secondMaxOriginal||(this.hourMaxOriginal=i.hourMax,this.minuteMaxOriginal=i.minuteMax,this.secondMaxOriginal=i.secondMax,this.millisecMaxOriginal=i.millisecMax),e.settings.timeOnly||s.getTime()==r.getTime()?(this._defaults.hourMax=o.getHours(),this.hour>=this._defaults.hourMax?(this.hour=this._defaults.hourMax,this._defaults.minuteMax=o.getMinutes(),this.minute>=this._defaults.minuteMax?(this.minute=this._defaults.minuteMax,this._defaults.secondMax=o.getSeconds()):this.second>=this._defaults.secondMax?(this.second=this._defaults.secondMax,this._defaults.millisecMax=o.getMilliseconds()):(this.millisec>this._defaults.millisecMax&&(this.millisec=this._defaults.millisecMax),this._defaults.millisecMax=this.millisecMaxOriginal)):(this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal)):(this._defaults.hourMax=this.hourMaxOriginal,this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal)}if(void 0!==t&&t===!0){var l=parseInt(this._defaults.hourMax-(this._defaults.hourMax-this._defaults.hourMin)%this._defaults.stepHour,10),d=parseInt(this._defaults.minuteMax-(this._defaults.minuteMax-this._defaults.minuteMin)%this._defaults.stepMinute,10),u=parseInt(this._defaults.secondMax-(this._defaults.secondMax-this._defaults.secondMin)%this._defaults.stepSecond,10),c=parseInt(this._defaults.millisecMax-(this._defaults.millisecMax-this._defaults.millisecMin)%this._defaults.stepMillisec,10);this.hour_slider&&this.hour_slider.slider("option",{min:this._defaults.hourMin,max:l}).slider("value",this.hour),this.minute_slider&&this.minute_slider.slider("option",{min:this._defaults.minuteMin,max:d}).slider("value",this.minute),this.second_slider&&this.second_slider.slider("option",{min:this._defaults.secondMin,max:u}).slider("value",this.second),this.millisec_slider&&this.millisec_slider.slider("option",{min:this._defaults.millisecMin,max:c}).slider("value",this.millisec)}}},_onTimeChange:function(){var e=!!this.hour_slider&&this.hour_slider.slider("value"),t=!!this.minute_slider&&this.minute_slider.slider("value"),i=!!this.second_slider&&this.second_slider.slider("value"),r=!!this.millisec_slider&&this.millisec_slider.slider("value"),a=!!this.timezone_select&&this.timezone_select.val(),n=this._defaults;"object"==typeof e&&(e=!1),"object"==typeof t&&(t=!1),"object"==typeof i&&(i=!1),"object"==typeof r&&(r=!1),"object"==typeof a&&(a=!1),e!==!1&&(e=parseInt(e,10)),t!==!1&&(t=parseInt(t,10)),i!==!1&&(i=parseInt(i,10)),r!==!1&&(r=parseInt(r,10));var o=n[e<12?"amNames":"pmNames"][0],s=e!=this.hour||t!=this.minute||i!=this.second||r!=this.millisec||this.ampm.length>0&&e<12!=($.inArray(this.ampm.toUpperCase(),this.amNames)!==-1)||a!=this.timezone;s&&(e!==!1&&(this.hour=e),t!==!1&&(this.minute=t),i!==!1&&(this.second=i),r!==!1&&(this.millisec=r),a!==!1&&(this.timezone=a),this.inst||(this.inst=$.datepicker._getInst(this.$input[0])),this._limitMinMaxDateTime(this.inst,!0)),n.ampm&&(this.ampm=o),this.formattedTime=$.datepicker.formatTime(this._defaults.timeFormat,this,this._defaults),this.$timeObj&&this.$timeObj.text(this.formattedTime+n.timeSuffix),this.timeDefined=!0,s&&this._updateDateTime()},_onSelectHandler:function(){var e=this._defaults.onSelect,t=this.$input?this.$input[0]:null;e&&t&&e.apply(t,[this.formattedDateTime,this])},_formatTime:function(e,t){e=e||{hour:this.hour,minute:this.minute,second:this.second,millisec:this.millisec,ampm:this.ampm,timezone:this.timezone};var i=(t||this._defaults.timeFormat).toString();return i=$.datepicker.formatTime(i,e,this._defaults),arguments.length?i:void(this.formattedTime=i)},_updateDateTime:function(e){e=this.inst||e;var t=$.datepicker._daylightSavingAdjust(new Date(e.selectedYear,e.selectedMonth,e.selectedDay)),i=$.datepicker._get(e,"dateFormat"),r=$.datepicker._getFormatConfig(e),a=null!==t&&this.timeDefined;this.formattedDate=$.datepicker.formatDate(i,null===t?new Date:t,r);var n=this.formattedDate;this._defaults.timeOnly===!0?n=this.formattedTime:this._defaults.timeOnly!==!0&&(this._defaults.alwaysSetTime||a)&&(n+=this._defaults.separator+this.formattedTime+this._defaults.timeSuffix),this.formattedDateTime=n,this._defaults.showTimepicker?this.$altInput&&this._defaults.altFieldTimeOnly===!0?(this.$altInput.val(this.formattedTime),this.$input.val(this.formattedDate)):this.$altInput?(this.$altInput.val(n),this.$input.val(n)):this.$input.val(n):this.$input.val(this.formattedDate),this.$input.trigger("change")}}),$.fn.extend({timepicker:function(e){e=e||{};var t=arguments;return"object"==typeof e&&(t[0]=$.extend(e,{timeOnly:!0})),$(this).each(function(){$.fn.datetimepicker.apply($(this),t)})},datetimepicker:function(e){e=e||{};var t=arguments;return"string"==typeof e?"getDate"==e?$.fn.datepicker.apply($(this[0]),t):this.each(function(){var e=$(this);e.datepicker.apply(e,t)}):this.each(function(){var t=$(this);t.datepicker($.timepicker._newInst(t,e)._defaults)})}}),$.datepicker.parseDateTime=function(e,t,i,r,a){var n=parseDateTimeInternal(e,t,i,r,a);if(n.timeObj){var o=n.timeObj;n.date.setHours(o.hour,o.minute,o.second,o.millisec)}return n.date},$.datepicker.parseTime=function(e,t,i){var r,a=function(e,t){var i=[];return e&&$.merge(i,e),t&&$.merge(i,t),i=$.map(i,function(e){return e.replace(/[.*+?|()\[\]{}\\]/g,"\\$&")}),"("+i.join("|")+")?"},n=function(e){var t=e.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|l{1}|t{1,2}|z)/g),i={h:-1,m:-1,s:-1,l:-1,t:-1,z:-1};if(t)for(var r=0;r<t.length;r++)i[t[r].toString().charAt(0)]==-1&&(i[t[r].toString().charAt(0)]=r+1);return i},o=extendRemove(extendRemove({},$.timepicker._defaults),i||{}),s="^"+e.toString().replace(/h{1,2}/gi,"(\\d?\\d)").replace(/m{1,2}/gi,"(\\d?\\d)").replace(/s{1,2}/gi,"(\\d?\\d)").replace(/l{1}/gi,"(\\d?\\d?\\d)").replace(/t{1,2}/gi,a(o.amNames,o.pmNames)).replace(/z{1}/gi,"(z|[-+]\\d\\d:?\\d\\d)?").replace(/\s/g,"\\s?")+o.timeSuffix+"$",l=n(e),d="";r=t.match(new RegExp(s,"i"));var u={hour:0,minute:0,second:0,millisec:0};if(r){if(l.t!==-1&&(void 0===r[l.t]||0===r[l.t].length?(d="",u.ampm=""):(d=$.inArray(r[l.t],o.amNames)!==-1?"AM":"PM",u.ampm=o["AM"==d?"amNames":"pmNames"][0])),l.h!==-1&&("AM"==d&&"12"==r[l.h]?u.hour=0:"PM"==d&&"12"!=r[l.h]?u.hour=parseInt(r[l.h],10)+12:u.hour=Number(r[l.h])),l.m!==-1&&(u.minute=Number(r[l.m])),l.s!==-1&&(u.second=Number(r[l.s])),l.l!==-1&&(u.millisec=Number(r[l.l])),l.z!==-1&&void 0!==r[l.z]){var c=r[l.z].toUpperCase();switch(c.length){case 1:c=o.timezoneIso8601?"Z":"+0000";break;case 5:o.timezoneIso8601&&(c="0000"==c.substring(1)?"Z":c.substring(0,3)+":"+c.substring(3));break;case 6:o.timezoneIso8601?"00:00"==c.substring(1)&&(c="Z"):c="Z"==c||"00:00"==c.substring(1)?"+0000":c.replace(/:/,"")}u.timezone=c}return u}return!1},$.datepicker.formatTime=function(e,t,i){i=i||{},i=$.extend($.timepicker._defaults,i),t=$.extend({hour:0,minute:0,second:0,millisec:0,timezone:"+0000"},t);var r=e,a=i.amNames[0],n=parseInt(t.hour,10);return i.ampm&&(n>11&&(a=i.pmNames[0],n>12&&(n%=12)),0===n&&(n=12)),r=r.replace(/(?:hh?|mm?|ss?|[tT]{1,2}|[lz])/g,function(e){switch(e.toLowerCase()){case"hh":return("0"+n).slice(-2);case"h":return n;case"mm":return("0"+t.minute).slice(-2);case"m":return t.minute;case"ss":return("0"+t.second).slice(-2);case"s":return t.second;case"l":return("00"+t.millisec).slice(-3);case"z":return t.timezone;case"t":case"tt":return i.ampm?(1==e.length&&(a=a.charAt(0)),"T"==e.charAt(0)?a.toUpperCase():a.toLowerCase()):""}}),r=$.trim(r)},$.datepicker._base_selectDate=$.datepicker._selectDate,$.datepicker._selectDate=function(e,t){var i=this._getInst($(e)[0]),r=this._get(i,"timepicker");r?(r._limitMinMaxDateTime(i,!0),i.inline=i.stay_open=!0,this._base_selectDate(e,t),i.inline=i.stay_open=!1,this._notifyChange(i),this._updateDatepicker(i)):this._base_selectDate(e,t)},$.datepicker._base_updateDatepicker=$.datepicker._updateDatepicker,$.datepicker._updateDatepicker=function(e){var t=e.input[0];if(!($.datepicker._curInst&&$.datepicker._curInst!=e&&$.datepicker._datepickerShowing&&$.datepicker._lastInput!=t||"boolean"==typeof e.stay_open&&e.stay_open!==!1)){this._base_updateDatepicker(e);var i=this._get(e,"timepicker");if(i&&(i._addTimePicker(e),i._defaults.useLocalTimezone)){var r=new Date(e.selectedYear,e.selectedMonth,e.selectedDay,12);selectLocalTimeZone(i,r),i._onTimeChange()}}},$.datepicker._base_doKeyPress=$.datepicker._doKeyPress,$.datepicker._doKeyPress=function(e){var t=$.datepicker._getInst(e.target),i=$.datepicker._get(t,"timepicker");if(i&&$.datepicker._get(t,"constrainInput")){var r=i._defaults.ampm,a=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),n=i._defaults.timeFormat.toString().replace(/[hms]/g,"").replace(/TT/g,r?"APM":"").replace(/Tt/g,r?"AaPpMm":"").replace(/tT/g,r?"AaPpMm":"").replace(/T/g,r?"AP":"").replace(/tt/g,r?"apm":"").replace(/t/g,r?"ap":"")+" "+i._defaults.separator+i._defaults.timeSuffix+(i._defaults.showTimezone?i._defaults.timezoneList.join(""):"")+i._defaults.amNames.join("")+i._defaults.pmNames.join("")+a,o=String.fromCharCode(void 0===e.charCode?e.keyCode:e.charCode);return e.ctrlKey||o<" "||!a||n.indexOf(o)>-1}return $.datepicker._base_doKeyPress(e)},$.datepicker._base_doKeyUp=$.datepicker._doKeyUp,$.datepicker._doKeyUp=function(e){var t=$.datepicker._getInst(e.target),i=$.datepicker._get(t,"timepicker");if(i&&i._defaults.timeOnly&&t.input.val()!=t.lastVal)try{$.datepicker._updateDatepicker(t)}catch(r){$.datepicker.log(r)}return $.datepicker._base_doKeyUp(e)},$.datepicker._base_gotoToday=$.datepicker._gotoToday,$.datepicker._gotoToday=function(e){var t=this._getInst($(e)[0]),i=t.dpDiv;this._base_gotoToday(e);var r=this._get(t,"timepicker");selectLocalTimeZone(r);var a=new Date;this._setTime(t,a),$(".ui-datepicker-today",i).click()},$.datepicker._disableTimepickerDatepicker=function(e){var t=this._getInst(e);if(t){var i=this._get(t,"timepicker");$(e).datepicker("getDate"),i&&(i._defaults.showTimepicker=!1,i._updateDateTime(t))}},$.datepicker._enableTimepickerDatepicker=function(e){var t=this._getInst(e);if(t){var i=this._get(t,"timepicker");$(e).datepicker("getDate"),i&&(i._defaults.showTimepicker=!0,i._addTimePicker(t),i._updateDateTime(t))}},$.datepicker._setTime=function(e,t){var i=this._get(e,"timepicker");if(i){var r=i._defaults,a=t?t.getHours():r.hour,n=t?t.getMinutes():r.minute,o=t?t.getSeconds():r.second,s=t?t.getMilliseconds():r.millisec,l=a===r.hourMin,d=n===r.minuteMin,u=o===r.secondMin,c=!1;a<r.hourMin||a>r.hourMax?c=!0:(n<r.minuteMin||n>r.minuteMax)&&l?c=!0:(o<r.secondMin||o>r.secondMax)&&l&&d?c=!0:(s<r.millisecMin||s>r.millisecMax)&&l&&d&&u&&(c=!0),c&&(a=r.hourMin,n=r.minuteMin,o=r.secondMin,s=r.millisecMin),i.hour=a,i.minute=n,i.second=o,i.millisec=s,i.hour_slider&&i.hour_slider.slider("value",a),i.minute_slider&&i.minute_slider.slider("value",n),i.second_slider&&i.second_slider.slider("value",o),i.millisec_slider&&i.millisec_slider.slider("value",s),i._onTimeChange(),i._updateDateTime(e)}},$.datepicker._setTimeDatepicker=function(e,t,i){var r=this._getInst(e);if(r){var a=this._get(r,"timepicker");if(a){this._setDateFromField(r);var n;t&&("string"==typeof t?(a._parseTime(t,i),n=new Date,n.setHours(a.hour,a.minute,a.second,a.millisec)):n=new Date(t.getTime()),"Invalid Date"==n.toString()&&(n=void 0),this._setTime(r,n))}}},$.datepicker._base_setDateDatepicker=$.datepicker._setDateDatepicker,$.datepicker._setDateDatepicker=function(e,t){var i=this._getInst(e);if(i){var r=t instanceof Date?new Date(t.getTime()):t;this._updateDatepicker(i),this._base_setDateDatepicker.apply(this,arguments),this._setTimeDatepicker(e,r,!0)}},$.datepicker._base_getDateDatepicker=$.datepicker._getDateDatepicker,$.datepicker._getDateDatepicker=function(e,t){var i=this._getInst(e);if(i){var r=this._get(i,"timepicker");if(r){this._setDateFromField(i,t);var a=this._getDate(i);return a&&r._parseTime($(e).val(),r.timeOnly)&&a.setHours(r.hour,r.minute,r.second,r.millisec),a}return this._base_getDateDatepicker(e,t)}},$.datepicker._base_parseDate=$.datepicker.parseDate,$.datepicker.parseDate=function(e,t,i){var r=splitDateTime(e,t,i);return $.datepicker._base_parseDate(e,r[0],i)},$.datepicker._base_formatDate=$.datepicker._formatDate,$.datepicker._formatDate=function(e,t,i,r){var a=this._get(e,"timepicker");return a?(a._updateDateTime(e),a.$input.val()):this._base_formatDate(e)},$.datepicker._base_optionDatepicker=$.datepicker._optionDatepicker,$.datepicker._optionDatepicker=function(e,t,i){var r=this._getInst(e);if(!r)return null;var a=this._get(r,"timepicker");if(a){var n=null,o=null,s=null;"string"==typeof t?"minDate"===t||"minDateTime"===t?n=i:"maxDate"===t||"maxDateTime"===t?o=i:"onSelect"===t&&(s=i):"object"==typeof t&&(t.minDate?n=t.minDate:t.minDateTime?n=t.minDateTime:t.maxDate?o=t.maxDate:t.maxDateTime&&(o=t.maxDateTime)),n?(n=0===n?new Date:new Date(n),a._defaults.minDate=n,a._defaults.minDateTime=n):o?(o=0===o?new Date:new Date(o),a._defaults.maxDate=o,a._defaults.maxDateTime=o):s&&(a._defaults.onSelect=s)}return void 0===i?this._base_optionDatepicker(e,t):this._base_optionDatepicker(e,t,i)};var splitDateTime=function(e,t,i){try{$.datepicker._base_parseDate(e,t,i)}catch(r){if(r.indexOf(":")>=0){var a=t.length-(r.length-r.indexOf(":")-2);t.substring(a);return[t.substring(0,a),t.substring(a)]}throw r}return[t,""]},parseDateTimeInternal=function(e,t,i,r,a){var n,o=splitDateTime(e,i,r);if(n=$.datepicker._base_parseDate(e,o[0],r),""!==o[1]){var s=o[1],l=a&&a.separator?a.separator:$.timepicker._defaults.separator;if(0!==s.indexOf(l))throw"Missing time separator";s=s.substring(l.length);var d=$.datepicker.parseTime(t,s,a);if(null===d)throw"Wrong time format";return{date:n,timeObj:d}}return{date:n}},selectLocalTimeZone=function(e,t){if(e&&e.timezone_select){e._defaults.useLocalTimezone=!0;var i="undefined"!=typeof t?t:new Date,r=timeZoneString(i);e._defaults.timezoneIso8601&&(r=r.substring(0,3)+":"+r.substring(3)),e.timezone_select.val(r)}},timeZoneString=function(e){var t=e.getTimezoneOffset()*-10100/60,i=(t>=0?"+":"-")+Math.abs(t).toString().substr(1);return i};$.timepicker=new Timepicker,$.timepicker.version="1.0.1"}}(jQuery),/*
 * jQuery UI Autocomplete @VERSION
 *
 * Copyright (c) 2010 AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * and GPL (GPL-LICENSE.txt) licenses.
 *
 * http://docs.jquery.com/UI/Autocomplete
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 *	jquery.ui.position.js
 */
function(e){e.widget("ui.autocomplete",{options:{minLength:1,delay:300},_create:function(){var t=this,i=this.element[0].ownerDocument;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(i){var r=e.ui.keyCode;switch(i.keyCode){case r.PAGE_UP:t._move("previousPage",i);break;case r.PAGE_DOWN:t._move("nextPage",i);break;case r.UP:t._move("previous",i),i.preventDefault();break;case r.DOWN:t._move("next",i),i.preventDefault();break;case r.ENTER:t.menu.active&&i.preventDefault();case r.TAB:if(!t.menu.active)return;t.menu.select();break;case r.ESCAPE:t.element.val(t.term),t.close(i);break;case r.SHIFT:case r.CONTROL:case 18:break;default:clearTimeout(t.searching),t.searching=setTimeout(function(){t.search(null,i)},t.options.delay)}}).bind("focus.autocomplete",function(){t.previous=t.element.val()}).bind("blur.autocomplete",function(e){clearTimeout(t.searching),t.closing=setTimeout(function(){t.close(e)},150)}),this._initSource(),this.response=function(){return t._response.apply(t,arguments)},this.menu=e("<ul></ul>").addClass("ui-autocomplete").appendTo("body",i).menu({focus:function(e,i){var r=i.item.data("item.autocomplete");!1!==t._trigger("focus",null,{item:r})&&/^key/.test(e.originalEvent.type)&&t.element.val(r.value)},selected:function(e,r){var a=r.item.data("item.autocomplete");!1!==t._trigger("select",e,{item:a})&&t.element.val(a.value),t.close(e),t.previous=t.element.val(),t.element[0]!==i.activeElement&&t.element.focus()},blur:function(e,i){t.menu.element.is(":visible")&&t.element.val(t.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),e.fn.bgiframe&&this.menu.element.bgiframe()},destroy:function(){this.element.removeClass("ui-autocomplete-input ui-widget ui-widget-content").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),e.Widget.prototype.destroy.call(this)},_setOption:function(t){e.Widget.prototype._setOption.apply(this,arguments),"source"===t&&this._initSource()},_initSource:function(){var t,i;e.isArray(this.options.source)?(t=this.options.source,this.source=function(i,r){var a=new RegExp(e.ui.autocomplete.escapeRegex(i.term),"i");r(e.grep(t,function(e){return a.test(e.label||e.value||e)}))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(t,r){e.getJSON(i,t,r)}):this.source=this.options.source},search:function(e,t){return e=null!=e?e:this.element.val(),e.length<this.options.minLength?this.close(t):(clearTimeout(this.closing),this._trigger("search")!==!1?this._search(e):void 0)},_search:function(e){this.term=this.element.addClass("ui-autocomplete-loading").val(),this.source({term:e},this.response)},_response:function(e){e.length?(e=this._normalize(e),this._suggest(e),this._trigger("open")):this.close(),this.element.removeClass("ui-autocomplete-loading")},close:function(e){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this._trigger("close",e),this.menu.element.hide(),this.menu.deactivate()),this.previous!==this.element.val()&&this._trigger("change",e)},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return"string"==typeof t?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(e){var t,i,r=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(r,e),this.menu.deactivate(),this.menu.refresh(),this.menu.element.show().position({my:"left top",at:"left bottom",of:this.element,collision:"none"}),t=r.width("").width(),i=this.element.width(),r.width(Math.max(t,i))},_renderMenu:function(t,i){var r=this;e.each(i,function(e,i){r._renderItem(t,i)})},_renderItem:function(t,i){return e("<li></li>").data("item.autocomplete",i).append("<a>"+i.label+"</a>").appendTo(t)},_move:function(e,t){return this.menu.element.is(":visible")?this.menu.first()&&/^previous/.test(e)||this.menu.last()&&/^next/.test(e)?(this.element.val(this.term),void this.menu.deactivate()):void this.menu[e](t):void this.search(null,t)},widget:function(){return this.menu.element}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")}})}(jQuery),/*
 * jQuery UI selectmenu
 *
 * Copyright (c) 2009 AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT (MIT-LICENSE.txt)
 * and GPL (GPL-LICENSE.txt) licenses.
 *
 * http://docs.jquery.com/UI
 * https://github.com/fnagel/jquery-ui/wiki/Selectmenu
 */
function(e){e.widget("ui.selectmenu",{getter:"value",version:"1.8",eventPrefix:"selectmenu",options:{transferClasses:!0,typeAhead:500,style:"dropdown",positionOptions:{my:"left top",at:"left bottom",offset:null},width:null,menuWidth:null,handleWidth:26,maxHeight:null,icons:null,format:null,bgImage:function(){},wrapperElement:""},_create:function(){var t=this,i=this.options,r=this.element.attr("id")||"ui-selectmenu-"+Math.random().toString(16).slice(2,10);this.ids=[r+"-button",r+"-menu"],this._safemouseup=!0,this.newelement=e('<a class="'+this.widgetBaseClass+' ui-widget ui-state-default ui-corner-all" id="'+this.ids[0]+'" role="button" href="#" tabindex="0" aria-haspopup="true" aria-owns="'+this.ids[1]+'"></a>').insertAfter(this.element),this.newelement.wrap(i.wrapperElement);var a=this.element.attr("tabindex");a&&this.newelement.attr("tabindex",a),this.newelement.data("selectelement",this.element),this.selectmenuIcon=e('<span class="'+this.widgetBaseClass+'-icon ui-icon"></span>').prependTo(this.newelement),this.newelement.prepend('<span class="'+t.widgetBaseClass+'-status" />'),e('label[for="'+this.element.attr("id")+'"]').attr("for",this.ids[0]).bind("click.selectmenu",function(){return t.newelement[0].focus(),!1}),this.newelement.bind("mousedown.selectmenu",function(e){return t._toggle(e,!0),"popup"==i.style&&(t._safemouseup=!1,setTimeout(function(){t._safemouseup=!0},300)),!1}).bind("click.selectmenu",function(){return!1}).bind("keydown.selectmenu",function(i){var r=!1;switch(i.keyCode){case e.ui.keyCode.ENTER:r=!0;break;case e.ui.keyCode.SPACE:t._toggle(i);break;case e.ui.keyCode.UP:i.altKey?t.open(i):t._moveSelection(-1);break;case e.ui.keyCode.DOWN:i.altKey?t.open(i):t._moveSelection(1);break;case e.ui.keyCode.LEFT:t._moveSelection(-1);break;case e.ui.keyCode.RIGHT:t._moveSelection(1);break;case e.ui.keyCode.TAB:r=!0;break;case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.HOME:t.index(0);break;case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.END:t.index(t._optionLis.length);break;default:r=!0}return r}).bind("keypress.selectmenu",function(e){return e.which>0&&t._typeAhead(e.which,"mouseup"),!0}).bind("mouseover.selectmenu",function(){i.disabled||e(this).addClass("ui-state-hover")}).bind("mouseout.selectmenu",function(){i.disabled||e(this).removeClass("ui-state-hover")}).bind("focus.selectmenu",function(){i.disabled||e(this).addClass("ui-state-focus")}).bind("blur.selectmenu",function(){i.disabled||e(this).removeClass("ui-state-focus")}),e(document).bind("mousedown.selectmenu",function(e){t.close(e)}),this.element.bind("click.selectmenu",function(){t._refreshValue()}).bind("focus.selectmenu",function(){this.newelement&&this.newelement[0].focus()});var n=this.element.width();this.newelement.width(i.width?i.width:n),this.element.hide(),this.list=e('<ul class="'+t.widgetBaseClass+'-menu ui-widget ui-widget-content" aria-hidden="true" role="listbox" aria-labelledby="'+this.ids[0]+'" id="'+this.ids[1]+'"></ul>').appendTo("body"),this.list.wrap(i.wrapperElement),this.list.bind("keydown.selectmenu",function(i){var r=!1;switch(i.keyCode){case e.ui.keyCode.UP:i.altKey?t.close(i,!0):t._moveFocus(-1);break;case e.ui.keyCode.DOWN:i.altKey?t.close(i,!0):t._moveFocus(1);break;case e.ui.keyCode.LEFT:t._moveFocus(-1);break;case e.ui.keyCode.RIGHT:t._moveFocus(1);break;case e.ui.keyCode.HOME:t._moveFocus(":first");break;case e.ui.keyCode.PAGE_UP:t._scrollPage("up");break;case e.ui.keyCode.PAGE_DOWN:t._scrollPage("down");break;case e.ui.keyCode.END:t._moveFocus(":last");break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:t.close(i,!0),e(i.target).parents("li:eq(0)").trigger("mouseup");break;case e.ui.keyCode.TAB:r=!0,t.close(i,!0);break;case e.ui.keyCode.ESCAPE:t.close(i,!0);break;default:r=!0}return r}).bind("keypress.selectmenu",function(e){return e.which>0&&t._typeAhead(e.which,"focus"),!0}),e(window).bind("resize.selectmenu",function(){e.proxy(t._refreshPosition,this)})},_init:function(){var t=this,i=this.options,r=[];this.element.find("option").each(function(){r.push({value:e(this).attr("value"),text:t._formatText(e(this).text()),selected:e(this).attr("selected"),classes:e(this).attr("class"),parentOptGroup:e(this).parent("optgroup").attr("label"),bgImage:i.bgImage.call(e(this))})});var a="popup"==t.options.style?" ui-state-active":"";this.list.html("");for(var n=0;n<r.length;n++){var o=e('<li role="presentation"><a href="#" tabindex="-1" role="option" aria-selected="false">'+r[n].text+"</a></li>").data("index",n).addClass(r[n].classes).data("optionClasses",r[n].classes||"").bind("mouseup.selectmenu",function(i){if(t._safemouseup){var r=e(this).data("index")!=t._selectedIndex();t.index(e(this).data("index")),t.select(i),r&&t.change(i),t.close(i,!0)}return!1}).bind("click.selectmenu",function(){return!1}).bind("mouseover.selectmenu focus.selectmenu",function(){t._selectedOptionLi().addClass(a),t._focusedOptionLi().removeClass(t.widgetBaseClass+"-item-focus ui-state-hover"),e(this).removeClass("ui-state-active").addClass(t.widgetBaseClass+"-item-focus ui-state-hover")}).bind("mouseout.selectmenu blur.selectmenu",function(){e(this).removeClass(t.widgetBaseClass+"-item-focus ui-state-hover")});if(o.find("a").bind("focus.selectmenu",function(){e(this).parent().mouseover()}).bind("blur.selectmenu",function(){e(this).parent().mouseout()}),r[n].parentOptGroup){var s=t.widgetBaseClass+"-group-"+r[n].parentOptGroup.replace(/[^a-zA-Z0-9]/g,"");this.list.find("li."+s).size()?this.list.find("li."+s+":last ul").append(o):e('<li role="presentation" class="'+t.widgetBaseClass+"-group "+s+'"><span class="'+t.widgetBaseClass+'-group-label">'+r[n].parentOptGroup+"</span><ul></ul></li>").appendTo(this.list).find("ul").append(o)}else o.appendTo(this.list);if(this.list.bind("mousedown.selectmenu mouseup.selectmenu",function(){return!1}),i.icons)for(var l in i.icons)if(o.is(i.icons[l].find)){o.data("optionClasses",r[n].classes+" "+t.widgetBaseClass+"-hasIcon").addClass(t.widgetBaseClass+"-hasIcon");var d=i.icons[l].icon||"";o.find("a:eq(0)").prepend('<span class="'+t.widgetBaseClass+"-item-icon ui-icon "+d+'"></span>'),r[n].bgImage&&o.find("span").css("background-image",r[n].bgImage)}}var u="dropdown"==i.style;if(this.newelement.toggleClass(t.widgetBaseClass+"-dropdown",u).toggleClass(t.widgetBaseClass+"-popup",!u),this.list.toggleClass(t.widgetBaseClass+"-menu-dropdown ui-corner-bottom",u).toggleClass(t.widgetBaseClass+"-menu-popup ui-corner-all",!u).find("li:first").toggleClass("ui-corner-top",!u).end().find("li:last").addClass("ui-corner-bottom"),this.selectmenuIcon.toggleClass("ui-icon-triangle-1-s",u).toggleClass("ui-icon-triangle-2-n-s",!u),i.transferClasses){var c=this.element.attr("class")||"";this.newelement.add(this.list).addClass(c)}var p=this.element.width();"dropdown"==i.style?this.list.width(i.menuWidth?i.menuWidth:i.width?i.width:p):this.list.width(i.menuWidth?i.menuWidth:i.width?i.width-i.handleWidth:p-i.handleWidth),i.maxHeight?i.maxHeight<this.list.height()&&this.list.height(i.maxHeight):!i.format&&e(window).height()/3<this.list.height()&&(i.maxHeight=e(window).height()/3,this.list.height(i.maxHeight)),this._optionLis=this.list.find("li:not(."+t.widgetBaseClass+"-group)"),1==this.element.attr("disabled")&&this.disable(),this.index(this._selectedIndex()),window.setTimeout(function(){t._refreshPosition()},200)},destroy:function(){this.element.removeData(this.widgetName).removeClass(this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled").removeAttr("aria-disabled").unbind(".selectmenu"),e(window).unbind(".selectmenu"),e(document).unbind(".selectmenu"),e("label[for="+this.newelement.attr("id")+"]").attr("for",this.element.attr("id")).unbind(".selectmenu"),this.options.wrapperElement?(this.newelement.find(this.options.wrapperElement).remove(),this.list.find(this.options.wrapperElement).remove()):(this.newelement.remove(),this.list.remove()),this.element.show(),e.Widget.prototype.destroy.apply(this,arguments)},_typeAhead:function(e,t){var i=this,r=String.fromCharCode(e).toLowerCase(),a=null,n=null;i._typeAhead_timer&&(window.clearTimeout(i._typeAhead_timer),i._typeAhead_timer=void 0),i._typeAhead_chars=(void 0===i._typeAhead_chars?"":i._typeAhead_chars).concat(r),i._typeAhead_chars.length<2||i._typeAhead_chars.substr(-2,1)===r&&i._typeAhead_cycling?(i._typeAhead_cycling=!0,a=r):(i._typeAhead_cycling=!1,a=i._typeAhead_chars);for(var o=("focus"!==t?this._selectedOptionLi().data("index"):this._focusedOptionLi().data("index"))||0,s=0;s<this._optionLis.length;s++){var l=this._optionLis.eq(s).text().substr(0,a.length).toLowerCase();if(l===a)if(i._typeAhead_cycling){if(null===n&&(n=s),s>o){n=s;break}}else n=s}null!==n&&this._optionLis.eq(n).find("a").trigger(t),i._typeAhead_timer=window.setTimeout(function(){i._typeAhead_timer=void 0,i._typeAhead_chars=void 0,i._typeAhead_cycling=void 0},i.options.typeAhead)},_uiHash:function(){var t=this.index();return{index:t,option:e("option",this.element).get(t),value:this.element[0].value}},open:function(e){var t=this,i=this.newelement.attr("aria-disabled");"true"!=i&&(this._refreshPosition(),this._closeOthers(e),this.newelement.addClass("ui-state-active"),this.list.addClass(t.widgetBaseClass+"-open").attr("aria-hidden",!1).find("li:not(."+t.widgetBaseClass+"-group):eq("+this._selectedIndex()+") a")[0].focus(),this._optionLis.removeClass("ui-selectmenu-item-selected ui-state-hover"),this._optionLis.eq(this.index()).addClass("ui-selectmenu-item-selected ui-state-hover"),"dropdown"==this.options.style&&this.newelement.removeClass("ui-corner-all").addClass("ui-corner-top"),this._refreshPosition(),this.list.css("z-index",this.list.css("z-index")+1),this._trigger("open",e,this._uiHash()))},close:function(e,t){this.newelement.is(".ui-state-active")&&(this.newelement.removeClass("ui-state-active"),this.list.attr("aria-hidden",!0).removeClass(this.widgetBaseClass+"-open"),"dropdown"==this.options.style&&this.newelement.removeClass("ui-corner-top").addClass("ui-corner-all"),t&&this.newelement.focus(),this._trigger("close",e,this._uiHash()))},change:function(e){this.element.trigger("change"),this._trigger("change",e,this._uiHash())},select:function(e){this._trigger("select",e,this._uiHash())},_closeOthers:function(t){e("."+this.widgetBaseClass+".ui-state-active").not(this.newelement).each(function(){e(this).data("selectelement").selectmenu("close",t)}),e("."+this.widgetBaseClass+".ui-state-hover").trigger("mouseout")},_toggle:function(e,t){this.list.is("."+this.widgetBaseClass+"-open")?this.close(e,t):this.open(e)},_formatText:function(e){return this.options.format?this.options.format(e):e},_selectedIndex:function(){return this.element[0].selectedIndex},_selectedOptionLi:function(){return this._optionLis.eq(this._selectedIndex())},_focusedOptionLi:function(){return this.list.find("."+this.widgetBaseClass+"-item-selected")},_moveSelection:function(e){var t=parseInt(this._selectedOptionLi().data("index"),10),i=t+e;return this._optionLis.eq(i).trigger("mouseup")},_moveFocus:function(e){if(isNaN(e))var t=parseInt(this._optionLis.filter(e).data("index"),10);else var i=parseInt(this._focusedOptionLi().data("index")||0,10),t=i+e;t<0&&(t=0),t>this._optionLis.size()-1&&(t=this._optionLis.size()-1);var r=this.widgetBaseClass+"-item-"+Math.round(1e3*Math.random());this._focusedOptionLi().find("a:eq(0)").attr("id",""),this._optionLis.eq(t).find("a:eq(0)").attr("id",r).focus(),this.list.attr("aria-activedescendant",r),this._focusedOptionLi().removeClass("ui-selectmenu-item-selected ui-state-hover"),this._optionLis.eq(t).addClass("ui-selectmenu-item-selected ui-state-hover"),this.index(t)},_scrollPage:function(e){var t=Math.floor(this.list.outerHeight()/this.list.find("li:first").outerHeight());t="up"==e?-t:t,this._moveFocus(t)},_setOption:function(e,t){this.options[e]=t,"disabled"==e&&(this.close(),this.element.add(this.newelement).add(this.list)[t?"addClass":"removeClass"](this.widgetBaseClass+"-disabled "+this.namespace+"-state-disabled").attr("aria-disabled",t))},index:function(e){return arguments.length?(this.element[0].selectedIndex=e,void this._refreshValue()):this._selectedIndex()},value:function(e){return arguments.length?void("number"==typeof e?this.index(e):"string"==typeof e&&(this.element[0].value=e,this._refreshValue())):this.element[0].value},_refreshValue:function(){var e="popup"==this.options.style?" ui-state-active":"",t=this.widgetBaseClass+"-item-"+Math.round(1e3*Math.random());this.list.find("."+this.widgetBaseClass+"-item-selected").removeClass(this.widgetBaseClass+"-item-selected"+e).find("a").attr("aria-selected","false").attr("id",""),this._selectedOptionLi().addClass(this.widgetBaseClass+"-item-selected"+e).find("a").attr("aria-selected","true").attr("id",t);var i=this.newelement.data("optionClasses")?this.newelement.data("optionClasses"):"",r=this._selectedOptionLi().data("optionClasses")?this._selectedOptionLi().data("optionClasses"):"";this.newelement.removeClass(i).data("optionClasses",r).addClass(r).find("."+this.widgetBaseClass+"-status").html(this._selectedOptionLi().find("a:eq(0)").html()),this.list.attr("aria-activedescendant",t)},_refreshPosition:function(){var e=this.options;if("popup"==e.style&&!e.positionOptions.offset)var t=this._selectedOptionLi(),i="0 -"+(t.outerHeight()+t.offset().top-this.list.offset().top);this.list.css({zIndex:this.element.zIndex()}).position({of:e.positionOptions.of||this.newelement,my:e.positionOptions.my,at:e.positionOptions.at,offset:e.positionOptions.offset||i})}})}(jQuery),/*
 * jQuery MultiSelect UI Widget 1.13
 * Copyright (c) 2012 Eric Hynds
 *
 * http://www.erichynds.com/jquery/jquery-ui-multiselect-widget/
 *
 * Depends:
 *   - jQuery 1.4.2+
 *   - jQuery UI 1.8 widget factory
 *
 * Optional:
 *   - jQuery UI effects
 *   - jQuery UI position utility
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 *
*/
function(e,t){var i=0;e.widget("ech.multiselect",{options:{header:!0,height:175,minWidth:225,classes:"",checkAllText:"Check all",uncheckAllText:"Uncheck all",noneSelectedText:"Select options",selectedText:"# selected",selectedList:0,show:null,hide:null,autoOpen:!1,multiple:!0,position:{}},_create:function(){var t=this.element.hide(),i=this.options;this.speed=e.fx.speeds._default,this._isOpen=!1;var r=(this.button=e('<button type="button"><span class="ui-icon ui-icon-triangle-1-s"></span></button>')).addClass("ui-multiselect ui-widget ui-state-default ui-corner-all").addClass(i.classes).attr({title:t.attr("title"),"aria-haspopup":!0,tabIndex:t.attr("tabIndex")}).insertAfter(t),a=((this.buttonlabel=e("<span />")).html(i.noneSelectedText).appendTo(r),(this.menu=e("<div />")).attr("id","rup-multiCombo_"+e(this.element).attr("id")).addClass("ui-multiselect-menu ui-widget ui-widget-content ui-corner-all").addClass(i.classes).appendTo(document.body)),n=(this.header=e("<div />")).addClass("ui-widget-header ui-corner-all ui-multiselect-header ui-helper-clearfix").appendTo(a);(this.headerLinkContainer=e("<ul />")).addClass("ui-helper-reset").html(function(){return i.header===!0?'<li><a class="ui-multiselect-all" href="#"><span class="ui-icon ui-icon-check"></span><span>'+i.checkAllText+'</span></a></li><li><a class="ui-multiselect-none" href="#"><span class="ui-icon ui-icon-closethick"></span><span>'+i.uncheckAllText+"</span></a></li>":"string"==typeof i.header?"<li>"+i.header+"</li>":""}).append('<li class="ui-multiselect-close"><a href="#" class="ui-multiselect-close"><span class="ui-icon ui-icon-circle-close"></span></a></li>').appendTo(n),(this.checkboxContainer=e("<ul />")).addClass("ui-multiselect-checkboxes ui-helper-reset").appendTo(a);this._bindEvents(),this.refresh(!0),i.multiple||a.addClass("ui-multiselect-single")},_init:function(){this.options.header===!1&&this.header.hide(),this.options.multiple||this.headerLinkContainer.find(".ui-multiselect-all, .ui-multiselect-none").hide(),this.options.autoOpen&&this.open(),this.element.is(":disabled")&&this.disable()},refresh:function(t){var r=this.element,a=this.options,n=this.menu,o=this.checkboxContainer,s=[],l="",d=r.attr("id")||i++;r.find("option").each(function(t){var i,r=(e(this),this.parentNode),n=this.innerHTML,o=this.title,u=this.value,c="ui-multiselect-"+(this.id||d+"-option-"+t),p=this.disabled,h=this.selected,f=["ui-corner-all"],g=(p?"ui-multiselect-disabled ":" ")+this.className;"OPTGROUP"===r.tagName&&(i=r.getAttribute("label"),e.inArray(i,s)===-1&&(l+='<li class="ui-multiselect-optgroup-label '+r.className+'"><a href="#">'+i+"</a></li>",s.push(i))),p&&f.push("ui-state-disabled"),h&&!a.multiple&&f.push("ui-state-active"),l+='<li class="'+g+'">',l+='<label for="'+c+'" title="'+o+'" class="'+f.join(" ")+'">',l+='<input id="'+c+'" name="multiselect_'+d+'" type="'+(a.multiple?"checkbox":"radio")+'" value="'+u+'" title="'+n+'"',h&&(l+=' checked="checked"',l+=' aria-selected="true"'),p&&(l+=' disabled="disabled"',l+=' aria-disabled="true"'),l+=" /><span>"+n+"</span></label></li>"}),o.html(l),this.labels=n.find("label"),this.inputs=this.labels.children("input"),this._setButtonWidth(),this._setMenuWidth(),this.button[0].defaultValue=this.update(),t||this._trigger("refresh")},update:function(){var t,i=this.options,r=this.inputs,a=r.filter(":checked"),n=a.length;return t=0===n?i.noneSelectedText:e.isFunction(i.selectedText)?i.selectedText.call(this,n,r.length,a.get()):/\d/.test(i.selectedList)&&i.selectedList>0&&n<=i.selectedList?a.map(function(){return e(this).next().html()}).get().join(", "):i.selectedText.replace("#",n).replace("#",r.length),this.buttonlabel.html(t),t},_bindEvents:function(){function t(){return i[i._isOpen?"close":"open"](),!1}var i=this,r=this.button;r.find("span").bind("click.multiselect",t),r.bind({click:t,keypress:function(e){switch(e.which){case 27:case 38:case 37:i.close();break;case 39:case 40:i.open()}},mouseenter:function(){r.hasClass("ui-state-disabled")||e(this).addClass("ui-state-hover")},mouseleave:function(){e(this).removeClass("ui-state-hover")},focus:function(){r.hasClass("ui-state-disabled")||e(this).addClass("ui-state-focus")},blur:function(){e(this).removeClass("ui-state-focus")}}),this.header.delegate("a","click.multiselect",function(t){e(this).hasClass("ui-multiselect-close")?i.close():i[e(this).hasClass("ui-multiselect-all")?"checkAll":"uncheckAll"](),t.preventDefault()}),this.menu.delegate("li.ui-multiselect-optgroup-label a","click.multiselect",function(t){t.preventDefault();var r=e(this),a=r.parent().nextUntil("li.ui-multiselect-optgroup-label").find("input:visible:not(:disabled)"),n=a.get(),o=r.parent().text();i._trigger("beforeoptgrouptoggle",t,{inputs:n,label:o})!==!1&&n.length&&(i._toggleChecked(a.filter(":checked").length!==a.length,a),i._trigger("optgrouptoggle",t,{inputs:n,label:o,checked:n[0].checked}))}).delegate("label","mouseenter.multiselect",function(){e(this).hasClass("ui-state-disabled")||(i.labels.removeClass("ui-state-hover"),e(this).addClass("ui-state-hover").find("input:not(:disabled)").focus())}).delegate("label","keydown.multiselect",function(t){switch(t.preventDefault(),t.which){case 9:case 27:i.close();break;case 38:case 40:case 37:case 39:i._traverse(t.which,this);break;case 13:e(this).find("input")[0].click()}}).delegate('input[type="checkbox"], input[type="radio"]',"click.multiselect",function(t){var r=e(this),a=this.value,n=this.checked,o=i.element.find("option");return this.disabled||i._trigger("click",t,{value:a,text:this.title,checked:n})===!1?void t.preventDefault():(r.focus(),r.attr("aria-selected",n),o.each(function(){this.value===a?this.selected=n:i.options.multiple||(this.selected=!1)}),i.options.multiple||(i.labels.removeClass("ui-state-active"),r.closest("label").toggleClass("ui-state-active",n),i.close()),i.element.trigger("change"),void setTimeout(e.proxy(i.update,i),10))}),e(document).bind("mousedown.multiselect",function(t){!i._isOpen||e.contains(i.menu[0],t.target)||e.contains(i.button[0],t.target)||t.target===i.button[0]||i.close()}),e(this.element[0].form).bind("reset.multiselect",function(){setTimeout(e.proxy(i.refresh,i),10)})},_setButtonWidth:function(){var e=this.element.outerWidth(),t=this.options;/\d/.test(t.minWidth)&&e<t.minWidth&&(e=t.minWidth),this.button.width(e)},_setMenuWidth:function(){var e=this.menu,t=this.button.outerWidth()-parseInt(e.css("padding-left"),10)-parseInt(e.css("padding-right"),10)-parseInt(e.css("border-right-width"),10)-parseInt(e.css("border-left-width"),10);e.width(t||this.button.outerWidth())},_traverse:function(t,i){var r=e(i),a=38===t||37===t,n=r.parent()[a?"prevAll":"nextAll"]("li:not(.ui-multiselect-disabled, .ui-multiselect-optgroup-label)")[a?"last":"first"]();if(n.length)n.find("label").trigger("mouseover");else{var o=this.menu.find("ul").last();this.menu.find("label")[a?"last":"first"]().trigger("mouseover"),o.scrollTop(a?o.height():0)}},_toggleState:function(e,t){return function(){this.disabled||(this[e]=t),t?this.setAttribute("aria-selected",!0):this.removeAttribute("aria-selected")}},_toggleChecked:function(t,i){var r=i&&i.length?i:this.labels.find("input:enabled"),a=this;r.each(this._toggleState("checked",t)),r.eq(0).focus(),this.update();var n=r.map(function(){return this.value}).get();this.element.find("option").each(function(){!this.disabled&&e.inArray(this.value,n)>-1&&a._toggleState("selected",t).call(this)}),r.length&&this.element.trigger("change")},_toggleDisabled:function(t){this.button.attr({disabled:t,"aria-disabled":t})[t?"addClass":"removeClass"]("ui-state-disabled");var i=this.menu.find("input"),r="ech-multiselect-disabled";i=t?i.filter(":enabled").data(r,!0):i.filter(function(){return e.data(this,r)===!0}).removeData(r),i.attr({disabled:t,"arial-disabled":t}).parent()[t?"addClass":"removeClass"]("ui-state-disabled"),this.element.attr({disabled:t,"aria-disabled":t})},open:function(t){var i=this,r=this.button,a=this.menu,n=this.speed,o=this.options,s=[];if(this._trigger("beforeopen")!==!1&&!r.hasClass("ui-state-disabled")&&!this._isOpen){var l=a.find("ul").last(),d=o.show,u=r.offset();e.isArray(o.show)&&(d=o.show[0],n=o.show[1]||i.speed),d&&(s=[d,n]),l.scrollTop(0).height(o.height),e.ui.position&&!e.isEmptyObject(o.position)?(o.position.of=o.position.of||r,a.show().position(o.position).hide()):a.css({top:u.top+r.outerHeight(),left:u.left}),a.show(),this.labels.eq(0).trigger("mouseover").trigger("mouseenter").find("input:enabled").trigger("focus"),r.addClass("ui-state-active"),this._isOpen=!0,this._trigger("open")}},close:function(){if(this._trigger("beforeclose")!==!1){var t=this.options,i=t.hide,r=this.speed,a=[];e.isArray(t.hide)&&(i=t.hide[0],r=t.hide[1]||this.speed),i&&(a=[i,r]),e.fn.hide.apply(this.menu,a),this.button.removeClass("ui-state-active").trigger("blur").trigger("mouseleave"),this._isOpen=!1,this._trigger("close")}},enable:function(){this._toggleDisabled(!1)},disable:function(){this._toggleDisabled(!0)},checkAll:function(e){this._toggleChecked(!0),this._trigger("checkAll")},uncheckAll:function(){this._toggleChecked(!1),this._trigger("uncheckAll")},getChecked:function(){return this.menu.find("input").filter(":checked")},destroy:function(){return e.Widget.prototype.destroy.call(this),this.button.remove(),this.menu.remove(),this.element.show(),this},isOpen:function(){return this._isOpen},widget:function(){return this.menu},getButton:function(){return this.button},_setOption:function(t,i){var r=this.menu;switch(t){case"header":r.find("div.ui-multiselect-header")[i?"show":"hide"]();break;case"checkAllText":r.find("a.ui-multiselect-all span").eq(-1).text(i);break;case"uncheckAllText":r.find("a.ui-multiselect-none span").eq(-1).text(i);break;case"height":r.find("ul").last().height(parseInt(i,10));break;case"minWidth":this.options[t]=parseInt(i,10),this._setButtonWidth(),this._setMenuWidth();break;case"selectedText":case"selectedList":case"noneSelectedText":this.options[t]=i,this.update();break;case"classes":r.add(this.button).removeClass(this.options.classes).addClass(i);break;case"multiple":r.toggleClass("ui-multiselect-single",!i),this.options.multiple=i,this.element[0].multiple=i,this.refresh()}e.Widget.prototype._setOption.apply(this,arguments)}})}(jQuery),/*
 * @license jqGrid  4.4.4  - jQuery Grid
 * Copyright (c) 2008, Tony Tomov, tony@trirand.com
 * Dual licensed under the MIT and GPL licenses
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl-2.0.html
 * Date: 2013-01-30
 */
function($){"use strict";$.jgrid=$.jgrid||{},$.extend($.jgrid,{version:"4.4.4",htmlDecode:function(e){return e&&("&nbsp;"==e||"&#160;"==e||1===e.length&&160===e.charCodeAt(0))?"":e?String(e).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&"):e},htmlEncode:function(e){return e?String(e).replace(/&/g,"&amp;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):e},format:function(e){var t=$.makeArray(arguments).slice(1);return null==e&&(e=""),e.replace(/\{(\d+)\}/g,function(e,i){return t[i]})},msie:"Microsoft Internet Explorer"==navigator.appName,msiever:function(){var e=-1,t=navigator.userAgent,i=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");return null!=i.exec(t)&&(e=parseFloat(RegExp.$1)),e},getCellIndex:function(e){var t=$(e);return t.is("tr")?-1:(t=(t.is("td")||t.is("th")?t:t.closest("td,th"))[0],$.jgrid.msie?$.inArray(t,t.parentNode.cells):t.cellIndex)},stripHtml:function(e){e=String(e);var t=/<("[^"]*"|'[^']*'|[^'">])*>/gi;return e?(e=e.replace(t,""),e&&"&nbsp;"!==e&&"&#160;"!==e?e.replace(/\"/g,"'"):""):e},stripPref:function(e,t){var i=$.type(e);return"string"!=i&&"number"!=i||(e=String(e),t=""!==e?String(t).replace(String(e),""):t),t},stringToDoc:function(e){var t;if("string"!=typeof e)return e;try{var i=new DOMParser;t=i.parseFromString(e,"text/xml")}catch(r){t=new ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.loadXML(e)}return t&&t.documentElement&&"parsererror"!=t.documentElement.tagName?t:null},parse:function(jsonString){var js=jsonString;return"while(1);"==js.substr(0,9)&&(js=js.substr(9)),"/*"==js.substr(0,2)&&(js=js.substr(2,js.length-4)),js||(js="{}"),$.jgrid.useJSON===!0&&"object"==typeof JSON&&"function"==typeof JSON.parse?JSON.parse(js):eval("("+js+")")},parseDate:function(e,t){var i,r,a,n={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},o=/[\\\/:_;.,\t\T\s-]/;if(t&&null!=t){t=$.trim(t),t=t.split(o),void 0!==$.jgrid.formatter.date.masks[e]&&(e=$.jgrid.formatter.date.masks[e]),e=e.split(o);var s=$.jgrid.formatter.date.monthNames,l=$.jgrid.formatter.date.AmPm,d=function(e,t){return 0===e?12===t&&(t=0):12!==t&&(t+=12),t};for(i=0,r=e.length;i<r;i++)"M"==e[i]&&(a=$.inArray(t[i],s),a!==-1&&a<12&&(t[i]=a+1,n.m=t[i])),"F"==e[i]&&(a=$.inArray(t[i],s),a!==-1&&a>11&&(t[i]=a+1-12,n.m=t[i])),"a"==e[i]&&(a=$.inArray(t[i],l),a!==-1&&a<2&&t[i]==l[a]&&(t[i]=a,n.h=d(t[i],n.h))),"A"==e[i]&&(a=$.inArray(t[i],l),a!==-1&&a>1&&t[i]==l[a]&&(t[i]=a-2,n.h=d(t[i],n.h))),"g"===e[i]&&(n.h=parseInt(t[i],10)),void 0!==t[i]&&(n[e[i].toLowerCase()]=parseInt(t[i],10));n.m=parseInt(n.m,10)-1;var u=n.y;u>=70&&u<=99?n.y=1900+n.y:u>=0&&u<=69&&(n.y=2e3+n.y),void 0!==n.j&&(n.d=n.j),void 0!==n.n&&(n.m=parseInt(n.n,10)-1)}return new Date(n.y,n.m,n.d,n.h,n.i,n.s,n.u)},jqID:function(e){return String(e).replace(/[!"#$%&'()*+,.\/:; <=>?@\[\\\]\^`{|}~]/g,"\\$&")},guid:1,uidPref:"jqg",randId:function(e){return(e||$.jgrid.uidPref)+$.jgrid.guid++},getAccessor:function(e,t){var i,r,a,n=[];if("function"==typeof t)return t(e);if(i=e[t],void 0===i)try{if("string"==typeof t&&(n=t.split(".")),a=n.length)for(i=e;i&&a--;)r=n.shift(),i=i[r]}catch(o){}return i},getXmlData:function(e,t,i){var r,a="string"==typeof t?t.match(/^(.*)\[(\w+)\]$/):null;return"function"==typeof t?t(e):a&&a[2]?a[1]?$(a[1],e).attr(a[2]):$(e).attr(a[2]):(r=$(t,e),i?r:r.length>0?$(r).text():void 0)},cellWidth:function(){var e=$("<div class='ui-jqgrid' style='left:10000px'><table class='ui-jqgrid-btable' style='width:5px;'><tr class='jqgrow'><td style='width:5px;'></td></tr></table></div>"),t=e.appendTo("body").find("td").width();return e.remove(),5!==t},cell_width:!0,ajaxOptions:{},from:function(source){
// License MIT http://jlinq.codeplex.com/license
var QueryObject=function(d,q){"string"==typeof d&&(d=$.data(d));var self=this,_data=d,_usecase=!0,_trim=!1,_query=q,_stripNum=/[\$,%]/g,_lastCommand=null,_lastField=null,_orDepth=0,_negate=!1,_queuedOperator="",_sorting=[],_useProperties=!0;if("object"!=typeof d||!d.push)throw"data provides is not an array";return d.length>0&&(_useProperties="object"==typeof d[0]),this._hasData=function(){return null!==_data&&0!==_data.length},this._getStr=function(e){var t=[];return _trim&&t.push("jQuery.trim("),t.push("String("+e+")"),_trim&&t.push(")"),_usecase||t.push(".toLowerCase()"),t.join("")},this._strComp=function(e){return"string"==typeof e?".toString()":""},this._group=function(e,t){return{field:e.toString(),unique:t,items:[]}},this._toStr=function(e){return _trim&&(e=$.trim(e)),e=e.toString().replace(/\\/g,"\\\\").replace(/\"/g,'\\"'),_usecase?e:e.toLowerCase()},this._funcLoop=function(e){var t=[];return $.each(_data,function(i,r){t.push(e(r))}),t},this._append=function(e){var t;for(null===_query?_query="":_query+=""===_queuedOperator?" && ":_queuedOperator,t=0;t<_orDepth;t++)_query+="(";_negate&&(_query+="!"),_query+="("+e+")",_negate=!1,_queuedOperator="",_orDepth=0},this._setCommand=function(e,t){_lastCommand=e,_lastField=t},this._resetNegate=function(){_negate=!1},this._repeatCommand=function(e,t){return null===_lastCommand?self:null!==e&&null!==t?_lastCommand(e,t):null===_lastField?_lastCommand(e):_useProperties?_lastCommand(_lastField,e):_lastCommand(e)},this._equals=function(e,t){return 0===self._compare(e,t,1)},this._compare=function(e,t,i){var r=Object.prototype.toString;return void 0===i&&(i=1),void 0===e&&(e=null),void 0===t&&(t=null),null===e&&null===t?0:null===e&&null!==t?1:null!==e&&null===t?-1:"[object Date]"===r.call(e)&&"[object Date]"===r.call(t)?e<t?-i:e>t?i:0:(_usecase||"number"==typeof e||"number"==typeof t||(e=String(e),t=String(t)),e<t?-i:e>t?i:0)},this._performSort=function(){0!==_sorting.length&&(_data=self._doSort(_data,0))},this._doSort=function(e,t){var i=_sorting[t].by,r=_sorting[t].dir,a=_sorting[t].type,n=_sorting[t].datefmt;if(t==_sorting.length-1)return self._getOrder(e,i,r,a,n);t++;var o,s,l,d=self._getGroup(e,i,r,a,n),u=[];for(o=0;o<d.length;o++)for(l=self._doSort(d[o].items,t),s=0;s<l.length;s++)u.push(l[s]);return u},this._getOrder=function(e,t,i,r,a){var n,o,s,l,d=[],u=[],c="a"==i?1:-1;void 0===r&&(r="text"),l="float"==r||"number"==r||"currency"==r||"numeric"==r?function(e){var t=parseFloat(String(e).replace(_stripNum,""));return isNaN(t)?0:t}:"int"==r||"integer"==r?function(e){return e?parseFloat(String(e).replace(_stripNum,"")):0}:"date"==r||"datetime"==r?function(e){return $.jgrid.parseDate(a,e).getTime()}:$.isFunction(r)?r:function(e){return e=e?$.trim(String(e)):"",_usecase?e:e.toLowerCase()},$.each(e,function(e,i){o=""!==t?$.jgrid.getAccessor(i,t):i,void 0===o&&(o=""),o=l(o,i),u.push({vSort:o,index:e})}),u.sort(function(e,t){return e=e.vSort,t=t.vSort,self._compare(e,t,c)}),s=0;for(var p=e.length;s<p;)n=u[s].index,d.push(e[n]),s++;return d},this._getGroup=function(e,t,i,r,a){var n,o=[],s=null,l=null;return $.each(self._getOrder(e,t,i,r,a),function(e,i){n=$.jgrid.getAccessor(i,t),null==n&&(n=""),self._equals(l,n)||(l=n,null!==s&&o.push(s),s=self._group(t,n)),s.items.push(i)}),null!==s&&o.push(s),o},this.ignoreCase=function(){return _usecase=!1,self},this.useCase=function(){return _usecase=!0,self},this.trim=function(){return _trim=!0,self},this.noTrim=function(){return _trim=!1,self},this.execute=function(){var match=_query,results=[];return null===match?self:($.each(_data,function(){eval(match)&&results.push(this)}),_data=results,self)},this.data=function(){return _data},this.select=function(e){if(self._performSort(),!self._hasData())return[];if(self.execute(),$.isFunction(e)){var t=[];return $.each(_data,function(i,r){t.push(e(r))}),t}return _data},this.hasMatch=function(){return!!self._hasData()&&(self.execute(),_data.length>0)},this.andNot=function(e,t,i){return _negate=!_negate,self.and(e,t,i)},this.orNot=function(e,t,i){return _negate=!_negate,self.or(e,t,i)},this.not=function(e,t,i){return self.andNot(e,t,i)},this.and=function(e,t,i){return _queuedOperator=" && ",void 0===e?self:self._repeatCommand(e,t,i)},this.or=function(e,t,i){return _queuedOperator=" || ",void 0===e?self:self._repeatCommand(e,t,i)},this.orBegin=function(){return _orDepth++,self},this.orEnd=function(){return null!==_query&&(_query+=")"),self},this.isNot=function(e){return _negate=!_negate,self.is(e)},this.is=function(e){return self._append("this."+e),self._resetNegate(),self},this._compareValues=function(e,t,i,r,a){var n;n=_useProperties?"jQuery.jgrid.getAccessor(this,'"+t+"')":"this",void 0===i&&(i=null);var o=i,s=void 0===a.stype?"text":a.stype;if(null!==i)switch(s){case"int":case"integer":o=isNaN(Number(o))||""===o?"0":o,n="parseInt("+n+",10)",o="parseInt("+o+",10)";break;case"float":case"number":case"numeric":o=String(o).replace(_stripNum,""),o=isNaN(Number(o))||""===o?"0":o,n="parseFloat("+n+")",o="parseFloat("+o+")";break;case"date":case"datetime":o=String($.jgrid.parseDate(a.newfmt||"Y-m-d",o).getTime()),n='jQuery.jgrid.parseDate("'+a.srcfmt+'",'+n+").getTime()";break;default:n=self._getStr(n),o=self._getStr('"'+self._toStr(o)+'"')}return self._append(n+" "+r+" "+o),self._setCommand(e,t),self._resetNegate(),self},this.equals=function(e,t,i){return self._compareValues(self.equals,e,t,"==",i)},this.notEquals=function(e,t,i){return self._compareValues(self.equals,e,t,"!==",i)},this.isNull=function(e,t,i){return self._compareValues(self.equals,e,null,"===",i)},this.greater=function(e,t,i){return self._compareValues(self.greater,e,t,">",i)},this.less=function(e,t,i){return self._compareValues(self.less,e,t,"<",i)},this.greaterOrEquals=function(e,t,i){return self._compareValues(self.greaterOrEquals,e,t,">=",i)},this.lessOrEquals=function(e,t,i){return self._compareValues(self.lessOrEquals,e,t,"<=",i)},this.startsWith=function(e,t){var i=null==t?e:t,r=_trim?$.trim(i.toString()).length:i.toString().length;return _useProperties?self._append(self._getStr("jQuery.jgrid.getAccessor(this,'"+e+"')")+".substr(0,"+r+") == "+self._getStr('"'+self._toStr(t)+'"')):(r=_trim?$.trim(t.toString()).length:t.toString().length,self._append(self._getStr("this")+".substr(0,"+r+") == "+self._getStr('"'+self._toStr(e)+'"'))),self._setCommand(self.startsWith,e),self._resetNegate(),self},this.endsWith=function(e,t){var i=null==t?e:t,r=_trim?$.trim(i.toString()).length:i.toString().length;return _useProperties?self._append(self._getStr("jQuery.jgrid.getAccessor(this,'"+e+"')")+".substr("+self._getStr("jQuery.jgrid.getAccessor(this,'"+e+"')")+".length-"+r+","+r+') == "'+self._toStr(t)+'"'):self._append(self._getStr("this")+".substr("+self._getStr("this")+'.length-"'+self._toStr(e)+'".length,"'+self._toStr(e)+'".length) == "'+self._toStr(e)+'"'),self._setCommand(self.endsWith,e),self._resetNegate(),self},this.contains=function(e,t){return _useProperties?self._append(self._getStr("jQuery.jgrid.getAccessor(this,'"+e+"')")+'.indexOf("'+self._toStr(t)+'",0) > -1'):self._append(self._getStr("this")+'.indexOf("'+self._toStr(e)+'",0) > -1'),self._setCommand(self.contains,e),self._resetNegate(),self},this.groupBy=function(e,t,i,r){return self._hasData()?self._getGroup(_data,e,t,i,r):null},this.orderBy=function(e,t,i,r){return t=null==t?"a":$.trim(t.toString().toLowerCase()),null==i&&(i="text"),null==r&&(r="Y-m-d"),"desc"!=t&&"descending"!=t||(t="d"),"asc"!=t&&"ascending"!=t||(t="a"),_sorting.push({by:e,dir:t,type:i,datefmt:r}),self},self};return new QueryObject(source,null)},getMethod:function(e){return this.getAccessor($.fn.jqGrid,e)},extend:function(e){$.extend($.fn.jqGrid,e),this.no_legacy_api||$.fn.extend(e)}}),$.fn.jqGrid=function(e){if("string"==typeof e){var t=$.jgrid.getMethod(e);if(!t)throw"jqGrid - No such method: "+e;var i=$.makeArray(arguments).slice(1);return t.apply(this,i)}return this.each(function(){if(!this.grid){var t=$.extend(!0,{url:"",height:150,page:1,rowNum:20,rowTotal:null,records:0,pager:"",pgbuttons:!0,pginput:!0,colModel:[],rowList:[],colNames:[],sortorder:"asc",sortname:"",datatype:"xml",mtype:"GET",altRows:!1,selarrrow:[],savedRow:[],shrinkToFit:!0,xmlReader:{},jsonReader:{},subGrid:!1,subGridModel:[],reccount:0,lastpage:0,lastsort:0,selrow:null,beforeSelectRow:null,onSelectRow:null,onSortCol:null,ondblClickRow:null,onRightClickRow:null,onPaging:null,onSelectAll:null,onInitGrid:null,loadComplete:null,gridComplete:null,loadError:null,loadBeforeSend:null,afterInsertRow:null,beforeRequest:null,beforeProcessing:null,onHeaderClick:null,viewrecords:!1,loadonce:!1,multiselect:!1,multikey:!1,editurl:null,search:!1,caption:"",hidegrid:!0,hiddengrid:!1,postData:{},userData:{},treeGrid:!1,treeGridModel:"nested",treeReader:{},treeANode:-1,ExpandColumn:null,tree_root_level:0,prmNames:{page:"page",rows:"rows",sort:"sidx",order:"sord",search:"_search",nd:"nd",id:"id",oper:"oper",editoper:"edit",addoper:"add",deloper:"del",subgridid:"id",npage:null,totalrows:"totalrows"},forceFit:!1,gridstate:"visible",cellEdit:!1,cellsubmit:"remote",nv:0,loadui:"enable",toolbar:[!1,""],scroll:!1,multiboxonly:!1,deselectAfterSort:!0,scrollrows:!1,autowidth:!1,scrollOffset:18,cellLayout:5,subGridWidth:20,multiselectWidth:20,gridview:!1,rownumWidth:25,rownumbers:!1,pagerpos:"center",recordpos:"right",footerrow:!1,userDataOnFooter:!1,hoverrows:!0,altclass:"ui-priority-secondary",viewsortcols:[!1,"vertical",!0],resizeclass:"",autoencode:!1,remapColumns:[],ajaxGridOptions:{},direction:"ltr",toppager:!1,headertitles:!1,scrollTimeout:40,data:[],_index:{},grouping:!1,groupingView:{groupField:[],groupOrder:[],groupText:[],groupColumnShow:[],groupSummary:[],showSummaryOnHide:!1,sortitems:[],sortnames:[],summary:[],summaryval:[],plusicon:"ui-icon-circlesmall-plus",minusicon:"ui-icon-circlesmall-minus",displayField:[]},ignoreCase:!1,cmTemplate:{},idPrefix:""},$.jgrid.defaults,e||{}),i=this,r={headers:[],cols:[],footers:[],dragStart:function(e,r,a){this.resizing={idx:e,startX:r.clientX,sOL:a[0]},this.hDiv.style.cursor="col-resize",this.curGbox=$("#rs_m"+$.jgrid.jqID(t.id),"#gbox_"+$.jgrid.jqID(t.id)),this.curGbox.css({display:"block",left:a[0],top:a[1],height:a[2]}),$(i).triggerHandler("jqGridResizeStart",[r,e]),$.isFunction(t.resizeStart)&&t.resizeStart.call(this,r,e),document.onselectstart=function(){return!1}},dragMove:function(e){if(this.resizing){var i,r,a=e.clientX-this.resizing.startX,n=this.headers[this.resizing.idx],o="ltr"===t.direction?n.width+a:n.width-a;o>33&&(this.curGbox.css({left:this.resizing.sOL+a}),t.forceFit===!0?(i=this.headers[this.resizing.idx+t.nv],r="ltr"===t.direction?i.width-a:i.width+a,r>33&&(n.newWidth=o,i.newWidth=r)):(this.newWidth="ltr"===t.direction?t.tblwidth+a:t.tblwidth-a,n.newWidth=o))}},dragEnd:function(){if(this.hDiv.style.cursor="default",this.resizing){var e=this.resizing.idx,r=this.headers[e].newWidth||this.headers[e].width;r=parseInt(r,10),this.resizing=!1,$("#rs_m"+$.jgrid.jqID(t.id)).css("display","none"),t.colModel[e].width=r,this.headers[e].width=r,this.headers[e].el.style.width=r+"px",this.cols[e].style.width=r+"px",this.footers.length>0&&(this.footers[e].style.width=r+"px"),t.forceFit===!0?(r=this.headers[e+t.nv].newWidth||this.headers[e+t.nv].width,this.headers[e+t.nv].width=r,this.headers[e+t.nv].el.style.width=r+"px",this.cols[e+t.nv].style.width=r+"px",this.footers.length>0&&(this.footers[e+t.nv].style.width=r+"px"),t.colModel[e+t.nv].width=r):(t.tblwidth=this.newWidth||t.tblwidth,$("table:first",this.bDiv).css("width",t.tblwidth+"px"),$("table:first",this.hDiv).css("width",t.tblwidth+"px"),this.hDiv.scrollLeft=this.bDiv.scrollLeft,t.footerrow&&($("table:first",this.sDiv).css("width",t.tblwidth+"px"),this.sDiv.scrollLeft=this.bDiv.scrollLeft)),$(i).triggerHandler("jqGridResizeStop",[r,e]),$.isFunction(t.resizeStop)&&t.resizeStop.call(this,r,e)}this.curGbox=null,document.onselectstart=function(){return!0}},populateVisible:function(){r.timer&&clearTimeout(r.timer),r.timer=null;var e=$(r.bDiv).height();if(e){var i,a,n=$("table:first",r.bDiv);if(n[0].rows.length)try{i=n[0].rows[1],a=i?$(i).outerHeight()||r.prevRowHeight:r.prevRowHeight}catch(o){a=r.prevRowHeight}if(a){r.prevRowHeight=a;var s,l,d,u=t.rowNum,c=r.scrollTop=r.bDiv.scrollTop,p=Math.round(n.position().top)-c,h=p+n.height(),f=a*u;if(h<e&&p<=0&&(void 0===t.lastpage||parseInt((h+c+f-1)/f,10)<=t.lastpage)&&(l=parseInt((e-h+f-1)/f,10),h>=0||l<2||t.scroll===!0?(s=Math.round((h+c)/f)+1,p=-1):p=1),p>0&&(s=parseInt(c/f,10)+1,l=parseInt((c+e)/f,10)+2-s,d=!0),l){if(t.lastpage&&(s>t.lastpage||1==t.lastpage||s===t.page&&s===t.lastpage))return;r.hDiv.loading?r.timer=setTimeout(r.populateVisible,t.scrollTimeout):(t.page=s,d&&(r.selectionPreserver(n[0]),r.emptyRows.call(n[0],!1,!1)),r.populate(l))}}}},scrollGrid:function(e){if(t.scroll){var i=r.bDiv.scrollTop;void 0===r.scrollTop&&(r.scrollTop=0),i!=r.scrollTop&&(r.scrollTop=i,r.timer&&clearTimeout(r.timer),r.timer=setTimeout(r.populateVisible,t.scrollTimeout))}r.hDiv.scrollLeft=r.bDiv.scrollLeft,t.footerrow&&(r.sDiv.scrollLeft=r.bDiv.scrollLeft),e&&e.stopPropagation()},selectionPreserver:function(e){var t=e.p,i=t.selrow,r=t.selarrrow?$.makeArray(t.selarrrow):null,a=e.grid.bDiv.scrollLeft,n=function(){var o;if(t.selrow=null,t.selarrrow=[],t.multiselect&&r&&r.length>0)for(o=0;o<r.length;o++)r[o]!=i&&$(e).jqGrid("setSelection",r[o],!1,null);i&&$(e).jqGrid("setSelection",i,!1,null),e.grid.bDiv.scrollLeft=a,$(e).unbind(".selectionPreserver",n)};$(e).bind("jqGridGridComplete.selectionPreserver",n)}};if("TABLE"!=this.tagName.toUpperCase())return void alert("Element is not a table");if(void 0!==document.documentMode&&document.documentMode<=5)return void alert("Grid can not be used in this ('quirks') mode!");$(this).empty().attr("tabindex","0"),this.p=t,this.p.useProp=!!$.fn.prop;var a,n;if(0===this.p.colNames.length)for(a=0;a<this.p.colModel.length;a++)this.p.colNames[a]=this.p.colModel[a].label||this.p.colModel[a].name;if(this.p.colNames.length!==this.p.colModel.length)return void alert($.jgrid.errors.model);var o=$("<div class='ui-jqgrid-view'></div>"),s=$.jgrid.msie;i.p.direction=$.trim(i.p.direction.toLowerCase()),$.inArray(i.p.direction,["ltr","rtl"])==-1&&(i.p.direction="ltr"),n=i.p.direction,$(o).insertBefore(this),$(this).removeClass("scroll").appendTo(o);var l=$("<div class='ui-jqgrid ui-widget ui-widget-content ui-corner-all'></div>");$(l).attr({id:"gbox_"+this.id,dir:n}).insertBefore(o),$(o).attr("id","gview_"+this.id).appendTo(l),$("<div class='ui-widget-overlay jqgrid-overlay' id='lui_"+this.id+"'></div>").insertBefore(o),$("<div class='loading ui-state-default ui-state-active' id='load_"+this.id+"'>"+this.p.loadtext+"</div>").insertBefore(o),$(this).attr({cellspacing:"0",cellpadding:"0",border:"0",role:"grid","aria-multiselectable":!!this.p.multiselect,"aria-labelledby":"gbox_"+this.id});var d=["shiftKey","altKey","ctrlKey"],u=function(e,t){return e=parseInt(e,10),isNaN(e)?t||0:e},c=function(e,t,a,n,o,s){var l,d=i.p.colModel[e],u=d.align,c='style="',p=d.classes,h=d.name,f=[];return u&&(c+="text-align:"+u+";"),d.hidden===!0&&(c+="display:none;"),0===t?c+="width: "+r.headers[e].width+"px;":d.cellattr&&$.isFunction(d.cellattr)&&(l=d.cellattr.call(i,o,a,n,d,s),l&&"string"==typeof l&&(l=l.replace(/style/i,"style").replace(/title/i,"title"),l.indexOf("title")>-1&&(d.title=!1),l.indexOf("class")>-1&&(p=void 0),f=l.split("style"),2===f.length?(f[1]=$.trim(f[1].replace("=","")),0!==f[1].indexOf("'")&&0!==f[1].indexOf('"')||(f[1]=f[1].substring(1)),c+=f[1].replace(/'/gi,'"')):c+='"')),f.length||(f[0]="",c+='"'),c+=(void 0!==p?' class="'+p+'"':"")+(d.title&&a?' title="'+$.jgrid.stripHtml(a)+'"':""),c+=' aria-describedby="'+i.p.id+"_"+h+'"',c+f[0]},p=function(e){return null==e||""===e?"&#160;":i.p.autoencode?$.jgrid.htmlEncode(e):String(e)},h=function(e,t,r,a,n){var o,s=i.p.colModel[r];if(void 0!==s.formatter){e=""!==String(i.p.idPrefix)?$.jgrid.stripPref(i.p.idPrefix,e):e;var l={rowId:e,colModel:s,gid:i.p.id,pos:r};o=$.isFunction(s.formatter)?s.formatter.call(i,t,l,a,n):$.fmatter?$.fn.fmatter.call(i,s.formatter,t,l,a,n):p(t)}else o=p(t);return o},f=function(e,t,i,r,a,n){var o,s;return o=h(e,t,i,a,"add"),s=c(i,r,o,a,e,n),'<td role="gridcell" '+s+">"+o+"</td>"},g=function(e,t,r,a){var n='<input role="checkbox" type="checkbox" id="jqg_'+i.p.id+"_"+e+'" class="cbox" name="jqg_'+i.p.id+"_"+e+'"'+(a?'checked="checked"':"")+"/>",o=c(t,r,"",null,e,!0);return'<td role="gridcell" '+o+">"+n+"</td>"},m=function(e,t,i,r){var a=(parseInt(i,10)-1)*parseInt(r,10)+1+t,n=c(e,t,a,null,t,!0);return'<td role="gridcell" class="ui-state-default jqgrid-rownum" '+n+">"+a+"</td>"},v=function(e){var t,r,a=[],n=0;for(r=0;r<i.p.colModel.length;r++)t=i.p.colModel[r],"cb"!==t.name&&"subgrid"!==t.name&&"rn"!==t.name&&(a[n]="local"==e?t.name:"xml"==e||"xmlstring"===e?t.xmlmap||t.name:t.jsonmap||t.name,n++);return a},b=function(e){var t=i.p.remapColumns;return t&&t.length||(t=$.map(i.p.colModel,function(e,t){return t})),e&&(t=$.map(t,function(t){return t<e?null:t-e})),t},_=function(e,t){var i;this.p.deepempty?$(this.rows).slice(1).remove():(i=this.rows.length>0?this.rows[0]:null,$(this.firstChild).empty().append(i)),e&&this.p.scroll&&($(this.grid.bDiv.firstChild).css({height:"auto"}),$(this.grid.bDiv.firstChild.firstChild).css({height:0,display:"none"}),0!==this.grid.bDiv.scrollTop&&(this.grid.bDiv.scrollTop=0)),t===!0&&this.p.treeGrid&&(this.p.data=[],this.p._index={})},y=function(){var e,t,r,a=i.p.data.length,n=i.p.rownumbers===!0?1:0,o=i.p.multiselect===!0?1:0,s=i.p.subGrid===!0?1:0;for(e=i.p.keyIndex===!1||i.p.loadonce===!0?i.p.localReader.id:i.p.colModel[i.p.keyIndex+o+s+n].name,t=0;t<a;t++)r=$.jgrid.getAccessor(i.p.data[t],e),void 0===r&&(r=String(t+1)),i.p._index[r]=t},x=function(e,t,r,a,n,o){var s,l="-1",d="",u=t?"display:none;":"",c="ui-widget-content jqgrow ui-row-"+i.p.direction+r+(o?" ui-state-highlight":""),p=$.isFunction(i.p.rowattr)?i.p.rowattr.call(i,a,n):{};if(!$.isEmptyObject(p)){p.hasOwnProperty("id")&&(e=p.id,delete p.id),p.hasOwnProperty("tabindex")&&(l=p.tabindex,delete p.tabindex),p.hasOwnProperty("style")&&(u+=p.style,delete p.style),p.hasOwnProperty("class")&&(c+=" "+p["class"],delete p["class"]);try{delete p.role}catch(h){}for(s in p)p.hasOwnProperty(s)&&(d+=" "+s+"="+p[s])}return'<tr role="row" id="'+e+'" tabindex="'+l+'" class="'+c+'"'+(""===u?"":' style="'+u+'"')+d+">"},w=function(e,t,r,a,n){var o=new Date,s="local"!=i.p.datatype&&i.p.loadonce||"xmlstring"==i.p.datatype,l="_id_",d=i.p.xmlReader,u="local"==i.p.datatype?"local":"xml";if(s&&(i.p.data=[],i.p._index={},i.p.localReader.id=l),i.p.reccount=0,$.isXMLDoc(e)){i.p.treeANode!==-1||i.p.scroll?r=r>1?r:1:(_.call(i,!1,!0),r=1);var c,p,h,y,w,j,k,C,D,S,T=$(i),P=0,I=i.p.multiselect===!0?1:0,F=0,M=i.p.rownumbers===!0?1:0,A=[],E={},q=[],O=i.p.altRows===!0?" "+i.p.altclass:"";i.p.subGrid===!0&&(F=1,y=$.jgrid.getMethod("addSubGridCell")),d.repeatitems||(A=v(u)),w=i.p.keyIndex===!1?$.isFunction(d.id)?d.id.call(i,e):d.id:i.p.keyIndex,A.length>0&&!isNaN(w)&&(i.p.remapColumns&&i.p.remapColumns.length&&(w=$.inArray(w,i.p.remapColumns)),w=A[w]),j=String(w).indexOf("[")===-1?A.length?function(e,t){return $(w,e).text()||t}:function(e,t){return $(d.cell,e).eq(w).text()||t}:function(e,t){return e.getAttribute(w.replace(/[\[\]]/g,""))||t},i.p.userData={},i.p.page=$.jgrid.getXmlData(e,d.page)||i.p.page||0,i.p.lastpage=$.jgrid.getXmlData(e,d.total),void 0===i.p.lastpage&&(i.p.lastpage=1),i.p.records=$.jgrid.getXmlData(e,d.records)||0,$.isFunction(d.userdata)?i.p.userData=d.userdata.call(i,e)||{}:$.jgrid.getXmlData(e,d.userdata,!0).each(function(){i.p.userData[this.getAttribute("name")]=$(this).text()});var R=$.jgrid.getXmlData(e,d.root,!0);R=$.jgrid.getXmlData(R,d.row,!0),R||(R=[]);var N,G=R.length,L=0,z=[],Q=parseInt(i.p.rowNum,10),H=i.p.scroll?$.jgrid.randId():1;if(G>0&&i.p.page<=0&&(i.p.page=1),R&&G){n&&(Q*=n+1);var B,W=$.isFunction(i.p.afterInsertRow),U=!1;for(i.p.grouping&&(U=i.p.groupingView.groupCollapse===!0,B=$.jgrid.getMethod("groupingPrepare"));L<G;){C=R[L],D=j(C,H+L),D=i.p.idPrefix+D,N=0===r?0:r+1,S=(N+L)%2==1?O:"";var V=q.length;if(q.push(""),M&&q.push(m(0,L,i.p.page,i.p.rowNum)),I&&q.push(g(D,M,L,!1)),F&&q.push(y.call(T,I+M,L+r)),d.repeatitems){k||(k=b(I+F+M));var K=$.jgrid.getXmlData(C,d.cell,!0);$.each(k,function(e){var t=K[this];return!!t&&(h=t.textContent||t.text,E[i.p.colModel[e+I+F+M].name]=h,void q.push(f(D,h,e+I+F+M,L+r,C,E)))})}else for(c=0;c<A.length;c++)h=$.jgrid.getXmlData(C,A[c]),E[i.p.colModel[c+I+F+M].name]=h,q.push(f(D,h,c+I+F+M,L+r,C,E));if(q[V]=x(D,U,S,E,C,!1),q.push("</tr>"),i.p.grouping&&(z=B.call(T,q,z,E,L),q=[]),(s||i.p.treeGrid===!0)&&(E[l]=D,i.p.data.push(E),i.p._index[D]=i.p.data.length-1),i.p.gridview===!1&&($("tbody:first",t).append(q.join("")),T.triggerHandler("jqGridAfterInsertRow",[D,E,C]),W&&i.p.afterInsertRow.call(i,D,E,C),q=[]),E={},P++,L++,P==Q)break}}if(i.p.gridview===!0&&(p=i.p.treeANode>-1?i.p.treeANode:0,i.p.grouping?(T.jqGrid("groupingRender",z,i.p.colModel.length),z=null):i.p.treeGrid===!0&&p>0?$(i.rows[p]).after(q.join("")):$("tbody:first",t).append(q.join(""))),i.p.subGrid===!0)try{T.jqGrid("addSubGrid",I+M)}catch(X){}if(i.p.totaltime=new Date-o,P>0&&0===i.p.records&&(i.p.records=G),q=null,i.p.treeGrid===!0)try{T.jqGrid("setTreeNode",p+1,P+p+1)}catch(Y){}if(i.p.treeGrid||i.p.scroll||(i.grid.bDiv.scrollTop=0),i.p.reccount=P,i.p.treeANode=-1,i.p.userDataOnFooter&&T.jqGrid("footerData","set",i.p.userData,!0),s&&(i.p.records=G,i.p.lastpage=Math.ceil(G/Q)),a||i.updatepager(!1,!0),s)for(;P<G;){if(C=R[P],D=j(C,P+H),D=i.p.idPrefix+D,d.repeatitems){k||(k=b(I+F+M));var J=$.jgrid.getXmlData(C,d.cell,!0);$.each(k,function(e){var t=J[this];return!!t&&(h=t.textContent||t.text,void(E[i.p.colModel[e+I+F+M].name]=h))})}else for(c=0;c<A.length;c++)h=$.jgrid.getXmlData(C,A[c]),E[i.p.colModel[c+I+F+M].name]=h;E[l]=D,i.p.data.push(E),i.p._index[D]=i.p.data.length-1,E={},P++}}},j=function(e,t,r,a,n){var o=new Date;if(e){i.p.treeANode!==-1||i.p.scroll?r=r>1?r:1:(_.call(i,!1,!0),r=1);var s,l,d="_id_",u="local"!=i.p.datatype&&i.p.loadonce||"jsonstring"==i.p.datatype;u&&(i.p.data=[],i.p._index={},i.p.localReader.id=d),i.p.reccount=0,"local"==i.p.datatype?(s=i.p.localReader,l="local"):(s=i.p.jsonReader,l="json");var c,p,h,y,w,j,k,C,D,S,T,P,I,F=$(i),M=0,A=[],E=i.p.multiselect?1:0,q=0,O=i.p.rownumbers===!0?1:0,R={},N=[],G=i.p.altRows===!0?" "+i.p.altclass:"";i.p.page=$.jgrid.getAccessor(e,s.page)||i.p.page||0,I=$.jgrid.getAccessor(e,s.total),i.p.subGrid===!0&&(q=1,j=$.jgrid.getMethod("addSubGridCell")),i.p.lastpage=void 0===I?1:I,i.p.records=$.jgrid.getAccessor(e,s.records)||0,i.p.userData=$.jgrid.getAccessor(e,s.userdata)||{},s.repeatitems||(y=A=v(l)),D=i.p.keyIndex===!1?$.isFunction(s.id)?s.id.call(i,e):s.id:i.p.keyIndex,A.length>0&&!isNaN(D)&&(i.p.remapColumns&&i.p.remapColumns.length&&(D=$.inArray(D,i.p.remapColumns)),D=A[D]),C=$.jgrid.getAccessor(e,s.root),C||(C=[]),k=C.length,p=0,k>0&&i.p.page<=0&&(i.p.page=1);var L,z,Q=parseInt(i.p.rowNum,10),H=i.p.scroll?$.jgrid.randId():1,B=!1;n&&(Q*=n+1),"local"!==i.p.datatype||i.p.deselectAfterSort||(B=!0);var W,U=$.isFunction(i.p.afterInsertRow),V=[],K=!1;for(i.p.grouping&&(K=i.p.groupingView.groupCollapse===!0,W=$.jgrid.getMethod("groupingPrepare"));p<k;){if(w=C[p],T=$.jgrid.getAccessor(w,D),void 0===T&&(T=H+p,0===A.length&&s.cell)){var X=$.jgrid.getAccessor(w,s.cell);T=void 0!==X?X[D]||T:T,X=null}T=i.p.idPrefix+T,L=1===r?0:r,P=(L+p)%2==1?G:"",B&&(z=i.p.multiselect?$.inArray(T,i.p.selarrrow)!==-1:T===i.p.selrow);var Y=N.length;for(N.push(""),O&&N.push(m(0,p,i.p.page,i.p.rowNum)),E&&N.push(g(T,O,p,z)),q&&N.push(j.call(F,E+O,p+r)),s.repeatitems&&(s.cell&&(w=$.jgrid.getAccessor(w,s.cell)),y||(y=b(E+q+O))),h=0;h<y.length;h++)c=$.jgrid.getAccessor(w,y[h]),R[i.p.colModel[h+E+q+O].name]=c,N.push(f(T,c,h+E+q+O,p+r,w,R));if(N[Y]=x(T,K,P,R,w,z),N.push("</tr>"),i.p.grouping&&(V=W.call(F,N,V,R,p),N=[]),(u||i.p.treeGrid===!0)&&(R[d]=T,i.p.data.push(R),i.p._index[T]=i.p.data.length-1),i.p.gridview===!1&&($("#"+$.jgrid.jqID(i.p.id)+" tbody:first").append(N.join("")),F.triggerHandler("jqGridAfterInsertRow",[T,R,w]),U&&i.p.afterInsertRow.call(i,T,R,w),N=[]),R={},M++,p++,M==Q)break}if(i.p.gridview===!0&&(S=i.p.treeANode>-1?i.p.treeANode:0,i.p.grouping?(F.jqGrid("groupingRender",V,i.p.colModel.length),V=null):i.p.treeGrid===!0&&S>0?$(i.rows[S]).after(N.join("")):$("#"+$.jgrid.jqID(i.p.id)+" tbody:first").append(N.join(""))),i.p.subGrid===!0)try{F.jqGrid("addSubGrid",E+O)}catch(J){}if(i.p.totaltime=new Date-o,M>0&&0===i.p.records&&(i.p.records=k),N=null,i.p.treeGrid===!0)try{F.jqGrid("setTreeNode",S+1,M+S+1)}catch(Z){}if(i.p.treeGrid||i.p.scroll||(i.grid.bDiv.scrollTop=0),i.p.reccount=M,i.p.treeANode=-1,i.p.userDataOnFooter&&F.jqGrid("footerData","set",i.p.userData,!0),u&&(i.p.records=k,i.p.lastpage=Math.ceil(k/Q)),a||i.updatepager(!1,!0),u)for(;M<k&&C[M];){if(w=C[M],T=$.jgrid.getAccessor(w,D),void 0===T&&(T=H+M,0===A.length&&s.cell)){var ee=$.jgrid.getAccessor(w,s.cell);T=ee[D]||T,ee=null}if(w){for(T=i.p.idPrefix+T,s.repeatitems&&(s.cell&&(w=$.jgrid.getAccessor(w,s.cell)),y||(y=b(E+q+O))),h=0;h<y.length;h++)c=$.jgrid.getAccessor(w,y[h]),R[i.p.colModel[h+E+q+O].name]=c;R[d]=T,i.p.data.push(R),i.p._index[T]=i.p.data.length-1,R={}}M++}}},k=function(){function e(t){var i,r,a,n,o,l=0;if(null!=t.groups){for(r=t.groups.length&&"OR"===t.groupOp.toString().toUpperCase(),r&&f.orBegin(),i=0;i<t.groups.length;i++){l>0&&r&&f.or();try{e(t.groups[i])}catch(d){alert(d)}l++}r&&f.orEnd()}if(null!=t.rules)try{for(a=t.rules.length&&"OR"===t.groupOp.toString().toUpperCase(),a&&f.orBegin(),i=0;i<t.rules.length;i++)o=t.rules[i],n=t.groupOp.toString().toUpperCase(),h[o.op]&&o.field&&(l>0&&n&&"OR"===n&&(f=f.or()),f=h[o.op](f,n)(o.field,o.data,s[o.field])),l++;a&&f.orEnd()}catch(u){alert(u)}}var t,r,a,n,o=!1,s={},l=[],d=[];if($.isArray(i.p.data)){var u,c,p=!!i.p.grouping&&i.p.groupingView;if($.each(i.p.colModel,function(){if(a=this.sorttype||"text","date"==a||"datetime"==a?(this.formatter&&"string"==typeof this.formatter&&"date"==this.formatter?(r=this.formatoptions&&this.formatoptions.srcformat?this.formatoptions.srcformat:$.jgrid.formatter.date.srcformat,n=this.formatoptions&&this.formatoptions.newformat?this.formatoptions.newformat:$.jgrid.formatter.date.newformat):r=n=this.datefmt||"Y-m-d",s[this.name]={stype:a,srcfmt:r,newfmt:n}):s[this.name]={stype:a,srcfmt:"",newfmt:""},i.p.grouping)for(c=0,u=p.groupField.length;c<u;c++)if(this.name==p.groupField[c]){var e=this.name;this.index&&(e=this.index),l[c]=s[e],d[c]=e}o||this.index!=i.p.sortname&&this.name!=i.p.sortname||(t=this.name,o=!0)}),i.p.treeGrid)return void $(i).jqGrid("SortTree",t,i.p.sortorder,s[t].stype,s[t].srcfmt);var h={eq:function(e){return e.equals},ne:function(e){return e.notEquals},lt:function(e){return e.less},le:function(e){return e.lessOrEquals},gt:function(e){return e.greater},ge:function(e){return e.greaterOrEquals},cn:function(e){return e.contains},nc:function(e,t){return"OR"===t?e.orNot().contains:e.andNot().contains},bw:function(e){return e.startsWith},bn:function(e,t){return"OR"===t?e.orNot().startsWith:e.andNot().startsWith},en:function(e,t){return"OR"===t?e.orNot().endsWith:e.andNot().endsWith},ew:function(e){return e.endsWith},ni:function(e,t){return"OR"===t?e.orNot().equals:e.andNot().equals},"in":function(e){return e.equals},nu:function(e){return e.isNull},nn:function(e,t){return"OR"===t?e.orNot().isNull:e.andNot().isNull}},f=$.jgrid.from(i.p.data);if(i.p.ignoreCase&&(f=f.ignoreCase()),i.p.search===!0){var g=i.p.postData.filters;if(g)"string"==typeof g&&(g=$.jgrid.parse(g)),e(g);else try{f=h[i.p.postData.searchOper](f)(i.p.postData.searchField,i.p.postData.searchString,s[i.p.postData.searchField])}catch(m){}}if(i.p.grouping)for(c=0;c<u;c++)f.orderBy(d[c],p.groupOrder[c],l[c].stype,l[c].srcfmt);t&&i.p.sortorder&&o&&("DESC"==i.p.sortorder.toUpperCase()?f.orderBy(i.p.sortname,"d",s[t].stype,s[t].srcfmt):f.orderBy(i.p.sortname,"a",s[t].stype,s[t].srcfmt));var v=f.select(),b=parseInt(i.p.rowNum,10),_=v.length,y=parseInt(i.p.page,10),x=Math.ceil(_/b),w={};return v=v.slice((y-1)*b,y*b),f=null,s=null,w[i.p.localReader.total]=x,w[i.p.localReader.page]=y,w[i.p.localReader.records]=_,w[i.p.localReader.root]=v,w[i.p.localReader.userdata]=i.p.userData,v=null,w}},C=function(e,t){var r,a,n,o,s,l,d,c,p="",h=i.p.pager?"_"+$.jgrid.jqID(i.p.pager.substr(1)):"",f=i.p.toppager?"_"+i.p.toppager.substr(1):"";if(n=parseInt(i.p.page,10)-1,n<0&&(n=0),n*=parseInt(i.p.rowNum,10),s=n+i.p.reccount,i.p.scroll){var g=$("tbody:first > tr:gt(0)",i.grid.bDiv);n=s-g.length,i.p.reccount=g.length;var m=g.outerHeight()||i.grid.prevRowHeight;if(m){var v=n*m,b=parseInt(i.p.records,10)*m;$(">div:first",i.grid.bDiv).css({height:b}).children("div:first").css({height:v,display:v?"":"none"})}i.grid.bDiv.scrollLeft=i.grid.hDiv.scrollLeft}p=i.p.pager||"",p+=i.p.toppager?p?","+i.p.toppager:i.p.toppager:"",p&&(d=$.jgrid.formatter.integer||{},r=u(i.p.page),a=u(i.p.lastpage),$(".selbox",p)[this.p.useProp?"prop":"attr"]("disabled",!1),i.p.pginput===!0&&($(".ui-pg-input",p).val(i.p.page),c=i.p.toppager?"#sp_1"+h+",#sp_1"+f:"#sp_1"+h,$(c).html($.fmatter?$.fmatter.util.NumberFormat(i.p.lastpage,d):i.p.lastpage)),i.p.viewrecords&&(0===i.p.reccount?$(".ui-paging-info",p).html(i.p.emptyrecords):(o=n+1,l=i.p.records,$.fmatter&&(o=$.fmatter.util.NumberFormat(o,d),s=$.fmatter.util.NumberFormat(s,d),l=$.fmatter.util.NumberFormat(l,d)),$(".ui-paging-info",p).html($.jgrid.format(i.p.recordtext,o,s,l)))),i.p.pgbuttons===!0&&(r<=0&&(r=a=0),1==r||0===r?($("#first"+h+", #prev"+h).addClass("ui-state-disabled").removeClass("ui-state-hover"),i.p.toppager&&$("#first_t"+f+", #prev_t"+f).addClass("ui-state-disabled").removeClass("ui-state-hover")):($("#first"+h+", #prev"+h).removeClass("ui-state-disabled"),i.p.toppager&&$("#first_t"+f+", #prev_t"+f).removeClass("ui-state-disabled")),r==a||0===r?($("#next"+h+", #last"+h).addClass("ui-state-disabled").removeClass("ui-state-hover"),i.p.toppager&&$("#next_t"+f+", #last_t"+f).addClass("ui-state-disabled").removeClass("ui-state-hover")):($("#next"+h+", #last"+h).removeClass("ui-state-disabled"),i.p.toppager&&$("#next_t"+f+", #last_t"+f).removeClass("ui-state-disabled")))),e===!0&&i.p.rownumbers===!0&&$("td.jqgrid-rownum",i.rows).each(function(e){$(this).html(n+1+e)}),t&&i.p.jqgdnd&&$(i).jqGrid("gridDnD","updateDnD"),$(i).triggerHandler("jqGridGridComplete"),$.isFunction(i.p.gridComplete)&&i.p.gridComplete.call(i),$(i).triggerHandler("jqGridAfterGridComplete")},D=function(){if(i.grid.hDiv.loading=!0,!i.p.hiddengrid)switch(i.p.loadui){case"disable":break;case"enable":$("#load_"+$.jgrid.jqID(i.p.id)).show();break;case"block":$("#lui_"+$.jgrid.jqID(i.p.id)).show(),$("#load_"+$.jgrid.jqID(i.p.id)).show()}},S=function(){switch(i.grid.hDiv.loading=!1,i.p.loadui){case"disable":break;case"enable":$("#load_"+$.jgrid.jqID(i.p.id)).hide();break;case"block":$("#lui_"+$.jgrid.jqID(i.p.id)).hide(),$("#load_"+$.jgrid.jqID(i.p.id)).hide()}},T=function(e){if(!i.grid.hDiv.loading){var t,r,a=i.p.scroll&&e===!1,n={},o=i.p.prmNames;i.p.page<=0&&(i.p.page=1),null!==o.search&&(n[o.search]=i.p.search),null!==o.nd&&(n[o.nd]=(new Date).getTime()),null!==o.rows&&(n[o.rows]=i.p.rowNum),null!==o.page&&(n[o.page]=i.p.page),null!==o.sort&&(n[o.sort]=i.p.sortname),null!==o.order&&(n[o.order]=i.p.sortorder),null!==i.p.rowTotal&&null!==o.totalrows&&(n[o.totalrows]=i.p.rowTotal);var s=$.isFunction(i.p.loadComplete),l=s?i.p.loadComplete:null,d=0;if(e=e||1,e>1?null!==o.npage?(n[o.npage]=e,d=e-1,e=1):l=function(t){i.p.page++,i.grid.hDiv.loading=!1,s&&i.p.loadComplete.call(i,t),T(e-1)}:null!==o.npage&&delete i.p.postData[o.npage],i.p.grouping){$(i).jqGrid("groupingSetup");var u,c=i.p.groupingView,p="";for(u=0;u<c.groupField.length;u++){var h=c.groupField[u];$.each(i.p.colModel,function(e,t){t.name==h&&t.index&&(h=t.index)}),p+=h+" "+c.groupOrder[u]+", "}n[o.sort]=p+n[o.sort]}$.extend(i.p.postData,n);var f=i.p.scroll?i.rows.length-1:1,g=$(i).triggerHandler("jqGridBeforeRequest");
if(g===!1||"stop"===g)return;if($.isFunction(i.p.datatype))return void i.p.datatype.call(i,i.p.postData,"load_"+i.p.id);if($.isFunction(i.p.beforeRequest)&&(g=i.p.beforeRequest.call(i),void 0===g&&(g=!0),g===!1))return;switch(t=i.p.datatype.toLowerCase()){case"json":case"jsonp":case"xml":case"script":$.ajax($.extend({url:i.p.url,type:i.p.mtype,dataType:t,data:$.isFunction(i.p.serializeGridData)?i.p.serializeGridData.call(i,i.p.postData):i.p.postData,success:function(r,n,o){return $.isFunction(i.p.beforeProcessing)&&i.p.beforeProcessing.call(i,r,n,o)===!1?void S():("xml"===t?w(r,i.grid.bDiv,f,e>1,d):j(r,i.grid.bDiv,f,e>1,d),$(i).triggerHandler("jqGridLoadComplete",[r]),l&&l.call(i,r),$(i).triggerHandler("jqGridAfterLoadComplete",[r]),a&&i.grid.populateVisible(),(i.p.loadonce||i.p.treeGrid)&&(i.p.datatype="local"),r=null,void(1===e&&S()))},error:function(t,r,a){$.isFunction(i.p.loadError)&&i.p.loadError.call(i,t,r,a),1===e&&S(),t=null},beforeSend:function(e,t){var r=!0;return $.isFunction(i.p.loadBeforeSend)&&(r=i.p.loadBeforeSend.call(i,e,t)),void 0===r&&(r=!0),r!==!1&&void D()}},$.jgrid.ajaxOptions,i.p.ajaxGridOptions));break;case"xmlstring":D(),r=$.jgrid.stringToDoc(i.p.datastr),w(r,i.grid.bDiv),$(i).triggerHandler("jqGridLoadComplete",[r]),s&&i.p.loadComplete.call(i,r),$(i).triggerHandler("jqGridAfterLoadComplete",[r]),i.p.datatype="local",i.p.datastr=null,S();break;case"jsonstring":D(),r="string"==typeof i.p.datastr?$.jgrid.parse(i.p.datastr):i.p.datastr,j(r,i.grid.bDiv),$(i).triggerHandler("jqGridLoadComplete",[r]),s&&i.p.loadComplete.call(i,r),$(i).triggerHandler("jqGridAfterLoadComplete",[r]),i.p.datatype="local",i.p.datastr=null,S();break;case"local":case"clientside":D(),i.p.datatype="local";var m=k();j(m,i.grid.bDiv,f,e>1,d),$(i).triggerHandler("jqGridLoadComplete",[m]),l&&l.call(i,m),$(i).triggerHandler("jqGridAfterLoadComplete",[m]),a&&i.grid.populateVisible(),S()}}},P=function(e){$("#cb_"+$.jgrid.jqID(i.p.id),i.grid.hDiv)[i.p.useProp?"prop":"attr"]("checked",e);var t=i.p.frozenColumns?i.p.id+"_frozen":"";t&&$("#cb_"+$.jgrid.jqID(i.p.id),i.grid.fhDiv)[i.p.useProp?"prop":"attr"]("checked",e)},I=function(e,t){var r,a,o,s,l,d,c,p="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>",h="",f="<table cellspacing='0' cellpadding='0' border='0' style='table-layout:auto;' class='ui-pg-table'><tbody><tr>",g="",m=function(e){var t;return $.isFunction(i.p.onPaging)&&(t=i.p.onPaging.call(i,e)),i.p.selrow=null,i.p.multiselect&&(i.p.selarrrow=[],P(!1)),i.p.savedRow=[],"stop"!=t};if(e=e.substr(1),t+="_"+e,r="pg_"+e,a=e+"_left",o=e+"_center",s=e+"_right",$("#"+$.jgrid.jqID(e)).append("<div id='"+r+"' class='ui-pager-control' role='group'><table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table' style='width:100%;table-layout:fixed;height:100%;' role='row'><tbody><tr><td id='"+a+"' align='left'></td><td id='"+o+"' align='center' style='white-space:pre;'></td><td id='"+s+"' align='right'></td></tr></tbody></table></div>").attr("dir","ltr"),i.p.rowList.length>0){for(g="<td dir='"+n+"'>",g+="<select class='ui-pg-selbox' role='listbox'>",c=0;c<i.p.rowList.length;c++)g+='<option role="option" value="'+i.p.rowList[c]+'"'+(i.p.rowNum==i.p.rowList[c]?' selected="selected"':"")+">"+i.p.rowList[c]+"</option>";g+="</select></td>"}if("rtl"==n&&(f+=g),i.p.pginput===!0&&(h="<td dir='"+n+"'>"+$.jgrid.format(i.p.pgtext||"","<input class='ui-pg-input' type='text' size='2' maxlength='7' value='0' role='textbox'/>","<span id='sp_1_"+$.jgrid.jqID(e)+"'></span>")+"</td>"),i.p.pgbuttons===!0){var v=["first"+t,"prev"+t,"next"+t,"last"+t];"rtl"==n&&v.reverse(),f+="<td id='"+v[0]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-first'></span></td>",f+="<td id='"+v[1]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-prev'></span></td>",f+=""!==h?p+h+p:"",f+="<td id='"+v[2]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-next'></span></td>",f+="<td id='"+v[3]+"' class='ui-pg-button ui-corner-all'><span class='ui-icon ui-icon-seek-end'></span></td>"}else""!==h&&(f+=h);"ltr"==n&&(f+=g),f+="</tr></tbody></table>",i.p.viewrecords===!0&&$("td#"+e+"_"+i.p.recordpos,"#"+r).append("<div dir='"+n+"' style='text-align:"+i.p.recordpos+"' class='ui-paging-info'></div>"),$("td#"+e+"_"+i.p.pagerpos,"#"+r).append(f),d=$(".ui-jqgrid").css("font-size")||"11px",$(document.body).append("<div id='testpg' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+d+";visibility:hidden;' ></div>"),l=$(f).clone().appendTo("#testpg").width(),$("#testpg").remove(),l>0&&(""!==h&&(l+=50),$("td#"+e+"_"+i.p.pagerpos,"#"+r).width(l)),i.p._nvtd=[],i.p._nvtd[0]=l?Math.floor((i.p.width-l)/2):Math.floor(i.p.width/3),i.p._nvtd[1]=0,f=null,$(".ui-pg-selbox","#"+r).bind("change",function(){return!!m("records")&&(i.p.page=Math.round(i.p.rowNum*(i.p.page-1)/this.value-.5)+1,i.p.rowNum=this.value,i.p.pager&&$(".ui-pg-selbox",i.p.pager).val(this.value),i.p.toppager&&$(".ui-pg-selbox",i.p.toppager).val(this.value),T(),!1)}),i.p.pgbuttons===!0&&($(".ui-pg-button","#"+r).hover(function(){$(this).hasClass("ui-state-disabled")?this.style.cursor="default":($(this).addClass("ui-state-hover"),this.style.cursor="pointer")},function(){$(this).hasClass("ui-state-disabled")||($(this).removeClass("ui-state-hover"),this.style.cursor="default")}),$("#first"+$.jgrid.jqID(t)+", #prev"+$.jgrid.jqID(t)+", #next"+$.jgrid.jqID(t)+", #last"+$.jgrid.jqID(t)).click(function(){var e=u(i.p.page,1),r=u(i.p.lastpage,1),a=!1,n=!0,o=!0,s=!0,l=!0;return 0===r||1===r?(n=!1,o=!1,s=!1,l=!1):r>1&&e>=1?1===e?(n=!1,o=!1):e===r&&(s=!1,l=!1):r>1&&0===e&&(s=!1,l=!1,e=r-1),!!m(this.id)&&(this.id==="first"+t&&n&&(i.p.page=1,a=!0),this.id==="prev"+t&&o&&(i.p.page=e-1,a=!0),this.id==="next"+t&&s&&(i.p.page=e+1,a=!0),this.id==="last"+t&&l&&(i.p.page=r,a=!0),a&&T(),!1)})),i.p.pginput===!0&&$("input.ui-pg-input","#"+r).keypress(function(e){var t=e.charCode||e.keyCode||0;return 13==t?!!m("user")&&(i.p.page=$(this).val()>0?$(this).val():i.p.page,T(),!1):this})},F=function(e,t,r,a){if(i.p.colModel[t].sortable){var n;if(!(i.p.savedRow.length>0)){if(r||(i.p.lastsort==t?"asc"==i.p.sortorder?i.p.sortorder="desc":"desc"==i.p.sortorder&&(i.p.sortorder="asc"):i.p.sortorder=i.p.colModel[t].firstsortorder||"asc",i.p.page=1),a){if(i.p.lastsort==t&&i.p.sortorder==a&&!r)return;i.p.sortorder=a}var o=i.grid.headers[i.p.lastsort].el,s=i.grid.headers[t].el;if($("span.ui-grid-ico-sort",o).addClass("ui-state-disabled"),$(o).attr("aria-selected","false"),$("span.ui-icon-"+i.p.sortorder,s).removeClass("ui-state-disabled"),$(s).attr("aria-selected","true"),i.p.viewsortcols[0]||i.p.lastsort!=t&&($("span.s-ico",o).hide(),$("span.s-ico",s).show()),e=e.substring(5+i.p.id.length+1),i.p.sortname=i.p.colModel[t].index||e,n=i.p.sortorder,"stop"===$(i).triggerHandler("jqGridSortCol",[e,t,n]))return void(i.p.lastsort=t);if($.isFunction(i.p.onSortCol)&&"stop"==i.p.onSortCol.call(i,e,t,n))return void(i.p.lastsort=t);if("local"==i.p.datatype?i.p.deselectAfterSort&&$(i).jqGrid("resetSelection"):(i.p.selrow=null,i.p.multiselect&&P(!1),i.p.selarrrow=[],i.p.savedRow=[]),i.p.scroll){var l=i.grid.bDiv.scrollLeft;_.call(i,!0,!1),i.grid.hDiv.scrollLeft=l}i.p.subGrid&&"local"==i.p.datatype&&$("td.sgexpanded","#"+$.jgrid.jqID(i.p.id)).each(function(){$(this).trigger("click")}),T(),i.p.lastsort=t,i.p.sortname!=e&&t&&(i.p.lastsort=t)}}},M=function(){var e,t,a,n,o=0,s=$.jgrid.cell_width?0:u(i.p.cellLayout,0),l=0,d=u(i.p.scrollOffset,0),c=!1,p=0,h=0;$.each(i.p.colModel,function(){if(void 0===this.hidden&&(this.hidden=!1),i.p.grouping&&i.p.autowidth){var e=$.inArray(this.name,i.p.groupingView.groupField);e!==-1&&(this.hidden=!i.p.groupingView.groupColumnShow[e])}this.widthOrg=t=u(this.width,0),this.hidden===!1&&(o+=t+s,this.fixed?p+=t+s:l++,h++)}),isNaN(i.p.width)&&(i.p.width=o+(i.p.shrinkToFit!==!1||isNaN(i.p.height)?0:d)),r.width=i.p.width,i.p.tblwidth=o,i.p.shrinkToFit===!1&&i.p.forceFit===!0&&(i.p.forceFit=!1),i.p.shrinkToFit===!0&&l>0&&(a=r.width-s*l-p,isNaN(i.p.height)||(a-=d,c=!0),o=0,$.each(i.p.colModel,function(r){this.hidden!==!1||this.fixed||(t=Math.round(a*this.width/(i.p.tblwidth-s*l-p)),this.width=t,o+=t,e=r)}),n=0,c?r.width-p-(o+s*l)!==d&&(n=r.width-p-(o+s*l)-d):c||1===Math.abs(r.width-p-(o+s*l))||(n=r.width-p-(o+s*l)),i.p.colModel[e].width+=n,i.p.tblwidth=o+n+s*l+p,i.p.tblwidth>i.p.width&&(i.p.colModel[e].width-=i.p.tblwidth-parseInt(i.p.width,10),i.p.tblwidth=i.p.width))},A=function(e){var t,r=e,a=e;for(t=e+1;t<i.p.colModel.length;t++)if(i.p.colModel[t].hidden!==!0){a=t;break}return a-r},E=function(e){var t,r=[0],a=$.jgrid.cell_width?0:i.p.cellLayout;for(t=0;t<=e;t++)i.p.colModel[t].hidden===!1&&(r[0]+=i.p.colModel[t].width+a);return"rtl"==i.p.direction&&(r[0]=i.p.width-r[0]),r[0]-=i.grid.bDiv.scrollLeft,r.push($(i.grid.hDiv).position().top),r.push($(i.grid.bDiv).offset().top-$(i.grid.hDiv).offset().top+$(i.grid.bDiv).height()),r},q=function(e){var t,r=i.grid.headers,a=$.jgrid.getCellIndex(e);for(t=0;t<r.length;t++)if(e===r[t].el){a=t;break}return a};for(this.p.id=this.id,$.inArray(i.p.multikey,d)==-1&&(i.p.multikey=!1),i.p.keyIndex=!1,a=0;a<i.p.colModel.length;a++)i.p.colModel[a]=$.extend(!0,{},i.p.cmTemplate,i.p.colModel[a].template||{},i.p.colModel[a]),i.p.keyIndex===!1&&i.p.colModel[a].key===!0&&(i.p.keyIndex=a);if(i.p.sortorder=i.p.sortorder.toLowerCase(),$.jgrid.cell_width=$.jgrid.cellWidth(),i.p.grouping===!0&&(i.p.scroll=!1,i.p.rownumbers=!1,i.p.gridview=!0),this.p.treeGrid===!0){try{$(this).jqGrid("setTreeGrid")}catch(O){}"local"!=i.p.datatype&&(i.p.localReader={id:"_id_"})}if(this.p.subGrid)try{$(i).jqGrid("setSubGrid")}catch(R){}this.p.multiselect&&(this.p.colNames.unshift("<input role='checkbox' id='cb_"+this.p.id+"' class='cbox' type='checkbox'/>"),this.p.colModel.unshift({name:"cb",width:$.jgrid.cell_width?i.p.multiselectWidth+i.p.cellLayout:i.p.multiselectWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0})),this.p.rownumbers&&(this.p.colNames.unshift(""),this.p.colModel.unshift({name:"rn",width:i.p.rownumWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,align:"center",fixed:!0})),i.p.xmlReader=$.extend(!0,{root:"rows",row:"row",page:"rows>page",total:"rows>total",records:"rows>records",repeatitems:!0,cell:"cell",id:"[id]",userdata:"userdata",subgrid:{root:"rows",row:"row",repeatitems:!0,cell:"cell"}},i.p.xmlReader),i.p.jsonReader=$.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!0,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},i.p.jsonReader),i.p.localReader=$.extend(!0,{root:"rows",page:"page",total:"total",records:"records",repeatitems:!1,cell:"cell",id:"id",userdata:"userdata",subgrid:{root:"rows",repeatitems:!0,cell:"cell"}},i.p.localReader),i.p.scroll&&(i.p.pgbuttons=!1,i.p.pginput=!1,i.p.rowList=[]),i.p.data.length&&y();var N,G,L,z,Q,H,B,W,U,V="<thead><tr class='ui-jqgrid-labels' role='rowheader'>",K="",X="";if(i.p.shrinkToFit===!0&&i.p.forceFit===!0)for(a=i.p.colModel.length-1;a>=0;a--)if(!i.p.colModel[a].hidden){i.p.colModel[a].resizable=!1;break}for("horizontal"==i.p.viewsortcols[1]&&(K=" ui-i-asc",X=" ui-i-desc"),N=s?"class='ui-th-div-ie'":"",U="<span class='s-ico' style='display:none'><span sort='asc' class='ui-grid-ico-sort ui-icon-asc"+K+" ui-state-disabled ui-icon ui-icon-triangle-1-n ui-sort-"+n+"'></span>",U+="<span sort='desc' class='ui-grid-ico-sort ui-icon-desc"+X+" ui-state-disabled ui-icon ui-icon-triangle-1-s ui-sort-"+n+"'></span></span>",a=0;a<this.p.colNames.length;a++){var Y=i.p.headertitles?' title="'+$.jgrid.stripHtml(i.p.colNames[a])+'"':"";V+="<th id='"+i.p.id+"_"+i.p.colModel[a].name+"' role='columnheader' class='ui-state-default ui-th-column ui-th-"+n+"'"+Y+">",G=i.p.colModel[a].index||i.p.colModel[a].name,V+="<div id='jqgh_"+i.p.id+"_"+i.p.colModel[a].name+"' "+N+">"+i.p.colNames[a],i.p.colModel[a].width?i.p.colModel[a].width=parseInt(i.p.colModel[a].width,10):i.p.colModel[a].width=150,"boolean"!=typeof i.p.colModel[a].title&&(i.p.colModel[a].title=!0),G==i.p.sortname&&(i.p.lastsort=a),V+=U+"</div></th>"}if(V+="</tr></thead>",U=null,$(this).append(V),$("thead tr:first th",this).hover(function(){$(this).addClass("ui-state-hover")},function(){$(this).removeClass("ui-state-hover")}),this.p.multiselect){var J,Z=[];$("#cb_"+$.jgrid.jqID(i.p.id),this).bind("click",function(){i.p.selarrrow=[];var e=i.p.frozenColumns===!0?i.p.id+"_frozen":"";this.checked?($(i.rows).each(function(t){t>0&&($(this).hasClass("ui-subgrid")||$(this).hasClass("jqgroup")||$(this).hasClass("ui-state-disabled")||($("#jqg_"+$.jgrid.jqID(i.p.id)+"_"+$.jgrid.jqID(this.id))[i.p.useProp?"prop":"attr"]("checked",!0),$(this).addClass("ui-state-highlight").attr("aria-selected","true"),i.p.selarrrow.push(this.id),i.p.selrow=this.id,e&&($("#jqg_"+$.jgrid.jqID(i.p.id)+"_"+$.jgrid.jqID(this.id),i.grid.fbDiv)[i.p.useProp?"prop":"attr"]("checked",!0),$("#"+$.jgrid.jqID(this.id),i.grid.fbDiv).addClass("ui-state-highlight"))))}),J=!0,Z=[]):($(i.rows).each(function(t){t>0&&($(this).hasClass("ui-subgrid")||$(this).hasClass("ui-state-disabled")||($("#jqg_"+$.jgrid.jqID(i.p.id)+"_"+$.jgrid.jqID(this.id))[i.p.useProp?"prop":"attr"]("checked",!1),$(this).removeClass("ui-state-highlight").attr("aria-selected","false"),Z.push(this.id),e&&($("#jqg_"+$.jgrid.jqID(i.p.id)+"_"+$.jgrid.jqID(this.id),i.grid.fbDiv)[i.p.useProp?"prop":"attr"]("checked",!1),$("#"+$.jgrid.jqID(this.id),i.grid.fbDiv).removeClass("ui-state-highlight"))))}),i.p.selrow=null,J=!1),$(i).triggerHandler("jqGridSelectAll",[J?i.p.selarrrow:Z,J]),$.isFunction(i.p.onSelectAll)&&i.p.onSelectAll.call(i,J?i.p.selarrrow:Z,J)})}if(i.p.autowidth===!0){var ee=$(l).innerWidth();i.p.width=ee>0?ee:"nw"}M(),$(l).css("width",r.width+"px").append("<div class='ui-jqgrid-resize-mark' id='rs_m"+i.p.id+"'>&#160;</div>"),$(o).css("width",r.width+"px"),V=$("thead:first",i).get(0);var te="";i.p.footerrow&&(te+="<table role='grid' style='width:"+i.p.tblwidth+"px' class='ui-jqgrid-ftable' cellspacing='0' cellpadding='0' border='0'><tbody><tr role='row' class='ui-widget-content footrow footrow-"+n+"'>");var ie=$("tr:first",V),re="<tr class='jqgfirstrow' role='row' style='height:auto'>";if(i.p.disableClick=!1,$("th",ie).each(function(e){L=i.p.colModel[e].width,void 0===i.p.colModel[e].resizable&&(i.p.colModel[e].resizable=!0),i.p.colModel[e].resizable?(z=document.createElement("span"),$(z).html("&#160;").addClass("ui-jqgrid-resize ui-jqgrid-resize-"+n).css("cursor","col-resize"),$(this).addClass(i.p.resizeclass)):z="",$(this).css("width",L+"px").prepend(z);var t="";i.p.colModel[e].hidden&&($(this).css("display","none"),t="display:none;"),re+="<td role='gridcell' style='height:0px;width:"+L+"px;"+t+"'></td>",r.headers[e]={width:L,el:this},Q=i.p.colModel[e].sortable,"boolean"!=typeof Q&&(i.p.colModel[e].sortable=!0,Q=!0);var a=i.p.colModel[e].name;"cb"!=a&&"subgrid"!=a&&"rn"!=a&&i.p.viewsortcols[2]&&$(">div",this).addClass("ui-jqgrid-sortable"),Q&&(i.p.viewsortcols[0]?($("div span.s-ico",this).show(),e==i.p.lastsort&&$("div span.ui-icon-"+i.p.sortorder,this).removeClass("ui-state-disabled")):e==i.p.lastsort&&($("div span.s-ico",this).show(),$("div span.ui-icon-"+i.p.sortorder,this).removeClass("ui-state-disabled"))),i.p.footerrow&&(te+="<td role='gridcell' "+c(e,0,"",null,"",!1)+">&#160;</td>")}).mousedown(function(e){if(1==$(e.target).closest("th>span.ui-jqgrid-resize").length){var t=q(this);return i.p.forceFit===!0&&(i.p.nv=A(t)),r.dragStart(t,e,E(t)),!1}}).click(function(e){if(i.p.disableClick)return i.p.disableClick=!1,!1;var t,r,a="th>div.ui-jqgrid-sortable";i.p.viewsortcols[2]||(a="th>div>span>span.ui-grid-ico-sort");var n=$(e.target).closest(a);if(1==n.length){var o=q(this);return i.p.viewsortcols[2]||(t=!0,r=n.attr("sort")),F($("div",this)[0].id,o,t,r),!1}}),i.p.sortable&&$.fn.sortable)try{$(i).jqGrid("sortableColumns",ie)}catch(ae){}i.p.footerrow&&(te+="</tr></tbody></table>"),re+="</tr>",W=document.createElement("tbody"),this.appendChild(W),$(this).addClass("ui-jqgrid-btable").append(re),re=null;var ne=$("<table class='ui-jqgrid-htable' style='width:"+i.p.tblwidth+"px' role='grid' aria-labelledby='gbox_"+this.id+"' cellspacing='0' cellpadding='0' border='0'></table>").append(V),oe=!(!i.p.caption||i.p.hiddengrid!==!0),se=$("<div class='ui-jqgrid-hbox"+("rtl"==n?"-rtl":"")+"'></div>");V=null,r.hDiv=document.createElement("div"),$(r.hDiv).css({width:r.width+"px"}).addClass("ui-state-default ui-jqgrid-hdiv").append(se),$(se).append(ne),ne=null,oe&&$(r.hDiv).hide(),i.p.pager&&("string"==typeof i.p.pager?"#"!=i.p.pager.substr(0,1)&&(i.p.pager="#"+i.p.pager):i.p.pager="#"+$(i.p.pager).attr("id"),$(i.p.pager).css({width:r.width+"px"}).addClass("ui-state-default ui-jqgrid-pager ui-corner-bottom").appendTo(l),oe&&$(i.p.pager).hide(),I(i.p.pager,"")),i.p.cellEdit===!1&&i.p.hoverrows===!0&&$(i).bind("mouseover",function(e){B=$(e.target).closest("tr.jqgrow"),"ui-subgrid"!==$(B).attr("class")&&$(B).addClass("ui-state-hover")}).bind("mouseout",function(e){B=$(e.target).closest("tr.jqgrow"),$(B).removeClass("ui-state-hover")});var le,de,ue;$(i).before(r.hDiv).click(function(e){if(H=e.target,B=$(H,i.rows).closest("tr.jqgrow"),0===$(B).length||B[0].className.indexOf("ui-state-disabled")>-1||($(H,i).closest("table.ui-jqgrid-btable").attr("id")||"").replace("_frozen","")!==i.id)return this;var t=$(H).hasClass("cbox"),r=$(i).triggerHandler("jqGridBeforeSelectRow",[B[0].id,e]);if(r=r!==!1&&"stop"!==r,r&&$.isFunction(i.p.beforeSelectRow)&&(r=i.p.beforeSelectRow.call(i,B[0].id,e)),"A"!=H.tagName&&("INPUT"!=H.tagName&&"TEXTAREA"!=H.tagName&&"OPTION"!=H.tagName&&"SELECT"!=H.tagName||t)&&r===!0)if(le=B[0].id,de=$.jgrid.getCellIndex(H),ue=$(H).closest("td,th").html(),$(i).triggerHandler("jqGridCellSelect",[le,de,ue,e]),$.isFunction(i.p.onCellSelect)&&i.p.onCellSelect.call(i,le,de,ue,e),i.p.cellEdit===!0)if(i.p.multiselect&&t)$(i).jqGrid("setSelection",le,!0,e);else{le=B[0].rowIndex;try{$(i).jqGrid("editCell",le,de,!0)}catch(a){}}else if(i.p.multikey)e[i.p.multikey]?$(i).jqGrid("setSelection",le,!0,e):i.p.multiselect&&t&&(t=$("#jqg_"+$.jgrid.jqID(i.p.id)+"_"+le).is(":checked"),$("#jqg_"+$.jgrid.jqID(i.p.id)+"_"+le)[i.p.useProp?"prop":"attr"]("checked",t));else if(i.p.multiselect&&i.p.multiboxonly)if(t)$(i).jqGrid("setSelection",le,!0,e);else{var n=i.p.frozenColumns?i.p.id+"_frozen":"";$(i.p.selarrrow).each(function(e,t){var r=i.rows.namedItem(t);$(r).removeClass("ui-state-highlight"),$("#jqg_"+$.jgrid.jqID(i.p.id)+"_"+$.jgrid.jqID(t))[i.p.useProp?"prop":"attr"]("checked",!1),n&&($("#"+$.jgrid.jqID(t),"#"+$.jgrid.jqID(n)).removeClass("ui-state-highlight"),$("#jqg_"+$.jgrid.jqID(i.p.id)+"_"+$.jgrid.jqID(t),"#"+$.jgrid.jqID(n))[i.p.useProp?"prop":"attr"]("checked",!1))}),i.p.selarrrow=[],$(i).jqGrid("setSelection",le,!0,e)}else $(i).jqGrid("setSelection",le,!0,e)}).bind("reloadGrid",function(e,t){if(i.p.treeGrid===!0&&(i.p.datatype=i.p.treedatatype),t&&t.current&&i.grid.selectionPreserver(i),"local"==i.p.datatype?($(i).jqGrid("resetSelection"),i.p.data.length&&y()):i.p.treeGrid||(i.p.selrow=null,i.p.multiselect&&(i.p.selarrrow=[],P(!1)),i.p.savedRow=[]),i.p.scroll&&_.call(i,!0,!1),t&&t.page){var r=t.page;r>i.p.lastpage&&(r=i.p.lastpage),r<1&&(r=1),i.p.page=r,i.grid.prevRowHeight?i.grid.bDiv.scrollTop=(r-1)*i.grid.prevRowHeight*i.p.rowNum:i.grid.bDiv.scrollTop=0}return i.grid.prevRowHeight&&i.p.scroll?(delete i.p.lastpage,i.grid.populateVisible()):i.grid.populate(),i.p._inlinenav===!0&&$(i).jqGrid("showAddEditButtons"),!1}).dblclick(function(e){H=e.target,B=$(H,i.rows).closest("tr.jqgrow"),0!==$(B).length&&(le=B[0].rowIndex,de=$.jgrid.getCellIndex(H),$(i).triggerHandler("jqGridDblClickRow",[$(B).attr("id"),le,de,e]),$.isFunction(this.p.ondblClickRow)&&i.p.ondblClickRow.call(i,$(B).attr("id"),le,de,e))}).bind("contextmenu",function(e){H=e.target,B=$(H,i.rows).closest("tr.jqgrow"),0!==$(B).length&&(i.p.multiselect||$(i).jqGrid("setSelection",B[0].id,!0,e),le=B[0].rowIndex,de=$.jgrid.getCellIndex(H),$(i).triggerHandler("jqGridRightClickRow",[$(B).attr("id"),le,de,e]),$.isFunction(this.p.onRightClickRow)&&i.p.onRightClickRow.call(i,$(B).attr("id"),le,de,e))}),r.bDiv=document.createElement("div"),s&&"auto"===String(i.p.height).toLowerCase()&&(i.p.height="100%"),$(r.bDiv).append($('<div style="position:relative;'+(s&&$.jgrid.msiever()<8?"height:0.01%;":"")+'"></div>').append("<div></div>").append(this)).addClass("ui-jqgrid-bdiv").css({height:i.p.height+(isNaN(i.p.height)?"":"px"),width:r.width+"px"}).scroll(r.scrollGrid),$("table:first",r.bDiv).css({width:i.p.tblwidth+"px"}),$.support.tbody||2==$("tbody",this).length&&$("tbody:gt(0)",this).remove(),i.p.multikey&&($.jgrid.msie?$(r.bDiv).bind("selectstart",function(){return!1}):$(r.bDiv).bind("mousedown",function(){return!1})),oe&&$(r.bDiv).hide(),r.cDiv=document.createElement("div");var ce=i.p.hidegrid===!0?$("<a role='link' href='javascript:void(0)'/>").addClass("ui-jqgrid-titlebar-close HeaderButton").hover(function(){ce.addClass("ui-state-hover")},function(){ce.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-circle-triangle-n'></span>").css("rtl"==n?"left":"right","0px"):"";if($(r.cDiv).append(ce).append("<span class='ui-jqgrid-title"+("rtl"==n?"-rtl":"")+"'>"+i.p.caption+"</span>").addClass("ui-jqgrid-titlebar ui-widget-header ui-corner-top ui-helper-clearfix"),$(r.cDiv).insertBefore(r.hDiv),i.p.toolbar[0]&&(r.uDiv=document.createElement("div"),"top"==i.p.toolbar[1]?$(r.uDiv).insertBefore(r.hDiv):"bottom"==i.p.toolbar[1]&&$(r.uDiv).insertAfter(r.hDiv),"both"==i.p.toolbar[1]?(r.ubDiv=document.createElement("div"),$(r.uDiv).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id).insertBefore(r.hDiv),$(r.ubDiv).addClass("ui-userdata ui-state-default").attr("id","tb_"+this.id).insertAfter(r.hDiv),oe&&$(r.ubDiv).hide()):$(r.uDiv).width(r.width).addClass("ui-userdata ui-state-default").attr("id","t_"+this.id),oe&&$(r.uDiv).hide()),i.p.toppager&&(i.p.toppager=$.jgrid.jqID(i.p.id)+"_toppager",r.topDiv=$("<div id='"+i.p.toppager+"'></div>")[0],i.p.toppager="#"+i.p.toppager,$(r.topDiv).addClass("ui-state-default ui-jqgrid-toppager").width(r.width).insertBefore(r.hDiv),I(i.p.toppager,"_t")),i.p.footerrow&&(r.sDiv=$("<div class='ui-jqgrid-sdiv'></div>")[0],se=$("<div class='ui-jqgrid-hbox"+("rtl"==n?"-rtl":"")+"'></div>"),$(r.sDiv).append(se).width(r.width).insertAfter(r.hDiv),$(se).append(te),r.footers=$(".ui-jqgrid-ftable",r.sDiv)[0].rows[0].cells,i.p.rownumbers&&(r.footers[0].className="ui-state-default jqgrid-rownum"),oe&&$(r.sDiv).hide()),se=null,i.p.caption){var pe=i.p.datatype;i.p.hidegrid===!0&&($(".ui-jqgrid-titlebar-close",r.cDiv).click(function(e){var t,a=$.isFunction(i.p.onHeaderClick),n=".ui-jqgrid-bdiv, .ui-jqgrid-hdiv, .ui-jqgrid-pager, .ui-jqgrid-sdiv",o=this;return i.p.toolbar[0]===!0&&("both"==i.p.toolbar[1]&&(n+=", #"+$(r.ubDiv).attr("id")),n+=", #"+$(r.uDiv).attr("id")),t=$(n,"#gview_"+$.jgrid.jqID(i.p.id)).length,"visible"==i.p.gridstate?$(n,"#gbox_"+$.jgrid.jqID(i.p.id)).slideUp("fast",function(){t--,0===t&&($("span",o).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),i.p.gridstate="hidden",$("#gbox_"+$.jgrid.jqID(i.p.id)).hasClass("ui-resizable")&&$(".ui-resizable-handle","#gbox_"+$.jgrid.jqID(i.p.id)).hide(),$(i).triggerHandler("jqGridHeaderClick",[i.p.gridstate,e]),a&&(oe||i.p.onHeaderClick.call(i,i.p.gridstate,e)))}):"hidden"==i.p.gridstate&&$(n,"#gbox_"+$.jgrid.jqID(i.p.id)).slideDown("fast",function(){t--,0===t&&($("span",o).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),oe&&(i.p.datatype=pe,T(),oe=!1),i.p.gridstate="visible",$("#gbox_"+$.jgrid.jqID(i.p.id)).hasClass("ui-resizable")&&$(".ui-resizable-handle","#gbox_"+$.jgrid.jqID(i.p.id)).show(),$(i).triggerHandler("jqGridHeaderClick",[i.p.gridstate,e]),a&&(oe||i.p.onHeaderClick.call(i,i.p.gridstate,e)))}),!1}),oe&&(i.p.datatype="local",$(".ui-jqgrid-titlebar-close",r.cDiv).trigger("click")))}else $(r.cDiv).hide();$(r.hDiv).after(r.bDiv).mousemove(function(e){if(r.resizing)return r.dragMove(e),!1}),$(".ui-jqgrid-labels",r.hDiv).bind("selectstart",function(){return!1}),$(document).mouseup(function(){return!r.resizing||(r.dragEnd(),!1)}),i.formatCol=c,i.sortData=F,i.updatepager=C,i.refreshIndex=y,i.setHeadCheckBox=P,i.constructTr=x,i.formatter=function(e,t,i,r,a){return h(e,t,i,r,a)},$.extend(r,{populate:T,emptyRows:_}),this.grid=r,i.addXmlData=function(e){w(e,i.grid.bDiv)},i.addJSONData=function(e){j(e,i.grid.bDiv)},this.grid.cols=this.rows[0].cells,$(i).triggerHandler("jqGridInitGrid"),$.isFunction(i.p.onInitGrid)&&i.p.onInitGrid.call(i),T(),i.p.hiddengrid=!1}})},$.jgrid.extend({getGridParam:function(e){var t=this[0];if(t&&t.grid)return e?void 0!==t.p[e]?t.p[e]:null:t.p},setGridParam:function(e){return this.each(function(){this.grid&&"object"==typeof e&&$.extend(!0,this.p,e)})},getDataIDs:function(){var e,t=[],i=0,r=0;return this.each(function(){if(e=this.rows.length,e&&e>0)for(;i<e;)$(this.rows[i]).hasClass("jqgrow")&&(t[r]=this.rows[i].id,r++),i++}),t},setSelection:function(e,t,i){return this.each(function(){function r(e){var t=$(u.grid.bDiv)[0].clientHeight,i=$(u.grid.bDiv)[0].scrollTop,r=$(u.rows[e]).position().top,a=u.rows[e].clientHeight;r+a>=t+i?$(u.grid.bDiv)[0].scrollTop=r-(t+i)+a+i:r<t+i&&r<i&&($(u.grid.bDiv)[0].scrollTop=r)}var a,n,o,s,l,d,u=this;void 0!==e&&(t=t!==!1,n=u.rows.namedItem(String(e)),!n||!n.className||n.className.indexOf("ui-state-disabled")>-1||(u.p.scrollrows===!0&&(o=u.rows.namedItem(e).rowIndex,o>=0&&r(o)),u.p.frozenColumns===!0&&(d=u.p.id+"_frozen"),u.p.multiselect?(u.setHeadCheckBox(!1),u.p.selrow=n.id,s=$.inArray(u.p.selrow,u.p.selarrrow),s===-1?("ui-subgrid"!==n.className&&$(n).addClass("ui-state-highlight").attr("aria-selected","true"),a=!0,u.p.selarrrow.push(u.p.selrow)):("ui-subgrid"!==n.className&&$(n).removeClass("ui-state-highlight").attr("aria-selected","false"),a=!1,u.p.selarrrow.splice(s,1),l=u.p.selarrrow[0],u.p.selrow=void 0===l?null:l),$("#jqg_"+$.jgrid.jqID(u.p.id)+"_"+$.jgrid.jqID(n.id))[u.p.useProp?"prop":"attr"]("checked",a),d&&(s===-1?$("#"+$.jgrid.jqID(e),"#"+$.jgrid.jqID(d)).addClass("ui-state-highlight"):$("#"+$.jgrid.jqID(e),"#"+$.jgrid.jqID(d)).removeClass("ui-state-highlight"),$("#jqg_"+$.jgrid.jqID(u.p.id)+"_"+$.jgrid.jqID(e),"#"+$.jgrid.jqID(d))[u.p.useProp?"prop":"attr"]("checked",a)),$(u).triggerHandler("jqGridSelectRow",[n.id,a,i]),u.p.onSelectRow&&t&&u.p.onSelectRow.call(u,n.id,a,i)):"ui-subgrid"!==n.className&&(u.p.selrow!=n.id?($(u.rows.namedItem(u.p.selrow)).removeClass("ui-state-highlight").attr({"aria-selected":"false",tabindex:"-1"}),$(n).addClass("ui-state-highlight").attr({"aria-selected":"true",tabindex:"0"}),d&&($("#"+$.jgrid.jqID(u.p.selrow),"#"+$.jgrid.jqID(d)).removeClass("ui-state-highlight"),$("#"+$.jgrid.jqID(e),"#"+$.jgrid.jqID(d)).addClass("ui-state-highlight")),a=!0):a=!1,u.p.selrow=n.id,$(u).triggerHandler("jqGridSelectRow",[n.id,a,i]),u.p.onSelectRow&&t&&u.p.onSelectRow.call(u,n.id,a,i))))})},resetSelection:function(e){return this.each(function(){var t,i,r,a=this;a.p.frozenColumns===!0&&(r=a.p.id+"_frozen"),void 0!==e?(i=e===a.p.selrow?a.p.selrow:e,$("#"+$.jgrid.jqID(a.p.id)+" tbody:first tr#"+$.jgrid.jqID(i)).removeClass("ui-state-highlight").attr("aria-selected","false"),r&&$("#"+$.jgrid.jqID(i),"#"+$.jgrid.jqID(r)).removeClass("ui-state-highlight"),a.p.multiselect&&($("#jqg_"+$.jgrid.jqID(a.p.id)+"_"+$.jgrid.jqID(i),"#"+$.jgrid.jqID(a.p.id))[a.p.useProp?"prop":"attr"]("checked",!1),r&&$("#jqg_"+$.jgrid.jqID(a.p.id)+"_"+$.jgrid.jqID(i),"#"+$.jgrid.jqID(r))[a.p.useProp?"prop":"attr"]("checked",!1),a.setHeadCheckBox(!1)),i=null):a.p.multiselect?($(a.p.selarrrow).each(function(e,i){t=a.rows.namedItem(i),$(t).removeClass("ui-state-highlight").attr("aria-selected","false"),$("#jqg_"+$.jgrid.jqID(a.p.id)+"_"+$.jgrid.jqID(i))[a.p.useProp?"prop":"attr"]("checked",!1),r&&($("#"+$.jgrid.jqID(i),"#"+$.jgrid.jqID(r)).removeClass("ui-state-highlight"),$("#jqg_"+$.jgrid.jqID(a.p.id)+"_"+$.jgrid.jqID(i),"#"+$.jgrid.jqID(r))[a.p.useProp?"prop":"attr"]("checked",!1))}),a.setHeadCheckBox(!1),a.p.selarrrow=[]):a.p.selrow&&($("#"+$.jgrid.jqID(a.p.id)+" tbody:first tr#"+$.jgrid.jqID(a.p.selrow)).removeClass("ui-state-highlight").attr("aria-selected","false"),r&&$("#"+$.jgrid.jqID(a.p.selrow),"#"+$.jgrid.jqID(r)).removeClass("ui-state-highlight"),a.p.selrow=null),a.p.cellEdit===!0&&parseInt(a.p.iCol,10)>=0&&parseInt(a.p.iRow,10)>=0&&($("td:eq("+a.p.iCol+")",a.rows[a.p.iRow]).removeClass("edit-cell ui-state-highlight"),$(a.rows[a.p.iRow]).removeClass("selected-row ui-state-hover")),a.p.savedRow=[]})},getRowData:function(e){var t,i,r={},a=!1,n=0;return this.each(function(){var o,s,l=this;if(void 0===e)a=!0,t=[],i=l.rows.length;else{if(s=l.rows.namedItem(e),!s)return r;i=2}for(;n<i;)a&&(s=l.rows[n]),$(s).hasClass("jqgrow")&&($('td[role="gridcell"]',s).each(function(e){if(o=l.p.colModel[e].name,"cb"!==o&&"subgrid"!==o&&"rn"!==o)if(l.p.treeGrid===!0&&o==l.p.ExpandColumn)r[o]=$.jgrid.htmlDecode($("span:first",this).html());else try{r[o]=$.unformat.call(l,this,{rowId:s.id,colModel:l.p.colModel[e]},e)}catch(t){r[o]=$.jgrid.htmlDecode($(this).html())}}),a&&(t.push(r),r={})),n++}),t||r},delRowData:function(e){var t,i,r,a=!1;return this.each(function(){var n=this;if(t=n.rows.namedItem(e),!t)return!1;if(r=t.rowIndex,$(t).remove(),n.p.records--,n.p.reccount--,n.updatepager(!0,!1),a=!0,n.p.multiselect&&(i=$.inArray(e,n.p.selarrrow),i!=-1&&n.p.selarrrow.splice(i,1)),n.p.multiselect&&n.p.selarrrow.length>0?n.p.selrow=n.p.selarrrow[n.p.selarrrow.length-1]:n.p.selrow=null,"local"==n.p.datatype){var o=$.jgrid.stripPref(n.p.idPrefix,e),s=n.p._index[o];void 0!==s&&(n.p.data.splice(s,1),n.refreshIndex())}if(n.p.altRows===!0&&a){var l=n.p.altclass;$(n.rows).each(function(e){e%2==1?$(this).addClass(l):$(this).removeClass(l)})}}),a},setRowData:function(e,t,i){var r,a,n=!0;return this.each(function(){if(!this.grid)return!1;var o,s,l=this,d=typeof i,u={};if(s=l.rows.namedItem(e),!s)return!1;if(t)try{if($(this.p.colModel).each(function(i){r=this.name,void 0!==t[r]&&(u[r]=this.formatter&&"string"==typeof this.formatter&&"date"==this.formatter?$.unformat.date.call(l,t[r],this):t[r],o=l.formatter(e,t[r],i,t,"edit"),a=this.title?{title:$.jgrid.stripHtml(o)}:{},l.p.treeGrid===!0&&r==l.p.ExpandColumn?$("td[role='gridcell']:eq("+i+") > span:first",s).html(o).attr(a):$("td[role='gridcell']:eq("+i+")",s).html(o).attr(a))}),"local"==l.p.datatype){var c,p=$.jgrid.stripPref(l.p.idPrefix,e),h=l.p._index[p];if(l.p.treeGrid)for(c in l.p.treeReader)l.p.treeReader.hasOwnProperty(c)&&delete u[l.p.treeReader[c]];void 0!==h&&(l.p.data[h]=$.extend(!0,l.p.data[h],u)),u=null}}catch(f){n=!1}n&&("string"===d?$(s).addClass(i):"object"===d&&$(s).css(i),$(l).triggerHandler("jqGridAfterGridComplete"))}),n},addRowData:function(e,t,i,r){i||(i="last");var a,n,o,s,l,d,u,c,p,h,f,g,m,v,b=!1,_="";return t&&($.isArray(t)?(p=!0,i="last",h=e):(t=[t],p=!1),this.each(function(){var y=this,x=t.length;l=y.p.rownumbers===!0?1:0,o=y.p.multiselect===!0?1:0,s=y.p.subGrid===!0?1:0,p||(void 0!==e?e=String(e):(e=$.jgrid.randId(),y.p.keyIndex!==!1&&(h=y.p.colModel[y.p.keyIndex+o+s+l].name,void 0!==t[0][h]&&(e=t[0][h])))),f=y.p.altclass;for(var w=0,j="",k={},C=!!$.isFunction(y.p.afterInsertRow);w<x;){if(g=t[w],n=[],p){try{e=g[h],void 0===e&&(e=$.jgrid.randId())}catch(D){e=$.jgrid.randId()}j=y.p.altRows===!0&&(y.rows.length-1)%2===0?f:""}for(v=e,e=y.p.idPrefix+e,l&&(_=y.formatCol(0,1,"",null,e,!0),n[n.length]='<td role="gridcell" class="ui-state-default jqgrid-rownum" '+_+">0</td>"),o&&(c='<input role="checkbox" type="checkbox" id="jqg_'+y.p.id+"_"+e+'" class="cbox"/>',_=y.formatCol(l,1,"",null,e,!0),n[n.length]='<td role="gridcell" '+_+">"+c+"</td>"),s&&(n[n.length]=$(y).jqGrid("addSubGridCell",o+l,1)),u=o+s+l;u<y.p.colModel.length;u++)m=y.p.colModel[u],a=m.name,k[a]=g[a],c=y.formatter(e,$.jgrid.getAccessor(g,a),u,g),
_=y.formatCol(u,1,c,g,e,k),n[n.length]='<td role="gridcell" '+_+">"+c+"</td>";if(n.unshift(y.constructTr(e,!1,j,k,g,!1)),n[n.length]="</tr>",0===y.rows.length)$("table:first",y.grid.bDiv).append(n.join(""));else switch(i){case"last":$(y.rows[y.rows.length-1]).after(n.join("")),d=y.rows.length-1;break;case"first":$(y.rows[0]).after(n.join("")),d=1;break;case"after":d=y.rows.namedItem(r),d&&($(y.rows[d.rowIndex+1]).hasClass("ui-subgrid")?$(y.rows[d.rowIndex+1]).after(n):$(d).after(n.join(""))),d++;break;case"before":d=y.rows.namedItem(r),d&&($(d).before(n.join("")),d=d.rowIndex),d--}y.p.subGrid===!0&&$(y).jqGrid("addSubGrid",o+l,d),y.p.records++,y.p.reccount++,$(y).triggerHandler("jqGridAfterInsertRow",[e,g,g]),C&&y.p.afterInsertRow.call(y,e,g,g),w++,"local"==y.p.datatype&&(k[y.p.localReader.id]=v,y.p._index[v]=y.p.data.length,y.p.data.push(k),k={})}y.p.altRows!==!0||p||("last"==i?(y.rows.length-1)%2==1&&$(y.rows[y.rows.length-1]).addClass(f):$(y.rows).each(function(e){e%2==1?$(this).addClass(f):$(this).removeClass(f)})),y.updatepager(!0,!0),b=!0})),b},footerData:function(e,t,i){function r(e){var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}var a,n,o=!1,s={};return void 0===e&&(e="get"),"boolean"!=typeof i&&(i=!0),e=e.toLowerCase(),this.each(function(){var l,d=this;return!(!d.grid||!d.p.footerrow)&&(("set"!=e||!r(t))&&(o=!0,void $(this.p.colModel).each(function(r){a=this.name,"set"==e?void 0!==t[a]&&(l=i?d.formatter("",t[a],r,t,"edit"):t[a],n=this.title?{title:$.jgrid.stripHtml(l)}:{},$("tr.footrow td:eq("+r+")",d.grid.sDiv).html(l).attr(n),o=!0):"get"==e&&(s[a]=$("tr.footrow td:eq("+r+")",d.grid.sDiv).html())})))}),"get"==e?s:o},showHideCol:function(e,t){return this.each(function(){var i,r=this,a=!1,n=$.jgrid.cell_width?0:r.p.cellLayout;if(r.grid){"string"==typeof e&&(e=[e]),t="none"!=t?"":"none";var o=""===t,s=r.p.groupHeader&&("object"==typeof r.p.groupHeader||$.isFunction(r.p.groupHeader));s&&$(r).jqGrid("destroyGroupHeader",!1),$(this.p.colModel).each(function(s){if($.inArray(this.name,e)!==-1&&this.hidden===o){if(r.p.frozenColumns===!0&&this.frozen===!0)return!0;$("tr",r.grid.hDiv).each(function(){$(this.cells[s]).css("display",t)}),$(r.rows).each(function(){$(this).hasClass("jqgroup")||$(this.cells[s]).css("display",t)}),r.p.footerrow&&$("tr.footrow td:eq("+s+")",r.grid.sDiv).css("display",t),i=parseInt(this.width,10),"none"===t?r.p.tblwidth-=i+n:r.p.tblwidth+=i+n,this.hidden=!o,a=!0,$(r).triggerHandler("jqGridShowHideCol",[o,this.name,s])}}),a===!0&&(r.p.shrinkToFit!==!0||isNaN(r.p.height)||(r.p.tblwidth+=parseInt(r.p.scrollOffset,10)),$(r).jqGrid("setGridWidth",r.p.shrinkToFit===!0?r.p.tblwidth:r.p.width)),s&&$(r).jqGrid("setGroupHeaders",r.p.groupHeader)}})},hideCol:function(e){return this.each(function(){$(this).jqGrid("showHideCol",e,"none")})},showCol:function(e){return this.each(function(){$(this).jqGrid("showHideCol",e,"")})},remapColumns:function(e,t,i){function r(t){var i;i=t.length?$.makeArray(t):$.extend({},t),$.each(e,function(e){t[e]=i[this]})}function a(t,i){$(">tr"+(i||""),t).each(function(){var t=this,i=$.makeArray(t.cells);$.each(e,function(){var e=i[this];e&&t.appendChild(e)})})}var n=this.get(0);r(n.p.colModel),r(n.p.colNames),r(n.grid.headers),a($("thead:first",n.grid.hDiv),i&&":not(.ui-jqgrid-labels)"),t&&a($("#"+$.jgrid.jqID(n.p.id)+" tbody:first"),".jqgfirstrow, tr.jqgrow, tr.jqfoot"),n.p.footerrow&&a($("tbody:first",n.grid.sDiv)),n.p.remapColumns&&(n.p.remapColumns.length?r(n.p.remapColumns):n.p.remapColumns=$.makeArray(e)),n.p.lastsort=$.inArray(n.p.lastsort,e),n.p.treeGrid&&(n.p.expColInd=$.inArray(n.p.expColInd,e)),$(n).triggerHandler("jqGridRemapColumns",[e,t,i])},setGridWidth:function(e,t){return this.each(function(){if(this.grid){var i,r,a,n,o=this,s=0,l=$.jgrid.cell_width?0:o.p.cellLayout,d=0,u=!1,c=o.p.scrollOffset,p=0,h=0;if("boolean"!=typeof t&&(t=o.p.shrinkToFit),!isNaN(e)){if(e=parseInt(e,10),o.grid.width=o.p.width=e,$("#gbox_"+$.jgrid.jqID(o.p.id)).css("width",e+"px"),$("#gview_"+$.jgrid.jqID(o.p.id)).css("width",e+"px"),$(o.grid.bDiv).css("width",e+"px"),$(o.grid.hDiv).css("width",e+"px"),o.p.pager&&$(o.p.pager).css("width",e+"px"),o.p.toppager&&$(o.p.toppager).css("width",e+"px"),o.p.toolbar[0]===!0&&($(o.grid.uDiv).css("width",e+"px"),"both"==o.p.toolbar[1]&&$(o.grid.ubDiv).css("width",e+"px")),o.p.footerrow&&$(o.grid.sDiv).css("width",e+"px"),t===!1&&o.p.forceFit===!0&&(o.p.forceFit=!1),t===!0){if($.each(o.p.colModel,function(){this.hidden===!1&&(i=this.widthOrg,s+=i+l,this.fixed?p+=i+l:d++,h++)}),0===d)return;o.p.tblwidth=s,a=e-l*d-p,isNaN(o.p.height)||($(o.grid.bDiv)[0].clientHeight<$(o.grid.bDiv)[0].scrollHeight||1===o.rows.length)&&(u=!0,a-=c),s=0;var f=o.grid.cols.length>0;if($.each(o.p.colModel,function(e){if(this.hidden===!1&&!this.fixed){if(i=this.widthOrg,i=Math.round(a*i/(o.p.tblwidth-l*d-p)),i<0)return;this.width=i,s+=i,o.grid.headers[e].width=i,o.grid.headers[e].el.style.width=i+"px",o.p.footerrow&&(o.grid.footers[e].style.width=i+"px"),f&&(o.grid.cols[e].style.width=i+"px"),r=e}}),!r)return;if(n=0,u?e-p-(s+l*d)!==c&&(n=e-p-(s+l*d)-c):1!==Math.abs(e-p-(s+l*d))&&(n=e-p-(s+l*d)),o.p.colModel[r].width+=n,o.p.tblwidth=s+n+l*d+p,o.p.tblwidth>e){var g=o.p.tblwidth-parseInt(e,10);o.p.tblwidth=e,i=o.p.colModel[r].width=o.p.colModel[r].width-g}else i=o.p.colModel[r].width;o.grid.headers[r].width=i,o.grid.headers[r].el.style.width=i+"px",f&&(o.grid.cols[r].style.width=i+"px"),o.p.footerrow&&(o.grid.footers[r].style.width=i+"px")}o.p.tblwidth&&($("table:first",o.grid.bDiv).css("width",o.p.tblwidth+"px"),$("table:first",o.grid.hDiv).css("width",o.p.tblwidth+"px"),o.grid.hDiv.scrollLeft=o.grid.bDiv.scrollLeft,o.p.footerrow&&$("table:first",o.grid.sDiv).css("width",o.p.tblwidth+"px"))}}})},setGridHeight:function(e){return this.each(function(){var t=this;if(t.grid){var i=$(t.grid.bDiv);i.css({height:e+(isNaN(e)?"":"px")}),t.p.frozenColumns===!0&&$("#"+$.jgrid.jqID(t.p.id)+"_frozen").parent().height(i.height()-16),t.p.height=e,t.p.scroll&&t.grid.populateVisible()}})},setCaption:function(e){return this.each(function(){this.p.caption=e,$("span.ui-jqgrid-title, span.ui-jqgrid-title-rtl",this.grid.cDiv).html(e),$(this.grid.cDiv).show()})},setLabel:function(e,t,i,r){return this.each(function(){var a=this,n=-1;if(a.grid&&void 0!==e&&($(a.p.colModel).each(function(t){if(this.name==e)return n=t,!1}),n>=0)){var o=$("tr.ui-jqgrid-labels th:eq("+n+")",a.grid.hDiv);if(t){var s=$(".s-ico",o);$("[id^=jqgh_]",o).empty().html(t).append(s),a.p.colNames[n]=t}i&&("string"==typeof i?$(o).addClass(i):$(o).css(i)),"object"==typeof r&&$(o).attr(r)}})},setCell:function(e,t,i,r,a,n){return this.each(function(){var o,s,l=this,d=-1;if(l.grid&&(isNaN(t)?$(l.p.colModel).each(function(e){if(this.name==t)return d=e,!1}):d=parseInt(t,10),d>=0)){var u=l.rows.namedItem(e);if(u){var c=$("td:eq("+d+")",u);if((""!==i||n===!0)&&(o=l.formatter(e,i,d,u,"edit"),s=l.p.colModel[d].title?{title:$.jgrid.stripHtml(o)}:{},l.p.treeGrid&&$(".tree-wrap",$(c)).length>0?$("span",$(c)).html(o).attr(s):$(c).html(o).attr(s),"local"==l.p.datatype)){var p,h=l.p.colModel[d];i=h.formatter&&"string"==typeof h.formatter&&"date"==h.formatter?$.unformat.date.call(l,i,h):i,p=l.p._index[e],void 0!==p&&(l.p.data[p][h.name]=i)}"string"==typeof r?$(c).addClass(r):r&&$(c).css(r),"object"==typeof a&&$(c).attr(a)}}})},getCell:function(e,t){var i=!1;return this.each(function(){var r=this,a=-1;if(r.grid&&(isNaN(t)?$(r.p.colModel).each(function(e){if(this.name===t)return a=e,!1}):a=parseInt(t,10),a>=0)){var n=r.rows.namedItem(e);if(n)try{i=$.unformat.call(r,$("td:eq("+a+")",n),{rowId:n.id,colModel:r.p.colModel[a]},a)}catch(o){i=$.jgrid.htmlDecode($("td:eq("+a+")",n).html())}}}),i},getCol:function(e,t,i){var r,a,n,o,s=[],l=0;return t="boolean"==typeof t&&t,void 0===i&&(i=!1),this.each(function(){var d=this,u=-1;if(d.grid&&(isNaN(e)?$(d.p.colModel).each(function(t){if(this.name===e)return u=t,!1}):u=parseInt(e,10),u>=0)){var c=d.rows.length,p=0;if(c&&c>0){for(;p<c;){if($(d.rows[p]).hasClass("jqgrow")){try{r=$.unformat.call(d,$(d.rows[p].cells[u]),{rowId:d.rows[p].id,colModel:d.p.colModel[u]},u)}catch(h){r=$.jgrid.htmlDecode(d.rows[p].cells[u].innerHTML)}i?(o=parseFloat(r),l+=o,void 0===n&&(n=a=o),a=Math.min(a,o),n=Math.max(n,o)):t?s.push({id:d.rows[p].id,value:r}):s.push(r)}p++}if(i)switch(i.toLowerCase()){case"sum":s=l;break;case"avg":s=l/c;break;case"count":s=c;break;case"min":s=a;break;case"max":s=n}}}}),s},clearGridData:function(e){return this.each(function(){var t=this;if(t.grid){if("boolean"!=typeof e&&(e=!1),t.p.deepempty)$("#"+$.jgrid.jqID(t.p.id)+" tbody:first tr:gt(0)").remove();else{var i=$("#"+$.jgrid.jqID(t.p.id)+" tbody:first tr:first")[0];$("#"+$.jgrid.jqID(t.p.id)+" tbody:first").empty().append(i)}t.p.footerrow&&e&&$(".ui-jqgrid-ftable td",t.grid.sDiv).html("&#160;"),t.p.selrow=null,t.p.selarrrow=[],t.p.savedRow=[],t.p.records=0,t.p.page=1,t.p.lastpage=0,t.p.reccount=0,t.p.data=[],t.p._index={},t.updatepager(!0,!1)}})},getInd:function(e,t){var i,r=!1;return this.each(function(){i=this.rows.namedItem(e),i&&(r=t===!0?i:i.rowIndex)}),r},bindKeys:function(e){var t=$.extend({onEnter:null,onSpace:null,onLeftKey:null,onRightKey:null,scrollingRows:!0},e||{});return this.each(function(){var e=this;$("body").is("[role]")||$("body").attr("role","application"),e.p.scrollrows=t.scrollingRows,$(e).keydown(function(i){var r,a,n,o=$(e).find("tr[tabindex=0]")[0],s=e.p.treeReader.expanded_field;if(o)if(n=e.p._index[o.id],37===i.keyCode||38===i.keyCode||39===i.keyCode||40===i.keyCode){if(38===i.keyCode){if(a=o.previousSibling,r="",a)if($(a).is(":hidden")){for(;a;)if(a=a.previousSibling,!$(a).is(":hidden")&&$(a).hasClass("jqgrow")){r=a.id;break}}else r=a.id;$(e).jqGrid("setSelection",r,!0,i),i.preventDefault()}if(40===i.keyCode){if(a=o.nextSibling,r="",a)if($(a).is(":hidden")){for(;a;)if(a=a.nextSibling,!$(a).is(":hidden")&&$(a).hasClass("jqgrow")){r=a.id;break}}else r=a.id;$(e).jqGrid("setSelection",r,!0,i),i.preventDefault()}37===i.keyCode&&(e.p.treeGrid&&e.p.data[n][s]&&$(o).find("div.treeclick").trigger("click"),$(e).triggerHandler("jqGridKeyLeft",[e.p.selrow]),$.isFunction(t.onLeftKey)&&t.onLeftKey.call(e,e.p.selrow)),39===i.keyCode&&(e.p.treeGrid&&!e.p.data[n][s]&&$(o).find("div.treeclick").trigger("click"),$(e).triggerHandler("jqGridKeyRight",[e.p.selrow]),$.isFunction(t.onRightKey)&&t.onRightKey.call(e,e.p.selrow))}else 13===i.keyCode?($(e).triggerHandler("jqGridKeyEnter",[e.p.selrow]),$.isFunction(t.onEnter)&&t.onEnter.call(e,e.p.selrow)):32===i.keyCode&&($(e).triggerHandler("jqGridKeySpace",[e.p.selrow]),$.isFunction(t.onSpace)&&t.onSpace.call(e,e.p.selrow))})})},unbindKeys:function(){return this.each(function(){$(this).unbind("keydown")})},getLocalRow:function(e){var t,i=!1;return this.each(function(){void 0!==e&&(t=this.p._index[e],t>=0&&(i=this.p.data[t]))}),i}})}(jQuery),function(e){/**
 * jqGrid extension for custom methods
 * Tony Tomov tony@trirand.com
 * http://trirand.com/blog/ 
 * 
 * Wildraid wildraid@mail.ru
 * Oleg Kiriljuk oleg.kiriljuk@ok-soft-gmbh.com
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl-2.0.html
**/
"use strict";e.jgrid.extend({getColProp:function(e){var t={},i=this[0];if(!i.grid)return!1;var r,a=i.p.colModel;for(r=0;r<a.length;r++)if(a[r].name==e){t=a[r];break}return t},setColProp:function(t,i){return this.each(function(){if(this.grid&&i){var r,a=this.p.colModel;for(r=0;r<a.length;r++)if(a[r].name==t){e.extend(!0,this.p.colModel[r],i);break}}})},sortGrid:function(e,t,i){return this.each(function(){var r,a=this,n=-1;if(a.grid){for(e||(e=a.p.sortname),r=0;r<a.p.colModel.length;r++)if(a.p.colModel[r].index==e||a.p.colModel[r].name==e){n=r;break}if(n!=-1){var o=a.p.colModel[n].sortable;"boolean"!=typeof o&&(o=!0),"boolean"!=typeof t&&(t=!1),o&&a.sortData("jqgh_"+a.p.id+"_"+e,n,t,i)}}})},clearBeforeUnload:function(){return this.each(function(){var t=this.grid;t.emptyRows.call(this,!0,!0),e(t.hDiv).unbind("mousemove"),e(this).unbind(),t.dragEnd=null,t.dragMove=null,t.dragStart=null,t.emptyRows=null,t.populate=null,t.populateVisible=null,t.scrollGrid=null,t.selectionPreserver=null,t.bDiv=null,t.cDiv=null,t.hDiv=null,t.cols=null;var i,r=t.headers.length;for(i=0;i<r;i++)t.headers[i].el=null;this.formatCol=null,this.sortData=null,this.updatepager=null,this.refreshIndex=null,this.setHeadCheckBox=null,this.constructTr=null,this.formatter=null,this.addXmlData=null,this.addJSONData=null})},GridDestroy:function(){return this.each(function(){if(this.grid){this.p.pager&&e(this.p.pager).remove();try{e(this).jqGrid("clearBeforeUnload"),e("#gbox_"+e.jgrid.jqID(this.id)).remove()}catch(t){}}})},GridUnload:function(){return this.each(function(){if(this.grid){var t={id:e(this).attr("id"),cl:e(this).attr("class")};this.p.pager&&e(this.p.pager).empty().removeClass("ui-state-default ui-jqgrid-pager corner-bottom");var i=document.createElement("table");e(i).attr({id:t.id}),i.className=t.cl;var r=e.jgrid.jqID(this.id);e(i).removeClass("ui-jqgrid-btable"),1===e(this.p.pager).parents("#gbox_"+r).length?(e(i).insertBefore("#gbox_"+r).show(),e(this.p.pager).insertBefore("#gbox_"+r)):e(i).insertBefore("#gbox_"+r).show(),e(this).jqGrid("clearBeforeUnload"),e("#gbox_"+r).remove()}})},setGridState:function(t){return this.each(function(){if(this.grid){var i=this;"hidden"==t?(e(".ui-jqgrid-bdiv, .ui-jqgrid-hdiv","#gview_"+e.jgrid.jqID(i.p.id)).slideUp("fast"),i.p.pager&&e(i.p.pager).slideUp("fast"),i.p.toppager&&e(i.p.toppager).slideUp("fast"),i.p.toolbar[0]===!0&&("both"==i.p.toolbar[1]&&e(i.grid.ubDiv).slideUp("fast"),e(i.grid.uDiv).slideUp("fast")),i.p.footerrow&&e(".ui-jqgrid-sdiv","#gbox_"+e.jgrid.jqID(i.p.id)).slideUp("fast"),e(".ui-jqgrid-titlebar-close span",i.grid.cDiv).removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),i.p.gridstate="hidden"):"visible"==t&&(e(".ui-jqgrid-hdiv, .ui-jqgrid-bdiv","#gview_"+e.jgrid.jqID(i.p.id)).slideDown("fast"),i.p.pager&&e(i.p.pager).slideDown("fast"),i.p.toppager&&e(i.p.toppager).slideDown("fast"),i.p.toolbar[0]===!0&&("both"==i.p.toolbar[1]&&e(i.grid.ubDiv).slideDown("fast"),e(i.grid.uDiv).slideDown("fast")),i.p.footerrow&&e(".ui-jqgrid-sdiv","#gbox_"+e.jgrid.jqID(i.p.id)).slideDown("fast"),e(".ui-jqgrid-titlebar-close span",i.grid.cDiv).removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),i.p.gridstate="visible")}})},filterToolbar:function(t){return t=e.extend({autosearch:!0,searchOnEnter:!0,beforeSearch:null,afterSearch:null,beforeClear:null,afterClear:null,searchurl:"",stringResult:!1,groupOp:"AND",defaultSearch:"bw"},t||{}),this.each(function(){var i=this;if(!this.ftoolbar){var r,a=function(){var r,a,n,o={},s=0,l={};e.each(i.p.colModel,function(){if(a=this.index||this.name,n=this.searchoptions&&this.searchoptions.sopt?this.searchoptions.sopt[0]:"select"==this.stype?"eq":t.defaultSearch,r=e("#gs_"+e.jgrid.jqID(this.name),this.frozen===!0&&i.p.frozenColumns===!0?i.grid.fhDiv:i.grid.hDiv).val())o[a]=r,l[a]=n,s++;else try{delete i.p.postData[a]}catch(d){}});var d=s>0;if(t.stringResult===!0||"local"==i.p.datatype){var u='{"groupOp":"'+t.groupOp+'","rules":[',c=0;e.each(o,function(e,t){c>0&&(u+=","),u+='{"field":"'+e+'",',u+='"op":"'+l[e]+'",',t+="",u+='"data":"'+t.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',c++}),u+="]}",e.extend(i.p.postData,{filters:u}),e.each(["searchField","searchString","searchOper"],function(e,t){i.p.postData.hasOwnProperty(t)&&delete i.p.postData[t]})}else e.extend(i.p.postData,o);var p;i.p.searchurl&&(p=i.p.url,e(i).jqGrid("setGridParam",{url:i.p.searchurl}));var h="stop"===e(i).triggerHandler("jqGridToolbarBeforeSearch");!h&&e.isFunction(t.beforeSearch)&&(h=t.beforeSearch.call(i)),h||e(i).jqGrid("setGridParam",{search:d}).trigger("reloadGrid",[{page:1}]),p&&e(i).jqGrid("setGridParam",{url:p}),e(i).triggerHandler("jqGridToolbarAfterSearch"),e.isFunction(t.afterSearch)&&t.afterSearch.call(i)},n=function(r){var a,n={},o=0;r="boolean"!=typeof r||r,e.each(i.p.colModel,function(){var t;switch(this.searchoptions&&void 0!==this.searchoptions.defaultValue&&(t=this.searchoptions.defaultValue),a=this.index||this.name,this.stype){case"select":if(e("#gs_"+e.jgrid.jqID(this.name)+" option",this.frozen===!0&&i.p.frozenColumns===!0?i.grid.fhDiv:i.grid.hDiv).each(function(i){if(0===i&&(this.selected=!0),e(this).val()==t)return this.selected=!0,!1}),void 0!==t)n[a]=t,o++;else try{delete i.p.postData[a]}catch(r){}break;case"text":if(e("#gs_"+e.jgrid.jqID(this.name),this.frozen===!0&&i.p.frozenColumns===!0?i.grid.fhDiv:i.grid.hDiv).val(t),void 0!==t)n[a]=t,o++;else try{delete i.p.postData[a]}catch(s){}}});var s=o>0;if(t.stringResult===!0||"local"==i.p.datatype){var l='{"groupOp":"'+t.groupOp+'","rules":[',d=0;e.each(n,function(e,t){d>0&&(l+=","),l+='{"field":"'+e+'",',l+='"op":"eq",',t+="",l+='"data":"'+t.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"}',d++}),l+="]}",e.extend(i.p.postData,{filters:l}),e.each(["searchField","searchString","searchOper"],function(e,t){i.p.postData.hasOwnProperty(t)&&delete i.p.postData[t]})}else e.extend(i.p.postData,n);var u;i.p.searchurl&&(u=i.p.url,e(i).jqGrid("setGridParam",{url:i.p.searchurl}));var c="stop"===e(i).triggerHandler("jqGridToolbarBeforeClear");!c&&e.isFunction(t.beforeClear)&&(c=t.beforeClear.call(i)),c||r&&e(i).jqGrid("setGridParam",{search:s}).trigger("reloadGrid",[{page:1}]),u&&e(i).jqGrid("setGridParam",{url:u}),e(i).triggerHandler("jqGridToolbarAfterClear"),e.isFunction(t.afterClear)&&t.afterClear()},o=function(){var t=e("tr.ui-search-toolbar",i.grid.hDiv),r=i.p.frozenColumns===!0&&e("tr.ui-search-toolbar",i.grid.fhDiv);"none"==t.css("display")?(t.show(),r&&r.show()):(t.hide(),r&&r.hide())},s=e("<tr class='ui-search-toolbar' role='rowheader'></tr>");e.each(i.p.colModel,function(){var n,o,l,d,u,c=this;if(o=e("<th role='columnheader' class='ui-state-default ui-th-column ui-th-"+i.p.direction+"'></th>"),n=e("<div style='position:relative;height:100%;padding-right:0.3em;'></div>"),this.hidden===!0&&e(o).css("display","none"),this.search=this.search!==!1,void 0===this.stype&&(this.stype="text"),l=e.extend({},this.searchoptions||{}),this.search)switch(this.stype){case"select":if(d=this.surl||l.dataUrl)u=n,e.ajax(e.extend({url:d,dataType:"html",success:function(r){if(void 0!==l.buildSelect){var n=l.buildSelect(r);n&&e(u).append(n)}else e(u).append(r);void 0!==l.defaultValue&&e("select",u).val(l.defaultValue),e("select",u).attr({name:c.index||c.name,id:"gs_"+c.name}),l.attr&&e("select",u).attr(l.attr),e("select",u).css({width:"100%"}),e.jgrid.bindEv(e("select",u)[0],l,i),t.autosearch===!0&&e("select",u).change(function(){return a(),!1}),r=null}},e.jgrid.ajaxOptions,i.p.ajaxSelectOptions||{}));else{var p,h,f;if(c.searchoptions?(p=void 0===c.searchoptions.value?"":c.searchoptions.value,h=void 0===c.searchoptions.separator?":":c.searchoptions.separator,f=void 0===c.searchoptions.delimiter?";":c.searchoptions.delimiter):c.editoptions&&(p=void 0===c.editoptions.value?"":c.editoptions.value,h=void 0===c.editoptions.separator?":":c.editoptions.separator,f=void 0===c.editoptions.delimiter?";":c.editoptions.delimiter),p){var g=document.createElement("select");g.style.width="100%",e(g).attr({name:c.index||c.name,id:"gs_"+c.name});var m,v,b,_,y;if("string"==typeof p)for(m=p.split(f),y=0;y<m.length;y++)v=m[y].split(h),b=document.createElement("option"),b.value=v[0],b.innerHTML=v[1],g.appendChild(b);else if("object"==typeof p)for(_ in p)p.hasOwnProperty(_)&&(b=document.createElement("option"),b.value=_,b.innerHTML=p[_],g.appendChild(b));void 0!==l.defaultValue&&e(g).val(l.defaultValue),l.attr&&e(g).attr(l.attr),e.jgrid.bindEv(g,l,i),e(n).append(g),t.autosearch===!0&&e(g).change(function(){return a(),!1})}}break;case"text":var x=void 0!==l.defaultValue?l.defaultValue:"";e(n).append("<input type='text' style='width:95%;padding:0px;' name='"+(c.index||c.name)+"' id='gs_"+c.name+"' value='"+x+"'/>"),l.attr&&e("input",n).attr(l.attr),e.jgrid.bindEv(e("input",n)[0],l,i),t.autosearch===!0&&(t.searchOnEnter?e("input",n).keypress(function(e){var t=e.charCode||e.keyCode||0;return 13==t?(a(),!1):this}):e("input",n).keydown(function(e){var t=e.which;switch(t){case 13:return!1;case 9:case 16:case 37:case 38:case 39:case 40:case 27:break;default:r&&clearTimeout(r),r=setTimeout(function(){a()},500)}}))}e(o).append(n),e(s).append(o)}),e("table thead",i.grid.hDiv).append(s),this.ftoolbar=!0,this.triggerToolbar=a,this.clearToolbar=n,this.toggleToolbar=o}})},destroyFilterToolbar:function(){return this.each(function(){this.ftoolbar&&(this.triggerToolbar=null,this.clearToolbar=null,this.toggleToolbar=null,this.ftoolbar=!1,e(this.grid.hDiv).find("table thead tr.ui-search-toolbar").remove())})},destroyGroupHeader:function(t){return void 0===t&&(t=!0),this.each(function(){var i,r,a,n,o,s,l,d=this,u=d.grid,c=e("table.ui-jqgrid-htable thead",u.hDiv),p=d.p.colModel;if(u){for(e(this).unbind(".setGroupHeaders"),i=e("<tr>",{role:"rowheader"}).addClass("ui-jqgrid-labels"),n=u.headers,r=0,a=n.length;r<a;r++){l=p[r].hidden?"none":"",o=e(n[r].el).width(n[r].width).css("display",l);try{o.removeAttr("rowSpan")}catch(h){o.attr("rowSpan",1)}i.append(o),s=o.children("span.ui-jqgrid-resize"),s.length>0&&(s[0].style.height=""),o.children("div")[0].style.top=""}e(c).children("tr.ui-jqgrid-labels").remove(),e(c).prepend(i),t===!0&&e(d).jqGrid("setGridParam",{groupHeader:null})}})},setGroupHeaders:function(t){return t=e.extend({useColSpanStyle:!1,groupHeaders:[]},t||{}),this.each(function(){this.p.groupHeader=t;var i,r,a,n,o,s,l,d,u,c,p,h,f,g=this,m=0,v=g.p.colModel,b=v.length,_=g.grid.headers,y=e("table.ui-jqgrid-htable",g.grid.hDiv),x=y.children("thead").children("tr.ui-jqgrid-labels:last").addClass("jqg-second-row-header"),w=y.children("thead"),j=y.find(".jqg-first-row-header");void 0===j[0]?j=e("<tr>",{role:"row","aria-hidden":"true"}).addClass("jqg-first-row-header").css("height","auto"):j.empty();var k,C=function(e,t){var i,r=t.length;for(i=0;i<r;i++)if(t[i].startColumnName===e)return i;return-1};for(e(g).prepend(w),a=e("<tr>",{role:"rowheader"}).addClass("ui-jqgrid-labels jqg-third-row-header"),i=0;i<b;i++)if(o=_[i].el,s=e(o),r=v[i],l={height:"0px",width:_[i].width+"px",display:r.hidden?"none":""},e("<th>",{role:"gridcell"}).css(l).addClass("ui-first-th-"+g.p.direction).appendTo(j),o.style.width="",d=C(r.name,t.groupHeaders),d>=0){for(u=t.groupHeaders[d],c=u.numberOfColumns,p=u.titleText,h=0,d=0;d<c&&i+d<b;d++)v[i+d].hidden||h++;n=e("<th>").attr({role:"columnheader"}).addClass("ui-state-default ui-th-column-header ui-th-"+g.p.direction).css({height:"22px","border-top":"0px none"}).html(p),h>0&&n.attr("colspan",String(h)),g.p.headertitles&&n.attr("title",n.text()),0===h&&n.hide(),s.before(n),a.append(o),m=c-1}else 0===m?t.useColSpanStyle?s.attr("rowspan","2"):(e("<th>",{role:"columnheader"}).addClass("ui-state-default ui-th-column-header ui-th-"+g.p.direction).css({display:r.hidden?"none":"","border-top":"0px none"}).insertBefore(s),a.append(o)):(a.append(o),m--);f=e(g).children("thead"),f.prepend(j),a.insertAfter(x),y.append(f),t.useColSpanStyle&&(y.find("span.ui-jqgrid-resize").each(function(){var t=e(this).parent();t.is(":visible")&&(this.style.cssText="height: "+t.height()+"px !important; cursor: col-resize;")}),y.find("div.ui-jqgrid-sortable").each(function(){var t=e(this),i=t.parent();i.is(":visible")&&i.is(":has(span.ui-jqgrid-resize)")&&t.css("top",(i.height()-t.outerHeight())/2+"px")})),k=f.find("tr.jqg-first-row-header"),e(g).bind("jqGridResizeStop.setGroupHeaders",function(e,t,i){k.find("th").eq(i).width(t)})})},setFrozenColumns:function(){return this.each(function(){if(this.grid){var t=this,i=t.p.colModel,r=0,a=i.length,n=-1,o=!1;if(!(t.p.subGrid===!0||t.p.treeGrid===!0||t.p.cellEdit===!0||t.p.sortable||t.p.scroll||t.p.grouping)){for(t.p.rownumbers&&r++,t.p.multiselect&&r++;r<a&&i[r].frozen===!0;)o=!0,n=r,r++;if(n>=0&&o){var s=t.p.caption?e(t.grid.cDiv).outerHeight():0,l=e(".ui-jqgrid-htable","#gview_"+e.jgrid.jqID(t.p.id)).height();t.p.toppager&&(s+=e(t.grid.topDiv).outerHeight()),t.p.toolbar[0]===!0&&"bottom"!=t.p.toolbar[1]&&(s+=e(t.grid.uDiv).outerHeight()),t.grid.fhDiv=e('<div style="position:absolute;left:0px;top:'+s+"px;height:"+l+'px;" class="frozen-div ui-state-default ui-jqgrid-hdiv"></div>'),t.grid.fbDiv=e('<div style="position:absolute;left:0px;top:'+(parseInt(s,10)+parseInt(l,10)+1)+'px;overflow-y:hidden" class="frozen-bdiv ui-jqgrid-bdiv"></div>'),e("#gview_"+e.jgrid.jqID(t.p.id)).append(t.grid.fhDiv);var d=e(".ui-jqgrid-htable","#gview_"+e.jgrid.jqID(t.p.id)).clone(!0);if(t.p.groupHeader){e("tr.jqg-first-row-header, tr.jqg-third-row-header",d).each(function(){e("th:gt("+n+")",this).remove()});var u=-1,c=-1;e("tr.jqg-second-row-header th",d).each(function(){var t=parseInt(e(this).attr("colspan"),10);if(t&&(u+=t,c++),u===n)return!1}),u!==n&&(c=n),e("tr.jqg-second-row-header",d).each(function(){e("th:gt("+c+")",this).remove()})}else e("tr",d).each(function(){e("th:gt("+n+")",this).remove()});e(d).width(1),e(t.grid.fhDiv).append(d).mousemove(function(e){if(t.grid.resizing)return t.grid.dragMove(e),!1}),e(t).bind("jqGridResizeStop.setFrozenColumns",function(i,r,a){var n=e(".ui-jqgrid-htable",t.grid.fhDiv);e("th:eq("+a+")",n).width(r);var o=e(".ui-jqgrid-btable",t.grid.fbDiv);e("tr:first td:eq("+a+")",o).width(r)}),e(t).bind("jqGridOnSortCol.setFrozenColumns",function(i,r){var a=e("tr.ui-jqgrid-labels:last th:eq("+t.p.lastsort+")",t.grid.fhDiv),n=e("tr.ui-jqgrid-labels:last th:eq("+r+")",t.grid.fhDiv);e("span.ui-grid-ico-sort",a).addClass("ui-state-disabled"),e(a).attr("aria-selected","false"),e("span.ui-icon-"+t.p.sortorder,n).removeClass("ui-state-disabled"),e(n).attr("aria-selected","true"),t.p.viewsortcols[0]||t.p.lastsort!=r&&(e("span.s-ico",a).hide(),e("span.s-ico",n).show())}),e("#gview_"+e.jgrid.jqID(t.p.id)).append(t.grid.fbDiv),e(t.grid.bDiv).scroll(function(){e(t.grid.fbDiv).scrollTop(e(this).scrollTop())}),t.p.hoverrows===!0&&e("#"+e.jgrid.jqID(t.p.id)).unbind("mouseover").unbind("mouseout"),e(t).bind("jqGridAfterGridComplete.setFrozenColumns",function(){e("#"+e.jgrid.jqID(t.p.id)+"_frozen").remove(),e(t.grid.fbDiv).height(e(t.grid.bDiv).height()-16);var i=e("#"+e.jgrid.jqID(t.p.id)).clone(!0);e("tr",i).each(function(){e("td:gt("+n+")",this).remove()}),e(i).width(1).attr("id",t.p.id+"_frozen"),e(t.grid.fbDiv).append(i),t.p.hoverrows===!0&&(e("tr.jqgrow",i).hover(function(){e(this).addClass("ui-state-hover"),e("#"+e.jgrid.jqID(this.id),"#"+e.jgrid.jqID(t.p.id)).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover"),e("#"+e.jgrid.jqID(this.id),"#"+e.jgrid.jqID(t.p.id)).removeClass("ui-state-hover")}),e("tr.jqgrow","#"+e.jgrid.jqID(t.p.id)).hover(function(){e(this).addClass("ui-state-hover"),e("#"+e.jgrid.jqID(this.id),"#"+e.jgrid.jqID(t.p.id)+"_frozen").addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover"),e("#"+e.jgrid.jqID(this.id),"#"+e.jgrid.jqID(t.p.id)+"_frozen").removeClass("ui-state-hover")})),i=null}),t.p.frozenColumns=!0}}}})},destroyFrozenColumns:function(){return this.each(function(){if(this.grid&&this.p.frozenColumns===!0){var t=this;if(e(t.grid.fhDiv).remove(),e(t.grid.fbDiv).remove(),t.grid.fhDiv=null,t.grid.fbDiv=null,e(this).unbind(".setFrozenColumns"),t.p.hoverrows===!0){var i;e("#"+e.jgrid.jqID(t.p.id)).bind("mouseover",function(t){i=e(t.target).closest("tr.jqgrow"),"ui-subgrid"!==e(i).attr("class")&&e(i).addClass("ui-state-hover")}).bind("mouseout",function(t){i=e(t.target).closest("tr.jqgrow"),e(i).removeClass("ui-state-hover")})}this.p.frozenColumns=!1}})}})}(jQuery),/*
 * jqModal - Minimalist Modaling with jQuery
 *   (http://dev.iceburg.net/jquery/jqmodal/)
 *
 * Copyright (c) 2007,2008 Brice Burgess <bhb@iceburg.net>
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 * 
 * $Version: 07/06/2008 +r13
 */
function(e){e.fn.jqm=function(r){var n={overlay:50,closeoverlay:!0,overlayClass:"jqmOverlay",closeClass:"jqmClose",trigger:".jqModal",ajax:a,ajaxText:"",target:a,modal:a,toTop:a,onShow:a,onHide:a,onLoad:a};return this.each(function(){return this._jqm?i[this._jqm].c=e.extend({},i[this._jqm].c,r):(t++,this._jqm=t,i[t]={c:e.extend(n,e.jqm.params,r),a:a,w:e(this).addClass("jqmID"+t),s:t},void(n.trigger&&e(this).jqmAddTrigger(n.trigger)))})},e.fn.jqmAddClose=function(e){return d(this,e,"jqmHide")},e.fn.jqmAddTrigger=function(e){return d(this,e,"jqmShow")},e.fn.jqmShow=function(t){return this.each(function(){e.jqm.open(this._jqm,t)})},e.fn.jqmHide=function(t){return this.each(function(){e.jqm.close(this._jqm,t)})},e.jqm={hash:{},open:function(t,o){var l=i[t],d=l.c,u="."+d.closeClass,c=parseInt(l.w.css("z-index"));c=c>0?c:3e3;var p=e("<div></div>").css({height:"100%",width:"100%",position:"fixed",left:0,top:0,"z-index":c-1,opacity:d.overlay/100});if(l.a)return a;if(l.t=o,l.a=!0,l.w.css("z-index",c),d.modal?(r[0]||setTimeout(function(){s("bind")},1),r.push(t)):d.overlay>0?d.closeoverlay&&l.w.jqmAddClose(p):p=a,l.o=p?p.addClass(d.overlayClass).prependTo("body"):a,d.ajax){var h=d.target||l.w,f=d.ajax;h="string"==typeof h?e(h,l.w):e(h),f="@"==f.substr(0,1)?e(o).attr(f.substring(1)):f,h.html(d.ajaxText).load(f,function(){d.onLoad&&d.onLoad.call(this,l),u&&l.w.jqmAddClose(e(u,l.w)),n(l)})}else u&&l.w.jqmAddClose(e(u,l.w));return d.toTop&&l.o&&l.w.before('<span id="jqmP'+l.w[0]._jqm+'"></span>').insertAfter(l.o),d.onShow?d.onShow(l):l.w.show(),n(l),a},close:function(t){var n=i[t];return n.a?(n.a=a,r[0]&&(r.pop(),r[0]||s("unbind")),n.c.toTop&&n.o&&e("#jqmP"+n.w[0]._jqm).after(n.w).remove(),n.c.onHide?n.c.onHide(n):(n.w.hide(),n.o&&n.o.remove()),a):a},params:{}};var t=0,i=e.jqm.hash,r=[],a=!1,n=function(e){o(e)},o=function(t){try{e(":input:visible",t.w)[0].focus()}catch(i){}},s=function(t){e(document)[t]("keypress",l)[t]("keydown",l)[t]("mousedown",l)},l=function(t){var a=i[r[r.length-1]],n=!e(t.target).parents(".jqmID"+a.s)[0];return n&&o(a),!n},d=function(t,r,n){return t.each(function(){var t=this._jqm;e(r).each(function(){this[n]||(this[n]=[],e(this).click(function(){for(var e in{jqmShow:1,jqmHide:1})for(var t in this[e])i[this[e][t]]&&i[this[e][t]].w[e](this);return a})),this[n].push(t)})})}}(jQuery),/*
 * jqDnR - Minimalistic Drag'n'Resize for jQuery.
 *
 * Copyright (c) 2007 Brice Burgess <bhb@iceburg.net>, http://www.iceburg.net
 * Licensed under the MIT License:
 * http://www.opensource.org/licenses/mit-license.php
 * 
 * $Version: 2007.08.19 +r2
 */
function(e){e.fn.jqDrag=function(e){return o(this,e,"d")},e.fn.jqResize=function(e,t){return o(this,e,"r",t)},e.jqDnR={dnr:{},e:0,drag:function(e){return"d"==a.k?n.css({left:a.X+e.pageX-a.pX,top:a.Y+e.pageY-a.pY}):(n.css({width:Math.max(e.pageX-a.pX+a.W,0),height:Math.max(e.pageY-a.pY+a.H,0)}),i&&t.css({width:Math.max(e.pageX-i.pX+i.W,0),height:Math.max(e.pageY-i.pY+i.H,0)})),!1},stop:function(){e(document).unbind("mousemove",r.drag).unbind("mouseup",r.stop)}};var t,i,r=e.jqDnR,a=r.dnr,n=r.e,o=function(r,o,d,u){return r.each(function(){o=o?e(o,r):r,o.bind("mousedown",{e:r,k:d},function(r){var o=r.data,d={};if(n=o.e,t=!!u&&e(u),"relative"!=n.css("position"))try{n.position(d)}catch(c){}if(a={X:d.left||s("left")||0,Y:d.top||s("top")||0,W:s("width")||n[0].scrollWidth||0,H:s("height")||n[0].scrollHeight||0,pX:r.pageX,pY:r.pageY,k:o.k},i=!(!t||"d"==o.k)&&{X:d.left||l("left")||0,Y:d.top||l("top")||0,W:t[0].offsetWidth||l("width")||0,H:t[0].offsetHeight||l("height")||0,pX:r.pageX,pY:r.pageY,k:o.k},e("input.hasDatepicker",n[0])[0])try{e("input.hasDatepicker",n[0]).datepicker("hide")}catch(p){}return e(document).mousemove(e.jqDnR.drag).mouseup(e.jqDnR.stop),!1})})},s=function(e){return parseInt(n.css(e),10)||!1},l=function(e){return parseInt(t.css(e),10)||!1}}(jQuery);/*
	The below work is licensed under Creative Commons GNU LGPL License.

	Original work:

	License:     http://creativecommons.org/licenses/LGPL/2.1/
	Author:      Stefan Goessner/2006
	Web:         http://goessner.net/ 

	Modifications made:

	Version:     0.9-p5
	Description: Restructured code, JSLint validated (no strict whitespaces),
	             added handling of empty arrays, empty strings, and int/floats values.
	Author:      Michael Schøler/2008-01-29
	Web:         http://michael.hinnerup.net/blog/2008/01/26/converting-json-to-xml-and-xml-to-json/
	
	Description: json2xml added support to convert functions as CDATA
	             so it will be easy to write characters that cause some problems when convert
	Author:      Tony Tomov
*/
var xmlJsonClass={xml2json:function(e,t){9===e.nodeType&&(e=e.documentElement);var i=this.removeWhite(e),r=this.toObj(i),a=this.toJson(r,e.nodeName,"\t");return"{\n"+t+(t?a.replace(/\t/g,t):a.replace(/\t|\n/g,""))+"\n}"},json2xml:function(e,t){var i,r=function(e,t,i){var a,n,o="";if(e instanceof Array)if(0===e.length)o+=i+"<"+t+">__EMPTY_ARRAY_</"+t+">\n";else for(a=0,n=e.length;a<n;a+=1){var s=i+r(e[a],t,i+"\t")+"\n";o+=s}else if("object"==typeof e){var l=!1;o+=i+"<"+t;var d;for(d in e)e.hasOwnProperty(d)&&("@"===d.charAt(0)?o+=" "+d.substr(1)+'="'+e[d].toString()+'"':l=!0);if(o+=l?">":"/>",l){for(d in e)e.hasOwnProperty(d)&&("#text"===d?o+=e[d]:"#cdata"===d?o+="<![CDATA["+e[d]+"]]>":"@"!==d.charAt(0)&&(o+=r(e[d],d,i+"\t")));o+=("\n"===o.charAt(o.length-1)?i:"")+"</"+t+">"}}else"function"==typeof e?o+=i+"<"+t+"><![CDATA["+e+"]]></"+t+">":(void 0===e&&(e=""),o+='""'===e.toString()||0===e.toString().length?i+"<"+t+">__EMPTY_STRING_</"+t+">":i+"<"+t+">"+e.toString()+"</"+t+">");return o},a="";for(i in e)e.hasOwnProperty(i)&&(a+=r(e[i],i,""));return t?a.replace(/\t/g,t):a.replace(/\t|\n/g,"")},toObj:function(e){var t={},i=/function/i;if(1===e.nodeType){if(e.attributes.length){var r;for(r=0;r<e.attributes.length;r+=1)t["@"+e.attributes[r].nodeName]=(e.attributes[r].nodeValue||"").toString()}if(e.firstChild){var a,n=0,o=0,s=!1;for(a=e.firstChild;a;a=a.nextSibling)1===a.nodeType?s=!0:3===a.nodeType&&a.nodeValue.match(/[^ \f\n\r\t\v]/)?n+=1:4===a.nodeType&&(o+=1);if(s)if(n<2&&o<2)for(this.removeWhite(e),a=e.firstChild;a;a=a.nextSibling)3===a.nodeType?t["#text"]=this.escape(a.nodeValue):4===a.nodeType?i.test(a.nodeValue)?t[a.nodeName]=[t[a.nodeName],a.nodeValue]:t["#cdata"]=this.escape(a.nodeValue):t[a.nodeName]?t[a.nodeName]instanceof Array?t[a.nodeName][t[a.nodeName].length]=this.toObj(a):t[a.nodeName]=[t[a.nodeName],this.toObj(a)]:t[a.nodeName]=this.toObj(a);else e.attributes.length?t["#text"]=this.escape(this.innerXml(e)):t=this.escape(this.innerXml(e));else if(n)e.attributes.length?t["#text"]=this.escape(this.innerXml(e)):(t=this.escape(this.innerXml(e)),"__EMPTY_ARRAY_"===t?t="[]":"__EMPTY_STRING_"===t&&(t=""));else if(o)if(o>1)t=this.escape(this.innerXml(e));else for(a=e.firstChild;a;a=a.nextSibling){if(i.test(e.firstChild.nodeValue)){t=e.firstChild.nodeValue;break}t["#cdata"]=this.escape(a.nodeValue)}}e.attributes.length||e.firstChild||(t=null)}else 9===e.nodeType?t=this.toObj(e.documentElement):alert("unhandled node type: "+e.nodeType);return t},toJson:function(e,t,i,r){void 0===r&&(r=!0);var a=t?'"'+t+'"':"",n="\t",o="\n";if(r||(n="",o=""),"[]"===e)a+=t?":[]":"[]";else if(e instanceof Array){var s,l,d=[];for(l=0,s=e.length;l<s;l+=1)d[l]=this.toJson(e[l],"",i+n,r);a+=(t?":[":"[")+(d.length>1?o+i+n+d.join(","+o+i+n)+o+i:d.join(""))+"]"}else if(null===e)a+=(t&&":")+"null";else if("object"==typeof e){var u,c=[];for(u in e)e.hasOwnProperty(u)&&(c[c.length]=this.toJson(e[u],u,i+n,r));a+=(t?":{":"{")+(c.length>1?o+i+n+c.join(","+o+i+n)+o+i:c.join(""))+"}"}else a+="string"==typeof e?(t&&":")+'"'+e.replace(/\\/g,"\\\\").replace(/\"/g,'\\"')+'"':(t&&":")+e.toString();return a},innerXml:function(e){var t="";if("innerHTML"in e)t=e.innerHTML;else for(var i=function(e){var t,r="";if(1===e.nodeType){for(r+="<"+e.nodeName,t=0;t<e.attributes.length;t+=1)r+=" "+e.attributes[t].nodeName+'="'+(e.attributes[t].nodeValue||"").toString()+'"';if(e.firstChild){r+=">";for(var a=e.firstChild;a;a=a.nextSibling)r+=i(a);r+="</"+e.nodeName+">"}else r+="/>"}else 3===e.nodeType?r+=e.nodeValue:4===e.nodeType&&(r+="<![CDATA["+e.nodeValue+"]]>");return r},r=e.firstChild;r;r=r.nextSibling)t+=i(r);return t},escape:function(e){return e.replace(/[\\]/g,"\\\\").replace(/[\"]/g,'\\"').replace(/[\n]/g,"\\n").replace(/[\r]/g,"\\r")},removeWhite:function(e){e.normalize();var t;for(t=e.firstChild;t;)if(3===t.nodeType)if(t.nodeValue.match(/[^ \f\n\r\t\v]/))t=t.nextSibling;else{var i=t.nextSibling;e.removeChild(t),t=i}else 1===t.nodeType?(this.removeWhite(t),t=t.nextSibling):t=t.nextSibling;return e}};/*
**
 * formatter for values but most of the values if for jqGrid
 * Some of this was inspired and based on how YUI does the table datagrid but in jQuery fashion
 * we are trying to keep it as light as possible
 * Joshua Burnett josh@9ci.com	
 * http://www.greenbill.com
 *
 * Changes from Tony Tomov tony@trirand.com
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl-2.0.html
 * 
**/
!function(e){"use strict";e.fmatter={},e.extend(e.fmatter,{isBoolean:function(e){return"boolean"==typeof e},isObject:function(t){return t&&("object"==typeof t||e.isFunction(t))||!1},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e&&isFinite(e)},isNull:function(e){return null===e},isUndefined:function(e){return void 0===e},isValue:function(e){return this.isObject(e)||this.isString(e)||this.isNumber(e)||this.isBoolean(e)},isEmpty:function(t){return!(!this.isString(t)&&this.isValue(t))&&(!this.isValue(t)||(t=e.trim(t).replace(/\&nbsp\;/gi,"").replace(/\&#160\;/gi,""),""===t))}}),e.fn.fmatter=function(t,i,r,a,n){var o=i;r=e.extend({},e.jgrid.formatter,r);try{o=e.fn.fmatter[t].call(this,i,r,a,n)}catch(s){}return o},e.fmatter.util={NumberFormat:function(t,i){if(e.fmatter.isNumber(t)||(t*=1),e.fmatter.isNumber(t)){var r,a=t<0,n=String(t),o=i.decimalSeparator||".";if(e.fmatter.isNumber(i.decimalPlaces)){var s=i.decimalPlaces,l=Math.pow(10,s);if(n=String(Math.round(t*l)/l),r=n.lastIndexOf("."),s>0)for(r<0?(n+=o,r=n.length-1):"."!==o&&(n=n.replace(".",o));n.length-1-r<s;)n+="0"}if(i.thousandsSeparator){var d=i.thousandsSeparator;r=n.lastIndexOf(o),r=r>-1?r:n.length;var u,c=n.substring(r),p=-1;for(u=r;u>0;u--)p++,p%3===0&&u!==r&&(!a||u>1)&&(c=d+c),c=n.charAt(u-1)+c;n=c}return n=i.prefix?i.prefix+n:n,n=i.suffix?n+i.suffix:n}return t},DateFormat:function(t,i,r,a){var n,o,s,l=/\\.|[dDjlNSwzWFmMntLoYyaABgGhHisueIOPTZcrU]/g,d=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,u=/[^-+\dA-Z]/g,c=new RegExp("^/Date\\((([-+])?[0-9]+)(([-+])([0-9]{2})([0-9]{2}))?\\)/$"),p="string"==typeof i?i.match(c):null,h=function(e,t){for(e=String(e),t=parseInt(t,10)||2;e.length<t;)e="0"+e;return e},f={m:1,d:1,y:1970,h:0,i:0,s:0,u:0},g=0,m=["i18n"];if(m.i18n={dayNames:a.dayNames,monthNames:a.monthNames},a.masks.hasOwnProperty(t)&&(t=a.masks[t]),isNaN(i-0)||"u"!=String(t).toLowerCase())if(i.constructor===Date)g=i;else if(null!==p){if(g=new Date(parseInt(p[1],10)),p[3]){var v=60*Number(p[5])+Number(p[6]);v*="-"==p[4]?1:-1,v-=g.getTimezoneOffset(),g.setTime(Number(Number(g)+60*v*1e3))}}else{for(i=String(i).split(/[\\\/:_;.,\t\T\s-]/),t=t.split(/[\\\/:_;.,\t\T\s-]/),o=0,s=t.length;o<s;o++)"M"==t[o]&&(n=e.inArray(i[o],m.i18n.monthNames),n!==-1&&n<12&&(i[o]=n+1)),"F"==t[o]&&(n=e.inArray(i[o],m.i18n.monthNames),n!==-1&&n>11&&(i[o]=n+1-12)),i[o]&&(f[t[o].toLowerCase()]=parseInt(i[o],10));if(f.f&&(f.m=f.f),0===f.m&&0===f.y&&0===f.d)return"&#160;";f.m=parseInt(f.m,10)-1;var b=f.y;b>=70&&b<=99?f.y=1900+f.y:b>=0&&b<=69&&(f.y=2e3+f.y),g=new Date(f.y,f.m,f.d,f.h,f.i,f.s,f.u)}else g=new Date(1e3*parseFloat(i));a.masks.hasOwnProperty(r)?r=a.masks[r]:r||(r="Y-m-d");var _=g.getHours(),y=g.getMinutes(),x=g.getDate(),w=g.getMonth()+1,j=g.getTimezoneOffset(),k=g.getSeconds(),C=g.getMilliseconds(),D=g.getDay(),S=g.getFullYear(),T=(D+6)%7+1,P=(new Date(S,w-1,x)-new Date(S,0,1))/864e5,I={d:h(x),D:m.i18n.dayNames[D],j:x,l:m.i18n.dayNames[D+7],N:T,S:a.S(x),w:D,z:P,W:T<5?Math.floor((P+T-1)/7)+1:Math.floor((P+T-1)/7)||((new Date(S-1,0,1).getDay()+6)%7<4?53:52),F:m.i18n.monthNames[w-1+12],m:h(w),M:m.i18n.monthNames[w-1],n:w,t:"?",L:"?",o:"?",Y:S,y:String(S).substring(2),a:_<12?a.AmPm[0]:a.AmPm[1],A:_<12?a.AmPm[2]:a.AmPm[3],B:"?",g:_%12||12,G:_,h:h(_%12||12),H:h(_),i:h(y),s:h(k),u:C,e:"?",I:"?",O:(j>0?"-":"+")+h(100*Math.floor(Math.abs(j)/60)+Math.abs(j)%60,4),P:"?",T:(String(g).match(d)||[""]).pop().replace(u,""),Z:"?",c:"?",r:"?",U:Math.floor(g/1e3)};return r.replace(l,function(e){return I.hasOwnProperty(e)?I[e]:e.substring(1)})}},e.fn.fmatter.defaultFormat=function(t,i){return e.fmatter.isValue(t)&&""!==t?t:i.defaultValue||"&#160;"},e.fn.fmatter.email=function(t,i){return e.fmatter.isEmpty(t)?e.fn.fmatter.defaultFormat(t,i):'<a href="mailto:'+t+'">'+t+"</a>"},e.fn.fmatter.checkbox=function(t,i){var r,a=e.extend({},i.checkbox);void 0===i.colModel||e.fmatter.isUndefined(i.colModel.formatoptions)||(a=e.extend({},a,i.colModel.formatoptions)),r=a.disabled===!0?'disabled="disabled"':"",(e.fmatter.isEmpty(t)||e.fmatter.isUndefined(t))&&(t=e.fn.fmatter.defaultFormat(t,a)),t=String(t),t=t.toLowerCase();var n=t.search(/(false|0|no|n|off)/i)<0?" checked='checked' ":"";return'<input type="checkbox" '+n+' value="'+t+'" offval="no" '+r+"/>"},e.fn.fmatter.link=function(t,i){var r={target:i.target},a="";return void 0===i.colModel||e.fmatter.isUndefined(i.colModel.formatoptions)||(r=e.extend({},r,i.colModel.formatoptions)),r.target&&(a="target="+r.target),e.fmatter.isEmpty(t)?e.fn.fmatter.defaultFormat(t,i):"<a "+a+' href="'+t+'">'+t+"</a>"},e.fn.fmatter.showlink=function(t,i){var r,a={baseLinkUrl:i.baseLinkUrl,showAction:i.showAction,addParam:i.addParam||"",target:i.target,idName:i.idName},n="";return void 0===i.colModel||e.fmatter.isUndefined(i.colModel.formatoptions)||(a=e.extend({},a,i.colModel.formatoptions)),a.target&&(n="target="+a.target),r=a.baseLinkUrl+a.showAction+"?"+a.idName+"="+i.rowId+a.addParam,e.fmatter.isString(t)||e.fmatter.isNumber(t)?"<a "+n+' href="'+r+'">'+t+"</a>":e.fn.fmatter.defaultFormat(t,i)},e.fn.fmatter.integer=function(t,i){var r=e.extend({},i.integer);return void 0===i.colModel||e.fmatter.isUndefined(i.colModel.formatoptions)||(r=e.extend({},r,i.colModel.formatoptions)),e.fmatter.isEmpty(t)?r.defaultValue:e.fmatter.util.NumberFormat(t,r)},e.fn.fmatter.number=function(t,i){var r=e.extend({},i.number);return void 0===i.colModel||e.fmatter.isUndefined(i.colModel.formatoptions)||(r=e.extend({},r,i.colModel.formatoptions)),e.fmatter.isEmpty(t)?r.defaultValue:e.fmatter.util.NumberFormat(t,r)},e.fn.fmatter.currency=function(t,i){var r=e.extend({},i.currency);return void 0===i.colModel||e.fmatter.isUndefined(i.colModel.formatoptions)||(r=e.extend({},r,i.colModel.formatoptions)),e.fmatter.isEmpty(t)?r.defaultValue:e.fmatter.util.NumberFormat(t,r)},e.fn.fmatter.date=function(t,i,r,a){var n=e.extend({},i.date);return void 0===i.colModel||e.fmatter.isUndefined(i.colModel.formatoptions)||(n=e.extend({},n,i.colModel.formatoptions)),n.reformatAfterEdit||"edit"!=a?e.fmatter.isEmpty(t)?e.fn.fmatter.defaultFormat(t,i):e.fmatter.util.DateFormat(n.srcformat,t,n.newformat,n):e.fn.fmatter.defaultFormat(t,i)},e.fn.fmatter.select=function(t,i){t=String(t);var r,a,n=!1,o=[];if(e.fmatter.isUndefined(i.colModel.formatoptions)?e.fmatter.isUndefined(i.colModel.editoptions)||(n=i.colModel.editoptions.value,r=void 0===i.colModel.editoptions.separator?":":i.colModel.editoptions.separator,a=void 0===i.colModel.editoptions.delimiter?";":i.colModel.editoptions.delimiter):(n=i.colModel.formatoptions.value,r=void 0===i.colModel.formatoptions.separator?":":i.colModel.formatoptions.separator,a=void 0===i.colModel.formatoptions.delimiter?";":i.colModel.formatoptions.delimiter),n){var s,l=i.colModel.editoptions.multiple===!0,d=[];if(l&&(d=t.split(","),d=e.map(d,function(t){return e.trim(t)})),e.fmatter.isString(n)){var u,c=n.split(a),p=0;for(u=0;u<c.length;u++)if(s=c[u].split(r),s.length>2&&(s[1]=e.map(s,function(e,t){if(t>0)return e}).join(r)),l)e.inArray(s[0],d)>-1&&(o[p]=s[1],p++);else if(e.trim(s[0])==e.trim(t)){o[0]=s[1];break}}else e.fmatter.isObject(n)&&(l?o=e.map(d,function(e){return n[e]}):o[0]=n[t]||"")}return t=o.join(", "),""===t?e.fn.fmatter.defaultFormat(t,i):t},e.fn.fmatter.rowactions=function(t){var i=e(this).closest("tr.jqgrow"),r=e(this).parent(),a=i.attr("id"),n=e(this).closest("table.ui-jqgrid-btable"),o=n[0],s=o.p,l=s.colModel[e.jgrid.getCellIndex(this)],d={keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null,restoreAfterError:!0,mtype:"POST",delOptions:{},editOptions:{}},u=function(t,i){e.isFunction(d.afterSave)&&d.afterSave.call(o,t,i),r.find("div.ui-inline-edit,div.ui-inline-del").show(),r.find("div.ui-inline-save,div.ui-inline-cancel").hide()},c=function(t){e.isFunction(d.afterRestore)&&d.afterRestore.call(o,t),r.find("div.ui-inline-edit,div.ui-inline-del").show(),r.find("div.ui-inline-save,div.ui-inline-cancel").hide()};e.fmatter.isUndefined(l.formatoptions)||(d=e.extend(d,l.formatoptions)),e.fmatter.isUndefined(s.editOptions)||(d.editOptions=s.editOptions),e.fmatter.isUndefined(s.delOptions)||(d.delOptions=s.delOptions),i.hasClass("jqgrid-new-row")&&(d.extraparam[s.prmNames.oper]=s.prmNames.addoper);var p={keys:d.keys,oneditfunc:d.onEdit,successfunc:d.onSuccess,url:d.url,extraparam:d.extraparam,aftersavefunc:u,errorfunc:d.onError,afterrestorefunc:c,restoreAfterError:d.restoreAfterError,mtype:d.mtype};switch(t){case"edit":n.jqGrid("editRow",a,p),r.find("div.ui-inline-edit,div.ui-inline-del").hide(),r.find("div.ui-inline-save,div.ui-inline-cancel").show(),n.triggerHandler("jqGridAfterGridComplete");break;case"save":n.jqGrid("saveRow",a,p)&&(r.find("div.ui-inline-edit,div.ui-inline-del").show(),r.find("div.ui-inline-save,div.ui-inline-cancel").hide(),n.triggerHandler("jqGridAfterGridComplete"));break;case"cancel":n.jqGrid("restoreRow",a,c),r.find("div.ui-inline-edit,div.ui-inline-del").show(),r.find("div.ui-inline-save,div.ui-inline-cancel").hide(),n.triggerHandler("jqGridAfterGridComplete");break;case"del":n.jqGrid("delGridRow",a,d.delOptions);break;case"formedit":n.jqGrid("setSelection",a),n.jqGrid("editGridRow",a,d.editOptions)}},e.fn.fmatter.actions=function(t,i){var r,a={keys:!1,editbutton:!0,delbutton:!0,editformbutton:!1},n=i.rowId,o="";return e.fmatter.isUndefined(i.colModel.formatoptions)||(a=e.extend(a,i.colModel.formatoptions)),void 0===n||e.fmatter.isEmpty(n)?"":(a.editformbutton?(r="onclick=jQuery.fn.fmatter.rowactions.call(this,'formedit'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",o+="<div title='"+e.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+r+"><span class='ui-icon ui-icon-pencil'></span></div>"):a.editbutton&&(r="onclick=jQuery.fn.fmatter.rowactions.call(this,'edit'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover') ",o+="<div title='"+e.jgrid.nav.edittitle+"' style='float:left;cursor:pointer;' class='ui-pg-div ui-inline-edit' "+r+"><span class='ui-icon ui-icon-pencil'></span></div>"),a.delbutton&&(r="onclick=jQuery.fn.fmatter.rowactions.call(this,'del'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",o+="<div title='"+e.jgrid.nav.deltitle+"' style='float:left;margin-left:5px;' class='ui-pg-div ui-inline-del' "+r+"><span class='ui-icon ui-icon-trash'></span></div>"),r="onclick=jQuery.fn.fmatter.rowactions.call(this,'save'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",o+="<div title='"+e.jgrid.edit.bSubmit+"' style='float:left;display:none' class='ui-pg-div ui-inline-save' "+r+"><span class='ui-icon ui-icon-disk'></span></div>",r="onclick=jQuery.fn.fmatter.rowactions.call(this,'cancel'); onmouseover=jQuery(this).addClass('ui-state-hover'); onmouseout=jQuery(this).removeClass('ui-state-hover'); ",o+="<div title='"+e.jgrid.edit.bCancel+"' style='float:left;display:none;margin-left:5px;' class='ui-pg-div ui-inline-cancel' "+r+"><span class='ui-icon ui-icon-cancel'></span></div>","<div style='margin-left:8px;'>"+o+"</div>")},e.unformat=function(t,i,r,a){var n,o,s=i.colModel.formatter,l=i.colModel.formatoptions||{},d=/([\.\*\_\'\(\)\{\}\+\?\\])/g,u=i.colModel.unformat||e.fn.fmatter[s]&&e.fn.fmatter[s].unformat;if(void 0!==u&&e.isFunction(u))n=u.call(this,e(t).text(),i,t);else if(!e.fmatter.isUndefined(s)&&e.fmatter.isString(s)){var c,p=e.jgrid.formatter||{};switch(s){case"integer":l=e.extend({},p.integer,l),o=l.thousandsSeparator.replace(d,"\\$1"),c=new RegExp(o,"g"),n=e(t).text().replace(c,"");break;case"number":l=e.extend({},p.number,l),o=l.thousandsSeparator.replace(d,"\\$1"),c=new RegExp(o,"g"),n=e(t).text().replace(c,"").replace(l.decimalSeparator,".");break;case"currency":l=e.extend({},p.currency,l),o=l.thousandsSeparator.replace(d,"\\$1"),c=new RegExp(o,"g"),n=e(t).text(),l.prefix&&l.prefix.length&&(n=n.substr(l.prefix.length)),l.suffix&&l.suffix.length&&(n=n.substr(0,n.length-l.suffix.length)),n=n.replace(c,"").replace(l.decimalSeparator,".");break;case"checkbox":var h=i.colModel.editoptions?i.colModel.editoptions.value.split(":"):["Yes","No"];n=e("input",t).is(":checked")?h[0]:h[1];break;case"select":n=e.unformat.select(t,i,r,a);break;case"actions":return"";default:n=e(t).text()}}return void 0!==n?n:a===!0?e(t).text():e.jgrid.htmlDecode(e(t).html())},e.unformat.select=function(t,i,r,a){var n=[],o=e(t).text();if(a===!0)return o;var s=e.extend({},e.fmatter.isUndefined(i.colModel.formatoptions)?i.colModel.editoptions:i.colModel.formatoptions),l=void 0===s.separator?":":s.separator,d=void 0===s.delimiter?";":s.delimiter;if(s.value){var u,c=s.value,p=s.multiple===!0,h=[];if(p&&(h=o.split(","),h=e.map(h,function(t){return e.trim(t)})),e.fmatter.isString(c)){var f,g=c.split(d),m=0;for(f=0;f<g.length;f++)if(u=g[f].split(l),u.length>2&&(u[1]=e.map(u,function(e,t){if(t>0)return e}).join(l)),p)e.inArray(u[1],h)>-1&&(n[m]=u[0],m++);else if(e.trim(u[1])==e.trim(o)){n[0]=u[0];break}}else(e.fmatter.isObject(c)||e.isArray(c))&&(p||(h[0]=o),n=e.map(h,function(t){var i;if(e.each(c,function(e,r){if(r==t)return i=e,!1}),void 0!==i)return i}));return n.join(", ")}return o||""},e.unformat.date=function(t,i){var r=e.jgrid.formatter.date||{};return e.fmatter.isUndefined(i.formatoptions)||(r=e.extend({},r,i.formatoptions)),e.fmatter.isEmpty(t)?e.fn.fmatter.defaultFormat(t,i):e.fmatter.util.DateFormat(r.newformat,t,r.srcformat,r)}}(jQuery),function(e){/*
 * jqGrid common function
 * Tony Tomov tony@trirand.com
 * http://trirand.com/blog/ 
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl-2.0.html
*/
"use strict";e.extend(e.jgrid,{showModal:function(e){e.w.show()},closeModal:function(e){e.w.hide().attr("aria-hidden","true"),e.o&&e.o.remove()},hideModal:function(t,i){if(i=e.extend({jqm:!0,gb:""},i||{}),i.onClose){var r=i.gb&&"string"==typeof i.gb&&"#gbox_"===i.gb.substr(0,6)?i.onClose.call(e("#"+i.gb.substr(6))[0],t):i.onClose(t);if("boolean"==typeof r&&!r)return}if(e.fn.jqm&&i.jqm===!0)e(t).attr("aria-hidden","true").jqmHide();else{if(""!==i.gb)try{e(".jqgrid-overlay:first",i.gb).hide()}catch(a){}e(t).hide().attr("aria-hidden","true")}},findPos:function(e){var t=0,i=0;if(e.offsetParent)do t+=e.offsetLeft,i+=e.offsetTop;while(e=e.offsetParent);return[t,i]},createModal:function(t,i,r,a,n,o,s){r=e.extend(!0,{},e.jgrid.jqModal||{},r);var l,d=document.createElement("div"),u=this;s=e.extend({},s||{}),l="rtl"==e(r.gbox).attr("dir"),d.className="ui-widget ui-widget-content ui-corner-all ui-jqdialog",d.id=t.themodal;var c=document.createElement("div");c.className="ui-jqdialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix",c.id=t.modalhead,e(c).append("<span class='ui-jqdialog-title'>"+r.caption+"</span>");var p=e("<a href='javascript:void(0)' class='ui-jqdialog-titlebar-close ui-corner-all'></a>").hover(function(){p.addClass("ui-state-hover")},function(){p.removeClass("ui-state-hover")}).append("<span class='ui-icon ui-icon-closethick'></span>");e(c).append(p),l?(d.dir="rtl",e(".ui-jqdialog-title",c).css("float","right"),e(".ui-jqdialog-titlebar-close",c).css("left","0.3em")):(d.dir="ltr",e(".ui-jqdialog-title",c).css("float","left"),e(".ui-jqdialog-titlebar-close",c).css("right","0.3em"));var h=document.createElement("div");e(h).addClass("ui-jqdialog-content ui-widget-content").attr("id",t.modalcontent),e(h).append(i),d.appendChild(h),e(d).prepend(c),o===!0?e("body").append(d):"string"==typeof o?e(o).append(d):e(d).insertBefore(a),e(d).css(s),void 0===r.jqModal&&(r.jqModal=!0);var f={};if(e.fn.jqm&&r.jqModal===!0){if(0===r.left&&0===r.top&&r.overlay){var g=[];g=e.jgrid.findPos(n),r.left=g[0]+4,r.top=g[1]+4}f.top=r.top+"px",f.left=r.left}else 0===r.left&&0===r.top||(f.left=r.left,f.top=r.top+"px");if(e("a.ui-jqdialog-titlebar-close",c).click(function(){var i=e("#"+e.jgrid.jqID(t.themodal)).data("onClose")||r.onClose,a=e("#"+e.jgrid.jqID(t.themodal)).data("gbox")||r.gbox;return u.hideModal("#"+e.jgrid.jqID(t.themodal),{gb:a,jqm:r.jqModal,onClose:i}),!1}),0!==r.width&&r.width||(r.width=300),0!==r.height&&r.height||(r.height=200),!r.zIndex){var m=e(a).parents("*[role=dialog]").filter(":first").css("z-index");m?r.zIndex=parseInt(m,10)+2:r.zIndex=950}var v=0;if(l&&f.left&&!o&&(v=e(r.gbox).width()-(isNaN(r.width)?0:parseInt(r.width,10))-8,f.left=parseInt(f.left,10)+parseInt(v,10)),f.left&&(f.left+="px"),e(d).css(e.extend({width:isNaN(r.width)?"auto":r.width+"px",height:isNaN(r.height)?"auto":r.height+"px",zIndex:r.zIndex,overflow:"hidden"},f)).attr({tabIndex:"-1",role:"dialog","aria-labelledby":t.modalhead,"aria-hidden":"true"}),void 0===r.drag&&(r.drag=!0),void 0===r.resize&&(r.resize=!0),r.drag)if(e(c).css("cursor","move"),e.fn.jqDrag)e(d).jqDrag(c);else try{e(d).draggable({handle:e("#"+e.jgrid.jqID(c.id))})}catch(b){}if(r.resize)if(e.fn.jqResize)e(d).append("<div class='jqResize ui-resizable-handle ui-resizable-se ui-icon ui-icon-gripsmall-diagonal-se'></div>"),e("#"+e.jgrid.jqID(t.themodal)).jqResize(".jqResize",!!t.scrollelm&&"#"+e.jgrid.jqID(t.scrollelm));else try{e(d).resizable({handles:"se, sw",alsoResize:!!t.scrollelm&&"#"+e.jgrid.jqID(t.scrollelm)})}catch(_){}r.closeOnEscape===!0&&e(d).keydown(function(i){if(27==i.which){var a=e("#"+e.jgrid.jqID(t.themodal)).data("onClose")||r.onClose;u.hideModal("#"+e.jgrid.jqID(t.themodal),{gb:r.gbox,jqm:r.jqModal,onClose:a})}})},viewModal:function(t,i){if(i=e.extend({toTop:!0,overlay:10,modal:!1,overlayClass:"ui-widget-overlay",onShow:e.jgrid.showModal,onHide:e.jgrid.closeModal,gbox:"",jqm:!0,jqM:!0},i||{}),e.fn.jqm&&i.jqm===!0)i.jqM?e(t).attr("aria-hidden","false").jqm(i).jqmShow():e(t).attr("aria-hidden","false").jqmShow();else{""!==i.gbox&&(e(".jqgrid-overlay:first",i.gbox).show(),e(t).data("gbox",i.gbox)),e(t).show().attr("aria-hidden","false");try{e(":input:visible",t)[0].focus()}catch(r){}}},info_dialog:function(t,i,r,a){var n={width:290,height:"auto",dataheight:"auto",drag:!0,resize:!1,left:250,top:170,zIndex:1e3,jqModal:!0,modal:!1,closeOnEscape:!0,align:"center",buttonalign:"center",buttons:[]};e.extend(!0,n,e.jgrid.jqModal||{},{caption:"<b>"+t+"</b>"},a||{});var o=n.jqModal,s=this;e.fn.jqm&&!o&&(o=!1);var l,d="";if(n.buttons.length>0)for(l=0;l<n.buttons.length;l++)void 0===n.buttons[l].id&&(n.buttons[l].id="info_button_"+l),d+="<a href='javascript:void(0)' id='"+n.buttons[l].id+"' class='fm-button ui-state-default ui-corner-all'>"+n.buttons[l].text+"</a>";var u=isNaN(n.dataheight)?n.dataheight:n.dataheight+"px",c="text-align:"+n.align+";",p="<div id='info_id'>";p+="<div id='infocnt' style='margin:0px;padding-bottom:1em;width:100%;overflow:auto;position:relative;height:"+u+";"+c+"'>"+i+"</div>",p+=r?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+n.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'><a href='javascript:void(0)' id='closedialog' class='fm-button ui-state-default ui-corner-all'>"+r+"</a>"+d+"</div>":""!==d?"<div class='ui-widget-content ui-helper-clearfix' style='text-align:"+n.buttonalign+";padding-bottom:0.8em;padding-top:0.5em;background-image: none;border-width: 1px 0 0 0;'>"+d+"</div>":"",p+="</div>";try{"false"==e("#info_dialog").attr("aria-hidden")&&e.jgrid.hideModal("#info_dialog",{jqm:o}),e("#info_dialog").remove()}catch(h){}e.jgrid.createModal({themodal:"info_dialog",modalhead:"info_head",modalcontent:"info_content",scrollelm:"infocnt"},p,n,"","",!0),d&&e.each(n.buttons,function(t){e("#"+e.jgrid.jqID(this.id),"#info_id").bind("click",function(){return n.buttons[t].onClick.call(e("#info_dialog")),!1})}),e("#closedialog","#info_id").click(function(){return s.hideModal("#info_dialog",{jqm:o}),!1}),e(".fm-button","#info_dialog").hover(function(){e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}),e.isFunction(n.beforeOpen)&&n.beforeOpen(),e.jgrid.viewModal("#info_dialog",{onHide:function(e){e.w.hide().remove(),e.o&&e.o.remove()},modal:n.modal,jqm:o}),e.isFunction(n.afterOpen)&&n.afterOpen();try{e("#info_dialog").focus()}catch(f){}},bindEv:function(t,i,r){e.isFunction(i.dataInit)&&i.dataInit.call(r,t),i.dataEvents&&e.each(i.dataEvents,function(){void 0!==this.data?e(t).bind(this.type,this.data,this.fn):e(t).bind(this.type,this.fn)})},createEl:function(t,i,r,a,n){function o(t,i,r){var a=["dataInit","dataEvents","dataUrl","buildSelect","sopt","searchhidden","defaultValue","attr","custom_element","custom_value"];void 0!==r&&e.isArray(r)&&e.merge(a,r),e.each(i,function(i,r){e.inArray(i,a)===-1&&e(t).attr(i,r)}),i.hasOwnProperty("id")||e(t).attr("id",e.jgrid.randId())}var s="",l=this;switch(t){case"textarea":s=document.createElement("textarea"),a?i.cols||e(s).css({width:"98%"}):i.cols||(i.cols=20),i.rows||(i.rows=2),("&nbsp;"==r||"&#160;"==r||1==r.length&&160==r.charCodeAt(0))&&(r=""),s.value=r,o(s,i),e(s).attr({role:"textbox",multiline:"true"});break;case"checkbox":if(s=document.createElement("input"),s.type="checkbox",i.value){var d=i.value.split(":");r===d[0]&&(s.checked=!0,s.defaultChecked=!0),s.value=d[0],e(s).attr("offval",d[1])}else{var u=r.toLowerCase();u.search(/(false|0|no|off|undefined)/i)<0&&""!==u?(s.checked=!0,s.defaultChecked=!0,s.value=r):s.value="on",e(s).attr("offval","off")}o(s,i,["value"]),e(s).attr("role","checkbox");break;case"select":s=document.createElement("select"),s.setAttribute("role","select");var c,p=[];if(i.multiple===!0?(c=!0,s.multiple="multiple",e(s).attr("aria-multiselectable","true")):c=!1,void 0!==i.dataUrl){var h=i.name?String(i.id).substring(0,String(i.id).length-String(i.name).length-1):String(i.id),f=i.postData||n.postData;l.p&&l.p.idPrefix?h=e.jgrid.stripPref(l.p.idPrefix,h):f=void 0,e.ajax(e.extend({url:i.dataUrl,type:"GET",dataType:"html",data:e.isFunction(f)?f.call(l,h,r,String(i.name)):f,context:{elem:s,options:i,vl:r},success:function(t){var i,r=[],a=this.elem,n=this.vl,s=e.extend({},this.options),d=s.multiple===!0;if(e.isFunction(s.buildSelect)){var u=s.buildSelect.call(l,t);i=e(u).html()}else i=e(t).html();i&&(e(a).append(i),o(a,s),void 0===s.size&&(s.size=d?3:1),d?(r=n.split(","),r=e.map(r,function(t){return e.trim(t)})):r[0]=e.trim(n),setTimeout(function(){e("option",a).each(function(t){0===t&&a.multiple&&(this.selected=!1),e(this).attr("role","option"),(e.inArray(e.trim(e(this).text()),r)>-1||e.inArray(e.trim(e(this).val()),r)>-1)&&(this.selected="selected")})},0))}},n||{}))}else if(i.value){var g;void 0===i.size&&(i.size=c?3:1),c&&(p=r.split(","),p=e.map(p,function(t){return e.trim(t)})),"function"==typeof i.value&&(i.value=i.value());var m,v,b,_=void 0===i.separator?":":i.separator,y=void 0===i.delimiter?";":i.delimiter;if("string"==typeof i.value)for(m=i.value.split(y),g=0;g<m.length;g++)v=m[g].split(_),v.length>2&&(v[1]=e.map(v,function(e,t){if(t>0)return e}).join(_)),b=document.createElement("option"),b.setAttribute("role","option"),b.value=v[0],b.innerHTML=v[1],s.appendChild(b),c||e.trim(v[0])!=e.trim(r)&&e.trim(v[1])!=e.trim(r)||(b.selected="selected"),c&&(e.inArray(e.trim(v[1]),p)>-1||e.inArray(e.trim(v[0]),p)>-1)&&(b.selected="selected");else if("object"==typeof i.value){var x,w=i.value;for(x in w)w.hasOwnProperty(x)&&(b=document.createElement("option"),b.setAttribute("role","option"),b.value=x,b.innerHTML=w[x],s.appendChild(b),c||e.trim(x)!=e.trim(r)&&e.trim(w[x])!=e.trim(r)||(b.selected="selected"),c&&(e.inArray(e.trim(w[x]),p)>-1||e.inArray(e.trim(x),p)>-1)&&(b.selected="selected"))}o(s,i,["value"])}break;case"text":case"password":case"button":var j;j="button"==t?"button":"textbox",s=document.createElement("input"),s.type=t,s.value=r,o(s,i),"button"!=t&&(a?i.size||e(s).css({width:"98%"}):i.size||(i.size=20)),e(s).attr("role",j);break;case"image":case"file":s=document.createElement("input"),s.type=t,o(s,i);break;case"custom":s=document.createElement("span");try{if(!e.isFunction(i.custom_element))throw"e1";var k=i.custom_element.call(l,r,i);if(!k)throw"e2";k=e(k).addClass("customelement").attr({id:i.id,name:i.name}),e(s).empty().append(k)}catch(C){"e1"==C&&e.jgrid.info_dialog(e.jgrid.errors.errcap,"function 'custom_element' "+e.jgrid.edit.msg.nodefined,e.jgrid.edit.bClose),"e2"==C?e.jgrid.info_dialog(e.jgrid.errors.errcap,"function 'custom_element' "+e.jgrid.edit.msg.novalue,e.jgrid.edit.bClose):e.jgrid.info_dialog(e.jgrid.errors.errcap,"string"==typeof C?C:C.message,e.jgrid.edit.bClose)}}return s},checkDate:function(e,t){var i,r=function(e){return e%4!==0||e%100===0&&e%400!==0?28:29},a=function(e){var t;for(t=1;t<=e;t++)this[t]=31,4!=t&&6!=t&&9!=t&&11!=t||(this[t]=30),2==t&&(this[t]=29);return this},n={};if(e=e.toLowerCase(),i=e.indexOf("/")!=-1?"/":e.indexOf("-")!=-1?"-":e.indexOf(".")!=-1?".":"/",e=e.split(i),t=t.split(i),3!=t.length)return!1;var o,s,l=-1,d=-1,u=-1;for(s=0;s<e.length;s++){var c=isNaN(t[s])?0:parseInt(t[s],10);n[e[s]]=c,o=e[s],o.indexOf("y")!=-1&&(l=s),o.indexOf("m")!=-1&&(u=s),o.indexOf("d")!=-1&&(d=s)}o="y"==e[l]||"yyyy"==e[l]?4:"yy"==e[l]?2:-1;var p,h=a(12);return l!==-1&&(p=n[e[l]].toString(),2==o&&1==p.length&&(o=1),p.length==o&&(0!==n[e[l]]||"00"==t[l])&&(u!==-1&&(p=n[e[u]].toString(),!(p.length<1||n[e[u]]<1||n[e[u]]>12)&&(d!==-1&&(p=n[e[d]].toString(),!(p.length<1||n[e[d]]<1||n[e[d]]>31||2==n[e[u]]&&n[e[d]]>r(n[e[l]])||n[e[d]]>h[n[e[u]]]))))))},isEmpty:function(e){return!(!e.match(/^\s+$/)&&""!==e)},checkTime:function(t){var i,r=/^(\d{1,2}):(\d{2})([ap]m)?$/;if(!e.jgrid.isEmpty(t)){if(i=t.match(r),!i)return!1;if(i[3]){if(i[1]<1||i[1]>12)return!1}else if(i[1]>23)return!1;if(i[2]>59)return!1}return!0},checkValues:function(t,i,r,a,n){var o,s,l,d,u;if(void 0===a)if("string"==typeof i){for(s=0,u=r.p.colModel.length;s<u;s++)if(r.p.colModel[s].name==i){o=r.p.colModel[s].editrules,i=s;try{l=r.p.colModel[s].formoptions.label}catch(c){}break}}else i>=0&&(o=r.p.colModel[i].editrules);else o=a,l=void 0===n?"_":n;if(o){if(l||(l=r.p.colNames[i]),o.required===!0&&e.jgrid.isEmpty(t))return[!1,l+": "+e.jgrid.edit.msg.required,""];var p=o.required!==!1;if(o.number===!0&&(p!==!1||!e.jgrid.isEmpty(t))&&isNaN(t))return[!1,l+": "+e.jgrid.edit.msg.number,""];if(void 0!==o.minValue&&!isNaN(o.minValue)&&parseFloat(t)<parseFloat(o.minValue))return[!1,l+": "+e.jgrid.edit.msg.minValue+" "+o.minValue,""];if(void 0!==o.maxValue&&!isNaN(o.maxValue)&&parseFloat(t)>parseFloat(o.maxValue))return[!1,l+": "+e.jgrid.edit.msg.maxValue+" "+o.maxValue,""];var h;if(o.email===!0&&!(p===!1&&e.jgrid.isEmpty(t)||(h=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,h.test(t))))return[!1,l+": "+e.jgrid.edit.msg.email,""];if(o.integer===!0&&(p!==!1||!e.jgrid.isEmpty(t))){if(isNaN(t))return[!1,l+": "+e.jgrid.edit.msg.integer,""];if(t%1!==0||t.indexOf(".")!=-1)return[!1,l+": "+e.jgrid.edit.msg.integer,""]}if(o.date===!0&&!(p===!1&&e.jgrid.isEmpty(t)||(d=r.p.colModel[i].formatoptions&&r.p.colModel[i].formatoptions.newformat?r.p.colModel[i].formatoptions.newformat:r.p.colModel[i].datefmt||"Y-m-d",e.jgrid.checkDate(d,t))))return[!1,l+": "+e.jgrid.edit.msg.date+" - "+d,""];if(o.time===!0&&!(p===!1&&e.jgrid.isEmpty(t)||e.jgrid.checkTime(t)))return[!1,l+": "+e.jgrid.edit.msg.date+" - hh:mm (am/pm)",""];if(o.url===!0&&!(p===!1&&e.jgrid.isEmpty(t)||(h=/^(((https?)|(ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i,h.test(t))))return[!1,l+": "+e.jgrid.edit.msg.url,""];if(o.custom===!0&&(p!==!1||!e.jgrid.isEmpty(t))){if(e.isFunction(o.custom_func)){var f=o.custom_func.call(r,t,l);return e.isArray(f)?f:[!1,e.jgrid.edit.msg.customarray,""]}return[!1,e.jgrid.edit.msg.customfcheck,""]}}return[!0,"",""]}})}(jQuery),/*
 * jqFilter  jQuery jqGrid filter addon.
 * Copyright (c) 2011, Tony Tomov, tony@trirand.com
 * Dual licensed under the MIT and GPL licenses
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl-2.0.html
 * 
 * The work is inspired from this Stefan Pirvu
 * http://www.codeproject.com/KB/scripting/json-filtering.aspx
 *
 * The filter uses JSON entities to hold filter rules and groups. Here is an example of a filter:

{ "groupOp": "AND",
      "groups" : [ 
        { "groupOp": "OR",
            "rules": [
                { "field": "name", "op": "eq", "data": "England" }, 
                { "field": "id", "op": "le", "data": "5"}
             ]
        } 
      ],
      "rules": [
        { "field": "name", "op": "eq", "data": "Romania" }, 
        { "field": "id", "op": "le", "data": "1"}
      ]
}
*/
function(e){"use strict";e.fn.jqFilter=function(t){if("string"==typeof t){var i=e.fn.jqFilter[t];if(!i)throw"jqFilter - No such method: "+t;var r=e.makeArray(arguments).slice(1);return i.apply(this,r)}var a=e.extend(!0,{filter:null,columns:[],onChange:null,afterRedraw:null,checkValues:null,error:!1,errmsg:"",errorcheck:!0,showQuery:!0,sopt:null,ops:[{name:"eq",description:"equal",operator:"="},{name:"ne",description:"not equal",operator:"<>"},{name:"lt",description:"less",operator:"<"},{name:"le",description:"less or equal",operator:"<="},{name:"gt",description:"greater",operator:">"},{name:"ge",description:"greater or equal",operator:">="},{name:"bw",description:"begins with",operator:"LIKE"},{name:"bn",description:"does not begin with",operator:"NOT LIKE"},{name:"in",description:"in",operator:"IN"},{name:"ni",description:"not in",operator:"NOT IN"},{name:"ew",description:"ends with",operator:"LIKE"},{name:"en",description:"does not end with",operator:"NOT LIKE"},{name:"cn",description:"contains",operator:"LIKE"},{name:"nc",description:"does not contain",operator:"NOT LIKE"},{name:"nu",description:"is null",operator:"IS NULL"},{name:"nn",description:"is not null",operator:"IS NOT NULL"}],numopts:["eq","ne","lt","le","gt","ge","nu","nn","in","ni"],stropts:["eq","ne","bw","bn","ew","en","cn","nc","nu","nn","in","ni"],strarr:["text","string","blob"],_gridsopt:[],groupOps:[{op:"AND",text:"AND"},{op:"OR",text:"OR"}],groupButton:!0,ruleButtons:!0,direction:"ltr"},e.jgrid.filter,t||{});return this.each(function(){if(!this.filter){this.p=a,null!==this.p.filter&&void 0!==this.p.filter||(this.p.filter={groupOp:this.p.groupOps[0].op,rules:[],groups:[]});var t,i,r=this.p.columns.length,n=/msie/i.test(navigator.userAgent)&&!window.opera;if(this.p._gridsopt.length)for(t=0;t<this.p._gridsopt.length;t++)this.p.ops[t].description=this.p._gridsopt[t];if(this.p.initFilter=e.extend(!0,{},this.p.filter),r){for(t=0;t<r;t++)i=this.p.columns[t],i.stype?i.inputtype=i.stype:i.inputtype||(i.inputtype="text"),i.sorttype?i.searchtype=i.sorttype:i.searchtype||(i.searchtype="string"),void 0===i.hidden&&(i.hidden=!1),i.label||(i.label=i.name),i.index&&(i.name=i.index),i.hasOwnProperty("searchoptions")||(i.searchoptions={}),i.hasOwnProperty("searchrules")||(i.searchrules={});this.p.showQuery&&e(this).append("<table class='queryresult ui-widget ui-widget-content' style='display:block;max-width:440px;border:0px none;' dir='"+this.p.direction+"'><tbody><tr><td class='query'></td></tr></tbody></table>");var o=function(t,i){var r=[!0,""];if(e.isFunction(i.searchrules))r=i.searchrules(t,i);else if(e.jgrid&&e.jgrid.checkValues)try{r=e.jgrid.checkValues(t,-1,null,i.searchrules,i.label)}catch(n){}r&&r.length&&r[0]===!1&&(a.error=!r[0],a.errmsg=r[1])};this.onchange=function(){return this.p.error=!1,this.p.errmsg="",!!e.isFunction(this.p.onChange)&&this.p.onChange.call(this,this.p)},this.reDraw=function(){e("table.group:first",this).remove();var t=this.createTableForGroup(a.filter,null);e(this).append(t),e.isFunction(this.p.afterRedraw)&&this.p.afterRedraw.call(this,this.p)},this.createTableForGroup=function(t,i){var r,n=this,o=e("<table class='group ui-widget ui-widget-content' style='border:0px none;'><tbody></tbody></table>"),s="left";"rtl"==this.p.direction&&(s="right",o.attr("dir","rtl")),null===i&&o.append("<tr class='error' style='display:none;'><th colspan='5' class='ui-state-error' align='"+s+"'></th></tr>");var l=e("<tr></tr>");o.append(l);var d=e("<th colspan='5' align='"+s+"'></th>");if(l.append(d),this.p.ruleButtons===!0){var u=e("<select class='opsel'></select>");d.append(u);var c,p="";for(r=0;r<a.groupOps.length;r++)c=t.groupOp===n.p.groupOps[r].op?" selected='selected'":"",p+="<option value='"+n.p.groupOps[r].op+"'"+c+">"+n.p.groupOps[r].text+"</option>";u.append(p).bind("change",function(){t.groupOp=e(u).val(),n.onchange()})}var h="<span></span>";if(this.p.groupButton&&(h=e("<input type='button' value='+ {}' title='Add subgroup' class='add-group'/>"),h.bind("click",function(){return void 0===t.groups&&(t.groups=[]),t.groups.push({groupOp:a.groupOps[0].op,rules:[],groups:[]}),n.reDraw(),n.onchange(),!1})),d.append(h),this.p.ruleButtons===!0){var f,g=e("<input type='button' value='+' title='Add rule' class='add-rule ui-add'/>");g.bind("click",function(){for(void 0===t.rules&&(t.rules=[]),r=0;r<n.p.columns.length;r++){var i=void 0===n.p.columns[r].search||n.p.columns[r].search,a=n.p.columns[r].hidden===!0,o=n.p.columns[r].searchoptions.searchhidden===!0;if(o&&i||i&&!a){f=n.p.columns[r];break}}var s;return s=f.searchoptions.sopt?f.searchoptions.sopt:n.p.sopt?n.p.sopt:e.inArray(f.searchtype,n.p.strarr)!==-1?n.p.stropts:n.p.numopts,t.rules.push({field:f.name,op:s[0],data:""}),n.reDraw(),!1}),d.append(g)}if(null!==i){var m=e("<input type='button' value='-' title='Delete group' class='delete-group'/>");d.append(m),m.bind("click",function(){for(r=0;r<i.groups.length;r++)if(i.groups[r]===t){i.groups.splice(r,1);break}return n.reDraw(),n.onchange(),!1})}if(void 0!==t.groups)for(r=0;r<t.groups.length;r++){var v=e("<tr></tr>");o.append(v);var b=e("<td class='first'></td>");v.append(b);var _=e("<td colspan='4'></td>");_.append(this.createTableForGroup(t.groups[r],t)),v.append(_)}if(void 0===t.groupOp&&(t.groupOp=n.p.groupOps[0].op),void 0!==t.rules)for(r=0;r<t.rules.length;r++)o.append(this.createTableRowForRule(t.rules[r],t));return o},this.createTableRowForRule=function(t,i){var r,o,s,l,d,u=this,c=e("<tr></tr>"),p="";c.append("<td class='first'></td>");var h=e("<td class='columns'></td>");c.append(h);var f,g=e("<select></select>"),m=[];h.append(g),g.bind("change",function(){for(t.field=e(g).val(),s=e(this).parents("tr:first"),r=0;r<u.p.columns.length;r++)if(u.p.columns[r].name===t.field){l=u.p.columns[r];break}if(l){l.searchoptions.id=e.jgrid.randId(),n&&"text"===l.inputtype&&(l.searchoptions.size||(l.searchoptions.size=10));var i=e.jgrid.createEl(l.inputtype,l.searchoptions,"",!0,u.p.ajaxSelectOptions,!0);e(i).addClass("input-elm"),o=l.searchoptions.sopt?l.searchoptions.sopt:u.p.sopt?u.p.sopt:e.inArray(l.searchtype,u.p.strarr)!==-1?u.p.stropts:u.p.numopts;var a="",d=0;for(m=[],e.each(u.p.ops,function(){m.push(this.name)}),r=0;r<o.length;r++)f=e.inArray(o[r],m),f!==-1&&(0===d&&(t.op=u.p.ops[f].name),a+="<option value='"+u.p.ops[f].name+"'>"+u.p.ops[f].description+"</option>",d++);if(e(".selectopts",s).empty().append(a),e(".selectopts",s)[0].selectedIndex=0,e.jgrid.msie&&e.jgrid.msiever()<9){var c=parseInt(e("select.selectopts",s)[0].offsetWidth,10)+1;e(".selectopts",s).width(c),e(".selectopts",s).css("width","auto")}e(".data",s).empty().append(i),e.jgrid.bindEv(i,l.searchoptions,u),e(".input-elm",s).bind("change",function(i){var r=e(this).hasClass("ui-autocomplete-input")?200:0;setTimeout(function(){var r=i.target;t.data="SPAN"===r.nodeName.toUpperCase()&&l.searchoptions&&e.isFunction(l.searchoptions.custom_value)?l.searchoptions.custom_value(e(r).children(".customelement:first"),"get"):r.value,u.onchange()},r)}),setTimeout(function(){t.data=e(i).val(),u.onchange()},0)}});var v=0;for(r=0;r<u.p.columns.length;r++){var b=void 0===u.p.columns[r].search||u.p.columns[r].search,_=u.p.columns[r].hidden===!0,y=u.p.columns[r].searchoptions.searchhidden===!0;(y&&b||b&&!_)&&(d="",t.field===u.p.columns[r].name&&(d=" selected='selected'",v=r),p+="<option value='"+u.p.columns[r].name+"'"+d+">"+u.p.columns[r].label+"</option>")}g.append(p);var x=e("<td class='operators'></td>");c.append(x),l=a.columns[v],l.searchoptions.id=e.jgrid.randId(),n&&"text"===l.inputtype&&(l.searchoptions.size||(l.searchoptions.size=10));var w=e.jgrid.createEl(l.inputtype,l.searchoptions,t.data,!0,u.p.ajaxSelectOptions,!0);"nu"!=t.op&&"nn"!=t.op||(e(w).attr("readonly","true"),e(w).attr("disabled","true"));var j=e("<select class='selectopts'></select>");for(x.append(j),j.bind("change",function(){t.op=e(j).val(),s=e(this).parents("tr:first");var i=e(".input-elm",s)[0];"nu"===t.op||"nn"===t.op?(t.data="",i.value="",i.setAttribute("readonly","true"),i.setAttribute("disabled","true")):(i.removeAttribute("readonly"),i.removeAttribute("disabled")),u.onchange()}),o=l.searchoptions.sopt?l.searchoptions.sopt:u.p.sopt?u.p.sopt:e.inArray(l.searchtype,u.p.strarr)!==-1?u.p.stropts:u.p.numopts,p="",e.each(u.p.ops,function(){m.push(this.name)}),r=0;r<o.length;r++)f=e.inArray(o[r],m),f!==-1&&(d=t.op===u.p.ops[f].name?" selected='selected'":"",p+="<option value='"+u.p.ops[f].name+"'"+d+">"+u.p.ops[f].description+"</option>");j.append(p);var k=e("<td class='data'></td>");c.append(k),k.append(w),e.jgrid.bindEv(w,l.searchoptions,u),e(w).addClass("input-elm").bind("change",function(){t.data="custom"===l.inputtype?l.searchoptions.custom_value(e(this).children(".customelement:first"),"get"):e(this).val(),u.onchange()});var C=e("<td></td>");if(c.append(C),this.p.ruleButtons===!0){var D=e("<input type='button' value='-' title='Delete rule' class='delete-rule ui-del'/>");C.append(D),D.bind("click",function(){for(r=0;r<i.rules.length;r++)if(i.rules[r]===t){i.rules.splice(r,1);break}return u.reDraw(),u.onchange(),!1})}return c},this.getStringForGroup=function(e){var t,i="(";if(void 0!==e.groups)for(t=0;t<e.groups.length;t++){i.length>1&&(i+=" "+e.groupOp+" ");try{i+=this.getStringForGroup(e.groups[t])}catch(r){alert(r)}}if(void 0!==e.rules)try{for(t=0;t<e.rules.length;t++)i.length>1&&(i+=" "+e.groupOp+" "),i+=this.getStringForRule(e.rules[t])}catch(a){alert(a)}return i+=")","()"===i?"":i},this.getStringForRule=function(t){var i,r,n,s,l="",d="",u=["int","integer","float","number","currency"];for(i=0;i<this.p.ops.length;i++)if(this.p.ops[i].name===t.op){l=this.p.ops[i].operator,d=this.p.ops[i].name;break}for(i=0;i<this.p.columns.length;i++)if(this.p.columns[i].name===t.field){r=this.p.columns[i];break}return null==r?"":(s=t.data,"bw"!==d&&"bn"!==d||(s+="%"),"ew"!==d&&"en"!==d||(s="%"+s),"cn"!==d&&"nc"!==d||(s="%"+s+"%"),"in"!==d&&"ni"!==d||(s=" ("+s+")"),a.errorcheck&&o(t.data,r),n=e.inArray(r.searchtype,u)!==-1||"nn"===d||"nu"===d?t.field+" "+l+" "+s:t.field+" "+l+' "'+s+'"')},this.resetFilter=function(){this.p.filter=e.extend(!0,{},this.p.initFilter),this.reDraw(),this.onchange()},this.hideError=function(){e("th.ui-state-error",this).html(""),e("tr.error",this).hide()},this.showError=function(){e("th.ui-state-error",this).html(this.p.errmsg),e("tr.error",this).show()},this.toUserFriendlyString=function(){return this.getStringForGroup(a.filter)},this.toString=function(){function e(e){if(i.p.errorcheck){var t,r;for(t=0;t<i.p.columns.length;t++)if(i.p.columns[t].name===e.field){r=i.p.columns[t];break}r&&o(e.data,r)}return e.op+"(item."+e.field+",'"+e.data+"')"}function t(i){var r,a="(";if(void 0!==i.groups)for(r=0;r<i.groups.length;r++)a.length>1&&(a+="OR"===i.groupOp?" || ":" && "),a+=t(i.groups[r]);if(void 0!==i.rules)for(r=0;r<i.rules.length;r++)a.length>1&&(a+="OR"===i.groupOp?" || ":" && "),a+=e(i.rules[r]);return a+=")","()"===a?"":a}var i=this;return t(this.p.filter)},this.reDraw(),this.p.showQuery&&this.onchange(),this.filter=!0}}})},e.extend(e.fn.jqFilter,{toSQLString:function(){var e="";return this.each(function(){e=this.toUserFriendlyString()}),e},filterData:function(){var e;return this.each(function(){e=this.p.filter}),e},getParameter:function(e){return void 0!==e&&this.p.hasOwnProperty(e)?this.p[e]:this.p},resetFilter:function(){return this.each(function(){this.resetFilter()})},addFilter:function(t){"string"==typeof t&&(t=e.jgrid.parse(t)),this.each(function(){this.p.filter=t,this.reDraw(),this.onchange()})}})}(jQuery),function(e){/**
 * jqGrid extension for form editing Grid Data
 * Tony Tomov tony@trirand.com
 * http://trirand.com/blog/
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl-2.0.html
**/
"use strict";e.jgrid.extend({searchGrid:function(t){return t=e.extend(!0,{recreateFilter:!1,drag:!0,sField:"searchField",sValue:"searchString",sOper:"searchOper",sFilter:"filters",loadDefaults:!0,beforeShowSearch:null,afterShowSearch:null,onInitializeSearch:null,afterRedraw:null,afterChange:null,closeAfterSearch:!1,closeAfterReset:!1,closeOnEscape:!1,searchOnEnter:!1,multipleSearch:!1,multipleGroup:!1,top:0,left:0,jqModal:!0,modal:!1,resize:!0,width:450,height:"auto",dataheight:"auto",showQuery:!1,errorcheck:!0,sopt:null,stringResult:void 0,onClose:null,onSearch:null,onReset:null,toTop:!0,overlay:30,columns:[],tmplNames:null,tmplFilters:null,tmplLabel:" Template: ",showOnLoad:!1,layer:null},e.jgrid.search,t||{}),this.each(function(){function i(i){n=e(r).triggerHandler("jqGridFilterBeforeShow",[i]),void 0===n&&(n=!0),n&&e.isFunction(t.beforeShowSearch)&&(n=t.beforeShowSearch.call(r,i)),n&&(e.jgrid.viewModal("#"+e.jgrid.jqID(o.themodal),{gbox:"#gbox_"+e.jgrid.jqID(a),jqm:t.jqModal,modal:t.modal,overlay:t.overlay,toTop:t.toTop}),e(r).triggerHandler("jqGridFilterAfterShow",[i]),e.isFunction(t.afterShowSearch)&&t.afterShowSearch.call(r,i))}var r=this;if(r.grid){var a="fbox_"+r.p.id,n=!0,o={themodal:"searchmod"+a,modalhead:"searchhd"+a,modalcontent:"searchcnt"+a,scrollelm:a},s=r.p.postData[t.sFilter];if("string"==typeof s&&(s=e.jgrid.parse(s)),t.recreateFilter===!0&&e("#"+e.jgrid.jqID(o.themodal)).remove(),void 0!==e("#"+e.jgrid.jqID(o.themodal))[0])i(e("#fbox_"+e.jgrid.jqID(+r.p.id)));else{var l=e("<div><div id='"+a+"' class='searchFilter' style='overflow:auto'></div></div>").insertBefore("#gview_"+e.jgrid.jqID(r.p.id)),d="left",u="";"rtl"==r.p.direction&&(d="right",u=" style='text-align:left'",l.attr("dir","rtl"));var c,p,h=e.extend([],r.p.colModel),f="<a href='javascript:void(0)' id='"+a+"_search' class='fm-button ui-state-default ui-corner-all fm-button-icon-right ui-reset'><span class='ui-icon ui-icon-search'></span>"+t.Find+"</a>",g="<a href='javascript:void(0)' id='"+a+"_reset' class='fm-button ui-state-default ui-corner-all fm-button-icon-left ui-search'><span class='ui-icon ui-icon-arrowreturnthick-1-w'></span>"+t.Reset+"</a>",m="",v="",b=!1,_=-1;if(t.showQuery&&(m="<a href='javascript:void(0)' id='"+a+"_query' class='fm-button ui-state-default ui-corner-all fm-button-icon-left'><span class='ui-icon ui-icon-comment'></span>Query</a>"),t.columns.length?h=t.columns:e.each(h,function(e,t){if(t.label||(t.label=r.p.colNames[e]),!b){var i=void 0===t.search||t.search,a=t.hidden===!0,n=t.searchoptions&&t.searchoptions.searchhidden===!0;(n&&i||i&&!a)&&(b=!0,c=t.index||t.name,_=e)}}),!s&&c||t.multipleSearch===!1){var y="eq";_>=0&&h[_].searchoptions&&h[_].searchoptions.sopt?y=h[_].searchoptions.sopt[0]:t.sopt&&t.sopt.length&&(y=t.sopt[0]),s={groupOp:"AND",rules:[{field:c,op:y,data:""}]}}b=!1,t.tmplNames&&t.tmplNames.length&&(b=!0,v=t.tmplLabel,v+="<select class='ui-template'>",v+="<option value='default'>Default</option>",e.each(t.tmplNames,function(e,t){v+="<option value='"+e+"'>"+t+"</option>"}),v+="</select>"),p="<table class='EditTable' style='border:0px none;margin-top:5px' id='"+a+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr><td class='EditButton' style='text-align:"+d+"'>"+g+v+"</td><td class='EditButton' "+u+">"+m+f+"</td></tr></tbody></table>",a=e.jgrid.jqID(a),e("#"+a).jqFilter({columns:h,filter:t.loadDefaults?s:null,showQuery:t.showQuery,errorcheck:t.errorcheck,sopt:t.sopt,groupButton:t.multipleGroup,ruleButtons:t.multipleSearch,afterRedraw:t.afterRedraw,_gridsopt:e.jgrid.search.odata,ajaxSelectOptions:r.p.ajaxSelectOptions,groupOps:t.groupOps,onChange:function(){this.p.showQuery&&e(".query",this).html(this.toUserFriendlyString()),e.isFunction(t.afterChange)&&t.afterChange.call(r,e("#"+a),t)},direction:r.p.direction}),l.append(p),b&&t.tmplFilters&&t.tmplFilters.length&&e(".ui-template",l).bind("change",function(){var i=e(this).val();return"default"==i?e("#"+a).jqFilter("addFilter",s):e("#"+a).jqFilter("addFilter",t.tmplFilters[parseInt(i,10)]),!1}),t.multipleGroup===!0&&(t.multipleSearch=!0),e(r).triggerHandler("jqGridFilterInitialize",[e("#"+a)]),e.isFunction(t.onInitializeSearch)&&t.onInitializeSearch.call(r,e("#"+a)),t.gbox="#gbox_"+a,t.layer?e.jgrid.createModal(o,l,t,"#gview_"+e.jgrid.jqID(r.p.id),e("#gbox_"+e.jgrid.jqID(r.p.id))[0],"#"+e.jgrid.jqID(t.layer),{position:"relative"}):e.jgrid.createModal(o,l,t,"#gview_"+e.jgrid.jqID(r.p.id),e("#gbox_"+e.jgrid.jqID(r.p.id))[0]),(t.searchOnEnter||t.closeOnEscape)&&e("#"+e.jgrid.jqID(o.themodal)).keydown(function(i){var r=e(i.target);return!t.searchOnEnter||13!==i.which||r.hasClass("add-group")||r.hasClass("add-rule")||r.hasClass("delete-group")||r.hasClass("delete-rule")||r.hasClass("fm-button")&&r.is("[id$=_query]")?t.closeOnEscape&&27===i.which?(e("#"+e.jgrid.jqID(o.modalhead)).find(".ui-jqdialog-titlebar-close").focus().click(),!1):void 0:(e("#"+a+"_search").focus().click(),!1)}),m&&e("#"+a+"_query").bind("click",function(){return e(".queryresult",l).toggle(),!1}),void 0===t.stringResult&&(t.stringResult=t.multipleSearch),e("#"+a+"_search").bind("click",function(){var i,n=e("#"+a),s={},l=n.jqFilter("filterData");if(t.errorcheck&&(n[0].hideError(),t.showQuery||n.jqFilter("toSQLString"),n[0].p.error))return n[0].showError(),!1;if(t.stringResult){try{i=xmlJsonClass.toJson(l,"","",!1)}catch(d){try{i=JSON.stringify(l)}catch(u){}}"string"==typeof i&&(s[t.sFilter]=i,e.each([t.sField,t.sValue,t.sOper],function(){s[this]=""}))}else t.multipleSearch?(s[t.sFilter]=l,e.each([t.sField,t.sValue,t.sOper],function(){s[this]=""})):(s[t.sField]=l.rules[0].field,s[t.sValue]=l.rules[0].data,s[t.sOper]=l.rules[0].op,s[t.sFilter]="");return r.p.search=!0,e.extend(r.p.postData,s),e(r).triggerHandler("jqGridFilterSearch"),e.isFunction(t.onSearch)&&t.onSearch.call(r),e(r).trigger("reloadGrid",[{page:1}]),t.closeAfterSearch&&e.jgrid.hideModal("#"+e.jgrid.jqID(o.themodal),{gb:"#gbox_"+e.jgrid.jqID(r.p.id),jqm:t.jqModal,onClose:t.onClose}),!1}),e("#"+a+"_reset").bind("click",function(){var i={},n=e("#"+a);return r.p.search=!1,t.multipleSearch===!1?i[t.sField]=i[t.sValue]=i[t.sOper]="":i[t.sFilter]="",n[0].resetFilter(),b&&e(".ui-template",l).val("default"),e.extend(r.p.postData,i),e(r).triggerHandler("jqGridFilterReset"),e.isFunction(t.onReset)&&t.onReset.call(r),e(r).trigger("reloadGrid",[{page:1}]),!1}),i(e("#"+a)),e(".fm-button:not(.ui-state-disabled)",l).hover(function(){e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")})}}})},editGridRow:function(t,i){return i=e.extend(!0,{top:0,left:0,width:300,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:!1,jqModal:!0,closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,_savedData:{},processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0},e.jgrid.edit,i||{}),rp_ge[e(this)[0].p.id]=i,this.each(function(){function r(){return e(w+" > tbody > tr > td > .FormElement").each(function(){var t=e(".customelement",this);if(t.length){var i=t[0],r=e(i).attr("name");e.each(h.p.colModel,function(){if(this.name===r&&this.editoptions&&e.isFunction(this.editoptions.custom_value)){try{if(f[r]=this.editoptions.custom_value.call(h,e("#"+e.jgrid.jqID(r),w),"get"),void 0===f[r])throw"e1"}catch(t){"e1"===t?e.jgrid.info_dialog(e.jgrid.errors.errcap,"function 'custom_value' "+e.jgrid.edit.msg.novalue,e.jgrid.edit.bClose):e.jgrid.info_dialog(e.jgrid.errors.errcap,t.message,e.jgrid.edit.bClose)}return!0}})}else{switch(e(this).get(0).type){case"checkbox":if(e(this).is(":checked"))f[this.name]=e(this).val();else{var a=e(this).attr("offval");f[this.name]=a}break;case"select-one":f[this.name]=e("option:selected",this).val(),g[this.name]=e("option:selected",this).text();break;case"select-multiple":f[this.name]=e(this).val(),f[this.name]?f[this.name]=f[this.name].join(","):f[this.name]="";var n=[];e("option:selected",this).each(function(t,i){n[t]=e(i).text()}),g[this.name]=n.join(",");break;case"password":case"text":case"textarea":case"button":f[this.name]=e(this).val()}h.p.autoencode&&(f[this.name]=e.jgrid.htmlEncode(f[this.name]))}}),!0}function a(t,i,r,a){var n,o,s,l,d,u,c,p=0,f=[],g=!1,m="<td class='CaptionTD'>&#160;</td><td class='DataTD'>&#160;</td>",v="";for(c=1;c<=a;c++)v+=m;if("_empty"!=t&&(g=e(i).jqGrid("getInd",t)),e(i.p.colModel).each(function(c){if(n=this.name,o=(!this.editrules||this.editrules.edithidden!==!0)&&this.hidden===!0,d=o?"style='display:none'":"","cb"!==n&&"subgrid"!==n&&this.editable===!0&&"rn"!==n){if(g===!1)l="";else if(n==i.p.ExpandColumn&&i.p.treeGrid===!0)l=e("td[role='gridcell']:eq("+c+")",i.rows[g]).text();else{try{l=e.unformat.call(i,e("td[role='gridcell']:eq("+c+")",i.rows[g]),{rowId:t,colModel:this},c)}catch(m){l=this.edittype&&"textarea"==this.edittype?e("td[role='gridcell']:eq("+c+")",i.rows[g]).text():e("td[role='gridcell']:eq("+c+")",i.rows[g]).html()}(!l||"&nbsp;"==l||"&#160;"==l||1==l.length&&160==l.charCodeAt(0))&&(l="")}var b=e.extend({},this.editoptions||{},{id:n,name:n}),_=e.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),x=parseInt(_.rowpos,10)||p+1,w=parseInt(2*(parseInt(_.colpos,10)||1),10);if("_empty"==t&&b.defaultValue&&(l=e.isFunction(b.defaultValue)?b.defaultValue.call(h):b.defaultValue),this.edittype||(this.edittype="text"),h.p.autoencode&&(l=e.jgrid.htmlDecode(l)),u=e.jgrid.createEl.call(h,this.edittype,b,l,!1,e.extend({},e.jgrid.ajaxOptions,i.p.ajaxSelectOptions||{})),""===l&&"checkbox"==this.edittype&&(l=e(u).attr("offval")),""===l&&"select"==this.edittype&&(l=e("option:eq(0)",u).text()),(rp_ge[h.p.id].checkOnSubmit||rp_ge[h.p.id].checkOnUpdate)&&(rp_ge[h.p.id]._savedData[n]=l),e(u).addClass("FormElement"),e.inArray(this.edittype,["text","textarea","password","select"])>-1&&e(u).addClass("ui-widget-content ui-corner-all"),s=e(r).find("tr[rowpos="+x+"]"),_.rowabove){var j=e("<tr><td class='contentinfo' colspan='"+2*a+"'>"+_.rowcontent+"</td></tr>");e(r).append(j),j[0].rp=x}0===s.length&&(s=e("<tr "+d+" rowpos='"+x+"'></tr>").addClass("FormData").attr("id","tr_"+n),e(s).append(v),e(r).append(s),s[0].rp=x),e("td:eq("+(w-2)+")",s[0]).html(void 0===_.label?i.p.colNames[c]:_.label),e("td:eq("+(w-1)+")",s[0]).append(_.elmprefix).append(u).append(_.elmsuffix),e.isFunction(b.custom_value)&&"_empty"!==t&&b.custom_value.call(h,e("#"+n,"#"+y),"set",l),e.jgrid.bindEv(u,b,h),f[p]=c,p++}}),p>0){var b=e("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*a-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='"+i.p.id+"_id' value='"+t+"'/></td></tr>");b[0].rp=p+999,e(r).append(b),(rp_ge[h.p.id].checkOnSubmit||rp_ge[h.p.id].checkOnUpdate)&&(rp_ge[h.p.id]._savedData[i.p.id+"_id"]=t)}return f}function n(t,i,r){var a,n,o,s,l,d,u=0;(rp_ge[h.p.id].checkOnSubmit||rp_ge[h.p.id].checkOnUpdate)&&(rp_ge[h.p.id]._savedData={},rp_ge[h.p.id]._savedData[i.p.id+"_id"]=t);var c=i.p.colModel;if("_empty"==t)return e(c).each(function(){a=this.name,s=e.extend({},this.editoptions||{}),o=e("#"+e.jgrid.jqID(a),"#"+r),o&&o.length&&null!==o[0]&&(l="",s.defaultValue?(l=e.isFunction(s.defaultValue)?s.defaultValue.call(h):s.defaultValue,"checkbox"==o[0].type?(d=l.toLowerCase(),d.search(/(false|0|no|off|undefined)/i)<0&&""!==d?(o[0].checked=!0,o[0].defaultChecked=!0,o[0].value=l):(o[0].checked=!1,o[0].defaultChecked=!1)):o.val(l)):"checkbox"==o[0].type?(o[0].checked=!1,o[0].defaultChecked=!1,l=e(o).attr("offval")):o[0].type&&"select"==o[0].type.substr(0,6)?o[0].selectedIndex=0:o.val(l),(rp_ge[h.p.id].checkOnSubmit===!0||rp_ge[h.p.id].checkOnUpdate)&&(rp_ge[h.p.id]._savedData[a]=l))}),void e("#id_g","#"+r).val(t);var p=e(i).jqGrid("getInd",t,!0);p&&(e('td[role="gridcell"]',p).each(function(o){if(a=c[o].name,"cb"!==a&&"subgrid"!==a&&"rn"!==a&&c[o].editable===!0){if(a==i.p.ExpandColumn&&i.p.treeGrid===!0)n=e(this).text();else try{n=e.unformat.call(i,e(this),{rowId:t,colModel:c[o]},o)}catch(s){n="textarea"==c[o].edittype?e(this).text():e(this).html()}switch(h.p.autoencode&&(n=e.jgrid.htmlDecode(n)),(rp_ge[h.p.id].checkOnSubmit===!0||rp_ge[h.p.id].checkOnUpdate)&&(rp_ge[h.p.id]._savedData[a]=n),a=e.jgrid.jqID(a),c[o].edittype){case"password":case"text":case"button":case"image":case"textarea":("&nbsp;"==n||"&#160;"==n||1==n.length&&160==n.charCodeAt(0))&&(n=""),e("#"+a,"#"+r).val(n);break;case"select":var l=n.split(",");l=e.map(l,function(t){return e.trim(t)}),e("#"+a+" option","#"+r).each(function(){c[o].editoptions.multiple||e.trim(n)!=e.trim(e(this).text())&&l[0]!=e.trim(e(this).text())&&l[0]!=e.trim(e(this).val())?c[o].editoptions.multiple&&(e.inArray(e.trim(e(this).text()),l)>-1||e.inArray(e.trim(e(this).val()),l)>-1)?this.selected=!0:this.selected=!1:this.selected=!0});break;case"checkbox":if(n=String(n),c[o].editoptions&&c[o].editoptions.value){var d=c[o].editoptions.value.split(":");d[0]==n?(e("#"+a,"#"+r)[h.p.useProp?"prop":"attr"]("checked",!0),e("#"+a,"#"+r)[h.p.useProp?"prop":"attr"]("defaultChecked",!0)):(e("#"+a,"#"+r)[h.p.useProp?"prop":"attr"]("checked",!1),e("#"+a,"#"+r)[h.p.useProp?"prop":"attr"]("defaultChecked",!1))}else n=n.toLowerCase(),n.search(/(false|0|no|off|undefined)/i)<0&&""!==n?(e("#"+a,"#"+r)[h.p.useProp?"prop":"attr"]("checked",!0),e("#"+a,"#"+r)[h.p.useProp?"prop":"attr"]("defaultChecked",!0)):(e("#"+a,"#"+r)[h.p.useProp?"prop":"attr"]("checked",!1),e("#"+a,"#"+r)[h.p.useProp?"prop":"attr"]("defaultChecked",!1));break;case"custom":try{if(!c[o].editoptions||!e.isFunction(c[o].editoptions.custom_value))throw"e1";c[o].editoptions.custom_value.call(h,e("#"+a,"#"+r),"set",n)}catch(p){"e1"==p?e.jgrid.info_dialog(e.jgrid.errors.errcap,"function 'custom_value' "+e.jgrid.edit.msg.nodefined,e.jgrid.edit.bClose):e.jgrid.info_dialog(e.jgrid.errors.errcap,p.message,e.jgrid.edit.bClose)}}u++}}),u>0&&e("#id_g",w).val(t))}function o(){e.each(h.p.colModel,function(e,t){t.editoptions&&t.editoptions.NullIfEmpty===!0&&f.hasOwnProperty(t.name)&&""===f[t.name]&&(f[t.name]="null")})}function s(){var t,r,a,s,l,d,u=[!0,"",""],c={},p=h.p.prmNames,m=e(h).triggerHandler("jqGridAddEditBeforeCheckValues",[e("#"+y),b]);m&&"object"==typeof m&&(f=m),e.isFunction(rp_ge[h.p.id].beforeCheckValues)&&(m=rp_ge[h.p.id].beforeCheckValues.call(h,f,e("#"+y),"_empty"==f[h.p.id+"_id"]?p.addoper:p.editoper),m&&"object"==typeof m&&(f=m));for(s in f)if(f.hasOwnProperty(s)&&(u=e.jgrid.checkValues.call(h,f[s],s,h),u[0]===!1))break;if(o(),u[0]&&(c=e(h).triggerHandler("jqGridAddEditClickSubmit",[rp_ge[h.p.id],f,b]),void 0===c&&e.isFunction(rp_ge[h.p.id].onclickSubmit)&&(c=rp_ge[h.p.id].onclickSubmit.call(h,rp_ge[h.p.id],f)||{}),u=e(h).triggerHandler("jqGridAddEditBeforeSubmit",[f,e("#"+y),b]),void 0===u&&(u=[!0,"",""]),u[0]&&e.isFunction(rp_ge[h.p.id].beforeSubmit)&&(u=rp_ge[h.p.id].beforeSubmit.call(h,f,e("#"+y)))),u[0]&&!rp_ge[h.p.id].processing){if(rp_ge[h.p.id].processing=!0,e("#sData",w+"_2").addClass("ui-state-active"),a=p.oper,r=p.id,f[a]="_empty"==e.trim(f[h.p.id+"_id"])?p.addoper:p.editoper,f[a]!=p.addoper?f[r]=f[h.p.id+"_id"]:void 0===f[r]&&(f[r]=f[h.p.id+"_id"]),delete f[h.p.id+"_id"],f=e.extend(f,rp_ge[h.p.id].editData,c),h.p.treeGrid===!0){if(f[a]==p.addoper){l=e(h).jqGrid("getGridParam","selrow");var v="adjacency"==h.p.treeGridModel?h.p.treeReader.parent_id_field:"parent_id";f[v]=l}for(d in h.p.treeReader)if(h.p.treeReader.hasOwnProperty(d)){var x=h.p.treeReader[d];if(f.hasOwnProperty(x)){if(f[a]==p.addoper&&"parent_id_field"===d)continue;delete f[x]}}}f[r]=e.jgrid.stripPref(h.p.idPrefix,f[r]);var k=e.extend({url:rp_ge[h.p.id].url||e(h).jqGrid("getGridParam","editurl"),type:rp_ge[h.p.id].mtype,data:e.isFunction(rp_ge[h.p.id].serializeEditData)?rp_ge[h.p.id].serializeEditData.call(h,f):f,complete:function(o,s){var d;if(f[r]=h.p.idPrefix+f[r],"success"!=s?(u[0]=!1,u[1]=e(h).triggerHandler("jqGridAddEditErrorTextFormat",[o,b]),e.isFunction(rp_ge[h.p.id].errorTextFormat)?u[1]=rp_ge[h.p.id].errorTextFormat.call(h,o):u[1]=s+" Status: '"+o.statusText+"'. Error code: "+o.status):(u=e(h).triggerHandler("jqGridAddEditAfterSubmit",[o,f,b]),void 0===u&&(u=[!0,"",""]),u[0]&&e.isFunction(rp_ge[h.p.id].afterSubmit)&&(u=rp_ge[h.p.id].afterSubmit.call(h,o,f))),u[0]===!1)e("#FormError>td",w).html(u[1]),e("#FormError",w).show();else if(e.each(h.p.colModel,function(){if(g[this.name]&&this.formatter&&"select"==this.formatter)try{delete g[this.name]}catch(e){}}),f=e.extend(f,g),h.p.autoencode&&e.each(f,function(t,i){f[t]=e.jgrid.htmlDecode(i)}),f[a]==p.addoper?(u[2]||(u[2]=e.jgrid.randId()),f[r]=u[2],rp_ge[h.p.id].closeAfterAdd?(rp_ge[h.p.id].reloadAfterSubmit?e(h).trigger("reloadGrid"):h.p.treeGrid===!0?e(h).jqGrid("addChildNode",u[2],l,f):(e(h).jqGrid("addRowData",u[2],f,i.addedrow),e(h).jqGrid("setSelection",u[2])),e.jgrid.hideModal("#"+e.jgrid.jqID(j.themodal),{gb:"#gbox_"+e.jgrid.jqID(_),jqm:i.jqModal,onClose:rp_ge[h.p.id].onClose})):rp_ge[h.p.id].clearAfterAdd?(rp_ge[h.p.id].reloadAfterSubmit?e(h).trigger("reloadGrid"):h.p.treeGrid===!0?e(h).jqGrid("addChildNode",u[2],l,f):e(h).jqGrid("addRowData",u[2],f,i.addedrow),n("_empty",h,y)):rp_ge[h.p.id].reloadAfterSubmit?e(h).trigger("reloadGrid"):h.p.treeGrid===!0?e(h).jqGrid("addChildNode",u[2],l,f):e(h).jqGrid("addRowData",u[2],f,i.addedrow)):(rp_ge[h.p.id].reloadAfterSubmit?(e(h).trigger("reloadGrid"),rp_ge[h.p.id].closeAfterEdit||setTimeout(function(){e(h).jqGrid("setSelection",f[r])},1e3)):h.p.treeGrid===!0?e(h).jqGrid("setTreeRow",f[r],f):e(h).jqGrid("setRowData",f[r],f),rp_ge[h.p.id].closeAfterEdit&&e.jgrid.hideModal("#"+e.jgrid.jqID(j.themodal),{gb:"#gbox_"+e.jgrid.jqID(_),jqm:i.jqModal,onClose:rp_ge[h.p.id].onClose})),e.isFunction(rp_ge[h.p.id].afterComplete)&&(t=o,setTimeout(function(){e(h).triggerHandler("jqGridAddEditAfterComplete",[t,f,e("#"+y),b]),rp_ge[h.p.id].afterComplete.call(h,t,f,e("#"+y)),t=null},500)),(rp_ge[h.p.id].checkOnSubmit||rp_ge[h.p.id].checkOnUpdate)&&(e("#"+y).data("disabled",!1),"_empty"!=rp_ge[h.p.id]._savedData[h.p.id+"_id"]))for(d in rp_ge[h.p.id]._savedData)rp_ge[h.p.id]._savedData.hasOwnProperty(d)&&f[d]&&(rp_ge[h.p.id]._savedData[d]=f[d]);rp_ge[h.p.id].processing=!1,e("#sData",w+"_2").removeClass("ui-state-active");try{e(":input:visible","#"+y)[0].focus()}catch(c){}}},e.jgrid.ajaxOptions,rp_ge[h.p.id].ajaxEditOptions);if(k.url||rp_ge[h.p.id].useDataProxy||(e.isFunction(h.p.dataProxy)?rp_ge[h.p.id].useDataProxy=!0:(u[0]=!1,u[1]+=" "+e.jgrid.errors.nourl)),u[0])if(rp_ge[h.p.id].useDataProxy){var C=h.p.dataProxy.call(h,k,"set_"+h.p.id);void 0===C&&(C=[!0,""]),C[0]===!1?(u[0]=!1,u[1]=C[1]||"Error deleting the selected row!"):(k.data.oper==p.addoper&&rp_ge[h.p.id].closeAfterAdd&&e.jgrid.hideModal("#"+e.jgrid.jqID(j.themodal),{gb:"#gbox_"+e.jgrid.jqID(_),jqm:i.jqModal,onClose:rp_ge[h.p.id].onClose}),k.data.oper==p.editoper&&rp_ge[h.p.id].closeAfterEdit&&e.jgrid.hideModal("#"+e.jgrid.jqID(j.themodal),{gb:"#gbox_"+e.jgrid.jqID(_),jqm:i.jqModal,onClose:rp_ge[h.p.id].onClose}))}else e.ajax(k)}u[0]===!1&&(e("#FormError>td",w).html(u[1]),e("#FormError",w).show())}function l(e,t){var i,r=!1;for(i in e)if(e.hasOwnProperty(i)&&e[i]!=t[i]){r=!0;break}return r}function d(){var t=!0;return e("#FormError",w).hide(),rp_ge[h.p.id].checkOnUpdate&&(f={},g={},r(),m=e.extend({},f,g),v=l(m,rp_ge[h.p.id]._savedData),v&&(e("#"+y).data("disabled",!0),e(".confirm","#"+j.themodal).show(),t=!1)),t}function u(){var i;if("_empty"!==t&&void 0!==h.p.savedRow&&h.p.savedRow.length>0&&e.isFunction(e.fn.jqGrid.restoreRow))for(i=0;i<h.p.savedRow.length;i++)if(h.p.savedRow[i].id==t){e(h).jqGrid("restoreRow",t);break}}function c(t,i){var r=i[1].length-1;0===t?e("#pData",w+"_2").addClass("ui-state-disabled"):void 0!==i[1][t-1]&&e("#"+e.jgrid.jqID(i[1][t-1])).hasClass("ui-state-disabled")?e("#pData",w+"_2").addClass("ui-state-disabled"):e("#pData",w+"_2").removeClass("ui-state-disabled"),t==r?e("#nData",w+"_2").addClass("ui-state-disabled"):void 0!==i[1][t+1]&&e("#"+e.jgrid.jqID(i[1][t+1])).hasClass("ui-state-disabled")?e("#nData",w+"_2").addClass("ui-state-disabled"):e("#nData",w+"_2").removeClass("ui-state-disabled")}function p(){var t=e(h).jqGrid("getDataIDs"),i=e("#id_g",w).val(),r=e.inArray(i,t);return[r,t]}var h=this;if(h.grid&&t){var f,g,m,v,b,_=h.p.id,y="FrmGrid_"+_,x="TblGrid_"+_,w="#"+e.jgrid.jqID(x),j={themodal:"editmod"+_,modalhead:"edithd"+_,modalcontent:"editcnt"+_,scrollelm:y},k=!!e.isFunction(rp_ge[h.p.id].beforeShowForm)&&rp_ge[h.p.id].beforeShowForm,C=!!e.isFunction(rp_ge[h.p.id].afterShowForm)&&rp_ge[h.p.id].afterShowForm,D=!!e.isFunction(rp_ge[h.p.id].beforeInitData)&&rp_ge[h.p.id].beforeInitData,S=!!e.isFunction(rp_ge[h.p.id].onInitializeForm)&&rp_ge[h.p.id].onInitializeForm,T=!0,P=1,I=0;y=e.jgrid.jqID(y),"new"===t?(t="_empty",b="add",i.caption=rp_ge[h.p.id].addCaption):(i.caption=rp_ge[h.p.id].editCaption,b="edit"),i.recreateForm===!0&&void 0!==e("#"+e.jgrid.jqID(j.themodal))[0]&&e("#"+e.jgrid.jqID(j.themodal)).remove();var $=!0;if(i.checkOnUpdate&&i.jqModal&&!i.modal&&($=!1),void 0!==e("#"+e.jgrid.jqID(j.themodal))[0]){if(T=e(h).triggerHandler("jqGridAddEditBeforeInitData",[e("#"+e.jgrid.jqID(y)),b]),void 0===T&&(T=!0),T&&D&&(T=D.call(h,e("#"+y))),T===!1)return;u(),e(".ui-jqdialog-title","#"+e.jgrid.jqID(j.modalhead)).html(i.caption),e("#FormError",w).hide(),rp_ge[h.p.id].topinfo?(e(".topinfo",w).html(rp_ge[h.p.id].topinfo),e(".tinfo",w).show()):e(".tinfo",w).hide(),rp_ge[h.p.id].bottominfo?(e(".bottominfo",w+"_2").html(rp_ge[h.p.id].bottominfo),e(".binfo",w+"_2").show()):e(".binfo",w+"_2").hide(),n(t,h,y),"_empty"!=t&&rp_ge[h.p.id].viewPagerButtons?e("#pData, #nData",w+"_2").show():e("#pData, #nData",w+"_2").hide(),rp_ge[h.p.id].processing===!0&&(rp_ge[h.p.id].processing=!1,e("#sData",w+"_2").removeClass("ui-state-active")),e("#"+y).data("disabled")===!0&&(e(".confirm","#"+e.jgrid.jqID(j.themodal)).hide(),e("#"+y).data("disabled",!1)),e(h).triggerHandler("jqGridAddEditBeforeShowForm",[e("#"+y),b]),k&&k.call(h,e("#"+y)),e("#"+e.jgrid.jqID(j.themodal)).data("onClose",rp_ge[h.p.id].onClose),e.jgrid.viewModal("#"+e.jgrid.jqID(j.themodal),{gbox:"#gbox_"+e.jgrid.jqID(_),jqm:i.jqModal,jqM:!1,overlay:i.overlay,modal:i.modal}),$||e(".jqmOverlay").click(function(){return!!d()&&(e.jgrid.hideModal("#"+e.jgrid.jqID(j.themodal),{gb:"#gbox_"+e.jgrid.jqID(_),jqm:i.jqModal,onClose:rp_ge[h.p.id].onClose}),!1)}),e(h).triggerHandler("jqGridAddEditAfterShowForm",[e("#"+y),b]),C&&C.call(h,e("#"+y))}else{var F=isNaN(i.dataheight)?i.dataheight:i.dataheight+"px",M=isNaN(i.datawidth)?i.datawidth:i.datawidth+"px",A=e("<form name='FormPost' id='"+y+"' class='FormGrid' onSubmit='return false;' style='width:"+M+";overflow:auto;position:relative;height:"+F+";'></form>").data("disabled",!1),E=e("<table id='"+x+"' class='EditTable' cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>");if(T=e(h).triggerHandler("jqGridAddEditBeforeInitData",[e("#"+y),b]),void 0===T&&(T=!0),T&&D&&(T=D.call(h,e("#"+y))),T===!1)return;u(),e(h.p.colModel).each(function(){var e=this.formoptions;P=Math.max(P,e?e.colpos||0:0),I=Math.max(I,e?e.rowpos||0:0)}),e(A).append(E);var q=e("<tr id='FormError' style='display:none'><td class='ui-state-error' colspan='"+2*P+"'></td></tr>");q[0].rp=0,e(E).append(q),q=e("<tr style='display:none' class='tinfo'><td class='topinfo' colspan='"+2*P+"'>"+rp_ge[h.p.id].topinfo+"</td></tr>"),q[0].rp=0,e(E).append(q);var O="rtl"==h.p.direction,R=O?"nData":"pData",N=O?"pData":"nData";a(t,h,E,P);var G="<a href='javascript:void(0)' id='"+R+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></a>",L="<a href='javascript:void(0)' id='"+N+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></a>",z="<a href='javascript:void(0)' id='sData' class='fm-button ui-state-default ui-corner-all'>"+i.bSubmit+"</a>",Q="<a href='javascript:void(0)' id='cData' class='fm-button ui-state-default ui-corner-all'>"+i.bCancel+"</a>",H="<table border='0' cellspacing='0' cellpadding='0' class='EditTable' id='"+x+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton'>"+(O?L+G:G+L)+"</td><td class='EditButton'>"+z+Q+"</td></tr>";if(H+="<tr style='display:none' class='binfo'><td class='bottominfo' colspan='2'>"+rp_ge[h.p.id].bottominfo+"</td></tr>",H+="</tbody></table>",I>0){var B=[];e.each(e(E)[0].rows,function(e,t){B[e]=t}),B.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),e.each(B,function(t,i){e("tbody",E).append(i)})}i.gbox="#gbox_"+e.jgrid.jqID(_);var W=!1;i.closeOnEscape===!0&&(i.closeOnEscape=!1,W=!0);var U=e("<div></div>").append(A).append(H);if(e.jgrid.createModal(j,U,i,"#gview_"+e.jgrid.jqID(h.p.id),e("#gbox_"+e.jgrid.jqID(h.p.id))[0]),O&&(e("#pData, #nData",w+"_2").css("float","right"),e(".EditButton",w+"_2").css("text-align","left")),rp_ge[h.p.id].topinfo&&e(".tinfo",w).show(),rp_ge[h.p.id].bottominfo&&e(".binfo",w+"_2").show(),U=null,H=null,e("#"+e.jgrid.jqID(j.themodal)).keydown(function(t){var r=t.target;if(e("#"+y).data("disabled")===!0)return!1;if(rp_ge[h.p.id].savekey[0]===!0&&t.which==rp_ge[h.p.id].savekey[1]&&"TEXTAREA"!=r.tagName)return e("#sData",w+"_2").trigger("click"),!1;if(27===t.which)return!!d()&&(W&&e.jgrid.hideModal("#"+e.jgrid.jqID(j.themodal),{gb:i.gbox,jqm:i.jqModal,onClose:rp_ge[h.p.id].onClose}),!1);if(rp_ge[h.p.id].navkeys[0]===!0){if("_empty"==e("#id_g",w).val())return!0;if(t.which==rp_ge[h.p.id].navkeys[1])return e("#pData",w+"_2").trigger("click"),!1;if(t.which==rp_ge[h.p.id].navkeys[2])return e("#nData",w+"_2").trigger("click"),!1}}),i.checkOnUpdate&&(e("a.ui-jqdialog-titlebar-close span","#"+e.jgrid.jqID(j.themodal)).removeClass("jqmClose"),e("a.ui-jqdialog-titlebar-close","#"+e.jgrid.jqID(j.themodal)).unbind("click").click(function(){return!!d()&&(e.jgrid.hideModal("#"+e.jgrid.jqID(j.themodal),{gb:"#gbox_"+e.jgrid.jqID(_),jqm:i.jqModal,onClose:rp_ge[h.p.id].onClose}),!1)})),i.saveicon=e.extend([!0,"left","ui-icon-disk"],i.saveicon),i.closeicon=e.extend([!0,"left","ui-icon-close"],i.closeicon),i.saveicon[0]===!0&&e("#sData",w+"_2").addClass("right"==i.saveicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+i.saveicon[2]+"'></span>"),i.closeicon[0]===!0&&e("#cData",w+"_2").addClass("right"==i.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+i.closeicon[2]+"'></span>"),rp_ge[h.p.id].checkOnSubmit||rp_ge[h.p.id].checkOnUpdate){z="<a href='javascript:void(0)' id='sNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+i.bYes+"</a>",L="<a href='javascript:void(0)' id='nNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+i.bNo+"</a>",Q="<a href='javascript:void(0)' id='cNew' class='fm-button ui-state-default ui-corner-all' style='z-index:1002'>"+i.bExit+"</a>";var V=i.zIndex||999;V++,e("<div class='ui-widget-overlay jqgrid-overlay confirm' style='z-index:"+V+";display:none;'>&#160;</div><div class='confirm ui-widget-content ui-jqconfirm' style='z-index:"+(V+1)+"'>"+i.saveData+"<br/><br/>"+z+L+Q+"</div>").insertAfter("#"+y),e("#sNew","#"+e.jgrid.jqID(j.themodal)).click(function(){return s(),e("#"+y).data("disabled",!1),e(".confirm","#"+e.jgrid.jqID(j.themodal)).hide(),!1}),e("#nNew","#"+e.jgrid.jqID(j.themodal)).click(function(){return e(".confirm","#"+e.jgrid.jqID(j.themodal)).hide(),e("#"+y).data("disabled",!1),setTimeout(function(){e(":input","#"+y)[0].focus()},0),!1}),e("#cNew","#"+e.jgrid.jqID(j.themodal)).click(function(){return e(".confirm","#"+e.jgrid.jqID(j.themodal)).hide(),e("#"+y).data("disabled",!1),e.jgrid.hideModal("#"+e.jgrid.jqID(j.themodal),{gb:"#gbox_"+e.jgrid.jqID(_),jqm:i.jqModal,onClose:rp_ge[h.p.id].onClose}),!1})}e(h).triggerHandler("jqGridAddEditInitializeForm",[e("#"+y),b]),S&&S.call(h,e("#"+y)),"_empty"!=t&&rp_ge[h.p.id].viewPagerButtons?e("#pData,#nData",w+"_2").show():e("#pData,#nData",w+"_2").hide(),e(h).triggerHandler("jqGridAddEditBeforeShowForm",[e("#"+y),b]),k&&k.call(h,e("#"+y)),e("#"+e.jgrid.jqID(j.themodal)).data("onClose",rp_ge[h.p.id].onClose),e.jgrid.viewModal("#"+e.jgrid.jqID(j.themodal),{gbox:"#gbox_"+e.jgrid.jqID(_),jqm:i.jqModal,overlay:i.overlay,modal:i.modal}),$||e(".jqmOverlay").click(function(){return!!d()&&(e.jgrid.hideModal("#"+e.jgrid.jqID(j.themodal),{gb:"#gbox_"+e.jgrid.jqID(_),jqm:i.jqModal,onClose:rp_ge[h.p.id].onClose}),!1)}),e(h).triggerHandler("jqGridAddEditAfterShowForm",[e("#"+y),b]),C&&C.call(h,e("#"+y)),e(".fm-button","#"+e.jgrid.jqID(j.themodal)).hover(function(){e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}),e("#sData",w+"_2").click(function(){return f={},g={},e("#FormError",w).hide(),r(),"_empty"==f[h.p.id+"_id"]?s():i.checkOnSubmit===!0?(m=e.extend({},f,g),v=l(m,rp_ge[h.p.id]._savedData),v?(e("#"+y).data("disabled",!0),e(".confirm","#"+e.jgrid.jqID(j.themodal)).show()):s()):s(),!1}),e("#cData",w+"_2").click(function(){return!!d()&&(e.jgrid.hideModal("#"+e.jgrid.jqID(j.themodal),{gb:"#gbox_"+e.jgrid.jqID(_),jqm:i.jqModal,onClose:rp_ge[h.p.id].onClose}),!1)}),e("#nData",w+"_2").click(function(){if(!d())return!1;e("#FormError",w).hide();var t=p();if(t[0]=parseInt(t[0],10),t[0]!=-1&&t[1][t[0]+1]){e(h).triggerHandler("jqGridAddEditClickPgButtons",["next",e("#"+y),t[1][t[0]]]);var r;if(e.isFunction(i.onclickPgButtons)&&(r=i.onclickPgButtons.call(h,"next",e("#"+y),t[1][t[0]]),void 0!==r&&r===!1))return!1;if(e("#"+e.jgrid.jqID(t[1][t[0]+1])).hasClass("ui-state-disabled"))return!1;n(t[1][t[0]+1],h,y),e(h).jqGrid("setSelection",t[1][t[0]+1]),e(h).triggerHandler("jqGridAddEditAfterClickPgButtons",["next",e("#"+y),t[1][t[0]]]),e.isFunction(i.afterclickPgButtons)&&i.afterclickPgButtons.call(h,"next",e("#"+y),t[1][t[0]+1]),c(t[0]+1,t)}return!1}),e("#pData",w+"_2").click(function(){if(!d())return!1;e("#FormError",w).hide();var t=p();if(t[0]!=-1&&t[1][t[0]-1]){e(h).triggerHandler("jqGridAddEditClickPgButtons",["prev",e("#"+y),t[1][t[0]]]);var r;if(e.isFunction(i.onclickPgButtons)&&(r=i.onclickPgButtons.call(h,"prev",e("#"+y),t[1][t[0]]),void 0!==r&&r===!1))return!1;if(e("#"+e.jgrid.jqID(t[1][t[0]-1])).hasClass("ui-state-disabled"))return!1;n(t[1][t[0]-1],h,y),e(h).jqGrid("setSelection",t[1][t[0]-1]),e(h).triggerHandler("jqGridAddEditAfterClickPgButtons",["prev",e("#"+y),t[1][t[0]]]),e.isFunction(i.afterclickPgButtons)&&i.afterclickPgButtons.call(h,"prev",e("#"+y),t[1][t[0]-1]),c(t[0]-1,t)}return!1})}var K=p();c(K[0],K)}})},viewGridRow:function(t,i){return i=e.extend(!0,{top:0,left:0,width:0,datawidth:"auto",height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,jqModal:!0,closeOnEscape:!1,labelswidth:"30%",closeicon:[],navkeys:[!1,38,40],onClose:null,beforeShowForm:null,beforeInitData:null,viewPagerButtons:!0},e.jgrid.view,i||{}),rp_ge[e(this)[0].p.id]=i,this.each(function(){function r(){rp_ge[l.p.id].closeOnEscape!==!0&&rp_ge[l.p.id].navkeys[0]!==!0||setTimeout(function(){e(".ui-jqdialog-titlebar-close","#"+e.jgrid.jqID(f.modalhead)).focus()},0)}function a(t,r,a,n){var o,s,l,d,u,c,p,h,f,g=0,m=[],v=!1,b="<td class='CaptionTD form-view-label ui-widget-content' width='"+i.labelswidth+"'>&#160;</td><td class='DataTD form-view-data ui-helper-reset ui-widget-content'>&#160;</td>",_="",y="<td class='CaptionTD form-view-label ui-widget-content'>&#160;</td><td class='DataTD form-view-data ui-widget-content'>&#160;</td>",x=["integer","number","currency"],w=0,j=0;for(c=1;c<=n;c++)_+=1==c?b:y;if(e(r.p.colModel).each(function(){s=(!this.editrules||this.editrules.edithidden!==!0)&&this.hidden===!0,
s||"right"!==this.align||(this.formatter&&e.inArray(this.formatter,x)!==-1?w=Math.max(w,parseInt(this.width,10)):j=Math.max(j,parseInt(this.width,10)))}),p=0!==w?w:0!==j?j:0,v=e(r).jqGrid("getInd",t),e(r.p.colModel).each(function(t){if(o=this.name,h=!1,s=(!this.editrules||this.editrules.edithidden!==!0)&&this.hidden===!0,u=s?"style='display:none'":"",f="boolean"!=typeof this.viewable||this.viewable,"cb"!==o&&"subgrid"!==o&&"rn"!==o&&f){d=v===!1?"":o==r.p.ExpandColumn&&r.p.treeGrid===!0?e("td:eq("+t+")",r.rows[v]).text():e("td:eq("+t+")",r.rows[v]).html(),h="right"===this.align&&0!==p;var i=e.extend({},{rowabove:!1,rowcontent:""},this.formoptions||{}),c=parseInt(i.rowpos,10)||g+1,b=parseInt(2*(parseInt(i.colpos,10)||1),10);if(i.rowabove){var y=e("<tr><td class='contentinfo' colspan='"+2*n+"'>"+i.rowcontent+"</td></tr>");e(a).append(y),y[0].rp=c}l=e(a).find("tr[rowpos="+c+"]"),0===l.length&&(l=e("<tr "+u+" rowpos='"+c+"'></tr>").addClass("FormData").attr("id","trv_"+o),e(l).append(_),e(a).append(l),l[0].rp=c),e("td:eq("+(b-2)+")",l[0]).html("<b>"+(void 0===i.label?r.p.colNames[t]:i.label)+"</b>"),e("td:eq("+(b-1)+")",l[0]).append("<span>"+d+"</span>").attr("id","v_"+o),h&&e("td:eq("+(b-1)+") span",l[0]).css({"text-align":"right",width:p+"px"}),m[g]=t,g++}}),g>0){var k=e("<tr class='FormData' style='display:none'><td class='CaptionTD'></td><td colspan='"+(2*n-1)+"' class='DataTD'><input class='FormElement' id='id_g' type='text' name='id' value='"+t+"'/></td></tr>");k[0].rp=g+99,e(a).append(k)}return m}function n(t,i){var r,a,n,o,s,l=0;s=e(i).jqGrid("getInd",t,!0),s&&(e("td",s).each(function(t){r=i.p.colModel[t].name,a=(!i.p.colModel[t].editrules||i.p.colModel[t].editrules.edithidden!==!0)&&i.p.colModel[t].hidden===!0,"cb"!==r&&"subgrid"!==r&&"rn"!==r&&(n=r==i.p.ExpandColumn&&i.p.treeGrid===!0?e(this).text():e(this).html(),o=e.extend({},i.p.colModel[t].editoptions||{}),r=e.jgrid.jqID("v_"+r),e("#"+r+" span","#"+c).html(n),a&&e("#"+r,"#"+c).parents("tr:first").hide(),l++)}),l>0&&e("#id_g","#"+c).val(t))}function o(t,i){var r=i[1].length-1;0===t?e("#pData","#"+c+"_2").addClass("ui-state-disabled"):void 0!==i[1][t-1]&&e("#"+e.jgrid.jqID(i[1][t-1])).hasClass("ui-state-disabled")?e("#pData",c+"_2").addClass("ui-state-disabled"):e("#pData","#"+c+"_2").removeClass("ui-state-disabled"),t==r?e("#nData","#"+c+"_2").addClass("ui-state-disabled"):void 0!==i[1][t+1]&&e("#"+e.jgrid.jqID(i[1][t+1])).hasClass("ui-state-disabled")?e("#nData",c+"_2").addClass("ui-state-disabled"):e("#nData","#"+c+"_2").removeClass("ui-state-disabled")}function s(){var t=e(l).jqGrid("getDataIDs"),i=e("#id_g","#"+c).val(),r=e.inArray(i,t);return[r,t]}var l=this;if(l.grid&&t){var d=l.p.id,u="ViewGrid_"+e.jgrid.jqID(d),c="ViewTbl_"+e.jgrid.jqID(d),p="ViewGrid_"+d,h="ViewTbl_"+d,f={themodal:"viewmod"+d,modalhead:"viewhd"+d,modalcontent:"viewcnt"+d,scrollelm:u},g=!!e.isFunction(rp_ge[l.p.id].beforeInitData)&&rp_ge[l.p.id].beforeInitData,m=!0,v=1,b=0;if(void 0!==e("#"+e.jgrid.jqID(f.themodal))[0]){if(g&&(m=g.call(l,e("#"+u)),void 0===m&&(m=!0)),m===!1)return;e(".ui-jqdialog-title","#"+e.jgrid.jqID(f.modalhead)).html(i.caption),e("#FormError","#"+c).hide(),n(t,l),e.isFunction(rp_ge[l.p.id].beforeShowForm)&&rp_ge[l.p.id].beforeShowForm.call(l,e("#"+u)),e.jgrid.viewModal("#"+e.jgrid.jqID(f.themodal),{gbox:"#gbox_"+e.jgrid.jqID(d),jqm:i.jqModal,jqM:!1,overlay:i.overlay,modal:i.modal}),r()}else{var _=isNaN(i.dataheight)?i.dataheight:i.dataheight+"px",y=isNaN(i.datawidth)?i.datawidth:i.datawidth+"px",x=e("<form name='FormPost' id='"+p+"' class='FormGrid' style='width:"+y+";overflow:auto;position:relative;height:"+_+";'></form>"),w=e("<table id='"+h+"' class='EditTable' cellspacing='1' cellpadding='2' border='0' style='table-layout:fixed'><tbody></tbody></table>");if(g&&(m=g.call(l,e("#"+u)),void 0===m&&(m=!0)),m===!1)return;e(l.p.colModel).each(function(){var e=this.formoptions;v=Math.max(v,e?e.colpos||0:0),b=Math.max(b,e?e.rowpos||0:0)}),e(x).append(w),a(t,l,w,v);var j="rtl"==l.p.direction,k=j?"nData":"pData",C=j?"pData":"nData",D="<a href='javascript:void(0)' id='"+k+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></a>",S="<a href='javascript:void(0)' id='"+C+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></a>",T="<a href='javascript:void(0)' id='cData' class='fm-button ui-state-default ui-corner-all'>"+i.bClose+"</a>";if(b>0){var P=[];e.each(e(w)[0].rows,function(e,t){P[e]=t}),P.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),e.each(P,function(t,i){e("tbody",w).append(i)})}i.gbox="#gbox_"+e.jgrid.jqID(d);var I=e("<div></div>").append(x).append("<table border='0' class='EditTable' id='"+c+"_2'><tbody><tr id='Act_Buttons'><td class='navButton' width='"+i.labelswidth+"'>"+(j?S+D:D+S)+"</td><td class='EditButton'>"+T+"</td></tr></tbody></table>");e.jgrid.createModal(f,I,i,"#gview_"+e.jgrid.jqID(l.p.id),e("#gview_"+e.jgrid.jqID(l.p.id))[0]),j&&(e("#pData, #nData","#"+c+"_2").css("float","right"),e(".EditButton","#"+c+"_2").css("text-align","left")),i.viewPagerButtons||e("#pData, #nData","#"+c+"_2").hide(),I=null,e("#"+f.themodal).keydown(function(t){if(27===t.which)return rp_ge[l.p.id].closeOnEscape&&e.jgrid.hideModal("#"+e.jgrid.jqID(f.themodal),{gb:i.gbox,jqm:i.jqModal,onClose:i.onClose}),!1;if(i.navkeys[0]===!0){if(t.which===i.navkeys[1])return e("#pData","#"+c+"_2").trigger("click"),!1;if(t.which===i.navkeys[2])return e("#nData","#"+c+"_2").trigger("click"),!1}}),i.closeicon=e.extend([!0,"left","ui-icon-close"],i.closeicon),i.closeicon[0]===!0&&e("#cData","#"+c+"_2").addClass("right"==i.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+i.closeicon[2]+"'></span>"),e.isFunction(i.beforeShowForm)&&i.beforeShowForm.call(l,e("#"+u)),e.jgrid.viewModal("#"+e.jgrid.jqID(f.themodal),{gbox:"#gbox_"+e.jgrid.jqID(d),jqm:i.jqModal,overlay:i.overlay,modal:i.modal}),e(".fm-button:not(.ui-state-disabled)","#"+c+"_2").hover(function(){e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}),r(),e("#cData","#"+c+"_2").click(function(){return e.jgrid.hideModal("#"+e.jgrid.jqID(f.themodal),{gb:"#gbox_"+e.jgrid.jqID(d),jqm:i.jqModal,onClose:i.onClose}),!1}),e("#nData","#"+c+"_2").click(function(){e("#FormError","#"+c).hide();var t=s();return t[0]=parseInt(t[0],10),t[0]!=-1&&t[1][t[0]+1]&&(e.isFunction(i.onclickPgButtons)&&i.onclickPgButtons.call(l,"next",e("#"+u),t[1][t[0]]),n(t[1][t[0]+1],l),e(l).jqGrid("setSelection",t[1][t[0]+1]),e.isFunction(i.afterclickPgButtons)&&i.afterclickPgButtons.call(l,"next",e("#"+u),t[1][t[0]+1]),o(t[0]+1,t)),r(),!1}),e("#pData","#"+c+"_2").click(function(){e("#FormError","#"+c).hide();var t=s();return t[0]!=-1&&t[1][t[0]-1]&&(e.isFunction(i.onclickPgButtons)&&i.onclickPgButtons.call(l,"prev",e("#"+u),t[1][t[0]]),n(t[1][t[0]-1],l),e(l).jqGrid("setSelection",t[1][t[0]-1]),e.isFunction(i.afterclickPgButtons)&&i.afterclickPgButtons.call(l,"prev",e("#"+u),t[1][t[0]-1]),o(t[0]-1,t)),r(),!1})}var $=s();o($[0],$)}})},delGridRow:function(t,i){return i=e.extend(!0,{top:0,left:0,width:240,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:"",mtype:"POST",reloadAfterSubmit:!0,beforeShowForm:null,beforeInitData:null,afterShowForm:null,beforeSubmit:null,onclickSubmit:null,afterSubmit:null,jqModal:!0,closeOnEscape:!1,delData:{},delicon:[],cancelicon:[],onClose:null,ajaxDelOptions:{},processing:!1,serializeDelData:null,useDataProxy:!1},e.jgrid.del,i||{}),rp_ge[e(this)[0].p.id]=i,this.each(function(){var r=this;if(r.grid&&t){var a,n,o,s,l=e.isFunction(rp_ge[r.p.id].beforeShowForm),d=e.isFunction(rp_ge[r.p.id].afterShowForm),u=!!e.isFunction(rp_ge[r.p.id].beforeInitData)&&rp_ge[r.p.id].beforeInitData,c=r.p.id,p={},h=!0,f="DelTbl_"+e.jgrid.jqID(c),g="DelTbl_"+c,m={themodal:"delmod"+c,modalhead:"delhd"+c,modalcontent:"delcnt"+c,scrollelm:f};if(e.isArray(t)&&(t=t.join()),void 0!==e("#"+e.jgrid.jqID(m.themodal))[0]){if(u&&(h=u.call(r,e("#"+f)),void 0===h&&(h=!0)),h===!1)return;e("#DelData>td","#"+f).text(t),e("#DelError","#"+f).hide(),rp_ge[r.p.id].processing===!0&&(rp_ge[r.p.id].processing=!1,e("#dData","#"+f).removeClass("ui-state-active")),l&&rp_ge[r.p.id].beforeShowForm.call(r,e("#"+f)),e.jgrid.viewModal("#"+e.jgrid.jqID(m.themodal),{gbox:"#gbox_"+e.jgrid.jqID(c),jqm:rp_ge[r.p.id].jqModal,jqM:!1,overlay:rp_ge[r.p.id].overlay,modal:rp_ge[r.p.id].modal}),d&&rp_ge[r.p.id].afterShowForm.call(r,e("#"+f))}else{var v=isNaN(rp_ge[r.p.id].dataheight)?rp_ge[r.p.id].dataheight:rp_ge[r.p.id].dataheight+"px",b=isNaN(i.datawidth)?i.datawidth:i.datawidth+"px",_="<div id='"+g+"' class='formdata' style='width:"+b+";overflow:auto;position:relative;height:"+v+";'>";_+="<table class='DelTable'><tbody>",_+="<tr id='DelError' style='display:none'><td class='ui-state-error'></td></tr>",_+="<tr id='DelData' style='display:none'><td >"+t+"</td></tr>",_+='<tr><td class="delmsg" style="white-space:pre;">'+rp_ge[r.p.id].msg+"</td></tr><tr><td >&#160;</td></tr>",_+="</tbody></table></div>";var y="<a href='javascript:void(0)' id='dData' class='fm-button ui-state-default ui-corner-all'>"+i.bSubmit+"</a>",x="<a href='javascript:void(0)' id='eData' class='fm-button ui-state-default ui-corner-all'>"+i.bCancel+"</a>";if(_+="<table cellspacing='0' cellpadding='0' border='0' class='EditTable' id='"+f+"_2'><tbody><tr><td><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr><td class='DelButton EditButton'>"+y+"&#160;"+x+"</td></tr></tbody></table>",i.gbox="#gbox_"+e.jgrid.jqID(c),e.jgrid.createModal(m,_,i,"#gview_"+e.jgrid.jqID(r.p.id),e("#gview_"+e.jgrid.jqID(r.p.id))[0]),u&&(h=u.call(r,e("#"+f)),void 0===h&&(h=!0)),h===!1)return;e(".fm-button","#"+f+"_2").hover(function(){e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}),i.delicon=e.extend([!0,"left","ui-icon-scissors"],rp_ge[r.p.id].delicon),i.cancelicon=e.extend([!0,"left","ui-icon-cancel"],rp_ge[r.p.id].cancelicon),i.delicon[0]===!0&&e("#dData","#"+f+"_2").addClass("right"==i.delicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+i.delicon[2]+"'></span>"),i.cancelicon[0]===!0&&e("#eData","#"+f+"_2").addClass("right"==i.cancelicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+i.cancelicon[2]+"'></span>"),e("#dData","#"+f+"_2").click(function(){var t,l=[!0,""],d=e("#DelData>td","#"+f).text();if(p={},e.isFunction(rp_ge[r.p.id].onclickSubmit)&&(p=rp_ge[r.p.id].onclickSubmit.call(r,rp_ge[r.p.id],d)||{}),e.isFunction(rp_ge[r.p.id].beforeSubmit)&&(l=rp_ge[r.p.id].beforeSubmit.call(r,d)),l[0]&&!rp_ge[r.p.id].processing){if(rp_ge[r.p.id].processing=!0,o=r.p.prmNames,a=e.extend({},rp_ge[r.p.id].delData,p),s=o.oper,a[s]=o.deloper,n=o.id,d=String(d).split(","),!d.length)return!1;for(t in d)d.hasOwnProperty(t)&&(d[t]=e.jgrid.stripPref(r.p.idPrefix,d[t]));a[n]=d.join(),e(this).addClass("ui-state-active");var u=e.extend({url:rp_ge[r.p.id].url||e(r).jqGrid("getGridParam","editurl"),type:rp_ge[r.p.id].mtype,data:e.isFunction(rp_ge[r.p.id].serializeDelData)?rp_ge[r.p.id].serializeDelData.call(r,a):a,complete:function(t,n){var o;if("success"!=n?(l[0]=!1,e.isFunction(rp_ge[r.p.id].errorTextFormat)?l[1]=rp_ge[r.p.id].errorTextFormat.call(r,t):l[1]=n+" Status: '"+t.statusText+"'. Error code: "+t.status):e.isFunction(rp_ge[r.p.id].afterSubmit)&&(l=rp_ge[r.p.id].afterSubmit.call(r,t,a)),l[0]===!1)e("#DelError>td","#"+f).html(l[1]),e("#DelError","#"+f).show();else{if(rp_ge[r.p.id].reloadAfterSubmit&&"local"!=r.p.datatype)e(r).trigger("reloadGrid");else{if(r.p.treeGrid===!0)try{e(r).jqGrid("delTreeNode",r.p.idPrefix+d[0])}catch(s){}else for(o=0;o<d.length;o++)e(r).jqGrid("delRowData",r.p.idPrefix+d[o]);r.p.selrow=null,r.p.selarrrow=[]}e.isFunction(rp_ge[r.p.id].afterComplete)&&setTimeout(function(){rp_ge[r.p.id].afterComplete.call(r,t,d)},500)}rp_ge[r.p.id].processing=!1,e("#dData","#"+f+"_2").removeClass("ui-state-active"),l[0]&&e.jgrid.hideModal("#"+e.jgrid.jqID(m.themodal),{gb:"#gbox_"+e.jgrid.jqID(c),jqm:i.jqModal,onClose:rp_ge[r.p.id].onClose})}},e.jgrid.ajaxOptions,rp_ge[r.p.id].ajaxDelOptions);if(u.url||rp_ge[r.p.id].useDataProxy||(e.isFunction(r.p.dataProxy)?rp_ge[r.p.id].useDataProxy=!0:(l[0]=!1,l[1]+=" "+e.jgrid.errors.nourl)),l[0])if(rp_ge[r.p.id].useDataProxy){var h=r.p.dataProxy.call(r,u,"del_"+r.p.id);void 0===h&&(h=[!0,""]),h[0]===!1?(l[0]=!1,l[1]=h[1]||"Error deleting the selected row!"):e.jgrid.hideModal("#"+e.jgrid.jqID(m.themodal),{gb:"#gbox_"+e.jgrid.jqID(c),jqm:i.jqModal,onClose:rp_ge[r.p.id].onClose})}else e.ajax(u)}return l[0]===!1&&(e("#DelError>td","#"+f).html(l[1]),e("#DelError","#"+f).show()),!1}),e("#eData","#"+f+"_2").click(function(){return e.jgrid.hideModal("#"+e.jgrid.jqID(m.themodal),{gb:"#gbox_"+e.jgrid.jqID(c),jqm:rp_ge[r.p.id].jqModal,onClose:rp_ge[r.p.id].onClose}),!1}),l&&rp_ge[r.p.id].beforeShowForm.call(r,e("#"+f)),e.jgrid.viewModal("#"+e.jgrid.jqID(m.themodal),{gbox:"#gbox_"+e.jgrid.jqID(c),jqm:rp_ge[r.p.id].jqModal,overlay:rp_ge[r.p.id].overlay,modal:rp_ge[r.p.id].modal}),d&&rp_ge[r.p.id].afterShowForm.call(r,e("#"+f))}rp_ge[r.p.id].closeOnEscape===!0&&setTimeout(function(){e(".ui-jqdialog-titlebar-close","#"+e.jgrid.jqID(m.modalhead)).focus()},0)}})},navGrid:function(t,i,r,a,n,o,s){return i=e.extend({edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",del:!0,delicon:"ui-icon-trash",search:!0,searchicon:"ui-icon-search",refresh:!0,refreshicon:"ui-icon-refresh",refreshstate:"firstpage",view:!1,viewicon:"ui-icon-document",position:"left",closeOnEscape:!0,beforeRefresh:null,afterRefresh:null,cloneToTop:!1,alertwidth:200,alertheight:"auto",alerttop:null,alertleft:null,alertzIndex:null},e.jgrid.nav,i||{}),this.each(function(){if(!this.nav){var l,d,u={themodal:"alertmod_"+this.p.id,modalhead:"alerthd_"+this.p.id,modalcontent:"alertcnt_"+this.p.id},c=this;if(c.grid&&"string"==typeof t){void 0===e("#"+u.themodal)[0]&&(i.alerttop||i.alertleft||(void 0!==window.innerWidth?(i.alertleft=window.innerWidth,i.alerttop=window.innerHeight):void 0!==document.documentElement&&void 0!==document.documentElement.clientWidth&&0!==document.documentElement.clientWidth?(i.alertleft=document.documentElement.clientWidth,i.alerttop=document.documentElement.clientHeight):(i.alertleft=1024,i.alerttop=768),i.alertleft=i.alertleft/2-parseInt(i.alertwidth,10)/2,i.alerttop=i.alerttop/2-25),e.jgrid.createModal(u,"<div>"+i.alerttext+"</div><span tabindex='0'><span tabindex='-1' id='jqg_alrt'></span></span>",{gbox:"#gbox_"+e.jgrid.jqID(c.p.id),jqModal:!0,drag:!0,resize:!0,caption:i.alertcap,top:i.alerttop,left:i.alertleft,width:i.alertwidth,height:i.alertheight,closeOnEscape:i.closeOnEscape,zIndex:i.alertzIndex},"#gview_"+e.jgrid.jqID(c.p.id),e("#gbox_"+e.jgrid.jqID(c.p.id))[0],!0));var p,h=1,f=function(){e(this).hasClass("ui-state-disabled")||e(this).addClass("ui-state-hover")},g=function(){e(this).removeClass("ui-state-hover")};for(i.cloneToTop&&c.p.toppager&&(h=2),p=0;p<h;p++){var m,v,b,_=e("<table cellspacing='0' cellpadding='0' border='0' class='ui-pg-table navtable' style='float:left;table-layout:auto;'><tbody><tr></tr></tbody></table>"),y="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='ui-separator'></span></td>";0===p?(v=t,b=c.p.id,v==c.p.toppager&&(b+="_top",h=1)):(v=c.p.toppager,b=c.p.id+"_top"),"rtl"==c.p.direction&&e(_).attr("dir","rtl").css("float","right"),i.add&&(a=a||{},m=e("<td class='ui-pg-button ui-corner-all'></td>"),e(m).append("<div class='ui-pg-div'><span class='ui-icon "+i.addicon+"'></span>"+i.addtext+"</div>"),e("tr",_).append(m),e(m,_).attr({title:i.addtitle||"",id:a.id||"add_"+b}).click(function(){return e(this).hasClass("ui-state-disabled")||(e.isFunction(i.addfunc)?i.addfunc.call(c):e(c).jqGrid("editGridRow","new",a)),!1}).hover(f,g),m=null),i.edit&&(m=e("<td class='ui-pg-button ui-corner-all'></td>"),r=r||{},e(m).append("<div class='ui-pg-div'><span class='ui-icon "+i.editicon+"'></span>"+i.edittext+"</div>"),e("tr",_).append(m),e(m,_).attr({title:i.edittitle||"",id:r.id||"edit_"+b}).click(function(){if(!e(this).hasClass("ui-state-disabled")){var t=c.p.selrow;t?e.isFunction(i.editfunc)?i.editfunc.call(c,t):e(c).jqGrid("editGridRow",t,r):(e.jgrid.viewModal("#"+u.themodal,{gbox:"#gbox_"+e.jgrid.jqID(c.p.id),jqm:!0}),e("#jqg_alrt").focus())}return!1}).hover(f,g),m=null),i.view&&(m=e("<td class='ui-pg-button ui-corner-all'></td>"),s=s||{},e(m).append("<div class='ui-pg-div'><span class='ui-icon "+i.viewicon+"'></span>"+i.viewtext+"</div>"),e("tr",_).append(m),e(m,_).attr({title:i.viewtitle||"",id:s.id||"view_"+b}).click(function(){if(!e(this).hasClass("ui-state-disabled")){var t=c.p.selrow;t?e.isFunction(i.viewfunc)?i.viewfunc.call(c,t):e(c).jqGrid("viewGridRow",t,s):(e.jgrid.viewModal("#"+u.themodal,{gbox:"#gbox_"+e.jgrid.jqID(c.p.id),jqm:!0}),e("#jqg_alrt").focus())}return!1}).hover(f,g),m=null),i.del&&(m=e("<td class='ui-pg-button ui-corner-all'></td>"),n=n||{},e(m).append("<div class='ui-pg-div'><span class='ui-icon "+i.delicon+"'></span>"+i.deltext+"</div>"),e("tr",_).append(m),e(m,_).attr({title:i.deltitle||"",id:n.id||"del_"+b}).click(function(){if(!e(this).hasClass("ui-state-disabled")){var t;c.p.multiselect?(t=c.p.selarrrow,0===t.length&&(t=null)):t=c.p.selrow,t?e.isFunction(i.delfunc)?i.delfunc.call(c,t):e(c).jqGrid("delGridRow",t,n):(e.jgrid.viewModal("#"+u.themodal,{gbox:"#gbox_"+e.jgrid.jqID(c.p.id),jqm:!0}),e("#jqg_alrt").focus())}return!1}).hover(f,g),m=null),(i.add||i.edit||i.del||i.view)&&e("tr",_).append(y),i.search&&(m=e("<td class='ui-pg-button ui-corner-all'></td>"),o=o||{},e(m).append("<div class='ui-pg-div'><span class='ui-icon "+i.searchicon+"'></span>"+i.searchtext+"</div>"),e("tr",_).append(m),e(m,_).attr({title:i.searchtitle||"",id:o.id||"search_"+b}).click(function(){return e(this).hasClass("ui-state-disabled")||(e.isFunction(i.searchfunc)?i.searchfunc.call(c,o):e(c).jqGrid("searchGrid",o)),!1}).hover(f,g),o.showOnLoad&&o.showOnLoad===!0&&e(m,_).click(),m=null),i.refresh&&(m=e("<td class='ui-pg-button ui-corner-all'></td>"),e(m).append("<div class='ui-pg-div'><span class='ui-icon "+i.refreshicon+"'></span>"+i.refreshtext+"</div>"),e("tr",_).append(m),e(m,_).attr({title:i.refreshtitle||"",id:"refresh_"+b}).click(function(){if(!e(this).hasClass("ui-state-disabled")){e.isFunction(i.beforeRefresh)&&i.beforeRefresh.call(c),c.p.search=!1;try{var t=c.p.id;c.p.postData.filters="",e("#fbox_"+e.jgrid.jqID(t)).jqFilter("resetFilter"),e.isFunction(c.clearToolbar)&&c.clearToolbar.call(c,!1)}catch(r){}switch(i.refreshstate){case"firstpage":e(c).trigger("reloadGrid",[{page:1}]);break;case"current":e(c).trigger("reloadGrid",[{current:!0}])}e.isFunction(i.afterRefresh)&&i.afterRefresh.call(c)}return!1}).hover(f,g),m=null),d=e(".ui-jqgrid").css("font-size")||"11px",e("body").append("<div id='testpg2' class='ui-jqgrid ui-widget ui-widget-content' style='font-size:"+d+";visibility:hidden;' ></div>"),l=e(_).clone().appendTo("#testpg2").width(),e("#testpg2").remove(),e(v+"_"+i.position,v).append(_),c.p._nvtd&&(l>c.p._nvtd[0]&&(e(v+"_"+i.position,v).width(l),c.p._nvtd[0]=l),c.p._nvtd[1]=l),d=null,l=null,_=null,this.nav=!0}}}})},navButtonAdd:function(t,i){return i=e.extend({caption:"newButton",title:"",buttonicon:"ui-icon-newwin",onClickButton:null,position:"last",cursor:"pointer"},i||{}),this.each(function(){if(this.grid){"string"==typeof t&&0!==t.indexOf("#")&&(t="#"+e.jgrid.jqID(t));var r=e(".navtable",t)[0],a=this;if(r){if(i.id&&void 0!==e("#"+e.jgrid.jqID(i.id),r)[0])return;var n=e("<td></td>");"NONE"==i.buttonicon.toString().toUpperCase()?e(n).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'>"+i.caption+"</div>"):e(n).addClass("ui-pg-button ui-corner-all").append("<div class='ui-pg-div'><span class='ui-icon "+i.buttonicon+"'></span>"+i.caption+"</div>"),i.id&&e(n).attr("id",i.id),"first"==i.position?0===r.rows[0].cells.length?e("tr",r).append(n):e("tr td:eq(0)",r).before(n):e("tr",r).append(n),e(n,r).attr("title",i.title||"").click(function(t){return e(this).hasClass("ui-state-disabled")||e.isFunction(i.onClickButton)&&i.onClickButton.call(a,t),!1}).hover(function(){e(this).hasClass("ui-state-disabled")||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")})}}})},navSeparatorAdd:function(t,i){return i=e.extend({sepclass:"ui-separator",sepcontent:"",position:"last"},i||{}),this.each(function(){if(this.grid){"string"==typeof t&&0!==t.indexOf("#")&&(t="#"+e.jgrid.jqID(t));var r=e(".navtable",t)[0];if(r){var a="<td class='ui-pg-button ui-state-disabled' style='width:4px;'><span class='"+i.sepclass+"'></span>"+i.sepcontent+"</td>";"first"===i.position?0===r.rows[0].cells.length?e("tr",r).append(a):e("tr td:eq(0)",r).before(a):e("tr",r).append(a)}}})},GridToForm:function(t,i){return this.each(function(){var r,a=this;if(a.grid){var n=e(a).jqGrid("getRowData",t);if(n)for(r in n)n.hasOwnProperty(r)&&(e("[name="+e.jgrid.jqID(r)+"]",i).is("input:radio")||e("[name="+e.jgrid.jqID(r)+"]",i).is("input:checkbox")?e("[name="+e.jgrid.jqID(r)+"]",i).each(function(){e(this).val()==n[r]?e(this)[a.p.useProp?"prop":"attr"]("checked",!0):e(this)[a.p.useProp?"prop":"attr"]("checked",!1)}):e("[name="+e.jgrid.jqID(r)+"]",i).val(n[r]))}})},FormToGrid:function(t,i,r,a){return this.each(function(){var n=this;if(n.grid){r||(r="set"),a||(a="first");var o=e(i).serializeArray(),s={};e.each(o,function(e,t){s[t.name]=t.value}),"add"==r?e(n).jqGrid("addRowData",t,s,a):"set"==r&&e(n).jqGrid("setRowData",t,s)}})}})}(jQuery),function(e){/**
 * jqGrid extension for manipulating Grid Data
 * Tony Tomov tony@trirand.com
 * http://trirand.com/blog/ 
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl-2.0.html
**/
"use strict";e.jgrid.inlineEdit=e.jgrid.inlineEdit||{},e.jgrid.extend({editRow:function(t,i,r,a,n,o,s,l,d){var u={},c=e.makeArray(arguments).slice(1);return"object"===e.type(c[0])?u=c[0]:(void 0!==i&&(u.keys=i),e.isFunction(r)&&(u.oneditfunc=r),e.isFunction(a)&&(u.successfunc=a),void 0!==n&&(u.url=n),void 0!==o&&(u.extraparam=o),e.isFunction(s)&&(u.aftersavefunc=s),e.isFunction(l)&&(u.errorfunc=l),e.isFunction(d)&&(u.afterrestorefunc=d)),u=e.extend(!0,{keys:!1,oneditfunc:null,successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST"},e.jgrid.inlineEdit,u),this.each(function(){var i,r,a,n,o,s=this,l=0,d=null,c={};s.grid&&(n=e(s).jqGrid("getInd",t,!0),n!==!1&&(a=e(n).attr("editable")||"0","0"!=a||e(n).hasClass("not-editable-row")||(o=s.p.colModel,e('td[role="gridcell"]',n).each(function(a){i=o[a].name;var n=s.p.treeGrid===!0&&i==s.p.ExpandColumn;if(n)r=e("span:first",this).html();else try{r=e.unformat.call(s,this,{rowId:t,colModel:o[a]},a)}catch(u){r=o[a].edittype&&"textarea"==o[a].edittype?e(this).text():e(this).html()}if("cb"!=i&&"subgrid"!=i&&"rn"!=i&&(s.p.autoencode&&(r=e.jgrid.htmlDecode(r)),c[i]=r,o[a].editable===!0)){null===d&&(d=a),n?e("span:first",this).html(""):e(this).html("");var p=e.extend({},o[a].editoptions||{},{id:t+"_"+i,name:i});o[a].edittype||(o[a].edittype="text"),("&nbsp;"==r||"&#160;"==r||1==r.length&&160==r.charCodeAt(0))&&(r="");var h=e.jgrid.createEl.call(s,o[a].edittype,p,r,!0,e.extend({},e.jgrid.ajaxOptions,s.p.ajaxSelectOptions||{}));e(h).addClass("editable"),n?e("span:first",this).append(h):e(this).append(h),e.jgrid.bindEv(h,p,s),"select"==o[a].edittype&&void 0!==o[a].editoptions&&o[a].editoptions.multiple===!0&&void 0===o[a].editoptions.dataUrl&&e.jgrid.msie&&e(h).width(e(h).width()),l++}}),l>0&&(c.id=t,s.p.savedRow.push(c),e(n).attr("editable","1"),e("td:eq("+d+") input",n).focus(),u.keys===!0&&e(n).bind("keydown",function(i){if(27===i.keyCode){if(e(s).jqGrid("restoreRow",t,u.afterrestorefunc),s.p._inlinenav)try{e(s).jqGrid("showAddEditButtons")}catch(r){}return!1}if(13===i.keyCode){var a=i.target;if("TEXTAREA"==a.tagName)return!0;if(e(s).jqGrid("saveRow",t,u)&&s.p._inlinenav)try{e(s).jqGrid("showAddEditButtons")}catch(n){}return!1}}),e(s).triggerHandler("jqGridInlineEditRow",[t,u]),e.isFunction(u.oneditfunc)&&u.oneditfunc.call(s,t)))))})},saveRow:function(t,i,r,a,n,o,s){var l=e.makeArray(arguments).slice(1),d={};"object"===e.type(l[0])?d=l[0]:(e.isFunction(i)&&(d.successfunc=i),void 0!==r&&(d.url=r),void 0!==a&&(d.extraparam=a),e.isFunction(n)&&(d.aftersavefunc=n),e.isFunction(o)&&(d.errorfunc=o),e.isFunction(s)&&(d.afterrestorefunc=s)),d=e.extend(!0,{successfunc:null,url:null,extraparam:{},aftersavefunc:null,errorfunc:null,afterrestorefunc:null,restoreAfterError:!0,mtype:"POST"},e.jgrid.inlineEdit,d);var u,c,p,h,f,g=!1,m=this[0],v={},b={},_={};if(!m.grid)return g;if(f=e(m).jqGrid("getInd",t,!0),f===!1)return g;if(c=e(f).attr("editable"),d.url=d.url||m.p.editurl,"1"===c){var y;if(e('td[role="gridcell"]',f).each(function(t){if(y=m.p.colModel[t],u=y.name,"cb"!=u&&"subgrid"!=u&&y.editable===!0&&"rn"!=u&&!e(this).hasClass("not-editable-cell")){switch(y.edittype){case"checkbox":var i=["Yes","No"];y.editoptions&&(i=y.editoptions.value.split(":")),v[u]=e("input",this).is(":checked")?i[0]:i[1];break;case"text":case"password":case"textarea":case"button":v[u]=e("input, textarea",this).val();break;case"select":if(y.editoptions.multiple){var r=e("select",this),a=[];v[u]=e(r).val(),v[u]?v[u]=v[u].join(","):v[u]="",e("select option:selected",this).each(function(t,i){a[t]=e(i).text()}),b[u]=a.join(",")}else v[u]=e("select option:selected",this).val(),b[u]=e("select option:selected",this).text();y.formatter&&"select"==y.formatter&&(b={});break;case"custom":try{if(!y.editoptions||!e.isFunction(y.editoptions.custom_value))throw"e1";if(v[u]=y.editoptions.custom_value.call(m,e(".customelement",this),"get"),void 0===v[u])throw"e2"}catch(n){"e1"==n&&e.jgrid.info_dialog(e.jgrid.errors.errcap,"function 'custom_value' "+e.jgrid.edit.msg.nodefined,e.jgrid.edit.bClose),"e2"==n?e.jgrid.info_dialog(e.jgrid.errors.errcap,"function 'custom_value' "+e.jgrid.edit.msg.novalue,e.jgrid.edit.bClose):e.jgrid.info_dialog(e.jgrid.errors.errcap,n.message,e.jgrid.edit.bClose)}}if(h=e.jgrid.checkValues(v[u],t,m),h[0]===!1)return h[1]=v[u]+" "+h[1],!1;m.p.autoencode&&(v[u]=e.jgrid.htmlEncode(v[u])),"clientArray"!==d.url&&y.editoptions&&y.editoptions.NullIfEmpty===!0&&""===v[u]&&(_[u]="null")}}),h[0]===!1){try{var x=e.jgrid.findPos(e("#"+e.jgrid.jqID(t),m.grid.bDiv)[0]);e.jgrid.info_dialog(e.jgrid.errors.errcap,h[1],e.jgrid.edit.bClose,{left:x[0],top:x[1]})}catch(w){alert(h[1])}return g}var j,k=m.p.prmNames,C=t;if(j=m.p.keyIndex===!1?k.id:m.p.colModel[m.p.keyIndex+(m.p.rownumbers===!0?1:0)+(m.p.multiselect===!0?1:0)+(m.p.subGrid===!0?1:0)].name,v){if(v[k.oper]=k.editoper,void 0===v[j])v[j]=t;else if(f.id!==m.p.idPrefix+v[j]){var D=e.jgrid.stripPref(m.p.idPrefix,t);if(void 0!==m.p._index[D]&&(m.p._index[v[j]]=m.p._index[D],delete m.p._index[D]),t=m.p.idPrefix+v[j],e(f).attr("id",t),m.p.selrow===C&&(m.p.selrow=t),e.isArray(m.p.selarrrow)){var S=e.inArray(C,m.p.selarrrow);S>=0&&(m.p.selarrrow[S]=t)}if(m.p.multiselect){var T="jqg_"+m.p.id+"_"+t;e("input.cbox",f).attr("id",T).attr("name",T)}}void 0===m.p.inlineData&&(m.p.inlineData={}),v=e.extend({},v,m.p.inlineData,d.extraparam)}if("clientArray"==d.url){v=e.extend({},v,b),m.p.autoencode&&e.each(v,function(t,i){v[t]=e.jgrid.htmlDecode(i)});var P,I=e(m).jqGrid("setRowData",t,v);for(e(f).attr("editable","0"),P=0;P<m.p.savedRow.length;P++)if(m.p.savedRow[P].id==C){p=P;break}p>=0&&m.p.savedRow.splice(p,1),e(m).triggerHandler("jqGridInlineAfterSaveRow",[t,I,v,d]),e.isFunction(d.aftersavefunc)&&d.aftersavefunc.call(m,t,I,d),g=!0,e(f).unbind("keydown")}else e("#lui_"+e.jgrid.jqID(m.p.id)).show(),_=e.extend({},v,_),_[j]=e.jgrid.stripPref(m.p.idPrefix,_[j]),e.ajax(e.extend({url:d.url,data:e.isFunction(m.p.serializeRowData)?m.p.serializeRowData.call(m,_):_,type:d.mtype,async:!1,complete:function(i,r){if(e("#lui_"+e.jgrid.jqID(m.p.id)).hide(),"success"===r){var a,n,o=!0;if(a=e(m).triggerHandler("jqGridInlineSuccessSaveRow",[i,t,d]),e.isArray(a)||(a=[!0,v]),a[0]&&e.isFunction(d.successfunc)&&(a=d.successfunc.call(m,i)),e.isArray(a)?(o=a[0],v=a[1]||v):o=a,o===!0){for(m.p.autoencode&&e.each(v,function(t,i){v[t]=e.jgrid.htmlDecode(i)}),v=e.extend({},v,b),e(m).jqGrid("setRowData",t,v),e(f).attr("editable","0"),n=0;n<m.p.savedRow.length;n++)if(m.p.savedRow[n].id==t){p=n;break}p>=0&&m.p.savedRow.splice(p,1),e(m).triggerHandler("jqGridInlineAfterSaveRow",[t,i,v,d]),e.isFunction(d.aftersavefunc)&&d.aftersavefunc.call(m,t,i),g=!0,e(f).unbind("keydown")}else e(m).triggerHandler("jqGridInlineErrorSaveRow",[t,i,r,null,d]),e.isFunction(d.errorfunc)&&d.errorfunc.call(m,t,i,r,null),d.restoreAfterError===!0&&e(m).jqGrid("restoreRow",t,d.afterrestorefunc)}},error:function(i,r,a){if(e("#lui_"+e.jgrid.jqID(m.p.id)).hide(),e(m).triggerHandler("jqGridInlineErrorSaveRow",[t,i,r,a,d]),e.isFunction(d.errorfunc))d.errorfunc.call(m,t,i,r,a);else{var n=i.responseText||i.statusText;try{e.jgrid.info_dialog(e.jgrid.errors.errcap,'<div class="ui-state-error">'+n+"</div>",e.jgrid.edit.bClose,{buttonalign:"right"})}catch(o){alert(n)}}d.restoreAfterError===!0&&e(m).jqGrid("restoreRow",t,d.afterrestorefunc)}},e.jgrid.ajaxOptions,m.p.ajaxRowOptions||{}))}return g},restoreRow:function(t,i){var r=e.makeArray(arguments).slice(1),a={};return"object"===e.type(r[0])?a=r[0]:e.isFunction(i)&&(a.afterrestorefunc=i),a=e.extend(!0,e.jgrid.inlineEdit,a),this.each(function(){var i,r,n,o=this,s={};if(o.grid&&(r=e(o).jqGrid("getInd",t,!0),r!==!1)){for(n=0;n<o.p.savedRow.length;n++)if(o.p.savedRow[n].id==t){i=n;break}if(i>=0){if(e.isFunction(e.fn.datepicker))try{e("input.hasDatepicker","#"+e.jgrid.jqID(r.id)).datepicker("hide")}catch(l){}e.each(o.p.colModel,function(){this.editable===!0&&o.p.savedRow[i].hasOwnProperty(this.name)&&(s[this.name]=o.p.savedRow[i][this.name])}),e(o).jqGrid("setRowData",t,s),e(r).attr("editable","0").unbind("keydown"),o.p.savedRow.splice(i,1),e("#"+e.jgrid.jqID(t),"#"+e.jgrid.jqID(o.p.id)).hasClass("jqgrid-new-row")&&setTimeout(function(){e(o).jqGrid("delRowData",t)},0)}e(o).triggerHandler("jqGridInlineAfterRestoreRow",[t]),e.isFunction(a.afterrestorefunc)&&a.afterrestorefunc.call(o,t)}})},addRow:function(t){return t=e.extend(!0,{rowID:null,initdata:{},position:"first",useDefValues:!0,useFormatter:!1,addRowParams:{extraparam:{}}},t||{}),this.each(function(){if(this.grid){var i=this;if(t.rowID=e.isFunction(t.rowID)?t.rowID.call(i,t):null!=t.rowID?t.rowID:e.jgrid.randId(),t.useDefValues===!0&&e(i.p.colModel).each(function(){if(this.editoptions&&this.editoptions.defaultValue){var r=this.editoptions.defaultValue,a=e.isFunction(r)?r.call(i):r;t.initdata[this.name]=a}}),e(i).jqGrid("addRowData",t.rowID,t.initdata,t.position),t.rowID=i.p.idPrefix+t.rowID,e("#"+e.jgrid.jqID(t.rowID),"#"+e.jgrid.jqID(i.p.id)).addClass("jqgrid-new-row"),t.useFormatter)e("#"+e.jgrid.jqID(t.rowID)+" .ui-inline-edit","#"+e.jgrid.jqID(i.p.id)).click();else{var r=i.p.prmNames,a=r.oper;t.addRowParams.extraparam[a]=r.addoper,e(i).jqGrid("editRow",t.rowID,t.addRowParams),e(i).jqGrid("setSelection",t.rowID)}}})},inlineNav:function(t,i){return i=e.extend({edit:!0,editicon:"ui-icon-pencil",add:!0,addicon:"ui-icon-plus",save:!0,saveicon:"ui-icon-disk",cancel:!0,cancelicon:"ui-icon-cancel",addParams:{},editParams:{},restoreAfterSelect:!0},e.jgrid.nav,i||{}),this.each(function(){if(this.grid){var r,a=this,n=e.jgrid.jqID(a.p.id);if(a.p._inlinenav=!0,i.addParams.useFormatter===!0){var o,s=a.p.colModel;for(o=0;o<s.length;o++)if(s[o].formatter&&"actions"===s[o].formatter){if(s[o].formatoptions){var l={keys:!1,onEdit:null,onSuccess:null,afterSave:null,onError:null,afterRestore:null,extraparam:{},url:null},d=e.extend(l,s[o].formatoptions);i.addParams.addRowParams={keys:d.keys,oneditfunc:d.onEdit,successfunc:d.onSuccess,url:d.url,extraparam:d.extraparam,aftersavefunc:d.afterSavef,errorfunc:d.onError,afterrestorefunc:d.afterRestore}}break}}i.add&&e(a).jqGrid("navButtonAdd",t,{caption:i.addtext,title:i.addtitle,buttonicon:i.addicon,id:a.p.id+"_iladd",onClickButton:function(){e(a).jqGrid("addRow",i.addParams),i.addParams.useFormatter||(e("#"+n+"_ilsave").removeClass("ui-state-disabled"),e("#"+n+"_ilcancel").removeClass("ui-state-disabled"),e("#"+n+"_iladd").addClass("ui-state-disabled"),e("#"+n+"_iledit").addClass("ui-state-disabled"))}}),i.edit&&e(a).jqGrid("navButtonAdd",t,{caption:i.edittext,title:i.edittitle,buttonicon:i.editicon,id:a.p.id+"_iledit",onClickButton:function(){var t=e(a).jqGrid("getGridParam","selrow");t?(e(a).jqGrid("editRow",t,i.editParams),e("#"+n+"_ilsave").removeClass("ui-state-disabled"),e("#"+n+"_ilcancel").removeClass("ui-state-disabled"),e("#"+n+"_iladd").addClass("ui-state-disabled"),e("#"+n+"_iledit").addClass("ui-state-disabled")):(e.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+n,jqm:!0}),e("#jqg_alrt").focus())}}),i.save&&(e(a).jqGrid("navButtonAdd",t,{caption:i.savetext||"",title:i.savetitle||"Save row",buttonicon:i.saveicon,id:a.p.id+"_ilsave",onClickButton:function(){var t=a.p.savedRow[0].id;if(t){var r=a.p.prmNames,o=r.oper;i.editParams.extraparam||(i.editParams.extraparam={}),e("#"+e.jgrid.jqID(t),"#"+n).hasClass("jqgrid-new-row")?i.editParams.extraparam[o]=r.addoper:i.editParams.extraparam[o]=r.editoper,e(a).jqGrid("saveRow",t,i.editParams)&&e(a).jqGrid("showAddEditButtons")}else e.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+n,jqm:!0}),e("#jqg_alrt").focus()}}),e("#"+n+"_ilsave").addClass("ui-state-disabled")),i.cancel&&(e(a).jqGrid("navButtonAdd",t,{caption:i.canceltext||"",title:i.canceltitle||"Cancel row editing",buttonicon:i.cancelicon,id:a.p.id+"_ilcancel",onClickButton:function(){var t=a.p.savedRow[0].id;t?(e(a).jqGrid("restoreRow",t,i.editParams),e(a).jqGrid("showAddEditButtons")):(e.jgrid.viewModal("#alertmod",{gbox:"#gbox_"+n,jqm:!0}),e("#jqg_alrt").focus())}}),e("#"+n+"_ilcancel").addClass("ui-state-disabled")),i.restoreAfterSelect===!0&&(r=!!e.isFunction(a.p.beforeSelectRow)&&a.p.beforeSelectRow,a.p.beforeSelectRow=function(t,n){var o=!0;return a.p.savedRow.length>0&&a.p._inlinenav===!0&&t!==a.p.selrow&&null!==a.p.selrow&&(a.p.selrow==i.addParams.rowID?e(a).jqGrid("delRowData",a.p.selrow):e(a).jqGrid("restoreRow",a.p.selrow,i.editParams),e(a).jqGrid("showAddEditButtons")),r&&(o=r.call(a,t,n)),o})}})},showAddEditButtons:function(){return this.each(function(){if(this.grid){var t=e.jgrid.jqID(this.p.id);e("#"+t+"_ilsave").addClass("ui-state-disabled"),e("#"+t+"_ilcancel").addClass("ui-state-disabled"),e("#"+t+"_iladd").removeClass("ui-state-disabled"),e("#"+t+"_iledit").removeClass("ui-state-disabled")}})}})}(jQuery),function(e){/*
**
 * jqGrid extension for cellediting Grid Data
 * Tony Tomov tony@trirand.com
 * http://trirand.com/blog/ 
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl-2.0.html
**/
"use strict";e.jgrid.extend({editCell:function(t,i,r){return this.each(function(){var a,n,o,s,l=this;if(l.grid&&l.p.cellEdit===!0){if(i=parseInt(i,10),l.p.selrow=l.rows[t].id,l.p.knv||e(l).jqGrid("GridNav"),l.p.savedRow.length>0){if(r===!0&&t==l.p.iRow&&i==l.p.iCol)return;e(l).jqGrid("saveCell",l.p.savedRow[0].id,l.p.savedRow[0].ic)}else window.setTimeout(function(){e("#"+e.jgrid.jqID(l.p.knv)).attr("tabindex","-1").focus()},0);if(s=l.p.colModel[i],a=s.name,"subgrid"!=a&&"cb"!=a&&"rn"!=a){if(o=e("td:eq("+i+")",l.rows[t]),s.editable!==!0||r!==!0||o.hasClass("not-editable-cell"))parseInt(l.p.iCol,10)>=0&&parseInt(l.p.iRow,10)>=0&&(e("td:eq("+l.p.iCol+")",l.rows[l.p.iRow]).removeClass("edit-cell ui-state-highlight"),e(l.rows[l.p.iRow]).removeClass("selected-row ui-state-hover")),o.addClass("edit-cell ui-state-highlight"),e(l.rows[t]).addClass("selected-row ui-state-hover"),n=o.html().replace(/\&#160\;/gi,""),e(l).triggerHandler("jqGridSelectCell",[l.rows[t].id,a,n,t,i]),e.isFunction(l.p.onSelectCell)&&l.p.onSelectCell.call(l,l.rows[t].id,a,n,t,i);else{parseInt(l.p.iCol,10)>=0&&parseInt(l.p.iRow,10)>=0&&(e("td:eq("+l.p.iCol+")",l.rows[l.p.iRow]).removeClass("edit-cell ui-state-highlight"),e(l.rows[l.p.iRow]).removeClass("selected-row ui-state-hover")),e(o).addClass("edit-cell ui-state-highlight"),e(l.rows[t]).addClass("selected-row ui-state-hover");try{n=e.unformat.call(l,o,{rowId:l.rows[t].id,colModel:s},i)}catch(d){n=s.edittype&&"textarea"==s.edittype?e(o).text():e(o).html()}if(l.p.autoencode&&(n=e.jgrid.htmlDecode(n)),s.edittype||(s.edittype="text"),l.p.savedRow.push({id:t,ic:i,name:a,v:n}),("&nbsp;"===n||"&#160;"===n||1===n.length&&160===n.charCodeAt(0))&&(n=""),e.isFunction(l.p.formatCell)){var u=l.p.formatCell.call(l,l.rows[t].id,a,n,t,i);void 0!==u&&(n=u)}var c=e.extend({},s.editoptions||{},{id:t+"_"+a,name:a}),p=e.jgrid.createEl.call(l,s.edittype,c,n,!0,e.extend({},e.jgrid.ajaxOptions,l.p.ajaxSelectOptions||{}));e(l).triggerHandler("jqGridBeforeEditCell",[l.rows[t].id,a,n,t,i]),e.isFunction(l.p.beforeEditCell)&&l.p.beforeEditCell.call(l,l.rows[t].id,a,n,t,i),e(o).html("").append(p).attr("tabindex","0"),e.jgrid.bindEv(p,c,l),window.setTimeout(function(){e(p).focus()},0),e("input, select, textarea",o).bind("keydown",function(r){if(27===r.keyCode&&(e("input.hasDatepicker",o).length>0?e(".ui-datepicker").is(":hidden")?e(l).jqGrid("restoreCell",t,i):e("input.hasDatepicker",o).datepicker("hide"):e(l).jqGrid("restoreCell",t,i)),13===r.keyCode)return e(l).jqGrid("saveCell",t,i),!1;if(9===r.keyCode){if(l.grid.hDiv.loading)return!1;r.shiftKey?e(l).jqGrid("prevCell",t,i):e(l).jqGrid("nextCell",t,i)}r.stopPropagation()}),e(l).triggerHandler("jqGridAfterEditCell",[l.rows[t].id,a,n,t,i]),e.isFunction(l.p.afterEditCell)&&l.p.afterEditCell.call(l,l.rows[t].id,a,n,t,i)}l.p.iCol=i,l.p.iRow=t}}})},saveCell:function(t,i){return this.each(function(){var r,a=this;if(a.grid&&a.p.cellEdit===!0){if(r=a.p.savedRow.length>=1?0:null,null!==r){var n,o,s=e("td:eq("+i+")",a.rows[t]),l=a.p.colModel[i],d=l.name,u=e.jgrid.jqID(d);switch(l.edittype){case"select":if(l.editoptions.multiple){var c=e("#"+t+"_"+u,a.rows[t]),p=[];n=e(c).val(),n?n.join(","):n="",e("option:selected",c).each(function(t,i){p[t]=e(i).text()}),o=p.join(",")}else n=e("#"+t+"_"+u+" option:selected",a.rows[t]).val(),o=e("#"+t+"_"+u+" option:selected",a.rows[t]).text();l.formatter&&(o=n);break;case"checkbox":var h=["Yes","No"];l.editoptions&&(h=l.editoptions.value.split(":")),n=e("#"+t+"_"+u,a.rows[t]).is(":checked")?h[0]:h[1],o=n;break;case"password":case"text":case"textarea":case"button":n=e("#"+t+"_"+u,a.rows[t]).val(),o=n;break;case"custom":try{if(!l.editoptions||!e.isFunction(l.editoptions.custom_value))throw"e1";if(n=l.editoptions.custom_value.call(a,e(".customelement",s),"get"),void 0===n)throw"e2";o=n}catch(f){"e1"==f&&e.jgrid.info_dialog(e.jgrid.errors.errcap,"function 'custom_value' "+e.jgrid.edit.msg.nodefined,e.jgrid.edit.bClose),"e2"==f?e.jgrid.info_dialog(e.jgrid.errors.errcap,"function 'custom_value' "+e.jgrid.edit.msg.novalue,e.jgrid.edit.bClose):e.jgrid.info_dialog(e.jgrid.errors.errcap,f.message,e.jgrid.edit.bClose)}}if(o!==a.p.savedRow[r].v){var g=e(a).triggerHandler("jqGridBeforeSaveCell",[a.rows[t].id,d,n,t,i]);if(g&&(n=g,o=g),e.isFunction(a.p.beforeSaveCell)){var m=a.p.beforeSaveCell.call(a,a.rows[t].id,d,n,t,i);m&&(n=m,o=m)}var v=e.jgrid.checkValues(n,i,a);if(v[0]===!0){var b=e(a).triggerHandler("jqGridBeforeSubmitCell",[a.rows[t].id,d,n,t,i])||{};if(e.isFunction(a.p.beforeSubmitCell)&&(b=a.p.beforeSubmitCell.call(a,a.rows[t].id,d,n,t,i),b||(b={})),e("input.hasDatepicker",s).length>0&&e("input.hasDatepicker",s).datepicker("hide"),"remote"==a.p.cellsubmit)if(a.p.cellurl){var _={};a.p.autoencode&&(n=e.jgrid.htmlEncode(n)),_[d]=n;var y,x,w;w=a.p.prmNames,y=w.id,x=w.oper,_[y]=e.jgrid.stripPref(a.p.idPrefix,a.rows[t].id),_[x]=w.editoper,_=e.extend(b,_),e("#lui_"+e.jgrid.jqID(a.p.id)).show(),a.grid.hDiv.loading=!0,e.ajax(e.extend({url:a.p.cellurl,data:e.isFunction(a.p.serializeCellData)?a.p.serializeCellData.call(a,_):_,type:"POST",complete:function(r,l){if(e("#lui_"+a.p.id).hide(),a.grid.hDiv.loading=!1,"success"==l){var u=e(a).triggerHandler("jqGridAfterSubmitCell",[a,r,_.id,d,n,t,i])||[!0,""];u[0]===!0&&e.isFunction(a.p.afterSubmitCell)&&(u=a.p.afterSubmitCell.call(a,r,_.id,d,n,t,i)),u[0]===!0?(e(s).empty(),e(a).jqGrid("setCell",a.rows[t].id,i,o,!1,!1,!0),e(s).addClass("dirty-cell"),e(a.rows[t]).addClass("edited"),e(a).triggerHandler("jqGridAfterSaveCell",[a.rows[t].id,d,n,t,i]),e.isFunction(a.p.afterSaveCell)&&a.p.afterSaveCell.call(a,a.rows[t].id,d,n,t,i),a.p.savedRow.splice(0,1)):(e.jgrid.info_dialog(e.jgrid.errors.errcap,u[1],e.jgrid.edit.bClose),e(a).jqGrid("restoreCell",t,i))}},error:function(r,n,o){e("#lui_"+e.jgrid.jqID(a.p.id)).hide(),a.grid.hDiv.loading=!1,e(a).triggerHandler("jqGridErrorCell",[r,n,o]),e.isFunction(a.p.errorCell)?(a.p.errorCell.call(a,r,n,o),e(a).jqGrid("restoreCell",t,i)):(e.jgrid.info_dialog(e.jgrid.errors.errcap,r.status+" : "+r.statusText+"<br/>"+n,e.jgrid.edit.bClose),e(a).jqGrid("restoreCell",t,i))}},e.jgrid.ajaxOptions,a.p.ajaxCellOptions||{}))}else try{e.jgrid.info_dialog(e.jgrid.errors.errcap,e.jgrid.errors.nourl,e.jgrid.edit.bClose),e(a).jqGrid("restoreCell",t,i)}catch(f){}"clientArray"==a.p.cellsubmit&&(e(s).empty(),e(a).jqGrid("setCell",a.rows[t].id,i,o,!1,!1,!0),e(s).addClass("dirty-cell"),e(a.rows[t]).addClass("edited"),e(a).triggerHandler("jqGridAfterSaveCell",[a.rows[t].id,d,n,t,i]),e.isFunction(a.p.afterSaveCell)&&a.p.afterSaveCell.call(a,a.rows[t].id,d,n,t,i),a.p.savedRow.splice(0,1))}else try{window.setTimeout(function(){e.jgrid.info_dialog(e.jgrid.errors.errcap,n+" "+v[1],e.jgrid.edit.bClose)},100),e(a).jqGrid("restoreCell",t,i)}catch(f){}}else e(a).jqGrid("restoreCell",t,i)}window.setTimeout(function(){e("#"+e.jgrid.jqID(a.p.knv)).attr("tabindex","-1").focus()},0)}})},restoreCell:function(t,i){return this.each(function(){var r,a=this;if(a.grid&&a.p.cellEdit===!0){if(r=a.p.savedRow.length>=1?0:null,null!==r){var n=e("td:eq("+i+")",a.rows[t]);if(e.isFunction(e.fn.datepicker))try{e("input.hasDatepicker",n).datepicker("hide")}catch(o){}e(n).empty().attr("tabindex","-1"),e(a).jqGrid("setCell",a.rows[t].id,i,a.p.savedRow[r].v,!1,!1,!0),e(a).triggerHandler("jqGridAfterRestoreCell",[a.rows[t].id,a.p.savedRow[r].v,t,i]),e.isFunction(a.p.afterRestoreCell)&&a.p.afterRestoreCell.call(a,a.rows[t].id,a.p.savedRow[r].v,t,i),a.p.savedRow.splice(0,1)}window.setTimeout(function(){e("#"+a.p.knv).attr("tabindex","-1").focus()},0)}})},nextCell:function(t,i){return this.each(function(){var r,a=this,n=!1;if(a.grid&&a.p.cellEdit===!0){for(r=i+1;r<a.p.colModel.length;r++)if(a.p.colModel[r].editable===!0){n=r;break}n!==!1?e(a).jqGrid("editCell",t,n,!0):a.p.savedRow.length>0&&e(a).jqGrid("saveCell",t,i)}})},prevCell:function(t,i){return this.each(function(){var r,a=this,n=!1;if(a.grid&&a.p.cellEdit===!0){for(r=i-1;r>=0;r--)if(a.p.colModel[r].editable===!0){n=r;break}n!==!1?e(a).jqGrid("editCell",t,n,!0):a.p.savedRow.length>0&&e(a).jqGrid("saveCell",t,i)}})},GridNav:function(){return this.each(function(){function t(t,i,a){if("v"==a.substr(0,1)){var n=e(r.grid.bDiv)[0].clientHeight,o=e(r.grid.bDiv)[0].scrollTop,s=r.rows[t].offsetTop+r.rows[t].clientHeight,l=r.rows[t].offsetTop;"vd"==a&&s>=n&&(e(r.grid.bDiv)[0].scrollTop=e(r.grid.bDiv)[0].scrollTop+r.rows[t].clientHeight),"vu"==a&&l<o&&(e(r.grid.bDiv)[0].scrollTop=e(r.grid.bDiv)[0].scrollTop-r.rows[t].clientHeight)}if("h"==a){var d=e(r.grid.bDiv)[0].clientWidth,u=e(r.grid.bDiv)[0].scrollLeft,c=r.rows[t].cells[i].offsetLeft+r.rows[t].cells[i].clientWidth,p=r.rows[t].cells[i].offsetLeft;c>=d+parseInt(u,10)?e(r.grid.bDiv)[0].scrollLeft=e(r.grid.bDiv)[0].scrollLeft+r.rows[t].cells[i].clientWidth:p<u&&(e(r.grid.bDiv)[0].scrollLeft=e(r.grid.bDiv)[0].scrollLeft-r.rows[t].cells[i].clientWidth)}}function i(e,t){var i,a;if("lft"==t)for(i=e+1,a=e;a>=0;a--)if(r.p.colModel[a].hidden!==!0){i=a;break}if("rgt"==t)for(i=e-1,a=e;a<r.p.colModel.length;a++)if(r.p.colModel[a].hidden!==!0){i=a;break}return i}var r=this;if(r.grid&&r.p.cellEdit===!0){r.p.knv=r.p.id+"_kn";var a,n,o=e("<div style='position:fixed;top:-1000000px;width:1px;height:1px;' tabindex='0'><div tabindex='-1' style='width:1px;height:1px;' id='"+r.p.knv+"'></div></div>");e(o).insertBefore(r.grid.cDiv),e("#"+r.p.knv).focus().keydown(function(o){switch(n=o.keyCode,"rtl"==r.p.direction&&(37===n?n=39:39===n&&(n=37)),n){case 38:r.p.iRow-1>0&&(t(r.p.iRow-1,r.p.iCol,"vu"),e(r).jqGrid("editCell",r.p.iRow-1,r.p.iCol,!1));break;case 40:r.p.iRow+1<=r.rows.length-1&&(t(r.p.iRow+1,r.p.iCol,"vd"),e(r).jqGrid("editCell",r.p.iRow+1,r.p.iCol,!1));break;case 37:r.p.iCol-1>=0&&(a=i(r.p.iCol-1,"lft"),t(r.p.iRow,a,"h"),e(r).jqGrid("editCell",r.p.iRow,a,!1));break;case 39:r.p.iCol+1<=r.p.colModel.length-1&&(a=i(r.p.iCol+1,"rgt"),t(r.p.iRow,a,"h"),e(r).jqGrid("editCell",r.p.iRow,a,!1));break;case 13:parseInt(r.p.iCol,10)>=0&&parseInt(r.p.iRow,10)>=0&&e(r).jqGrid("editCell",r.p.iRow,r.p.iCol,!0);break;default:return!0}return!1})}})},getChangedCells:function(t){var i=[];return t||(t="all"),this.each(function(){var r,a=this;a.grid&&a.p.cellEdit===!0&&e(a.rows).each(function(n){var o={};e(this).hasClass("edited")&&(e("td",this).each(function(i){if(r=a.p.colModel[i].name,"cb"!==r&&"subgrid"!==r)if("dirty"==t){if(e(this).hasClass("dirty-cell"))try{o[r]=e.unformat.call(a,this,{rowId:a.rows[n].id,colModel:a.p.colModel[i]},i)}catch(s){o[r]=e.jgrid.htmlDecode(e(this).html())}}else try{o[r]=e.unformat.call(a,this,{rowId:a.rows[n].id,colModel:a.p.colModel[i]},i)}catch(s){o[r]=e.jgrid.htmlDecode(e(this).html())}}),o.id=this.id,i.push(o))})}),i}})}(jQuery),function(e){/**
 * jqGrid extension for SubGrid Data
 * Tony Tomov tony@trirand.com
 * http://trirand.com/blog/ 
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl-2.0.html
**/
"use strict";e.jgrid.extend({setSubGrid:function(){return this.each(function(){var t,i,r=this,a={plusicon:"ui-icon-plus",minusicon:"ui-icon-minus",openicon:"ui-icon-carat-1-sw",expandOnLoad:!1,delayOnLoad:50,selectOnExpand:!1,reloadOnExpand:!0};if(r.p.subGridOptions=e.extend(a,r.p.subGridOptions||{}),r.p.colNames.unshift(""),r.p.colModel.unshift({name:"subgrid",width:e.jgrid.cell_width?r.p.subGridWidth+r.p.cellLayout:r.p.subGridWidth,sortable:!1,resizable:!1,hidedlg:!0,search:!1,fixed:!0}),t=r.p.subGridModel,t[0])for(t[0].align=e.extend([],t[0].align||[]),i=0;i<t[0].name.length;i++)t[0].align[i]=t[0].align[i]||"left"})},addSubGridCell:function(e,t){var i,r,a="";return this.each(function(){a=this.formatCol(e,t),r=this.p.id,i=this.p.subGridOptions.plusicon}),'<td role="gridcell" aria-describedby="'+r+'_subgrid" class="ui-sgcollapsed sgcollapsed" '+a+"><a href='javascript:void(0);'><span class='ui-icon "+i+"'></span></a></td>"},addSubGrid:function(t,i){return this.each(function(){var r=this;if(r.grid){var a,n,o,s,l,d=function(t,i,a){var n=e("<td align='"+r.p.subGridModel[0].align[a]+"'></td>").html(i);e(t).append(n)},u=function(t,i){var a,n,o,s=e("<table cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),l=e("<tr></tr>");for(n=0;n<r.p.subGridModel[0].name.length;n++)a=e("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+r.p.direction+"'></th>"),e(a).html(r.p.subGridModel[0].name[n]),e(a).width(r.p.subGridModel[0].width[n]),e(l).append(a);e(s).append(l),t&&(o=r.p.xmlReader.subgrid,e(o.root+" "+o.row,t).each(function(){if(l=e("<tr class='ui-widget-content ui-subtblcell'></tr>"),o.repeatitems===!0)e(o.cell,this).each(function(t){d(l,e(this).text()||"&#160;",t)});else{var t=r.p.subGridModel[0].mapping||r.p.subGridModel[0].name;if(t)for(n=0;n<t.length;n++)d(l,e(t[n],this).text()||"&#160;",n)}e(s).append(l)}));var u=e("table:first",r.grid.bDiv).attr("id")+"_";return e("#"+e.jgrid.jqID(u+i)).append(s),r.grid.hDiv.loading=!1,e("#load_"+e.jgrid.jqID(r.p.id)).hide(),!1},c=function(t,i){var a,n,o,s,l,u,c=e("<table cellspacing='0' cellpadding='0' border='0'><tbody></tbody></table>"),p=e("<tr></tr>");for(o=0;o<r.p.subGridModel[0].name.length;o++)a=e("<th class='ui-state-default ui-th-subgrid ui-th-column ui-th-"+r.p.direction+"'></th>"),e(a).html(r.p.subGridModel[0].name[o]),e(a).width(r.p.subGridModel[0].width[o]),e(p).append(a);if(e(c).append(p),t&&(l=r.p.jsonReader.subgrid,n=e.jgrid.getAccessor(t,l.root),void 0!==n))for(o=0;o<n.length;o++){if(s=n[o],p=e("<tr class='ui-widget-content ui-subtblcell'></tr>"),l.repeatitems===!0)for(l.cell&&(s=s[l.cell]),u=0;u<s.length;u++)d(p,s[u]||"&#160;",u);else{var h=r.p.subGridModel[0].mapping||r.p.subGridModel[0].name;if(h.length)for(u=0;u<h.length;u++)d(p,s[h[u]]||"&#160;",u)}e(c).append(p)}var f=e("table:first",r.grid.bDiv).attr("id")+"_";return e("#"+e.jgrid.jqID(f+i)).append(c),r.grid.hDiv.loading=!1,e("#load_"+e.jgrid.jqID(r.p.id)).hide(),!1},p=function(t){var i,a,n,o;if(i=e(t).attr("id"),a={nd_:(new Date).getTime()},a[r.p.prmNames.subgridid]=i,!r.p.subGridModel[0])return!1;if(r.p.subGridModel[0].params)for(o=0;o<r.p.subGridModel[0].params.length;o++)for(n=0;n<r.p.colModel.length;n++)r.p.colModel[n].name===r.p.subGridModel[0].params[o]&&(a[r.p.colModel[n].name]=e("td:eq("+n+")",t).text().replace(/\&#160\;/gi,""));if(!r.grid.hDiv.loading)switch(r.grid.hDiv.loading=!0,e("#load_"+e.jgrid.jqID(r.p.id)).show(),r.p.subgridtype||(r.p.subgridtype=r.p.datatype),e.isFunction(r.p.subgridtype)?r.p.subgridtype.call(r,a):r.p.subgridtype=r.p.subgridtype.toLowerCase(),r.p.subgridtype){case"xml":case"json":e.ajax(e.extend({type:r.p.mtype,url:r.p.subGridUrl,dataType:r.p.subgridtype,data:e.isFunction(r.p.serializeSubGridData)?r.p.serializeSubGridData.call(r,a):a,complete:function(t){"xml"===r.p.subgridtype?u(t.responseXML,i):c(e.jgrid.parse(t.responseText),i),t=null}},e.jgrid.ajaxOptions,r.p.ajaxSubgridOptions||{}))}return!1},h=0;e.each(r.p.colModel,function(){this.hidden!==!0&&"rn"!==this.name&&"cb"!==this.name||h++});var f=r.rows.length,g=1;for(void 0!==i&&i>0&&(g=i,f=i+1);g<f;)e(r.rows[g]).hasClass("jqgrow")&&e(r.rows[g].cells[t]).bind("click",function(){var i=e(this).parent("tr")[0];if(l=i.nextSibling,e(this).hasClass("sgcollapsed")){if(n=r.p.id,a=i.id,r.p.subGridOptions.reloadOnExpand===!0||r.p.subGridOptions.reloadOnExpand===!1&&!e(l).hasClass("ui-subgrid")){if(o=t>=1?"<td colspan='"+t+"'>&#160;</td>":"",s=e(r).triggerHandler("jqGridSubGridBeforeExpand",[n+"_"+a,a]),s=s!==!1&&"stop"!==s,s&&e.isFunction(r.p.subGridBeforeExpand)&&(s=r.p.subGridBeforeExpand.call(r,n+"_"+a,a)),s===!1)return!1;e(i).after("<tr role='row' class='ui-subgrid'>"+o+"<td class='ui-widget-content subgrid-cell'><span class='ui-icon "+r.p.subGridOptions.openicon+"'></span></td><td colspan='"+parseInt(r.p.colNames.length-1-h,10)+"' class='ui-widget-content subgrid-data'><div id="+n+"_"+a+" class='tablediv'></div></td></tr>"),e(r).triggerHandler("jqGridSubGridRowExpanded",[n+"_"+a,a]),e.isFunction(r.p.subGridRowExpanded)?r.p.subGridRowExpanded.call(r,n+"_"+a,a):p(i)}else e(l).show();e(this).html("<a href='javascript:void(0);'><span class='ui-icon "+r.p.subGridOptions.minusicon+"'></span></a>").removeClass("sgcollapsed").addClass("sgexpanded"),r.p.subGridOptions.selectOnExpand&&e(r).jqGrid("setSelection",a)}else if(e(this).hasClass("sgexpanded")){if(s=e(r).triggerHandler("jqGridSubGridRowColapsed",[n+"_"+a,a]),s=s!==!1&&"stop"!==s,s&&e.isFunction(r.p.subGridRowColapsed)&&(a=i.id,s=r.p.subGridRowColapsed.call(r,n+"_"+a,a)),s===!1)return!1;r.p.subGridOptions.reloadOnExpand===!0?e(l).remove(".ui-subgrid"):e(l).hasClass("ui-subgrid")&&e(l).hide(),e(this).html("<a href='javascript:void(0);'><span class='ui-icon "+r.p.subGridOptions.plusicon+"'></span></a>").removeClass("sgexpanded").addClass("sgcollapsed")}return!1}),g++;r.p.subGridOptions.expandOnLoad===!0&&e(r.rows).filter(".jqgrow").each(function(t,i){e(i.cells[0]).click()}),r.subGridXml=function(e,t){u(e,t)},r.subGridJson=function(e,t){c(e,t)}}})},expandSubGridRow:function(t){return this.each(function(){var i=this;if((i.grid||t)&&i.p.subGrid===!0){var r=e(this).jqGrid("getInd",t,!0);if(r){var a=e("td.sgcollapsed",r)[0];a&&e(a).trigger("click")}}})},collapseSubGridRow:function(t){return this.each(function(){var i=this;if((i.grid||t)&&i.p.subGrid===!0){var r=e(this).jqGrid("getInd",t,!0);if(r){var a=e("td.sgexpanded",r)[0];a&&e(a).trigger("click")}}})},toggleSubGridRow:function(t){return this.each(function(){var i=this;if((i.grid||t)&&i.p.subGrid===!0){var r=e(this).jqGrid("getInd",t,!0);if(r){var a=e("td.sgcollapsed",r)[0];a?e(a).trigger("click"):(a=e("td.sgexpanded",r)[0],a&&e(a).trigger("click"))}}})}})}(jQuery),/**
 * jqGrid extension - Tree Grid
 * Tony Tomov tony@trirand.com
 * http://trirand.com/blog/
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
**/
function(e){"use strict";e.jgrid.extend({setTreeNode:function(t,i){return this.each(function(){var r=this;if(r.grid&&r.p.treeGrid)for(var a,n,o,s,l,d,u,c,p=r.p.expColInd,h=r.p.treeReader.expanded_field,f=r.p.treeReader.leaf_field,g=r.p.treeReader.level_field,m=r.p.treeReader.icon_field,v=r.p.treeReader.loaded;t<i;){var b,_=r.rows[t].id,y=r.p._index[_];if(u=r.p.data[y],"nested"==r.p.treeGridModel&&(u[f]||(a=parseInt(u[r.p.treeReader.left_field],10),n=parseInt(u[r.p.treeReader.right_field],10),u[f]=n===a+1?"true":"false",r.rows[t].cells[r.p._treeleafpos].innerHTML=u[f])),void 0!==u){if(o=parseInt(u[g],10),0===r.p.tree_root_level?(s=o+1,l=o):(s=o,l=o-1),d="<div class='tree-wrap tree-wrap-"+r.p.direction+"' style='width:"+18*s+"px;'>",d+="<div style='"+("rtl"==r.p.direction?"right:":"left:")+18*l+"px;' class='ui-icon ",void 0!==u[v]&&("true"==u[v]||u[v]===!0?u[v]=!0:u[v]=!1),"true"==u[f]||u[f]===!0?(d+=(void 0!==u[m]&&""!==u[m]?u[m]:r.p.treeIcons.leaf)+" tree-leaf treeclick",u[f]=!0,c="leaf"):(u[f]=!1,c=""),u[h]=("true"==u[h]||u[h]===!0)&&(u[v]||void 0===u[v]),d+=u[h]===!1?u[f]===!0?"'":r.p.treeIcons.plus+" tree-plus treeclick'":u[f]===!0?"'":r.p.treeIcons.minus+" tree-minus treeclick'",d+="></div></div>",e(r.rows[t].cells[p]).wrapInner("<span class='cell-wrapper"+c+"'></span>").prepend(d),o!==parseInt(r.p.tree_root_level,10)){var x=e(r).jqGrid("getNodeParent",u);b=!x||!x.hasOwnProperty(h)||x[h],b||e(r.rows[t]).css("display","none")}e(r.rows[t].cells[p]).find("div.treeclick").bind("click",function(t){var i=t.target||t.srcElement,a=e(i,r.rows).closest("tr.jqgrow")[0].id,n=r.p._index[a];return r.p.data[n][f]||(r.p.data[n][h]?(e(r).jqGrid("collapseRow",r.p.data[n]),e(r).jqGrid("collapseNode",r.p.data[n])):(e(r).jqGrid("expandRow",r.p.data[n]),e(r).jqGrid("expandNode",r.p.data[n]))),!1}),r.p.ExpandColClick===!0&&e(r.rows[t].cells[p]).find("span.cell-wrapper").css("cursor","pointer").bind("click",function(t){var i=t.target||t.srcElement,a=e(i,r.rows).closest("tr.jqgrow")[0].id,n=r.p._index[a];return r.p.data[n][f]||(r.p.data[n][h]?(e(r).jqGrid("collapseRow",r.p.data[n]),e(r).jqGrid("collapseNode",r.p.data[n])):(e(r).jqGrid("expandRow",r.p.data[n]),e(r).jqGrid("expandNode",r.p.data[n]))),e(r).jqGrid("setSelection",a),!1}),t++}else t++,i++}})},setTreeGrid:function(){return this.each(function(){var t,i,r,a,n=this,o=0,s=!1,l=[];if(n.p.treeGrid){n.p.treedatatype||e.extend(n.p,{treedatatype:n.p.datatype}),n.p.subGrid=!1,n.p.altRows=!1,n.p.pgbuttons=!1,n.p.pginput=!1,n.p.gridview=!0,null===n.p.rowTotal&&(n.p.rowNum=1e4),n.p.multiselect=!1,n.p.rowList=[],n.p.expColInd=0,t="ui-icon-triangle-1-"+("rtl"==n.p.direction?"w":"e"),n.p.treeIcons=e.extend({plus:t,minus:"ui-icon-triangle-1-s",leaf:"ui-icon-radio-off"},n.p.treeIcons||{}),"nested"==n.p.treeGridModel?n.p.treeReader=e.extend({level_field:"level",left_field:"lft",right_field:"rgt",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},n.p.treeReader):"adjacency"==n.p.treeGridModel&&(n.p.treeReader=e.extend({level_field:"level",parent_id_field:"parent",leaf_field:"isLeaf",expanded_field:"expanded",loaded:"loaded",icon_field:"icon"},n.p.treeReader));for(r in n.p.colModel)if(n.p.colModel.hasOwnProperty(r)){i=n.p.colModel[r].name,i!=n.p.ExpandColumn||s||(s=!0,n.p.expColInd=o),o++;for(a in n.p.treeReader)n.p.treeReader.hasOwnProperty(a)&&n.p.treeReader[a]==i&&l.push(i)}e.each(n.p.treeReader,function(t,i){i&&e.inArray(i,l)===-1&&("leaf_field"===t&&(n.p._treeleafpos=o),o++,n.p.colNames.push(i),n.p.colModel.push({name:i,width:1,hidden:!0,sortable:!1,resizable:!1,hidedlg:!0,editable:!0,search:!1}))})}})},expandRow:function(t){this.each(function(){var i=this;if(i.grid&&i.p.treeGrid){var r=e(i).jqGrid("getNodeChildren",t),a=i.p.treeReader.expanded_field,n=i.rows;e(r).each(function(){var t=e.jgrid.getAccessor(this,i.p.localReader.id);e(n.namedItem(t)).css("display",""),this[a]&&e(i).jqGrid("expandRow",this)})}})},collapseRow:function(t){this.each(function(){var i=this;if(i.grid&&i.p.treeGrid){var r=e(i).jqGrid("getNodeChildren",t),a=i.p.treeReader.expanded_field,n=i.rows;e(r).each(function(){var t=e.jgrid.getAccessor(this,i.p.localReader.id);e(n.namedItem(t)).css("display","none"),this[a]&&e(i).jqGrid("collapseRow",this)})}})},getRootNodes:function(){var t=[];return this.each(function(){var i=this;if(i.grid&&i.p.treeGrid)switch(i.p.treeGridModel){case"nested":var r=i.p.treeReader.level_field;e(i.p.data).each(function(){parseInt(this[r],10)===parseInt(i.p.tree_root_level,10)&&t.push(this)});break;case"adjacency":var a=i.p.treeReader.parent_id_field;e(i.p.data).each(function(){null!==this[a]&&"null"!=String(this[a]).toLowerCase()||t.push(this)})}}),t},getNodeDepth:function(t){var i=null;return this.each(function(){if(this.grid&&this.p.treeGrid){var r=this;switch(r.p.treeGridModel){case"nested":var a=r.p.treeReader.level_field;i=parseInt(t[a],10)-parseInt(r.p.tree_root_level,10);break;case"adjacency":i=e(r).jqGrid("getNodeAncestors",t).length}}}),i},getNodeParent:function(t){var i=null;return this.each(function(){var r=this;if(r.grid&&r.p.treeGrid)switch(r.p.treeGridModel){case"nested":var a=r.p.treeReader.left_field,n=r.p.treeReader.right_field,o=r.p.treeReader.level_field,s=parseInt(t[a],10),l=parseInt(t[n],10),d=parseInt(t[o],10);e(this.p.data).each(function(){if(parseInt(this[o],10)===d-1&&parseInt(this[a],10)<s&&parseInt(this[n],10)>l)return i=this,!1});break;case"adjacency":var u=r.p.treeReader.parent_id_field,c=r.p.localReader.id;e(this.p.data).each(function(){if(this[c]==t[u])return i=this,!1})}}),i},getNodeChildren:function(t){var i=[];return this.each(function(){var r=this;if(r.grid&&r.p.treeGrid)switch(r.p.treeGridModel){case"nested":var a=r.p.treeReader.left_field,n=r.p.treeReader.right_field,o=r.p.treeReader.level_field,s=parseInt(t[a],10),l=parseInt(t[n],10),d=parseInt(t[o],10);e(this.p.data).each(function(){parseInt(this[o],10)===d+1&&parseInt(this[a],10)>s&&parseInt(this[n],10)<l&&i.push(this)});break;case"adjacency":var u=r.p.treeReader.parent_id_field,c=r.p.localReader.id;e(this.p.data).each(function(){this[u]==t[c]&&i.push(this)})}}),i},getFullTreeNode:function(t){var i=[];return this.each(function(){var r,a=this;if(a.grid&&a.p.treeGrid)switch(a.p.treeGridModel){case"nested":var n=a.p.treeReader.left_field,o=a.p.treeReader.right_field,s=a.p.treeReader.level_field,l=parseInt(t[n],10),d=parseInt(t[o],10),u=parseInt(t[s],10);e(this.p.data).each(function(){parseInt(this[s],10)>=u&&parseInt(this[n],10)>=l&&parseInt(this[n],10)<=d&&i.push(this)});break;case"adjacency":if(t){i.push(t);var c=a.p.treeReader.parent_id_field,p=a.p.localReader.id;e(this.p.data).each(function(e){for(r=i.length,e=0;e<r;e++)if(i[e][p]==this[c]){i.push(this);break}})}}}),i},getNodeAncestors:function(t){var i=[];return this.each(function(){if(this.grid&&this.p.treeGrid)for(var r=e(this).jqGrid("getNodeParent",t);r;)i.push(r),r=e(this).jqGrid("getNodeParent",r)}),i},isVisibleNode:function(t){var i=!0;return this.each(function(){var r=this;if(r.grid&&r.p.treeGrid){var a=e(r).jqGrid("getNodeAncestors",t),n=r.p.treeReader.expanded_field;e(a).each(function(){if(i=i&&this[n],!i)return!1})}}),i},isNodeLoaded:function(t){var i;return this.each(function(){var r=this;if(r.grid&&r.p.treeGrid){var a=r.p.treeReader.leaf_field;i=void 0!==t&&(void 0!==t.loaded?t.loaded:!!(t[a]||e(r).jqGrid("getNodeChildren",t).length>0))}}),i},expandNode:function(t){return this.each(function(){if(this.grid&&this.p.treeGrid){var i=this.p.treeReader.expanded_field,r=this.p.treeReader.parent_id_field,a=this.p.treeReader.loaded,n=this.p.treeReader.level_field,o=this.p.treeReader.left_field,s=this.p.treeReader.right_field;if(!t[i]){var l=e.jgrid.getAccessor(t,this.p.localReader.id),d=e("#"+e.jgrid.jqID(l),this.grid.bDiv)[0],u=this.p._index[l];e(this).jqGrid("isNodeLoaded",this.p.data[u])?(t[i]=!0,e("div.treeclick",d).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus")):this.grid.hDiv.loading||(t[i]=!0,e("div.treeclick",d).removeClass(this.p.treeIcons.plus+" tree-plus").addClass(this.p.treeIcons.minus+" tree-minus"),this.p.treeANode=d.rowIndex,this.p.datatype=this.p.treedatatype,"nested"==this.p.treeGridModel?e(this).jqGrid("setGridParam",{postData:{nodeid:l,n_left:t[o],n_right:t[s],n_level:t[n]}}):e(this).jqGrid("setGridParam",{postData:{nodeid:l,parentid:t[r],n_level:t[n]}}),e(this).trigger("reloadGrid"),t[a]=!0,"nested"==this.p.treeGridModel?e(this).jqGrid("setGridParam",{postData:{nodeid:"",n_left:"",n_right:"",n_level:""}}):e(this).jqGrid("setGridParam",{postData:{nodeid:"",parentid:"",n_level:""}}))}}})},collapseNode:function(t){return this.each(function(){if(this.grid&&this.p.treeGrid){var i=this.p.treeReader.expanded_field;if(t[i]){t[i]=!1;var r=e.jgrid.getAccessor(t,this.p.localReader.id),a=e("#"+e.jgrid.jqID(r),this.grid.bDiv)[0];e("div.treeclick",a).removeClass(this.p.treeIcons.minus+" tree-minus").addClass(this.p.treeIcons.plus+" tree-plus")}}})},SortTree:function(t,i,r,a){return this.each(function(){if(this.grid&&this.p.treeGrid){var n,o,s,l,d,u=[],c=this,p=e(this).jqGrid("getRootNodes");for(l=e.jgrid.from(p),l.orderBy(t,i,r,a),d=l.select(),n=0,o=d.length;n<o;n++)s=d[n],u.push(s),e(this).jqGrid("collectChildrenSortTree",u,s,t,i,r,a);e.each(u,function(t){var i=e.jgrid.getAccessor(this,c.p.localReader.id);e("#"+e.jgrid.jqID(c.p.id)+" tbody tr:eq("+t+")").after(e("tr#"+e.jgrid.jqID(i),c.grid.bDiv))}),l=null,d=null,u=null}})},collectChildrenSortTree:function(t,i,r,a,n,o){return this.each(function(){if(this.grid&&this.p.treeGrid){var s,l,d,u,c,p;for(u=e(this).jqGrid("getNodeChildren",i),c=e.jgrid.from(u),c.orderBy(r,a,n,o),p=c.select(),s=0,l=p.length;s<l;s++)d=p[s],t.push(d),e(this).jqGrid("collectChildrenSortTree",t,d,r,a,n,o)}})},setTreeRow:function(t,i){var r=!1;return this.each(function(){var a=this;a.grid&&a.p.treeGrid&&(r=e(a).jqGrid("setRowData",t,i))}),r},delTreeNode:function(t){return this.each(function(){var i,r,a,n,o,s=this,l=s.p.localReader.id,d=s.p.treeReader.left_field,u=s.p.treeReader.right_field;if(s.grid&&s.p.treeGrid){var c=s.p._index[t];if(void 0!==c){r=parseInt(s.p.data[c][u],10),a=r-parseInt(s.p.data[c][d],10)+1;var p=e(s).jqGrid("getFullTreeNode",s.p.data[c]);if(p.length>0)for(i=0;i<p.length;i++)e(s).jqGrid("delRowData",p[i][l]);if("nested"===s.p.treeGridModel){if(n=e.jgrid.from(s.p.data).greater(d,r,{stype:"integer"}).select(),n.length)for(o in n)n.hasOwnProperty(o)&&(n[o][d]=parseInt(n[o][d],10)-a);if(n=e.jgrid.from(s.p.data).greater(u,r,{stype:"integer"}).select(),n.length)for(o in n)n.hasOwnProperty(o)&&(n[o][u]=parseInt(n[o][u],10)-a)}}}})},addChildNode:function(t,i,r,a){var n=this[0];if(r){var o,s,l,d,u,c,p,h,f=n.p.treeReader.expanded_field,g=n.p.treeReader.leaf_field,m=n.p.treeReader.level_field,v=n.p.treeReader.parent_id_field,b=n.p.treeReader.left_field,_=n.p.treeReader.right_field,y=n.p.treeReader.loaded,x=0,w=i;if(void 0===a&&(a=!1),void 0===t||null===t){if(u=n.p.data.length-1,u>=0)for(;u>=0;)x=Math.max(x,parseInt(n.p.data[u][n.p.localReader.id],10)),u--;t=x+1}var j=e(n).jqGrid("getInd",i);if(p=!1,void 0===i||null===i||""===i)i=null,w=null,o="last",d=n.p.tree_root_level,u=n.p.data.length+1;else{o="after",s=n.p._index[i],l=n.p.data[s],i=l[n.p.localReader.id],d=parseInt(l[m],10)+1;var k=e(n).jqGrid("getFullTreeNode",l);k.length?(u=k[k.length-1][n.p.localReader.id],w=u,u=e(n).jqGrid("getInd",w)+1):u=e(n).jqGrid("getInd",i)+1,l[g]&&(p=!0,l[f]=!0,e(n.rows[j]).find("span.cell-wrapperleaf").removeClass("cell-wrapperleaf").addClass("cell-wrapper").end().find("div.tree-leaf").removeClass(n.p.treeIcons.leaf+" tree-leaf").addClass(n.p.treeIcons.minus+" tree-minus"),n.p.data[s][g]=!1,l[y]=!0)}if(c=u+1,void 0===r[f]&&(r[f]=!1),void 0===r[y]&&(r[y]=!1),r[m]=d,void 0===r[g]&&(r[g]=!0),"adjacency"===n.p.treeGridModel&&(r[v]=i),"nested"===n.p.treeGridModel){var C,D,S;if(null!==i){if(h=parseInt(l[_],10),C=e.jgrid.from(n.p.data),C=C.greaterOrEquals(_,h,{stype:"integer"}),D=C.select(),D.length)for(S in D)D.hasOwnProperty(S)&&(D[S][b]=D[S][b]>h?parseInt(D[S][b],10)+2:D[S][b],D[S][_]=D[S][_]>=h?parseInt(D[S][_],10)+2:D[S][_]);r[b]=h,r[_]=h+1}else{if(h=parseInt(e(n).jqGrid("getCol",_,!1,"max"),10),D=e.jgrid.from(n.p.data).greater(b,h,{stype:"integer"}).select(),D.length)for(S in D)D.hasOwnProperty(S)&&(D[S][b]=parseInt(D[S][b],10)+2);if(D=e.jgrid.from(n.p.data).greater(_,h,{stype:"integer"}).select(),D.length)for(S in D)D.hasOwnProperty(S)&&(D[S][_]=parseInt(D[S][_],10)+2);r[b]=h+1,r[_]=h+2}}(null===i||e(n).jqGrid("isNodeLoaded",l)||p)&&(e(n).jqGrid("addRowData",t,r,o,w),e(n).jqGrid("setTreeNode",u,c)),l&&!l[f]&&a&&e(n.rows[j]).find("div.treeclick").click()}}})}(jQuery),function(e){"use strict";e.extend(e.jgrid,{template:function(t){var i,r=e.makeArray(arguments).slice(1),a=r.length;return null==t&&(t=""),t.replace(/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,function(t,n){if(!isNaN(parseInt(n,10)))return r[parseInt(n,10)];for(i=0;i<a;i++)if(e.isArray(r[i]))for(var o=r[i],s=o.length;s--;)if(n===o[s].nm)return o[s].v})}}),e.jgrid.extend({groupingSetup:function(){return this.each(function(){var t,i,r,a=this,n=a.p.colModel,o=a.p.groupingView;if(null===o||"object"!=typeof o&&!e.isFunction(o))a.p.grouping=!1;else if(o.groupField.length){for(void 0===o.visibiltyOnNextGrouping&&(o.visibiltyOnNextGrouping=[]),o.lastvalues=[],o.groups=[],o.counters=[],t=0;t<o.groupField.length;t++)o.groupOrder[t]||(o.groupOrder[t]="asc"),o.groupText[t]||(o.groupText[t]="{0}"),"boolean"!=typeof o.groupColumnShow[t]&&(o.groupColumnShow[t]=!0),"boolean"!=typeof o.groupSummary[t]&&(o.groupSummary[t]=!1),o.groupColumnShow[t]===!0?(o.visibiltyOnNextGrouping[t]=!0,e(a).jqGrid("showCol",o.groupField[t])):(o.visibiltyOnNextGrouping[t]=e("#"+e.jgrid.jqID(a.p.id+"_"+o.groupField[t])).is(":visible"),e(a).jqGrid("hideCol",o.groupField[t]));for(o.summary=[],i=0,r=n.length;i<r;i++)n[i].summaryType&&o.summary.push({nm:n[i].name,st:n[i].summaryType,v:"",sr:n[i].summaryRound,srt:n[i].summaryRoundType||"round"})}else a.p.grouping=!1})},groupingPrepare:function(t,i,r,a){return this.each(function(){var n,o,s,l,d,u=this.p.groupingView,c=this,p=u.groupField.length,h=0;for(n=0;n<p;n++)o=u.groupField[n],l=u.displayField[n],s=r[o],d=null==l?null:r[l],null==d&&(d=s),void 0!==s&&(0===a?(u.groups.push({idx:n,dataIndex:o,value:s,displayValue:d,startRow:a,cnt:1,summary:[]}),u.lastvalues[n]=s,u.counters[n]={cnt:1,pos:u.groups.length-1,summary:e.extend(!0,[],u.summary)},e.each(u.counters[n].summary,function(){e.isFunction(this.st)?this.v=this.st.call(c,this.v,this.nm,r):this.v=e(c).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,r)}),u.groups[u.counters[n].pos].summary=u.counters[n].summary):"object"!=typeof s&&u.lastvalues[n]!==s?(u.groups.push({idx:n,dataIndex:o,value:s,displayValue:d,startRow:a,cnt:1,summary:[]}),u.lastvalues[n]=s,h=1,u.counters[n]={cnt:1,pos:u.groups.length-1,summary:e.extend(!0,[],u.summary)},e.each(u.counters[n].summary,function(){e.isFunction(this.st)?this.v=this.st.call(c,this.v,this.nm,r):this.v=e(c).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,r)}),u.groups[u.counters[n].pos].summary=u.counters[n].summary):1===h?(u.groups.push({idx:n,dataIndex:o,value:s,displayValue:d,startRow:a,cnt:1,summary:[]}),u.lastvalues[n]=s,u.counters[n]={cnt:1,pos:u.groups.length-1,summary:e.extend(!0,[],u.summary)},e.each(u.counters[n].summary,function(){e.isFunction(this.st)?this.v=this.st.call(c,this.v,this.nm,r):this.v=e(c).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,r)}),u.groups[u.counters[n].pos].summary=u.counters[n].summary):(u.counters[n].cnt+=1,u.groups[u.counters[n].pos].cnt=u.counters[n].cnt,e.each(u.counters[n].summary,function(){e.isFunction(this.st)?this.v=this.st.call(c,this.v,this.nm,r):this.v=e(c).jqGrid("groupingCalculations.handler",this.st,this.v,this.nm,this.sr,this.srt,r)}),u.groups[u.counters[n].pos].summary=u.counters[n].summary));i.push(t)}),i},groupingToggle:function(t){return this.each(function(){var i=this,r=i.p.groupingView,a=t.split("_"),n=parseInt(a[a.length-2],10);a.splice(a.length-2,2);var o,s=a.join("_"),l=r.minusicon,d=r.plusicon,u=e("#"+e.jgrid.jqID(t)),c=u.length?u[0].nextSibling:null,p=e("#"+e.jgrid.jqID(t)+" span.tree-wrap-"+i.p.direction),h=!1;if(p.hasClass(l)){if(r.showSummaryOnHide){if(c)for(;c;){if(e(c).hasClass("jqfoot")){var f=parseInt(e(c).attr("jqfootlevel"),10);if(f<=n)break}e(c).hide(),c=c.nextSibling}}else if(c)for(;c&&!e(c).hasClass(s+"_"+String(n))&&!e(c).hasClass(s+"_"+String(n-1));)e(c).hide(),c=c.nextSibling;p.removeClass(l).addClass(d),h=!0}else{if(c)for(;c&&!e(c).hasClass(s+"_"+String(n))&&!e(c).hasClass(s+"_"+String(n-1));)e(c).show(),o=e(c).find("span.tree-wrap-"+i.p.direction),o&&e(o).hasClass(d)&&e(o).removeClass(d).addClass(l),c=c.nextSibling;p.removeClass(d).addClass(l)}e(i).triggerHandler("jqGridGroupingClickGroup",[t,h]),e.isFunction(i.p.onClickGroup)&&i.p.onClickGroup.call(i,t,h)}),!1},groupingRender:function(t,i){return this.each(function(){function r(e,t,i){var r,a=!1;if(0===t)a=i[e];else{var n=i[e].idx;if(0===n)a=i[e];else for(r=e;r>=0;r--)if(i[r].idx===n-t){a=i[r];break}}return a}var a,n,o,s=this,l=s.p.groupingView,d="",u="",c=l.groupCollapse?l.plusicon:l.minusicon,p=[],h=l.groupField.length;c+=" tree-wrap-"+s.p.direction,e.each(s.p.colModel,function(e,t){var i;for(i=0;i<h;i++)if(l.groupField[i]===t.name){p[i]=e;break}});var f=0,g=e.makeArray(l.groupSummary);g.reverse(),e.each(l.groups,function(m,v){f++,n=s.p.id+"ghead_"+v.idx,a=n+"_"+m,u="<span style='cursor:pointer;' class='ui-icon "+c+"' onclick=\"jQuery('#"+e.jgrid.jqID(s.p.id)+"').jqGrid('groupingToggle','"+a+"');return false;\"></span>";try{o=s.formatter(a,v.displayValue,p[v.idx],v.value)}catch(b){o=v.displayValue}d+='<tr id="'+a+'" role="row" class= "ui-widget-content jqgroup ui-row-'+s.p.direction+" "+n+'"><td style="padding-left:'+12*v.idx+'px;" colspan="'+i+'">'+u+e.jgrid.template(l.groupText[v.idx],o,v.cnt,v.summary)+"</td></tr>";var _=h-1===v.idx;if(_){var y,x,w,j=l.groups[m+1],k=void 0!==j?l.groups[m+1].startRow:t.length;for(x=v.startRow;x<k;x++)d+=t[x].join("");var C;if(void 0!==j){for(C=0;C<l.groupField.length&&j.dataIndex!==l.groupField[C];C++);f=l.groupField.length-C}for(w=0;w<f;w++)if(g[w]){var D="";l.groupCollapse&&!l.showSummaryOnHide&&(D=' style="display:none;"'),d+="<tr"+D+' jqfootlevel="'+(v.idx-w)+'" role="row" class="ui-widget-content jqfoot ui-row-'+s.p.direction+'">';var S,T=r(m,w,l.groups),P=s.p.colModel,I=T.cnt;for(y=0;y<i;y++){var $="<td "+s.formatCol(y,1,"")+">&#160;</td>",F="{0}";e.each(T.summary,function(){if(this.nm===P[y].name){P[y].summaryTpl&&(F=P[y].summaryTpl),"string"==typeof this.st&&"avg"===this.st.toLowerCase()&&this.v&&I>0&&(this.v=this.v/I);try{S=s.formatter("",this.v,y,this)}catch(t){S=this.v}return $="<td "+s.formatCol(y,1,"")+">"+e.jgrid.format(F,S)+"</td>",!1}}),d+=$}d+="</tr>"}f=C}}),e("#"+e.jgrid.jqID(s.p.id)+" tbody:first").append(d),d=null})},groupingGroupBy:function(t,i){return this.each(function(){var r=this;"string"==typeof t&&(t=[t]);var a=r.p.groupingView;r.p.grouping=!0,void 0===a.visibiltyOnNextGrouping&&(a.visibiltyOnNextGrouping=[]);var n;for(n=0;n<a.groupField.length;n++)!a.groupColumnShow[n]&&a.visibiltyOnNextGrouping[n]&&e(r).jqGrid("showCol",a.groupField[n]);for(n=0;n<t.length;n++)a.visibiltyOnNextGrouping[n]=e("#"+e.jgrid.jqID(r.p.id)+"_"+e.jgrid.jqID(t[n])).is(":visible");r.p.groupingView=e.extend(r.p.groupingView,i||{}),a.groupField=t,e(r).trigger("reloadGrid")})},groupingRemove:function(t){return this.each(function(){var i=this;if(void 0===t&&(t=!0),i.p.grouping=!1,t===!0){var r,a=i.p.groupingView;for(r=0;r<a.groupField.length;r++)!a.groupColumnShow[r]&&a.visibiltyOnNextGrouping[r]&&e(i).jqGrid("showCol",a.groupField);e("tr.jqgroup, tr.jqfoot","#"+e.jgrid.jqID(i.p.id)+" tbody:first").remove(),e("tr.jqgrow:hidden","#"+e.jgrid.jqID(i.p.id)+" tbody:first").show()}else e(i).trigger("reloadGrid")})},groupingCalculations:{handler:function(e,t,i,r,a,n){var o={sum:function(){return parseFloat(t||0)+parseFloat(n[i]||0)},min:function(){return""===t?parseFloat(n[i]||0):Math.min(parseFloat(t),parseFloat(n[i]||0))},max:function(){return""===t?parseFloat(n[i]||0):Math.max(parseFloat(t),parseFloat(n[i]||0))},count:function(){return""===t&&(t=0),n.hasOwnProperty(i)?t+1:0},avg:function(){return o.sum()}};if(!o[e])throw"jqGrid Grouping No such method: "+e;var s=o[e]();if(null!=r)if("fixed"==a)s=s.toFixed(r);else{var l=Math.pow(10,r);s=Math.round(s*l)/l}return s}}})}(jQuery),function(e){/*
 * jqGrid extension for constructing Grid Data from external file
 * Tony Tomov tony@trirand.com
 * http://trirand.com/blog/ 
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl-2.0.html
**/
"use strict";e.jgrid.extend({jqGridImport:function(t){return t=e.extend({imptype:"xml",impstring:"",impurl:"",mtype:"GET",impData:{},xmlGrid:{config:"roots>grid",data:"roots>rows"},jsonGrid:{config:"grid",data:"data"},ajaxOptions:{}},t||{}),this.each(function(){var i=this,r=function(t,r){var a,n,o,s=e(r.xmlGrid.config,t)[0],l=e(r.xmlGrid.data,t)[0];if(xmlJsonClass.xml2json&&e.jgrid.parse){a=xmlJsonClass.xml2json(s," "),a=e.jgrid.parse(a);for(o in a)a.hasOwnProperty(o)&&(n=a[o]);if(l){var d=a.grid.datatype;a.grid.datatype="xmlstring",a.grid.datastr=t,e(i).jqGrid(n).jqGrid("setGridParam",{datatype:d})}else e(i).jqGrid(n);a=null,n=null}else alert("xml2json or parse are not present")},a=function(t,r){if(t&&"string"==typeof t){var a=!1;e.jgrid.useJSON&&(e.jgrid.useJSON=!1,a=!0);var n=e.jgrid.parse(t);a&&(e.jgrid.useJSON=!0);var o=n[r.jsonGrid.config],s=n[r.jsonGrid.data];if(s){var l=o.datatype;o.datatype="jsonstring",o.datastr=s,e(i).jqGrid(o).jqGrid("setGridParam",{datatype:l})}else e(i).jqGrid(o)}};switch(t.imptype){case"xml":e.ajax(e.extend({url:t.impurl,type:t.mtype,data:t.impData,dataType:"xml",complete:function(a,n){"success"==n&&(r(a.responseXML,t),e(i).triggerHandler("jqGridImportComplete",[a,t]),e.isFunction(t.importComplete)&&t.importComplete(a)),a=null}},t.ajaxOptions));break;case"xmlstring":if(t.impstring&&"string"==typeof t.impstring){var n=e.jgrid.stringToDoc(t.impstring);n&&(r(n,t),e(i).triggerHandler("jqGridImportComplete",[n,t]),e.isFunction(t.importComplete)&&t.importComplete(n),t.impstring=null),n=null}break;case"json":e.ajax(e.extend({url:t.impurl,type:t.mtype,data:t.impData,dataType:"json",complete:function(r){try{a(r.responseText,t),e(i).triggerHandler("jqGridImportComplete",[r,t]),e.isFunction(t.importComplete)&&t.importComplete(r)}catch(n){}r=null}},t.ajaxOptions));break;case"jsonstring":t.impstring&&"string"==typeof t.impstring&&(a(t.impstring,t),e(i).triggerHandler("jqGridImportComplete",[t.impstring,t]),e.isFunction(t.importComplete)&&t.importComplete(t.impstring),t.impstring=null)}})},jqGridExport:function(t){t=e.extend({exptype:"xmlstring",root:"grid",ident:"\t"},t||{});var i=null;return this.each(function(){if(this.grid){var r,a=e.extend(!0,{},e(this).jqGrid("getGridParam"));if(a.rownumbers&&(a.colNames.splice(0,1),a.colModel.splice(0,1)),a.multiselect&&(a.colNames.splice(0,1),a.colModel.splice(0,1)),a.subGrid&&(a.colNames.splice(0,1),a.colModel.splice(0,1)),a.knv=null,a.treeGrid)for(r in a.treeReader)a.treeReader.hasOwnProperty(r)&&(a.colNames.splice(a.colNames.length-1),a.colModel.splice(a.colModel.length-1));switch(t.exptype){case"xmlstring":i="<"+t.root+">"+xmlJsonClass.json2xml(a,t.ident)+"</"+t.root+">";break;case"jsonstring":i="{"+xmlJsonClass.toJson(a,t.root,t.ident,!1)+"}",void 0!==a.postData.filters&&(i=i.replace(/filters":"/,'filters":'),i=i.replace(/}]}"/,"}]}"))}}}),i},excelExport:function(t){return t=e.extend({exptype:"remote",url:null,oper:"oper",tag:"excel",exportOptions:{}},t||{}),this.each(function(){if(this.grid){var i;if("remote"==t.exptype){var r=e.extend({},this.p.postData);r[t.oper]=t.tag;var a=jQuery.param(r);i=t.url.indexOf("?")!=-1?t.url+"&"+a:t.url+"?"+a,window.location=i}}})}})}(jQuery),function($){/*
**
 * jqGrid addons using jQuery UI 
 * Author: Mark Williams
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl-2.0.html
 * depends on jQuery UI 
**/
"use strict";if($.jgrid.msie&&8==$.jgrid.msiever()&&($.expr[":"].hidden=function(e){return 0===e.offsetWidth||0===e.offsetHeight||"none"==e.style.display}),$.jgrid._multiselect=!1,$.ui&&$.ui.multiselect){if($.ui.multiselect.prototype._setSelected){var setSelected=$.ui.multiselect.prototype._setSelected;$.ui.multiselect.prototype._setSelected=function(e,t){var i=setSelected.call(this,e,t);if(t&&this.selectedList){var r=this.element;this.selectedList.find("li").each(function(){$(this).data("optionLink")&&$(this).data("optionLink").remove().appendTo(r)})}return i}}$.ui.multiselect.prototype.destroy&&($.ui.multiselect.prototype.destroy=function(){this.element.show(),this.container.remove(),void 0===$.Widget?$.widget.prototype.destroy.apply(this,arguments):$.Widget.prototype.destroy.apply(this,arguments)}),$.jgrid._multiselect=!0}$.jgrid.extend({sortableColumns:function(e){return this.each(function(){function t(){i.p.disableClick=!0}var i=this,r=$.jgrid.jqID(i.p.id),a={tolerance:"pointer",axis:"x",scrollSensitivity:"1",items:">th:not(:has(#jqgh_"+r+"_cb,#jqgh_"+r+"_rn,#jqgh_"+r+"_subgrid),:hidden)",placeholder:{element:function(e){var t=$(document.createElement(e[0].nodeName)).addClass(e[0].className+" ui-sortable-placeholder ui-state-highlight").removeClass("ui-sortable-helper")[0];return t},update:function(e,t){t.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),t.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10))}},update:function(e,t){var r=$(t.item).parent(),a=$(">th",r),n=i.p.colModel,o={},s=i.p.id+"_";$.each(n,function(e){o[this.name]=e});var l=[];a.each(function(){var e=$(">div",this).get(0).id.replace(/^jqgh_/,"").replace(s,"");o.hasOwnProperty(e)&&l.push(o[e])}),$(i).jqGrid("remapColumns",l,!0,!0),$.isFunction(i.p.sortable.update)&&i.p.sortable.update(l),setTimeout(function(){i.p.disableClick=!1},50)}};if(i.p.sortable.options?$.extend(a,i.p.sortable.options):$.isFunction(i.p.sortable)&&(i.p.sortable={update:i.p.sortable}),a.start){var n=a.start;a.start=function(e,i){t(),n.call(this,e,i)}}else a.start=t;i.p.sortable.exclude&&(a.items+=":not("+i.p.sortable.exclude+")"),e.sortable(a).data("sortable").floating=!0})},columnChooser:function(e){function t(e,t,i){if(t>=0){var r=e.slice(),a=r.splice(t,Math.max(e.length-t,t));return t>e.length&&(t=e.length),r[t]=i,r.concat(a)}}function i(e,t){e&&("string"==typeof e?$.fn[e]&&$.fn[e].apply(t,$.makeArray(arguments).slice(2)):$.isFunction(e)&&e.apply(t,$.makeArray(arguments).slice(2)))}var r=this;if(!$("#colchooser_"+$.jgrid.jqID(r[0].p.id)).length){var a=$('<div id="colchooser_'+r[0].p.id+'" style="position:relative;overflow:hidden"><div><select multiple="multiple"></select></div></div>'),n=$("select",a);if(e=$.extend({width:420,height:240,classname:null,done:function(e){e&&r.jqGrid("remapColumns",e,!0)},msel:"multiselect",dlog:"dialog",dialog_opts:{minWidth:470},dlog_opts:function(e){var t={};return t[e.bSubmit]=function(){e.apply_perm(),e.cleanup(!1)},t[e.bCancel]=function(){e.cleanup(!0)},$.extend(!0,{buttons:t,close:function(){e.cleanup(!0)},modal:e.modal||!1,resizable:e.resizable||!0,width:e.width+20},e.dialog_opts||{})},apply_perm:function(){$("option",n).each(function(){this.selected?r.jqGrid("showCol",o[this.value].name):r.jqGrid("hideCol",o[this.value].name)});var i=[];$("option:selected",n).each(function(){i.push(parseInt(this.value,10))}),$.each(i,function(){delete l[o[parseInt(this,10)].name]}),$.each(l,function(){var e=parseInt(this,10);i=t(i,e,e)}),e.done&&e.done.call(r,i)},cleanup:function(t){i(e.dlog,a,"destroy"),i(e.msel,n,"destroy"),a.remove(),t&&e.done&&e.done.call(r)},msel_opts:{}},$.jgrid.col,e||{}),$.ui&&$.ui.multiselect&&"multiselect"==e.msel){if(!$.jgrid._multiselect)return void alert("Multiselect plugin loaded after jqGrid. Please load the plugin before the jqGrid!");e.msel_opts=$.extend($.ui.multiselect.defaults,e.msel_opts)}e.caption&&a.attr("title",e.caption),e.classname&&(a.addClass(e.classname),n.addClass(e.classname)),e.width&&($(">div",a).css({width:e.width,margin:"0 auto"}),n.css("width",e.width)),e.height&&($(">div",a).css("height",e.height),n.css("height",e.height-10));var o=r.jqGrid("getGridParam","colModel"),s=r.jqGrid("getGridParam","colNames"),l={},d=[];n.empty(),$.each(o,function(e){return l[this.name]=e,this.hidedlg?void(this.hidden||d.push(e)):void n.append("<option value='"+e+"' "+(this.hidden?"":"selected='selected'")+">"+$.jgrid.stripHtml(s[e])+"</option>")});var u=$.isFunction(e.dlog_opts)?e.dlog_opts.call(r,e):e.dlog_opts;i(e.dlog,a,u);var c=$.isFunction(e.msel_opts)?e.msel_opts.call(r,e):e.msel_opts;i(e.msel,n,c)}},sortableRows:function(e){return this.each(function(){var t=this;t.grid&&(t.p.treeGrid||$.fn.sortable&&(e=$.extend({cursor:"move",axis:"y",items:".jqgrow"},e||{}),e.start&&$.isFunction(e.start)?(e._start_=e.start,delete e.start):e._start_=!1,e.update&&$.isFunction(e.update)?(e._update_=e.update,delete e.update):e._update_=!1,e.start=function(i,r){if($(r.item).css("border-width","0px"),$("td",r.item).each(function(e){this.style.width=t.grid.cols[e].style.width}),t.p.subGrid){var a=$(r.item).attr("id");try{$(t).jqGrid("collapseSubGridRow",a)}catch(n){}}e._start_&&e._start_.apply(this,[i,r])},e.update=function(i,r){$(r.item).css("border-width",""),t.p.rownumbers===!0&&$("td.jqgrid-rownum",t.rows).each(function(e){$(this).html(e+1+(parseInt(t.p.page,10)-1)*parseInt(t.p.rowNum,10))}),e._update_&&e._update_.apply(this,[i,r])},$("tbody:first",t).sortable(e),$("tbody:first",t).disableSelection()))})},gridDnD:function(e){return this.each(function(){function t(){var e=$.data(a,"dnd");$("tr.jqgrow:not(.ui-draggable)",a).draggable($.isFunction(e.drag)?e.drag.call($(a),e):e.drag)}var i,r,a=this;if(a.grid&&!a.p.treeGrid&&$.fn.draggable&&$.fn.droppable){var n="<table id='jqgrid_dnd' class='ui-jqgrid-dnd'></table>";if(void 0===$("#jqgrid_dnd")[0]&&$("body").append(n),"string"==typeof e&&"updateDnD"==e&&a.p.jqgdnd===!0)return void t();if(e=$.extend({drag:function(e){return $.extend({start:function(t,i){var r,n;if(a.p.subGrid){n=$(i.helper).attr("id");try{$(a).jqGrid("collapseSubGridRow",n)}catch(o){}}for(r=0;r<$.data(a,"dnd").connectWith.length;r++)"0"==$($.data(a,"dnd").connectWith[r]).jqGrid("getGridParam","reccount")&&$($.data(a,"dnd").connectWith[r]).jqGrid("addRowData","jqg_empty_row",{});i.helper.addClass("ui-state-highlight"),$("td",i.helper).each(function(e){this.style.width=a.grid.headers[e].width+"px"}),e.onstart&&$.isFunction(e.onstart)&&e.onstart.call($(a),t,i)},stop:function(t,i){var r,n;for(i.helper.dropped&&!e.dragcopy&&(n=$(i.helper).attr("id"),void 0===n&&(n=$(this).attr("id")),$(a).jqGrid("delRowData",n)),r=0;r<$.data(a,"dnd").connectWith.length;r++)$($.data(a,"dnd").connectWith[r]).jqGrid("delRowData","jqg_empty_row");e.onstop&&$.isFunction(e.onstop)&&e.onstop.call($(a),t,i)}},e.drag_opts||{})},drop:function(e){return $.extend({accept:function(e){if(!$(e).hasClass("jqgrow"))return e;var t=$(e).closest("table.ui-jqgrid-btable");if(t.length>0&&void 0!==$.data(t[0],"dnd")){var i=$.data(t[0],"dnd").connectWith;return $.inArray("#"+$.jgrid.jqID(this.id),i)!=-1}return!1},drop:function(t,i){if($(i.draggable).hasClass("jqgrow")){var r=$(i.draggable).attr("id"),n=i.draggable.parent().parent().jqGrid("getRowData",r);if(!e.dropbyname){var o,s,l=0,d={},u=$("#"+$.jgrid.jqID(this.id)).jqGrid("getGridParam","colModel");try{for(s in n)n.hasOwnProperty(s)&&(o=u[l].name,"cb"!=o&&"rn"!=o&&"subgrid"!=o&&n.hasOwnProperty(s)&&u[l]&&(d[o]=n[s]),l++);n=d}catch(c){}}if(i.helper.dropped=!0,e.beforedrop&&$.isFunction(e.beforedrop)){var p=e.beforedrop.call(this,t,i,n,$("#"+$.jgrid.jqID(a.p.id)),$(this));void 0!==p&&null!==p&&"object"==typeof p&&(n=p)}if(i.helper.dropped){var h;e.autoid&&($.isFunction(e.autoid)?h=e.autoid.call(this,n):(h=Math.ceil(1e3*Math.random()),h=e.autoidprefix+h)),$("#"+$.jgrid.jqID(this.id)).jqGrid("addRowData",h,n,e.droppos)}e.ondrop&&$.isFunction(e.ondrop)&&e.ondrop.call(this,t,i,n)}}},e.drop_opts||{})},onstart:null,onstop:null,beforedrop:null,ondrop:null,drop_opts:{activeClass:"ui-state-active",hoverClass:"ui-state-hover"},drag_opts:{revert:"invalid",helper:"clone",cursor:"move",appendTo:"#jqgrid_dnd",zIndex:5e3},dragcopy:!1,dropbyname:!1,droppos:"first",autoid:!0,autoidprefix:"dnd_"},e||{}),e.connectWith)for(e.connectWith=e.connectWith.split(","),e.connectWith=$.map(e.connectWith,function(e){return $.trim(e)}),$.data(a,"dnd",e),"0"==a.p.reccount||a.p.jqgdnd||t(),a.p.jqgdnd=!0,i=0;i<e.connectWith.length;i++)r=e.connectWith[i],$(r).droppable($.isFunction(e.drop)?e.drop.call($(a),e):e.drop)}})},gridResize:function(opts){return this.each(function(){var $t=this,gID=$.jgrid.jqID($t.p.id);if($t.grid&&$.fn.resizable){if(opts=$.extend({},opts||{}),opts.alsoResize?(opts._alsoResize_=opts.alsoResize,delete opts.alsoResize):opts._alsoResize_=!1,opts.stop&&$.isFunction(opts.stop)?(opts._stop_=opts.stop,delete opts.stop):opts._stop_=!1,opts.stop=function(e,t){$($t).jqGrid("setGridParam",{height:$("#gview_"+gID+" .ui-jqgrid-bdiv").height()}),$($t).jqGrid("setGridWidth",t.size.width,opts.shrinkToFit),opts._stop_&&opts._stop_.call($t,e,t)},opts._alsoResize_){var optstest="{'#gview_"+gID+" .ui-jqgrid-bdiv':true,'"+opts._alsoResize_+"':true}";opts.alsoResize=eval("("+optstest+")")}else opts.alsoResize=$(".ui-jqgrid-bdiv","#gview_"+gID);delete opts._alsoResize_,$("#gbox_"+gID).resizable(opts)}})}})}(jQuery);/*!
 * Copyright 2013 E.J.I.E., S.A.
 *
 * Licencia con arreglo a la EUPL, Versión 1.1 exclusivamente (la «Licencia»);
 * Solo podrá usarse esta obra si se respeta la Licencia.
 * Puede obtenerse una copia de la Licencia en
 *
 *      http://ec.europa.eu/idabc/eupl.html
 *
 * Salvo cuando lo exija la legislación aplicable o se acuerde por escrito,
 * el programa distribuido con arreglo a la Licencia se distribuye «TAL CUAL»,
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ni expresas ni implícitas.
 * Véase la Licencia en el idioma concreto que rige los permisos y limitaciones
 * que establece la Licencia.
 */
var rp_ge={};/*!
 * Copyright 2013 E.J.I.E., S.A.
 *
 * Licencia con arreglo a la EUPL, Versión 1.1 exclusivamente (la «Licencia»);
 * Solo podrá usarse esta obra si se respeta la Licencia.
 * Puede obtenerse una copia de la Licencia en
 *
 *      http://ec.europa.eu/idabc/eupl.html
 *
 * Salvo cuando lo exija la legislación aplicable o se acuerde por escrito, 
 * el programa distribuido con arreglo a la Licencia se distribuye «TAL CUAL»,
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ni expresas ni implícitas.
 * Véase la Licencia en el idioma concreto que rige los permisos y limitaciones
 * que establece la Licencia.
 */
!function(e){jQuery.jgrid.fluid={fluidWidth:function(t){var i=e(this),r=e.extend({fluidBaseLayer:"#gbox_"+i.attr("id"),fluidOffset:0,minWidth:null,maxWidth:null},t||{}),a=function(t,a){var n=t.width(),o=e(t).data("previousWidth"),s=n;a!==!0&&n==o||(e(t).data("previousWidth",n),s=null!==r.minWidth&&n<r.minWidth?r.minWidth:s,s=null!==r.maxWidth&&n>r.maxWidth?r.maxWidth:s,i.trigger("fluidWidth.resize",[o,s-r.fluidOffset]))};e(r.fluidBaseLayer).data("fluidWidth")!==!0&&(e(r.fluidBaseLayer).data("fluidWidth",!0),setInterval(function(){a(e(r.fluidBaseLayer),!1)},100)),a(e(r.fluidBaseLayer),!0)}}}(jQuery),jQuery.fn.extend({fluidWidth:jQuery.jgrid.fluid.fluidWidth}),/**
 * Copyright (c) 2010 Maxim Vasiliev
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * @author Maxim Vasiliev
 * Date: 09.09.2010
 * Time: 19:02:33
 */
function(){function e(i){for(var r,a=[],n=i.firstChild;n;){if(n.nodeName.match(/INPUT|SELECT|TEXTAREA|HIDDEN/i)||jQuery(n).is("[ruptype='tree']")){var o=t(n);if(jQuery(n).is("select")&&n.multiple||jQuery(n).is("[ruptype='tree']")){var s=jQuery(n).attr("name").split(".");r=s.length>1?s.slice(0,s.length-1).join("."):s[0]}else r=jQuery(n).attr("name");null!==o&&a.push({name:r,value:o})}else{var l=e(n);a=a.concat(l)}n=n.nextSibling}return a}function t(e){var t=jQuery(e).attr("ruptype");if(t)return jQuery(e)["rup_"+t]("getRupValue");switch(e.nodeName){case"HIDDEN":case"INPUT":case"TEXTAREA":switch(e.type.toLowerCase()){case"radio":case"checkbox":if(e.checked)return e.value;break;case"button":case"reset":case"submit":case"image":return"";default:return e.value}break;case"SELECT":return i(e)}return null}function i(e){var t=e.multiple;if(!t)return e.value;for(var i=[],r=e.getElementsByTagName("option"),a=0,n=r.length;a<n;a++){var o=e.name.split(".");if(o[o.length-1],r[a].selected){var s={};s[o[o.length-1]]=r[a].value,i.push(s)}}return i}window.form2object=function(t,i,r){"undefined"!=typeof r&&null!=r||(r=!0),"undefined"!=typeof i&&null!=i||(i="."),t="string"==typeof t?document.getElementById(t):t;for(var a=e(t),n={},o={},s=0;s<a.length;s++){var l=a[s].value;if(!r||""!==l){var d=a[s].name;if(d)for(var u=d.split(i),c=n,p=0;p<u.length;p++){var h,f=u[p];if(f.indexOf("[]")>-1&&p==u.length-1)h=f.substr(0,f.indexOf("[")),c[h]||(c[h]=[]),c[h].push(l);else if(f.indexOf("[")>-1){h=f.substr(0,f.indexOf("["));var g=f.replace(/^[a-z]+\[|\]$/gi,"");o[h]||(o[h]={}),c[h]||(c[h]=[]),p==u.length-1?c[h].push(l):o[h][g]||(c[h].push({}),o[h][g]=c[h][c[h].length-1]),c=o[h][g]}else p<u.length-1?(c[f]||(c[f]={}),c=c[f]):c[f]=l}}}return n},window.form2json=window.form2object}(),function(e){function t(t,r){var n=t==window,u=r&&void 0!==r.message?r.message:void 0;r=e.extend({},e.blockUI.defaults,r||{}),r.overlayCSS=e.extend({},e.blockUI.defaults.overlayCSS,r.overlayCSS||{});var g=e.extend({},e.blockUI.defaults.css,r.css||{}),m=e.extend({},e.blockUI.defaults.themedCSS,r.themedCSS||{});if(u=void 0===u?r.message:u,n&&h&&i(window,{fadeOut:0}),u&&"string"!=typeof u&&(u.parentNode||u.jquery)){var v=u.jquery?u[0]:u,b={};e(t).data("blockUI.history",b),b.el=v,b.parent=v.parentNode,b.display=v.style.display,b.position=v.style.position,b.parent&&b.parent.removeChild(v)}var _,y,x=r.baseZ,w=e(e.browser.msie||r.forceIframe?'<iframe class="blockUI" style="z-index:'+x++ +';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+r.iframeSrc+'"></iframe>':'<div class="blockUI" style="display:none"></div>'),j=e('<div class="blockUI blockOverlay" style="z-index:'+x++ +';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>');y=r.theme&&n?'<div class="blockUI '+r.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+x+';display:none;position:fixed"><div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(r.title||"&nbsp;")+'</div><div class="ui-widget-content ui-dialog-content"></div></div>':r.theme?'<div class="blockUI '+r.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+x+';display:none;position:absolute"><div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(r.title||"&nbsp;")+'</div><div class="ui-widget-content ui-dialog-content"></div></div>':n?'<div class="blockUI '+r.blockMsgClass+' blockPage" style="z-index:'+x+';display:none;position:fixed"></div>':'<div class="blockUI '+r.blockMsgClass+' blockElement" style="z-index:'+x+';display:none;position:absolute"></div>',_=e(y),u&&(r.theme?(_.css(m),_.addClass("ui-widget-content")):_.css(g)),r.applyPlatformOpacityRules&&e.browser.mozilla&&/Linux/.test(navigator.platform)||j.css(r.overlayCSS),j.css("position",n?"fixed":"absolute"),(e.browser.msie||r.forceIframe)&&w.css("opacity",0);var k=[w,j,_],C=e(n?"body":t);e.each(k,function(){this.appendTo(C)}),r.theme&&r.draggable&&e.fn.draggable&&_.draggable({handle:".ui-dialog-titlebar",cancel:"li"});var D=c&&(!e.boxModel||e("object,embed",n?null:t).length>0);if(p||D){if(n&&r.allowBodyStretch&&e.boxModel&&e("html,body").css("height","100%"),(p||!e.boxModel)&&!n)var S=l(t,"borderTopWidth"),T=l(t,"borderLeftWidth"),P=S?"(0 - "+S+")":0,I=T?"(0 - "+T+")":0;e.each([w,j,_],function(e,t){var i=t[0].style;if(i.position="absolute",e<2)n?i.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.boxModel?0:"+r.quirksmodeOffsetHack+') + "px"'):i.setExpression("height",'this.parentNode.offsetHeight + "px"'),n?i.setExpression("width",'jQuery.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):i.setExpression("width",'this.parentNode.offsetWidth + "px"'),I&&i.setExpression("left",I),P&&i.setExpression("top",P);else if(r.centerY)n&&i.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"'),i.marginTop=0;else if(!r.centerY&&n){var a=r.css&&r.css.top?parseInt(r.css.top):0,o="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+a+') + "px"';i.setExpression("top",o)}})}if(u&&(r.theme?_.find(".ui-widget-content").append(u):_.append(u),(u.jquery||u.nodeType)&&e(u).show()),(e.browser.msie||r.forceIframe)&&r.showOverlay&&w.show(),r.fadeIn){var $=r.onBlock?r.onBlock:d,F=r.showOverlay&&!u?$:d,M=u?$:d;r.showOverlay&&j._fadeIn(r.fadeIn,F),u&&_._fadeIn(r.fadeIn,M)}else r.showOverlay&&j.show(),u&&_.show(),r.onBlock&&r.onBlock();if(a(1,t,r),n?(h=_[0],f=e(":input:enabled:visible",h),r.focusInput&&setTimeout(o,20)):s(_[0],r.centerX,r.centerY),r.timeout){var A=setTimeout(function(){n?e.unblockUI(r):e(t).unblock(r)},r.timeout);e(t).data("blockUI.timeout",A)}}function i(t,i){var n=t==window,o=e(t),s=o.data("blockUI.history"),l=o.data("blockUI.timeout");l&&(clearTimeout(l),o.removeData("blockUI.timeout")),i=e.extend({},e.blockUI.defaults,i||{}),a(0,t,i);var d;d=n?e("body").children().filter(".blockUI").add("body > .blockUI"):e(".blockUI",t),n&&(h=f=null),i.fadeOut?(d.fadeOut(i.fadeOut),setTimeout(function(){r(d,s,i,t)},i.fadeOut)):r(d,s,i,t)}function r(t,i,r,a){t.each(function(e,t){this.parentNode&&this.parentNode.removeChild(this)}),i&&i.el&&(i.el.style.display=i.display,i.el.style.position=i.position,i.parent&&i.parent.appendChild(i.el),e(a).removeData("blockUI.history")),"function"==typeof r.onUnblock&&r.onUnblock(a,r)}function a(t,i,r){var a=i==window,o=e(i);if((t||(!a||h)&&(a||o.data("blockUI.isBlocked")))&&(a||o.data("blockUI.isBlocked",t),r.bindEvents&&(!t||r.showOverlay))){var s="mousedown mouseup keydown keypress";t?e(document).bind(s,r,n):e(document).unbind(s,n)}}function n(t){if(t.keyCode&&9==t.keyCode&&h&&t.data.constrainTabKey){var i=f,r=!t.shiftKey&&t.target===i[i.length-1],a=t.shiftKey&&t.target===i[0];if(r||a)return setTimeout(function(){o(a)},10),!1}var n=t.data;return e(t.target).parents("div."+n.blockMsgClass).length>0||0==e(t.target).parents().children().filter("div.blockUI").length}function o(e){if(f){var t=f[e===!0?f.length-1:0];t&&t.focus()}}function s(e,t,i){var r=e.parentNode,a=e.style,n=(r.offsetWidth-e.offsetWidth)/2-l(r,"borderLeftWidth"),o=(r.offsetHeight-e.offsetHeight)/2-l(r,"borderTopWidth");t&&(a.left=n>0?n+"px":"0"),i&&(a.top=o>0?o+"px":"0")}function l(t,i){return parseInt(e.css(t,i))||0}if(/1\.(0|1|2)\.(0|1|2)/.test(e.fn.jquery)||/^1.1/.test(e.fn.jquery))return void alert("blockUI requires jQuery v1.2.3 or later!  You are using v"+e.fn.jquery);e.fn._fadeIn=e.fn.fadeIn;var d=function(){},u=document.documentMode||0,c=e.browser.msie&&(e.browser.version<8&&!u||u<8),p=e.browser.msie&&/MSIE 6.0/.test(navigator.userAgent)&&!u;e.blockUI=function(e){t(window,e)},e.unblockUI=function(e){i(window,e)},e.growlUI=function(t,i,r,a){var n=e('<div class="growlUI"></div>');t&&n.append("<h1>"+t+"</h1>"),i&&n.append("<h2>"+i+"</h2>"),void 0==r&&(r=3e3),e.blockUI({message:n,fadeIn:700,fadeOut:1e3,centerY:!1,timeout:r,showOverlay:!1,onUnblock:a,css:e.blockUI.defaults.growlCSS})},e.fn.block=function(i){return this.unblock({fadeOut:0}).each(function(){"static"==e.css(this,"position")&&(this.style.position="relative"),e.browser.msie&&(this.style.zoom=1),t(this,i)})},e.fn.unblock=function(e){return this.each(function(){i(this,e)})},e.blockUI.version=2.35,e.blockUI.defaults={message:"<h1>Please wait...</h1>",title:null,draggable:!0,theme:!1,css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"3px solid #aaa",backgroundColor:"#fff",cursor:"wait"},themedCSS:{width:"30%",top:"40%",left:"35%"},overlayCSS:{backgroundColor:"#000",opacity:.6,cursor:"wait"},growlCSS:{width:"350px",top:"10px",left:"",right:"10px",border:"none",padding:"5px",opacity:.6,cursor:"default",color:"#fff",backgroundColor:"#000","-webkit-border-radius":"10px","-moz-border-radius":"10px","border-radius":"10px"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:!1,baseZ:1e3,centerX:!0,centerY:!0,allowBodyStretch:!0,bindEvents:!0,constrainTabKey:!0,fadeIn:200,fadeOut:400,timeout:0,showOverlay:!0,focusInput:!0,applyPlatformOpacityRules:!0,onBlock:null,onUnblock:null,quirksmodeOffsetHack:4,blockMsgClass:"blockMsg"};var h=null,f=[]}(jQuery);/*
* jQuery File Download Plugin v1.3.3
*
* http://www.johnculviner.com
*
* Copyright (c) 2012 - John Culviner
*
* Licensed under the MIT license:
* http://www.opensource.org/licenses/mit-license.php
*/
var $=jQuery.noConflict();$.extend({fileDownload:function(e,t){function i(){if(document.cookie.indexOf(s.cookieName+"="+s.cookieValue)!=-1){f.onSuccess(e);var t=new Date(1e3);return document.cookie=s.cookieName+"=; expires="+t.toUTCString()+"; path="+s.cookiePath,void a(!1)}if(m||g)try{var n;if(n=m?m.document:r(g),n&&null!=n.body&&n.body.innerHTML.length>0){var o=!0;if(b&&b.length>0){var l=$(n.body).contents().first();l.length>0&&l[0]===b[0]&&(o=!1)}if(o)return f.onFail(n.body.innerHTML,e),void a(!0)}}catch(d){return f.onFail("",e),void a(!0)}setTimeout(i,s.checkInterval)}function r(e){var t=e[0].contentWindow||e[0].contentDocument;return t.document&&(t=t.document),t}function a(e){setTimeout(function(){m&&(u&&m.close(),d&&(e?(m.focus(),m.close()):m.focus()))},0)}function n(e){return e.replace(/&/gm,"&amp;").replace(/\n/gm,"&#10;").replace(/\r/gm,"&#13;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;").replace(/'/gm,"&apos;")}var o=function(e,t){alert("A file download error has occurred, please try again.")},s=$.extend({preparingMessageHtml:null,failMessageHtml:null,androidPostUnsupportedMessageHtml:"Unfortunately your Android browser doesn't support this type of file download. Please try again with a different browser.",dialogOptions:{modal:!0},successCallback:function(e){},failCallback:o,httpMethod:"GET",data:null,checkInterval:100,cookieName:"fileDownload",cookieValue:"true",cookiePath:"/",popupWindowTitle:"Initiating file download...",encodeHTMLEntities:!0},t),l=(navigator.userAgent||navigator.vendor||window.opera).toLowerCase(),d=!1,u=!1,c=!1;/ip(ad|hone|od)/.test(l)?d=!0:l.indexOf("android")!=-1?u=!0:c=/avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|playbook|silk|iemobile|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(l)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(l.substr(0,4));var p=s.httpMethod.toUpperCase();if(u&&"GET"!=p)return void($().dialog?$("<div>").html(s.androidPostUnsupportedMessageHtml).dialog(s.dialogOptions):alert(s.androidPostUnsupportedMessageHtml));var h=null;s.preparingMessageHtml&&(h=$("<div>").html(s.preparingMessageHtml).dialog(s.dialogOptions));var f={onSuccess:function(e){h&&h.dialog("close"),s.successCallback(e)},onFail:function(e,t){h&&h.dialog("close"),s.failMessageHtml?($("<div>").html(s.failMessageHtml).dialog(s.dialogOptions),s.failCallback!=o&&s.failCallback(e,t)):s.failCallback(e,t)}};null!==s.data&&"string"!=typeof s.data&&(s.data=$.param(s.data));var g,m,v,b;if("GET"===p){if(null!==s.data){var _=e.indexOf("?");_!=-1?"&"!==e.substring(e.length-1)&&(e+="&"):e+="?",e+=s.data}d||u?(m=window.open(e),m.document.title=s.popupWindowTitle,window.focus()):c?window.location(e):g=$("<iframe>").hide().attr("src",e).appendTo("body")}else{var y="";null!==s.data&&$.each(s.data.replace(/\+/g," ").split("&"),function(){var e=this.split("="),t=s.encodeHTMLEntities?n(decodeURIComponent(e[0])):decodeURIComponent(e[0]);if(t){var i=e[1]||"";i=s.encodeHTMLEntities?n(decodeURIComponent(e[1])):decodeURIComponent(e[1]),y+='<input type="hidden" name="'+t+'" value="'+i+'" />'}}),c?(b=$("<form>").appendTo("body"),b.hide().attr("method",s.httpMethod).attr("action",e).html(y)):(d?(m=window.open("about:blank"),m.document.title=s.popupWindowTitle,v=m.document,window.focus()):(g=$("<iframe style='display: none' src='about:blank'></iframe>").appendTo("body"),v=r(g)),v.write("<html><head></head><body><form method='"+s.httpMethod+"' action='"+e+"'>"+y+"</form>"+s.popupWindowTitle+"</body></html>"),b=$(v).find("form")),b.submit()}setTimeout(i,s.checkInterval)}}),/*
 * jQuery File Upload Plugin 5.5.1
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2010, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://creativecommons.org/licenses/MIT/
 */
function(e){"use strict";e.widget("blueimp.fileupload",{options:{namespace:void 0,dropZone:e(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,formData:function(e){return e.serializeArray()},add:function(e,t){t.submit()},processData:!1,contentType:!1,cache:!1},_refreshOptionsList:["namespace","dropZone","fileInput"],_isXHRUpload:function(e){var t="undefined";return!(e.forceIframeTransport||typeof XMLHttpRequestUpload===t||typeof File===t||e.multipart&&typeof FormData===t)},_getFormData:function(t){var i;return"function"==typeof t.formData?t.formData(t.form):e.isArray(t.formData)?t.formData:t.formData?(i=[],e.each(t.formData,function(e,t){i.push({name:e,value:t})}),i):[]},_getTotal:function(t){var i=0;return e.each(t,function(e,t){i+=t.size||1}),i},_onProgress:function(e,t){if(void 0!==e.originalEvent&&e.originalEvent.lengthComputable){var i=t.total||this._getTotal(t.files),r=parseInt(e.originalEvent.loaded/e.originalEvent.total*(t.chunkSize||i),10)+(t.uploadedBytes||0);this._loaded+=r-(t.loaded||t.uploadedBytes||0),t.lengthComputable=!0,t.loaded=r,t.total=i,this._trigger("progress",e,t),this._trigger("progressall",e,{lengthComputable:!0,loaded:this._loaded,total:this._total})}},_initProgressListener:function(t){var i=this,r=t.xhr?t.xhr():e.ajaxSettings.xhr();r.upload&&(e(r.upload).bind("progress",function(e){i._onProgress(e,t)}),t.xhr=function(){return r})},_initXHRData:function(t){var i,r=t.files[0];t.multipart&&!t.blob||(t.headers=e.extend(t.headers,{"X-File-Name":r.name,"X-File-Type":r.type,"X-File-Size":r.size}),t.blob?t.multipart||(t.contentType="application/octet-stream",t.data=t.blob):(t.contentType=r.type,t.data=r)),t.multipart&&"undefined"!=typeof FormData&&(t.postMessage?(i=this._getFormData(t),t.blob?i.push({name:t.paramName,value:t.blob}):e.each(t.files,function(e,r){i.push({name:t.paramName,value:r})})):(t.formData instanceof FormData?i=t.formData:(i=new FormData,e.each(this._getFormData(t),function(e,t){i.append(t.name,t.value)})),t.blob?i.append(t.paramName,t.blob):e.each(t.files,function(e,r){r instanceof Blob&&i.append(t.paramName,r)})),t.data=i),t.blob=null},_initIframeSettings:function(e){e.dataType="iframe "+(e.dataType||""),e.formData=this._getFormData(e)},_initDataSettings:function(e){this._isXHRUpload(e)?(this._chunkedUpload(e,!0)||(e.data||this._initXHRData(e),this._initProgressListener(e)),e.postMessage&&(e.dataType="postmessage "+(e.dataType||""))):this._initIframeSettings(e,"iframe")},_initFormSettings:function(t){t.form&&t.form.length||(t.form=e(t.fileInput.prop("form"))),t.paramName||(t.paramName=t.fileInput.prop("name")||"files[]"),t.url||(t.url=t.form.prop("action")||location.href),t.type=(t.type||t.form.prop("method")||"").toUpperCase(),"POST"!==t.type&&"PUT"!==t.type&&(t.type="POST")},_getAJAXSettings:function(t){var i=e.extend({},this.options,t);return this._initFormSettings(i),this._initDataSettings(i),i},_enhancePromise:function(e){return e.success=e.done,e.error=e.fail,e.complete=e.always,e},_getXHRPromise:function(t,i,r){var a=e.Deferred(),n=a.promise();return i=i||this.options.context||n,t===!0?a.resolveWith(i,r):t===!1&&a.rejectWith(i,r),n.abort=a.promise,this._enhancePromise(n)},_chunkedUpload:function(t,i){var r,a,n,o,s=this,l=t.files[0],d=l.size,u=t.uploadedBytes=t.uploadedBytes||0,c=t.maxChunkSize||d,p=l.webkitSlice||l.mozSlice||l.slice;return!(!(this._isXHRUpload(t)&&p&&(u||c<d))||t.data)&&(!!i||(u>=d?(l.error="uploadedBytes",this._getXHRPromise(!1)):(a=Math.ceil((d-u)/c),r=function(i){return i?r(i-=1).pipe(function(){var r=e.extend({},t);return r.blob=p.call(l,u+i*c,u+(i+1)*c),r.chunkSize=r.blob.size,s._initXHRData(r),s._initProgressListener(r),n=(e.ajax(r)||s._getXHRPromise(!1,r.context)).done(function(){r.loaded||s._onProgress(e.Event("progress",{lengthComputable:!0,loaded:r.chunkSize,total:r.chunkSize}),r),t.uploadedBytes=r.uploadedBytes+=r.chunkSize})}):s._getXHRPromise(!0)},o=r(a),o.abort=function(){return n.abort()},this._enhancePromise(o))))},_beforeSend:function(e,t){0===this._active&&this._trigger("start"),this._active+=1,this._loaded+=t.uploadedBytes||0,this._total+=this._getTotal(t.files)},_onDone:function(t,i,r,a){this._isXHRUpload(a)||this._onProgress(e.Event("progress",{lengthComputable:!0,loaded:1,total:1}),a),a.result=t,a.textStatus=i,a.jqXHR=r,this._trigger("done",null,a)},_onFail:function(e,t,i,r){r.jqXHR=e,r.textStatus=t,r.errorThrown=i,this._trigger("fail",null,r),r.recalculateProgress&&(this._loaded-=r.loaded||r.uploadedBytes||0,this._total-=r.total||this._getTotal(r.files))},_onAlways:function(e,t,i,r){this._active-=1,r.textStatus=t,i&&i.always?(r.jqXHR=i,r.result=e):(r.jqXHR=e,r.errorThrown=i),this._trigger("always",null,r),0===this._active&&(this._trigger("stop"),this._loaded=this._total=0)},_onSend:function(t,i){var r,a,n,o=this,s=o._getAJAXSettings(i),l=function(i,a){return o._sending+=1,r=r||(i!==!1&&o._trigger("send",t,s)!==!1&&(o._chunkedUpload(s)||e.ajax(s))||o._getXHRPromise(!1,s.context,a)).done(function(e,t,i){o._onDone(e,t,i,s)}).fail(function(e,t,i){o._onFail(e,t,i,s)}).always(function(e,t,i){if(o._sending-=1,o._onAlways(e,t,i,s),s.limitConcurrentUploads&&s.limitConcurrentUploads>o._sending)for(var r=o._slots.shift();r;){if(!r.isRejected()){r.resolve();break}r=o._slots.shift()}})};return this._beforeSend(t,s),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(a=e.Deferred(),this._slots.push(a),n=a.pipe(l)):n=this._sequence=this._sequence.pipe(l,l),n.abort=function(){var e=[void 0,"abort","abort"];return r?r.abort():(a&&a.rejectWith(e),l(!1,e))},this._enhancePromise(n)):l()},_onAdd:function(t,i){var r,a,n=this,o=!0,s=e.extend({},this.options,i),l=s.limitMultiFileUploads;if((s.singleFileUploads||l)&&this._isXHRUpload(s)){if(!s.singleFileUploads&&l)for(r=[],a=0;a<i.files.length;a+=l)r.push(i.files.slice(a,a+l))}else r=[i.files];return i.originalFiles=i.files,e.each(r||i.files,function(a,s){var l=r?s:[s],d=e.extend({},i,{files:l});return d.submit=function(){return n._trigger("submit",t,d)!==!1&&n._onSend(t,d)},o=n._trigger("add",t,d)}),o},_normalizeFile:function(e,t){void 0===t.name&&void 0===t.size&&(t.name=t.fileName,t.size=t.fileSize)},_replaceFileInput:function(t){var i=t.clone(!0);e("<form></form>").append(i)[0].reset(),t.after(i).detach(),e.cleanData(t.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(e,r){return r===t[0]?i[0]:r}),t[0]===this.element[0]&&(this.element=i)},_onChange:function(t){var i=t.data.fileupload,r={files:e.each(e.makeArray(t.target.files),i._normalizeFile),fileInput:e(t.target),form:e(t.target.form)};if(r.files.length||(r.files=[{name:t.target.value.replace(/^.*\\/,"")}]),i.options.replaceFileInput&&i._replaceFileInput(r.fileInput),i._trigger("change",t,r)===!1||i._onAdd(t,r)===!1)return!1},_onPaste:function(t){var i=t.data.fileupload,r=t.originalEvent.clipboardData,a=r&&r.items||[],n={files:[]};if(e.each(a,function(e,t){var i=t.getAsFile&&t.getAsFile();i&&n.files.push(i)}),i._trigger("paste",t,n)===!1||i._onAdd(t,n)===!1)return!1},_onDrop:function(t){var i=t.data.fileupload,r=t.dataTransfer=t.originalEvent.dataTransfer,a={files:e.each(e.makeArray(r&&r.files),i._normalizeFile)};return i._trigger("drop",t,a)!==!1&&i._onAdd(t,a)!==!1&&void t.preventDefault()},_onDragOver:function(e){var t=e.data.fileupload,i=e.dataTransfer=e.originalEvent.dataTransfer;return t._trigger("dragover",e)!==!1&&(i&&(i.dropEffect=i.effectAllowed="copy"),void e.preventDefault())},_initEventHandlers:function(){var e=this.options.namespace||this.widgetName;this.options.dropZone.bind("dragover."+e,{fileupload:this},this._onDragOver).bind("drop."+e,{fileupload:this},this._onDrop).bind("paste."+e,{fileupload:this},this._onPaste),this.options.fileInput.bind("change."+e,{fileupload:this},this._onChange)},_destroyEventHandlers:function(){var e=this.options.namespace||this.widgetName;this.options.dropZone.unbind("dragover."+e,this._onDragOver).unbind("drop."+e,this._onDrop).unbind("paste."+e,this._onPaste),this.options.fileInput.unbind("change."+e,this._onChange)},_beforeSetOption:function(e,t){this._destroyEventHandlers()},_afterSetOption:function(t,i){var r=this.options;r.fileInput||(r.fileInput=e()),r.dropZone||(r.dropZone=e()),this._initEventHandlers()},_setOption:function(t,i){var r=e.inArray(t,this._refreshOptionsList)!==-1;r&&this._beforeSetOption(t,i),e.Widget.prototype._setOption.call(this,t,i),r&&this._afterSetOption(t,i)},_create:function(){var t=this.options;void 0===t.fileInput?t.fileInput=this.element.is("input:file")?this.element:this.element.find("input:file"):t.fileInput||(t.fileInput=e()),t.dropZone||(t.dropZone=e()),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=this._loaded=this._total=0,this._initEventHandlers()},destroy:function(){this._destroyEventHandlers(),e.Widget.prototype.destroy.call(this)},enable:function(){e.Widget.prototype.enable.call(this),this._initEventHandlers()},disable:function(){this._destroyEventHandlers(),e.Widget.prototype.disable.call(this)},add:function(t){t&&!this.options.disabled&&(t.files=e.each(e.makeArray(t.files),this._normalizeFile),this._onAdd(null,t))},send:function(t){return t&&!this.options.disabled&&(t.files=e.each(e.makeArray(t.files),this._normalizeFile),t.files.length)?this._onSend(null,t):this._getXHRPromise(!1,t&&t.context)}})}(jQuery),/*
 * jQuery File Upload User Interface Plugin 5.1
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2010, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://creativecommons.org/licenses/MIT/
 */
function(e){"use strict";e.widget("blueimpUI.fileupload",e.blueimp.fileupload,{options:{autoUpload:!1,maxNumberOfFiles:void 0,maxFileSize:void 0,minFileSize:1,acceptFileTypes:/.+$/i,previewFileTypes:/^image\/(gif|jpeg|png)$/,previewMaxWidth:80,previewMaxHeight:80,previewAsCanvas:!0,uploadTemplate:e("#template-upload"),downloadTemplate:e("#template-download"),dataType:"json",add:function(t,i){var r=e(this).data("fileupload");r._adjustMaxNumberOfFiles(-i.files.length),i.isAdjusted=!0,i.isValidated=r._validate(i.files),i.context=r._renderUpload(i.files).appendTo(e(this).find(".files")).fadeIn(function(){e(this).show()}).data("data",i),(r.options.autoUpload||i.autoUpload)&&i.isValidated&&(i.jqXHR=i.submit())},send:function(t,i){if(!i.isValidated){var r=e(this).data("fileupload");if(i.isAdjusted||r._adjustMaxNumberOfFiles(-i.files.length),!r._validate(i.files))return!1}i.context&&i.dataType&&"iframe"===i.dataType.substr(0,6)&&i.context.find(".ui-progressbar").progressbar("value",parseInt(100,10))},done:function(t,i){var r=e(this).data("fileupload");i.context?i.context.each(function(t){var a=e.isArray(i.result)&&i.result[t]||{error:"emptyResult"};a.error&&r._adjustMaxNumberOfFiles(1),e(this).fadeOut(function(){r._renderDownload([a]).css("display","none").replaceAll(this).fadeIn(function(){e(this).show()})})}):r._renderDownload(i.result).css("display","none").appendTo(e(this).find(".files")).fadeIn(function(){e(this).show()})},fail:function(t,i){var r=e(this).data("fileupload");r._adjustMaxNumberOfFiles(i.files.length),i.context?i.context.each(function(t){e(this).fadeOut(function(){if("abort"!==i.errorThrown){var a=i.files[t];a.error=a.error||i.errorThrown||!0,r._renderDownload([a]).css("display","none").replaceAll(this).fadeIn(function(){e(this).show()})}else i.context.remove()})}):"abort"!==i.errorThrown&&(r._adjustMaxNumberOfFiles(-i.files.length),i.context=r._renderUpload(i.files).css("display","none").appendTo(e(this).find(".files")).fadeIn(function(){e(this).show()}).data("data",i))},progress:function(e,t){t.context&&t.context.find(".ui-progressbar").progressbar("value",parseInt(t.loaded/t.total*100,10))},progressall:function(t,i){e(this).find(".fileupload-progressbar").progressbar("value",parseInt(i.loaded/i.total*100,10))},start:function(){e(this).find(".fileupload-progressbar").progressbar("value",0).fadeIn()},stop:function(){e(this).find(".fileupload-progressbar").fadeOut()},destroy:function(t,i){var r=e(this).data("fileupload");i.url?e.ajax(i).success(function(){r._adjustMaxNumberOfFiles(1),e(this).fadeOut(function(){e(this).remove()})}):(r._adjustMaxNumberOfFiles(1),i.context.fadeOut(function(){e(this).remove()}))}},_scaleImage:function(e,t){t=t||{};var i=document.createElement("canvas"),r=Math.min((t.maxWidth||e.width)/e.width,(t.maxHeight||e.height)/e.height);return r>=1&&(r=Math.max((t.minWidth||e.width)/e.width,(t.minHeight||e.height)/e.height)),e.width=parseInt(e.width*r,10),e.height=parseInt(e.height*r,10),t.canvas&&i.getContext?(i.width=e.width,i.height=e.height,i.getContext("2d").drawImage(e,0,0,e.width,e.height),i):e},_createObjectURL:function(e){var t="undefined",i=typeof window.createObjectURL!==t&&window||typeof URL!==t&&URL||typeof webkitURL!==t&&webkitURL;return!!i&&i.createObjectURL(e)},_revokeObjectURL:function(e){var t="undefined",i=typeof window.revokeObjectURL!==t&&window||typeof URL!==t&&URL||typeof webkitURL!==t&&webkitURL;return!!i&&i.revokeObjectURL(e)},_loadFile:function(e,t){if("undefined"!=typeof FileReader&&FileReader.prototype.readAsDataURL){var i=new FileReader;return i.onload=function(e){t(e.target.result)},i.readAsDataURL(e),!0}return!1},_loadImage:function(t,i,r){var a,n,o=this;return!(r&&r.fileTypes&&!r.fileTypes.test(t.type))&&(a=this._createObjectURL(t),n=e("<img>").bind("load",function(){e(this).unbind("load"),o._revokeObjectURL(a),i(o._scaleImage(n[0],r))}),a?(n.prop("src",a),!0):this._loadFile(t,function(e){n.prop("src",e)}))},_enableDragToDesktop:function(){var t=e(this),i=t.prop("href"),r=decodeURIComponent(i.split("/").pop()).replace(/:/g,"-"),a="application/octet-stream";t.bind("dragstart",function(e){try{e.originalEvent.dataTransfer.setData("DownloadURL",[a,r,i].join(":"))}catch(t){}})},_adjustMaxNumberOfFiles:function(e){"number"==typeof this.options.maxNumberOfFiles&&(this.options.maxNumberOfFiles+=e,this.options.maxNumberOfFiles<1?this._disableFileInputButton():this._enableFileInputButton())},_formatFileSize:function(e){return"number"!=typeof e.size?"":e.size>=1e9?(e.size/1e9).toFixed(2)+" GB":e.size>=1e6?(e.size/1e6).toFixed(2)+" MB":(e.size/1e3).toFixed(2)+" KB"},_hasError:function(e){return e.error?e.error:this.options.maxNumberOfFiles<0?"maxNumberOfFiles":this.options.acceptFileTypes.test(e.type)||this.options.acceptFileTypes.test(e.name)?this.options.maxFileSize&&e.size>this.options.maxFileSize?"maxFileSize":"number"==typeof e.size&&e.size<this.options.minFileSize?"minFileSize":null:"acceptFileTypes"},_validate:function(t){var i=this,r=!!t.length;return e.each(t,function(e,t){t.error=i._hasError(t),t.error&&(r=!1)}),r},_uploadTemplateHelper:function(e){return e.sizef=this._formatFileSize(e),e},_renderUploadTemplate:function(t){var i=this;return e.tmpl(this.options.uploadTemplate,e.map(t,function(e){return i._uploadTemplateHelper(e)}))},_renderUpload:function(t){var i=this,r=this.options,a=this._renderUploadTemplate(t),n=this._validate(t);return a instanceof e?(a.css("display","none"),a.find(".progress div").slice(n?1:0).remove().end().first().progressbar(),a.find(".start button").slice(this.options.autoUpload||!n?0:1).remove().end().first().button({text:!1,icons:{primary:"ui-icon-circle-arrow-e"}}),a.find(".cancel button").slice(1).remove().end().first().button({text:!1,icons:{primary:"ui-icon-cancel"}}),a.find(".preview").each(function(a,n){i._loadImage(t[a],function(t){e(t).hide().appendTo(n).fadeIn()},{maxWidth:r.previewMaxWidth,maxHeight:r.previewMaxHeight,fileTypes:r.previewFileTypes,canvas:r.previewAsCanvas})}),a):e()},_downloadTemplateHelper:function(e){return e.sizef=this._formatFileSize(e),e},_renderDownloadTemplate:function(t){var i=this;return e.tmpl(this.options.downloadTemplate,e.map(t,function(e){return i._downloadTemplateHelper(e)}))},_renderDownload:function(t){var i=this._renderDownloadTemplate(t);return i instanceof e?(i.css("display","none"),i.find(".delete button").button({text:!1,icons:{primary:"ui-icon-trash"}}),i.find("a").each(this._enableDragToDesktop),i):e()},_startHandler:function(t){t.preventDefault();var i=e(this).closest(".template-upload"),r=i.data("data");r&&r.submit&&!r.jqXHR&&(r.jqXHR=r.submit(),r.jqXHR&&e(this).fadeOut())},_cancelHandler:function(t){t.preventDefault();var i=e(this).closest(".template-upload"),r=i.data("data")||{};r.jqXHR?r.jqXHR.abort():(r.errorThrown="abort",t.data.fileupload._trigger("fail",t,r))},_deleteHandler:function(t){t.preventDefault();var i=e(this);t.data.fileupload._trigger("destroy",t,{context:i.closest(".template-download"),url:i.attr("data-url"),type:i.attr("data-type"),dataType:t.data.fileupload.options.dataType})},_initEventHandlers:function(){e.blueimp.fileupload.prototype._initEventHandlers.call(this);var t={fileupload:this};this.element.find(".files").delegate(".start button","click."+this.options.namespace,t,this._startHandler).delegate(".cancel button","click."+this.options.namespace,t,this._cancelHandler).delegate(".delete button","click."+this.options.namespace,t,this._deleteHandler)},_destroyEventHandlers:function(){this.element.find(".files").undelegate(".start button","click."+this.options.namespace).undelegate(".cancel button","click."+this.options.namespace).undelegate(".delete button","click."+this.options.namespace),e.blueimp.fileupload.prototype._destroyEventHandlers.call(this)},_initFileUploadButtonBar:function(){var t=this.element.find(".fileupload-buttonbar"),i=this.element.find(".files"),r=this.options.namespace;t.addClass("ui-widget-header ui-corner-top"),this.element.find(".fileinput-button").each(function(){var t=e(this).find("input:file").detach();e(this).button({icons:{primary:"ui-icon-plusthick"}}).append(t)}),t.find(".start").button({icons:{primary:"ui-icon-circle-arrow-e"}}).bind("click."+r,function(e){e.preventDefault(),i.find(".start button").click()}),t.find(".cancel").button({icons:{primary:"ui-icon-cancel"}}).bind("click."+r,function(e){e.preventDefault(),i.find(".cancel button").click()}),t.find(".delete").button({icons:{primary:"ui-icon-trash"}}).bind("click."+r,function(e){e.preventDefault(),i.find(".delete input:checked").siblings("button").click()}),t.find(".toggle").bind("change."+r,function(t){i.find(".delete input").prop("checked",e(this).is(":checked"))})},_destroyFileUploadButtonBar:function(){this.element.find(".fileupload-buttonbar").removeClass("ui-widget-header ui-corner-top"),this.element.find(".fileinput-button").each(function(){var t=e(this).find("input:file").detach();e(this).button("destroy").append(t)}),this.element.find(".fileupload-buttonbar button").unbind("click."+this.options.namespace).button("destroy"),this.element.find(".fileupload-buttonbar .toggle").unbind("change."+this.options.namespace)},_enableFileInputButton:function(){this.element.find(".fileinput-button input:file:disabled").each(function(){var t=e(this),i=t.parent();t.detach().prop("disabled",!1),i.button("enable").append(t)})},_disableFileInputButton:function(){this.element.find(".fileinput-button input:file:enabled").each(function(){var t=e(this),i=t.parent();t.detach().prop("disabled",!0),i.button("disable").append(t)})},_initTemplates:function(){this.options.uploadTemplate instanceof e&&!this.options.uploadTemplate.length&&(this.options.uploadTemplate=e(this.options.uploadTemplate.selector)),this.options.downloadTemplate instanceof e&&!this.options.downloadTemplate.length&&(this.options.downloadTemplate=e(this.options.downloadTemplate.selector))},_create:function(){e.blueimp.fileupload.prototype._create.call(this),this._initTemplates(),this.element.addClass("ui-widget"),this._initFileUploadButtonBar(),this.element.find(".fileupload-content").addClass("ui-widget-content ui-corner-bottom"),this.element.find(".fileupload-progressbar").hide().progressbar()},destroy:function(){this.element.find(".fileupload-progressbar").progressbar("destroy"),this.element.find(".fileupload-content").removeClass("ui-widget-content ui-corner-bottom"),this._destroyFileUploadButtonBar(),this.element.removeClass("ui-widget"),e.blueimp.fileupload.prototype.destroy.call(this)},enable:function(){e.blueimp.fileupload.prototype.enable.call(this),this.element.find(":ui-button").not(".fileinput-button").button("enable"),this._enableFileInputButton()},disable:function(){this.element.find(":ui-button").not(".fileinput-button").button("disable"),this._disableFileInputButton(),e.blueimp.fileupload.prototype.disable.call(this)}})}(jQuery),function(e){function t(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}e.fn.ajaxSubmit=function(i){function r(t){for(var r=new FormData,a=0;a<t.length;a++)"file"!=t[a].type&&r.append(t[a].name,t[a].value);if(l.find("input:file:enabled").each(function(){var t=e(this).attr("name"),i=this.files;if(t)for(var a=0;a<i.length;a++)r.append(t,i[a])}),i.extraData)for(var n in i.extraData)r.append(n,i.extraData[n]);i.data=null;var o=i.beforeSend;i.beforeSend=function(e,t){t.data=r,e.upload&&(e.upload.onprogress=function(e){t.progress(e.position,e.total)}),o&&o.call(t,e,t)},e.ajax(i)}function a(r){function a(e){var t=e.contentWindow?e.contentWindow.document:e.contentDocument?e.contentDocument:e.document;return t}function o(){function i(){try{var e=a(g).readyState;t("state = "+e),"uninitialized"==e.toLowerCase()&&setTimeout(i,50)}catch(r){t("Server abort: ",r," (",r.name,")"),s(k),y&&clearTimeout(y),y=void 0}}var r=l.attr("target"),o=l.attr("action");x.setAttribute("target",h),n||x.setAttribute("method","POST"),o!=c.url&&x.setAttribute("action",c.url),c.skipEncodingOverride||n&&!/post/i.test(n)||l.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),c.timeout&&(y=setTimeout(function(){_=!0,s(j)},c.timeout));var d=[];try{if(c.extraData)for(var u in c.extraData)d.push(e('<input type="hidden" name="'+u+'">').attr("value",c.extraData[u]).appendTo(x)[0]);c.iframeTarget||(f.appendTo("body"),g.attachEvent?g.attachEvent("onload",s):g.addEventListener("load",s,!1)),setTimeout(i,15),x.submit()}finally{x.setAttribute("action",o),r?x.setAttribute("target",r):l.removeAttr("target"),e(d).remove()}}function s(i){if(!m.aborted&&!P){try{T=a(g)}catch(r){t("cannot access response document: ",r),i=k}if(i===j&&m)return void m.abort("timeout");if(i==k&&m)return void m.abort("server abort");if(T&&T.location.href!=c.iframeSrc||_){g.detachEvent?g.detachEvent("onload",s):g.removeEventListener("load",s,!1);var n,o="success";try{if(_)throw"timeout";var l="xml"==c.dataType||T.XMLDocument||e.isXMLDoc(T);if(t("isXml="+l),!l&&window.opera&&(null==T.body||""==T.body.innerHTML)&&--I)return t("requeing onLoad callback, DOM not available"),void setTimeout(s,250);var d=T.body?T.body:T.documentElement;m.responseText=d?d.innerHTML:null,m.responseXML=T.XMLDocument?T.XMLDocument:T,l&&(c.dataType="xml"),m.getResponseHeader=function(e){var t={"content-type":c.dataType};return t[e]},d&&(m.status=Number(d.getAttribute("status"))||m.status,m.statusText=d.getAttribute("statusText")||m.statusText);var u=(c.dataType||"").toLowerCase(),h=/(json|script|text)/.test(u);if(h||c.textarea){var v,b;try{v=e(e(T).text()),b=v.is("textarea")}catch(i){b=!1}if(b)m.responseText=v.text(),m.status=Number(v.attr("status"))||m.status,m.statusText=v.attr("statusText")||m.statusText;else if(h){var x=T.getElementsByTagName("pre")[0],w=T.getElementsByTagName("body")[0];x?m.responseText=x.textContent?x.textContent:x.innerText:w&&(m.responseText=w.textContent?w.textContent:w.innerText)}}else"xml"!=u||m.responseXML||null==m.responseText||(m.responseXML=$(m.responseText));try{S=M(m,u,c)}catch(i){o="parsererror",m.error=n=i||o}}catch(i){t("error caught: ",i),o="error",m.error=n=i||o}m.aborted&&(t("upload aborted"),o=null),m.status&&(o=m.status>=200&&m.status<300||304===m.status?"success":"error"),"success"===o?(c.success&&c.success.call(c.context,S,"success",m),p&&e.event.trigger("ajaxSuccess",[m,c])):o&&(void 0==n&&(n=m.statusText),c.error&&c.error.call(c.context,m,o,n),p&&e.event.trigger("ajaxError",[m,c,n])),p&&e.event.trigger("ajaxComplete",[m,c]),p&&!--e.active&&e.event.trigger("ajaxStop"),c.complete&&c.complete.call(c.context,m,o),P=!0,c.timeout&&clearTimeout(y),setTimeout(function(){c.iframeTarget||f.remove(),m.responseXML=null},100)}}}var d,u,c,p,h,f,g,m,v,b,_,y,x=l[0],w=!!e.fn.prop;if(r)if(w)for(u=0;u<r.length;u++)d=e(x[r[u].name]),d.prop("disabled",!1);else for(u=0;u<r.length;u++)d=e(x[r[u].name]),d.removeAttr("disabled");if(e(":input[name=submit],:input[id=submit]",x).length)return void alert('Error: Form elements must not have name or id of "submit".');if(c=e.extend(!0,{},e.ajaxSettings,i),c.context=c.context||c,h="jqFormIO"+(new Date).getTime(),c.iframeTarget?(f=e(c.iframeTarget),b=f.attr("name"),null==b?f.attr("name",h):h=b):(f=e('<iframe name="'+h+'" src="'+c.iframeSrc+'" />'),f.css({position:"absolute",top:"-1000px",left:"-1000px"})),g=f[0],m={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(i){var r="timeout"===i?"timeout":"aborted";t("aborting upload... "+r),this.aborted=1,f.attr("src",c.iframeSrc),m.error=r,c.error&&c.error.call(c.context,m,r,i),p&&e.event.trigger("ajaxError",[m,c,r]),c.complete&&c.complete.call(c.context,m,r)}},p=c.global,p&&!e.active++&&e.event.trigger("ajaxStart"),p&&e.event.trigger("ajaxSend",[m,c]),c.beforeSend&&c.beforeSend.call(c.context,m,c)===!1)return void(c.global&&e.active--);if(!m.aborted){v=x.clk,v&&(b=v.name,b&&!v.disabled&&(c.extraData=c.extraData||{},c.extraData[b]=v.value,"image"==v.type&&(c.extraData[b+".x"]=x.clk_x,c.extraData[b+".y"]=x.clk_y)));var j=1,k=2,C=e("meta[name=csrf-token]").attr("content"),D=e("meta[name=csrf-param]").attr("content");D&&C&&(c.extraData=c.extraData||{},c.extraData[D]=C),c.forceSync?o():setTimeout(o,10);var S,T,P,I=50,$=e.parseXML||function(e,t){return window.ActiveXObject?(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},F=e.parseJSON||function(e){return window.eval("("+e+")")},M=function(t,i,r){var a=t.getResponseHeader("content-type")||"",n="xml"===i||!i&&a.indexOf("xml")>=0,o=n?t.responseXML:t.responseText;return n&&"parsererror"===o.documentElement.nodeName&&e.error&&e.error("parsererror"),r&&r.dataFilter&&(o=r.dataFilter(o,i)),"string"==typeof o&&("json"===i||!i&&a.indexOf("json")>=0?o=F(o):("script"===i||!i&&a.indexOf("javascript")>=0)&&e.globalEval(o)),o}}}if(!this.length)return t("ajaxSubmit: skipping submit process - no element selected"),this;var n,o,s,l=this;"function"==typeof i&&(i={success:i}),n=this.attr("method"),o=this.attr("action"),s="string"==typeof o?e.trim(o):"",s=s||window.location.href||"",s&&(s=(s.match(/^([^#]+)/)||[])[1]),i=e.extend(!0,{url:s,success:e.ajaxSettings.success,type:n||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},i);var d={};if(this.trigger("form-pre-serialize",[this,i,d]),d.veto)return t("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(i.beforeSerialize&&i.beforeSerialize(this,i)===!1)return t("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var u=i.traditional;void 0===u&&(u=e.ajaxSettings.traditional);var c,p=i.propperFormSerialization!==!1?this.formToArray(i.semantic):[];if(i.data&&(i.extraData=i.data,c=e.param(i.data,u)),i.beforeSubmit&&i.beforeSubmit(p,this,i)===!1)return t("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[p,this,i,d]),d.veto)return t("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var h=e.param(p,u);c&&(h=h?h+"&"+c:c),"GET"==i.type.toUpperCase()?(i.url+=(i.url.indexOf("?")>=0?"&":"?")+h,i.data=null):i.data=h;var f=[];if(i.resetForm&&f.push(function(){l.resetForm()}),i.clearForm&&f.push(function(){l.clearForm(i.includeHidden)}),!i.dataType&&i.target){var g=i.success||function(){};f.push(function(t){var r=i.replaceTarget?"replaceWith":"html";e(i.target)[r](t).each(g,arguments)})}else i.success&&f.push(i.success);i.success=function(e,t,r){for(var a=i.context||i,n=0,o=f.length;n<o;n++)f[n].apply(a,[e,t,r||l,l])};var m=e("input:file:enabled[value]",this),v=m.length>0,b="multipart/form-data",_=l.attr("enctype")==b||l.attr("encoding")==b,y=!!(v&&m.get(0).files&&window.FormData);t("fileAPI :"+y);var x=(v||_)&&!y;return i.iframe!==!1&&(i.iframe||x)?i.closeKeepAlive?e.get(i.closeKeepAlive,function(){a(p)}):a(p):(v||_)&&y?(i.progress=i.progress||e.noop,r(p)):e.ajax(i),this.trigger("form-submit-notify",[this,i]),this},e.fn.ajaxForm=function(i){if(0===this.length){var r={s:this.selector,c:this.context};return!e.isReady&&r.s?(t("DOM not ready, queuing ajaxForm"),e(function(){e(r.s,r.c).ajaxForm(i)}),this):(t("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return this.ajaxFormUnbind().bind("submit.form-plugin",function(t){t.isDefaultPrevented()||(t.preventDefault(),e(this).ajaxSubmit(i))}).bind("click.form-plugin",function(t){var i=t.target,r=e(i);if(!r.is(":submit,input:image")){var a=r.closest(":submit");if(0==a.length)return;i=a[0]}var n=this;if(n.clk=i,"image"==i.type)if(void 0!=t.offsetX)n.clk_x=t.offsetX,n.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var o=r.offset();n.clk_x=t.pageX-o.left,n.clk_y=t.pageY-o.top}else n.clk_x=t.pageX-i.offsetLeft,n.clk_y=t.pageY-i.offsetTop;setTimeout(function(){n.clk=n.clk_x=n.clk_y=null},100)})},e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t){var i=[];if(0===this.length)return i;var r=this[0],a=t?r.getElementsByTagName("*"):r.elements;if(!a)return i;var n,o,s,l,d,u,c;for(n=0,u=a.length;n<u;n++)if(d=a[n],s=d.name)if(t&&r.clk&&"image"==d.type)d.disabled||r.clk!=d||(i.push({name:s,value:e(d).val(),type:d.type}),i.push({name:s+".x",value:r.clk_x},{name:s+".y",value:r.clk_y}));else if(l=e.fieldValue(d,!0),l&&l.constructor==Array)for(o=0,c=l.length;o<c;o++)i.push({name:s,value:l[o]});else null!==l&&"undefined"!=typeof l&&i.push({name:s,value:l,type:d.type});if(!t&&r.clk){var p=e(r.clk),h=p[0];s=h.name,s&&!h.disabled&&"image"==h.type&&(i.push({name:s,value:p.val()}),i.push({name:s+".x",value:r.clk_x},{name:s+".y",value:r.clk_y}))}return i},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var i=[];return this.each(function(){var r=this.name;if(r){var a=e.fieldValue(this,t);if(a&&a.constructor==Array)for(var n=0,o=a.length;n<o;n++)i.push({name:r,value:a[n]});else null!==a&&"undefined"!=typeof a&&i.push({name:this.name,value:a})}}),e.param(i)},e.fn.fieldValue=function(t){for(var i=[],r=0,a=this.length;r<a;r++){var n=this[r],o=e.fieldValue(n,t);null===o||"undefined"==typeof o||o.constructor==Array&&!o.length||(o.constructor==Array?e.merge(i,o):i.push(o))}return i},e.fieldValue=function(t,i){var r=t.name,a=t.type,n=t.tagName.toLowerCase();if(void 0===i&&(i=!0),i&&(!r||t.disabled||"reset"==a||"button"==a||("checkbox"==a||"radio"==a)&&!t.checked||("submit"==a||"image"==a)&&t.form&&t.form.clk!=t||"select"==n&&t.selectedIndex==-1))return null;if("select"==n){var o=t.selectedIndex;if(o<0)return null;for(var s=[],l=t.options,d="select-one"==a,u=d?o+1:l.length,c=d?o:0;c<u;c++){var p=l[c];if(p.selected){var h=p.value;if(h||(h=p.attributes&&p.attributes.value&&!p.attributes.value.specified?p.text:p.value),d)return h;s.push(h)}}return s}return e(t).val()},e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})},e.fn.clearFields=e.fn.clearInputs=function(e){var t=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var i=this.type,r=this.tagName.toLowerCase();t.test(i)||"textarea"==r||e&&/hidden/.test(i)?this.value="":"checkbox"==i||"radio"==i?this.checked=!1:"select"==r&&(this.selectedIndex=-1)})},e.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each(function(){var i=this.type;if("checkbox"==i||"radio"==i)this.checked=t;else if("option"==this.tagName.toLowerCase()){var r=e(this).parent("select");t&&r[0]&&"select-one"==r[0].type&&r.find("option").selected(!1),this.selected=t}})},e.fn.ajaxSubmit.debug=!1}(jQuery),/*
 * jQuery Iframe Transport Plugin 1.2.4
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2011, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://creativecommons.org/licenses/MIT/
 */
function(e){"use strict";var t=0;e.ajaxTransport("iframe",function(i){if(i.async&&("POST"===i.type||"GET"===i.type)){var r,a;return{send:function(n,o){r=e('<form style="display:none;"></form>'),a=e('<iframe src="javascript:false;" name="iframe-transport-'+(t+=1)+'"></iframe>').bind("load",function(){var t;a.unbind("load").bind("load",function(){var t;try{if(t=a.contents(),!t.length||!t[0].firstChild)throw new Error}catch(i){t=void 0}o(200,"success",{iframe:t}),e('<iframe src="javascript:false;"></iframe>').appendTo(r),r.remove()}),r.prop("target",a.prop("name")).prop("action",i.url).prop("method",i.type),i.formData&&e.each(i.formData,function(t,i){e('<input type="hidden"/>').prop("name",i.name).val(i.value).appendTo(r)}),i.fileInput&&i.fileInput.length&&"POST"===i.type&&(t=i.fileInput.clone(),i.fileInput.after(function(e){return t[e]}),i.paramName&&i.fileInput.each(function(){e(this).prop("name",i.paramName)}),r.append(i.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data")),r.submit(),t&&t.length&&i.fileInput.each(function(i,r){var a=e(t[i]);e(r).prop("name",a.prop("name")),a.replaceWith(r)})}),r.append(a).appendTo(document.body)},abort:function(){a&&a.unbind("load").prop("src","javascript".concat(":false;")),r&&r.remove()}}}}),e.ajaxSetup({converters:{"iframe text":function(e){return e.find("body").text()},"iframe json":function(t){return e.parseJSON(t.find("body").text())},"iframe html":function(e){return e.find("body").html()},"iframe script":function(t){return e.globalEval(t.find("body").text())}}})}(jQuery),/*
 * jQuery JSON Plugin
 * version: 2.1 (2009-08-14)
 *
 * This document is licensed as free software under the terms of the
 * MIT License: http://www.opensource.org/licenses/mit-license.php
 *
 * Brantley Harris wrote this plugin. It is based somewhat on the JSON.org 
 * website's http://www.json.org/json2.js, which proclaims:
 * "NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.", a sentiment that
 * I uphold.
 *
 * It is also influenced heavily by MochiKit's serializeJSON, which is 
 * copyrighted 2005 by Bob Ippolito.
 */
function($){$.toJSON=function(e){if("object"==typeof JSON&&JSON.stringify)return JSON.stringify(e);var t=typeof e;if(null===e)return"null";if("undefined"!=t){if("number"==t||"boolean"==t)return e+"";if("string"==t)return $.quoteString(e);if("object"==t){if("function"==typeof e.toJSON)return $.toJSON(e.toJSON());if(e.constructor===Date){var i=e.getUTCMonth()+1;i<10&&(i="0"+i);var r=e.getUTCDate();r<10&&(r="0"+r);var a=e.getUTCFullYear(),n=e.getUTCHours();n<10&&(n="0"+n);var o=e.getUTCMinutes();o<10&&(o="0"+o);var s=e.getUTCSeconds();s<10&&(s="0"+s);var l=e.getUTCMilliseconds();return l<100&&(l="0"+l),l<10&&(l="0"+l),'"'+a+"-"+i+"-"+r+"T"+n+":"+o+":"+s+"."+l+'Z"'}if(e.constructor===Array){for(var d=[],u=0;u<e.length;u++)d.push($.toJSON(e[u])||"null");return"["+d.join(",")+"]"}var c=[];for(var p in e){var h,t=typeof p;if("number"==t)h='"'+p+'"';else{if("string"!=t)continue;h=$.quoteString(p)}if("function"!=typeof e[p]){var f=$.toJSON(e[p]);c.push(h+":"+f)}}return"{"+c.join(", ")+"}"}}},$.evalJSON=function(src){return"object"==typeof JSON&&JSON.parse?JSON.parse(src):eval("("+src+")")},$.secureEvalJSON=function(src){if("object"==typeof JSON&&JSON.parse)return JSON.parse(src);var filtered=src;if(filtered=filtered.replace(/\\["\\\/bfnrtu]/g,"@"),filtered=filtered.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]"),filtered=filtered.replace(/(?:^|:|,)(?:\s*\[)+/g,""),/^[\],:{}\s]*$/.test(filtered))return eval("("+src+")");throw new SyntaxError("Error parsing JSON, source is not valid.")},$.quoteString=function(e){return e.match(_escapeable)?'"'+e.replace(_escapeable,function(e){var t=_meta[e];return"string"==typeof t?t:(t=e.charCodeAt(),"\\u00"+Math.floor(t/16).toString(16)+(t%16).toString(16))})+'"':'"'+e+'"'};var _escapeable=/["\\\x00-\x1f\x7f-\x9f]/g,_meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"}}(jQuery),function(e){e.fn.numeric=function(t,i){t=t===!1?"":t||".",i="function"==typeof i?i:function(){};var r=e(this);return this.bind("paste",function(e){setTimeout(function(){var e=r.val();if(""===t)var i=/[^\d]/;else var i=new RegExp("[^\\d"+t+"]");i.test(e)&&r.val("")},0)}),this.data("numeric.decimal",t).data("numeric.callback",i).keypress(e.fn.numeric.keypress).blur(e.fn.numeric.blur)},e.fn.numeric.keypress=function(t){var i=e.data(this,"numeric.decimal"),r=t.charCode?t.charCode:t.keyCode?t.keyCode:0;if(13==r&&"input"==this.nodeName.toLowerCase())return!0;if(13==r)return!1;var a=!1;if(t.ctrlKey&&97==r||t.ctrlKey&&65==r)return!0;if(t.ctrlKey&&120==r||t.ctrlKey&&88==r)return!0;if(t.ctrlKey&&99==r||t.ctrlKey&&67==r)return!0;if(t.ctrlKey&&122==r||t.ctrlKey&&90==r)return!0;if(t.ctrlKey&&118==r||t.ctrlKey&&86==r||t.shiftKey&&45==r)return!0;if(r<48||r>57){if(45==r&&0==this.value.length)return!0;i&&r==i.charCodeAt(0)&&this.value.indexOf(i)!=-1&&(a=!1),8!=r&&9!=r&&13!=r&&35!=r&&36!=r&&37!=r&&39!=r&&46!=r?a=!1:"undefined"!=typeof t.charCode&&(t.keyCode==t.which&&0!=t.which?(a=!0,46==t.which&&(a=!1)):0!=t.keyCode&&0==t.charCode&&0==t.which&&(a=!0)),i&&r==i.charCodeAt(0)&&(a=this.value.indexOf(i)==-1)}else a=!0;return a},e.fn.numeric.blur=function(){var t=e.data(this,"numeric.decimal"),i=e.data(this,"numeric.callback"),r=e(this).val();if(""!=r){var a=new RegExp("^\\d+$|\\d*"+t+"\\d+");a.exec(r)||i.apply(this)}},e.fn.removeNumeric=function(){return this.data("numeric.decimal",null).data("numeric.callback",null).unbind("keypress",e.fn.numeric.keypress).unbind("blur",e.fn.numeric.blur)}}(jQuery),/*
* qTip2 - Pretty powerful tooltips
* http://craigsworks.com/projects/qtip2/
*
* Version: 2.0.0pre
* Copyright 2009-2010 Craig Michael Thompson - http://craigsworks.com
*
* Dual licensed under MIT or GPLv2 licenses
*   http://en.wikipedia.org/wiki/MIT_License
*   http://en.wikipedia.org/wiki/GNU_General_Public_License
*
* Date: Sat Mar 3 17:00:08 2012 +0000
*/
function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){"use strict";function t(){if(t.history=t.history||[],t.history.push(arguments),"object"==typeof console){var e,i=console[console.warn?"warn":"log"],r=Array.prototype.slice.call(arguments);"string"==typeof arguments[0]&&(r[0]="qTip2: "+r[0]),e=i.apply?i.apply(console,r):i(r)}}function i(t){var i;return t&&"object"==typeof t?(t.metadata!==v&&"object"==typeof t.metadata||(t.metadata={type:t.metadata}),"content"in t&&((t.content===v||"object"!=typeof t.content||t.content.jquery)&&(t.content={text:t.content}),i=t.content.text||m,!e.isFunction(i)&&(!i&&!i.attr||i.length<1||"object"==typeof i&&!i.jquery)&&(t.content.text=m),"title"in t.content&&(t.content.title!==v&&"object"==typeof t.content.title||(t.content.title={text:t.content.title}),i=t.content.title.text||m,!e.isFunction(i)&&(!i&&!i.attr||i.length<1||"object"==typeof i&&!i.jquery)&&(t.content.title.text=m))),"position"in t&&(t.position!==v&&"object"==typeof t.position||(t.position={my:t.position,at:t.position})),"show"in t&&(t.show!==v&&"object"==typeof t.show||(t.show.jquery?t.show={target:t.show}:t.show={event:t.show})),"hide"in t&&(t.hide!==v&&"object"==typeof t.hide||(t.hide.jquery?t.hide={target:t.hide}:t.hide={event:t.hide})),"style"in t&&(t.style!==v&&"object"==typeof t.style||(t.style={classes:t.style})),e.each(p,function(){this.sanitize&&this.sanitize(t)}),t):m}function r(t,r,a,n){function o(e){for(var t,i=0,a=r,n=e.split(".");a=a[n[i++]];)i<n.length&&(t=a);return[t||r,n.pop()]}function s(){var e=r.style.widget;L.toggleClass(y,e).toggleClass(j,r.style.def&&!e),A.content.toggleClass(y+"-content",e),A.titlebar&&A.titlebar.toggleClass(y+"-header",e),A.button&&A.button.toggleClass(_+"-icon",!e)}function l(e){A.title&&(A.titlebar.remove(),A.titlebar=A.title=A.button=v,e!==m&&q.reposition())}function d(){var t=r.content.title.button,i="string"==typeof t,a=i?t:"Close tooltip";A.button&&A.button.remove(),t.jquery?A.button=t:A.button=e("<a />",{"class":"ui-state-default ui-tooltip-close "+(r.style.widget?"":_+"-icon"),title:a,"aria-label":a}).prepend(e("<span />",{"class":"ui-icon ui-icon-close",html:"&times;"})),A.button.appendTo(A.titlebar).attr("role","button").click(function(e){return L.hasClass(x)||q.hide(e),m}),q.redraw()}function S(){var t=R+"-title";A.titlebar&&l(),A.titlebar=e("<div />",{"class":_+"-titlebar "+(r.style.widget?"ui-widget-header":"")}).append(A.title=e("<div />",{id:t,"class":_+"-title","aria-atomic":g})).insertBefore(A.content).delegate(".ui-tooltip-close","mousedown keydown mouseup keyup mouseout",function(t){e(this).toggleClass("ui-state-active ui-state-focus","down"===t.type.substr(-4))}).delegate(".ui-tooltip-close","mouseover mouseout",function(t){e(this).toggleClass("ui-state-hover","mouseover"===t.type)}),r.content.title.button?d():q.rendered&&q.redraw()}function P(e){var t=A.button,i=A.title;return q.rendered?void(e?(i||S(),d()):t.remove()):m}function I(i,r){var a=A.title;return q.rendered&&i?(e.isFunction(i)&&(i=i.call(t,E.event,q)),i===m||!i&&""!==i?l(m):(i.jquery&&i.length>0?a.empty().append(i.css({display:"block"})):a.html(i),q.redraw(),void(r!==m&&q.rendered&&L.is(":visible")&&q.reposition(E.event)))):m}function $(i,r){function a(t){function i(i){i&&(delete o[i.src],clearTimeout(q.timers.img[i.src]),e(i).unbind(z)),e.isEmptyObject(o)&&(q.redraw(),r!==m&&q.reposition(E.event),t())}var a,o={};return 0===(a=n.find("img[src]:not([height]):not([width])")).length?i():void a.each(function(t,r){if(o[r.src]===u){var a=0,n=3;!function s(){return r.height||r.width||a>n?i(r):(a+=1,void(q.timers.img[r.src]=setTimeout(s,700)))}(),e(r).bind("error"+z+" load"+z,function(){i(this)}),o[r.src]=r}})}var n=A.content;return q.rendered&&i?(e.isFunction(i)&&(i=i.call(t,E.event,q)||""),i.jquery&&i.length>0?n.empty().append(i.css({display:"block"})):n.html(i),q.rendered<0?L.queue("fx",a):(G=0,a(e.noop)),q):m}function F(){function i(e){if(L.hasClass(x))return m;clearTimeout(q.timers.show),clearTimeout(q.timers.hide);var t=function(){q.toggle(g,e)};r.show.delay>0?q.timers.show=setTimeout(t,r.show.delay):t()}function n(t){if(L.hasClass(x)||N||G)return m;var i=e(t.relatedTarget||t.target),a=i.closest(w)[0]===L[0],n=i[0]===d.show[0];if(clearTimeout(q.timers.show),clearTimeout(q.timers.hide),"mouse"===l.target&&a||r.hide.fixed&&/mouse(out|leave|move)/.test(t.type)&&(a||n))try{t.preventDefault(),t.stopImmediatePropagation()}catch(o){}else r.hide.delay>0?q.timers.hide=setTimeout(function(){q.hide(t)},r.hide.delay):q.hide(t)}function o(e){return L.hasClass(x)?m:(clearTimeout(q.timers.inactive),void(q.timers.inactive=setTimeout(function(){q.hide(e)},r.hide.inactive)))}function s(e){L.is(":visible")&&q.reposition(e)}var l=r.position,d={show:r.show.target,hide:r.hide.target,viewport:e(l.viewport),document:e(document),body:e(document.body),window:e(window)},u={show:e.trim(""+r.show.event).split(" "),hide:e.trim(""+r.hide.event).split(" ")},p=e.browser.msie&&6===parseInt(e.browser.version,10);L.bind("mouseenter"+z+" mouseleave"+z,function(e){var t="mouseenter"===e.type;t&&q.focus(e),L.toggleClass(C,t)}),r.hide.fixed&&(d.hide=d.hide.add(L),L.bind("mouseover"+z,function(){L.hasClass(x)||clearTimeout(q.timers.hide)})),/mouse(out|leave)/i.test(r.hide.event)?"window"===r.hide.leave&&d.window.bind("mouseout"+z+" blur"+z,function(e){/select|option/.test(e.target)&&!e.relatedTarget&&q.hide(e)}):/mouse(over|enter)/i.test(r.show.event)&&d.hide.bind("mouseleave"+z,function(e){clearTimeout(q.timers.show)}),(""+r.hide.event).indexOf("unfocus")>-1&&l.container.closest("html").bind("mousedown"+z,function(i){var r=e(i.target),a=(!L.hasClass(x)&&L.is(":visible"),r.parents(w).filter(L[0]).length>0);r[0]===t[0]||r[0]===L[0]||a||t.has(r[0]).length||r.attr("disabled")||q.hide(i)}),"number"==typeof r.hide.inactive&&(d.show.bind("qtip-"+a+"-inactive",o),e.each(c.inactiveEvents,function(e,t){d.hide.add(A.tooltip).bind(t+z+"-inactive",o)})),e.each(u.hide,function(t,r){var a=e.inArray(r,u.show),o=e(d.hide);a>-1&&o.add(d.show).length===o.length||"unfocus"===r?(d.show.bind(r+z,function(e){L.is(":visible")?n(e):i(e)}),delete u.show[a]):d.hide.bind(r+z,n)}),e.each(u.show,function(e,t){d.show.bind(t+z,i)}),"number"==typeof r.hide.distance&&d.show.add(L).bind("mousemove"+z,function(e){var t=E.origin||{},i=r.hide.distance,a=Math.abs;(a(e.pageX-t.pageX)>=i||a(e.pageY-t.pageY)>=i)&&q.hide(e)}),"mouse"===l.target&&(d.show.bind("mousemove"+z,function(e){h={pageX:e.pageX,pageY:e.pageY,type:"mousemove"}}),l.adjust.mouse&&(r.hide.event&&(L.bind("mouseleave"+z,function(e){(e.relatedTarget||e.target)!==d.show[0]&&q.hide(e)}),A.target.bind("mouseenter"+z+" mouseleave"+z,function(e){E.onTarget="mouseenter"===e.type})),d.document.bind("mousemove"+z,function(e){E.onTarget&&!L.hasClass(x)&&L.is(":visible")&&q.reposition(e||h)}))),(l.adjust.resize||d.viewport.length)&&(e.event.special.resize?d.viewport:d.window).bind("resize"+z,s),(d.viewport.length||p&&"fixed"===L.css("position"))&&d.viewport.bind("scroll"+z,s)}function M(){var t=[r.show.target[0],r.hide.target[0],q.rendered&&A.tooltip[0],r.position.container[0],r.position.viewport[0],window,document];q.rendered?e([]).pushStack(e.grep(t,function(e){return"object"==typeof e})).unbind(z):r.show.target.unbind(z+"-create")}var A,E,q=this,O=document.body,R=_+"-"+a,N=0,G=0,L=e(),z=".qtip-"+a;q.id=a,q.rendered=m,q.elements=A={target:t},q.timers={img:{}},q.options=r,q.checks={},q.plugins={},q.cache=E={event:{},target:e(),disabled:m,attr:n,onTarget:m},q.checks.builtin={"^id$":function(t,i,r){var a=r===g?c.nextid:r,n=_+"-"+a;a!==m&&a.length>0&&!e("#"+n).length&&(L[0].id=n,A.content[0].id=n+"-content",A.title[0].id=n+"-title")},"^content.text$":function(e,t,i){$(i)},"^content.title.text$":function(e,t,i){return i?(!A.title&&i&&S(),void I(i)):l()},"^content.title.button$":function(e,t,i){P(i)},"^position.(my|at)$":function(e,t,i){"string"==typeof i&&(e[t]=new p.Corner(i))},"^position.container$":function(e,t,i){q.rendered&&L.appendTo(i)},"^show.ready$":function(){q.rendered?q.toggle(g):q.render(1)},"^style.classes$":function(e,t,i){L.attr("class",_+" qtip ui-helper-reset "+i)},"^style.widget|content.title":s,"^events.(render|show|move|hide|focus|blur)$":function(t,i,r){L[(e.isFunction(r)?"":"un")+"bind"]("tooltip"+i,r)},"^(show|hide|position).(event|target|fixed|inactive|leave|distance|viewport|adjust)":function(){var e=r.position;L.attr("tracking","mouse"===e.target&&e.adjust.mouse),M(),F()}},e.extend(q,{render:function(i){if(q.rendered)return q;var a=r.content.text,n=r.content.title.text,o=r.position,l=e.Event("tooltiprender");return e.attr(t[0],"aria-describedby",R),L=A.tooltip=e("<div/>",{id:R,"class":_+" qtip ui-helper-reset "+j+" "+r.style.classes+" "+_+"-pos-"+r.position.my.abbrev(),width:r.style.width||"",height:r.style.height||"",tracking:"mouse"===o.target&&o.adjust.mouse,role:"alert","aria-live":"polite","aria-atomic":m,"aria-describedby":R+"-content","aria-hidden":g}).toggleClass(x,E.disabled).data("qtip",q).appendTo(r.position.container).append(A.content=e("<div />",{"class":_+"-content",id:R+"-content","aria-atomic":g})),q.rendered=-1,G=1,N=1,n&&(S(),e.isFunction(n)||I(n,m)),e.isFunction(a)||$(a,m),q.rendered=g,s(),e.each(r.events,function(t,i){e.isFunction(i)&&L.bind("toggle"===t?"tooltipshow tooltiphide":"tooltip"+t,i)}),e.each(p,function(){"render"===this.initialize&&this(q)}),F(),L.queue("fx",function(e){l.originalEvent=E.event,L.trigger(l,[q]),G=0,N=0,q.redraw(),(r.show.ready||i)&&q.toggle(g,E.event,m),e()}),q},get:function(e){var t;switch(e.toLowerCase()){case"dimensions":t={height:L.outerHeight(),width:L.outerWidth()};break;case"offset":t=p.offset(L,r.position.container)}return t},set:function(t,a){function n(e,t){var i,r,a;for(i in p)for(r in p[i])(a=new RegExp(r,"i").exec(e))&&(t.push(a),p[i][r].apply(q,t))}var s,l=/^position\.(my|at|adjust|target|container)|style|content|show\.ready/i,d=/^content\.(title|attr)|style/i,u=m,c=m,p=q.checks;return"string"==typeof t?(s=t,t={},t[s]=a):t=e.extend(g,{},t),e.each(t,function(i,r){var a,n=o(i.toLowerCase());a=n[0][n[1]],n[0][n[1]]="object"==typeof r&&r.nodeType?e(r):r,t[i]=[n[0],n[1],r,a],u=l.test(i)||u,c=d.test(i)||c}),i(r),N=G=1,e.each(t,n),N=G=0,L.is(":visible")&&q.rendered&&(u&&q.reposition("mouse"===r.position.target?v:E.event),c&&q.redraw()),q},toggle:function(t,i){function n(){t?(e.browser.msie&&L[0].style.removeAttribute("filter"),L.css("overflow",""),"string"==typeof l.autofocus&&e(l.autofocus,L).focus(),o=e.Event("tooltipvisible"),o.originalEvent=i?E.event:v,L.trigger(o,[q]),l.target.trigger("qtip-"+a+"-inactive")):L.css({display:"",visibility:"",opacity:"",left:"",top:""})}if(!q.rendered)return t?q.render(1):q;var o,s=t?"show":"hide",l=r[s],d=L.is(":visible"),u=!i||r[s].target.length<2||E.target[0]===i.target,c=r.position,p=r.content;if((typeof t).search("boolean|number")&&(t=!d),!L.is(":animated")&&d===t&&u)return q;if(i){if(/over|enter/.test(i.type)&&/out|leave/.test(E.event.type)&&i.target===r.show.target[0]&&L.has(i.relatedTarget).length)return q;E.event=e.extend({},i)}return o=e.Event("tooltip"+s),o.originalEvent=i?E.event:v,L.trigger(o,[q,90]),o.isDefaultPrevented()?q:(e.attr(L[0],"aria-hidden",!t),t?(E.origin=e.extend({},h),q.focus(i),e.isFunction(p.text)&&$(p.text,m),e.isFunction(p.title.text)&&I(p.title.text,m),!f&&"mouse"===c.target&&c.adjust.mouse&&(e(document).bind("mousemove.qtip",function(e){h={pageX:e.pageX,pageY:e.pageY,type:"mousemove"}}),f=g),q.reposition(i,arguments[2]),(o.solo=!!l.solo)&&e(w,l.solo).not(L).qtip("hide",o)):(clearTimeout(q.timers.show),delete E.origin,f&&!e(w+'[tracking="true"]:visible',l.solo).not(L).length&&(e(document).unbind("mousemove.qtip"),f=m),q.blur(i)),u&&L.stop(0,1),l.effect===m?(L[s](),n.call(L)):e.isFunction(l.effect)?(l.effect.call(L,q),L.queue("fx",function(e){n(),e()})):L.fadeTo(90,t?1:0,n),t&&l.target.trigger("qtip-"+a+"-inactive"),q)},show:function(e){return q.toggle(g,e)},hide:function(e){return q.toggle(m,e)},focus:function(t){if(!q.rendered)return q;var i,r=e(w),a=parseInt(L[0].style.zIndex,10),n=c.zindex+r.length,o=e.extend({},t);return L.hasClass(k)||(i=e.Event("tooltipfocus"),i.originalEvent=o,L.trigger(i,[q,n]),i.isDefaultPrevented()||(a!==n&&(r.each(function(){this.style.zIndex>a&&(this.style.zIndex=this.style.zIndex-1)}),r.filter("."+k).qtip("blur",o)),L.addClass(k)[0].style.zIndex=n)),q},blur:function(t){var i,r=e.extend({},t);return L.removeClass(k),i=e.Event("tooltipblur"),i.originalEvent=r,L.trigger(i,[q]),q},reposition:function(t,i){if(!q.rendered||N)return q;N=1;var a,n=r.position.target,o=r.position,s=o.my,l=o.at,d=o.adjust,u=d.method.split(" "),c=L.outerWidth(),f=L.outerHeight(),g=0,v=0,b=e.Event("tooltipmove"),y="fixed"===L.css("position"),x=o.viewport,w={left:0,top:0},j=o.container,k=m,C=q.plugins.tip,D={horizontal:u[0],vertical:u[1]=u[1]||u[0],enabled:x.jquery&&n[0]!==window&&n[0]!==O&&"none"!==d.method,left:function(e){var t="shift"===D.horizontal,i=-j.offset.left+x.offset.left+x.scrollLeft,r="left"===s.x?c:"right"===s.x?-c:-c/2,a="left"===l.x?g:"right"===l.x?-g:-g/2,n=C&&C.size?C.size.width||0:0,o=C&&C.corner&&"x"===C.corner.precedance&&!t?n:0,u=i-e+o,p=e+c-x.width-i+o,h=r-("x"===s.precedance||s.x===s.y?a:0)-("center"===l.x?g/2:0),f="center"===s.x;return t?(o=C&&C.corner&&"y"===C.corner.precedance?n:0,h=("left"===s.x?1:-1)*r-o,w.left+=u>0?u:p>0?-p:0,w.left=Math.max(-j.offset.left+x.offset.left+(o&&"center"===C.corner.x?C.offset:0),e-h,Math.min(Math.max(-j.offset.left+x.offset.left+x.width,e+h),w.left))):(u>0&&("left"!==s.x||p>0)?w.left-=h:p>0&&("right"!==s.x||u>0)&&(w.left-=f?-h:h),w.left!==e&&f&&(w.left-=d.x),w.left<i&&-w.left>p&&(w.left=e)),w.left-e},top:function(e){var t="shift"===D.vertical,i=-j.offset.top+x.offset.top+x.scrollTop,r="top"===s.y?f:"bottom"===s.y?-f:-f/2,a="top"===l.y?v:"bottom"===l.y?-v:-v/2,n=C&&C.size?C.size.height||0:0,o=C&&C.corner&&"y"===C.corner.precedance&&!t?n:0,u=i-e+o,c=e+f-x.height-i+o,p=r-("y"===s.precedance||s.x===s.y?a:0)-("center"===l.y?v/2:0),h="center"===s.y;return t?(o=C&&C.corner&&"x"===C.corner.precedance?n:0,p=("top"===s.y?1:-1)*r-o,w.top+=u>0?u:c>0?-c:0,w.top=Math.max(-j.offset.top+x.offset.top+(o&&"center"===C.corner.x?C.offset:0),e-p,Math.min(Math.max(-j.offset.top+x.offset.top+x.height,e+p),w.top))):(u>0&&("top"!==s.y||c>0)?w.top-=p:c>0&&("bottom"!==s.y||u>0)&&(w.top-=h?-p:p),w.top!==e&&h&&(w.top-=d.y),w.top<0&&-w.top>c&&(w.top=e)),w.top-e}};if(e.isArray(n)&&2===n.length)l={x:"left",y:"top"},w={left:n[0],top:n[1]};else if("mouse"===n&&(t&&t.pageX||E.event.pageX))l={x:"left",y:"top"},t=(!t||"resize"!==t.type&&"scroll"!==t.type?t&&t.pageX&&"mousemove"===t.type?t:!h||!h.pageX||!d.mouse&&t&&t.pageX?!d.mouse&&E.origin&&E.origin.pageX&&r.show.distance?E.origin:t:{pageX:h.pageX,pageY:h.pageY}:E.event)||t||E.event||h||{},w={top:t.pageY,left:t.pageX};else{if(n="event"===n?t&&t.target&&"scroll"!==t.type&&"resize"!==t.type?E.target=e(t.target):E.target:E.target=e(n.jquery?n:A.target),n=e(n).eq(0),0===n.length)return q;n[0]===document||n[0]===window?(g=p.iOS?window.innerWidth:n.width(),v=p.iOS?window.innerHeight:n.height(),n[0]===window&&(w={top:(x||n).scrollTop(),left:(x||n).scrollLeft()})):n.is("area")&&p.imagemap?w=p.imagemap(n,l,D.enabled?u:m):"http://www.w3.org/2000/svg"===n[0].namespaceURI&&p.svg?w=p.svg(n,l):(g=n.outerWidth(),v=n.outerHeight(),w=p.offset(n,j)),w.offset&&(g=w.width,v=w.height,k=w.flipoffset,w=w.offset),(p.iOS<4.1&&p.iOS>3.1||4.3==p.iOS||!p.iOS&&y)&&(a=e(window),w.left-=a.scrollLeft(),w.top-=a.scrollTop()),w.left+="right"===l.x?g:"center"===l.x?g/2:0,w.top+="bottom"===l.y?v:"center"===l.y?v/2:0}return w.left+=d.x+("right"===s.x?-c:"center"===s.x?-c/2:0),w.top+=d.y+("bottom"===s.y?-f:"center"===s.y?-f/2:0),D.enabled?(x={elem:x,height:x[(x[0]===window?"h":"outerH")+"eight"](),width:x[(x[0]===window?"w":"outerW")+"idth"](),scrollLeft:y?0:x.scrollLeft(),scrollTop:y?0:x.scrollTop(),offset:x.offset()||{left:0,top:0}},j={elem:j,scrollLeft:j.scrollLeft(),scrollTop:j.scrollTop(),offset:j.offset()||{left:0,top:0}},w.adjusted={left:"none"!==D.horizontal?D.left(w.left):0,top:"none"!==D.vertical?D.top(w.top):0},w.adjusted.left+w.adjusted.top&&L.attr("class",L[0].className.replace(/ui-tooltip-pos-\w+/i,_+"-pos-"+s.abbrev())),k&&w.adjusted.left&&(w.left+=k.left),k&&w.adjusted.top&&(w.top+=k.top)):w.adjusted={left:0,top:0},b.originalEvent=e.extend({},t),L.trigger(b,[q,w,x.elem||x]),b.isDefaultPrevented()?q:(delete w.adjusted,i===m||isNaN(w.left)||isNaN(w.top)||"mouse"===n||!e.isFunction(o.effect)?L.css(w):e.isFunction(o.effect)&&(o.effect.call(L,q,e.extend({},w)),L.queue(function(t){e(this).css({opacity:"",height:""}),e.browser.msie&&this.style.removeAttribute("filter"),t()})),N=0,q)},redraw:function(){if(q.rendered<1||G)return q;var e,t,i,a,n=r.position.container;return G=1,r.style.height&&L.css("height",r.style.height),r.style.width?L.css("width",r.style.width):(L.css("width","").addClass(D),t=L.width()+1,i=L.css("max-width")||"",a=L.css("min-width")||"",e=(i+a).indexOf("%")>-1?n.width()/100:0,i=(i.indexOf("%")>-1?e:1)*parseInt(i,10)||t,a=(a.indexOf("%")>-1?e:1)*parseInt(a,10)||0,t=i+a?Math.min(Math.max(t,a),i):t,L.css("width",Math.round(t)).removeClass(D)),G=0,q},disable:function(t){return"boolean"!=typeof t&&(t=!(L.hasClass(x)||E.disabled)),q.rendered?(L.toggleClass(x,t),e.attr(L[0],"aria-disabled",t)):E.disabled=!!t,q},enable:function(){return q.disable(m)},destroy:function(){var i=t[0],n=e.attr(i,T),o=t.data("qtip");return q.rendered&&(L.stop(1,0).remove(),e.each(q.plugins,function(){this.destroy&&this.destroy()})),clearTimeout(q.timers.show),clearTimeout(q.timers.hide),M(),o&&q!==o||(e.removeData(i,"qtip"),r.suppress&&n&&(e.attr(i,"title",n),t.removeAttr(T)),t.removeAttr("aria-describedby")),t.unbind(".qtip-"+a),delete b[q.id],t}})}function a(a,n){var o,s,l,d,u,h=e(this),f=e(document.body),b=this===document?f:h,_=h.metadata?h.metadata(n.metadata):v,y="html5"===n.metadata.type&&_?_[n.metadata.name]:v,x=h.data(n.metadata.name||"qtipopts");try{x="string"==typeof x?new Function("return "+x)():x}catch(w){t("Unable to parse HTML5 attribute data: "+x)}if(d=e.extend(g,{},c.defaults,n,"object"==typeof x?i(x):v,i(y||_)),s=d.position,d.id=a,"boolean"==typeof d.content.text){if(l=h.attr(d.content.attr),d.content.attr===m||!l)return t("Unable to locate content for tooltip! Aborting render of tooltip on element: ",h),m;d.content.text=l}if(s.container.length||(s.container=f),s.target===m&&(s.target=b),d.show.target===m&&(d.show.target=b),d.show.solo===g&&(d.show.solo=s.container.closest("body")),d.hide.target===m&&(d.hide.target=b),d.position.viewport===g&&(d.position.viewport=s.container),s.at=new p.Corner(s.at),s.my=new p.Corner(s.my),e.data(this,"qtip"))if(d.overwrite)h.qtip("destroy");else if(d.overwrite===m)return m;return d.suppress&&(u=e.attr(this,"title"))&&e(this).removeAttr("title").attr(T,u),o=new r(h,d,a,(!!l)),e.data(this,"qtip",o),h.bind("remove.qtip-"+a+" removeqtip.qtip-"+a,function(){o.destroy()}),o}function n(t){var i,r=this,a=t.elements.tooltip,n=t.options.content.ajax,o=".qtip-ajax",s=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,l=m;t.checks.ajax={"^content.ajax":function(e,t,i){"ajax"===t&&(n=i),"once"===t?r.init():n&&n.url?r.load():a.unbind(o)}},e.extend(r,{init:function(){return n&&n.url&&a.unbind(o)[n.once?"one":"bind"]("tooltipshow"+o,r.load),r},load:function(a,o){function d(){l||(g&&(t.show(a.originalEvent),o=m),e.isFunction(n.complete)&&n.complete.apply(this,arguments))}function u(i){l||(p&&(i=e("<div/>").append(i.replace(s,"")).find(p)),t.set("content.text",i))}function c(e,i,r){l||0===e.status||t.set("content.text",i+": "+r)}var p,h=n.url.indexOf(" "),f=n.url,g=n.once&&!n.loading&&o;if(g)try{a.preventDefault()}catch(v){}else if(a&&a.isDefaultPrevented())return r;i&&i.abort&&i.abort(),h>-1&&(p=f.substr(h),f=f.substr(0,h)),i=e.ajax(e.extend({success:u,error:c,context:t},n,{url:f,complete:d}))},destroy:function(){i&&i.abort&&i.abort(),l=g}}),r.init()}function o(t){var i=this,r=t.elements,a=r.tooltip,n=".bgiframe-"+t.id;e.extend(i,{init:function(){r.bgiframe=e('<iframe class="ui-tooltip-bgiframe" frameborder="0" tabindex="-1" src="javascript:\'\';"  style="display:block; position:absolute; z-index:-1; filter:alpha(opacity=0); -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";"></iframe>'),r.bgiframe.appendTo(a),a.bind("tooltipmove"+n,i.adjust)},adjust:function(){var e,i,n=t.get("dimensions"),o=t.plugins.tip,s=r.tip;i=parseInt(a.css("border-left-width"),10)||0,i={left:-i,top:-i},o&&s&&(e="x"===o.corner.precedance?["width","left"]:["height","top"],i[e[1]]-=s[e[0]]()),r.bgiframe.css(i).css(n)},destroy:function(){r.bgiframe.remove(),a.unbind(n)}}),i.init()}function s(t){var i,r=this,a=t.options.show.modal,n=t.elements,o=n.tooltip,s="#qtip-overlay",l=".qtipmodal",d=l+t.id,u="is-modal-qtip",c=e(document.body);t.checks.modal={"^show.modal.(on|blur)$":function(){r.init(),n.overlay.toggle(o.is(":visible"))}},e.extend(r,{init:function(){return a.on?(i=r.create(),o.attr(u,g).css("z-index",p.modal.zindex+e(w+"["+u+"]").length).unbind(l).unbind(d).bind("tooltipshow"+l+" tooltiphide"+l,function(t,a,n){var s=t.originalEvent;if(t.target===o[0])if(s&&"tooltiphide"===t.type&&/mouse(leave|enter)/.test(s.type)&&e(s.relatedTarget).closest(i[0]).length)try{t.preventDefault()}catch(l){}else(!s||s&&!s.solo)&&r[t.type.replace("tooltip","")](t,n)}).bind("tooltipfocus"+l,function(t){if(!t.isDefaultPrevented()&&t.target===o[0]){var r=e(w).filter("["+u+"]"),a=p.modal.zindex+r.length,n=parseInt(o[0].style.zIndex,10);i[0].style.zIndex=a-1,r.each(function(){this.style.zIndex>n&&(this.style.zIndex-=1)}),r.end().filter("."+k).qtip("blur",t.originalEvent),o.addClass(k)[0].style.zIndex=a;try{t.preventDefault()}catch(s){}}}).bind("tooltiphide"+l,function(t){t.target===o[0]&&e("["+u+"]").filter(":visible").not(o).last().qtip("focus",t)}),a.escape&&e(window).unbind(d).bind("keydown"+d,function(e){27===e.keyCode&&o.hasClass(k)&&t.hide(e)}),a.blur&&n.overlay.unbind(d).bind("click"+d,function(e){o.hasClass(k)&&t.hide(e)}),r):r},create:function(){function t(){i.css({height:e(window).height(),width:e(window).width()})}var r=e(s);return r.length?n.overlay=r.insertAfter(e(w).last()):(i=n.overlay=e("<div />",{id:s.substr(1),html:"<div></div>",mousedown:function(){return m}}).insertAfter(e(w).last()),e(window).unbind(l).bind("resize"+l,t),t(),i)},toggle:function(t,n,s){if(t&&t.isDefaultPrevented())return r;var l=a.effect,p=n?"show":"hide",h=i.is(":visible"),f=e("["+u+"]").filter(":visible").not(o);return i||(i=r.create()),i.is(":animated")&&h===n||!n&&f.length?r:(n?(i.css({left:0,top:0}),i.toggleClass("blurs",a.blur),c.bind("focusin"+d,function(t){var i=e(t.target),r=i.closest(".qtip"),a=r.length<1?m:parseInt(r[0].style.zIndex,10)>parseInt(o[0].style.zIndex,10);a||e(t.target).closest(w)[0]===o[0]||o.find("input:visible").filter(":first").focus()})):c.undelegate("*","focusin"+d),i.stop(g,m),e.isFunction(l)?l.call(i,n):l===m?i[p]():i.fadeTo(parseInt(s,10)||90,n?1:0,function(){n||e(this).hide()}),n||i.queue(function(e){i.css({left:"",top:""}),e()}),r)},show:function(e,t){return r.toggle(e,g,t)},hide:function(e,t){return r.toggle(e,m,t)},destroy:function(){var r=i;return r&&(r=e("["+u+"]").not(o).length<1,r?(n.overlay.remove(),e(window).unbind(l)):n.overlay.unbind(l+t.id),c.undelegate("*","focusin"+d)),o.removeAttr(u).unbind(l)}}),r.init()}function l(e,t,i){var r=Math.ceil(t/2),a=Math.ceil(i/2),n={bottomright:[[0,0],[t,i],[t,0]],bottomleft:[[0,0],[t,0],[0,i]],topright:[[0,i],[t,0],[t,i]],topleft:[[0,0],[0,i],[t,i]],topcenter:[[0,i],[r,0],[t,i]],bottomcenter:[[0,0],[t,0],[r,i]],rightcenter:[[0,0],[t,a],[0,i]],leftcenter:[[t,0],[t,i],[0,a]]};return n.lefttop=n.bottomright,n.righttop=n.bottomleft,n.leftbottom=n.topright,n.rightbottom=n.topleft,n[e.string()]}function d(t,i){function r(e,i,r,a){if(c.tip){var n,o,l=s.corner.clone(),p=r.adjusted,h=t.options.position.adjust.method.split(" "),v=h[0],b=h[1]||h[0],_={left:m,top:m,x:0,y:0},y={};s.corner.fixed!==g&&("shift"===v&&"x"===l.precedance&&p.left&&"center"!==l.y?l.precedance="x"===l.precedance?"y":"x":"flip"===v&&p.left&&(l.x="center"===l.x?p.left>0?"left":"right":"left"===l.x?"right":"left"),"shift"===b&&"y"===l.precedance&&p.top&&"center"!==l.x?l.precedance="y"===l.precedance?"x":"y":"flip"===b&&p.top&&(l.y="center"===l.y?p.top>0?"top":"bottom":"top"===l.y?"bottom":"top"),l.string()===f.corner.string()||f.top===p.top&&f.left===p.left||s.update(l,m)),n=s.position(l,p),n.right!==u&&(n.left=-n.right),n.bottom!==u&&(n.top=-n.bottom),n.user=Math.max(0,d.offset),(_.left="shift"===v&&!!p.left)&&("center"===l.x?y["margin-left"]=_.x=n["margin-left"]-p.left:(o=n.right!==u?[p.left,-n.left]:[-p.left,n.left],(_.x=Math.max(o[0],o[1]))>o[0]&&(r.left-=p.left,_.left=m),y[n.right!==u?"right":"left"]=_.x)),(_.top="shift"===b&&!!p.top)&&("center"===l.y?y["margin-top"]=_.y=n["margin-top"]-p.top:(o=n.bottom!==u?[p.top,-n.top]:[-p.top,n.top],(_.y=Math.max(o[0],o[1]))>o[0]&&(r.top-=p.top,_.top=m),y[n.bottom!==u?"bottom":"top"]=_.y)),c.tip.css(y).toggle(!(_.x&&_.y||"center"===l.x&&_.y||"center"===l.y&&_.x)),r.left-=n.left.charAt?n.user:"shift"!==v||_.top||!_.left&&!_.top?n.left:0,r.top-=n.top.charAt?n.user:"shift"!==b||_.left||!_.left&&!_.top?n.top:0,f.left=p.left,f.top=p.top,f.corner=l.clone()}}function a(e,t,i){t=t?t:e[e.precedance];var r,a=h.hasClass(D),n=c.titlebar&&"top"===e.y,o=n?c.titlebar:c.content,s="border-"+t+"-width";return h.addClass(D),r=parseInt(o.css(s),10),r=(i?r||parseInt(h.css(s),10):r)||0,h.toggleClass(D,a),r}function n(t){var i=c.titlebar&&"top"===t.y,r=i?c.titlebar:c.content,a=e.browser.mozilla,n=a?"-moz-":e.browser.webkit?"-webkit-":"",o=t.y+(a?"":"-")+t.x,s=n+(a?"border-radius-"+o:"border-"+o+"-radius");return parseInt(r.css(s),10)||parseInt(h.css(s),10)||0}function o(e){var t,i,r,a="y"===e.precedance,n=b[a?"width":"height"],o=b[a?"height":"width"],s=e.string().indexOf("center")>-1,l=n*(s?.5:1),d=Math.pow,u=Math.round,c=Math.sqrt(d(l,2)+d(o,2)),p=[y/l*c,y/o*c];return p[2]=Math.sqrt(d(p[0],2)-d(y,2)),p[3]=Math.sqrt(d(p[1],2)-d(y,2)),t=c+p[2]+p[3]+(s?0:p[0]),i=t/c,r=[u(i*o),u(i*n)],{height:r[a?0:1],width:r[a?1:0]}}var s=this,d=t.options.style.tip,c=t.elements,h=c.tooltip,f={top:0,left:0},b={width:d.width,height:d.height},_={},y=d.border||0,x=".qtip-tip",w=!!(e("<canvas />")[0]||{}).getContext;s.corner=v,s.mimic=v,s.border=y,s.offset=d.offset,s.size=b,t.checks.tip={"^position.my|style.tip.(corner|mimic|border)$":function(){s.init()||s.destroy(),t.reposition()},"^style.tip.(height|width)$":function(){b={width:d.width,height:d.height},s.create(),s.update(),t.reposition()},"^content.title.text|style.(classes|widget)$":function(){c.tip&&s.update()}},e.extend(s,{init:function(){var t=s.detectCorner()&&(w||e.browser.msie);return t&&(s.create(),s.update(),h.unbind(x).bind("tooltipmove"+x,r)),t},detectCorner:function(){var e=d.corner,i=t.options.position,r=i.at,a=i.my.string?i.my.string():i.my;return e===m||a===m&&r===m?m:(e===g?s.corner=new p.Corner(a):e.string||(s.corner=new p.Corner(e),s.corner.fixed=g),f.corner=new p.Corner(s.corner.string()),"centercenter"!==s.corner.string())},detectColours:function(i){var r,a,n=c.tip.css("cssText",""),o=i||s.corner,l=o[o.precedance],u="border-"+l+"-color",p="border"+l.charAt(0)+l.substr(1)+"Color",f=/rgba?\(0, 0, 0(, 0)?\)|transparent|#123456/i,g="background-color",m="transparent",v=" !important",y=e(document.body).css("color"),x=(t.elements.content.css("color"),c.titlebar&&("top"===o.y||"center"===o.y&&n.position().top+b.height/2+d.offset<c.titlebar.outerHeight(1))),w=x?c.titlebar:c.content;h.addClass(D),_.fill=r=n.css(g),_.border=a=n[0].style[p]||n.css(u)||h.css(u),r&&!f.test(r)||(_.fill=w.css(g)||m,f.test(_.fill)&&(_.fill=h.css(g)||r)),a&&!f.test(a)&&a!==y||(_.border=w.css(u)||m,f.test(_.border)&&(_.border=a)),e("*",n).add(n).css("cssText",g+":"+m+v+";border:0"+v+";"),h.removeClass(D)},create:function(){var t,i=b.width,r=b.height;c.tip&&c.tip.remove(),c.tip=e("<div />",{"class":"ui-tooltip-tip"}).css({width:i,height:r}).prependTo(h),w?e("<canvas />").appendTo(c.tip)[0].getContext("2d").save():(t='<vml:shape coordorigin="0,0" style="display:inline-block; position:absolute; behavior:url(#default#VML);"></vml:shape>',c.tip.html(t+t),e("*",c.tip).bind("click mousedown",function(e){e.stopPropagation()}))},update:function(t,i){var r,n,u,h,x,j=c.tip,k=j.children(),C=b.width,D=b.height,S=d.mimic,T=Math.round;t||(t=f.corner||s.corner),S===m?S=t:(S=new p.Corner(S),S.precedance=t.precedance,"inherit"===S.x?S.x=t.x:"inherit"===S.y?S.y=t.y:S.x===S.y&&(S[t.precedance]=t[t.precedance])),r=S.precedance,s.detectColours(t),"transparent"!==_.border&&"#123456"!==_.border?(y=a(t,v,g),0===d.border&&y>0&&(_.fill=_.border),s.border=y=d.border!==g?d.border:y):s.border=y=0,u=l(S,C,D),s.size=x=o(t),j.css(x),h="y"===t.precedance?[T("left"===S.x?y:"right"===S.x?x.width-C-y:(x.width-C)/2),T("top"===S.y?x.height-D:0)]:[T("left"===S.x?x.width-C:0),T("top"===S.y?y:"bottom"===S.y?x.height-D-y:(x.height-D)/2)],w?(k.attr(x),n=k[0].getContext("2d"),n.restore(),n.save(),n.clearRect(0,0,3e3,3e3),n.translate(h[0],h[1]),n.beginPath(),n.moveTo(u[0][0],u[0][1]),n.lineTo(u[1][0],u[1][1]),n.lineTo(u[2][0],u[2][1]),n.closePath(),n.fillStyle=_.fill,n.strokeStyle=_.border,n.lineWidth=2*y,n.lineJoin="miter",n.miterLimit=100,y&&n.stroke(),n.fill()):(u="m"+u[0][0]+","+u[0][1]+" l"+u[1][0]+","+u[1][1]+" "+u[2][0]+","+u[2][1]+" xe",h[2]=y&&/^(r|b)/i.test(t.string())?8===parseFloat(e.browser.version,10)?2:1:0,k.css({antialias:""+(S.string().indexOf("center")>-1),left:h[0]-h[2]*Number("x"===r),top:h[1]-h[2]*Number("y"===r),width:C+y,height:D+y}).each(function(t){var i=e(this);i[i.prop?"prop":"attr"]({coordsize:C+y+" "+(D+y),path:u,fillcolor:_.fill,filled:!!t,stroked:!t}).css({display:y||t?"block":"none"}),t||""!==i.html()||i.html('<vml:stroke weight="'+2*y+'px" color="'+_.border+'" miterlimit="1000" joinstyle="miter"  style="behavior:url(#default#VML); display:inline-block;" />')})),i!==m&&s.position(t)},position:function(t){var i,r,l,u=c.tip,p={},h=Math.max(0,d.offset);return d.corner!==m&&u?(t=t||s.corner,i=t.precedance,r=o(t),l=[t.x,t.y],"x"===i&&l.reverse(),e.each(l,function(e,o){var s,l;"center"===o?(s="y"===i?"left":"top",p[s]="50%",p["margin-"+s]=-Math.round(r["y"===i?"width":"height"]/2)+h):(s=a(t,o,g),l=n(t),p[o]=e?y?a(t,o):0:h+(l>s?l:0))}),p[t[i]]-=r["x"===i?"width":"height"],u.css({top:"",bottom:"",left:"",right:"",margin:""}).css(p),p):m},destroy:function(){c.tip&&c.tip.remove(),h.unbind(x)}}),s.init()}var u,c,p,h,f,g=!0,m=!1,v=null,b={},_="ui-tooltip",y="ui-widget",x="ui-state-disabled",w="div.qtip."+_,j=_+"-default",k=_+"-focus",C=_+"-hover",D=_+"-fluid",S="_replacedByqTip",T="oldtitle";c=e.fn.qtip=function(t,r,a){var n=(""+t).toLowerCase(),o=v,s=e.makeArray(arguments).slice(1),l=s[s.length-1],d=this[0]?e.data(this[0],"qtip"):v;return!arguments.length&&d||"api"===n?d:"string"==typeof t?(this.each(function(){var t=e.data(this,"qtip");if(!t)return g;if(l&&l.timeStamp&&(t.cache.event=l),"option"!==n&&"options"!==n||!r)t[n]&&t[n].apply(t[n],s);else{if(!e.isPlainObject(r)&&a===u)return o=t.get(r),m;t.set(r,a)}}),o!==v?o:this):"object"!=typeof t&&arguments.length?void 0:(d=i(e.extend(g,{},t)),c.bind.call(this,d,l))},c.bind=function(t,i){return this.each(function(r){function n(t){function i(){f.render("object"==typeof t||o.show.ready),s.show.add(s.hide).unbind(d)}return f.cache.disabled?m:(f.cache.event=e.extend({},t),f.cache.target=t?e(t.target):[u],void(o.show.delay>0?(clearTimeout(f.timers.show),f.timers.show=setTimeout(i,o.show.delay),l.show!==l.hide&&s.hide.bind(l.hide,function(){clearTimeout(f.timers.show)})):i()))}var o,s,l,d,f,v;return v=e.isArray(t.id)?t.id[r]:t.id,v=!v||v===m||v.length<1||b[v]?c.nextid++:b[v]=v,d=".qtip-"+v+"-create",f=a.call(this,v,t),f===m?g:(o=f.options,e.each(p,function(){"initialize"===this.initialize&&this(f)}),s={show:o.show.target,hide:o.hide.target},l={show:e.trim(""+o.show.event).replace(/ /g,d+" ")+d,hide:e.trim(""+o.hide.event).replace(/ /g,d+" ")+d
},/mouse(over|enter)/i.test(l.show)&&!/mouse(out|leave)/i.test(l.hide)&&(l.hide+=" mouseleave"+d),s.show.bind("mousemove"+d,function(e){h={pageX:e.pageX,pageY:e.pageY,type:"mousemove"},f.cache.onTarget=g}),s.show.bind(l.show,n),void((o.show.ready||o.prerender)&&n(i)))})},p=c.plugins={Corner:function(e){e=(""+e).replace(/([A-Z])/," $1").replace(/middle/gi,"center").toLowerCase(),this.x=(e.match(/left|right/i)||e.match(/center/)||["inherit"])[0].toLowerCase(),this.y=(e.match(/top|bottom|center/i)||["inherit"])[0].toLowerCase();var t=e.charAt(0);this.precedance="t"===t||"b"===t?"y":"x",this.string=function(){return"y"===this.precedance?this.y+this.x:this.x+this.y},this.abbrev=function(){var e=this.x.substr(0,1),t=this.y.substr(0,1);return e===t?e:"c"===e||"c"!==e&&"c"!==t?t+e:e+t},this.clone=function(){return{x:this.x,y:this.y,precedance:this.precedance,string:this.string,abbrev:this.abbrev,clone:this.clone}}},offset:function(t,i){function r(e,t){s.left+=t*e.scrollLeft(),s.top+=t*e.scrollTop()}var a,n,o,s=t.offset(),l=t.closest("body")[0],d=i;if(d){do"static"!==d.css("position")&&(n=d.position(),s.left-=n.left+(parseInt(d.css("borderLeftWidth"),10)||0)+(parseInt(d.css("marginLeft"),10)||0),s.top-=n.top+(parseInt(d.css("borderTopWidth"),10)||0)+(parseInt(d.css("marginTop"),10)||0),a||"hidden"===(o=d.css("overflow"))||"visible"===o||(a=d));while((d=e(d[0].offsetParent)).length);a&&a[0]!==l&&r(a,1)}return s},iOS:parseFloat((""+(/CPU.*OS ([0-9_]{1,3})|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_","."))||m,fn:{attr:function(t,i){if(this.length){var r=this[0],a="title",n=e.data(r,"qtip");if(t===a&&n&&"object"==typeof n&&n.options.suppress)return arguments.length<2?e.attr(r,T):(n&&n.options.content.attr===a&&n.cache.attr&&n.set("content.text",i),this.attr(T,i))}return e.fn["attr"+S].apply(this,arguments)},clone:function(t){var i=(e([]),e.fn["clone"+S].apply(this,arguments));return t||i.filter("["+T+"]").attr("title",function(){return e.attr(this,T)}).removeAttr(T),i}}},e.each(p.fn,function(t,i){if(!i||e.fn[t+S])return g;var r=e.fn[t+S]=e.fn[t];e.fn[t]=function(){return i.apply(this,arguments)||r.apply(this,arguments)}}),e.ui||(e["cleanData"+S]=e.cleanData,e.cleanData=function(t){for(var i,r=0;(i=t[r])!==u;r++)try{e(i).triggerHandler("removeqtip")}catch(a){}e["cleanData"+S](t)}),c.version="2.0.0pre",c.nextid=0,c.inactiveEvents="click dblclick mousedown mouseup mousemove mouseleave mouseenter".split(" "),c.zindex=15e3,c.defaults={prerender:m,id:m,overwrite:g,suppress:g,content:{text:g,attr:"title",title:{text:m,button:m}},position:{my:"top left",at:"bottom right",target:m,container:m,viewport:m,adjust:{x:0,y:0,mouse:g,resize:g,method:"flip flip"},effect:function(t,i,r){e(this).animate(i,{duration:200,queue:m})}},show:{target:m,event:"mouseenter",effect:g,delay:90,solo:m,ready:m,autofocus:m},hide:{target:m,event:"mouseleave",effect:g,delay:0,fixed:m,inactive:m,leave:"window",distance:m},style:{classes:"",widget:m,width:m,height:m,def:g},events:{render:v,move:v,show:v,hide:v,toggle:v,visible:v,focus:v,blur:v}},p.ajax=function(e){var t=e.plugins.ajax;return"object"==typeof t?t:e.plugins.ajax=new n(e)},p.ajax.initialize="render",p.ajax.sanitize=function(e){var t,i=e.content;i&&"ajax"in i&&(t=i.ajax,"object"!=typeof t&&(t=e.content.ajax={url:t}),"boolean"!=typeof t.once&&t.once&&(t.once=!!t.once))},e.extend(g,c.defaults,{content:{ajax:{loading:g,once:g}}}),p.bgiframe=function(t){var i=e.browser,r=t.plugins.bgiframe;return e("select, object").length<1||!i.msie||"6"!==(""+i.version).charAt(0)?m:"object"==typeof r?r:t.plugins.bgiframe=new o(t)},p.bgiframe.initialize="render",p.imagemap=function(t,i,r){function a(e,t,i){for(var r=0,a=1,n=1,o=0,s=0,l=e.width,d=e.height;l>0&&d>0&&a>0&&n>0;)for(l=Math.floor(l/2),d=Math.floor(d/2),"left"===i.x?a=l:"right"===i.x?a=e.width-l:a+=Math.floor(l/2),"top"===i.y?n=d:"bottom"===i.y?n=e.height-d:n+=Math.floor(d/2),r=t.length;r--&&!(t.length<2);)o=t[r][0]-e.offset.left,s=t[r][1]-e.offset.top,("left"===i.x&&o>=a||"right"===i.x&&o<=a||"center"===i.x&&(o<a||o>e.width-a)||"top"===i.y&&s>=n||"bottom"===i.y&&s<=n||"center"===i.y&&(s<n||s>e.height-n))&&t.splice(r,1);return{left:t[0][0],top:t[0][1]}}t.jquery||(t=e(t));var n=(t[0].shape||t.attr("shape")).toLowerCase(),o=(t[0].coords||t.attr("coords")).split(","),s=[],l=e('img[usemap="#'+t.parent("map").attr("name")+'"]'),d=l.offset(),u={width:0,height:0,offset:{top:1e10,right:0,bottom:0,left:1e10}},c=0,p=0;if(d.left+=Math.ceil((l.outerWidth()-l.width())/2),d.top+=Math.ceil((l.outerHeight()-l.height())/2),"poly"===n)for(c=o.length;c--;)p=[parseInt(o[--c],10),parseInt(o[c+1],10)],p[0]>u.offset.right&&(u.offset.right=p[0]),p[0]<u.offset.left&&(u.offset.left=p[0]),p[1]>u.offset.bottom&&(u.offset.bottom=p[1]),p[1]<u.offset.top&&(u.offset.top=p[1]),s.push(p);else s=e.map(o,function(e){return parseInt(e,10)});switch(n){case"rect":u={width:Math.abs(s[2]-s[0]),height:Math.abs(s[3]-s[1]),offset:{left:Math.min(s[0],s[2]),top:Math.min(s[1],s[3])}};break;case"circle":u={width:s[2]+2,height:s[2]+2,offset:{left:s[0],top:s[1]}};break;case"poly":e.extend(u,{width:Math.abs(u.offset.right-u.offset.left),height:Math.abs(u.offset.bottom-u.offset.top)}),"centercenter"===i.string()?u.offset={left:u.offset.left+u.width/2,top:u.offset.top+u.height/2}:(u.offset=a(u,s.slice(),i),!r||"flip"!==r[0]&&"flip"!==r[1]||(u.flipoffset=a(u,s.slice(),{x:"left"===i.x?"right":"right"===i.x?"left":"center",y:"top"===i.y?"bottom":"bottom"===i.y?"top":"center"}),u.flipoffset.left-=u.offset.left,u.flipoffset.top-=u.offset.top)),u.width=u.height=0}return u.offset.left+=d.left,u.offset.top+=d.top,u},p.modal=function(e){var t=e.plugins.modal;return"object"==typeof t?t:e.plugins.modal=new s(e)},p.modal.initialize="render",p.modal.sanitize=function(e){e.show&&("object"!=typeof e.show.modal?e.show.modal={on:!!e.show.modal}:"undefined"==typeof e.show.modal.on&&(e.show.modal.on=g))},p.modal.zindex=c.zindex+1e3,e.extend(g,c.defaults,{show:{modal:{on:m,effect:g,blur:g,escape:g}}}),p.svg=function(t,i){var r,a,n,o,s,l=e(document),d=t[0],u={width:0,height:0,offset:{top:1e10,left:1e10}};if(d.getBBox&&d.parentNode){if(r=d.getBBox(),a=d.getScreenCTM(),n=d.farthestViewportElement||d,!n.createSVGPoint)return u;o=n.createSVGPoint(),o.x=r.x,o.y=r.y,s=o.matrixTransform(a),u.offset.left=s.x,u.offset.top=s.y,o.x+=r.width,o.y+=r.height,s=o.matrixTransform(a),u.width=s.x-u.offset.left,u.height=s.y-u.offset.top,u.offset.left+=l.scrollLeft(),u.offset.top+=l.scrollTop()}return u},p.tip=function(e){var t=e.plugins.tip;return"object"==typeof t?t:e.plugins.tip=new d(e)},p.tip.initialize="render",p.tip.sanitize=function(e){var t,i=e.style;i&&"tip"in i&&(t=e.style.tip,"object"!=typeof t&&(e.style.tip={corner:t}),/string|boolean/i.test(typeof t.corner)||(t.corner=g),"number"!=typeof t.width&&delete t.width,"number"!=typeof t.height&&delete t.height,"number"!=typeof t.border&&t.border!==g&&delete t.border,"number"!=typeof t.offset&&delete t.offset)},e.extend(g,c.defaults,{style:{tip:{corner:g,mimic:m,width:6,height:6,border:g,offset:0}}})}),function(e,t){function i(e,t){for(var i=decodeURI(e),r=s[t?"strict":"loose"].exec(i),a={attr:{},param:{},seg:{}},o=14;o--;)a.attr[n[o]]=r[o]||"";return a.param.query={},a.param.fragment={},a.attr.query.replace(l,function(e,t,i){t&&(a.param.query[t]=i)}),a.attr.fragment.replace(d,function(e,t,i){t&&(a.param.fragment[t]=i)}),a.seg.path=a.attr.path.replace(/^\/+|\/+$/g,"").split("/"),a.seg.fragment=a.attr.fragment.replace(/^\/+|\/+$/g,"").split("/"),a.attr.base=a.attr.host?a.attr.protocol+"://"+a.attr.host+(a.attr.port?":"+a.attr.port:""):"",a}function r(e){var i=e.tagName;return i!==t?a[i.toLowerCase()]:i}var a={a:"href",img:"src",form:"action",base:"href",script:"src",iframe:"src",link:"href"},n=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","fragment"],o={anchor:"fragment"},s={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},l=/(?:^|&|;)([^&=;]*)=?([^&;]*)/g,d=/(?:^|&|;)([^&=;]*)=?([^&;]*)/g;e.fn.url=function(t){var i="";return this.length&&(i=e(this).attr(r(this[0]))||""),e.url(i,t)},e.url=function(e,r){return 1===arguments.length&&e===!0&&(r=!0,e=t),r=r||!1,e=e||window.location.toString(),{data:i(e,r),attr:function(e){return e=o[e]||e,e!==t?this.data.attr[e]:this.data.attr},param:function(e){return e!==t?this.data.param.query[e]:this.data.param.query},fparam:function(e){return e!==t?this.data.param.fragment[e]:this.data.param.fragment},segment:function(e){return e===t?this.data.seg.path:(e=e<0?this.data.seg.path.length+e:e-1,this.data.seg.path[e])},fsegment:function(e){return e===t?this.data.seg.fragment:(e=e<0?this.data.seg.fragment.length+e:e-1,this.data.seg.fragment[e])}}}}(jQuery),/**
 * jQuery Validation Plugin 1.9.0
 *
 * http://bassistance.de/jquery-plugins/jquery-plugin-validation/
 * http://docs.jquery.com/Plugins/Validation
 *
 * Copyright (c) 2006 - 2011 Jörn Zaefferer
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */
function(e){e.extend(e.fn,{validate:function(t){if(!this.length)return void(t&&t.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing"));var i=e.data(this[0],"validator");if(i)return i;if(this.attr("novalidate","novalidate"),i=new e.validator(t,this[0]),e.data(this[0],"validator",i),i.settings.onsubmit){var r=this.find("input, button");r.filter(".cancel").click(function(){i.cancelSubmit=!0}),i.settings.submitHandler&&r.filter(":submit").click(function(){i.submitButton=this}),this.submit(function(t){function r(){if(i.settings.submitHandler){if(i.submitButton)var t=e("<input type='hidden'/>").attr("name",i.submitButton.name).val(i.submitButton.value).appendTo(i.currentForm);return i.settings.submitHandler.call(i,i.currentForm),i.submitButton&&t.remove(),!1}return!0}return i.settings.debug&&t.preventDefault(),i.cancelSubmit?(i.cancelSubmit=!1,r()):i.form()?i.pendingRequest?(i.formSubmitted=!0,!1):r():(i.focusInvalid(),!1)})}return i},valid:function(){if(e(this[0]).is("form"))return this.validate().form();var t=!0,i=e(this[0].form).validate();return this.each(function(){t&=i.element(this)}),t},removeAttrs:function(t){var i={},r=this;return e.each(t.split(/\s/),function(e,t){i[t]=r.attr(t),r.removeAttr(t)}),i},rules:function(t,i){var r=this[0];if(t){var a=e.data(r.form,"validator").settings,n=a.rules,o=e.validator.staticRules(r);switch(t){case"add":e.extend(o,e.validator.normalizeRule(i)),n[r.name]=o,i.messages&&(a.messages[r.name]=e.extend(a.messages[r.name],i.messages));break;case"remove":if(!i)return delete n[r.name],o;var s={};return e.each(i.split(/\s/),function(e,t){s[t]=o[t],delete o[t]}),s}}var l=e.validator.normalizeRules(e.extend({},e.validator.metadataRules(r),e.validator.classRules(r),e.validator.attributeRules(r),e.validator.staticRules(r)),r);if(l.required){var d=l.required;delete l.required,l=e.extend({required:d},l)}return l}}),e.extend(e.expr[":"],{blank:function(t){return!e.trim(""+t.value)},filled:function(t){return!!e.trim(""+t.value)},unchecked:function(e){return!e.checked}}),e.validator=function(t,i){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=i,this.init()},e.validator.format=function(t,i){return 1==arguments.length?function(){var i=e.makeArray(arguments);return i.unshift(t),e.validator.format.apply(this,i)}:(arguments.length>2&&i.constructor!=Array&&(i=e.makeArray(arguments).slice(1)),i.constructor!=Array&&(i=[i]),e.each(i,function(e,i){t=t.replace(new RegExp("\\{"+e+"\\}","g"),i)}),t)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e,t){this.lastActive=e,this.settings.focusCleanup&&!this.blockFocusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.addWrapper(this.errorsFor(e)).hide())},onfocusout:function(e,t){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(e,t){(e.name in this.submitted||e==this.lastElement)&&this.element(e)},onclick:function(e,t){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(t,i,r){"radio"===t.type?this.findByName(t.name).addClass(i).removeClass(r):e(t).addClass(i).removeClass(r)},unhighlight:function(t,i,r){"radio"===t.type?this.findByName(t.name).removeClass(i).addClass(r):e(t).removeClass(i).addClass(r)}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:e.validator.format("Please enter no more than {0} characters."),minlength:e.validator.format("Please enter at least {0} characters."),rangelength:e.validator.format("Please enter a value between {0} and {1} characters long."),range:e.validator.format("Please enter a value between {0} and {1}."),max:e.validator.format("Please enter a value less than or equal to {0}."),min:e.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function t(t){var i=e.data(this[0].form,"validator"),r="on"+t.type.replace(/^validate/,"");i.settings[r]&&i.settings[r].call(i,this[0],t)}this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i=this.groups={};e.each(this.settings.groups,function(t,r){e.each(r.split(/\s/),function(e,r){i[r]=t})});var r=this.settings.rules;e.each(r,function(t,i){r[t]=e.validator.normalizeRule(i)}),e(this.currentForm).validateDelegate("[type='text'], [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",t).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",t),this.settings.invalidHandler&&e(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(t){t=this.validationTargetFor(this.clean(t)),this.lastElement=t,this.prepareElement(t),this.currentElements=e(t);var i=this.check(t);return i?delete this.invalid[t.name]:this.invalid[t.name]=!0,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),i},showErrors:function(t){if(t){e.extend(this.errorMap,t),this.errorList=[];for(var i in t)this.errorList.push({message:t[i],element:this.findByName(i)[0]});this.successList=e.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t=0;for(var i in e)t++;return t},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return 0==this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var t=this.lastActive;return t&&1==e.grep(this.errorList,function(e){return e.element.name==t.name}).length&&t},elements:function(){var t=this,i={},r=e(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){return!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),!(this.name in i||!t.objectLength(e(this).rules()))&&(i[this.name]=!0,!0)});return r},clean:function(t){return e(t)[0]},errors:function(){return e(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([]),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},check:function(t){t=this.validationTargetFor(this.clean(t));var i=e(t).rules(),r=!1;for(var a in i){var n={method:a,parameters:i[a]};try{var o=e.validator.methods[a].call(this,t.value.replace(/\r/g,""),t,n.parameters);if("dependency-mismatch"==o){r=!0;continue}if(r=!1,"pending"==o)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!o)return this.formatAndAdd(t,n),!1}catch(s){throw this.settings.debug&&window.console&&console.log("exception occured when checking element "+t.id+", check the '"+n.method+"' method",s),s}}if(!r)return this.objectLength(i)&&this.successList.push(t),!0},customMetaMessage:function(t,i){if(e.metadata){var r=this.settings.meta?e(t).metadata()[this.settings.meta]:e(t).metadata();return r&&r.messages&&r.messages[i]}},customMessage:function(e,t){var i=this.settings.messages[e];return i&&(i.constructor==String?i:i[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]},defaultMessage:function(t,i){return this.findDefined(this.customMessage(t.name,i),this.customMetaMessage(t,i),!this.settings.ignoreTitle&&t.title||void 0,e.validator.messages[i],"<strong>Warning: No message defined for "+t.name+"</strong>")},formatAndAdd:function(e,t){var i=this.defaultMessage(e,t.method),r=/\$?\{(\d+)\}/g;"function"==typeof i?i=i.call(this,t.parameters,e):r.test(i)&&(i=jQuery.format(i.replace(r,"{$1}"),t.parameters)),this.errorList.push({message:i,element:e}),this.errorMap[e.name]=i,this.submitted[e.name]=i},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){for(var e=0;this.errorList[e];e++){var t=this.errorList[e];this.settings.highlight&&this.settings.highlight.call(this,t.element,this.settings.errorClass,this.settings.validClass),this.showLabel(t.element,t.message)}if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(var e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(var e=0,i=this.validElements();i[e];e++)this.settings.unhighlight.call(this,i[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map(function(){return this.element})},showLabel:function(t,i){var r=this.errorsFor(t);r.length?(r.removeClass(this.settings.validClass).addClass(this.settings.errorClass),r.attr("generated")&&r.html(i)):(r=e("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(t),generated:!0}).addClass(this.settings.errorClass).html(i||""),this.settings.wrapper&&(r=r.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(r).length||(this.settings.errorPlacement?this.settings.errorPlacement(r,e(t)):r.insertAfter(t))),!i&&this.settings.success&&(r.text(""),"string"==typeof this.settings.success?r.addClass(this.settings.success):this.settings.success(r)),this.toShow=this.toShow.add(r)},errorsFor:function(t){var i=this.idOrName(t);return this.errors().filter(function(){return e(this).attr("for")==i})},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name).not(this.settings.ignore)[0]),e},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(t){var i=this.currentForm;return e(document.getElementsByName(t)).map(function(e,r){return r.form==i&&r.name==t&&r||null})},getLength:function(t,i){switch(i.nodeName.toLowerCase()){case"select":return e("option:selected",i).length;case"input":if(this.checkable(i))return this.findByName(i.name).filter(":checked").length}return t.length},depend:function(e,t){return!this.dependTypes[typeof e]||this.dependTypes[typeof e](e,t)},dependTypes:{"boolean":function(e,t){return e},string:function(t,i){return!!e(t,i.form).length},"function":function(e,t){return e(t)}},optional:function(t){return!e.validator.methods.required.call(this,e.trim(t.value),t)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,this.pending[e.name]=!0)},stopRequest:function(t,i){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],i&&0==this.pendingRequest&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.formSubmitted=!1):!i&&0==this.pendingRequest&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},dateDE:{dateDE:!0},number:{number:!0},numberDE:{numberDE:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,i){t.constructor==String?this.classRuleSettings[t]=i:e.extend(this.classRuleSettings,t)},classRules:function(t){var i={},r=e(t).attr("class");return r&&e.each(r.split(" "),function(){this in e.validator.classRuleSettings&&e.extend(i,e.validator.classRuleSettings[this])}),i},attributeRules:function(t){var i={},r=e(t);for(var a in e.validator.methods){var n;n="required"===a&&"function"==typeof e.fn.prop?r.prop(a):r.attr(a),n?i[a]=n:r[0].getAttribute("type")===a&&(i[a]=!0)}return i.maxlength&&/-1|2147483647|524288/.test(i.maxlength)&&delete i.maxlength,i},metadataRules:function(t){if(!e.metadata)return{};var i=e.data(t.form,"validator").settings.meta;return i?e(t).metadata()[i]:e(t).metadata()},staticRules:function(t){var i={},r=e.data(t.form,"validator");return r.settings.rules&&(i=e.validator.normalizeRule(r.settings.rules[t.name])||{}),i},normalizeRules:function(t,i){return e.each(t,function(r,a){if(a===!1)return void delete t[r];if(a.param||a.depends){var n=!0;switch(typeof a.depends){case"string":n=!!e(a.depends,i.form).length;break;case"function":n=a.depends.call(i,i)}n?t[r]=void 0===a.param||a.param:delete t[r]}}),e.each(t,function(r,a){t[r]=e.isFunction(a)?a(i):a}),e.each(["minlength","maxlength","min","max"],function(){t[this]&&(t[this]=Number(t[this]))}),e.each(["rangelength","range"],function(){t[this]&&(t[this]=[Number(t[this][0]),Number(t[this][1])])}),e.validator.autoCreateRanges&&(t.min&&t.max&&(t.range=[t.min,t.max],delete t.min,delete t.max),t.minlength&&t.maxlength&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t.messages&&delete t.messages,t},normalizeRule:function(t){if("string"==typeof t){var i={};e.each(t.split(/\s/),function(){i[this]=!0}),t=i}return t},addMethod:function(t,i,r){e.validator.methods[t]=i,e.validator.messages[t]=void 0!=r?r:e.validator.messages[t],i.length<3&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,i,r){if(!this.depend(r,i))return"dependency-mismatch";switch(i.nodeName.toLowerCase()){case"select":var a=e(i).val();return a&&a.length>0;case"input":if(this.checkable(i))return this.getLength(t,i)>0;default:return e.trim(t).length>0}},remote:function(t,i,r){if(this.optional(i))return"dependency-mismatch";var a=this.previousValue(i);if(this.settings.messages[i.name]||(this.settings.messages[i.name]={}),a.originalMessage=this.settings.messages[i.name].remote,this.settings.messages[i.name].remote=a.message,r="string"==typeof r&&{url:r}||r,this.pending[i.name])return"pending";if(a.old===t)return a.valid;a.old=t;var n=this;this.startRequest(i);var o={};return o[i.name]=t,e.ajax(e.extend(!0,{url:r,mode:"abort",port:"validate"+i.name,dataType:"json",data:o,success:function(r){n.settings.messages[i.name].remote=a.originalMessage;var o=r===!0;if(o){var s=n.formSubmitted;n.prepareElement(i),n.formSubmitted=s,n.successList.push(i),n.showErrors()}else{var l={},d=r||n.defaultMessage(i,"remote");l[i.name]=a.message=e.isFunction(d)?d(t):d,n.showErrors(l)}a.valid=o,n.stopRequest(i,o)}},r)),"pending"},minlength:function(t,i,r){return this.optional(i)||this.getLength(e.trim(t),i)>=r},maxlength:function(t,i,r){return this.optional(i)||this.getLength(e.trim(t),i)<=r},rangelength:function(t,i,r){var a=this.getLength(e.trim(t),i);return this.optional(i)||a>=r[0]&&a<=r[1]},min:function(e,t,i){return this.optional(t)||e>=i},max:function(e,t,i){return this.optional(t)||e<=i},range:function(e,t,i){return this.optional(t)||e>=i[0]&&e<=i[1]},email:function(e,t){return this.optional(t)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e)},url:function(e,t){return this.optional(t)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(e))},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(e)},number:function(e,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},creditcard:function(e,t){if(this.optional(t))return"dependency-mismatch";if(/[^0-9 -]+/.test(e))return!1;var i=0,r=0,a=!1;e=e.replace(/\D/g,"");for(var n=e.length-1;n>=0;n--){var o=e.charAt(n),r=parseInt(o,10);a&&(r*=2)>9&&(r-=9),i+=r,a=!a}return i%10==0},accept:function(e,t,i){return i="string"==typeof i?i.replace(/,/g,"|"):"png|jpe?g|gif",this.optional(t)||e.match(new RegExp(".("+i+")$","i"))},equalTo:function(t,i,r){var a=e(r).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){e(i).valid()});return t==a.val()}}}),e.format=e.validator.format}(jQuery),function(e){var t={};if(e.ajaxPrefilter)e.ajaxPrefilter(function(e,i,r){var a=e.port;"abort"==e.mode&&(t[a]&&t[a].abort(),t[a]=r)});else{var i=e.ajax;e.ajax=function(r){var a=("mode"in r?r:e.ajaxSettings).mode,n=("port"in r?r:e.ajaxSettings).port;return"abort"==a?(t[n]&&t[n].abort(),t[n]=i.apply(this,arguments)):i.apply(this,arguments)}}}(jQuery),function(e){jQuery.event.special.focusin||jQuery.event.special.focusout||!document.addEventListener||e.each({focus:"focusin",blur:"focusout"},function(t,i){function r(t){return t=e.event.fix(t),t.type=i,e.event.handle.call(this,t)}e.event.special[i]={setup:function(){this.addEventListener(t,r,!0)},teardown:function(){this.removeEventListener(t,r,!0)},handler:function(t){return arguments[0]=e.event.fix(t),arguments[0].type=i,e.event.handle.apply(this,arguments)}}}),e.extend(e.fn,{validateDelegate:function(t,i,r){return this.bind(i,function(i){var a=e(i.target);if(a.is(t))return r.apply(a,arguments)})}})}(jQuery),/*
 * jQuery XDomainRequest Transport Plugin 1.0.1
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2011, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://creativecommons.org/licenses/MIT/
 *
 * Based on Julian Aubourg's ajaxHooks xdr.js:
 * https://github.com/jaubourg/ajaxHooks/
 */
function(e){"use strict";window.XDomainRequest&&jQuery.ajaxTransport(function(e){if(e.crossDomain&&e.async){e.timeout&&(e.xdrTimeout=e.timeout,delete e.timeout);var t;return{send:function(i,r){function a(e,i,a,n){t.onload=t.onerror=t.ontimeout=jQuery.noop,t=null,r(e,i,a,n)}t=new XDomainRequest,"DELETE"===e.type?(e.url=e.url+(/\?/.test(e.url)?"&":"?")+"_method=DELETE",e.type="POST"):"PUT"===e.type&&(e.url=e.url+(/\?/.test(e.url)?"&":"?")+"_method=PUT",e.type="POST"),t.open(e.type,e.url),t.onload=function(){a(200,"OK",{text:t.responseText},"Content-Type: "+t.contentType)},t.onerror=function(){a(404,"Not Found")},e.xdrTimeout&&(t.ontimeout=function(){a(0,"timeout")},t.timeout=e.xdrTimeout),t.send(e.hasContent&&e.data||null)},abort:function(){t&&(t.onerror=jQuery.noop(),t.abort())}}}})}(jQuery),function(e){e.fn.xBreadcrumbs=function(t){function i(){if(t.collapsible){var i=o.children("LI").length;o.children("LI").children("A").css("white-space","nowrap").css("float","left"),o.children("LI").children("A").each(function(r,a){r!=i-1&&(e(this).css("overflow","hidden"),e(this).attr("init-width",e(this).width()),e(this).width(t.collapsedWidth))})}o.children("LI").mouseenter(function(){if(!e(this).hasClass("hover")&&(r(),n(e(this)))){var i=e(this).children("UL");if(a(i,!0),t.collapsible&&!e(this).hasClass("current")){var o=e(this).children("A").attr("init-width");e(this).children("A").animate({width:o},"normal")}}}),o.children("LI").mouseleave(function(){var i=e(this).children("UL");a(i,!1),t.collapsible&&!e(this).hasClass("current")&&e(this).children("A").animate({width:t.collapsedWidth},"fast")})}function r(){o.children("LI").children("UL").each(function(){e(this).hide(),e(this).parent().removeClass("hover")})}function a(i,r){if(r){if(i.parent().addClass("hover"),e.browser.msie){var a=i.parent().position();i.css("left",parseInt(a.left))}""!=t.showSpeed?i.fadeIn(t.showSpeed):i.show()}else i.parent().removeClass("hover"),""!=t.hideSpeed?i.fadeOut(t.hideSpeed):i.hide()}function n(e){return e.children("UL").length>0}var o=e(this),t=e.extend({},e.fn.xBreadcrumbs.defaults,t);i()},e.fn.xBreadcrumbs.defaults={showSpeed:"fast",hideSpeed:"",collapsible:!1,collapsedWidth:10}}(jQuery),function(){if(!jQuery||!jQuery.jstree){var e=!1,t=!1,i=!1;!function(r){r.vakata={},r.vakata.css={get_css:function(e,t,i){e=e.toLowerCase();var r=i.cssRules||i.rules,a=0;do{if(r.length&&a>r.length+5)return!1;if(r[a].selectorText&&r[a].selectorText.toLowerCase()==e)return t===!0?(i.removeRule&&i.removeRule(a),i.deleteRule&&i.deleteRule(a),!0):r[a]}while(r[++a]);return!1},add_css:function(e,t){return!r.jstree.css.get_css(e,!1,t)&&(t.insertRule?t.insertRule(e+" { }",0):t.addRule(e,null,0),r.vakata.css.get_css(e))},remove_css:function(e,t){return r.vakata.css.get_css(e,!0,t)},add_sheet:function(e){var t=!1,i=!0;if(e.str)return e.title&&(t=r("style[id='"+e.title+"-stylesheet']")[0]),t?i=!1:(t=document.createElement("style"),t.setAttribute("type","text/css"),e.title&&t.setAttribute("id",e.title+"-stylesheet")),t.styleSheet?i?(document.getElementsByTagName("head")[0].appendChild(t),t.styleSheet.cssText=e.str):t.styleSheet.cssText=t.styleSheet.cssText+" "+e.str:(t.appendChild(document.createTextNode(e.str)),document.getElementsByTagName("head")[0].appendChild(t)),t.sheet||t.styleSheet;if(e.url){if(!document.createStyleSheet)return t=document.createElement("link"),t.rel="stylesheet",t.type="text/css",t.media="all",t.href=e.url,document.getElementsByTagName("head")[0].appendChild(t),t.styleSheet;try{t=document.createStyleSheet(e.url)}catch(a){}}}};var a=[],n=-1,o={},s={};r.fn.jstree=function(e){var t="string"==typeof e,i=Array.prototype.slice.call(arguments,1),n=this;if(t){if("_"==e.substring(0,1))return n;this.each(function(){var t=a[r.data(this,"jstree_instance_id")],o=t&&r.isFunction(t[e])?t[e].apply(t,i):t;if("undefined"!=typeof o&&(0===e.indexOf("is_")||o!==!0&&o!==!1))return n=o,!1})}else this.each(function(){var t=r.data(this,"jstree_instance_id"),n=[],s=e?r.extend({},!0,e):{},l=r(this),d=!1,u=[];n=n.concat(i),l.data("jstree")&&n.push(l.data("jstree")),s=n.length?r.extend.apply(null,[!0,s].concat(n)):s,"undefined"!=typeof t&&a[t]&&a[t].destroy(),t=parseInt(a.push({}),10)-1,r.data(this,"jstree_instance_id",t),s.plugins=r.isArray(s.plugins)?s.plugins:r.jstree.defaults.plugins.slice(),s.plugins.unshift("core"),s.plugins=s.plugins.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(","),d=r.extend(!0,{},r.jstree.defaults,s),d.plugins=s.plugins,r.each(o,function(e,t){r.inArray(e,d.plugins)===-1?(d[e]=null,delete d[e]):u.push(e)}),d.plugins=u,a[t]=new r.jstree._instance(t,r(this).addClass("jstree jstree-"+t),d),r.each(a[t]._get_settings().plugins,function(e,i){a[t].data[i]={}}),r.each(a[t]._get_settings().plugins,function(e,i){o[i]&&o[i].__init.apply(a[t])}),setTimeout(function(){a[t]&&a[t].init()},0)});return n},r.jstree={defaults:{plugins:[]},_focused:function(){return a[n]||null},_reference:function(e){if(a[e])return a[e];var t=r(e);return t.length||"string"!=typeof e||(t=r("#"+e)),t.length?a[t.closest(".jstree").data("jstree_instance_id")]||null:null},_instance:function(e,t,i){this.data={core:{}},this.get_settings=function(){return r.extend(!0,{},i)},this._get_settings=function(){return i},this.get_index=function(){return e},this.get_container=function(){return t},this.get_container_ul=function(){return t.children("ul:eq(0)")},this._set_settings=function(e){i=r.extend(!0,{},i,e)}},_fn:{},plugin:function(e,t){t=r.extend({},{__init:r.noop,__destroy:r.noop,_fn:{},defaults:!1},t),o[e]=t,r.jstree.defaults[e]=t.defaults,r.each(t._fn,function(t,i){i.plugin=e,i.old=r.jstree._fn[t],r.jstree._fn[t]=function(){var e,a=i,n=Array.prototype.slice.call(arguments),o=new r.Event("before.jstree"),s=!1;if(this.data.core.locked!==!0||"unlock"===t||"is_locked"===t){do{if(a&&a.plugin&&r.inArray(a.plugin,this._get_settings().plugins)!==-1)break;a=a.old}while(a);if(a){if(0===t.indexOf("_"))e=a.apply(this,n);else{if(e=this.get_container().triggerHandler(o,{func:t,inst:this,args:n,plugin:a.plugin}),e===!1)return;"undefined"!=typeof e&&(n=e),e=a.apply(r.extend({},this,{__callback:function(e){this.get_container().triggerHandler(t+".jstree",{inst:this,args:n,rslt:e,rlbk:s})},__rollback:function(){return s=this.get_rollback()},__call_old:function(e){return a.old.apply(this,e?Array.prototype.slice.call(arguments,1):n)}}),n)}return e}}},r.jstree._fn[t].old=i.old,r.jstree._fn[t].plugin=e})},rollback:function(e){e&&(r.isArray(e)||(e=[e]),r.each(e,function(e,t){a[t.i].set_rollback(t.h,t.d)}))}},r.jstree._fn=r.jstree._instance.prototype={},r(function(){var a=navigator.userAgent.toLowerCase(),n=(a.match(/.+?(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],o=".jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; } .jstree li { display:block; min-height:18px; line-height:18px; white-space:nowrap; margin-left:18px; min-width:18px; } .jstree-rtl li { margin-left:0; margin-right:18px; } .jstree > ul > li { margin-left:0px; } .jstree-rtl > ul > li { margin-right:0px; } .jstree ins { display:inline-block; text-decoration:none; width:18px; height:18px; margin:0 0 0 0; padding:0; } .jstree a { display:inline-block; line-height:16px; height:16px; color:black; white-space:nowrap; text-decoration:none; padding:1px 2px; margin:0; } .jstree a:focus { outline: none; } .jstree a > ins { height:16px; width:16px; } .jstree a > .jstree-icon { margin-right:3px; } .jstree-rtl a > .jstree-icon { margin-left:3px; margin-right:0; } li.jstree-open > ul { display:block; } li.jstree-closed > ul { display:none; } ";if(/msie/.test(a)&&6==parseInt(n,10)){e=!0;try{document.execCommand("BackgroundImageCache",!1,!0)}catch(s){}o+=".jstree li { height:18px; margin-left:0; margin-right:0; } .jstree li li { margin-left:18px; } .jstree-rtl li li { margin-left:0px; margin-right:18px; } li.jstree-open ul { display:block; } li.jstree-closed ul { display:none !important; } .jstree li a { display:inline; border-width:0 !important; padding:0px 2px !important; } .jstree li a ins { height:16px; width:16px; margin-right:3px; } .jstree-rtl li a ins { margin-right:0px; margin-left:3px; } "}/msie/.test(a)&&7==parseInt(n,10)&&(t=!0,o+=".jstree li a { border-width:0 !important; padding:0px 2px !important; } "),!/compatible/.test(a)&&/mozilla/.test(a)&&parseFloat(n,10)<1.9&&(i=!0,o+=".jstree ins { display:-moz-inline-box; } .jstree li { line-height:12px; } .jstree a { display:-moz-inline-box; } .jstree .jstree-no-icons .jstree-checkbox { display:-moz-inline-stack !important; } "),r.vakata.css.add_sheet({str:o,title:"jstree"})}),r.jstree.plugin("core",{__init:function(){this.data.core.locked=!1,this.data.core.to_open=this.get_settings().core.initially_open,this.data.core.to_load=this.get_settings().core.initially_load},defaults:{html_titles:!1,animation:500,initially_open:[],initially_load:[],open_parents:!0,notify_plugins:!0,rtl:!1,load_open:!1,strings:{loading:"Loading ...",new_node:"New node",multiple_selection:"Multiple selection"}},_fn:{init:function(){this.set_focus(),this._get_settings().core.rtl&&this.get_container().addClass("jstree-rtl").css("direction","rtl"),this.get_container().html("<ul><li class='jstree-last jstree-leaf'><ins>&#160;</ins><a class='jstree-loading' href='#'><ins class='jstree-icon'>&#160;</ins>"+this._get_string("loading")+"</a></li></ul>"),this.data.core.li_height=this.get_container_ul().find("li.jstree-closed, li.jstree-leaf").eq(0).height()||18,this.get_container().delegate("li > ins","click.jstree",r.proxy(function(e){var t=r(e.target);this.toggle_node(t)},this)).bind("mousedown.jstree",r.proxy(function(){this.set_focus()},this)).bind("dblclick.jstree",function(e){var t;if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){t=window.getSelection();try{t.removeAllRanges(),t.collapse()}catch(i){}}}),this._get_settings().core.notify_plugins&&this.get_container().bind("load_node.jstree",r.proxy(function(e,t){var i=this._get_node(t.rslt.obj),a=this;i===-1&&(i=this.get_container_ul()),i.length&&i.find("li").each(function(){var e=r(this);e.data("jstree")&&r.each(e.data("jstree"),function(t,i){a.data[t]&&r.isFunction(a["_"+t+"_notify"])&&a["_"+t+"_notify"].call(a,e,i)})})},this)),this._get_settings().core.load_open&&this.get_container().bind("load_node.jstree",r.proxy(function(e,t){var i=this._get_node(t.rslt.obj),a=this;i===-1&&(i=this.get_container_ul()),i.length&&i.find("li.jstree-open:not(:has(ul))").each(function(){a.load_node(this,r.noop,r.noop)})},this)),this.__callback(),this.load_node(-1,function(){this.loaded(),this.reload_nodes()})},destroy:function(){var e,t=this.get_index(),i=this._get_settings(),s=this;if(r.each(i.plugins,function(e,t){try{o[t].__destroy.apply(s)}catch(i){}}),this.__callback(),this.is_focused())for(e in a)if(a.hasOwnProperty(e)&&e!=t){a[e].set_focus();break}t===n&&(n=-1),this.get_container().unbind(".jstree").undelegate(".jstree").removeData("jstree_instance_id").find("[class^='jstree']").andSelf().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/gi,"")}),r(document).unbind(".jstree-"+t).undelegate(".jstree-"+t),a[t]=null,delete a[t]},_core_notify:function(e,t){t.opened&&this.open_node(e,!1,!0)},lock:function(){this.data.core.locked=!0,this.get_container().children("ul").addClass("jstree-locked").css("opacity","0.7"),this.__callback({})},unlock:function(){this.data.core.locked=!1,this.get_container().children("ul").removeClass("jstree-locked").css("opacity","1"),this.__callback({})},is_locked:function(){return this.data.core.locked},save_opened:function(){var e=this;this.data.core.to_open=[],this.get_container_ul().find("li.jstree-open").each(function(){this.id&&e.data.core.to_open.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))}),this.__callback(e.data.core.to_open)},save_loaded:function(){},reload_nodes:function(e){var t=this,i=!0,a=[],n=[];e||(this.data.core.reopen=!1,this.data.core.refreshing=!0,this.data.core.to_open=r.map(r.makeArray(this.data.core.to_open),function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_load=r.map(r.makeArray(this.data.core.to_load),function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_open.length&&(this.data.core.to_load=this.data.core.to_load.concat(this.data.core.to_open))),this.data.core.to_load.length&&(r.each(this.data.core.to_load,function(e,t){return"#"==t||void(r(t).length?a.push(t):n.push(t))}),a.length&&(this.data.core.to_load=n,r.each(a,function(e,r){t._is_loaded(r)||(t.load_node(r,function(){t.reload_nodes(!0)},function(){t.reload_nodes(!0)}),i=!1)}))),this.data.core.to_open.length&&r.each(this.data.core.to_open,function(e,i){t.open_node(i,!1,!0)}),i&&(this.data.core.reopen&&clearTimeout(this.data.core.reopen),this.data.core.reopen=setTimeout(function(){t.__callback({},t)},50),this.data.core.refreshing=!1,this.reopen())},reopen:function(){var e=this;this.data.core.to_open.length&&r.each(this.data.core.to_open,function(t,i){e.open_node(i,!1,!0)}),this.__callback({})},refresh:function(e){var t=this;this.save_opened(),e||(e=-1),e=this._get_node(e),e||(e=-1),e!==-1?e.children("UL").remove():this.get_container_ul().empty(),this.load_node(e,function(){t.__callback({obj:e}),t.reload_nodes()})},loaded:function(){this.__callback()},set_focus:function(){if(!this.is_focused()){var e=r.jstree._focused();e&&e.unset_focus(),this.get_container().addClass("jstree-focused"),n=this.get_index(),this.__callback()}},is_focused:function(){return n==this.get_index()},unset_focus:function(){this.is_focused()&&(this.get_container().removeClass("jstree-focused"),n=-1),this.__callback()},_get_node:function(e){var t=r(e,this.get_container());return t.is(".jstree")||e==-1?-1:(t=t.closest("li",this.get_container()),!!t.length&&t)},_get_next:function(e,t){return e=this._get_node(e),e===-1?this.get_container().find("> ul > li:first-child"):!!e.length&&(t?e.nextAll("li").size()>0&&e.nextAll("li:eq(0)"):e.hasClass("jstree-open")?e.find("li:eq(0)"):e.nextAll("li").size()>0?e.nextAll("li:eq(0)"):e.parentsUntil(".jstree","li").next("li").eq(0))},_get_prev:function(e,t){if(e=this._get_node(e),e===-1)return this.get_container().find("> ul > li:last-child");if(!e.length)return!1;if(t)return e.prevAll("li").length>0&&e.prevAll("li:eq(0)");if(e.prev("li").length){for(e=e.prev("li").eq(0);e.hasClass("jstree-open");)e=e.children("ul:eq(0)").children("li:last");return e}var i=e.parentsUntil(".jstree","li:eq(0)");return!!i.length&&i},_get_parent:function(e){if(e=this._get_node(e),e==-1||!e.length)return!1;var t=e.parentsUntil(".jstree","li:eq(0)");return t.length?t:-1},_get_children:function(e){return e=this._get_node(e),e===-1?this.get_container().children("ul:eq(0)").children("li"):!!e.length&&e.children("ul:eq(0)").children("li")},get_path:function(e,t){var i=[],r=this;return e=this._get_node(e),!(e===-1||!e||!e.length)&&(e.parentsUntil(".jstree","li").each(function(){i.push(t?this.id:r.get_text(this))}),i.reverse(),i.push(t?e.attr("id"):this.get_text(e)),i)},_get_string:function(e){return this._get_settings().core.strings[e]||e},is_open:function(e){return e=this._get_node(e),e&&e!==-1&&e.hasClass("jstree-open")},is_closed:function(e){return e=this._get_node(e),e&&e!==-1&&e.hasClass("jstree-closed")},is_leaf:function(e){return e=this._get_node(e),e&&e!==-1&&e.hasClass("jstree-leaf")},correct_state:function(e){return e=this._get_node(e),!(!e||e===-1)&&(e.removeClass("jstree-closed jstree-open").addClass("jstree-leaf").children("ul").remove(),void this.__callback({obj:e}))},open_node:function(t,i,r){if(t=this._get_node(t),!t.length)return!1;if(!t.hasClass("jstree-closed"))return i&&i.call(),!1;var a=r||e?0:this._get_settings().core.animation,n=this;this._is_loaded(t)?(this._get_settings().core.open_parents&&t.parentsUntil(".jstree",".jstree-closed").each(function(){n.open_node(this,!1,!0)}),a&&t.children("ul").css("display","none"),t.removeClass("jstree-closed").addClass("jstree-open").children("a").removeClass("jstree-loading"),a?t.children("ul").stop(!0,!0).slideDown(a,function(){this.style.display="",n.after_open(t)}):n.after_open(t),this.__callback({obj:t}),i&&i.call()):(t.children("a").addClass("jstree-loading"),this.load_node(t,function(){n.open_node(t,i,r)},i))},after_open:function(e){this.__callback({obj:e})},close_node:function(t,i){t=this._get_node(t);var r=i||e?0:this._get_settings().core.animation,a=this;return!(!t.length||!t.hasClass("jstree-open"))&&(r&&t.children("ul").attr("style","display:block !important"),t.removeClass("jstree-open").addClass("jstree-closed"),r?t.children("ul").stop(!0,!0).slideUp(r,function(){this.style.display="",a.after_close(t)}):a.after_close(t),void this.__callback({obj:t}))},after_close:function(e){this.__callback({obj:e})},toggle_node:function(e){return e=this._get_node(e),e.hasClass("jstree-closed")?this.open_node(e):e.hasClass("jstree-open")?this.close_node(e):void 0},open_all:function(e,t,i){e=e?this._get_node(e):-1,e&&e!==-1||(e=this.get_container_ul()),i?e=e.find("li.jstree-closed"):(i=e,e=e.is(".jstree-closed")?e.find("li.jstree-closed").andSelf():e.find("li.jstree-closed"));var r=this;e.each(function(){var e=this;r._is_loaded(this)?r.open_node(this,!1,!t):r.open_node(this,function(){r.open_all(e,t,i)},!t)}),0===i.find("li.jstree-closed").length&&this.__callback({obj:i})},close_all:function(e,t){var i=this;e=e?this._get_node(e):this.get_container(),e&&e!==-1||(e=this.get_container_ul()),e.find("li.jstree-open").andSelf().each(function(){i.close_node(this,!t)}),this.__callback({obj:e})},clean_node:function(e){e=e&&e!=-1?r(e):this.get_container_ul(),e=e.is("li")?e.find("li").andSelf():e.find("li"),e.removeClass("jstree-last").filter("li:last-child").addClass("jstree-last").end().filter(":has(li)").not(".jstree-open").removeClass("jstree-leaf").addClass("jstree-closed"),e.not(".jstree-open, .jstree-closed").addClass("jstree-leaf").children("ul").remove(),this.__callback({obj:e})},get_rollback:function(){return this.__callback(),{i:this.get_index(),h:this.get_container().children("ul").clone(!0),d:this.data}},set_rollback:function(e,t){this.get_container().empty().append(e),this.data=t,this.__callback()},load_node:function(e,t,i){this.__callback({obj:e})},_is_loaded:function(e){return!0},create_node:function(e,t,i,a,n){e=this._get_node(e),t="undefined"==typeof t?"last":t;var o,s=r("<li />"),l=this._get_settings().core;if(e!==-1&&!e.length)return!1;if(!n&&!this._is_loaded(e))return this.load_node(e,function(){this.create_node(e,t,i,a,!0)}),!1;switch(this.__rollback(),"string"==typeof i&&(i={data:i}),i||(i={}),i.attr&&s.attr(i.attr),i.metadata&&s.data(i.metadata),i.state&&s.addClass("jstree-"+i.state),i.data||(i.data=this._get_string("new_node")),r.isArray(i.data)||(o=i.data,i.data=[],i.data.push(o)),r.each(i.data,function(e,t){o=r("<a />"),r.isFunction(t)&&(t=t.call(this,i)),"string"==typeof t?o.attr("href","#")[l.html_titles?"html":"text"](t):(t.attr||(t.attr={}),t.attr.href||(t.attr.href="#"),o.attr(t.attr)[l.html_titles?"html":"text"](t.title),t.language&&o.addClass(t.language)),o.prepend("<ins class='jstree-icon'>&#160;</ins>"),!t.icon&&i.icon&&(t.icon=i.icon),t.icon&&(t.icon.indexOf("/")===-1?o.children("ins").addClass(t.icon):o.children("ins").css("background","url('"+t.icon+"') center center no-repeat")),s.append(o)}),s.prepend("<ins class='jstree-icon'>&#160;</ins>"),e===-1&&(e=this.get_container(),"before"===t&&(t="first"),"after"===t&&(t="last")),t){case"before":e.before(s),o=this._get_parent(e);break;case"after":e.after(s),o=this._get_parent(e);break;case"inside":case"first":e.children("ul").length||e.append("<ul />"),e.children("ul").prepend(s),o=e;break;case"last":e.children("ul").length||e.append("<ul />"),e.children("ul").append(s),o=e;break;default:e.children("ul").length||e.append("<ul />"),t||(t=0),o=e.children("ul").children("li").eq(t),o.length?o.before(s):e.children("ul").append(s),o=e}return o!==-1&&o.get(0)!==this.get_container().get(0)||(o=-1),this.clean_node(o),this.__callback({obj:s,parent:o}),a&&a.call(this,s),s},get_text:function(e){if(e=this._get_node(e),!e.length)return!1;var t=this._get_settings().core.html_titles;return e=e.children("a:eq(0)"),t?(e=e.clone(),e.children("INS").remove(),e.html()):(e=e.contents().filter(function(){return 3==this.nodeType})[0],e.nodeValue)},set_text:function(e,t){if(e=this._get_node(e),!e.length)return!1;if(e=e.children("a:eq(0)"),this._get_settings().core.html_titles){var i=e.children("INS").clone();return e.html(t).prepend(i),this.__callback({obj:e,name:t}),!0}return e=e.contents().filter(function(){return 3==this.nodeType})[0],this.__callback({obj:e,name:t}),e.nodeValue=t},rename_node:function(e,t){e=this._get_node(e),this.__rollback(),e&&e.length&&this.set_text.apply(this,Array.prototype.slice.call(arguments))&&this.__callback({obj:e,name:t})},delete_node:function(e){if(e=this._get_node(e),!e.length)return!1;this.__rollback();var t=this._get_parent(e),i=r([]),a=this;return e.each(function(){i=i.add(a._get_prev(this))}),e=e.detach(),t!==-1&&0===t.find("> ul > li").length&&t.removeClass("jstree-open jstree-closed").addClass("jstree-leaf"),this.clean_node(t),this.__callback({obj:e,prev:i,parent:t}),e},prepare_move:function(e,t,i,a,n){var o={};if(o.ot=r.jstree._reference(e)||this,o.o=o.ot._get_node(e),o.r=t===-1?-1:this._get_node(t),o.p="undefined"==typeof i||i===!1?"last":i,!n&&s.o&&s.o[0]===o.o[0]&&s.r[0]===o.r[0]&&s.p===o.p)return this.__callback(s),void(a&&a.call(this,s));if(o.ot=r.jstree._reference(o.o)||this,o.rt=r.jstree._reference(o.r)||this,o.r!==-1&&o.r){if(!/^(before|after)$/.test(o.p)&&!this._is_loaded(o.r))return this.load_node(o.r,function(){this.prepare_move(e,t,i,a,!0)});switch(o.p){case"before":o.cp=o.r.index(),o.cr=o.rt._get_parent(o.r);break;case"after":o.cp=o.r.index()+1,o.cr=o.rt._get_parent(o.r);break;case"inside":case"first":o.cp=0,o.cr=o.r;break;case"last":o.cp=o.r.find(" > ul > li").length,o.cr=o.r;break;default:o.cp=o.p,o.cr=o.r}}else switch(o.cr=-1,o.p){case"first":case"before":case"inside":o.cp=0;break;case"after":case"last":o.cp=o.rt.get_container().find(" > ul > li").length;break;default:o.cp=o.p}o.np=o.cr==-1?o.rt.get_container():o.cr,o.op=o.ot._get_parent(o.o),o.cop=o.o.index(),o.op===-1&&(o.op=o.ot?o.ot.get_container():this.get_container()),!/^(before|after)$/.test(o.p)&&o.op&&o.np&&o.op[0]===o.np[0]&&o.o.index()<o.cp&&o.cp++,o.or=o.np.find(" > ul > li:nth-child("+(o.cp+1)+")"),s=o,this.__callback(s),a&&a.call(this,s)},check_move:function(){var e=s,t=!0,i=e.r===-1?this.get_container():e.r;if(!e||!e.o||e.or[0]===e.o[0])return!1;if(!e.cy){if(e.op&&e.np&&e.op[0]===e.np[0]&&e.cp-1===e.o.index())return!1;e.o.each(function(){if(i.parentsUntil(".jstree","li").andSelf().index(this)!==-1)return t=!1,!1})}return t},move_node:function(e,t,i,a,n,o){if(!n)return this.prepare_move(e,t,i,function(e){this.move_node(e,!1,!1,a,!0,o)});if(a&&(s.cy=!0),!o&&!this.check_move())return!1;this.__rollback();var l=!1;a?(l=e.o.clone(!0),l.find("*[id]").andSelf().each(function(){this.id&&(this.id="copy_"+this.id)})):l=e.o,e.or.length?e.or.before(l):(e.np.children("ul").length||r("<ul />").appendTo(e.np),e.np.children("ul:eq(0)").append(l));try{e.ot.clean_node(e.op),e.rt.clean_node(e.np),e.op.find("> ul > li").length||e.op.removeClass("jstree-open jstree-closed").addClass("jstree-leaf").children("ul").remove()}catch(d){}return a&&(s.cy=!0,s.oc=l),this.__callback(s),s},_get_move:function(){return s}}})}(jQuery),function(e){var t,i,r;e(function(){/msie/.test(navigator.userAgent.toLowerCase())?(i=e('<textarea cols="10" rows="2"></textarea>').css({position:"absolute",top:-1e3,left:0}).appendTo("body"),r=e('<textarea cols="10" rows="2" style="overflow: hidden;"></textarea>').css({position:"absolute",top:-1e3,left:0}).appendTo("body"),t=i.width()-r.width(),i.add(r).remove()):(i=e("<div />").css({width:100,height:100,overflow:"auto",position:"absolute",top:-1e3,left:0}).prependTo("body").append("<div />").find("div").css({width:"100%",height:200}),t=100-i.width(),i.parent().remove())}),e.jstree.plugin("ui",{__init:function(){this.data.ui.selected=e(),this.data.ui.last_selected=!1,this.data.ui.hovered=null,this.data.ui.to_select=this.get_settings().ui.initially_select,this.get_container().delegate("a","click.jstree",e.proxy(function(t){t.preventDefault(),t.currentTarget.blur(),e(t.currentTarget).hasClass("jstree-loading")||this.select_node(t.currentTarget,!0,t)},this)).delegate("a","mouseenter.jstree",e.proxy(function(t){e(t.currentTarget).hasClass("jstree-loading")||this.hover_node(t.target)},this)).delegate("a","mouseleave.jstree",e.proxy(function(t){e(t.currentTarget).hasClass("jstree-loading")||this.dehover_node(t.target)},this)).bind("reopen.jstree",e.proxy(function(){this.reselect()},this)).bind("get_rollback.jstree",e.proxy(function(){this.dehover_node(),this.save_selected()},this)).bind("set_rollback.jstree",e.proxy(function(){this.reselect()},this)).bind("close_node.jstree",e.proxy(function(t,i){var r=this._get_settings().ui,a=this._get_node(i.rslt.obj),n=a&&a.length?a.children("ul").find("a.jstree-clicked"):e(),o=this;r.selected_parent_close!==!1&&n.length&&n.each(function(){o.deselect_node(this),"select_parent"===r.selected_parent_close&&o.select_node(a)})},this)).bind("delete_node.jstree",e.proxy(function(e,t){var i=this._get_settings().ui.select_prev_on_delete,r=this._get_node(t.rslt.obj),a=r&&r.length?r.find("a.jstree-clicked"):[],n=this;a.each(function(){n.deselect_node(this)}),i&&a.length&&t.rslt.prev.each(function(){if(this.parentNode)return n.select_node(this),!1})},this)).bind("move_node.jstree",e.proxy(function(e,t){t.rslt.cy&&t.rslt.oc.find("a.jstree-clicked").removeClass("jstree-clicked")},this))},defaults:{select_limit:-1,select_multiple_modifier:"ctrl",select_range_modifier:"shift",selected_parent_close:"select_parent",selected_parent_open:!0,select_prev_on_delete:!0,disable_selecting_children:!1,initially_select:[]},_fn:{_get_node:function(t,i){if("undefined"==typeof t||null===t)return i?this.data.ui.selected:this.data.ui.last_selected;var r=e(t,this.get_container());return r.is(".jstree")||t==-1?-1:(r=r.closest("li",this.get_container()),!!r.length&&r)},_ui_notify:function(e,t){t.selected&&this.select_node(e,!1)},save_selected:function(){var e=this;this.data.ui.to_select=[],this.data.ui.selected.each(function(){this.id&&e.data.ui.to_select.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))}),this.__callback(this.data.ui.to_select)},reselect:function(){var t=this,i=this.data.ui.to_select;i=e.map(e.makeArray(i),function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),e.each(i,function(e,i){i&&"#"!==i&&t.select_node(i)}),this.data.ui.selected=this.data.ui.selected.filter(function(){return this.parentNode}),this.__callback()},refresh:function(e){return this.save_selected(),this.__call_old()},hover_node:function(e){return e=this._get_node(e),!!e.length&&(e.hasClass("jstree-hovered")||this.dehover_node(),this.data.ui.hovered=e.children("a").addClass("jstree-hovered").parent(),this._fix_scroll(e),void this.__callback({obj:e}))},dehover_node:function(){var e,t=this.data.ui.hovered;return!(!t||!t.length)&&(e=t.children("a").removeClass("jstree-hovered").parent(),this.data.ui.hovered[0]===e[0]&&(this.data.ui.hovered=null),void this.__callback({obj:t}))},select_node:function(e,t,i){if(e=this._get_node(e),e==-1||!e||!e.length)return!1;var r=this._get_settings().ui,a="on"==r.select_multiple_modifier||r.select_multiple_modifier!==!1&&i&&i[r.select_multiple_modifier+"Key"],n=r.select_range_modifier!==!1&&i&&i[r.select_range_modifier+"Key"]&&this.data.ui.last_selected&&this.data.ui.last_selected[0]!==e[0]&&this.data.ui.last_selected.parent()[0]===e.parent()[0],o=this.is_selected(e),s=!0,l=this;if(t){if(r.disable_selecting_children&&a&&(e.parentsUntil(".jstree","li").children("a.jstree-clicked").length||e.children("ul").find("a.jstree-clicked:eq(0)").length))return!1;switch(s=!1,!0){case n:this.data.ui.last_selected.addClass("jstree-last-selected"),e=e[e.index()<this.data.ui.last_selected.index()?"nextUntil":"prevUntil"](".jstree-last-selected").andSelf(),r.select_limit==-1||e.length<r.select_limit?(this.data.ui.last_selected.removeClass("jstree-last-selected"),this.data.ui.selected.each(function(){this!==l.data.ui.last_selected[0]&&l.deselect_node(this)}),o=!1,s=!0):s=!1;break;case o&&!a:this.deselect_all(),o=!1,s=!0;break;case!o&&!a:(r.select_limit==-1||r.select_limit>0)&&(this.deselect_all(),s=!0);break;case o&&a:this.deselect_node(e);break;case!o&&a:(r.select_limit==-1||this.data.ui.selected.length+1<=r.select_limit)&&(s=!0)}}s&&!o&&(n||(this.data.ui.last_selected=e),e.children("a").addClass("jstree-clicked"),r.selected_parent_open&&e.parents(".jstree-closed").each(function(){l.open_node(this,!1,!0)}),this.data.ui.selected=this.data.ui.selected.add(e),this._fix_scroll(e.eq(0)),this.__callback({obj:e,e:i}))},_fix_scroll:function(e){var i,r=this.get_container()[0];if(r.scrollHeight>r.offsetHeight){if(e=this._get_node(e),!e||e===-1||!e.length||!e.is(":visible"))return;i=e.offset().top-this.get_container().offset().top,i<0&&(r.scrollTop=r.scrollTop+i-1),i+this.data.core.li_height+(r.scrollWidth>r.offsetWidth?t:0)>r.offsetHeight&&(r.scrollTop=r.scrollTop+(i-r.offsetHeight+this.data.core.li_height+1+(r.scrollWidth>r.offsetWidth?t:0)))}},deselect_node:function(e){return e=this._get_node(e),!!e.length&&void(this.is_selected(e)&&(e.children("a").removeClass("jstree-clicked"),this.data.ui.selected=this.data.ui.selected.not(e),this.data.ui.last_selected.get(0)===e.get(0)&&(this.data.ui.last_selected=this.data.ui.selected.eq(0)),this.__callback({obj:e})))},toggle_select:function(e){return e=this._get_node(e),!!e.length&&void(this.is_selected(e)?this.deselect_node(e):this.select_node(e))},is_selected:function(e){return this.data.ui.selected.index(this._get_node(e))>=0},get_selected:function(t){return t?e(t).find("a.jstree-clicked").parent():this.data.ui.selected},deselect_all:function(t){var i=t?e(t).find("a.jstree-clicked").parent():this.get_container().find("a.jstree-clicked").parent();i.children("a.jstree-clicked").removeClass("jstree-clicked"),this.data.ui.selected=e([]),this.data.ui.last_selected=!1,this.__callback({obj:i})}}}),e.jstree.defaults.plugins.push("ui")}(jQuery),function(e){e.jstree.plugin("crrm",{__init:function(){this.get_container().bind("move_node.jstree",e.proxy(function(e,t){if(this._get_settings().crrm.move.open_onmove){var i=this;t.rslt.np.parentsUntil(".jstree").andSelf().filter(".jstree-closed").each(function(){i.open_node(this,!1,!0)})}},this))},defaults:{input_width_limit:200,move:{always_copy:!1,open_onmove:!0,default_position:"last",check_move:function(e){return!0}}},_fn:{_show_input:function(t,i){t=this._get_node(t);var r=this._get_settings().core.rtl,a=this._get_settings().crrm.input_width_limit,n=t.children("ins").width(),o=t.find("> a:visible > ins").width()*t.find("> a:visible > ins").length,s=this.get_text(t),l=e("<div />",{css:{position:"absolute",top:"-200px",left:r?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),d=t.css("position","relative").append(e("<input />",{value:s,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver",position:"absolute",left:r?"auto":n+o+4+"px",right:r?n+o+4+"px":"auto",top:"0px",height:this.data.core.li_height-2+"px",lineHeight:this.data.core.li_height-2+"px",width:"150px"},blur:e.proxy(function(){var e=t.children(".jstree-rename-input"),r=e.val();""===r&&(r=s),l.remove(),
e.remove(),this.set_text(t,s),this.rename_node(t,r),i.call(this,t,r,s),t.css("position","")},this),keyup:function(e){var t=e.keyCode||e.which;return 27==t?(this.value=s,void this.blur()):13==t?void this.blur():void d.width(Math.min(l.text("pW"+this.value).width(),a))},keypress:function(e){var t=e.keyCode||e.which;if(13==t)return!1}})).children(".jstree-rename-input");this.set_text(t,""),l.css({fontFamily:d.css("fontFamily")||"",fontSize:d.css("fontSize")||"",fontWeight:d.css("fontWeight")||"",fontStyle:d.css("fontStyle")||"",fontStretch:d.css("fontStretch")||"",fontVariant:d.css("fontVariant")||"",letterSpacing:d.css("letterSpacing")||"",wordSpacing:d.css("wordSpacing")||""}),d.width(Math.min(l.text("pW"+d[0].value).width(),a))[0].select()},rename:function(e){e=this._get_node(e),this.__rollback();var t=this.__callback;this._show_input(e,function(e,i,r){t.call(this,{obj:e,new_name:i,old_name:r})})},create:function(t,i,r,a,n){var o,s=this;return t=this._get_node(t),t||(t=-1),this.__rollback(),o=this.create_node(t,i,r,function(t){var i=this._get_parent(t),r=e(t).index();a&&a.call(this,t),i.length&&i.hasClass("jstree-closed")&&this.open_node(i,!1,!0),n?s.__callback({obj:t,name:this.get_text(t),parent:i,position:r}):this._show_input(t,function(e,t,a){s.__callback({obj:e,name:t,parent:i,position:r})})})},remove:function(e){e=this._get_node(e,!0);var t=this._get_parent(e),i=this._get_prev(e);this.__rollback(),e=this.delete_node(e),e!==!1&&this.__callback({obj:e,prev:i,parent:t})},check_move:function(){if(!this.__call_old())return!1;var e=this._get_settings().crrm.move;return!!e.check_move.call(this,this._get_move())},move_node:function(e,t,i,r,a,n){var o=this._get_settings().crrm.move;return a?((o.always_copy===!0||"multitree"===o.always_copy&&e.rt.get_index()!==e.ot.get_index())&&(r=!0),void this.__call_old(!0,e,t,i,r,!0,n)):("undefined"==typeof i&&(i=o.default_position),"inside"!==i||o.default_position.match(/^(before|after)$/)||(i=o.default_position),this.__call_old(!0,e,t,i,r,!1,n))},cut:function(e){return e=this._get_node(e,!0),!(!e||!e.length)&&(this.data.crrm.cp_nodes=!1,this.data.crrm.ct_nodes=e,void this.__callback({obj:e}))},copy:function(e){return e=this._get_node(e,!0),!(!e||!e.length)&&(this.data.crrm.ct_nodes=!1,this.data.crrm.cp_nodes=e,void this.__callback({obj:e}))},paste:function(e){if(e=this._get_node(e),!e||!e.length)return!1;var t=this.data.crrm.ct_nodes?this.data.crrm.ct_nodes:this.data.crrm.cp_nodes;return!(!this.data.crrm.ct_nodes&&!this.data.crrm.cp_nodes)&&(this.data.crrm.ct_nodes&&(this.move_node(this.data.crrm.ct_nodes,e),this.data.crrm.ct_nodes=!1),this.data.crrm.cp_nodes&&this.move_node(this.data.crrm.cp_nodes,e,!1,!0),void this.__callback({obj:e,nodes:t}))}}})}(jQuery),function(e){var t=[];e.jstree._themes=!1,e.jstree.plugin("themes",{__init:function(){this.get_container().bind("init.jstree",e.proxy(function(){var e=this._get_settings().themes;this.data.themes.dots=e.dots,this.data.themes.icons=e.icons,this.set_theme(e.theme,e.url)},this)).bind("loaded.jstree",e.proxy(function(){this.data.themes.dots?this.show_dots():this.hide_dots(),this.data.themes.icons?this.show_icons():this.hide_icons()},this))},defaults:{theme:"default",url:!1,dots:!0,icons:!0},_fn:{set_theme:function(i,r){return!!i&&(r||(r=e.jstree._themes+i+"/style.css"),e.inArray(r,t)==-1&&(e.vakata.css.add_sheet({url:r}),t.push(r)),this.data.themes.theme!=i&&(this.get_container().removeClass("jstree-"+this.data.themes.theme),this.data.themes.theme=i),this.get_container().addClass("jstree-"+i),this.data.themes.dots?this.show_dots():this.hide_dots(),this.data.themes.icons?this.show_icons():this.hide_icons(),void this.__callback())},get_theme:function(){return this.data.themes.theme},show_dots:function(){this.data.themes.dots=!0,this.get_container().children("ul").removeClass("jstree-no-dots")},hide_dots:function(){this.data.themes.dots=!1,this.get_container().children("ul").addClass("jstree-no-dots")},toggle_dots:function(){this.data.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this.data.themes.icons=!0,this.get_container().children("ul").removeClass("jstree-no-icons")},hide_icons:function(){this.data.themes.icons=!1,this.get_container().children("ul").addClass("jstree-no-icons")},toggle_icons:function(){this.data.themes.icons?this.hide_icons():this.show_icons()}}}),e(function(){e.jstree._themes===!1&&e("script").each(function(){if(this.src.toString().match(/jquery\.jstree[^\/]*?\.js(\?.*)?$/))return e.jstree._themes=this.src.toString().replace(/jquery\.jstree[^\/]*?\.js(\?.*)?$/,"")+"themes/",!1}),e.jstree._themes===!1&&(e.jstree._themes="themes/")}),e.jstree.defaults.plugins.push("themes")}(jQuery),function(e){function t(t,i){var r,a=e.jstree._focused();if(a&&a.data&&a.data.hotkeys&&a.data.hotkeys.enabled&&(r=a._get_settings().hotkeys[t]))return r.call(a,i)}var i=[];e.jstree.plugin("hotkeys",{__init:function(){if("undefined"==typeof e.hotkeys)throw"jsTree hotkeys: jQuery hotkeys plugin not included.";if(!this.data.ui)throw"jsTree hotkeys: jsTree UI plugin not included.";e.each(this._get_settings().hotkeys,function(r,a){a!==!1&&e.inArray(r,i)==-1&&(e(document).bind("keydown",r,function(e){return t(r,e)}),i.push(r))}),this.get_container().bind("lock.jstree",e.proxy(function(){this.data.hotkeys.enabled&&(this.data.hotkeys.enabled=!1,this.data.hotkeys.revert=!0)},this)).bind("unlock.jstree",e.proxy(function(){this.data.hotkeys.revert&&(this.data.hotkeys.enabled=!0)},this)),this.enable_hotkeys()},defaults:{up:function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_prev(e)),!1},"ctrl+up":function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_prev(e)),!1},"shift+up":function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_prev(e)),!1},down:function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_next(e)),!1},"ctrl+down":function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_next(e)),!1},"shift+down":function(){var e=this.data.ui.hovered||this.data.ui.last_selected||-1;return this.hover_node(this._get_next(e)),!1},left:function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&(e.hasClass("jstree-open")?this.close_node(e):this.hover_node(this._get_prev(e))),!1},"ctrl+left":function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&(e.hasClass("jstree-open")?this.close_node(e):this.hover_node(this._get_prev(e))),!1},"shift+left":function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&(e.hasClass("jstree-open")?this.close_node(e):this.hover_node(this._get_prev(e))),!1},right:function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&e.length&&(e.hasClass("jstree-closed")?this.open_node(e):this.hover_node(this._get_next(e))),!1},"ctrl+right":function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&e.length&&(e.hasClass("jstree-closed")?this.open_node(e):this.hover_node(this._get_next(e))),!1},"shift+right":function(){var e=this.data.ui.hovered||this.data.ui.last_selected;return e&&e.length&&(e.hasClass("jstree-closed")?this.open_node(e):this.hover_node(this._get_next(e))),!1},space:function(){return this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").click(),!1},"ctrl+space":function(e){return e.type="click",this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(e),!1},"shift+space":function(e){return e.type="click",this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(e),!1},f2:function(){this.rename(this.data.ui.hovered||this.data.ui.last_selected)},del:function(){this.remove(this.data.ui.hovered||this._get_node(null))}},_fn:{enable_hotkeys:function(){this.data.hotkeys.enabled=!0},disable_hotkeys:function(){this.data.hotkeys.enabled=!1}}})}(jQuery),function(e){e.jstree.plugin("json_data",{__init:function(){var e=this._get_settings().json_data;e.progressive_unload&&this.get_container().bind("after_close.jstree",function(e,t){t.rslt.obj.children("ul").remove()})},defaults:{data:!1,ajax:!1,correct_state:!0,progressive_render:!1,progressive_unload:!1},_fn:{load_node:function(e,t,i){var r=this;this.load_node_json(e,function(){r.__callback({obj:r._get_node(e)}),t.call(this)},i)},_is_loaded:function(t){var i=this._get_settings().json_data;return t=this._get_node(t),t==-1||!t||!i.ajax&&!i.progressive_render&&!e.isFunction(i.data)||t.is(".jstree-open, .jstree-leaf")||t.children("ul").children("li").length>0},refresh:function(t){t=this._get_node(t);var i=this._get_settings().json_data;return t&&t!==-1&&i.progressive_unload&&(e.isFunction(i.data)||i.ajax)&&t.removeData("jstree_children"),this.__call_old()},load_node_json:function(t,i,r){var a,n=this.get_settings().json_data,o=function(){},s=function(){};if(t=this._get_node(t),t&&t!==-1&&(n.progressive_render||n.progressive_unload)&&!t.is(".jstree-open, .jstree-leaf")&&0===t.children("ul").children("li").length&&t.data("jstree_children"))return a=this._parse_json(t.data("jstree_children"),t),a&&(t.append(a),n.progressive_unload||t.removeData("jstree_children")),this.clean_node(t),void(i&&i.call(this));if(t&&t!==-1){if(t.data("jstree_is_loading"))return;t.data("jstree_is_loading",!0)}switch(!0){case!n.data&&!n.ajax:throw"Neither data nor ajax settings supplied.";case e.isFunction(n.data):n.data.call(this,t,e.proxy(function(e){e=this._parse_json(e,t),e?(t!==-1&&t?(t.append(e).children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(e.children()),this.clean_node(t),i&&i.call(this)):(t!==-1&&t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),n.correct_state&&this.correct_state(t)):n.correct_state&&this.get_container().children("ul").empty(),r&&r.call(this))},this));break;case!!n.data&&!n.ajax||!!n.data&&!!n.ajax&&(!t||t===-1):t&&t!=-1||(a=this._parse_json(n.data,t),a?(this.get_container().children("ul").empty().append(a.children()),this.clean_node()):n.correct_state&&this.get_container().children("ul").empty()),i&&i.call(this);break;case!n.data&&!!n.ajax||!!n.data&&!!n.ajax&&t&&t!==-1:o=function(e,i,a){var o=this.get_settings().json_data.ajax.error;o&&o.call(this,e,i,a),t!=-1&&t.length?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),"success"===i&&n.correct_state&&this.correct_state(t)):"success"===i&&n.correct_state&&this.get_container().children("ul").empty(),r&&r.call(this)},s=function(r,a,s){var l=this.get_settings().json_data.ajax.success;return l&&(r=l.call(this,r,a,s)||r),""===r||r&&r.toString&&""===r.toString().replace(/^[\s\n]+$/,"")||!e.isArray(r)&&!e.isPlainObject(r)?o.call(this,s,a,""):(r=this._parse_json(r,t),void(r?(t!==-1&&t?(t.append(r).children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(r.children()),this.clean_node(t),i&&i.call(this)):t!==-1&&t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),n.correct_state&&(this.correct_state(t),i&&i.call(this))):n.correct_state&&(this.get_container().children("ul").empty(),i&&i.call(this))))},n.ajax.context=this,n.ajax.error=o,n.ajax.success=s,n.ajax.dataType||(n.ajax.dataType="json"),e.isFunction(n.ajax.url)&&(n.ajax.url=n.ajax.url.call(this,t)),e.isFunction(n.ajax.data)&&(n.ajax.data=n.ajax.data.call(this,t)),e.ajax(n.ajax)}},_parse_json:function(t,i,r){var a,n,o,s,l,d=!1,u=this._get_settings(),c=u.json_data,p=u.core.html_titles;if(!t)return d;if(c.progressive_unload&&i&&i!==-1&&i.data("jstree_children",d),e.isArray(t)){if(d=e(),!t.length)return!1;for(n=0,o=t.length;n<o;n++)a=this._parse_json(t[n],i,!0),a.length&&(d=d.add(a))}else{if("string"==typeof t&&(t={data:t}),!t.data&&""!==t.data)return d;d=e("<li />"),t.attr&&d.attr(t.attr),t.metadata&&d.data(t.metadata),t.state&&d.addClass("jstree-"+t.state),e.isArray(t.data)||(a=t.data,t.data=[],t.data.push(a)),e.each(t.data,function(i,r){a=e("<a />"),e.isFunction(r)&&(r=r.call(this,t)),"string"==typeof r?a.attr("href","#")[p?"html":"text"](r):(r.attr||(r.attr={}),r.attr.href||(r.attr.href="#"),a.attr(r.attr)[p?"html":"text"](r.title),r.language&&a.addClass(r.language)),a.prepend("<ins class='jstree-icon'>&#160;</ins>"),!r.icon&&t.icon&&(r.icon=t.icon),r.icon&&(r.icon.indexOf("/")===-1?a.children("ins").addClass(r.icon):a.children("ins").css("background","url('"+r.icon+"') center center no-repeat")),d.append(a)}),d.prepend("<ins class='jstree-icon'>&#160;</ins>"),t.children&&(c.progressive_render&&"open"!==t.state?d.addClass("jstree-closed").data("jstree_children",t.children):(c.progressive_unload&&d.data("jstree_children",t.children),e.isArray(t.children)&&t.children.length&&(a=this._parse_json(t.children,i,!0),a.length&&(l=e("<ul />"),l.append(a),d.append(l)))))}return r||(s=e("<ul />"),s.append(d),d=s),d},get_json:function(t,i,r,a){var n,o,s,l,d,u,c=[],p=this._get_settings(),h=this;return t=this._get_node(t),t&&t!==-1||(t=this.get_container().find("> ul > li")),i=e.isArray(i)?i:["id","class"],!a&&this.data.types&&i.push(p.types.type_attr),r=e.isArray(r)?r:[],t.each(function(){s=e(this),n={data:[]},i.length&&(n.attr={}),e.each(i,function(e,t){o=s.attr(t),o&&o.length&&o.replace(/jstree[^ ]*/gi,"").length&&(n.attr[t]=(" "+o).replace(/ jstree[^ ]*/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,""))}),s.hasClass("jstree-open")&&(n.state="open"),s.hasClass("jstree-closed")&&(n.state="closed"),s.data()&&(n.metadata=s.data()),l=s.children("a"),l.each(function(){d=e(this),r.length||e.inArray("languages",p.plugins)!==-1||d.children("ins").get(0).style.backgroundImage.length||d.children("ins").get(0).className&&d.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").length?(u=!1,e.inArray("languages",p.plugins)!==-1&&e.isArray(p.languages)&&p.languages.length&&e.each(p.languages,function(e,t){if(d.hasClass(t))return u=t,!1}),o={attr:{},title:h.get_text(d,u)},e.each(r,function(e,t){o.attr[t]=(" "+(d.attr(t)||"")).replace(/ jstree[^ ]*/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,"")}),e.inArray("languages",p.plugins)!==-1&&e.isArray(p.languages)&&p.languages.length&&e.each(p.languages,function(e,t){if(d.hasClass(t))return o.language=t,!0}),d.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").replace(/^\s+$/gi,"").length&&(o.icon=d.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,"")),d.children("ins").get(0).style.backgroundImage.length&&(o.icon=d.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")",""))):o=h.get_text(d),l.length>1?n.data.push(o):n.data=o}),s=s.find("> ul > li"),s.length&&(n.children=h.get_json(s,i,r,!0)),c.push(n)}),c}}})}(jQuery),function(e){var t=!1;e.jstree.plugin("languages",{__init:function(){this._load_css()},defaults:[],_fn:{set_lang:function(i){var r=this._get_settings().languages,a=!1,n=".jstree-"+this.get_index()+" a";if(!e.isArray(r)||0===r.length)return!1;if(e.inArray(i,r)==-1){if(!r[i])return!1;i=r[i]}return i==this.data.languages.current_language||(a=e.vakata.css.get_css(n+"."+this.data.languages.current_language,!1,t),a!==!1&&(a.style.display="none"),a=e.vakata.css.get_css(n+"."+i,!1,t),a!==!1&&(a.style.display=""),this.data.languages.current_language=i,this.__callback(i),!0)},get_lang:function(){return this.data.languages.current_language},_get_string:function(t,i){var r=this._get_settings().languages,a=this._get_settings().core.strings;return e.isArray(r)&&r.length&&(i=i&&e.inArray(i,r)!=-1?i:this.data.languages.current_language),a[i]&&a[i][t]?a[i][t]:a[t]?a[t]:t},get_text:function(t,i){if(t=this._get_node(t)||this.data.ui.last_selected,!t.size())return!1;var r=this._get_settings().languages,a=this._get_settings().core.html_titles;return e.isArray(r)&&r.length?(i=i&&e.inArray(i,r)!=-1?i:this.data.languages.current_language,t=t.children("a."+i)):t=t.children("a:eq(0)"),a?(t=t.clone(),t.children("INS").remove(),t.html()):(t=t.contents().filter(function(){return 3==this.nodeType})[0],t.nodeValue)},set_text:function(t,i,r){if(t=this._get_node(t)||this.data.ui.last_selected,!t.size())return!1;var a,n=this._get_settings().languages,o=this._get_settings().core.html_titles;return e.isArray(n)&&n.length?(r=r&&e.inArray(r,n)!=-1?r:this.data.languages.current_language,t=t.children("a."+r)):t=t.children("a:eq(0)"),o?(a=t.children("INS").clone(),t.html(i).prepend(a),this.__callback({obj:t,name:i,lang:r}),!0):(t=t.contents().filter(function(){return 3==this.nodeType})[0],this.__callback({obj:t,name:i,lang:r}),t.nodeValue=i)},_load_css:function(){var i,r=this._get_settings().languages,a="/* languages css */",n=".jstree-"+this.get_index()+" a";if(e.isArray(r)&&r.length){for(this.data.languages.current_language=r[0],i=0;i<r.length;i++)a+=n+"."+r[i]+" {",r[i]!=this.data.languages.current_language&&(a+=" display:none; "),a+=" } ";t=e.vakata.css.add_sheet({str:a,title:"jstree-languages"})}},create_node:function(t,i,r,a){var n=this.__call_old(!0,t,i,r,function(t){var i,r=this._get_settings().languages,n=t.children("a");if(e.isArray(r)&&r.length){for(i=0;i<r.length;i++)n.is("."+r[i])||t.append(n.eq(0).clone().removeClass(r.join(" ")).addClass(r[i]));n.not("."+r.join(", .")).remove()}a&&a.call(this,t)});return n}}})}(jQuery),function(e){e.jstree.plugin("cookies",{__init:function(){if("undefined"==typeof e.cookie)throw"jsTree cookie: jQuery cookie plugin not included.";var t,i=this._get_settings().cookies;i.save_loaded&&(t=e.cookie(i.save_loaded),t&&t.length&&(this.data.core.to_load=t.split(","))),i.save_opened&&(t=e.cookie(i.save_opened),t&&t.length&&(this.data.core.to_open=t.split(","))),i.save_selected&&(t=e.cookie(i.save_selected),t&&t.length&&this.data.ui&&(this.data.ui.to_select=t.split(","))),this.get_container().one((this.data.ui?"reselect":"reopen")+".jstree",e.proxy(function(){this.get_container().bind("open_node.jstree close_node.jstree select_node.jstree deselect_node.jstree",e.proxy(function(e){this._get_settings().cookies.auto_save&&this.save_cookie((e.handleObj.namespace+e.handleObj.type).replace("jstree",""))},this))},this))},defaults:{save_loaded:"jstree_load",save_opened:"jstree_open",save_selected:"jstree_select",auto_save:!0,cookie_options:{}},_fn:{save_cookie:function(t){if(!this.data.core.refreshing){var i=this._get_settings().cookies;if(!t)return i.save_loaded&&(this.save_loaded(),e.cookie(i.save_loaded,this.data.core.to_load.join(","),i.cookie_options)),i.save_opened&&(this.save_opened(),e.cookie(i.save_opened,this.data.core.to_open.join(","),i.cookie_options)),void(i.save_selected&&this.data.ui&&(this.save_selected(),e.cookie(i.save_selected,this.data.ui.to_select.join(","),i.cookie_options)));switch(t){case"open_node":case"close_node":i.save_opened&&(this.save_opened(),e.cookie(i.save_opened,this.data.core.to_open.join(","),i.cookie_options)),i.save_loaded&&(this.save_loaded(),e.cookie(i.save_loaded,this.data.core.to_load.join(","),i.cookie_options));break;case"select_node":case"deselect_node":i.save_selected&&this.data.ui&&(this.save_selected(),e.cookie(i.save_selected,this.data.ui.to_select.join(","),i.cookie_options))}}}}})}(jQuery),function(e){e.jstree.plugin("sort",{__init:function(){this.get_container().bind("load_node.jstree",e.proxy(function(e,t){var i=this._get_node(t.rslt.obj);i=i===-1?this.get_container().children("ul"):i.children("ul"),this.sort(i)},this)).bind("rename_node.jstree create_node.jstree create.jstree",e.proxy(function(e,t){this.sort(t.rslt.obj.parent())},this)).bind("move_node.jstree",e.proxy(function(e,t){var i=t.rslt.np==-1?this.get_container():t.rslt.np;this.sort(i.children("ul"))},this))},defaults:function(e,t){return this.get_text(e)>this.get_text(t)?1:-1},_fn:{sort:function(t){var i=this._get_settings().sort,r=this;t.append(e.makeArray(t.children("li")).sort(e.proxy(i,r))),t.find("> li > ul").each(function(){r.sort(e(this))}),this.clean_node(t)}}})}(jQuery),function(e){var t=!1,i=!1,r=!1,a=!1,n=!1,o=!1,s=!1,l=!1,d=!1;e.vakata.dnd={is_down:!1,is_drag:!1,helper:!1,scroll_spd:10,init_x:0,init_y:0,threshold:5,helper_left:5,helper_top:10,user_data:{},drag_start:function(t,i,r){e.vakata.dnd.is_drag&&e.vakata.drag_stop({});try{t.currentTarget.unselectable="on",t.currentTarget.onselectstart=function(){return!1},t.currentTarget.style&&(t.currentTarget.style.MozUserSelect="none")}catch(a){}return e.vakata.dnd.init_x=t.pageX,e.vakata.dnd.init_y=t.pageY,e.vakata.dnd.user_data=i,e.vakata.dnd.is_down=!0,e.vakata.dnd.helper=e("<div id='vakata-dragged' />").html(r),e(document).bind("mousemove",e.vakata.dnd.drag),e(document).bind("mouseup",e.vakata.dnd.drag_stop),!1},drag:function(t){if(e.vakata.dnd.is_down){if(!e.vakata.dnd.is_drag){if(!(Math.abs(t.pageX-e.vakata.dnd.init_x)>5||Math.abs(t.pageY-e.vakata.dnd.init_y)>5))return;e.vakata.dnd.helper.appendTo("body"),e.vakata.dnd.is_drag=!0,e(document).triggerHandler("drag_start.vakata",{event:t,data:e.vakata.dnd.user_data})}if("mousemove"===t.type){var i=e(document),r=i.scrollTop(),a=i.scrollLeft();t.pageY-r<20?(o&&"down"===s&&(clearInterval(o),o=!1),o||(s="up",o=setInterval(function(){e(document).scrollTop(e(document).scrollTop()-e.vakata.dnd.scroll_spd)},150))):o&&"up"===s&&(clearInterval(o),o=!1),e(window).height()-(t.pageY-r)<20?(o&&"up"===s&&(clearInterval(o),o=!1),o||(s="down",o=setInterval(function(){e(document).scrollTop(e(document).scrollTop()+e.vakata.dnd.scroll_spd)},150))):o&&"down"===s&&(clearInterval(o),o=!1),t.pageX-a<20?(n&&"right"===l&&(clearInterval(n),n=!1),n||(l="left",n=setInterval(function(){e(document).scrollLeft(e(document).scrollLeft()-e.vakata.dnd.scroll_spd)},150))):n&&"left"===l&&(clearInterval(n),n=!1),e(window).width()-(t.pageX-a)<20?(n&&"left"===l&&(clearInterval(n),n=!1),n||(l="right",n=setInterval(function(){e(document).scrollLeft(e(document).scrollLeft()+e.vakata.dnd.scroll_spd)},150))):n&&"right"===l&&(clearInterval(n),n=!1)}e.vakata.dnd.helper.css({left:t.pageX+e.vakata.dnd.helper_left+"px",top:t.pageY+e.vakata.dnd.helper_top+"px"}),e(document).triggerHandler("drag.vakata",{event:t,data:e.vakata.dnd.user_data})}},drag_stop:function(t){n&&clearInterval(n),o&&clearInterval(o),e(document).unbind("mousemove",e.vakata.dnd.drag),e(document).unbind("mouseup",e.vakata.dnd.drag_stop),e(document).triggerHandler("drag_stop.vakata",{event:t,data:e.vakata.dnd.user_data}),e.vakata.dnd.helper.remove(),e.vakata.dnd.init_x=0,e.vakata.dnd.init_y=0,e.vakata.dnd.user_data={},e.vakata.dnd.is_down=!1,e.vakata.dnd.is_drag=!1}},e(function(){var t="#vakata-dragged { display:block; margin:0 0 0 0; padding:4px 4px 4px 24px; position:absolute; top:-2000px; line-height:16px; z-index:10000; } ";e.vakata.css.add_sheet({str:t,title:"vakata"})}),e.jstree.plugin("dnd",{__init:function(){this.data.dnd={active:!1,after:!1,inside:!1,before:!1,off:!1,prepared:!1,w:0,to1:!1,to2:!1,cof:!1,cw:!1,ch:!1,i1:!1,i2:!1,mto:!1},this.get_container().bind("mouseenter.jstree",e.proxy(function(i){if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&(this.data.themes&&(r.attr("class","jstree-"+this.data.themes.theme),a&&a.attr("class","jstree-"+this.data.themes.theme),e.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),i.currentTarget===i.target&&e.vakata.dnd.user_data.obj&&e(e.vakata.dnd.user_data.obj).length&&e(e.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==i.target)){var n,o=e.jstree._reference(i.target);o.data.dnd.foreign?(n=o._get_settings().dnd.drag_check.call(this,{o:t,r:o.get_container(),is_root:!0}),n!==!0&&n.inside!==!0&&n.before!==!0&&n.after!==!0||e.vakata.dnd.helper.children("ins").attr("class","jstree-ok")):(o.prepare_move(t,o.get_container(),"last"),o.check_move()&&e.vakata.dnd.helper.children("ins").attr("class","jstree-ok"))}},this)).bind("mouseup.jstree",e.proxy(function(i){if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&i.currentTarget===i.target&&e.vakata.dnd.user_data.obj&&e(e.vakata.dnd.user_data.obj).length&&e(e.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==i.target){var r,a=e.jstree._reference(i.currentTarget);a.data.dnd.foreign?(r=a._get_settings().dnd.drag_check.call(this,{o:t,r:a.get_container(),is_root:!0}),r!==!0&&r.inside!==!0&&r.before!==!0&&r.after!==!0||a._get_settings().dnd.drag_finish.call(this,{o:t,r:a.get_container(),is_root:!0})):a.move_node(t,a.get_container(),"last",i[a._get_settings().dnd.copy_modifier+"Key"])}},this)).bind("mouseleave.jstree",e.proxy(function(t){return(!t.relatedTarget||!t.relatedTarget.id||"jstree-marker-line"!==t.relatedTarget.id)&&void(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),e.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")))},this)).bind("mousemove.jstree",e.proxy(function(t){if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree){var i=this.get_container()[0];t.pageX+24>this.data.dnd.cof.left+this.data.dnd.cw?(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(e.proxy(function(){this.scrollLeft+=e.vakata.dnd.scroll_spd},i),100)):t.pageX-24<this.data.dnd.cof.left?(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(e.proxy(function(){this.scrollLeft-=e.vakata.dnd.scroll_spd},i),100)):this.data.dnd.i1&&clearInterval(this.data.dnd.i1),t.pageY+24>this.data.dnd.cof.top+this.data.dnd.ch?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(e.proxy(function(){this.scrollTop+=e.vakata.dnd.scroll_spd},i),100)):t.pageY-24<this.data.dnd.cof.top?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(e.proxy(function(){this.scrollTop-=e.vakata.dnd.scroll_spd},i),100)):this.data.dnd.i2&&clearInterval(this.data.dnd.i2)}},this)).bind("scroll.jstree",e.proxy(function(t){e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&r&&a&&(r.hide(),a.hide())},this)).delegate("a","mousedown.jstree",e.proxy(function(e){if(1===e.which)return this.start_drag(e.currentTarget,e),!1},this)).delegate("a","mouseenter.jstree",e.proxy(function(t){e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&this.dnd_enter(t.currentTarget)},this)).delegate("a","mousemove.jstree",e.proxy(function(t){e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&(i&&i.length&&i.children("a")[0]===t.currentTarget||this.dnd_enter(t.currentTarget),"undefined"==typeof this.data.dnd.off.top&&(this.data.dnd.off=e(t.target).offset()),this.data.dnd.w=(t.pageY-(this.data.dnd.off.top||0))%this.data.core.li_height,this.data.dnd.w<0&&(this.data.dnd.w+=this.data.core.li_height),this.dnd_show())},this)).delegate("a","mouseleave.jstree",e.proxy(function(t){if(e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree){if(t.relatedTarget&&t.relatedTarget.id&&"jstree-marker-line"===t.relatedTarget.id)return!1;r&&r.hide(),a&&a.hide(),this.data.dnd.mto=setTimeout(function(e){return function(){e.dnd_leave(t)}}(this),0)}},this)).delegate("a","mouseup.jstree",e.proxy(function(t){e.vakata.dnd.is_drag&&e.vakata.dnd.user_data.jstree&&this.dnd_finish(t)},this)),e(document).bind("drag_stop.vakata",e.proxy(function(){this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.after=!1,this.data.dnd.before=!1,this.data.dnd.inside=!1,this.data.dnd.off=!1,this.data.dnd.prepared=!1,this.data.dnd.w=!1,this.data.dnd.to1=!1,this.data.dnd.to2=!1,this.data.dnd.i1=!1,this.data.dnd.i2=!1,this.data.dnd.active=!1,this.data.dnd.foreign=!1,r&&r.css({top:"-2000px"}),a&&a.css({top:"-2000px"})},this)).bind("drag_start.vakata",e.proxy(function(t,i){if(i.data.jstree){var r=e(i.event.target);r.closest(".jstree").hasClass("jstree-"+this.get_index())&&this.dnd_enter(r)}},this));var n=this._get_settings().dnd;n.drag_target&&e(document).delegate(n.drag_target,"mousedown.jstree-"+this.get_index(),e.proxy(function(i){t=i.target,e.vakata.dnd.drag_start(i,{jstree:!0,obj:i.target},"<ins class='jstree-icon'></ins>"+e(i.target).text()),this.data.themes&&(r&&r.attr("class","jstree-"+this.data.themes.theme),a&&a.attr("class","jstree-"+this.data.themes.theme),e.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");var n=this.get_container();this.data.dnd.cof=n.offset(),this.data.dnd.cw=parseInt(n.width(),10),this.data.dnd.ch=parseInt(n.height(),10),this.data.dnd.foreign=!0,i.preventDefault()},this)),n.drop_target&&e(document).delegate(n.drop_target,"mouseenter.jstree-"+this.get_index(),e.proxy(function(i){this.data.dnd.active&&this._get_settings().dnd.drop_check.call(this,{o:t,r:e(i.target),e:i})&&e.vakata.dnd.helper.children("ins").attr("class","jstree-ok")},this)).delegate(n.drop_target,"mouseleave.jstree-"+this.get_index(),e.proxy(function(t){this.data.dnd.active&&e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")},this)).delegate(n.drop_target,"mouseup.jstree-"+this.get_index(),e.proxy(function(i){this.data.dnd.active&&e.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&this._get_settings().dnd.drop_finish.call(this,{o:t,r:e(i.target),e:i})},this))},defaults:{copy_modifier:"ctrl",check_timeout:100,open_timeout:500,drop_target:".jstree-drop",drop_check:function(e){return!0},drop_finish:e.noop,drag_target:".jstree-draggable",drag_finish:e.noop,drag_check:function(e){return{after:!1,before:!1,inside:!0}}},_fn:{dnd_prepare:function(){if(i&&i.length){if(this.data.dnd.off=i.offset(),this._get_settings().core.rtl&&(this.data.dnd.off.right=this.data.dnd.off.left+i.width()),this.data.dnd.foreign){var e=this._get_settings().dnd.drag_check.call(this,{o:t,r:i});return this.data.dnd.after=e.after,this.data.dnd.before=e.before,this.data.dnd.inside=e.inside,this.data.dnd.prepared=!0,this.dnd_show()}return this.prepare_move(t,i,"before"),this.data.dnd.before=this.check_move(),this.prepare_move(t,i,"after"),this.data.dnd.after=this.check_move(),this._is_loaded(i)?(this.prepare_move(t,i,"inside"),this.data.dnd.inside=this.check_move()):this.data.dnd.inside=!1,this.data.dnd.prepared=!0,this.dnd_show()}},dnd_show:function(){if(this.data.dnd.prepared){var t,i=["before","inside","after"],n=!1,o=this._get_settings().core.rtl;switch(i=this.data.dnd.w<this.data.core.li_height/3?["before","inside","after"]:this.data.dnd.w<=2*this.data.core.li_height/3?this.data.dnd.w<this.data.core.li_height/2?["inside","before","after"]:["inside","after","before"]:["after","inside","before"],e.each(i,e.proxy(function(t,i){if(this.data.dnd[i])return e.vakata.dnd.helper.children("ins").attr("class","jstree-ok"),n=i,!1},this)),n===!1&&e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid"),t=o?this.data.dnd.off.right-18:this.data.dnd.off.left+10,n){case"before":r.css({left:t+"px",top:this.data.dnd.off.top-6+"px"}).show(),a&&a.css({left:t+8+"px",top:this.data.dnd.off.top-1+"px"}).show();break;case"after":r.css({left:t+"px",top:this.data.dnd.off.top+this.data.core.li_height-6+"px"}).show(),a&&a.css({left:t+8+"px",top:this.data.dnd.off.top+this.data.core.li_height-1+"px"}).show();break;case"inside":r.css({left:t+(o?-4:4)+"px",top:this.data.dnd.off.top+this.data.core.li_height/2-5+"px"}).show(),a&&a.hide();break;default:r.hide(),a&&a.hide()}return d=n,n}},dnd_open:function(){this.data.dnd.to2=!1,this.open_node(i,e.proxy(this.dnd_prepare,this),!0)},dnd_finish:function(e){this.data.dnd.foreign?(this.data.dnd.after||this.data.dnd.before||this.data.dnd.inside)&&this._get_settings().dnd.drag_finish.call(this,{o:t,r:i,p:d}):(this.dnd_prepare(),
this.move_node(t,i,d,e[this._get_settings().dnd.copy_modifier+"Key"])),t=!1,i=!1,r.hide(),a&&a.hide()},dnd_enter:function(t){this.data.dnd.mto&&(clearTimeout(this.data.dnd.mto),this.data.dnd.mto=!1);var r=this._get_settings().dnd;this.data.dnd.prepared=!1,i=this._get_node(t),r.check_timeout?(this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to1=setTimeout(e.proxy(this.dnd_prepare,this),r.check_timeout)):this.dnd_prepare(),r.open_timeout?(this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),i&&i.length&&i.hasClass("jstree-closed")&&(this.data.dnd.to2=setTimeout(e.proxy(this.dnd_open,this),r.open_timeout))):i&&i.length&&i.hasClass("jstree-closed")&&this.dnd_open()},dnd_leave:function(t){this.data.dnd.after=!1,this.data.dnd.before=!1,this.data.dnd.inside=!1,e.vakata.dnd.helper.children("ins").attr("class","jstree-invalid"),r.hide(),a&&a.hide(),i&&i[0]===t.target.parentNode&&(this.data.dnd.to1&&(clearTimeout(this.data.dnd.to1),this.data.dnd.to1=!1),this.data.dnd.to2&&(clearTimeout(this.data.dnd.to2),this.data.dnd.to2=!1))},start_drag:function(i,n){t=this._get_node(i),this.data.ui&&this.is_selected(t)&&(t=this._get_node(null,!0));var o=t.length>1?this._get_string("multiple_selection"):this.get_text(t),s=this.get_container();this._get_settings().core.html_titles||(o=o.replace(/</gi,"&lt;").replace(/>/gi,"&gt;")),e.vakata.dnd.drag_start(n,{jstree:!0,obj:t},"<ins class='jstree-icon'></ins>"+o),this.data.themes&&(r&&r.attr("class","jstree-"+this.data.themes.theme),a&&a.attr("class","jstree-"+this.data.themes.theme),e.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),this.data.dnd.cof=s.offset(),this.data.dnd.cw=parseInt(s.width(),10),this.data.dnd.ch=parseInt(s.height(),10),this.data.dnd.active=!0}}}),e(function(){var t="#vakata-dragged ins { display:block; text-decoration:none; width:16px; height:16px; margin:0 0 0 0; padding:0; position:absolute; top:4px; left:4px;  -moz-border-radius:4px; border-radius:4px; -webkit-border-radius:4px; } #vakata-dragged .jstree-ok { background:green; } #vakata-dragged .jstree-invalid { background:red; } #jstree-marker { padding:0; margin:0; font-size:12px; overflow:hidden; height:12px; width:8px; position:absolute; top:-30px; z-index:10001; background-repeat:no-repeat; display:none; background-color:transparent; text-shadow:1px 1px 1px white; color:black; line-height:10px; } #jstree-marker-line { padding:0; margin:0; line-height:0%; font-size:1px; overflow:hidden; height:1px; width:100px; position:absolute; top:-30px; z-index:10000; background-repeat:no-repeat; display:none; background-color:#456c43;  cursor:pointer; border:1px solid #eeeeee; border-left:0; -moz-box-shadow: 0px 0px 2px #666; -webkit-box-shadow: 0px 0px 2px #666; box-shadow: 0px 0px 2px #666;  -moz-border-radius:1px; border-radius:1px; -webkit-border-radius:1px; }";e.vakata.css.add_sheet({str:t,title:"jstree"}),r=e("<div />").attr({id:"jstree-marker"}).hide().html("&raquo;").bind("mouseleave mouseenter",function(e){return r.hide(),a.hide(),e.preventDefault(),e.stopImmediatePropagation(),!1}).appendTo("body"),a=e("<div />").attr({id:"jstree-marker-line"}).hide().bind("mouseup",function(e){if(i&&i.length)return i.children("a").trigger(e),e.preventDefault(),e.stopImmediatePropagation(),!1}).bind("mouseleave",function(t){var n=e(t.relatedTarget);if((n.is(".jstree")||0===n.closest(".jstree").length)&&i&&i.length)return i.children("a").trigger(t),r.hide(),a.hide(),t.preventDefault(),t.stopImmediatePropagation(),!1}).appendTo("body"),e(document).bind("drag_start.vakata",function(e,t){t.data.jstree&&(r.show(),a&&a.show())}),e(document).bind("drag_stop.vakata",function(e,t){t.data.jstree&&(r.hide(),a&&a.hide())})})}(jQuery),function(e){e.jstree.plugin("checkbox",{__init:function(){this.data.checkbox.noui=this._get_settings().checkbox.override_ui,this.data.ui&&this.data.checkbox.noui&&(this.select_node=this.deselect_node=this.deselect_all=e.noop,this.get_selected=this.get_checked),this.get_container().bind("open_node.jstree create_node.jstree clean_node.jstree refresh.jstree",e.proxy(function(e,t){this._prepare_checkboxes(t.rslt.obj)},this)).bind("loaded.jstree",e.proxy(function(e){this._prepare_checkboxes()},this)).delegate(this.data.ui&&this.data.checkbox.noui?"a":"ins.jstree-checkbox","click.jstree",e.proxy(function(e){return e.preventDefault(),this._get_node(e.target).hasClass("jstree-checked")?this.uncheck_node(e.target):this.check_node(e.target),this.data.ui&&this.data.checkbox.noui?(this.save_selected(),void(this.data.cookies&&this.save_cookie("select_node"))):(e.stopImmediatePropagation(),!1)},this))},defaults:{override_ui:!1,two_state:!1,real_checkboxes:!1,checked_parent_open:!0,real_checkboxes_names:function(e){return["check_"+(e[0].id||Math.ceil(1e4*Math.random())),1]}},__destroy:function(){this.get_container().find("input.jstree-real-checkbox").removeClass("jstree-real-checkbox").end().find("ins.jstree-checkbox").remove()},_fn:{_checkbox_notify:function(e,t){t.checked&&this.check_node(e,!1)},_prepare_checkboxes:function(t){if(t=t&&t!=-1?this._get_node(t):this.get_container().find("> ul > li"),t!==!1){var i,r,a=this,n=this._get_settings().checkbox.two_state,o=this._get_settings().checkbox.real_checkboxes,s=this._get_settings().checkbox.real_checkboxes_names;t.each(function(){r=e(this),i=r.is("li")&&(r.hasClass("jstree-checked")||o&&r.children(":checked").length)?"jstree-checked":"jstree-unchecked",r.find("li").andSelf().each(function(){var t,r=e(this);r.children("a"+(a.data.languages?"":":eq(0)")).not(":has(.jstree-checkbox)").prepend("<ins class='jstree-checkbox'>&#160;</ins>").parent().not(".jstree-checked, .jstree-unchecked").addClass(n?"jstree-unchecked":i),o&&(r.children(":checkbox").length?r.children(":checkbox").addClass("jstree-real-checkbox"):(t=s.call(a,r),r.prepend("<input type='checkbox' class='jstree-real-checkbox' id='"+t[0]+"' name='"+t[0]+"' value='"+t[1]+"' />"))),n?(r.hasClass("jstree-checked")||r.children(":checked").length)&&r.addClass("jstree-checked").children(":checkbox").prop("checked",!0):("jstree-checked"===i||r.hasClass("jstree-checked")||r.children(":checked").length)&&r.find("li").andSelf().addClass("jstree-checked").children(":checkbox").prop("checked",!0)})}),n||t.find(".jstree-checked").parent().parent().each(function(){a._repair_state(this)})}},change_state:function(t,i){t=this._get_node(t);var r=!1,a=this._get_settings().checkbox.real_checkboxes;if(!t||t===-1)return!1;if(i=i===!1||i===!0?i:t.hasClass("jstree-checked"),this._get_settings().checkbox.two_state)i?(t.removeClass("jstree-checked").addClass("jstree-unchecked"),a&&t.children(":checkbox").prop("checked",!1)):(t.removeClass("jstree-unchecked").addClass("jstree-checked"),a&&t.children(":checkbox").prop("checked",!0));else{if(i){if(r=t.find("li").andSelf(),!r.filter(".jstree-checked, .jstree-undetermined").length)return!1;r.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked"),a&&r.children(":checkbox").prop("checked",!1)}else{if(r=t.find("li").andSelf(),!r.filter(".jstree-unchecked, .jstree-undetermined").length)return!1;r.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked"),a&&r.children(":checkbox").prop("checked",!0),this.data.ui&&(this.data.ui.last_selected=t),this.data.checkbox.last_selected=t}t.parentsUntil(".jstree","li").each(function(){var t=e(this);if(i){if(t.children("ul").children("li.jstree-checked, li.jstree-undetermined").length)return t.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),a&&t.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",!1),!1;t.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked"),a&&t.children(":checkbox").prop("checked",!1)}else{if(t.children("ul").children("li.jstree-unchecked, li.jstree-undetermined").length)return t.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),a&&t.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",!1),!1;t.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked"),a&&t.children(":checkbox").prop("checked",!0)}})}return this.data.ui&&this.data.checkbox.noui&&(this.data.ui.selected=this.get_checked()),this.__callback(t),!0},check_node:function(e){if(this.change_state(e,!1)){if(e=this._get_node(e),this._get_settings().checkbox.checked_parent_open){var t=this;e.parents(".jstree-closed").each(function(){t.open_node(this,!1,!0)})}this.__callback({obj:e})}},uncheck_node:function(e){this.change_state(e,!0)&&this.__callback({obj:this._get_node(e)})},check_all:function(){var e=this,t=this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li");t.each(function(){e.change_state(this,!1)}),this.__callback()},uncheck_all:function(){var e=this,t=this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li");t.each(function(){e.change_state(this,!0)}),this.__callback()},is_checked:function(e){return e=this._get_node(e),!!e.length&&e.is(".jstree-checked")},get_checked:function(e,t){return e=e&&e!==-1?this._get_node(e):this.get_container(),t||this._get_settings().checkbox.two_state?e.find(".jstree-checked"):e.find("> ul > .jstree-checked, .jstree-undetermined > ul > .jstree-checked")},get_unchecked:function(e,t){return e=e&&e!==-1?this._get_node(e):this.get_container(),t||this._get_settings().checkbox.two_state?e.find(".jstree-unchecked"):e.find("> ul > .jstree-unchecked, .jstree-undetermined > ul > .jstree-unchecked")},show_checkboxes:function(){this.get_container().children("ul").removeClass("jstree-no-checkboxes")},hide_checkboxes:function(){this.get_container().children("ul").addClass("jstree-no-checkboxes")},_repair_state:function(e){if(e=this._get_node(e),e.length){if(this._get_settings().checkbox.two_state)return void e.find("li").andSelf().not(".jstree-checked").removeClass("jstree-undetermined").addClass("jstree-unchecked").children(":checkbox").prop("checked",!0);var t=this._get_settings().checkbox.real_checkboxes,i=e.find("> ul > .jstree-checked").length,r=e.find("> ul > .jstree-undetermined").length,a=e.find("> ul > li").length;0===a?e.hasClass("jstree-undetermined")&&this.change_state(e,!1):0===i&&0===r?this.change_state(e,!0):i===a?this.change_state(e,!1):(e.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),t&&e.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",!1))}},reselect:function(){if(this.data.ui&&this.data.checkbox.noui){var t=this,i=this.data.ui.to_select;i=e.map(e.makeArray(i),function(e){return"#"+e.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.deselect_all(),e.each(i,function(e,i){t.check_node(i)}),this.__callback()}else this.__call_old()},save_loaded:function(){var e=this;this.data.core.to_load=[],this.get_container_ul().find("li.jstree-closed.jstree-undetermined").each(function(){this.id&&e.data.core.to_load.push("#"+this.id)})}}}),e(function(){var t=".jstree .jstree-real-checkbox { display:none; } ";e.vakata.css.add_sheet({str:t,title:"jstree"})})}(jQuery),function(e){e.vakata.xslt=function(t,i,r){var a,n,o,s=!1;if(s===!1&&window.ActiveXObject)try{s=new ActiveXObject("Msxml2.XSLTemplate"),n=new ActiveXObject("Msxml2.DOMDocument"),n.loadXML(t),o=new ActiveXObject("Msxml2.FreeThreadedDOMDocument"),o.loadXML(i),s.stylesheet=o,a=s.createProcessor(),a.input=n,a.transform(),s=a.output}catch(l){}t=e.parseXML(t),i=e.parseXML(i),s===!1&&"undefined"!=typeof XSLTProcessor&&(a=new XSLTProcessor,a.importStylesheet(i),s=a.transformToFragment(t,document),s=e("<div />").append(s).html()),s===!1&&"undefined"!=typeof t.transformNode&&(s=t.transformNode(i)),r.call(null,s)};var t={nest:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/html" /><xsl:template match="/">\t<xsl:call-template name="nodes">\t\t<xsl:with-param name="node" select="/root" />\t</xsl:call-template></xsl:template><xsl:template name="nodes">\t<xsl:param name="node" />\t<ul>\t<xsl:for-each select="$node/item">\t\t<xsl:variable name="children" select="count(./item) &gt; 0" />\t\t<li>\t\t\t<xsl:attribute name="class">\t\t\t\t<xsl:if test="position() = last()">jstree-last </xsl:if>\t\t\t\t<xsl:choose>\t\t\t\t\t<xsl:when test="@state = \'open\'">jstree-open </xsl:when>\t\t\t\t\t<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>\t\t\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>\t\t\t\t</xsl:choose>\t\t\t\t<xsl:value-of select="@class" />\t\t\t</xsl:attribute>\t\t\t<xsl:for-each select="@*">\t\t\t\t<xsl:if test="name() != \'class\' and name() != \'state\' and name() != \'hasChildren\'">\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t\t</xsl:if>\t\t\t</xsl:for-each>\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>\t\t\t<xsl:for-each select="content/name">\t\t\t\t<a>\t\t\t\t<xsl:attribute name="href">\t\t\t\t\t<xsl:choose>\t\t\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>\t\t\t\t\t<xsl:otherwise>#</xsl:otherwise>\t\t\t\t\t</xsl:choose>\t\t\t\t</xsl:attribute>\t\t\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>\t\t\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>\t\t\t\t<xsl:for-each select="@*">\t\t\t\t\t<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">\t\t\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t\t\t</xsl:if>\t\t\t\t</xsl:for-each>\t\t\t\t\t<ins>\t\t\t\t\t\t<xsl:attribute name="class">jstree-icon \t\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>\t\t\t\t\t\t</xsl:attribute>\t\t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>\t\t\t\t\t\t<xsl:text>&#xa0;</xsl:text>\t\t\t\t\t</ins>\t\t\t\t\t<xsl:copy-of select="./child::node()" />\t\t\t\t</a>\t\t\t</xsl:for-each>\t\t\t<xsl:if test="$children or @hasChildren"><xsl:call-template name="nodes"><xsl:with-param name="node" select="current()" /></xsl:call-template></xsl:if>\t\t</li>\t</xsl:for-each>\t</ul></xsl:template></xsl:stylesheet>',flat:'<?xml version="1.0" encoding="utf-8" ?><xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" ><xsl:output method="html" encoding="utf-8" omit-xml-declaration="yes" standalone="no" indent="no" media-type="text/xml" /><xsl:template match="/">\t<ul>\t<xsl:for-each select="//item[not(@parent_id) or @parent_id=0 or not(@parent_id = //item/@id)]">\t\t<xsl:call-template name="nodes">\t\t\t<xsl:with-param name="node" select="." />\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />\t\t</xsl:call-template>\t</xsl:for-each>\t</ul></xsl:template><xsl:template name="nodes">\t<xsl:param name="node" />\t<xsl:param name="is_last" />\t<xsl:variable name="children" select="count(//item[@parent_id=$node/attribute::id]) &gt; 0" />\t<li>\t<xsl:attribute name="class">\t\t<xsl:if test="$is_last = true()">jstree-last </xsl:if>\t\t<xsl:choose>\t\t\t<xsl:when test="@state = \'open\'">jstree-open </xsl:when>\t\t\t<xsl:when test="$children or @hasChildren or @state = \'closed\'">jstree-closed </xsl:when>\t\t\t<xsl:otherwise>jstree-leaf </xsl:otherwise>\t\t</xsl:choose>\t\t<xsl:value-of select="@class" />\t</xsl:attribute>\t<xsl:for-each select="@*">\t\t<xsl:if test="name() != \'parent_id\' and name() != \'hasChildren\' and name() != \'class\' and name() != \'state\'">\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t</xsl:if>\t</xsl:for-each>\t<ins class="jstree-icon"><xsl:text>&#xa0;</xsl:text></ins>\t<xsl:for-each select="content/name">\t\t<a>\t\t<xsl:attribute name="href">\t\t\t<xsl:choose>\t\t\t<xsl:when test="@href"><xsl:value-of select="@href" /></xsl:when>\t\t\t<xsl:otherwise>#</xsl:otherwise>\t\t\t</xsl:choose>\t\t</xsl:attribute>\t\t<xsl:attribute name="class"><xsl:value-of select="@lang" /> <xsl:value-of select="@class" /></xsl:attribute>\t\t<xsl:attribute name="style"><xsl:value-of select="@style" /></xsl:attribute>\t\t<xsl:for-each select="@*">\t\t\t<xsl:if test="name() != \'style\' and name() != \'class\' and name() != \'href\'">\t\t\t\t<xsl:attribute name="{name()}"><xsl:value-of select="." /></xsl:attribute>\t\t\t</xsl:if>\t\t</xsl:for-each>\t\t\t<ins>\t\t\t\t<xsl:attribute name="class">jstree-icon \t\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and not(contains(@icon,\'/\'))"><xsl:value-of select="@icon" /></xsl:if>\t\t\t\t</xsl:attribute>\t\t\t\t<xsl:if test="string-length(attribute::icon) > 0 and contains(@icon,\'/\')"><xsl:attribute name="style">background:url(<xsl:value-of select="@icon" />) center center no-repeat;</xsl:attribute></xsl:if>\t\t\t\t<xsl:text>&#xa0;</xsl:text>\t\t\t</ins>\t\t\t<xsl:copy-of select="./child::node()" />\t\t</a>\t</xsl:for-each>\t<xsl:if test="$children">\t\t<ul>\t\t<xsl:for-each select="//item[@parent_id=$node/attribute::id]">\t\t\t<xsl:call-template name="nodes">\t\t\t\t<xsl:with-param name="node" select="." />\t\t\t\t<xsl:with-param name="is_last" select="number(position() = last())" />\t\t\t</xsl:call-template>\t\t</xsl:for-each>\t\t</ul>\t</xsl:if>\t</li></xsl:template></xsl:stylesheet>'},i=function(e){return e.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")};e.jstree.plugin("xml_data",{defaults:{data:!1,ajax:!1,xsl:"flat",clean_node:!1,correct_state:!0,get_skip_empty:!1,get_include_preamble:!0},_fn:{load_node:function(e,t,i){var r=this;this.load_node_xml(e,function(){r.__callback({obj:r._get_node(e)}),t.call(this)},i)},_is_loaded:function(t){var i=this._get_settings().xml_data;return t=this._get_node(t),t==-1||!t||!i.ajax&&!e.isFunction(i.data)||t.is(".jstree-open, .jstree-leaf")||t.children("ul").children("li").size()>0},load_node_xml:function(t,i,r){var a=this.get_settings().xml_data,n=function(){},o=function(){};if(t=this._get_node(t),t&&t!==-1){if(t.data("jstree_is_loading"))return;t.data("jstree_is_loading",!0)}switch(!0){case!a.data&&!a.ajax:throw"Neither data nor ajax settings supplied.";case e.isFunction(a.data):a.data.call(this,t,e.proxy(function(r){this.parse_xml(r,e.proxy(function(r){r&&(r=r.replace(/ ?xmlns="[^"]*"/gi,""),r.length>10?(r=e(r),t!==-1&&t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.append(r),t.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(r.children()),a.clean_node&&this.clean_node(t),i&&i.call(this)):t&&t!==-1?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),a.correct_state&&(this.correct_state(t),i&&i.call(this))):a.correct_state&&(this.get_container().children("ul").empty(),i&&i.call(this)))},this))},this));break;case!!a.data&&!a.ajax||!!a.data&&!!a.ajax&&(!t||t===-1):t&&t!=-1||this.parse_xml(a.data,e.proxy(function(r){r?(r=r.replace(/ ?xmlns="[^"]*"/gi,""),r.length>10&&(r=e(r),this.get_container().children("ul").empty().append(r.children()),a.clean_node&&this.clean_node(t),i&&i.call(this))):a.correct_state&&(this.get_container().children("ul").empty(),i&&i.call(this))},this));break;case!a.data&&!!a.ajax||!!a.data&&!!a.ajax&&t&&t!==-1:n=function(e,i,n){var o=this.get_settings().xml_data.ajax.error;o&&o.call(this,e,i,n),t!==-1&&t.length?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),"success"===i&&a.correct_state&&this.correct_state(t)):"success"===i&&a.correct_state&&this.get_container().children("ul").empty(),r&&r.call(this)},o=function(r,o,s){r=s.responseText;var l=this.get_settings().xml_data.ajax.success;return l&&(r=l.call(this,r,o,s)||r),""===r||r&&r.toString&&""===r.toString().replace(/^[\s\n]+$/,"")?n.call(this,s,o,""):void this.parse_xml(r,e.proxy(function(r){r&&(r=r.replace(/ ?xmlns="[^"]*"/gi,""),r.length>10?(r=e(r),t!==-1&&t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.append(r),t.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(r.children()),a.clean_node&&this.clean_node(t),i&&i.call(this)):t&&t!==-1?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),a.correct_state&&(this.correct_state(t),i&&i.call(this))):a.correct_state&&(this.get_container().children("ul").empty(),i&&i.call(this)))},this))},a.ajax.context=this,a.ajax.error=n,a.ajax.success=o,a.ajax.dataType||(a.ajax.dataType="xml"),e.isFunction(a.ajax.url)&&(a.ajax.url=a.ajax.url.call(this,t)),e.isFunction(a.ajax.data)&&(a.ajax.data=a.ajax.data.call(this,t)),e.ajax(a.ajax)}},parse_xml:function(i,r){var a=this._get_settings().xml_data;e.vakata.xslt(i,t[a.xsl],r)},get_xml:function(t,r,a,n,o){var s,l,d,u,c,p="",h=this._get_settings(),f=this;return t||(t="flat"),o||(o=0),r=this._get_node(r),r&&r!==-1||(r=this.get_container().find("> ul > li")),a=e.isArray(a)?a:["id","class"],!o&&this.data.types&&e.inArray(h.types.type_attr,a)===-1&&a.push(h.types.type_attr),n=e.isArray(n)?n:[],o||(h.xml_data.get_include_preamble&&(p+='<?xml version="1.0" encoding="UTF-8"?>'),p+="<root>"),r.each(function(){p+="<item",d=e(this),e.each(a,function(e,t){var r=d.attr(t);h.xml_data.get_skip_empty&&"undefined"==typeof r||(p+=" "+t+'="'+i((" "+(r||"")).replace(/ jstree[^ ]*/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,""))+'"')}),d.hasClass("jstree-open")&&(p+=' state="open"'),d.hasClass("jstree-closed")&&(p+=' state="closed"'),"flat"===t&&(p+=' parent_id="'+i(o)+'"'),p+=">",p+="<content>",u=d.children("a"),u.each(function(){s=e(this),c=!1,p+="<name",e.inArray("languages",h.plugins)!==-1&&e.each(h.languages,function(e,t){if(s.hasClass(t))return p+=' lang="'+i(t)+'"',c=t,!1}),n.length&&e.each(n,function(e,t){var r=s.attr(t);h.xml_data.get_skip_empty&&"undefined"==typeof r||(p+=" "+t+'="'+i((" "+r||"").replace(/ jstree[^ ]*/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,""))+'"')}),s.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").replace(/^\s+$/gi,"").length&&(p+=' icon="'+i(s.children("ins").get(0).className.replace(/jstree[^ ]*|$/gi,"").replace(/\s+$/gi," ").replace(/^ /,"").replace(/ $/,""))+'"'),s.children("ins").get(0).style.backgroundImage.length&&(p+=' icon="'+i(s.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","").replace(/'/gi,"").replace(/"/gi,""))+'"'),p+=">",p+="<![CDATA["+f.get_text(s,c)+"]]>",p+="</name>"}),p+="</content>",l=d[0].id||!0,d=d.find("> ul > li"),l=d.length?f.get_xml(t,d,a,n,l):"","nest"==t&&(p+=l),p+="</item>","flat"==t&&(p+=l)}),o||(p+="</root>"),p}}})}(jQuery),function(e){e().jquery.split(".")[1]>=8?(e.expr[":"].jstree_contains=e.expr.createPseudo(function(e){return function(t){return(t.textContent||t.innerText||"").toLowerCase().indexOf(e.toLowerCase())>=0}}),e.expr[":"].jstree_title_contains=e.expr.createPseudo(function(e){return function(t){return(t.getAttribute("title")||"").toLowerCase().indexOf(e.toLowerCase())>=0}})):(e.expr[":"].jstree_contains=function(e,t,i){return(e.textContent||e.innerText||"").toLowerCase().indexOf(i[3].toLowerCase())>=0},e.expr[":"].jstree_title_contains=function(e,t,i){return(e.getAttribute("title")||"").toLowerCase().indexOf(i[3].toLowerCase())>=0}),e.jstree.plugin("search",{__init:function(){this.data.search.str="",this.data.search.result=e(),this._get_settings().search.show_only_matches&&this.get_container().bind("search.jstree",function(t,i){e(this).children("ul").find("li").hide().removeClass("jstree-last"),i.rslt.nodes.parentsUntil(".jstree").andSelf().show().filter("ul").each(function(){e(this).children("li:visible").eq(-1).addClass("jstree-last")})}).bind("clear_search.jstree",function(){e(this).children("ul").find("li").css("display","").end().end().jstree("clean_node",-1)})},defaults:{ajax:!1,search_method:"jstree_contains",show_only_matches:!1},_fn:{search:function(t,i){if(""===e.trim(t))return void this.clear_search();var r=this.get_settings().search,a=this,n=function(){},o=function(){};return this.data.search.str=t,!i&&r.ajax!==!1&&this.get_container_ul().find("li.jstree-closed:not(:has(ul)):eq(0)").length>0?(this.search.supress_callback=!0,n=function(){},o=function(e,t,i){var r=this.get_settings().search.ajax.success;r&&(e=r.call(this,e,t,i)||e),this.data.search.to_open=e,this._search_open()},r.ajax.context=this,r.ajax.error=n,r.ajax.success=o,e.isFunction(r.ajax.url)&&(r.ajax.url=r.ajax.url.call(this,t)),e.isFunction(r.ajax.data)&&(r.ajax.data=r.ajax.data.call(this,t)),r.ajax.data||(r.ajax.data={search_string:t}),r.ajax.dataType&&!/^json/.exec(r.ajax.dataType)||(r.ajax.dataType="json"),void e.ajax(r.ajax)):(this.data.search.result.length&&this.clear_search(),this.data.search.result=this.get_container().find("a"+(this.data.languages?"."+this.get_lang():"")+":"+r.search_method+"("+this.data.search.str+")"),this.data.search.result.addClass("jstree-search").parent().parents(".jstree-closed").each(function(){a.open_node(this,!1,!0)}),void this.__callback({nodes:this.data.search.result,str:t}))},clear_search:function(t){this.data.search.result.removeClass("jstree-search"),this.__callback(this.data.search.result),this.data.search.result=e()},_search_open:function(t){var i=this,r=!0,a=[],n=[];this.data.search.to_open.length&&(e.each(this.data.search.to_open,function(t,i){return"#"==i||void(e(i).length&&e(i).is(".jstree-closed")?a.push(i):n.push(i))}),a.length&&(this.data.search.to_open=n,e.each(a,function(e,t){i.open_node(t,function(){i._search_open(!0)})}),r=!1)),r&&this.search(this.data.search.str,!0)}}})}(jQuery),function(e){e.vakata.context={hide_on_mouseleave:!1,cnt:e("<div id='vakata-contextmenu' />"),vis:!1,tgt:!1,par:!1,func:!1,data:!1,rtl:!1,show:function(t,i,r,a,n,o,s){e.vakata.context.rtl=!!s;var l,d,u=e.vakata.context.parse(t);u&&(e.vakata.context.vis=!0,e.vakata.context.tgt=i,e.vakata.context.par=o||i||null,e.vakata.context.data=n||null,e.vakata.context.cnt.html(u).css({visibility:"hidden",display:"block",left:0,top:0}),e.vakata.context.hide_on_mouseleave&&e.vakata.context.cnt.one("mouseleave",function(t){e.vakata.context.hide()}),l=e.vakata.context.cnt.height(),d=e.vakata.context.cnt.width(),r+d>e(document).width()&&(r=e(document).width()-(d+5),e.vakata.context.cnt.find("li > ul").addClass("right")),a+l>e(document).height()&&(a-=l+i[0].offsetHeight,e.vakata.context.cnt.find("li > ul").addClass("bottom")),e.vakata.context.cnt.css({left:r,top:a}).find("li:has(ul)").bind("mouseenter",function(t){var i=e(document).width(),r=e(document).height(),a=e(this).children("ul").show();i!==e(document).width()&&a.toggleClass("right"),r!==e(document).height()&&a.toggleClass("bottom")}).bind("mouseleave",function(t){e(this).children("ul").hide()}).end().css({visibility:"visible"}).show(),e(document).triggerHandler("context_show.vakata"))},hide:function(){e.vakata.context.vis=!1,e.vakata.context.cnt.attr("class","").css({visibility:"hidden"}),e(document).triggerHandler("context_hide.vakata")},parse:function(t,i){if(!t)return!1;var r="",a=!1,n=!0;return i||(e.vakata.context.func={}),r+="<ul>",e.each(t,function(t,i){return!i||(e.vakata.context.func[t]=i.action,!n&&i.separator_before&&(r+="<li class='vakata-separator vakata-separator-before'></li>"),n=!1,r+="<li class='"+(i._class||"")+(i._disabled?" jstree-contextmenu-disabled ":"")+"'><ins ",i.icon&&i.icon.indexOf("/")===-1&&(r+=" class='"+i.icon+"' "),i.icon&&i.icon.indexOf("/")!==-1&&(r+=" style='background:url("+i.icon+") center center no-repeat;' "),r+=">&#160;</ins><a href='#' rel='"+t+"'>",i.submenu&&(r+="<span style='float:"+(e.vakata.context.rtl?"left":"right")+";'>&raquo;</span>"),r+=i.label+"</a>",i.submenu&&(a=e.vakata.context.parse(i.submenu,!0),a&&(r+=a)),r+="</li>",void(i.separator_after&&(r+="<li class='vakata-separator vakata-separator-after'></li>",n=!0)))}),r=r.replace(/<li class\='vakata-separator vakata-separator-after'\><\/li\>$/,""),r+="</ul>",e(document).triggerHandler("context_parse.vakata"),r.length>10&&r},exec:function(t){return!!e.isFunction(e.vakata.context.func[t])&&(e.vakata.context.func[t].call(e.vakata.context.data,e.vakata.context.par),!0)}},e(function(){var t="#vakata-contextmenu { display:block; visibility:hidden; left:0; top:-200px; position:absolute; margin:0; padding:0; min-width:180px; background:#ebebeb; border:1px solid silver; z-index:10000; *width:180px; } #vakata-contextmenu ul { min-width:180px; *width:180px; } #vakata-contextmenu ul, #vakata-contextmenu li { margin:0; padding:0; list-style-type:none; display:block; } #vakata-contextmenu li { line-height:20px; min-height:20px; position:relative; padding:0px; } #vakata-contextmenu li a { padding:1px 6px; line-height:17px; display:block; text-decoration:none; margin:1px 1px 0 1px; } #vakata-contextmenu li ins { float:left; width:16px; height:16px; text-decoration:none; margin-right:2px; } #vakata-contextmenu li a:hover, #vakata-contextmenu li.vakata-hover > a { background:gray; color:white; } #vakata-contextmenu li ul { display:none; position:absolute; top:-2px; left:100%; background:#ebebeb; border:1px solid gray; } #vakata-contextmenu .right { right:100%; left:auto; } #vakata-contextmenu .bottom { bottom:-1px; top:auto; } #vakata-contextmenu li.vakata-separator { min-height:0; height:1px; line-height:1px; font-size:1px; overflow:hidden; margin:0 2px; background:silver; /* border-top:1px solid #fefefe; */ padding:0; } ";e.vakata.css.add_sheet({str:t,title:"vakata"}),e.vakata.context.cnt.delegate("a","click",function(e){e.preventDefault()}).delegate("a","mouseup",function(t){!e(this).parent().hasClass("jstree-contextmenu-disabled")&&e.vakata.context.exec(e(this).attr("rel"))?e.vakata.context.hide():e(this).blur()}).delegate("a","mouseover",function(){e.vakata.context.cnt.find(".vakata-hover").removeClass("vakata-hover")}).appendTo("body"),e(document).bind("mousedown",function(t){e.vakata.context.vis&&!e.contains(e.vakata.context.cnt[0],t.target)&&e.vakata.context.hide()}),"undefined"!=typeof e.hotkeys&&e(document).bind("keydown","up",function(t){if(e.vakata.context.vis){var i=e.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").prevAll("li:not(.vakata-separator)").first();i.length||(i=e.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").last()),i.addClass("vakata-hover"),t.stopImmediatePropagation(),t.preventDefault()}}).bind("keydown","down",function(t){if(e.vakata.context.vis){var i=e.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").nextAll("li:not(.vakata-separator)").first();i.length||(i=e.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").first()),i.addClass("vakata-hover"),t.stopImmediatePropagation(),t.preventDefault()}}).bind("keydown","right",function(t){e.vakata.context.vis&&(e.vakata.context.cnt.find(".vakata-hover").children("ul").show().children("li:not(.vakata-separator)").removeClass("vakata-hover").first().addClass("vakata-hover"),t.stopImmediatePropagation(),t.preventDefault())}).bind("keydown","left",function(t){e.vakata.context.vis&&(e.vakata.context.cnt.find(".vakata-hover").children("ul").hide().children(".vakata-separator").removeClass("vakata-hover"),t.stopImmediatePropagation(),t.preventDefault())}).bind("keydown","esc",function(t){e.vakata.context.hide(),t.preventDefault()}).bind("keydown","space",function(t){e.vakata.context.cnt.find(".vakata-hover").last().children("a").click(),
t.preventDefault()})}),e.jstree.plugin("contextmenu",{__init:function(){this.get_container().delegate("a","contextmenu.jstree",e.proxy(function(t){t.preventDefault(),e(t.currentTarget).hasClass("jstree-loading")||this.show_contextmenu(t.currentTarget,t.pageX,t.pageY)},this)).delegate("a","click.jstree",e.proxy(function(t){this.data.contextmenu&&e.vakata.context.hide()},this)).bind("destroy.jstree",e.proxy(function(){this.data.contextmenu&&e.vakata.context.hide()},this)),e(document).bind("context_hide.vakata",e.proxy(function(){this.data.contextmenu=!1},this))},defaults:{select_node:!1,show_at_node:!0,items:{create:{separator_before:!1,separator_after:!0,label:"Create",action:function(e){this.create(e)}},rename:{separator_before:!1,separator_after:!1,label:"Rename",action:function(e){this.rename(e)}},remove:{separator_before:!1,icon:!1,separator_after:!1,label:"Delete",action:function(e){this.is_selected(e)?this.remove():this.remove(e)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,separator_after:!1,label:"Cut",action:function(e){this.cut(e)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(e){this.copy(e)}},paste:{separator_before:!1,icon:!1,separator_after:!1,label:"Paste",action:function(e){this.paste(e)}}}}}},_fn:{show_contextmenu:function(t,i,r){t=this._get_node(t);var a=this.get_settings().contextmenu,n=t.children("a:visible:eq(0)"),o=!1,s=!1;a.select_node&&this.data.ui&&!this.is_selected(t)&&(this.deselect_all(),this.select_node(t,!0)),(a.show_at_node||"undefined"==typeof i||"undefined"==typeof r)&&(o=n.offset(),i=o.left,r=o.top+this.data.core.li_height),s=t.data("jstree")&&t.data("jstree").contextmenu?t.data("jstree").contextmenu:a.items,e.isFunction(s)&&(s=s.call(this,t)),this.data.contextmenu=!0,e.vakata.context.show(s,n,i,r,this,t,this._get_settings().core.rtl),this.data.themes&&e.vakata.context.cnt.attr("class","jstree-"+this.data.themes.theme+"-context")}}})}(jQuery),function(t){t.jstree.plugin("types",{__init:function(){var i=this._get_settings().types;this.data.types.attach_to=[],this.get_container().bind("init.jstree",t.proxy(function(){var e=i.types,r=i.type_attr,a="",n=this;t.each(e,function(e,i){return t.each(i,function(e,t){/^(max_depth|max_children|icon|valid_children)$/.test(e)||n.data.types.attach_to.push(e)}),!i.icon||void((i.icon.image||i.icon.position)&&(a+="default"==e?".jstree-"+n.get_index()+" a > .jstree-icon { ":".jstree-"+n.get_index()+" li["+r+'="'+e+'"] > a > .jstree-icon { ',i.icon.image&&(a+=" background-image:url("+i.icon.image+"); "),a+=i.icon.position?" background-position:"+i.icon.position+"; ":" background-position:0 0; ",a+="} "))}),""!==a&&t.vakata.css.add_sheet({str:a,title:"jstree-types"})},this)).bind("before.jstree",t.proxy(function(e,i){var r,a,n=!!this._get_settings().types.use_data&&this._get_node(i.args[0]),o=!(!n||n===-1||!n.length)&&n.data("jstree");if(o&&o.types&&o.types[i.func]===!1)return e.stopImmediatePropagation(),!1;if(t.inArray(i.func,this.data.types.attach_to)!==-1){if(!i.args[0]||!i.args[0].tagName&&!i.args[0].jquery)return;if(r=this._get_settings().types.types,a=this._get_type(i.args[0]),(r[a]&&"undefined"!=typeof r[a][i.func]||r["default"]&&"undefined"!=typeof r["default"][i.func])&&this._check(i.func,i.args[0])===!1)return e.stopImmediatePropagation(),!1}},this)),e&&this.get_container().bind("load_node.jstree set_type.jstree",t.proxy(function(e,i){var r=i&&i.rslt&&i.rslt.obj&&i.rslt.obj!==-1?this._get_node(i.rslt.obj).parent():this.get_container_ul(),a=!1,n=this._get_settings().types;t.each(n.types,function(e,t){t.icon&&(t.icon.image||t.icon.position)&&(a="default"===e?r.find("li > a > .jstree-icon"):r.find("li["+n.type_attr+"='"+e+"'] > a > .jstree-icon"),t.icon.image&&a.css("backgroundImage","url("+t.icon.image+")"),a.css("backgroundPosition",t.icon.position||"0 0"))})},this))},defaults:{max_children:-1,max_depth:-1,valid_children:"all",use_data:!1,type_attr:"rel",types:{"default":{max_children:-1,max_depth:-1,valid_children:"all"}}},_fn:{_types_notify:function(e,t){t.type&&this._get_settings().types.use_data&&this.set_type(t.type,e)},_get_type:function(e){return e=this._get_node(e),!(!e||!e.length)&&(e.attr(this._get_settings().types.type_attr)||"default")},set_type:function(e,t){t=this._get_node(t);var i=!(!t.length||!e)&&t.attr(this._get_settings().types.type_attr,e);return i&&this.__callback({obj:t,type:e}),i},_check:function(e,i,r){i=this._get_node(i);var a=!1,n=this._get_type(i),o=0,s=this,l=this._get_settings().types,d=!1;if(i===-1){if(!l[e])return;a=l[e]}else{if(n===!1)return;d=!!l.use_data&&i.data("jstree"),d&&d.types&&"undefined"!=typeof d.types[e]?a=d.types[e]:l.types[n]&&"undefined"!=typeof l.types[n][e]?a=l.types[n][e]:l.types["default"]&&"undefined"!=typeof l.types["default"][e]&&(a=l.types["default"][e])}return t.isFunction(a)&&(a=a.call(this,i)),"max_depth"===e&&i!==-1&&r!==!1&&l.max_depth!==-2&&0!==a&&i.children("a:eq(0)").parentsUntil(".jstree","li").each(function(t){return l.max_depth!==-1&&l.max_depth-(t+1)<=0?(a=0,!1):(o=0===t?a:s._check(e,this,!1),o!==-1&&o-(t+1)<=0?(a=0,!1):(o>=0&&(o-(t+1)<a||a<0)&&(a=o-(t+1)),void(l.max_depth>=0&&(l.max_depth-(t+1)<a||a<0)&&(a=l.max_depth-(t+1)))))}),a},check_move:function(){if(!this.__call_old())return!1;var e,i=this._get_move(),r=i.rt._get_settings().types,a=i.rt._check("max_children",i.cr),n=i.rt._check("max_depth",i.cr),o=i.rt._check("valid_children",i.cr),s=0,l=1;if("none"===o)return!1;if(t.isArray(o)&&i.ot&&i.ot._get_type&&(i.o.each(function(){if(t.inArray(i.ot._get_type(this),o)===-1)return l=!1,!1}),l===!1))return!1;if(r.max_children!==-2&&a!==-1&&(s=i.cr===-1?this.get_container().find("> ul > li").not(i.o).length:i.cr.find("> ul > li").not(i.o).length,s+i.o.length>a))return!1;if(r.max_depth!==-2&&n!==-1){if(l=0,0===n)return!1;if("undefined"==typeof i.o.d){for(e=i.o;e.length>0;)e=e.find("> ul > li"),l++;i.o.d=l}if(n-i.o.d<0)return!1}return!0},create_node:function(e,i,r,a,n,o){if(!o&&(n||this._is_loaded(e))){var s,l="string"==typeof i&&i.match(/^before|after$/i)&&e!==-1?this._get_parent(e):this._get_node(e),d=this._get_settings().types,u=this._check("max_children",l),c=this._check("max_depth",l),p=this._check("valid_children",l);if("string"==typeof r&&(r={data:r}),r||(r={}),"none"===p)return!1;if(t.isArray(p))if(r.attr&&r.attr[d.type_attr]){if(t.inArray(r.attr[d.type_attr],p)===-1)return!1}else r.attr||(r.attr={}),r.attr[d.type_attr]=p[0];if(d.max_children!==-2&&u!==-1&&(s=l===-1?this.get_container().find("> ul > li").length:l.find("> ul > li").length,s+1>u))return!1;if(d.max_depth!==-2&&c!==-1&&c-1<0)return!1}return this.__call_old(!0,e,i,r,a,n,o)}}})}(jQuery),function(e){e.jstree.plugin("html_data",{__init:function(){this.data.html_data.original_container_html=this.get_container().find(" > ul > li").clone(!0),this.data.html_data.original_container_html.find("li").andSelf().contents().filter(function(){return 3==this.nodeType}).remove()},defaults:{data:!1,ajax:!1,correct_state:!0},_fn:{load_node:function(e,t,i){var r=this;this.load_node_html(e,function(){r.__callback({obj:r._get_node(e)}),t.call(this)},i)},_is_loaded:function(t){return t=this._get_node(t),t==-1||!t||!this._get_settings().html_data.ajax&&!e.isFunction(this._get_settings().html_data.data)||t.is(".jstree-open, .jstree-leaf")||t.children("ul").children("li").size()>0},load_node_html:function(t,i,r){var a,n=this.get_settings().html_data,o=function(){},s=function(){};if(t=this._get_node(t),t&&t!==-1){if(t.data("jstree_is_loading"))return;t.data("jstree_is_loading",!0)}switch(!0){case e.isFunction(n.data):n.data.call(this,t,e.proxy(function(r){r&&""!==r&&r.toString&&""!==r.toString().replace(/^[\s\n]+$/,"")?(r=e(r),r.is("ul")||(r=e("<ul />").append(r)),t!=-1&&t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.append(r).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),t.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(r.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node(t),i&&i.call(this)):t&&t!==-1?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),n.correct_state&&(this.correct_state(t),i&&i.call(this))):n.correct_state&&(this.get_container().children("ul").empty(),i&&i.call(this))},this));break;case!n.data&&!n.ajax:t&&t!=-1||(this.get_container().children("ul").empty().append(this.data.html_data.original_container_html).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node()),i&&i.call(this);break;case!!n.data&&!n.ajax||!!n.data&&!!n.ajax&&(!t||t===-1):t&&t!=-1||(a=e(n.data),a.is("ul")||(a=e("<ul />").append(a)),this.get_container().children("ul").empty().append(a.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node()),i&&i.call(this);break;case!n.data&&!!n.ajax||!!n.data&&!!n.ajax&&t&&t!==-1:t=this._get_node(t),o=function(e,i,a){var o=this.get_settings().html_data.ajax.error;o&&o.call(this,e,i,a),t!=-1&&t.length?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),"success"===i&&n.correct_state&&this.correct_state(t)):"success"===i&&n.correct_state&&this.get_container().children("ul").empty(),r&&r.call(this)},s=function(r,a,s){var l=this.get_settings().html_data.ajax.success;return l&&(r=l.call(this,r,a,s)||r),""===r||r&&r.toString&&""===r.toString().replace(/^[\s\n]+$/,"")?o.call(this,s,a,""):void(r?(r=e(r),r.is("ul")||(r=e("<ul />").append(r)),t!=-1&&t?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.append(r).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),t.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(r.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("<ins class='jstree-icon'>&#160;</ins>").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node(t),i&&i.call(this)):t&&t!==-1?(t.children("a.jstree-loading").removeClass("jstree-loading"),t.removeData("jstree_is_loading"),n.correct_state&&(this.correct_state(t),i&&i.call(this))):n.correct_state&&(this.get_container().children("ul").empty(),i&&i.call(this)))},n.ajax.context=this,n.ajax.error=o,n.ajax.success=s,n.ajax.dataType||(n.ajax.dataType="html"),e.isFunction(n.ajax.url)&&(n.ajax.url=n.ajax.url.call(this,t)),e.isFunction(n.ajax.data)&&(n.ajax.data=n.ajax.data.call(this,t)),e.ajax(n.ajax)}}}}),e.jstree.defaults.plugins.push("html_data")}(jQuery),function(e){e.jstree.plugin("themeroller",{__init:function(){var t=this._get_settings().themeroller;this.get_container().addClass("ui-widget-content").addClass("jstree-themeroller").delegate("a","mouseenter.jstree",function(i){e(i.currentTarget).hasClass("jstree-loading")||e(this).addClass(t.item_h)}).delegate("a","mouseleave.jstree",function(){e(this).removeClass(t.item_h)}).bind("init.jstree",e.proxy(function(e,t){t.inst.get_container().find("> ul > li > .jstree-loading > ins").addClass("ui-icon-refresh"),this._themeroller(t.inst.get_container().find("> ul > li"))},this)).bind("open_node.jstree create_node.jstree",e.proxy(function(e,t){this._themeroller(t.rslt.obj)},this)).bind("loaded.jstree refresh.jstree",e.proxy(function(e){this._themeroller()},this)).bind("close_node.jstree",e.proxy(function(e,t){this._themeroller(t.rslt.obj)},this)).bind("delete_node.jstree",e.proxy(function(e,t){this._themeroller(t.rslt.parent)},this)).bind("correct_state.jstree",e.proxy(function(e,i){i.rslt.obj.children("ins.jstree-icon").removeClass(t.opened+" "+t.closed+" ui-icon").end().find("> a > ins.ui-icon").filter(function(){return this.className.toString().replace(t.item_clsd,"").replace(t.item_open,"").replace(t.item_leaf,"").indexOf("ui-icon-")===-1}).removeClass(t.item_open+" "+t.item_clsd).addClass(t.item_leaf||"jstree-no-icon")},this)).bind("select_node.jstree",e.proxy(function(e,i){i.rslt.obj.children("a").addClass(t.item_a)},this)).bind("deselect_node.jstree deselect_all.jstree",e.proxy(function(e,i){this.get_container().find("a."+t.item_a).removeClass(t.item_a).end().find("a.jstree-clicked").addClass(t.item_a)},this)).bind("dehover_node.jstree",e.proxy(function(e,i){i.rslt.obj.children("a").removeClass(t.item_h)},this)).bind("hover_node.jstree",e.proxy(function(e,i){this.get_container().find("a."+t.item_h).not(i.rslt.obj).removeClass(t.item_h),i.rslt.obj.children("a").addClass(t.item_h)},this)).bind("move_node.jstree",e.proxy(function(e,t){this._themeroller(t.rslt.o),this._themeroller(t.rslt.op)},this))},__destroy:function(){var t=this._get_settings().themeroller,i=["ui-icon"];e.each(t,function(e,t){t=t.split(" "),t.length&&(i=i.concat(t))}),this.get_container().removeClass("ui-widget-content").find("."+i.join(", .")).removeClass(i.join(" "))},_fn:{_themeroller:function(e){var t=this._get_settings().themeroller;e=e&&e!=-1?this._get_node(e):this.get_container_ul(),e=e&&e!=-1?e.parent():this.get_container_ul(),e.find("li.jstree-closed").children("ins.jstree-icon").removeClass(t.opened).addClass("ui-icon "+t.closed).end().children("a").addClass(t.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return this.className.toString().replace(t.item_clsd,"").replace(t.item_open,"").replace(t.item_leaf,"").indexOf("ui-icon-")===-1}).removeClass(t.item_leaf+" "+t.item_open).addClass(t.item_clsd||"jstree-no-icon").end().end().end().end().find("li.jstree-open").children("ins.jstree-icon").removeClass(t.closed).addClass("ui-icon "+t.opened).end().children("a").addClass(t.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return this.className.toString().replace(t.item_clsd,"").replace(t.item_open,"").replace(t.item_leaf,"").indexOf("ui-icon-")===-1}).removeClass(t.item_leaf+" "+t.item_clsd).addClass(t.item_open||"jstree-no-icon").end().end().end().end().find("li.jstree-leaf").children("ins.jstree-icon").removeClass(t.closed+" ui-icon "+t.opened).end().children("a").addClass(t.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return this.className.toString().replace(t.item_clsd,"").replace(t.item_open,"").replace(t.item_leaf,"").indexOf("ui-icon-")===-1}).removeClass(t.item_clsd+" "+t.item_open).addClass(t.item_leaf||"jstree-no-icon")}},defaults:{opened:"ui-icon-triangle-1-se",closed:"ui-icon-triangle-1-e",item:"ui-state-default",item_h:"ui-state-hover",item_a:"ui-state-active",item_open:"ui-icon-folder-open",item_clsd:"ui-icon-folder-collapsed",item_leaf:"ui-icon-document"}}),e(function(){var t=".jstree-themeroller .ui-icon { overflow:visible; } .jstree-themeroller a { padding:0 2px; } .jstree-themeroller .jstree-no-icon { display:none; }";e.vakata.css.add_sheet({str:t,title:"jstree"})})}(jQuery),function(e){e.jstree.plugin("unique",{__init:function(){this.get_container().bind("before.jstree",e.proxy(function(t,i){var r,a,n=[],o=!0;if("move_node"==i.func&&i.args[4]===!0&&i.args[0].o&&i.args[0].o.length&&(i.args[0].o.children("a").each(function(){n.push(e(this).text().replace(/^\s+/g,""))}),o=this._check_unique(n,i.args[0].np.find("> ul > li").not(i.args[0].o),"move_node")),"create_node"==i.func&&(i.args[4]||this._is_loaded(i.args[0]))&&(r=this._get_node(i.args[0]),!i.args[1]||"before"!==i.args[1]&&"after"!==i.args[1]||(r=this._get_parent(i.args[0]),r&&r!==-1||(r=this.get_container())),"string"==typeof i.args[2]?n.push(i.args[2]):i.args[2]&&i.args[2].data?n.push(i.args[2].data):n.push(this._get_string("new_node")),o=this._check_unique(n,r.find("> ul > li"),"create_node")),"rename_node"==i.func&&(n.push(i.args[1]),a=this._get_node(i.args[0]),r=this._get_parent(a),r&&r!==-1||(r=this.get_container()),o=this._check_unique(n,r.find("> ul > li").not(a),"rename_node")),!o)return t.stopPropagation(),!1},this))},defaults:{error_callback:e.noop},_fn:{_check_unique:function(t,i,r){var a=[],n=!0;return i.children("a").each(function(){a.push(e(this).text().replace(/^\s+/g,""))}),!a.length||!t.length||(e.each(t,function(t,i){if(e.inArray(i,a)!==-1)return n=!1,!1}),n||this._get_settings().unique.error_callback.call(null,t,i,r),n)},check_move:function(){if(!this.__call_old())return!1;var t=this._get_move(),i=[];return!t.o||!t.o.length||(t.o.children("a").each(function(){i.push(e(this).text().replace(/^\s+/g,""))}),this._check_unique(i,t.np.find("> ul > li").not(t.o),"check_move"))}}})}(jQuery),function(r){r.jstree.plugin("wholerow",{__init:function(){if(!this.data.ui)throw"jsTree wholerow: jsTree UI plugin not included.";this.data.wholerow.html=!1,this.data.wholerow.to=!1,this.get_container().bind("init.jstree",r.proxy(function(e,t){this._get_settings().core.animation=0},this)).bind("open_node.jstree create_node.jstree clean_node.jstree loaded.jstree",r.proxy(function(e,t){this._prepare_wholerow_span(t&&t.rslt&&t.rslt.obj?t.rslt.obj:-1)},this)).bind("search.jstree clear_search.jstree reopen.jstree after_open.jstree after_close.jstree create_node.jstree delete_node.jstree clean_node.jstree",r.proxy(function(e,t){this.data.to&&clearTimeout(this.data.to),this.data.to=setTimeout(function(e,t){return function(){e._prepare_wholerow_ul(t)}}(this,t&&t.rslt&&t.rslt.obj?t.rslt.obj:-1),0)},this)).bind("deselect_all.jstree",r.proxy(function(e,t){this.get_container().find(" > .jstree-wholerow .jstree-clicked").removeClass("jstree-clicked "+(this.data.themeroller?this._get_settings().themeroller.item_a:""))},this)).bind("select_node.jstree deselect_node.jstree ",r.proxy(function(e,t){t.rslt.obj.each(function(){var e=t.inst.get_container().find(" > .jstree-wholerow li:visible:eq("+parseInt((r(this).offset().top-t.inst.get_container().offset().top+t.inst.get_container()[0].scrollTop)/t.inst.data.core.li_height,10)+")");e.children("a").attr("class",t.rslt.obj.children("a").attr("class"))})},this)).bind("hover_node.jstree dehover_node.jstree",r.proxy(function(e,t){if(this.get_container().find(" > .jstree-wholerow .jstree-hovered").removeClass("jstree-hovered "+(this.data.themeroller?this._get_settings().themeroller.item_h:"")),"hover_node"===e.type){var i=this.get_container().find(" > .jstree-wholerow li:visible:eq("+parseInt((t.rslt.obj.offset().top-this.get_container().offset().top+this.get_container()[0].scrollTop)/this.data.core.li_height,10)+")");i.children("a").attr("class",t.rslt.obj.children(".jstree-hovered").attr("class"))}},this)).delegate(".jstree-wholerow-span, ins.jstree-icon, li","click.jstree",function(e){var t=r(e.currentTarget);"A"===e.target.tagName||"INS"===e.target.tagName&&t.closest("li").is(".jstree-open, .jstree-closed")||(t.closest("li").children("a:visible:eq(0)").click(),e.stopImmediatePropagation())}).delegate("li","mouseover.jstree",r.proxy(function(e){return e.stopImmediatePropagation(),!r(e.currentTarget).children(".jstree-hovered, .jstree-clicked").length&&(this.hover_node(e.currentTarget),!1)},this)).delegate("li","mouseleave.jstree",r.proxy(function(e){r(e.currentTarget).children("a").hasClass("jstree-hovered").length||this.dehover_node(e.currentTarget)},this)),(t||e)&&r.vakata.css.add_sheet({str:".jstree-"+this.get_index()+" { position:relative; } ",title:"jstree"})},defaults:{},__destroy:function(){this.get_container().children(".jstree-wholerow").remove(),this.get_container().find(".jstree-wholerow-span").remove()},_fn:{_prepare_wholerow_span:function(e){e=e&&e!=-1?this._get_node(e):this.get_container().find("> ul > li"),e!==!1&&e.each(function(){r(this).find("li").andSelf().each(function(){var e=r(this);return!!e.children(".jstree-wholerow-span").length||void e.prepend("<span class='jstree-wholerow-span' style='width:"+18*e.parentsUntil(".jstree","li").length+"px;'>&#160;</span>")})})},_prepare_wholerow_ul:function(){var e=this.get_container().children("ul").eq(0),i=e.html();e.addClass("jstree-wholerow-real"),this.data.wholerow.last_html!==i&&(this.data.wholerow.last_html=i,this.get_container().children(".jstree-wholerow").remove(),this.get_container().append(e.clone().removeClass("jstree-wholerow-real").wrapAll("<div class='jstree-wholerow' />").parent().width(e.parent()[0].scrollWidth).css("top",(e.height()+(t?5:0))*-1).find("li[id]").each(function(){this.removeAttribute("id")}).end()))}}}),r(function(){var a=".jstree .jstree-wholerow-real { position:relative; z-index:1; } .jstree .jstree-wholerow-real li { cursor:pointer; } .jstree .jstree-wholerow-real a { border-left-color:transparent !important; border-right-color:transparent !important; } .jstree .jstree-wholerow { position:relative; z-index:0; height:0; } .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { width:100%; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li, .jstree .jstree-wholerow a { margin:0 !important; padding:0 !important; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { background:transparent !important; }.jstree .jstree-wholerow ins, .jstree .jstree-wholerow span, .jstree .jstree-wholerow input { display:none !important; }.jstree .jstree-wholerow a, .jstree .jstree-wholerow a:hover { text-indent:-9999px; !important; width:100%; padding:0 !important; border-right-width:0px !important; border-left-width:0px !important; } .jstree .jstree-wholerow-span { position:absolute; left:0; margin:0px; padding:0; height:18px; border-width:0; padding:0; z-index:0; }";i&&(a+=".jstree .jstree-wholerow a { display:block; height:18px; margin:0; padding:0; border:0; } .jstree .jstree-wholerow-real a { border-color:transparent !important; } "),(t||e)&&(a+=".jstree .jstree-wholerow, .jstree .jstree-wholerow li, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow a { margin:0; padding:0; line-height:18px; } .jstree .jstree-wholerow a { display:block; height:18px; line-height:18px; overflow:hidden; } "),r.vakata.css.add_sheet({str:a,title:"jstree"})})}(jQuery),function(e){var t=["getChildren","getChildrenCount","getAttr","getName","getProps"],i=function(t,i){var r=!0;return t=t||{},i=[].concat(i),e.each(i,function(i,a){if(!e.isFunction(t[a]))return r=!1,!1}),r};e.jstree.plugin("model",{__init:function(){if(!this.data.json_data)throw"jsTree model: jsTree json_data plugin not included.";this._get_settings().json_data.data=function(r,a){var n=r==-1?this._get_settings().model.object:r.data("jstree_model");return i(n,t)?void(this._get_settings().model.async?n.getChildren(e.proxy(function(e){this.model_done(e,a)},this)):this.model_done(n.getChildren(),a)):a.call(null,!1)}},defaults:{object:!1,id_prefix:!1,async:!1},_fn:{model_done:function(t,i){var r=[],a=this._get_settings(),n=this;e.isArray(t)||(t=[t]),e.each(t,function(t,i){var o=i.getProps()||{};o.attr=i.getAttr()||{},i.getChildrenCount()&&(o.state="closed"),o.data=i.getName(),e.isArray(o.data)||(o.data=[o.data]),n.data.types&&e.isFunction(i.getType)&&(o.attr[a.types.type_attr]=i.getType()),o.attr.id&&a.model.id_prefix&&(o.attr.id=a.model.id_prefix+o.attr.id),o.metadata||(o.metadata={}),o.metadata.jstree_model=i,r.push(o)}),i.call(null,r)}}})}(jQuery)}}(),/*
 * jQuery Hotkeys Plugin
 * Copyright 2010, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Based upon the plugin by Tzury Bar Yochay:
 * http://github.com/tzuryby/hotkeys
 *
 * Original idea by:
 * Binny V A, http://www.openjs.com/scripts/events/keyboard_shortcuts/
*/
function(e){function t(t){if("string"==typeof t.data){var i=t.handler,r=t.data.toLowerCase().split(" ");t.handler=function(t){if(this===t.target||!/textarea|select/i.test(t.target.nodeName)&&"text"!==t.target.type){var a="keypress"!==t.type&&e.hotkeys.specialKeys[t.which],n=String.fromCharCode(t.which).toLowerCase(),o="",s={};t.altKey&&"alt"!==a&&(o+="alt+"),t.ctrlKey&&"ctrl"!==a&&(o+="ctrl+"),t.metaKey&&!t.ctrlKey&&"meta"!==a&&(o+="meta+"),t.shiftKey&&"shift"!==a&&(o+="shift+"),a?s[o+a]=!0:(s[o+n]=!0,s[o+e.hotkeys.shiftNums[n]]=!0,"shift+"===o&&(s[e.hotkeys.shiftNums[n]]=!0));for(var l=0,d=r.length;l<d;l++)if(s[r[l]])return i.apply(this,arguments)}}}}e.hotkeys={version:"0.8",specialKeys:{8:"backspace",9:"tab",13:"return",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",191:"/",224:"meta"},shiftNums:{"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|"}},e.each(["keydown","keyup","keypress"],function(){e.event.special[this]={add:t}})}(jQuery),/*!
 * jQuery contextMenu - Plugin for simple contextMenu handling
 *
 * Version: git-master
 *
 * Authors: Rodney Rehm, Addy Osmani (patches for FF)
 * Web: http://medialize.github.com/jQuery-contextMenu/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *   GPL v3 http://opensource.org/licenses/GPL-3.0
 *
 */
function(e,t){function i(e){for(var t,i=e.split(/\s+/),r=[],a=0;t=i[a];a++)t=t[0].toUpperCase(),r.push(t);return r}function r(t){return t.id&&e('label[for="'+t.id+'"]').val()||t.name}function a(i,n,o){return o||(o=0),n.each(function(){var n,s,l=e(this),d=this,u=this.nodeName.toLowerCase();switch("label"==u&&l.find("input, textarea, select").length&&(n=l.text(),l=l.children().first(),d=l.get(0),u=d.nodeName.toLowerCase()),u){case"menu":s={name:l.attr("label"),items:{}},o=a(s.items,l.children(),o);break;case"a":case"button":s={name:l.text(),disabled:!!l.attr("disabled"),callback:function(){return function(){l.click()}}()};break;case"menuitem":case"command":switch(l.attr("type")){case t:case"command":case"menuitem":s={name:l.attr("label"),disabled:!!l.attr("disabled"),callback:function(){return function(){l.click()}}()};break;case"checkbox":s={type:"checkbox",disabled:!!l.attr("disabled"),name:l.attr("label"),selected:!!l.attr("checked")};break;case"radio":s={type:"radio",disabled:!!l.attr("disabled"),name:l.attr("label"),radio:l.attr("radiogroup"),value:l.attr("id"),selected:!!l.attr("checked")};break;default:s=t}break;case"hr":s="-------";break;case"input":switch(l.attr("type")){case"text":s={type:"text",name:n||r(d),disabled:!!l.attr("disabled"),value:l.val()};break;case"checkbox":s={type:"checkbox",name:n||r(d),disabled:!!l.attr("disabled"),selected:!!l.attr("checked")};break;case"radio":s={type:"radio",name:n||r(d),disabled:!!l.attr("disabled"),radio:!!l.attr("name"),value:l.val(),selected:!!l.attr("checked")};break;default:s=t}break;case"select":s={type:"select",name:n||r(d),disabled:!!l.attr("disabled"),selected:l.val(),options:{}},l.children().each(function(){s.options[this.value]=e(this).text()});break;case"textarea":s={type:"textarea",name:n||r(d),disabled:!!l.attr("disabled"),value:l.val()};break;case"label":break;default:s={type:"html",html:l.clone(!0)}}s&&(o++,i["key"+o]=s)}),o}if(e.support.htmlMenuitem="HTMLMenuItemElement"in window,e.support.htmlCommand="HTMLCommandElement"in window,e.support.eventSelectstart="onselectstart"in document.documentElement,!e.ui||!e.ui.widget){var n=e.cleanData;e.cleanData=function(t){for(var i,r=0;null!=(i=t[r]);r++)try{e(i).triggerHandler("remove")}catch(a){}n(t)}}var o=null,s=!1,l=e(window),d=0,u={},c={},p={},h={selector:null,appendTo:null,trigger:"right",autoHide:!1,delay:200,reposition:!0,determinePosition:function(t){if(e.ui&&e.ui.position)t.css("display","block").position({my:"center top",at:"center bottom",of:this,offset:"0 5",collision:"fit"}).css("display","none");else{var i=this.offset();i.top+=this.outerHeight(),i.left+=this.outerWidth()/2-t.outerWidth()/2,t.css(i)}},position:function(e,t,i){var r;if(!t&&!i)return void e.determinePosition.call(this,e.$menu);r="maintain"===t&&"maintain"===i?e.$menu.position():{top:i,left:t};var a=l.scrollTop()+l.height(),n=l.scrollLeft()+l.width(),o=e.$menu.height(),s=e.$menu.width();r.top+o>a&&(r.top-=o),r.left+s>n&&(r.left-=s),e.$menu.css(r)},positionSubmenu:function(t){if(e.ui&&e.ui.position)t.css("display","block").position({my:"left top",at:"right top",of:this,collision:"flipfit fit"}).css("display","");else{var i={top:0,left:this.outerWidth()};t.css(i)}},zIndex:1,animation:{duration:50,show:"slideDown",hide:"slideUp"},events:{show:e.noop,hide:e.noop},callback:null,items:{}},f={timer:null,pageX:null,pageY:null},g=function(e){for(var t=0,i=e;;)if(t=Math.max(t,parseInt(i.css("z-index"),10)||0),i=i.parent(),!i||!i.length||"html body".indexOf(i.prop("nodeName").toLowerCase())>-1)break;return t},m={abortevent:function(e){e.preventDefault(),e.stopImmediatePropagation()},contextmenu:function(t){var i=e(this);if(t.preventDefault(),t.stopImmediatePropagation(),!("right"!=t.data.trigger&&t.originalEvent||i.hasClass("context-menu-active")||i.hasClass("context-menu-disabled"))){if(o=i,t.data.build){var r=t.data.build(o,t);if(r===!1)return;if(t.data=e.extend(!0,{},h,t.data,r||{}),!t.data.items||e.isEmptyObject(t.data.items))throw window.console&&(console.error||console.log)("No items specified to show in contextMenu"),new Error("No Items sepcified");t.data.$trigger=o,v.create(t.data)}v.show.call(i,t.data,t.pageX,t.pageY)}},click:function(t){t.preventDefault(),t.stopImmediatePropagation(),e(this).trigger(e.Event("contextmenu",{data:t.data,pageX:t.pageX,pageY:t.pageY}))},mousedown:function(t){var i=e(this);o&&o.length&&!o.is(i)&&o.data("contextMenu").$menu.trigger("contextmenu:hide"),2==t.button&&(o=i.data("contextMenuActive",!0))},mouseup:function(t){var i=e(this);i.data("contextMenuActive")&&o&&o.length&&o.is(i)&&!i.hasClass("context-menu-disabled")&&(t.preventDefault(),t.stopImmediatePropagation(),o=i,i.trigger(e.Event("contextmenu",{data:t.data,pageX:t.pageX,pageY:t.pageY}))),i.removeData("contextMenuActive")},mouseenter:function(t){var i=e(this),r=e(t.relatedTarget),a=e(document);r.is(".context-menu-list")||r.closest(".context-menu-list").length||o&&o.length||(f.pageX=t.pageX,f.pageY=t.pageY,f.data=t.data,a.on("mousemove.contextMenuShow",m.mousemove),f.timer=setTimeout(function(){f.timer=null,a.off("mousemove.contextMenuShow"),o=i,i.trigger(e.Event("contextmenu",{data:f.data,pageX:f.pageX,pageY:f.pageY}))},t.data.delay))},mousemove:function(e){f.pageX=e.pageX,f.pageY=e.pageY},mouseleave:function(t){var i=e(t.relatedTarget);if(!i.is(".context-menu-list")&&!i.closest(".context-menu-list").length){try{clearTimeout(f.timer)}catch(t){}f.timer=null}},layerClick:function(t){var i,r,a=e(this),n=a.data("contextMenuRoot"),o=t.button,s=t.pageX,d=t.pageY;t.preventDefault(),t.stopImmediatePropagation(),setTimeout(function(){var a,u="left"==n.trigger&&0===o||"right"==n.trigger&&2===o;if(document.elementFromPoint&&(n.$layer.hide(),i=document.elementFromPoint(s-l.scrollLeft(),d-l.scrollTop()),n.$layer.show()),n.reposition&&u)if(document.elementFromPoint){if(n.$trigger.is(i)||n.$trigger.has(i).length)return void n.position.call(n.$trigger,n,s,d)}else if(r=n.$trigger.offset(),a=e(window),r.top+=a.scrollTop(),r.top<=t.pageY&&(r.left+=a.scrollLeft(),r.left<=t.pageX&&(r.bottom=r.top+n.$trigger.outerHeight(),r.bottom>=t.pageY&&(r.right=r.left+n.$trigger.outerWidth(),r.right>=t.pageX))))return void n.position.call(n.$trigger,n,s,d);i&&u&&n.$trigger.one("contextmenu:hidden",function(){e(i).contextMenu({x:s,y:d})}),n.$menu.trigger("contextmenu:hide")},50)},keyStop:function(e,t){t.isInput||e.preventDefault(),e.stopPropagation()},key:function(e){var t=o.data("contextMenu")||{};switch(e.keyCode){case 9:case 38:if(m.keyStop(e,t),t.isInput){if(9==e.keyCode&&e.shiftKey)return e.preventDefault(),t.$selected&&t.$selected.find("input, textarea, select").blur(),void t.$menu.trigger("prevcommand");if(38==e.keyCode&&"checkbox"==t.$selected.find("input, textarea, select").prop("type"))return void e.preventDefault()}else if(9!=e.keyCode||e.shiftKey)return void t.$menu.trigger("prevcommand");case 40:if(m.keyStop(e,t),!t.isInput)return void t.$menu.trigger("nextcommand");if(9==e.keyCode)return e.preventDefault(),t.$selected&&t.$selected.find("input, textarea, select").blur(),void t.$menu.trigger("nextcommand");if(40==e.keyCode&&"checkbox"==t.$selected.find("input, textarea, select").prop("type"))return void e.preventDefault();break;case 37:if(m.keyStop(e,t),t.isInput||!t.$selected||!t.$selected.length)break;if(!t.$selected.parent().hasClass("context-menu-root")){var i=t.$selected.parent().parent();return t.$selected.trigger("contextmenu:blur"),void(t.$selected=i)}break;case 39:if(m.keyStop(e,t),t.isInput||!t.$selected||!t.$selected.length)break;var r=t.$selected.data("contextMenu")||{};if(r.$menu&&t.$selected.hasClass("context-menu-submenu"))return t.$selected=null,r.$selected=null,void r.$menu.trigger("nextcommand");break;case 35:case 36:return t.$selected&&t.$selected.find("input, textarea, select").length?void 0:((t.$selected&&t.$selected.parent()||t.$menu).children(":not(.disabled, .not-selectable)")[36==e.keyCode?"first":"last"]().trigger("contextmenu:focus"),void e.preventDefault());case 13:if(m.keyStop(e,t),t.isInput){if(t.$selected&&!t.$selected.is("textarea, select"))return void e.preventDefault();break}return void(t.$selected&&t.$selected.trigger("mouseup"));case 32:case 33:case 34:return void m.keyStop(e,t);case 27:return m.keyStop(e,t),void t.$menu.trigger("contextmenu:hide");default:var a=String.fromCharCode(e.keyCode).toUpperCase();if(t.accesskeys[a])return void t.accesskeys[a].$node.trigger(t.accesskeys[a].$menu?"contextmenu:focus":"mouseup")}e.stopPropagation(),t.$selected&&t.$selected.trigger(e)},prevItem:function(t){t.stopPropagation();var i=e(this).data("contextMenu")||{};if(i.$selected){var r=i.$selected;i=i.$selected.parent().data("contextMenu")||{},i.$selected=r}for(var a=i.$menu.children(),n=i.$selected&&i.$selected.prev().length?i.$selected.prev():a.last(),o=n;n.hasClass("disabled")||n.hasClass("not-selectable");)if(n=n.prev().length?n.prev():a.last(),n.is(o))return;i.$selected&&m.itemMouseleave.call(i.$selected.get(0),t),m.itemMouseenter.call(n.get(0),t);var s=n.find("input, textarea, select");s.length&&s.focus()},nextItem:function(t){t.stopPropagation();var i=e(this).data("contextMenu")||{};if(i.$selected){var r=i.$selected;i=i.$selected.parent().data("contextMenu")||{},i.$selected=r}for(var a=i.$menu.children(),n=i.$selected&&i.$selected.next().length?i.$selected.next():a.first(),o=n;n.hasClass("disabled")||n.hasClass("not-selectable");)if(n=n.next().length?n.next():a.first(),n.is(o))return;i.$selected&&m.itemMouseleave.call(i.$selected.get(0),t),m.itemMouseenter.call(n.get(0),t);var s=n.find("input, textarea, select");s.length&&s.focus()},focusInput:function(t){var i=e(this).closest(".context-menu-item"),r=i.data(),a=r.contextMenu,n=r.contextMenuRoot;n.$selected=a.$selected=i,n.isInput=a.isInput=!0},blurInput:function(t){var i=e(this).closest(".context-menu-item"),r=i.data(),a=r.contextMenu,n=r.contextMenuRoot;n.isInput=a.isInput=!1},menuMouseenter:function(t){var i=e(this).data().contextMenuRoot;i.hovering=!0},menuMouseleave:function(t){var i=e(this).data().contextMenuRoot;i.$layer&&i.$layer.is(t.relatedTarget)&&(i.hovering=!1)},itemMouseenter:function(t){var i=e(this),r=i.data(),a=r.contextMenu,n=r.contextMenuRoot;return n.hovering=!0,t&&n.$layer&&n.$layer.is(t.relatedTarget)&&(t.preventDefault(),t.stopImmediatePropagation()),(a.$menu?a:n).$menu.children(".hover").trigger("contextmenu:blur"),i.hasClass("disabled")||i.hasClass("not-selectable")?void(a.$selected=null):void i.trigger("contextmenu:focus")},itemMouseleave:function(t){var i=e(this),r=i.data(),a=r.contextMenu,n=r.contextMenuRoot;return n!==a&&n.$layer&&n.$layer.is(t.relatedTarget)?(n.$selected&&n.$selected.trigger("contextmenu:blur"),t.preventDefault(),t.stopImmediatePropagation(),void(n.$selected=a.$selected=a.$node)):void i.trigger("contextmenu:blur")},itemClick:function(t){var i,r=e(this),a=r.data(),n=a.contextMenu,o=a.contextMenuRoot,s=a.contextMenuKey;if(n.items[s]&&!r.is(".disabled, .context-menu-submenu, .context-menu-separator, .not-selectable")){if(t.preventDefault(),t.stopImmediatePropagation(),e.isFunction(o.callbacks[s])&&Object.prototype.hasOwnProperty.call(o.callbacks,s))i=o.callbacks[s];else{if(!e.isFunction(o.callback))return;i=o.callback}i.call(o.$trigger,s,o)!==!1?o.$menu.trigger("contextmenu:hide"):o.$menu.parent().length&&v.update.call(o.$trigger,o)}},inputClick:function(e){e.stopImmediatePropagation()},hideMenu:function(t,i){var r=e(this).data("contextMenuRoot");v.hide.call(r.$trigger,r,i&&i.force)},focusItem:function(t){t.stopPropagation();var i=e(this),r=i.data(),a=r.contextMenu,n=r.contextMenuRoot;i.addClass("hover").siblings(".hover").trigger("contextmenu:blur"),a.$selected=n.$selected=i,a.$node&&n.positionSubmenu.call(a.$node,a.$menu)},blurItem:function(t){t.stopPropagation();var i=e(this),r=i.data(),a=r.contextMenu;r.contextMenuRoot;i.removeClass("hover"),a.$selected=null}},v={show:function(t,i,r){var a=e(this),n={};return e("#context-menu-layer").trigger("mousedown"),t.$trigger=a,t.events.show.call(a,t)===!1?void(o=null):(v.update.call(a,t),t.position.call(a,t,i,r),t.zIndex&&(n.zIndex=g(a)+t.zIndex),v.layer.call(t.$menu,t,n.zIndex),t.$menu.find("ul").css("zIndex",n.zIndex+1),t.$menu.css(n)[t.animation.show](t.animation.duration,function(){a.trigger("contextmenu:visible")}),a.data("contextMenu",t).addClass("context-menu-active"),e(document).off("keydown.contextMenu").on("keydown.contextMenu",m.key),void(t.autoHide&&e(document).on("mousemove.contextMenuAutoHide",function(e){var i=a.offset();i.right=i.left+a.outerWidth(),i.bottom=i.top+a.outerHeight(),!t.$layer||t.hovering||e.pageX>=i.left&&e.pageX<=i.right&&e.pageY>=i.top&&e.pageY<=i.bottom||t.$menu.trigger("contextmenu:hide")})))},hide:function(i,r){var a=e(this);if(i||(i=a.data("contextMenu")||{}),r||!i.events||i.events.hide.call(a,i)!==!1){if(a.removeData("contextMenu").removeClass("context-menu-active"),i.$layer){setTimeout(function(e){return function(){e.remove()}}(i.$layer),10);try{delete i.$layer}catch(n){i.$layer=null}}o=null,i.$menu.find(".hover").trigger("contextmenu:blur"),i.$selected=null,e(document).off(".contextMenuAutoHide").off("keydown.contextMenu"),i.$menu&&i.$menu[i.animation.hide](i.animation.duration,function(){i.build&&(i.$menu.remove(),e.each(i,function(e,r){switch(e){case"ns":case"selector":case"build":case"trigger":return!0;default:i[e]=t;try{delete i[e]}catch(a){}return!0}})),setTimeout(function(){a.trigger("contextmenu:hidden")},10)})}},create:function(r,a){a===t&&(a=r),r.$menu=e('<ul class="context-menu-list"></ul>').addClass(r.className||"").data({contextMenu:r,contextMenuRoot:a}),e.each(["callbacks","commands","inputs"],function(e,t){r[t]={},a[t]||(a[t]={})}),a.accesskeys||(a.accesskeys={}),e.each(r.items,function(t,n){var o=e('<li class="context-menu-item"></li>').addClass(n.className||""),s=null,l=null;if(o.on("click",e.noop),n.$node=o.data({contextMenu:r,contextMenuRoot:a,contextMenuKey:t}),n.accesskey)for(var d,u=i(n.accesskey),c=0;d=u[c];c++)if(!a.accesskeys[d]){a.accesskeys[d]=n,n._name=n.name.replace(new RegExp("("+d+")","i"),'<span class="context-menu-accesskey">$1</span>');break}if("string"==typeof n)o.addClass("context-menu-separator not-selectable");else if(n.type&&p[n.type])p[n.type].call(o,n,r,a),e.each([r,a],function(i,r){r.commands[t]=n,e.isFunction(n.callback)&&(r.callbacks[t]=n.callback)});else{switch("html"==n.type?o.addClass("context-menu-html not-selectable"):n.type?(s=e("<label></label>").appendTo(o),e("<span></span>").html(n._name||n.name).appendTo(s),o.addClass("context-menu-input"),r.hasTypes=!0,e.each([r,a],function(e,i){i.commands[t]=n,i.inputs[t]=n})):n.items&&(n.type="sub"),n.type){case"text":l=e('<input type="text" value="1" name="" value="">').attr("name","context-menu-input-"+t).val(n.value||"").appendTo(s);break;case"textarea":l=e('<textarea name=""></textarea>').attr("name","context-menu-input-"+t).val(n.value||"").appendTo(s),n.height&&l.height(n.height);break;case"checkbox":l=e('<input type="checkbox" value="1" name="" value="">').attr("name","context-menu-input-"+t).val(n.value||"").prop("checked",!!n.selected).prependTo(s);break;case"radio":l=e('<input type="radio" value="1" name="" value="">').attr("name","context-menu-input-"+n.radio).val(n.value||"").prop("checked",!!n.selected).prependTo(s);break;case"select":l=e('<select name="">').attr("name","context-menu-input-"+t).appendTo(s),n.options&&(e.each(n.options,function(t,i){e("<option></option>").val(t).text(i).appendTo(l)}),l.val(n.selected));break;case"sub":e("<span></span>").html(n._name||n.name).appendTo(o),n.appendTo=n.$node,v.create(n,a),o.data("contextMenu",n).addClass("context-menu-submenu"),n.callback=null;break;case"html":e(n.html).appendTo(o);break;default:e.each([r,a],function(i,r){r.commands[t]=n,e.isFunction(n.callback)&&(r.callbacks[t]=n.callback)}),e("<span></span>").html(n._name||n.name||"").appendTo(o)}n.type&&"sub"!=n.type&&"html"!=n.type&&(l.on("focus",m.focusInput).on("blur",m.blurInput),n.events&&l.on(n.events,r)),n.icon&&o.addClass("icon icon-"+n.icon)}n.$input=l,n.$label=s,o.appendTo(r.$menu),!r.hasTypes&&e.support.eventSelectstart&&o.on("selectstart.disableTextSelect",m.abortevent)}),r.$node||r.$menu.css("display","none").addClass("context-menu-root"),r.$menu.appendTo(r.appendTo||document.body)},resize:function(t,i){t.css({position:"absolute",display:"block"}),t.data("width",Math.ceil(t.width())+1),t.css({position:"static",minWidth:"0px",maxWidth:"100000px"}),t.find("> li > ul").each(function(){v.resize(e(this),!0)}),i||t.find("ul").andSelf().css({position:"",display:"",minWidth:"",maxWidth:""}).width(function(){return e(this).data("width")})},update:function(i,r){var a=this;r===t&&(r=i,v.resize(i.$menu)),i.$menu.children().each(function(){var t=e(this),n=t.data("contextMenuKey"),o=i.items[n],s=e.isFunction(o.disabled)&&o.disabled.call(a,n,r)||o.disabled===!0;if(t[s?"addClass":"removeClass"]("disabled"),o.type)switch(t.find("input, select, textarea").prop("disabled",s),o.type){case"text":case"textarea":o.$input.val(o.value||"");break;case"checkbox":case"radio":o.$input.val(o.value||"").prop("checked",!!o.selected);break;case"select":o.$input.val(o.selected||"")}o.$menu&&v.update.call(a,o,r)})},layer:function(t,i){var r=t.$layer=e('<div id="context-menu-layer" style="position:fixed; z-index:'+i+'; top:0; left:0; opacity: 0; filter: alpha(opacity=0); background-color: #000;"></div>').css({height:l.height(),width:l.width(),display:"block"}).data("contextMenuRoot",t).insertBefore(this).on("contextmenu",m.abortevent).on("mousedown",m.layerClick);return e.support.fixedPosition||r.css({position:"absolute",height:e(document).height()}),r}};e.fn.contextMenu=function(i){if(i===t)this.first().trigger("contextmenu");else if(i.x&&i.y)this.first().trigger(e.Event("contextmenu",{pageX:i.x,pageY:i.y}));else if("hide"===i){var r=this.data("contextMenu").$menu;r&&r.trigger("contextmenu:hide")}else"destroy"===i?e.contextMenu("destroy",{context:this}):e.isPlainObject(i)?(i.context=this,e.contextMenu("create",i)):i?this.removeClass("context-menu-disabled"):i||this.addClass("context-menu-disabled");return this},e.contextMenu=function(i,r){"string"!=typeof i&&(r=i,i="create"),"string"==typeof r?r={selector:r}:r===t&&(r={});var a=e.extend(!0,{},h,r||{}),n=e(document),o=n,l=!1;switch(a.context&&a.context.length?(o=e(a.context).first(),a.context=o.get(0),l=a.context!==document):a.context=document,i){case"create":if(!a.selector)throw new Error("No selector specified");if(a.selector.match(/.context-menu-(list|item|input)($|\s)/))throw new Error('Cannot bind to selector "'+a.selector+'" as it contains a reserved className');if(!a.build&&(!a.items||e.isEmptyObject(a.items)))throw new Error("No Items sepcified");switch(d++,a.ns=".contextMenu"+d,l||(u[a.selector]=a.ns),c[a.ns]=a,a.trigger||(a.trigger="right"),s||(n.on({"contextmenu:hide.contextMenu":m.hideMenu,"prevcommand.contextMenu":m.prevItem,"nextcommand.contextMenu":m.nextItem,"contextmenu.contextMenu":m.abortevent,"mouseenter.contextMenu":m.menuMouseenter,"mouseleave.contextMenu":m.menuMouseleave},".context-menu-list").on("mouseup.contextMenu",".context-menu-input",m.inputClick).on({"mouseup.contextMenu":m.itemClick,"contextmenu:focus.contextMenu":m.focusItem,"contextmenu:blur.contextMenu":m.blurItem,"contextmenu.contextMenu":m.abortevent,"mouseenter.contextMenu":m.itemMouseenter,"mouseleave.contextMenu":m.itemMouseleave},".context-menu-item"),s=!0),o.on("contextmenu"+a.ns,a.selector,a,m.contextmenu),l&&o.on("remove"+a.ns,function(){e(this).contextMenu("destroy")}),a.trigger){case"hover":o.on("mouseenter"+a.ns,a.selector,a,m.mouseenter).on("mouseleave"+a.ns,a.selector,a,m.mouseleave);break;case"left":o.on("click"+a.ns,a.selector,a,m.click)}a.build||v.create(a);break;case"destroy":var p;if(l){var f=a.context;e.each(c,function(t,i){if(i.context!==f)return!0;p=e(".context-menu-list").filter(":visible"),p.length&&p.data().contextMenuRoot.$trigger.is(e(i.context).find(i.selector))&&p.trigger("contextmenu:hide",{force:!0});try{c[i.ns].$menu&&c[i.ns].$menu.remove(),delete c[i.ns]}catch(r){c[i.ns]=null}return e(i.context).off(i.ns),!0})}else if(a.selector){if(u[a.selector]){p=e(".context-menu-list").filter(":visible"),p.length&&p.data().contextMenuRoot.$trigger.is(a.selector)&&p.trigger("contextmenu:hide",{force:!0});try{c[u[a.selector]].$menu&&c[u[a.selector]].$menu.remove(),delete c[u[a.selector]]}catch(g){c[u[a.selector]]=null}n.off(u[a.selector])}}else n.off(".contextMenu .contextMenuAutoHide"),e.each(c,function(t,i){e(i.context).off(i.ns)}),u={},c={},d=0,s=!1,e("#context-menu-layer, .context-menu-list").remove();break;case"html5":(!e.support.htmlCommand&&!e.support.htmlMenuitem||"boolean"==typeof r&&r)&&e('menu[type="context"]').each(function(){this.id&&e.contextMenu({selector:"[contextmenu="+this.id+"]",items:e.contextMenu.fromMenu(this)})}).css("display","none");break;default:throw new Error('Unknown operation "'+i+'"')}return this},e.contextMenu.setInputValues=function(i,r){r===t&&(r={}),e.each(i.inputs,function(e,t){switch(t.type){case"text":case"textarea":t.value=r[e]||"";break;case"checkbox":t.selected=!!r[e];break;case"radio":t.selected=(r[t.radio]||"")==t.value;break;case"select":t.selected=r[e]||""}})},e.contextMenu.getInputValues=function(i,r){return r===t&&(r={}),e.each(i.inputs,function(e,t){switch(t.type){case"text":case"textarea":case"select":r[e]=t.$input.val();break;case"checkbox":r[e]=t.$input.prop("checked");break;case"radio":t.$input.prop("checked")&&(r[t.radio]=t.value)}}),r},e.contextMenu.fromMenu=function(t){var i=e(t),r={};return a(r,i.children()),r},e.contextMenu.defaults=h,e.contextMenu.types=p,e.contextMenu.handle=m,e.contextMenu.op=v,e.contextMenu.menus=c}(jQuery),/*!
 * Chart.js
 * http://chartjs.org/
 * Version: 2.2.1
 *
 * Copyright 2016 Nick Downie
 * Released under the MIT license
 * https://github.com/chartjs/Chart.js/blob/master/LICENSE.md
 */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Chart=e()}}(function(){return function e(t,i,r){function a(o,s){if(!i[o]){if(!t[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(n)return n(o,!0);var d=new Error("Cannot find module '"+o+"'");throw d.code="MODULE_NOT_FOUND",d}var u=i[o]={exports:{}};t[o][0].call(u.exports,function(e){var i=t[o][1][e];return a(i?i:e)},u,u.exports,e,t,i,r)}return i[o].exports}for(var n="function"==typeof require&&require,o=0;o<r.length;o++)a(r[o]);return a}({1:[function(e,t,i){},{}],2:[function(e,t,i){var r=e(6),a=e(3),n=function(e){if(e instanceof n)return e;if(!(this instanceof n))return new n(e);this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1};var t;if("string"==typeof e)if(t=a.getRgba(e))this.setValues("rgb",t);else if(t=a.getHsla(e))this.setValues("hsl",t);else{if(!(t=a.getHwb(e)))throw new Error('Unable to parse color from string "'+e+'"');this.setValues("hwb",t)}else if("object"==typeof e)if(t=e,void 0!==t.r||void 0!==t.red)this.setValues("rgb",t);else if(void 0!==t.l||void 0!==t.lightness)this.setValues("hsl",t);else if(void 0!==t.v||void 0!==t.value)this.setValues("hsv",t);else if(void 0!==t.w||void 0!==t.whiteness)this.setValues("hwb",t);else{if(void 0===t.c&&void 0===t.cyan)throw new Error("Unable to parse color from object "+JSON.stringify(e));this.setValues("cmyk",t)}};n.prototype={rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var e=this.values;return 1!==e.alpha?e.hwb.concat([e.alpha]):e.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var e=this.values;return e.rgb.concat([e.alpha])},hslaArray:function(){var e=this.values;return e.hsl.concat([e.alpha])},alpha:function(e){return void 0===e?this.values.alpha:(this.setValues("alpha",e),this)},red:function(e){return this.setChannel("rgb",0,e)},green:function(e){return this.setChannel("rgb",1,e)},blue:function(e){return this.setChannel("rgb",2,e)},hue:function(e){return e&&(e%=360,e=0>e?360+e:e),this.setChannel("hsl",0,e)},saturation:function(e){return this.setChannel("hsl",1,e)},lightness:function(e){return this.setChannel("hsl",2,e)},saturationv:function(e){return this.setChannel("hsv",1,e)},whiteness:function(e){return this.setChannel("hwb",1,e)},blackness:function(e){return this.setChannel("hwb",2,e)},value:function(e){return this.setChannel("hsv",2,e)},cyan:function(e){return this.setChannel("cmyk",0,e)},magenta:function(e){return this.setChannel("cmyk",1,e)},yellow:function(e){return this.setChannel("cmyk",2,e)},black:function(e){return this.setChannel("cmyk",3,e)},hexString:function(){return a.hexString(this.values.rgb)},rgbString:function(){return a.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return a.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return a.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return a.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return a.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return a.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return a.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var e=this.values.rgb;return e[0]<<16|e[1]<<8|e[2]},luminosity:function(){for(var e=this.values.rgb,t=[],i=0;i<e.length;i++){var r=e[i]/255;t[i]=.03928>=r?r/12.92:Math.pow((r+.055)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),i=e.luminosity();return t>i?(t+.05)/(i+.05):(i+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},dark:function(){var e=this.values.rgb,t=(299*e[0]+587*e[1]+114*e[2])/1e3;return 128>t},light:function(){return!this.dark()},negate:function(){for(var e=[],t=0;3>t;t++)e[t]=255-this.values.rgb[t];return this.setValues("rgb",e),this},lighten:function(e){var t=this.values.hsl;return t[2]+=t[2]*e,this.setValues("hsl",t),this},darken:function(e){var t=this.values.hsl;return t[2]-=t[2]*e,this.setValues("hsl",t),this},saturate:function(e){var t=this.values.hsl;return t[1]+=t[1]*e,this.setValues("hsl",t),this},desaturate:function(e){var t=this.values.hsl;return t[1]-=t[1]*e,this.setValues("hsl",t),this},whiten:function(e){var t=this.values.hwb;return t[1]+=t[1]*e,this.setValues("hwb",t),this},blacken:function(e){var t=this.values.hwb;return t[2]+=t[2]*e,this.setValues("hwb",t),this},greyscale:function(){var e=this.values.rgb,t=.3*e[0]+.59*e[1]+.11*e[2];return this.setValues("rgb",[t,t,t]),this},clearer:function(e){var t=this.values.alpha;return this.setValues("alpha",t-t*e),this},opaquer:function(e){var t=this.values.alpha;return this.setValues("alpha",t+t*e),this},rotate:function(e){var t=this.values.hsl,i=(t[0]+e)%360;return t[0]=0>i?360+i:i,this.setValues("hsl",t),this},mix:function(e,t){var i=this,r=e,a=void 0===t?.5:t,n=2*a-1,o=i.alpha()-r.alpha(),s=((n*o===-1?n:(n+o)/(1+n*o))+1)/2,l=1-s;return this.rgb(s*i.red()+l*r.red(),s*i.green()+l*r.green(),s*i.blue()+l*r.blue()).alpha(i.alpha()*a+r.alpha()*(1-a))},toJSON:function(){return this.rgb()},clone:function(){var e,t,i=new n,r=this.values,a=i.values;for(var o in r)r.hasOwnProperty(o)&&(e=r[o],t={}.toString.call(e),"[object Array]"===t?a[o]=e.slice(0):"[object Number]"===t?a[o]=e:console.error("unexpected color value:",e));return i}},n.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},n.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},n.prototype.getValues=function(e){for(var t=this.values,i={},r=0;r<e.length;r++)i[e.charAt(r)]=t[e][r];return 1!==t.alpha&&(i.a=t.alpha),i},n.prototype.setValues=function(e,t){var i,a=this.values,n=this.spaces,o=this.maxes,s=1;if("alpha"===e)s=t;else if(t.length)a[e]=t.slice(0,e.length),s=t[e.length];else if(void 0!==t[e.charAt(0)]){for(i=0;i<e.length;i++)a[e][i]=t[e.charAt(i)];s=t.a}else if(void 0!==t[n[e][0]]){var l=n[e];for(i=0;i<e.length;i++)a[e][i]=t[l[i]];s=t.alpha}if(a.alpha=Math.max(0,Math.min(1,void 0===s?a.alpha:s)),"alpha"===e)return!1;var d;for(i=0;i<e.length;i++)d=Math.max(0,Math.min(o[e][i],a[e][i])),a[e][i]=Math.round(d);for(var u in n)u!==e&&(a[u]=r[e][u](a[e]));return!0},n.prototype.setSpace=function(e,t){var i=t[0];return void 0===i?this.getValues(e):("number"==typeof i&&(i=Array.prototype.slice.call(t)),this.setValues(e,i),this)},n.prototype.setChannel=function(e,t,i){var r=this.values[e];return void 0===i?r[t]:i===r[t]?this:(r[t]=i,this.setValues(e,r),this)},"undefined"!=typeof window&&(window.Color=n),t.exports=n},{3:3,6:6}],3:[function(e,t,i){function r(e){if(e){var t=/^#([a-fA-F0-9]{3})$/,i=/^#([a-fA-F0-9]{6})$/,r=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,a=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/,n=/(\w+)/,o=[0,0,0],s=1,l=e.match(t);if(l){l=l[1];for(var d=0;d<o.length;d++)o[d]=parseInt(l[d]+l[d],16)}else if(l=e.match(i)){l=l[1];for(var d=0;d<o.length;d++)o[d]=parseInt(l.slice(2*d,2*d+2),16)}else if(l=e.match(r)){for(var d=0;d<o.length;d++)o[d]=parseInt(l[d+1]);s=parseFloat(l[4])}else if(l=e.match(a)){for(var d=0;d<o.length;d++)o[d]=Math.round(2.55*parseFloat(l[d+1]));s=parseFloat(l[4])}else if(l=e.match(n)){if("transparent"==l[1])return[0,0,0,0];if(o=y[l[1]],!o)return}for(var d=0;d<o.length;d++)o[d]=b(o[d],0,255);return s=s||0==s?b(s,0,1):1,o[3]=s,o}}function a(e){if(e){var t=/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,i=e.match(t);if(i){var r=parseFloat(i[4]),a=b(parseInt(i[1]),0,360),n=b(parseFloat(i[2]),0,100),o=b(parseFloat(i[3]),0,100),s=b(isNaN(r)?1:r,0,1);return[a,n,o,s]}}}function n(e){if(e){var t=/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,i=e.match(t);if(i){var r=parseFloat(i[4]),a=b(parseInt(i[1]),0,360),n=b(parseFloat(i[2]),0,100),o=b(parseFloat(i[3]),0,100),s=b(isNaN(r)?1:r,0,1);return[a,n,o,s]}}}function o(e){var t=r(e);return t&&t.slice(0,3)}function s(e){var t=a(e);return t&&t.slice(0,3)}function l(e){var t=r(e);return t?t[3]:(t=a(e))?t[3]:(t=n(e))?t[3]:void 0}function d(e){return"#"+_(e[0])+_(e[1])+_(e[2])}function u(e,t){return 1>t||e[3]&&e[3]<1?c(e,t):"rgb("+e[0]+", "+e[1]+", "+e[2]+")"}function c(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+t+")"}function p(e,t){if(1>t||e[3]&&e[3]<1)return h(e,t);var i=Math.round(e[0]/255*100),r=Math.round(e[1]/255*100),a=Math.round(e[2]/255*100);return"rgb("+i+"%, "+r+"%, "+a+"%)"}function h(e,t){var i=Math.round(e[0]/255*100),r=Math.round(e[1]/255*100),a=Math.round(e[2]/255*100);return"rgba("+i+"%, "+r+"%, "+a+"%, "+(t||e[3]||1)+")"}function f(e,t){return 1>t||e[3]&&e[3]<1?g(e,t):"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)"}function g(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+t+")"}function m(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+(void 0!==t&&1!==t?", "+t:"")+")"}function v(e){return x[e.slice(0,3)]}function b(e,t,i){return Math.min(Math.max(t,e),i)}function _(e){var t=e.toString(16).toUpperCase();return t.length<2?"0"+t:t}var y=e(4);t.exports={getRgba:r,getHsla:a,getRgb:o,getHsl:s,getHwb:n,getAlpha:l,hexString:d,rgbString:u,rgbaString:c,percentString:p,percentaString:h,hslString:f,hslaString:g,hwbString:m,keyword:v};var x={};for(var w in y)x[y[w]]=w},{4:4}],4:[function(e,t,i){t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],5:[function(e,t,i){function a(e){var t,i,r,a=e[0]/255,n=e[1]/255,o=e[2]/255,s=Math.min(a,n,o),l=Math.max(a,n,o),d=l-s;return l==s?t=0:a==l?t=(n-o)/d:n==l?t=2+(o-a)/d:o==l&&(t=4+(a-n)/d),t=Math.min(60*t,360),0>t&&(t+=360),r=(s+l)/2,i=l==s?0:.5>=r?d/(l+s):d/(2-l-s),[t,100*i,100*r]}function n(e){var t,i,r,a=e[0],n=e[1],o=e[2],s=Math.min(a,n,o),l=Math.max(a,n,o),d=l-s;return i=0==l?0:d/l*1e3/10,l==s?t=0:a==l?t=(n-o)/d:n==l?t=2+(o-a)/d:o==l&&(t=4+(a-n)/d),t=Math.min(60*t,360),0>t&&(t+=360),r=l/255*1e3/10,[t,i,r]}function o(e){var t=e[0],i=e[1],r=e[2],n=a(e)[0],o=1/255*Math.min(t,Math.min(i,r)),r=1-1/255*Math.max(t,Math.max(i,r));return[n,100*o,100*r]}function s(e){var t,i,r,a,n=e[0]/255,o=e[1]/255,s=e[2]/255;return a=Math.min(1-n,1-o,1-s),t=(1-n-a)/(1-a)||0,i=(1-o-a)/(1-a)||0,r=(1-s-a)/(1-a)||0,[100*t,100*i,100*r,100*a]}function l(e){return Y[JSON.stringify(e)]}function d(e){var t=e[0]/255,i=e[1]/255,r=e[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92;var a=.4124*t+.3576*i+.1805*r,n=.2126*t+.7152*i+.0722*r,o=.0193*t+.1192*i+.9505*r;return[100*a,100*n,100*o]}function u(e){var t,i,r,a=d(e),n=a[0],o=a[1],s=a[2];return n/=95.047,o/=100,s/=108.883,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,o=o>.008856?Math.pow(o,1/3):7.787*o+16/116,s=s>.008856?Math.pow(s,1/3):7.787*s+16/116,t=116*o-16,i=500*(n-o),r=200*(o-s),[t,i,r]}function c(e){return R(u(e))}function p(e){var t,i,r,a,n,o=e[0]/360,s=e[1]/100,l=e[2]/100;if(0==s)return n=255*l,[n,n,n];i=.5>l?l*(1+s):l+s-l*s,t=2*l-i,a=[0,0,0];for(var d=0;3>d;d++)r=o+1/3*-(d-1),0>r&&r++,r>1&&r--,n=1>6*r?t+6*(i-t)*r:1>2*r?i:2>3*r?t+(i-t)*(2/3-r)*6:t,a[d]=255*n;return a}function h(e){var t,i,r=e[0],a=e[1]/100,n=e[2]/100;return 0===n?[0,0,0]:(n*=2,a*=1>=n?n:2-n,i=(n+a)/2,t=2*a/(n+a),[r,100*t,100*i])}function f(e){return o(p(e))}function m(e){return s(p(e))}function v(e){return l(p(e))}function _(e){var t=e[0]/60,i=e[1]/100,r=e[2]/100,a=Math.floor(t)%6,n=t-Math.floor(t),o=255*r*(1-i),s=255*r*(1-i*n),l=255*r*(1-i*(1-n)),r=255*r;switch(a){case 0:return[r,l,o];case 1:return[s,r,o];case 2:return[o,r,l];case 3:return[o,s,r];case 4:return[l,o,r];case 5:return[r,o,s]}}function y(e){var t,i,r=e[0],a=e[1]/100,n=e[2]/100;return i=(2-a)*n,t=a*n,t/=1>=i?i:2-i,t=t||0,i/=2,[r,100*t,100*i]}function x(e){return o(_(e))}function w(e){return s(_(e))}function j(e){return l(_(e))}function k(e){var t,i,a,n,o=e[0]/360,s=e[1]/100,l=e[2]/100,d=s+l;switch(d>1&&(s/=d,l/=d),t=Math.floor(6*o),i=1-l,a=6*o-t,0!=(1&t)&&(a=1-a),n=s+a*(i-s),t){default:case 6:case 0:r=i,g=n,b=s;break;case 1:r=n,g=i,b=s;break;case 2:r=s,g=i,b=n;break;case 3:r=s,g=n,b=i;break;case 4:r=n,g=s,b=i;break;case 5:r=i,g=s,b=n}return[255*r,255*g,255*b]}function C(e){return a(k(e))}function D(e){return n(k(e))}function S(e){return s(k(e))}function T(e){return l(k(e))}function P(e){var t,i,r,a=e[0]/100,n=e[1]/100,o=e[2]/100,s=e[3]/100;return t=1-Math.min(1,a*(1-s)+s),i=1-Math.min(1,n*(1-s)+s),r=1-Math.min(1,o*(1-s)+s),[255*t,255*i,255*r]}function I(e){return a(P(e))}function $(e){return n(P(e))}function F(e){return o(P(e))}function M(e){return l(P(e))}function A(e){var t,i,r,a=e[0]/100,n=e[1]/100,o=e[2]/100;return t=3.2406*a+-1.5372*n+o*-.4986,i=a*-.9689+1.8758*n+.0415*o,r=.0557*a+n*-.204+1.057*o,t=t>.0031308?1.055*Math.pow(t,1/2.4)-.055:t=12.92*t,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i=12.92*i,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:r=12.92*r,t=Math.min(Math.max(0,t),1),i=Math.min(Math.max(0,i),1),r=Math.min(Math.max(0,r),1),[255*t,255*i,255*r]}function E(e){var t,i,r,a=e[0],n=e[1],o=e[2];return a/=95.047,n/=100,o/=108.883,a=a>.008856?Math.pow(a,1/3):7.787*a+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,o=o>.008856?Math.pow(o,1/3):7.787*o+16/116,t=116*n-16,i=500*(a-n),r=200*(n-o),[t,i,r]}function q(e){return R(E(e))}function O(e){var t,i,r,a,n=e[0],o=e[1],s=e[2];return 8>=n?(i=100*n/903.3,a=7.787*(i/100)+16/116):(i=100*Math.pow((n+16)/116,3),a=Math.pow(i/100,1/3)),t=.008856>=t/95.047?t=95.047*(o/500+a-16/116)/7.787:95.047*Math.pow(o/500+a,3),r=.008859>=r/108.883?r=108.883*(a-s/200-16/116)/7.787:108.883*Math.pow(a-s/200,3),[t,i,r]}function R(e){var t,i,r,a=e[0],n=e[1],o=e[2];return t=Math.atan2(o,n),i=360*t/2/Math.PI,0>i&&(i+=360),r=Math.sqrt(n*n+o*o),[a,r,i]}function N(e){return A(O(e))}function G(e){var t,i,r,a=e[0],n=e[1],o=e[2];return r=o/360*2*Math.PI,t=n*Math.cos(r),i=n*Math.sin(r),[a,t,i]}function L(e){return O(G(e))}function z(e){return N(G(e))}function Q(e){return X[e]}function H(e){return a(Q(e))}function B(e){return n(Q(e))}function W(e){return o(Q(e))}function U(e){return s(Q(e))}function V(e){return u(Q(e))}function K(e){return d(Q(e))}t.exports={rgb2hsl:a,rgb2hsv:n,rgb2hwb:o,rgb2cmyk:s,rgb2keyword:l,rgb2xyz:d,rgb2lab:u,rgb2lch:c,hsl2rgb:p,hsl2hsv:h,hsl2hwb:f,hsl2cmyk:m,hsl2keyword:v,hsv2rgb:_,hsv2hsl:y,hsv2hwb:x,hsv2cmyk:w,hsv2keyword:j,hwb2rgb:k,hwb2hsl:C,hwb2hsv:D,hwb2cmyk:S,hwb2keyword:T,cmyk2rgb:P,cmyk2hsl:I,cmyk2hsv:$,cmyk2hwb:F,cmyk2keyword:M,keyword2rgb:Q,keyword2hsl:H,keyword2hsv:B,keyword2hwb:W,keyword2cmyk:U,keyword2lab:V,keyword2xyz:K,xyz2rgb:A,xyz2lab:E,xyz2lch:q,lab2xyz:O,lab2rgb:N,lab2lch:R,lch2lab:G,lch2xyz:L,lch2rgb:z};var X={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Y={};for(var J in X)Y[JSON.stringify(X[J])]=J},{}],6:[function(e,t,i){var r=e(5),a=function(){return new d};for(var n in r){a[n+"Raw"]=function(e){return function(t){return"number"==typeof t&&(t=Array.prototype.slice.call(arguments)),r[e](t)}}(n);var o=/(\w+)2(\w+)/.exec(n),s=o[1],l=o[2];a[s]=a[s]||{},a[s][l]=a[n]=function(e){return function(t){"number"==typeof t&&(t=Array.prototype.slice.call(arguments));var i=r[e](t);if("string"==typeof i||void 0===i)return i;for(var a=0;a<i.length;a++)i[a]=Math.round(i[a]);return i}}(n)}var d=function(){this.convs={}};d.prototype.routeSpace=function(e,t){var i=t[0];return void 0===i?this.getValues(e):("number"==typeof i&&(i=Array.prototype.slice.call(t)),this.setValues(e,i))},d.prototype.setValues=function(e,t){return this.space=e,this.convs={},this.convs[e]=t,this},d.prototype.getValues=function(e){var t=this.convs[e];if(!t){var i=this.space,r=this.convs[i];t=a[i][e](r),this.convs[e]=t}return t},["rgb","hsl","hsv","cmyk","keyword"].forEach(function(e){d.prototype[e]=function(t){return this.routeSpace(e,arguments)}}),t.exports=a},{5:5}],7:[function(e,t,i){var r=e(27)();e(26)(r),e(22)(r),e(25)(r),e(21)(r),e(23)(r),e(24)(r),e(28)(r),e(32)(r),e(30)(r),e(31)(r),e(33)(r),e(29)(r),e(34)(r),e(35)(r),e(36)(r),e(37)(r),e(38)(r),e(41)(r),e(39)(r),e(40)(r),e(42)(r),e(43)(r),e(44)(r),e(15)(r),e(16)(r),e(17)(r),e(18)(r),e(19)(r),e(20)(r),e(8)(r),e(9)(r),e(10)(r),e(11)(r),e(12)(r),e(13)(r),e(14)(r),window.Chart=t.exports=r},{10:10,11:11,12:12,13:13,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:21,22:22,23:23,24:24,25:25,26:26,27:27,28:28,29:29,30:30,31:31,32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,8:8,9:9}],8:[function(e,t,i){"use strict";t.exports=function(e){e.Bar=function(t,i){return i.type="bar",new e(t,i)}}},{}],9:[function(e,t,i){"use strict";t.exports=function(e){e.Bubble=function(t,i){return i.type="bubble",new e(t,i)}}},{}],10:[function(e,t,i){"use strict";t.exports=function(e){e.Doughnut=function(t,i){return i.type="doughnut",new e(t,i)}}},{}],11:[function(e,t,i){"use strict";t.exports=function(e){e.Line=function(t,i){return i.type="line",new e(t,i)}}},{}],12:[function(e,t,i){"use strict";t.exports=function(e){e.PolarArea=function(t,i){return i.type="polarArea",new e(t,i)}}},{}],13:[function(e,t,i){"use strict";t.exports=function(e){e.Radar=function(t,i){return i.options=e.helpers.configMerge({aspectRatio:1},i.options),i.type="radar",new e(t,i)}}},{}],14:[function(e,t,i){"use strict";t.exports=function(e){var t={hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-1"}],yAxes:[{type:"linear",position:"left",id:"y-axis-1"}]},tooltips:{callbacks:{title:function(){return""},label:function(e){return"("+e.xLabel+", "+e.yLabel+")"}}}};e.defaults.scatter=t,e.controllers.scatter=e.controllers.line,e.Scatter=function(t,i){return i.type="scatter",new e(t,i)}}},{}],15:[function(e,t,i){"use strict";t.exports=function(e){var t=e.helpers;e.defaults.bar={hover:{mode:"label"},scales:{xAxes:[{type:"category",categoryPercentage:.8,barPercentage:.9,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}},e.controllers.bar=e.DatasetController.extend({dataElementType:e.elements.Rectangle,initialize:function(t,i){e.DatasetController.prototype.initialize.call(this,t,i),this.getMeta().bar=!0},getBarCount:function(){var e=this,i=0;return t.each(e.chart.data.datasets,function(t,r){var a=e.chart.getDatasetMeta(r);a.bar&&e.chart.isDatasetVisible(r)&&++i},e),i},update:function(e){var i=this;t.each(i.getMeta().data,function(t,r){i.updateElement(t,r,e)},i)},updateElement:function(e,i,r){var a=this,n=a.getMeta(),o=a.getScaleForId(n.xAxisID),s=a.getScaleForId(n.yAxisID),l=s.getBasePixel(),d=a.chart.options.elements.rectangle,u=e.custom||{},c=a.getDataset();t.extend(e,{_xScale:o,_yScale:s,_datasetIndex:a.index,_index:i,_model:{x:a.calculateBarX(i,a.index),y:r?l:a.calculateBarY(i,a.index),label:a.chart.data.labels[i],datasetLabel:c.label,base:r?l:a.calculateBarBase(a.index,i),width:a.calculateBarWidth(i),backgroundColor:u.backgroundColor?u.backgroundColor:t.getValueAtIndexOrDefault(c.backgroundColor,i,d.backgroundColor),borderSkipped:u.borderSkipped?u.borderSkipped:d.borderSkipped,borderColor:u.borderColor?u.borderColor:t.getValueAtIndexOrDefault(c.borderColor,i,d.borderColor),borderWidth:u.borderWidth?u.borderWidth:t.getValueAtIndexOrDefault(c.borderWidth,i,d.borderWidth)}}),e.pivot()},calculateBarBase:function(e,t){var i=this,r=i.getMeta(),a=i.getScaleForId(r.yAxisID),n=0;if(a.options.stacked){for(var o=i.chart,s=o.data.datasets,l=Number(s[e].data[t]),d=0;e>d;d++){var u=s[d],c=o.getDatasetMeta(d);if(c.bar&&c.yAxisID===a.id&&o.isDatasetVisible(d)){var p=Number(u.data[t]);n+=0>l?Math.min(p,0):Math.max(p,0)}}return a.getPixelForValue(n)}return a.getBasePixel()},getRuler:function(e){var t,i=this,r=i.getMeta(),a=i.getScaleForId(r.xAxisID),n=i.getBarCount();t="category"===a.options.type?a.getPixelForTick(e+1)-a.getPixelForTick(e):a.width/a.ticks.length;var o=t*a.options.categoryPercentage,s=(t-t*a.options.categoryPercentage)/2,l=o/n;if(a.ticks.length!==i.chart.data.labels.length){var d=a.ticks.length/i.chart.data.labels.length;l*=d}var u=l*a.options.barPercentage,c=l-l*a.options.barPercentage;return{datasetCount:n,tickWidth:t,categoryWidth:o,categorySpacing:s,fullBarWidth:l,barWidth:u,barSpacing:c}},calculateBarWidth:function(e){var t=this.getScaleForId(this.getMeta().xAxisID);if(t.options.barThickness)return t.options.barThickness;var i=this.getRuler(e);return t.options.stacked?i.categoryWidth:i.barWidth},getBarIndex:function(e){var t,i,r=0;for(i=0;e>i;++i)t=this.chart.getDatasetMeta(i),t.bar&&this.chart.isDatasetVisible(i)&&++r;return r},calculateBarX:function(e,t){var i=this,r=i.getMeta(),a=i.getScaleForId(r.xAxisID),n=i.getBarIndex(t),o=i.getRuler(e),s=a.getPixelForValue(null,e,t,i.chart.isCombo);return s-=i.chart.isCombo?o.tickWidth/2:0,a.options.stacked?s+o.categoryWidth/2+o.categorySpacing:s+o.barWidth/2+o.categorySpacing+o.barWidth*n+o.barSpacing/2+o.barSpacing*n},calculateBarY:function(e,t){var i=this,r=i.getMeta(),a=i.getScaleForId(r.yAxisID),n=Number(i.getDataset().data[e]);if(a.options.stacked){for(var o=0,s=0,l=0;t>l;l++){var d=i.chart.data.datasets[l],u=i.chart.getDatasetMeta(l);if(u.bar&&u.yAxisID===a.id&&i.chart.isDatasetVisible(l)){var c=Number(d.data[e]);0>c?s+=c||0:o+=c||0}}return 0>n?a.getPixelForValue(s+n):a.getPixelForValue(o+n)}return a.getPixelForValue(n)},draw:function(e){var i=this,r=e||1;t.each(i.getMeta().data,function(e,t){var a=i.getDataset().data[t];null===a||void 0===a||isNaN(a)||e.transition(r).draw()},i)},setHoverStyle:function(e){var i=this.chart.data.datasets[e._datasetIndex],r=e._index,a=e.custom||{},n=e._model;n.backgroundColor=a.hoverBackgroundColor?a.hoverBackgroundColor:t.getValueAtIndexOrDefault(i.hoverBackgroundColor,r,t.getHoverColor(n.backgroundColor)),n.borderColor=a.hoverBorderColor?a.hoverBorderColor:t.getValueAtIndexOrDefault(i.hoverBorderColor,r,t.getHoverColor(n.borderColor)),n.borderWidth=a.hoverBorderWidth?a.hoverBorderWidth:t.getValueAtIndexOrDefault(i.hoverBorderWidth,r,n.borderWidth)},removeHoverStyle:function(e){var i=this.chart.data.datasets[e._datasetIndex],r=e._index,a=e.custom||{},n=e._model,o=this.chart.options.elements.rectangle;n.backgroundColor=a.backgroundColor?a.backgroundColor:t.getValueAtIndexOrDefault(i.backgroundColor,r,o.backgroundColor),n.borderColor=a.borderColor?a.borderColor:t.getValueAtIndexOrDefault(i.borderColor,r,o.borderColor),n.borderWidth=a.borderWidth?a.borderWidth:t.getValueAtIndexOrDefault(i.borderWidth,r,o.borderWidth)}}),e.defaults.horizontalBar={hover:{mode:"label"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{position:"left",type:"category",categoryPercentage:.8,barPercentage:.9,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{callbacks:{title:function(e,t){var i="";return e.length>0&&(e[0].yLabel?i=e[0].yLabel:t.labels.length>0&&e[0].index<t.labels.length&&(i=t.labels[e[0].index])),i},label:function(e,t){var i=t.datasets[e.datasetIndex].label||"";return i+": "+e.xLabel}}}},e.controllers.horizontalBar=e.controllers.bar.extend({updateElement:function(e,i,r){var a=this,n=a.getMeta(),o=a.getScaleForId(n.xAxisID),s=a.getScaleForId(n.yAxisID),l=o.getBasePixel(),d=e.custom||{},u=a.getDataset(),c=a.chart.options.elements.rectangle;t.extend(e,{_xScale:o,_yScale:s,_datasetIndex:a.index,_index:i,_model:{x:r?l:a.calculateBarX(i,a.index),y:a.calculateBarY(i,a.index),label:a.chart.data.labels[i],datasetLabel:u.label,base:r?l:a.calculateBarBase(a.index,i),height:a.calculateBarHeight(i),backgroundColor:d.backgroundColor?d.backgroundColor:t.getValueAtIndexOrDefault(u.backgroundColor,i,c.backgroundColor),borderSkipped:d.borderSkipped?d.borderSkipped:c.borderSkipped,borderColor:d.borderColor?d.borderColor:t.getValueAtIndexOrDefault(u.borderColor,i,c.borderColor),borderWidth:d.borderWidth?d.borderWidth:t.getValueAtIndexOrDefault(u.borderWidth,i,c.borderWidth)},draw:function(){function e(e){return l[(u+e)%4]}var t=this._chart.ctx,i=this._view,r=i.height/2,a=i.y-r,n=i.y+r,o=i.base-(i.base-i.x),s=i.borderWidth/2;i.borderWidth&&(a+=s,n-=s,o+=s),t.beginPath(),t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth;var l=[[i.base,n],[i.base,a],[o,a],[o,n]],d=["bottom","left","top","right"],u=d.indexOf(i.borderSkipped,0);-1===u&&(u=0),t.moveTo.apply(t,e(0));for(var c=1;4>c;c++)t.lineTo.apply(t,e(c));t.fill(),i.borderWidth&&t.stroke()},inRange:function(e,t){var i=this._view,r=!1;return i&&(r=i.x<i.base?t>=i.y-i.height/2&&t<=i.y+i.height/2&&e>=i.x&&e<=i.base:t>=i.y-i.height/2&&t<=i.y+i.height/2&&e>=i.base&&e<=i.x),r}}),e.pivot()},calculateBarBase:function(e,t){var i=this,r=i.getMeta(),a=i.getScaleForId(r.xAxisID),n=0;
if(a.options.stacked){for(var o=i.chart,s=o.data.datasets,l=Number(s[e].data[t]),d=0;e>d;d++){var u=s[d],c=o.getDatasetMeta(d);if(c.bar&&c.xAxisID===a.id&&o.isDatasetVisible(d)){var p=Number(u.data[t]);n+=0>l?Math.min(p,0):Math.max(p,0)}}return a.getPixelForValue(n)}return a.getBasePixel()},getRuler:function(e){var t,i=this,r=i.getMeta(),a=i.getScaleForId(r.yAxisID),n=i.getBarCount();t="category"===a.options.type?a.getPixelForTick(e+1)-a.getPixelForTick(e):a.width/a.ticks.length;var o=t*a.options.categoryPercentage,s=(t-t*a.options.categoryPercentage)/2,l=o/n;if(a.ticks.length!==i.chart.data.labels.length){var d=a.ticks.length/i.chart.data.labels.length;l*=d}var u=l*a.options.barPercentage,c=l-l*a.options.barPercentage;return{datasetCount:n,tickHeight:t,categoryHeight:o,categorySpacing:s,fullBarHeight:l,barHeight:u,barSpacing:c}},calculateBarHeight:function(e){var t=this,i=t.getScaleForId(t.getMeta().yAxisID);if(i.options.barThickness)return i.options.barThickness;var r=t.getRuler(e);return i.options.stacked?r.categoryHeight:r.barHeight},calculateBarX:function(e,t){var i=this,r=i.getMeta(),a=i.getScaleForId(r.xAxisID),n=Number(i.getDataset().data[e]);if(a.options.stacked){for(var o=0,s=0,l=0;t>l;l++){var d=i.chart.data.datasets[l],u=i.chart.getDatasetMeta(l);if(u.bar&&u.xAxisID===a.id&&i.chart.isDatasetVisible(l)){var c=Number(d.data[e]);0>c?s+=c||0:o+=c||0}}return 0>n?a.getPixelForValue(s+n):a.getPixelForValue(o+n)}return a.getPixelForValue(n)},calculateBarY:function(e,t){var i=this,r=i.getMeta(),a=i.getScaleForId(r.yAxisID),n=i.getBarIndex(t),o=i.getRuler(e),s=a.getPixelForValue(null,e,t,i.chart.isCombo);return s-=i.chart.isCombo?o.tickHeight/2:0,a.options.stacked?s+o.categoryHeight/2+o.categorySpacing:s+o.barHeight/2+o.categorySpacing+o.barHeight*n+o.barSpacing/2+o.barSpacing*n}})}},{}],16:[function(e,t,i){"use strict";t.exports=function(e){var t=e.helpers;e.defaults.bubble={hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(e,t){var i=t.datasets[e.datasetIndex].label||"",r=t.datasets[e.datasetIndex].data[e.index];return i+": ("+r.x+", "+r.y+", "+r.r+")"}}}},e.controllers.bubble=e.DatasetController.extend({dataElementType:e.elements.Point,update:function(e){var i=this,r=i.getMeta(),a=r.data;t.each(a,function(t,r){i.updateElement(t,r,e)})},updateElement:function(i,r,a){var n=this,o=n.getMeta(),s=n.getScaleForId(o.xAxisID),l=n.getScaleForId(o.yAxisID),d=i.custom||{},u=n.getDataset(),c=u.data[r],p=n.chart.options.elements.point,h=n.index;t.extend(i,{_xScale:s,_yScale:l,_datasetIndex:h,_index:r,_model:{x:a?s.getPixelForDecimal(.5):s.getPixelForValue("object"==typeof c?c:NaN,r,h,n.chart.isCombo),y:a?l.getBasePixel():l.getPixelForValue(c,r,h),radius:a?0:d.radius?d.radius:n.getRadius(c),hitRadius:d.hitRadius?d.hitRadius:t.getValueAtIndexOrDefault(u.hitRadius,r,p.hitRadius)}}),e.DatasetController.prototype.removeHoverStyle.call(n,i,p);var f=i._model;f.skip=d.skip?d.skip:isNaN(f.x)||isNaN(f.y),i.pivot()},getRadius:function(e){return e.r||this.chart.options.elements.point.radius},setHoverStyle:function(i){var r=this;e.DatasetController.prototype.setHoverStyle.call(r,i);var a=r.chart.data.datasets[i._datasetIndex],n=i._index,o=i.custom||{},s=i._model;s.radius=o.hoverRadius?o.hoverRadius:t.getValueAtIndexOrDefault(a.hoverRadius,n,r.chart.options.elements.point.hoverRadius)+r.getRadius(a.data[n])},removeHoverStyle:function(t){var i=this;e.DatasetController.prototype.removeHoverStyle.call(i,t,i.chart.options.elements.point);var r=i.chart.data.datasets[t._datasetIndex].data[t._index],a=t.custom||{},n=t._model;n.radius=a.radius?a.radius:i.getRadius(r)}})}},{}],17:[function(e,t,i){"use strict";t.exports=function(e){var t=e.helpers,i=e.defaults;i.doughnut={animation:{animateRotate:!0,animateScale:!1},aspectRatio:1,hover:{mode:"single"},legendCallback:function(e){var t=[];t.push('<ul class="'+e.id+'-legend">');var i=e.data,r=i.datasets,a=i.labels;if(r.length)for(var n=0;n<r[0].data.length;++n)t.push('<li><span style="background-color:'+r[0].backgroundColor[n]+'"></span>'),a[n]&&t.push(a[n]),t.push("</li>");return t.push("</ul>"),t.join("")},legend:{labels:{generateLabels:function(e){var i=e.data;return i.labels.length&&i.datasets.length?i.labels.map(function(r,a){var n=e.getDatasetMeta(0),o=i.datasets[0],s=n.data[a],l=s&&s.custom||{},d=t.getValueAtIndexOrDefault,u=e.options.elements.arc,c=l.backgroundColor?l.backgroundColor:d(o.backgroundColor,a,u.backgroundColor),p=l.borderColor?l.borderColor:d(o.borderColor,a,u.borderColor),h=l.borderWidth?l.borderWidth:d(o.borderWidth,a,u.borderWidth);return{text:r,fillStyle:c,strokeStyle:p,lineWidth:h,hidden:isNaN(o.data[a])||n.data[a].hidden,index:a}}):[]}},onClick:function(e,t){var i,r,a,n=t.index,o=this.chart;for(i=0,r=(o.data.datasets||[]).length;r>i;++i)a=o.getDatasetMeta(i),a.data[n].hidden=!a.data[n].hidden;o.update()}},cutoutPercentage:50,rotation:Math.PI*-.5,circumference:2*Math.PI,tooltips:{callbacks:{title:function(){return""},label:function(e,t){return t.labels[e.index]+": "+t.datasets[e.datasetIndex].data[e.index]}}}},i.pie=t.clone(i.doughnut),t.extend(i.pie,{cutoutPercentage:0}),e.controllers.doughnut=e.controllers.pie=e.DatasetController.extend({dataElementType:e.elements.Arc,linkScales:t.noop,getRingIndex:function(e){for(var t=0,i=0;e>i;++i)this.chart.isDatasetVisible(i)&&++t;return t},update:function(e){var i=this,r=i.chart,a=r.chartArea,n=r.options,o=n.elements.arc,s=a.right-a.left-o.borderWidth,l=a.bottom-a.top-o.borderWidth,d=Math.min(s,l),u={x:0,y:0},c=i.getMeta(),p=n.cutoutPercentage,h=n.circumference;if(h<2*Math.PI){var f=n.rotation%(2*Math.PI);f+=2*Math.PI*(f>=Math.PI?-1:f<-Math.PI?1:0);var g=f+h,m={x:Math.cos(f),y:Math.sin(f)},v={x:Math.cos(g),y:Math.sin(g)},b=0>=f&&g>=0||f<=2*Math.PI&&2*Math.PI<=g,_=f<=.5*Math.PI&&.5*Math.PI<=g||f<=2.5*Math.PI&&2.5*Math.PI<=g,y=f<=-Math.PI&&-Math.PI<=g||f<=Math.PI&&Math.PI<=g,x=f<=.5*-Math.PI&&.5*-Math.PI<=g||f<=1.5*Math.PI&&1.5*Math.PI<=g,w=p/100,j={x:y?-1:Math.min(m.x*(m.x<0?1:w),v.x*(v.x<0?1:w)),y:x?-1:Math.min(m.y*(m.y<0?1:w),v.y*(v.y<0?1:w))},k={x:b?1:Math.max(m.x*(m.x>0?1:w),v.x*(v.x>0?1:w)),y:_?1:Math.max(m.y*(m.y>0?1:w),v.y*(v.y>0?1:w))},C={width:.5*(k.x-j.x),height:.5*(k.y-j.y)};d=Math.min(s/C.width,l/C.height),u={x:(k.x+j.x)*-.5,y:(k.y+j.y)*-.5}}r.borderWidth=i.getMaxBorderWidth(c.data),r.outerRadius=Math.max((d-r.borderWidth)/2,0),r.innerRadius=Math.max(p?r.outerRadius/100*p:1,0),r.radiusLength=(r.outerRadius-r.innerRadius)/r.getVisibleDatasetCount(),r.offsetX=u.x*r.outerRadius,r.offsetY=u.y*r.outerRadius,c.total=i.calculateTotal(),i.outerRadius=r.outerRadius-r.radiusLength*i.getRingIndex(i.index),i.innerRadius=i.outerRadius-r.radiusLength,t.each(c.data,function(t,r){i.updateElement(t,r,e)})},updateElement:function(e,i,r){var a=this,n=a.chart,o=n.chartArea,s=n.options,l=s.animation,d=(o.left+o.right)/2,u=(o.top+o.bottom)/2,c=s.rotation,p=s.rotation,h=a.getDataset(),f=r&&l.animateRotate?0:e.hidden?0:a.calculateCircumference(h.data[i])*(s.circumference/(2*Math.PI)),g=r&&l.animateScale?0:a.innerRadius,m=r&&l.animateScale?0:a.outerRadius,v=t.getValueAtIndexOrDefault;t.extend(e,{_datasetIndex:a.index,_index:i,_model:{x:d+n.offsetX,y:u+n.offsetY,startAngle:c,endAngle:p,circumference:f,outerRadius:m,innerRadius:g,label:v(h.label,i,n.data.labels[i])}});var b=e._model;this.removeHoverStyle(e),r&&l.animateRotate||(0===i?b.startAngle=s.rotation:b.startAngle=a.getMeta().data[i-1]._model.endAngle,b.endAngle=b.startAngle+b.circumference),e.pivot()},removeHoverStyle:function(t){e.DatasetController.prototype.removeHoverStyle.call(this,t,this.chart.options.elements.arc)},calculateTotal:function(){var e,i=this.getDataset(),r=this.getMeta(),a=0;return t.each(r.data,function(t,r){e=i.data[r],isNaN(e)||t.hidden||(a+=Math.abs(e))}),a},calculateCircumference:function(e){var t=this.getMeta().total;return t>0&&!isNaN(e)?2*Math.PI*(e/t):0},getMaxBorderWidth:function(e){for(var t,i,r=0,a=this.index,n=e.length,o=0;n>o;o++)t=e[o]._model?e[o]._model.borderWidth:0,i=e[o]._chart?e[o]._chart.config.data.datasets[a].hoverBorderWidth:0,r=t>r?t:r,r=i>r?i:r;return r}})}},{}],18:[function(e,t,i){"use strict";t.exports=function(e){function t(e,t){return i.getValueOrDefault(e.showLine,t.showLines)}var i=e.helpers;e.defaults.line={showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}},e.controllers.line=e.DatasetController.extend({datasetElementType:e.elements.Line,dataElementType:e.elements.Point,addElementAndReset:function(i){var r=this,a=r.chart.options,n=r.getMeta();e.DatasetController.prototype.addElementAndReset.call(r,i),t(r.getDataset(),a)&&0!==n.dataset._model.tension&&r.updateBezierControlPoints()},update:function(e){var r,a,n,o=this,s=o.getMeta(),l=s.dataset,d=s.data||[],u=o.chart.options,c=u.elements.line,p=o.getScaleForId(s.yAxisID),h=o.getDataset(),f=t(h,u);for(f&&(n=l.custom||{},void 0!==h.tension&&void 0===h.lineTension&&(h.lineTension=h.tension),l._scale=p,l._datasetIndex=o.index,l._children=d,l._model={spanGaps:h.spanGaps?h.spanGaps:u.spanGaps,tension:n.tension?n.tension:i.getValueOrDefault(h.lineTension,c.tension),backgroundColor:n.backgroundColor?n.backgroundColor:h.backgroundColor||c.backgroundColor,borderWidth:n.borderWidth?n.borderWidth:h.borderWidth||c.borderWidth,borderColor:n.borderColor?n.borderColor:h.borderColor||c.borderColor,borderCapStyle:n.borderCapStyle?n.borderCapStyle:h.borderCapStyle||c.borderCapStyle,borderDash:n.borderDash?n.borderDash:h.borderDash||c.borderDash,borderDashOffset:n.borderDashOffset?n.borderDashOffset:h.borderDashOffset||c.borderDashOffset,borderJoinStyle:n.borderJoinStyle?n.borderJoinStyle:h.borderJoinStyle||c.borderJoinStyle,fill:n.fill?n.fill:void 0!==h.fill?h.fill:c.fill,steppedLine:n.steppedLine?n.steppedLine:i.getValueOrDefault(h.steppedLine,c.stepped),scaleTop:p.top,scaleBottom:p.bottom,scaleZero:p.getBasePixel()},l.pivot()),r=0,a=d.length;a>r;++r)o.updateElement(d[r],r,e);for(f&&0!==l._model.tension&&o.updateBezierControlPoints(),r=0,a=d.length;a>r;++r)d[r].pivot()},getPointBackgroundColor:function(e,t){var r=this.chart.options.elements.point.backgroundColor,a=this.getDataset(),n=e.custom||{};return n.backgroundColor?r=n.backgroundColor:a.pointBackgroundColor?r=i.getValueAtIndexOrDefault(a.pointBackgroundColor,t,r):a.backgroundColor&&(r=a.backgroundColor),r},getPointBorderColor:function(e,t){var r=this.chart.options.elements.point.borderColor,a=this.getDataset(),n=e.custom||{};return n.borderColor?r=n.borderColor:a.pointBorderColor?r=i.getValueAtIndexOrDefault(a.pointBorderColor,t,r):a.borderColor&&(r=a.borderColor),r},getPointBorderWidth:function(e,t){var r=this.chart.options.elements.point.borderWidth,a=this.getDataset(),n=e.custom||{};return n.borderWidth?r=n.borderWidth:a.pointBorderWidth?r=i.getValueAtIndexOrDefault(a.pointBorderWidth,t,r):a.borderWidth&&(r=a.borderWidth),r},updateElement:function(e,t,r){var a,n,o=this,s=o.getMeta(),l=e.custom||{},d=o.getDataset(),u=o.index,c=d.data[t],p=o.getScaleForId(s.yAxisID),h=o.getScaleForId(s.xAxisID),f=o.chart.options.elements.point;void 0!==d.radius&&void 0===d.pointRadius&&(d.pointRadius=d.radius),void 0!==d.hitRadius&&void 0===d.pointHitRadius&&(d.pointHitRadius=d.hitRadius),a=h.getPixelForValue("object"==typeof c?c:NaN,t,u,o.chart.isCombo),n=r?p.getBasePixel():o.calculatePointY(c,t,u),e._xScale=h,e._yScale=p,e._datasetIndex=u,e._index=t,e._model={x:a,y:n,skip:l.skip||isNaN(a)||isNaN(n),radius:l.radius||i.getValueAtIndexOrDefault(d.pointRadius,t,f.radius),pointStyle:l.pointStyle||i.getValueAtIndexOrDefault(d.pointStyle,t,f.pointStyle),backgroundColor:o.getPointBackgroundColor(e,t),borderColor:o.getPointBorderColor(e,t),borderWidth:o.getPointBorderWidth(e,t),tension:s.dataset._model?s.dataset._model.tension:0,steppedLine:!!s.dataset._model&&s.dataset._model.steppedLine,hitRadius:l.hitRadius||i.getValueAtIndexOrDefault(d.pointHitRadius,t,f.hitRadius)}},calculatePointY:function(e,t,i){var r,a,n,o=this,s=o.chart,l=o.getMeta(),d=o.getScaleForId(l.yAxisID),u=0,c=0;if(d.options.stacked){for(r=0;i>r;r++)if(a=s.data.datasets[r],n=s.getDatasetMeta(r),"line"===n.type&&n.yAxisID===d.id&&s.isDatasetVisible(r)){var p=Number(d.getRightValue(a.data[t]));0>p?c+=p||0:u+=p||0}var h=Number(d.getRightValue(e));return 0>h?d.getPixelForValue(c+h):d.getPixelForValue(u+h)}return d.getPixelForValue(e)},updateBezierControlPoints:function(){function e(e,t,i){return c?Math.max(Math.min(e,i),t):e}var t,r,a,n,o,s=this,l=s.getMeta(),d=s.chart.chartArea,u=(l.data||[]).filter(function(e){return!e._model.skip}),c=s.chart.options.elements.line.capBezierPoints;for(t=0,r=u.length;r>t;++t)a=u[t],n=a._model,o=i.splineCurve(i.previousItem(u,t)._model,n,i.nextItem(u,t)._model,l.dataset._model.tension),n.controlPointPreviousX=e(o.previous.x,d.left,d.right),n.controlPointPreviousY=e(o.previous.y,d.top,d.bottom),n.controlPointNextX=e(o.next.x,d.left,d.right),n.controlPointNextY=e(o.next.y,d.top,d.bottom)},draw:function(e){var i,r,a=this,n=a.getMeta(),o=n.data||[],s=e||1;for(i=0,r=o.length;r>i;++i)o[i].transition(s);for(t(a.getDataset(),a.chart.options)&&n.dataset.transition(s).draw(),i=0,r=o.length;r>i;++i)o[i].draw()},setHoverStyle:function(e){var t=this.chart.data.datasets[e._datasetIndex],r=e._index,a=e.custom||{},n=e._model;n.radius=a.hoverRadius||i.getValueAtIndexOrDefault(t.pointHoverRadius,r,this.chart.options.elements.point.hoverRadius),n.backgroundColor=a.hoverBackgroundColor||i.getValueAtIndexOrDefault(t.pointHoverBackgroundColor,r,i.getHoverColor(n.backgroundColor)),n.borderColor=a.hoverBorderColor||i.getValueAtIndexOrDefault(t.pointHoverBorderColor,r,i.getHoverColor(n.borderColor)),n.borderWidth=a.hoverBorderWidth||i.getValueAtIndexOrDefault(t.pointHoverBorderWidth,r,n.borderWidth)},removeHoverStyle:function(e){var t=this,r=t.chart.data.datasets[e._datasetIndex],a=e._index,n=e.custom||{},o=e._model;void 0!==r.radius&&void 0===r.pointRadius&&(r.pointRadius=r.radius),o.radius=n.radius||i.getValueAtIndexOrDefault(r.pointRadius,a,t.chart.options.elements.point.radius),o.backgroundColor=t.getPointBackgroundColor(e,a),o.borderColor=t.getPointBorderColor(e,a),o.borderWidth=t.getPointBorderWidth(e,a)}})}},{}],19:[function(e,t,i){"use strict";t.exports=function(e){var t=e.helpers;e.defaults.polarArea={scale:{type:"radialLinear",lineArc:!0,ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,aspectRatio:1,legendCallback:function(e){var t=[];t.push('<ul class="'+e.id+'-legend">');var i=e.data,r=i.datasets,a=i.labels;if(r.length)for(var n=0;n<r[0].data.length;++n)t.push('<li><span style="background-color:'+r[0].backgroundColor[n]+'">'),a[n]&&t.push(a[n]),t.push("</span></li>");return t.push("</ul>"),t.join("")},legend:{labels:{generateLabels:function(e){var i=e.data;return i.labels.length&&i.datasets.length?i.labels.map(function(r,a){var n=e.getDatasetMeta(0),o=i.datasets[0],s=n.data[a],l=s.custom||{},d=t.getValueAtIndexOrDefault,u=e.options.elements.arc,c=l.backgroundColor?l.backgroundColor:d(o.backgroundColor,a,u.backgroundColor),p=l.borderColor?l.borderColor:d(o.borderColor,a,u.borderColor),h=l.borderWidth?l.borderWidth:d(o.borderWidth,a,u.borderWidth);return{text:r,fillStyle:c,strokeStyle:p,lineWidth:h,hidden:isNaN(o.data[a])||n.data[a].hidden,index:a}}):[]}},onClick:function(e,t){var i,r,a,n=t.index,o=this.chart;for(i=0,r=(o.data.datasets||[]).length;r>i;++i)a=o.getDatasetMeta(i),a.data[n].hidden=!a.data[n].hidden;o.update()}},tooltips:{callbacks:{title:function(){return""},label:function(e,t){return t.labels[e.index]+": "+e.yLabel}}}},e.controllers.polarArea=e.DatasetController.extend({dataElementType:e.elements.Arc,linkScales:t.noop,update:function(e){var i=this,r=i.chart,a=r.chartArea,n=i.getMeta(),o=r.options,s=o.elements.arc,l=Math.min(a.right-a.left,a.bottom-a.top);r.outerRadius=Math.max((l-s.borderWidth/2)/2,0),r.innerRadius=Math.max(o.cutoutPercentage?r.outerRadius/100*o.cutoutPercentage:1,0),r.radiusLength=(r.outerRadius-r.innerRadius)/r.getVisibleDatasetCount(),i.outerRadius=r.outerRadius-r.radiusLength*i.index,i.innerRadius=i.outerRadius-r.radiusLength,n.count=i.countVisibleElements(),t.each(n.data,function(t,r){i.updateElement(t,r,e)})},updateElement:function(e,i,r){for(var a=this,n=a.chart,o=a.getDataset(),s=n.options,l=s.animation,d=n.scale,u=t.getValueAtIndexOrDefault,c=n.data.labels,p=a.calculateCircumference(o.data[i]),h=d.xCenter,f=d.yCenter,g=0,m=a.getMeta(),v=0;i>v;++v)isNaN(o.data[v])||m.data[v].hidden||++g;var b=s.startAngle,_=e.hidden?0:d.getDistanceFromCenterForValue(o.data[i]),y=b+p*g,x=y+(e.hidden?0:p),w=l.animateScale?0:d.getDistanceFromCenterForValue(o.data[i]);t.extend(e,{_datasetIndex:a.index,_index:i,_scale:d,_model:{x:h,y:f,innerRadius:0,outerRadius:r?w:_,startAngle:r&&l.animateRotate?b:y,endAngle:r&&l.animateRotate?b:x,label:u(c,i,c[i])}}),a.removeHoverStyle(e),e.pivot()},removeHoverStyle:function(t){e.DatasetController.prototype.removeHoverStyle.call(this,t,this.chart.options.elements.arc)},countVisibleElements:function(){var e=this.getDataset(),i=this.getMeta(),r=0;return t.each(i.data,function(t,i){isNaN(e.data[i])||t.hidden||r++}),r},calculateCircumference:function(e){var t=this.getMeta().count;return t>0&&!isNaN(e)?2*Math.PI/t:0}})}},{}],20:[function(e,t,i){"use strict";t.exports=function(e){var t=e.helpers;e.defaults.radar={scale:{type:"radialLinear"},elements:{line:{tension:0}}},e.controllers.radar=e.DatasetController.extend({datasetElementType:e.elements.Line,dataElementType:e.elements.Point,linkScales:t.noop,addElementAndReset:function(t){e.DatasetController.prototype.addElementAndReset.call(this,t),this.updateBezierControlPoints()},update:function(e){var i=this,r=i.getMeta(),a=r.dataset,n=r.data,o=a.custom||{},s=i.getDataset(),l=i.chart.options.elements.line,d=i.chart.scale;void 0!==s.tension&&void 0===s.lineTension&&(s.lineTension=s.tension),t.extend(r.dataset,{_datasetIndex:i.index,_children:n,_loop:!0,_model:{tension:o.tension?o.tension:t.getValueOrDefault(s.lineTension,l.tension),backgroundColor:o.backgroundColor?o.backgroundColor:s.backgroundColor||l.backgroundColor,borderWidth:o.borderWidth?o.borderWidth:s.borderWidth||l.borderWidth,borderColor:o.borderColor?o.borderColor:s.borderColor||l.borderColor,fill:o.fill?o.fill:void 0!==s.fill?s.fill:l.fill,borderCapStyle:o.borderCapStyle?o.borderCapStyle:s.borderCapStyle||l.borderCapStyle,borderDash:o.borderDash?o.borderDash:s.borderDash||l.borderDash,borderDashOffset:o.borderDashOffset?o.borderDashOffset:s.borderDashOffset||l.borderDashOffset,borderJoinStyle:o.borderJoinStyle?o.borderJoinStyle:s.borderJoinStyle||l.borderJoinStyle,scaleTop:d.top,scaleBottom:d.bottom,scaleZero:d.getBasePosition()}}),r.dataset.pivot(),t.each(n,function(t,r){i.updateElement(t,r,e)},i),i.updateBezierControlPoints()},updateElement:function(e,i,r){var a=this,n=e.custom||{},o=a.getDataset(),s=a.chart.scale,l=a.chart.options.elements.point,d=s.getPointPositionForValue(i,o.data[i]);t.extend(e,{_datasetIndex:a.index,_index:i,_scale:s,_model:{x:r?s.xCenter:d.x,y:r?s.yCenter:d.y,tension:n.tension?n.tension:t.getValueOrDefault(o.tension,a.chart.options.elements.line.tension),radius:n.radius?n.radius:t.getValueAtIndexOrDefault(o.pointRadius,i,l.radius),backgroundColor:n.backgroundColor?n.backgroundColor:t.getValueAtIndexOrDefault(o.pointBackgroundColor,i,l.backgroundColor),borderColor:n.borderColor?n.borderColor:t.getValueAtIndexOrDefault(o.pointBorderColor,i,l.borderColor),borderWidth:n.borderWidth?n.borderWidth:t.getValueAtIndexOrDefault(o.pointBorderWidth,i,l.borderWidth),pointStyle:n.pointStyle?n.pointStyle:t.getValueAtIndexOrDefault(o.pointStyle,i,l.pointStyle),hitRadius:n.hitRadius?n.hitRadius:t.getValueAtIndexOrDefault(o.hitRadius,i,l.hitRadius)}}),e._model.skip=n.skip?n.skip:isNaN(e._model.x)||isNaN(e._model.y)},updateBezierControlPoints:function(){var e=this.chart.chartArea,i=this.getMeta();t.each(i.data,function(r,a){var n=r._model,o=t.splineCurve(t.previousItem(i.data,a,!0)._model,n,t.nextItem(i.data,a,!0)._model,n.tension);n.controlPointPreviousX=Math.max(Math.min(o.previous.x,e.right),e.left),n.controlPointPreviousY=Math.max(Math.min(o.previous.y,e.bottom),e.top),n.controlPointNextX=Math.max(Math.min(o.next.x,e.right),e.left),n.controlPointNextY=Math.max(Math.min(o.next.y,e.bottom),e.top),r.pivot()})},draw:function(e){var i=this.getMeta(),r=e||1;t.each(i.data,function(e){e.transition(r)}),i.dataset.transition(r).draw(),t.each(i.data,function(e){e.draw()})},setHoverStyle:function(e){var i=this.chart.data.datasets[e._datasetIndex],r=e.custom||{},a=e._index,n=e._model;n.radius=r.hoverRadius?r.hoverRadius:t.getValueAtIndexOrDefault(i.pointHoverRadius,a,this.chart.options.elements.point.hoverRadius),n.backgroundColor=r.hoverBackgroundColor?r.hoverBackgroundColor:t.getValueAtIndexOrDefault(i.pointHoverBackgroundColor,a,t.getHoverColor(n.backgroundColor)),n.borderColor=r.hoverBorderColor?r.hoverBorderColor:t.getValueAtIndexOrDefault(i.pointHoverBorderColor,a,t.getHoverColor(n.borderColor)),n.borderWidth=r.hoverBorderWidth?r.hoverBorderWidth:t.getValueAtIndexOrDefault(i.pointHoverBorderWidth,a,n.borderWidth)},removeHoverStyle:function(e){var i=this.chart.data.datasets[e._datasetIndex],r=e.custom||{},a=e._index,n=e._model,o=this.chart.options.elements.point;n.radius=r.radius?r.radius:t.getValueAtIndexOrDefault(i.radius,a,o.radius),n.backgroundColor=r.backgroundColor?r.backgroundColor:t.getValueAtIndexOrDefault(i.pointBackgroundColor,a,o.backgroundColor),n.borderColor=r.borderColor?r.borderColor:t.getValueAtIndexOrDefault(i.pointBorderColor,a,o.borderColor),n.borderWidth=r.borderWidth?r.borderWidth:t.getValueAtIndexOrDefault(i.pointBorderWidth,a,o.borderWidth)}})}},{}],21:[function(e,t,i){"use strict";t.exports=function(e){var t=e.helpers;e.defaults.global.animation={duration:1e3,easing:"easeOutQuart",onProgress:t.noop,onComplete:t.noop},e.Animation=e.Element.extend({currentStep:null,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),e.animationService={frameDuration:17,animations:[],dropFrames:0,request:null,addAnimation:function(e,t,i,r){var a=this;r||(e.animating=!0);for(var n=0;n<a.animations.length;++n)if(a.animations[n].chartInstance===e)return void(a.animations[n].animationObject=t);a.animations.push({chartInstance:e,animationObject:t}),1===a.animations.length&&a.requestAnimationFrame()},cancelAnimation:function(e){var i=t.findIndex(this.animations,function(t){return t.chartInstance===e});-1!==i&&(this.animations.splice(i,1),e.animating=!1)},requestAnimationFrame:function(){var e=this;null===e.request&&(e.request=t.requestAnimFrame.call(window,function(){e.request=null,e.startDigest()}))},startDigest:function(){var e=this,t=Date.now(),i=0;e.dropFrames>1&&(i=Math.floor(e.dropFrames),e.dropFrames=e.dropFrames%1);for(var r=0;r<e.animations.length;)null===e.animations[r].animationObject.currentStep&&(e.animations[r].animationObject.currentStep=0),e.animations[r].animationObject.currentStep+=1+i,e.animations[r].animationObject.currentStep>e.animations[r].animationObject.numSteps&&(e.animations[r].animationObject.currentStep=e.animations[r].animationObject.numSteps),e.animations[r].animationObject.render(e.animations[r].chartInstance,e.animations[r].animationObject),e.animations[r].animationObject.onAnimationProgress&&e.animations[r].animationObject.onAnimationProgress.call&&e.animations[r].animationObject.onAnimationProgress.call(e.animations[r].chartInstance,e.animations[r]),e.animations[r].animationObject.currentStep===e.animations[r].animationObject.numSteps?(e.animations[r].animationObject.onAnimationComplete&&e.animations[r].animationObject.onAnimationComplete.call&&e.animations[r].animationObject.onAnimationComplete.call(e.animations[r].chartInstance,e.animations[r]),e.animations[r].chartInstance.animating=!1,e.animations.splice(r,1)):++r;var a=Date.now(),n=(a-t)/e.frameDuration;e.dropFrames+=n,e.animations.length>0&&e.requestAnimationFrame()}}}},{}],22:[function(e,t,i){"use strict";t.exports=function(e){var t=e.canvasHelpers={};t.drawPoint=function(e,t,i,r,a){var n,o,s,l,d,u;if("object"==typeof t&&(n=t.toString(),"[object HTMLImageElement]"===n||"[object HTMLCanvasElement]"===n))return void e.drawImage(t,r-t.width/2,a-t.height/2);if(!(isNaN(i)||0>=i)){switch(t){default:e.beginPath(),e.arc(r,a,i,0,2*Math.PI),e.closePath(),e.fill();break;case"triangle":e.beginPath(),o=3*i/Math.sqrt(3),d=o*Math.sqrt(3)/2,e.moveTo(r-o/2,a+d/3),e.lineTo(r+o/2,a+d/3),e.lineTo(r,a-2*d/3),e.closePath(),e.fill();break;case"rect":u=1/Math.SQRT2*i,e.beginPath(),e.fillRect(r-u,a-u,2*u,2*u),e.strokeRect(r-u,a-u,2*u,2*u);break;case"rectRot":u=1/Math.SQRT2*i,e.beginPath(),e.moveTo(r-u,a),e.lineTo(r,a+u),e.lineTo(r+u,a),e.lineTo(r,a-u),e.closePath(),e.fill();break;case"cross":e.beginPath(),e.moveTo(r,a+i),e.lineTo(r,a-i),e.moveTo(r-i,a),e.lineTo(r+i,a),e.closePath();break;case"crossRot":e.beginPath(),s=Math.cos(Math.PI/4)*i,l=Math.sin(Math.PI/4)*i,e.moveTo(r-s,a-l),e.lineTo(r+s,a+l),e.moveTo(r-s,a+l),e.lineTo(r+s,a-l),e.closePath();break;case"star":e.beginPath(),e.moveTo(r,a+i),e.lineTo(r,a-i),e.moveTo(r-i,a),e.lineTo(r+i,a),s=Math.cos(Math.PI/4)*i,l=Math.sin(Math.PI/4)*i,e.moveTo(r-s,a-l),e.lineTo(r+s,a+l),e.moveTo(r-s,a+l),e.lineTo(r+s,a-l),e.closePath();break;case"line":e.beginPath(),e.moveTo(r-i,a),e.lineTo(r+i,a),e.closePath();break;case"dash":e.beginPath(),e.moveTo(r,a),e.lineTo(r+i,a),e.closePath()}e.stroke()}}}},{}],23:[function(e,t,i){"use strict";t.exports=function(e){var t=e.helpers;e.types={},e.instances={},e.controllers={},e.Controller=function(i){return this.chart=i,this.config=i.config,this.options=this.config.options=t.configMerge(e.defaults.global,e.defaults[this.config.type],this.config.options||{}),this.id=t.uid(),Object.defineProperty(this,"data",{get:function(){return this.config.data}}),e.instances[this.id]=this,this.options.responsive&&this.resize(!0),this.initialize(),this},t.extend(e.Controller.prototype,{initialize:function(){var t=this;return e.plugins.notify("beforeInit",[t]),t.bindEvents(),t.ensureScalesHaveIDs(),t.buildOrUpdateControllers(),t.buildScales(),t.updateLayout(),t.resetElements(),t.initToolTip(),t.update(),e.plugins.notify("afterInit",[t]),t},clear:function(){return t.clear(this.chart),this},stop:function(){return e.animationService.cancelAnimation(this),this},resize:function(i){var r=this,a=r.chart,n=a.canvas,o=t.getMaximumWidth(n),s=a.aspectRatio,l=r.options.maintainAspectRatio&&isNaN(s)===!1&&isFinite(s)&&0!==s?o/s:t.getMaximumHeight(n),d=a.width!==o||a.height!==l;if(!d)return r;n.width=a.width=o,n.height=a.height=l,t.retinaScale(a);var u={width:o,height:l};return e.plugins.notify("resize",[r,u]),r.options.onResize&&r.options.onResize(r,u),i||(r.stop(),r.update(r.options.responsiveAnimationDuration)),r},ensureScalesHaveIDs:function(){var e=this.options,i=e.scales||{},r=e.scale;t.each(i.xAxes,function(e,t){e.id=e.id||"x-axis-"+t}),t.each(i.yAxes,function(e,t){e.id=e.id||"y-axis-"+t}),r&&(r.id=r.id||"scale")},buildScales:function(){var i=this,r=i.options,a=i.scales={},n=[];r.scales&&(n=n.concat((r.scales.xAxes||[]).map(function(e){return{options:e,dtype:"category"}}),(r.scales.yAxes||[]).map(function(e){return{options:e,dtype:"linear"}}))),r.scale&&n.push({options:r.scale,dtype:"radialLinear",isDefault:!0}),t.each(n,function(r){var n=r.options,o=t.getValueOrDefault(n.type,r.dtype),s=e.scaleService.getScaleConstructor(o);if(s){var l=new s({id:n.id,options:n,ctx:i.chart.ctx,chart:i});a[l.id]=l,r.isDefault&&(i.scale=l)}}),e.scaleService.addScalesToLayout(this)},updateLayout:function(){e.layoutService.update(this,this.chart.width,this.chart.height)},buildOrUpdateControllers:function(){var i=this,r=[],a=[];if(t.each(i.data.datasets,function(t,n){var o=i.getDatasetMeta(n);o.type||(o.type=t.type||i.config.type),r.push(o.type),o.controller?o.controller.updateIndex(n):(o.controller=new e.controllers[o.type](i,n),a.push(o.controller))},i),r.length>1)for(var n=1;n<r.length;n++)if(r[n]!==r[n-1]){i.isCombo=!0;break}return a},resetElements:function(){var e=this;t.each(e.data.datasets,function(t,i){e.getDatasetMeta(i).controller.reset()},e)},update:function(i,r){var a=this;e.plugins.notify("beforeUpdate",[a]),a.tooltip._data=a.data;var n=a.buildOrUpdateControllers();t.each(a.data.datasets,function(e,t){a.getDatasetMeta(t).controller.buildOrUpdateElements()},a),e.layoutService.update(a,a.chart.width,a.chart.height),e.plugins.notify("afterScaleUpdate",[a]),t.each(n,function(e){e.reset()}),a.updateDatasets(),e.plugins.notify("afterUpdate",[a]),a.render(i,r)},updateDatasets:function(){var t,i,r=this;if(e.plugins.notify("beforeDatasetsUpdate",[r])){for(t=0,i=r.data.datasets.length;i>t;++t)r.getDatasetMeta(t).controller.update();e.plugins.notify("afterDatasetsUpdate",[r])}},render:function(i,r){var a=this;e.plugins.notify("beforeRender",[a]);var n=a.options.animation;if(n&&("undefined"!=typeof i&&0!==i||"undefined"==typeof i&&0!==n.duration)){var o=new e.Animation;o.numSteps=(i||n.duration)/16.66,o.easing=n.easing,o.render=function(e,i){var r=t.easingEffects[i.easing],a=i.currentStep/i.numSteps,n=r(a);e.draw(n,a,i.currentStep)},o.onAnimationProgress=n.onProgress,o.onAnimationComplete=n.onComplete,e.animationService.addAnimation(a,o,i,r)}else a.draw(),n&&n.onComplete&&n.onComplete.call&&n.onComplete.call(a);return a},draw:function(i){var r=this,a=i||1;r.clear(),e.plugins.notify("beforeDraw",[r,a]),t.each(r.boxes,function(e){e.draw(r.chartArea)},r),r.scale&&r.scale.draw(),e.plugins.notify("beforeDatasetsDraw",[r,a]),t.each(r.data.datasets,function(e,t){r.isDatasetVisible(t)&&r.getDatasetMeta(t).controller.draw(i)},r,!0),e.plugins.notify("afterDatasetsDraw",[r,a]),r.tooltip.transition(a).draw(),e.plugins.notify("afterDraw",[r,a])},getElementAtEvent:function(e){var i=this,r=t.getRelativePosition(e,i.chart),a=[];return t.each(i.data.datasets,function(e,n){if(i.isDatasetVisible(n)){var o=i.getDatasetMeta(n);t.each(o.data,function(e){return e.inRange(r.x,r.y)?(a.push(e),a):void 0})}}),a.slice(0,1)},getElementsAtEvent:function(e){var i=this,r=t.getRelativePosition(e,i.chart),a=[],n=function(){if(i.data.datasets)for(var e=0;e<i.data.datasets.length;e++){var t=i.getDatasetMeta(e);if(i.isDatasetVisible(e))for(var a=0;a<t.data.length;a++)if(t.data[a].inRange(r.x,r.y))return t.data[a]}}.call(i);return n?(t.each(i.data.datasets,function(e,t){if(i.isDatasetVisible(t)){var r=i.getDatasetMeta(t),o=r.data[n._index];o&&!o._view.skip&&a.push(o)}},i),a):a},getElementsAtXAxis:function(e){var i=this,r=t.getRelativePosition(e,i.chart),a=[],n=function(){if(i.data.datasets)for(var e=0;e<i.data.datasets.length;e++){var t=i.getDatasetMeta(e);if(i.isDatasetVisible(e))for(var a=0;a<t.data.length;a++)if(t.data[a].inLabelRange(r.x,r.y))return t.data[a]}}.call(i);return n?(t.each(i.data.datasets,function(e,r){if(i.isDatasetVisible(r)){var o=i.getDatasetMeta(r),s=t.findIndex(o.data,function(e){return n._model.x===e._model.x});-1===s||o.data[s]._view.skip||a.push(o.data[s])}},i),a):a},getElementsAtEventForMode:function(e,t){var i=this;switch(t){case"single":return i.getElementAtEvent(e);case"label":return i.getElementsAtEvent(e);case"dataset":return i.getDatasetAtEvent(e);case"x-axis":return i.getElementsAtXAxis(e);default:return e}},getDatasetAtEvent:function(e){var t=this.getElementAtEvent(e);return t.length>0&&(t=this.getDatasetMeta(t[0]._datasetIndex).data),t},getDatasetMeta:function(e){var t=this,i=t.data.datasets[e];i._meta||(i._meta={});var r=i._meta[t.id];return r||(r=i._meta[t.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null}),r},getVisibleDatasetCount:function(){for(var e=0,t=0,i=this.data.datasets.length;i>t;++t)this.isDatasetVisible(t)&&e++;return e},isDatasetVisible:function(e){var t=this.getDatasetMeta(e);return"boolean"==typeof t.hidden?!t.hidden:!this.data.datasets[e].hidden;
},generateLegend:function(){return this.options.legendCallback(this)},destroy:function(){var i=this;i.stop(),i.clear(),t.unbindEvents(i,i.events),t.removeResizeListener(i.chart.canvas.parentNode);var r=i.chart.canvas;r.width=i.chart.width,r.height=i.chart.height,void 0!==i.chart.originalDevicePixelRatio&&i.chart.ctx.scale(1/i.chart.originalDevicePixelRatio,1/i.chart.originalDevicePixelRatio),r.style.width=i.chart.originalCanvasStyleWidth,r.style.height=i.chart.originalCanvasStyleHeight,e.plugins.notify("destroy",[i]),delete e.instances[i.id]},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)},initToolTip:function(){var t=this;t.tooltip=new e.Tooltip({_chart:t.chart,_chartInstance:t,_data:t.data,_options:t.options.tooltips},t)},bindEvents:function(){var e=this;t.bindEvents(e,e.options.events,function(t){e.eventHandler(t)})},updateHoverStyle:function(e,t,i){var r,a,n,o=i?"setHoverStyle":"removeHoverStyle";switch(t){case"single":e=[e[0]];break;case"label":case"dataset":case"x-axis":break;default:return}for(a=0,n=e.length;n>a;++a)r=e[a],r&&this.getDatasetMeta(r._datasetIndex).controller[o](r)},eventHandler:function(e){var i=this,r=i.tooltip,a=i.options||{},n=a.hover,o=a.tooltips;return i.lastActive=i.lastActive||[],i.lastTooltipActive=i.lastTooltipActive||[],"mouseout"===e.type?(i.active=[],i.tooltipActive=[]):(i.active=i.getElementsAtEventForMode(e,n.mode),i.tooltipActive=i.getElementsAtEventForMode(e,o.mode)),n.onHover&&n.onHover.call(i,i.active),("mouseup"===e.type||"click"===e.type)&&(a.onClick&&a.onClick.call(i,e,i.active),i.legend&&i.legend.handleEvent&&i.legend.handleEvent(e)),i.lastActive.length&&i.updateHoverStyle(i.lastActive,n.mode,!1),i.active.length&&n.mode&&i.updateHoverStyle(i.active,n.mode,!0),(o.enabled||o.custom)&&(r.initialize(),r._active=i.tooltipActive,r.update(!0)),r.pivot(),i.animating||t.arrayEquals(i.active,i.lastActive)&&t.arrayEquals(i.tooltipActive,i.lastTooltipActive)||(i.stop(),(o.enabled||o.custom)&&r.update(!0),i.render(n.animationDuration,!0)),i.lastActive=i.active,i.lastTooltipActive=i.tooltipActive,i}})}},{}],24:[function(e,t,i){"use strict";t.exports=function(e){var t=e.helpers,i=t.noop;e.DatasetController=function(e,t){this.initialize.call(this,e,t)},t.extend(e.DatasetController.prototype,{datasetElementType:null,dataElementType:null,initialize:function(e,t){var i=this;i.chart=e,i.index=t,i.linkScales(),i.addElements()},updateIndex:function(e){this.index=e},linkScales:function(){var e=this,t=e.getMeta(),i=e.getDataset();null===t.xAxisID&&(t.xAxisID=i.xAxisID||e.chart.options.scales.xAxes[0].id),null===t.yAxisID&&(t.yAxisID=i.yAxisID||e.chart.options.scales.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(e){return this.chart.scales[e]},reset:function(){this.update(!0)},createMetaDataset:function(){var e=this,t=e.datasetElementType;return t&&new t({_chart:e.chart.chart,_datasetIndex:e.index})},createMetaData:function(e){var t=this,i=t.dataElementType;return i&&new i({_chart:t.chart.chart,_datasetIndex:t.index,_index:e})},addElements:function(){var e,t,i=this,r=i.getMeta(),a=i.getDataset().data||[],n=r.data;for(e=0,t=a.length;t>e;++e)n[e]=n[e]||i.createMetaData(r,e);r.dataset=r.dataset||i.createMetaDataset()},addElementAndReset:function(e){var t=this,i=t.createMetaData(e);t.getMeta().data.splice(e,0,i),t.updateElement(i,e,!0)},buildOrUpdateElements:function(){var e=this.getMeta(),t=e.data,i=this.getDataset().data.length,r=t.length;if(r>i)t.splice(i,r-i);else if(i>r)for(var a=r;i>a;++a)this.addElementAndReset(a)},update:i,draw:function(e){var i=e||1;t.each(this.getMeta().data,function(e){e.transition(i).draw()})},removeHoverStyle:function(e,i){var r=this.chart.data.datasets[e._datasetIndex],a=e._index,n=e.custom||{},o=t.getValueAtIndexOrDefault,s=e._model;s.backgroundColor=n.backgroundColor?n.backgroundColor:o(r.backgroundColor,a,i.backgroundColor),s.borderColor=n.borderColor?n.borderColor:o(r.borderColor,a,i.borderColor),s.borderWidth=n.borderWidth?n.borderWidth:o(r.borderWidth,a,i.borderWidth)},setHoverStyle:function(e){var i=this.chart.data.datasets[e._datasetIndex],r=e._index,a=e.custom||{},n=t.getValueAtIndexOrDefault,o=t.getHoverColor,s=e._model;s.backgroundColor=a.hoverBackgroundColor?a.hoverBackgroundColor:n(i.hoverBackgroundColor,r,o(s.backgroundColor)),s.borderColor=a.hoverBorderColor?a.hoverBorderColor:n(i.hoverBorderColor,r,o(s.borderColor)),s.borderWidth=a.hoverBorderWidth?a.hoverBorderWidth:n(i.hoverBorderWidth,r,s.borderWidth)}}),e.DatasetController.extend=t.inherits}},{}],25:[function(e,t,i){"use strict";t.exports=function(e){var t=e.helpers;e.elements={},e.Element=function(e){t.extend(this,e),this.initialize.apply(this,arguments)},t.extend(e.Element.prototype,{initialize:function(){this.hidden=!1},pivot:function(){var e=this;return e._view||(e._view=t.clone(e._model)),e._start=t.clone(e._view),e},transition:function(e){var i=this;return i._view||(i._view=t.clone(i._model)),1===e?(i._view=i._model,i._start=null,i):(i._start||i.pivot(),t.each(i._model,function(r,a){if("_"===a[0]);else if(i._view.hasOwnProperty(a))if(r===i._view[a]);else if("string"==typeof r)try{var n=t.color(i._model[a]).mix(t.color(i._start[a]),e);i._view[a]=n.rgbString()}catch(o){i._view[a]=r}else if("number"==typeof r){var s=void 0!==i._start[a]&&isNaN(i._start[a])===!1?i._start[a]:0;i._view[a]=(i._model[a]-s)*e+s}else i._view[a]=r;else"number"!=typeof r||isNaN(i._view[a])?i._view[a]=r:i._view[a]=r*e},i),i)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return t.isNumber(this._model.x)&&t.isNumber(this._model.y)}}),e.Element.extend=t.inherits}},{}],26:[function(e,t,i){"use strict";var r=e(2);t.exports=function(e){function t(e,t,i){var r;return"string"==typeof e?(r=parseInt(e,10),-1!=e.indexOf("%")&&(r=r/100*t.parentNode[i])):r=e,r}function i(e){return void 0!==e&&null!==e&&"none"!==e}function a(e,r,a){var n=document.defaultView,o=e.parentNode,s=n.getComputedStyle(e)[r],l=n.getComputedStyle(o)[r],d=i(s),u=i(l),c=Number.POSITIVE_INFINITY;return d||u?Math.min(d?t(s,e,a):c,u?t(l,o,a):c):"none"}var n=e.helpers={};n.each=function(e,t,i,r){var a,o;if(n.isArray(e))if(o=e.length,r)for(a=o-1;a>=0;a--)t.call(i,e[a],a);else for(a=0;o>a;a++)t.call(i,e[a],a);else if("object"==typeof e){var s=Object.keys(e);for(o=s.length,a=0;o>a;a++)t.call(i,e[s[a]],s[a])}},n.clone=function(e){var t={};return n.each(e,function(e,i){n.isArray(e)?t[i]=e.slice(0):"object"==typeof e&&null!==e?t[i]=n.clone(e):t[i]=e}),t},n.extend=function(e){for(var t=function(t,i){e[i]=t},i=1,r=arguments.length;r>i;i++)n.each(arguments[i],t);return e},n.configMerge=function(t){var i=n.clone(t);return n.each(Array.prototype.slice.call(arguments,1),function(t){n.each(t,function(t,r){if("scales"===r)i[r]=n.scaleMerge(i.hasOwnProperty(r)?i[r]:{},t);else if("scale"===r)i[r]=n.configMerge(i.hasOwnProperty(r)?i[r]:{},e.scaleService.getScaleDefaults(t.type),t);else if(i.hasOwnProperty(r)&&n.isArray(i[r])&&n.isArray(t)){var a=i[r];n.each(t,function(e,t){t<a.length?"object"==typeof a[t]&&null!==a[t]&&"object"==typeof e&&null!==e?a[t]=n.configMerge(a[t],e):a[t]=e:a.push(e)})}else i.hasOwnProperty(r)&&"object"==typeof i[r]&&null!==i[r]&&"object"==typeof t?i[r]=n.configMerge(i[r],t):i[r]=t})}),i},n.scaleMerge=function(t,i){var r=n.clone(t);return n.each(i,function(t,i){"xAxes"===i||"yAxes"===i?r.hasOwnProperty(i)?n.each(t,function(t,a){var o=n.getValueOrDefault(t.type,"xAxes"===i?"category":"linear"),s=e.scaleService.getScaleDefaults(o);a>=r[i].length||!r[i][a].type?r[i].push(n.configMerge(s,t)):t.type&&t.type!==r[i][a].type?r[i][a]=n.configMerge(r[i][a],s,t):r[i][a]=n.configMerge(r[i][a],t)}):(r[i]=[],n.each(t,function(t){var a=n.getValueOrDefault(t.type,"xAxes"===i?"category":"linear");r[i].push(n.configMerge(e.scaleService.getScaleDefaults(a),t))})):r.hasOwnProperty(i)&&"object"==typeof r[i]&&null!==r[i]&&"object"==typeof t?r[i]=n.configMerge(r[i],t):r[i]=t}),r},n.getValueAtIndexOrDefault=function(e,t,i){return void 0===e||null===e?i:n.isArray(e)?t<e.length?e[t]:i:e},n.getValueOrDefault=function(e,t){return void 0===e?t:e},n.indexOf=Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var i=0,r=e.length;r>i;++i)if(e[i]===t)return i;return-1},n.where=function(e,t){if(n.isArray(e)&&Array.prototype.filter)return e.filter(t);var i=[];return n.each(e,function(e){t(e)&&i.push(e)}),i},n.findIndex=Array.prototype.findIndex?function(e,t,i){return e.findIndex(t,i)}:function(e,t,i){i=void 0===i?e:i;for(var r=0,a=e.length;a>r;++r)if(t.call(i,e[r],r,e))return r;return-1},n.findNextWhere=function(e,t,i){(void 0===i||null===i)&&(i=-1);for(var r=i+1;r<e.length;r++){var a=e[r];if(t(a))return a}},n.findPreviousWhere=function(e,t,i){(void 0===i||null===i)&&(i=e.length);for(var r=i-1;r>=0;r--){var a=e[r];if(t(a))return a}},n.inherits=function(e){var t=this,i=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return t.apply(this,arguments)},r=function(){this.constructor=i};return r.prototype=t.prototype,i.prototype=new r,i.extend=n.inherits,e&&n.extend(i.prototype,e),i.__super__=t.prototype,i},n.noop=function(){},n.uid=function(){var e=0;return function(){return e++}}(),n.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},n.almostEquals=function(e,t,i){return Math.abs(e-t)<i},n.max=function(e){return e.reduce(function(e,t){return isNaN(t)?e:Math.max(e,t)},Number.NEGATIVE_INFINITY)},n.min=function(e){return e.reduce(function(e,t){return isNaN(t)?e:Math.min(e,t)},Number.POSITIVE_INFINITY)},n.sign=Math.sign?function(e){return Math.sign(e)}:function(e){return e=+e,0===e||isNaN(e)?e:e>0?1:-1},n.log10=Math.log10?function(e){return Math.log10(e)}:function(e){return Math.log(e)/Math.LN10},n.toRadians=function(e){return e*(Math.PI/180)},n.toDegrees=function(e){return e*(180/Math.PI)},n.getAngleFromPoint=function(e,t){var i=t.x-e.x,r=t.y-e.y,a=Math.sqrt(i*i+r*r),n=Math.atan2(r,i);return n<-.5*Math.PI&&(n+=2*Math.PI),{angle:n,distance:a}},n.aliasPixel=function(e){return e%2===0?0:.5},n.splineCurve=function(e,t,i,r){var a=e.skip?t:e,n=t,o=i.skip?t:i,s=Math.sqrt(Math.pow(n.x-a.x,2)+Math.pow(n.y-a.y,2)),l=Math.sqrt(Math.pow(o.x-n.x,2)+Math.pow(o.y-n.y,2)),d=s/(s+l),u=l/(s+l);d=isNaN(d)?0:d,u=isNaN(u)?0:u;var c=r*d,p=r*u;return{previous:{x:n.x-c*(o.x-a.x),y:n.y-c*(o.y-a.y)},next:{x:n.x+p*(o.x-a.x),y:n.y+p*(o.y-a.y)}}},n.nextItem=function(e,t,i){return i?t>=e.length-1?e[0]:e[t+1]:t>=e.length-1?e[e.length-1]:e[t+1]},n.previousItem=function(e,t,i){return i?0>=t?e[e.length-1]:e[t-1]:0>=t?e[0]:e[t-1]},n.niceNum=function(e,t){var i,r=Math.floor(n.log10(e)),a=e/Math.pow(10,r);return i=t?1.5>a?1:3>a?2:7>a?5:10:1>=a?1:2>=a?2:5>=a?5:10,i*Math.pow(10,r)};var o=n.easingEffects={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-1*e*(e-2)},easeInOutQuad:function(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return 1*((e=e/1-1)*e*e+1)},easeInOutCubic:function(e){return(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-1*((e=e/1-1)*e*e*e-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},easeInQuint:function(e){return 1*(e/=1)*e*e*e*e},easeOutQuint:function(e){return 1*((e=e/1-1)*e*e*e*e+1)},easeInOutQuint:function(e){return(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return-1*Math.cos(e/1*(Math.PI/2))+1},easeOutSine:function(e){return 1*Math.sin(e/1*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e/1)-1)},easeInExpo:function(e){return 0===e?1:1*Math.pow(2,10*(e/1-1))},easeOutExpo:function(e){return 1===e?1:1*(-Math.pow(2,-10*e/1)+1)},easeInOutExpo:function(e){return 0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(-Math.pow(2,-10*--e)+2)},easeInCirc:function(e){return e>=1?e:-1*(Math.sqrt(1-(e/=1)*e)-1)},easeOutCirc:function(e){return 1*Math.sqrt(1-(e=e/1-1)*e)},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){var t=1.70158,i=0,r=1;return 0===e?0:1===(e/=1)?1:(i||(i=.3),r<Math.abs(1)?(r=1,t=i/4):t=i/(2*Math.PI)*Math.asin(1/r),-(r*Math.pow(2,10*(e-=1))*Math.sin((1*e-t)*(2*Math.PI)/i)))},easeOutElastic:function(e){var t=1.70158,i=0,r=1;return 0===e?0:1===(e/=1)?1:(i||(i=.3),r<Math.abs(1)?(r=1,t=i/4):t=i/(2*Math.PI)*Math.asin(1/r),r*Math.pow(2,-10*e)*Math.sin((1*e-t)*(2*Math.PI)/i)+1)},easeInOutElastic:function(e){var t=1.70158,i=0,r=1;return 0===e?0:2===(e/=.5)?1:(i||(i=1*(.3*1.5)),r<Math.abs(1)?(r=1,t=i/4):t=i/(2*Math.PI)*Math.asin(1/r),1>e?-.5*(r*Math.pow(2,10*(e-=1))*Math.sin((1*e-t)*(2*Math.PI)/i)):r*Math.pow(2,-10*(e-=1))*Math.sin((1*e-t)*(2*Math.PI)/i)*.5+1)},easeInBack:function(e){var t=1.70158;return 1*(e/=1)*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return 1*((e=e/1-1)*e*((t+1)*e+t)+1)},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:function(e){return 1-o.easeOutBounce(1-e)},easeOutBounce:function(e){return(e/=1)<1/2.75?1*(7.5625*e*e):2/2.75>e?1*(7.5625*(e-=1.5/2.75)*e+.75):2.5/2.75>e?1*(7.5625*(e-=2.25/2.75)*e+.9375):1*(7.5625*(e-=2.625/2.75)*e+.984375)},easeInOutBounce:function(e){return.5>e?.5*o.easeInBounce(2*e):.5*o.easeOutBounce(2*e-1)+.5}};n.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)}}(),n.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(e){return window.clearTimeout(e,1e3/60)}}(),n.getRelativePosition=function(e,t){var i,r,a=e.originalEvent||e,o=e.currentTarget||e.srcElement,s=o.getBoundingClientRect(),l=a.touches;l&&l.length>0?(i=l[0].clientX,r=l[0].clientY):(i=a.clientX,r=a.clientY);var d=parseFloat(n.getStyle(o,"padding-left")),u=parseFloat(n.getStyle(o,"padding-top")),c=parseFloat(n.getStyle(o,"padding-right")),p=parseFloat(n.getStyle(o,"padding-bottom")),h=s.right-s.left-d-c,f=s.bottom-s.top-u-p;return i=Math.round((i-s.left-d)/h*o.width/t.currentDevicePixelRatio),r=Math.round((r-s.top-u)/f*o.height/t.currentDevicePixelRatio),{x:i,y:r}},n.addEvent=function(e,t,i){e.addEventListener?e.addEventListener(t,i):e.attachEvent?e.attachEvent("on"+t,i):e["on"+t]=i},n.removeEvent=function(e,t,i){e.removeEventListener?e.removeEventListener(t,i,!1):e.detachEvent?e.detachEvent("on"+t,i):e["on"+t]=n.noop},n.bindEvents=function(e,t,i){var r=e.events=e.events||{};n.each(t,function(t){r[t]=function(){i.apply(e,arguments)},n.addEvent(e.chart.canvas,t,r[t])})},n.unbindEvents=function(e,t){var i=e.chart.canvas;n.each(t,function(e,t){n.removeEvent(i,t,e)})},n.getConstraintWidth=function(e){return a(e,"max-width","clientWidth")},n.getConstraintHeight=function(e){return a(e,"max-height","clientHeight")},n.getMaximumWidth=function(e){var t=e.parentNode,i=parseInt(n.getStyle(t,"padding-left"))+parseInt(n.getStyle(t,"padding-right")),r=t.clientWidth-i,a=n.getConstraintWidth(e);return isNaN(a)?r:Math.min(r,a)},n.getMaximumHeight=function(e){var t=e.parentNode,i=parseInt(n.getStyle(t,"padding-top"))+parseInt(n.getStyle(t,"padding-bottom")),r=t.clientHeight-i,a=n.getConstraintHeight(e);return isNaN(a)?r:Math.min(r,a)},n.getStyle=function(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView.getComputedStyle(e,null).getPropertyValue(t)},n.retinaScale=function(e){var t=e.ctx,i=e.canvas,r=i.width,a=i.height,n=e.currentDevicePixelRatio=window.devicePixelRatio||1;1!==n&&(i.height=a*n,i.width=r*n,t.scale(n,n),e.originalDevicePixelRatio=e.originalDevicePixelRatio||n),i.style.width=r+"px",i.style.height=a+"px"},n.clear=function(e){e.ctx.clearRect(0,0,e.width,e.height)},n.fontString=function(e,t,i){return t+" "+e+"px "+i},n.longestText=function(e,t,i,r){r=r||{};var a=r.data=r.data||{},o=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(a=r.data={},o=r.garbageCollect=[],r.font=t),e.font=t;var s=0;n.each(i,function(t){void 0!==t&&null!==t&&n.isArray(t)!==!0?s=n.measureText(e,a,o,s,t):n.isArray(t)&&n.each(t,function(t){void 0===t||null===t||n.isArray(t)||(s=n.measureText(e,a,o,s,t))})});var l=o.length/2;if(l>i.length){for(var d=0;l>d;d++)delete a[o[d]];o.splice(0,l)}return s},n.measureText=function(e,t,i,r,a){var n=t[a];return n||(n=t[a]=e.measureText(a).width,i.push(a)),n>r&&(r=n),r},n.numberOfLabelLines=function(e){var t=1;return n.each(e,function(e){n.isArray(e)&&e.length>t&&(t=e.length)}),t},n.drawRoundedRectangle=function(e,t,i,r,a,n){e.beginPath(),e.moveTo(t+n,i),e.lineTo(t+r-n,i),e.quadraticCurveTo(t+r,i,t+r,i+n),e.lineTo(t+r,i+a-n),e.quadraticCurveTo(t+r,i+a,t+r-n,i+a),e.lineTo(t+n,i+a),e.quadraticCurveTo(t,i+a,t,i+a-n),e.lineTo(t,i+n),e.quadraticCurveTo(t,i,t+n,i),e.closePath()},n.color=function(t){return r?r(t instanceof CanvasGradient?e.defaults.global.defaultColor:t):(console.log("Color.js not found!"),t)},n.addResizeListener=function(e,t){var i=document.createElement("iframe"),r="chartjs-hidden-iframe";i.classlist?i.classlist.add(r):i.setAttribute("class",r);var a=i.style;a.width="100%",a.display="block",a.border=0,a.height=0,a.margin=0,a.position="absolute",a.left=0,a.right=0,a.top=0,a.bottom=0,e.insertBefore(i,e.firstChild),(i.contentWindow||i).onresize=function(){t&&t()}},n.removeResizeListener=function(e){var t=e.querySelector(".chartjs-hidden-iframe");t&&t.parentNode.removeChild(t)},n.isArray=Array.isArray?function(e){return Array.isArray(e)}:function(e){return"[object Array]"===Object.prototype.toString.call(e)},n.arrayEquals=function(e,t){var i,r,a,o;if(!e||!t||e.length!=t.length)return!1;for(i=0,r=e.length;r>i;++i)if(a=e[i],o=t[i],a instanceof Array&&o instanceof Array){if(!n.arrayEquals(a,o))return!1}else if(a!=o)return!1;return!0},n.callCallback=function(e,t,i){e&&"function"==typeof e.call&&e.apply(i,t)},n.getHoverColor=function(e){return e instanceof CanvasPattern?e:n.color(e).saturate(.5).darken(.1).rgbString()}}},{2:2}],27:[function(e,t,i){"use strict";t.exports=function(){var e=function(t,i){var r=this,a=e.helpers;return r.config=i||{data:{datasets:[]}},t.length&&t[0].getContext&&(t=t[0]),t.getContext&&(t=t.getContext("2d")),r.ctx=t,r.canvas=t.canvas,t.canvas.style.display=t.canvas.style.display||"block",r.width=t.canvas.width||parseInt(a.getStyle(t.canvas,"width"),10)||a.getMaximumWidth(t.canvas),r.height=t.canvas.height||parseInt(a.getStyle(t.canvas,"height"),10)||a.getMaximumHeight(t.canvas),r.aspectRatio=r.width/r.height,(isNaN(r.aspectRatio)||isFinite(r.aspectRatio)===!1)&&(r.aspectRatio=void 0!==i.aspectRatio?i.aspectRatio:2),r.originalCanvasStyleWidth=t.canvas.style.width,r.originalCanvasStyleHeight=t.canvas.style.height,a.retinaScale(r),r.controller=new e.Controller(r),a.addResizeListener(t.canvas.parentNode,function(){r.controller&&r.controller.config.options.responsive&&r.controller.resize()}),r.controller?r.controller:r};return e.defaults={global:{responsive:!0,responsiveAnimationDuration:0,maintainAspectRatio:!0,events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"single",animationDuration:400},onClick:null,defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",showLines:!0,elements:{},legendCallback:function(e){var t=[];t.push('<ul class="'+e.id+'-legend">');for(var i=0;i<e.data.datasets.length;i++)t.push('<li><span style="background-color:'+e.data.datasets[i].backgroundColor+'"></span>'),e.data.datasets[i].label&&t.push(e.data.datasets[i].label),t.push("</li>");return t.push("</ul>"),t.join("")}}},e.Chart=e,e}},{}],28:[function(e,t,i){"use strict";t.exports=function(e){var t=e.helpers;e.layoutService={defaults:{},addBox:function(e,t){e.boxes||(e.boxes=[]),e.boxes.push(t)},removeBox:function(e,t){e.boxes&&e.boxes.splice(e.boxes.indexOf(t),1)},update:function(e,i,r){function a(e){var t,i=e.isHorizontal();i?(t=e.update(e.options.fullWidth?g:x,y),w-=t.height):(t=e.update(_,b),x-=t.width),j.push({horizontal:i,minSize:t,box:e})}function n(e){var i=t.findNextWhere(j,function(t){return t.box===e});if(i)if(e.isHorizontal()){var r={left:k,right:C,top:0,bottom:0};e.update(e.options.fullWidth?g:x,m/2,r)}else e.update(i.minSize.width,w)}function o(e){var i=t.findNextWhere(j,function(t){return t.box===e}),r={left:0,right:0,top:D,bottom:S};i&&e.update(i.minSize.width,w,r)}function s(e){e.isHorizontal()?(e.left=e.options.fullWidth?l:k,e.right=e.options.fullWidth?i-l:k+x,e.top=$,e.bottom=$+e.height,$=e.bottom):(e.left=I,e.right=I+e.width,e.top=D,e.bottom=D+w,I=e.right)}if(e){var l=0,d=0,u=t.where(e.boxes,function(e){return"left"===e.options.position}),c=t.where(e.boxes,function(e){return"right"===e.options.position}),p=t.where(e.boxes,function(e){return"top"===e.options.position}),h=t.where(e.boxes,function(e){return"bottom"===e.options.position}),f=t.where(e.boxes,function(e){return"chartArea"===e.options.position});p.sort(function(e,t){return(t.options.fullWidth?1:0)-(e.options.fullWidth?1:0)}),h.sort(function(e,t){return(e.options.fullWidth?1:0)-(t.options.fullWidth?1:0)});var g=i-2*l,m=r-2*d,v=g/2,b=m/2,_=(i-v)/(u.length+c.length),y=(r-b)/(p.length+h.length),x=g,w=m,j=[];t.each(u.concat(c,p,h),a);var k=l,C=l,D=d,S=d;t.each(u.concat(c),n),t.each(u,function(e){k+=e.width}),t.each(c,function(e){C+=e.width}),t.each(p.concat(h),n),t.each(p,function(e){D+=e.height}),t.each(h,function(e){S+=e.height}),t.each(u.concat(c),o),k=l,C=l,D=d,S=d,t.each(u,function(e){k+=e.width}),t.each(c,function(e){C+=e.width}),t.each(p,function(e){D+=e.height}),t.each(h,function(e){S+=e.height});var T=r-D-S,P=i-k-C;(P!==x||T!==w)&&(t.each(u,function(e){e.height=T}),t.each(c,function(e){e.height=T}),t.each(p,function(e){e.options.fullWidth||(e.width=P)}),t.each(h,function(e){e.options.fullWidth||(e.width=P)}),w=T,x=P);var I=l,$=d;t.each(u.concat(p),s),I+=x,$+=w,t.each(c,s),t.each(h,s),e.chartArea={left:k,top:D,right:k+x,bottom:D+w},t.each(f,function(t){t.left=e.chartArea.left,t.top=e.chartArea.top,t.right=e.chartArea.right,t.bottom=e.chartArea.bottom,t.update(x,w)})}}}}},{}],29:[function(e,t,i){"use strict";t.exports=function(e){var t=e.helpers,i=t.noop;e.defaults.global.legend={display:!0,position:"top",fullWidth:!0,reverse:!1,onClick:function(e,t){var i=t.datasetIndex,r=this.chart,a=r.getDatasetMeta(i);a.hidden=null===a.hidden?!r.data.datasets[i].hidden:null,r.update()},labels:{boxWidth:40,padding:10,generateLabels:function(e){var i=e.data;return t.isArray(i.datasets)?i.datasets.map(function(i,r){return{text:i.label,fillStyle:t.isArray(i.backgroundColor)?i.backgroundColor[0]:i.backgroundColor,hidden:!e.isDatasetVisible(r),lineCap:i.borderCapStyle,lineDash:i.borderDash,lineDashOffset:i.borderDashOffset,lineJoin:i.borderJoinStyle,lineWidth:i.borderWidth,strokeStyle:i.borderColor,pointStyle:i.pointStyle,datasetIndex:r}},this):[]}}},e.Legend=e.Element.extend({initialize:function(e){t.extend(this,e),this.legendHitBoxes=[],this.doughnutMode=!1},beforeUpdate:i,update:function(e,t,i){var r=this;return r.beforeUpdate(),r.maxWidth=e,r.maxHeight=t,r.margins=i,r.beforeSetDimensions(),r.setDimensions(),r.afterSetDimensions(),r.beforeBuildLabels(),r.buildLabels(),r.afterBuildLabels(),r.beforeFit(),r.fit(),r.afterFit(),r.afterUpdate(),r.minSize},afterUpdate:i,beforeSetDimensions:i,setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.minSize={width:0,height:0}},afterSetDimensions:i,beforeBuildLabels:i,buildLabels:function(){var e=this;e.legendItems=e.options.labels.generateLabels.call(e,e.chart),e.options.reverse&&e.legendItems.reverse()},afterBuildLabels:i,beforeFit:i,fit:function(){var i=this,r=i.options,a=r.labels,n=r.display,o=i.ctx,s=e.defaults.global,l=t.getValueOrDefault,d=l(a.fontSize,s.defaultFontSize),u=l(a.fontStyle,s.defaultFontStyle),c=l(a.fontFamily,s.defaultFontFamily),p=t.fontString(d,u,c),h=i.legendHitBoxes=[],f=i.minSize,g=i.isHorizontal();if(g?(f.width=i.maxWidth,f.height=n?10:0):(f.width=n?10:0,f.height=i.maxHeight),n)if(o.font=p,g){var m=i.lineWidths=[0],v=i.legendItems.length?d+a.padding:0;o.textAlign="left",o.textBaseline="top",t.each(i.legendItems,function(e,t){var r=a.usePointStyle?d*Math.sqrt(2):a.boxWidth,n=r+d/2+o.measureText(e.text).width;m[m.length-1]+n+a.padding>=i.width&&(v+=d+a.padding,m[m.length]=i.left),h[t]={left:0,top:0,width:n,height:d},m[m.length-1]+=n+a.padding}),f.height+=v}else{var b=a.padding,_=i.columnWidths=[],y=a.padding,x=0,w=0,j=d+b;t.each(i.legendItems,function(e,t){var i=a.usePointStyle?2*a.boxWidth:a.boxWidth,r=i+d/2+o.measureText(e.text).width;w+j>f.height&&(y+=x+a.padding,_.push(x),x=0,w=0),x=Math.max(x,r),w+=j,h[t]={left:0,top:0,width:r,height:d}}),y+=x,_.push(x),f.width+=y}i.width=f.width,i.height=f.height},afterFit:i,isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},draw:function(){var i=this,r=i.options,a=r.labels,n=e.defaults.global,o=n.elements.line,s=i.width,l=i.lineWidths;if(r.display){var d,u=i.ctx,c=t.getValueOrDefault,p=c(a.fontColor,n.defaultFontColor),h=c(a.fontSize,n.defaultFontSize),f=c(a.fontStyle,n.defaultFontStyle),g=c(a.fontFamily,n.defaultFontFamily),m=t.fontString(h,f,g);u.textAlign="left",u.textBaseline="top",u.lineWidth=.5,u.strokeStyle=p,u.fillStyle=p,u.font=m;var v=a.boxWidth,b=i.legendHitBoxes,_=function(t,i,a){if(!(isNaN(v)||0>=v)){if(u.save(),u.fillStyle=c(a.fillStyle,n.defaultColor),u.lineCap=c(a.lineCap,o.borderCapStyle),u.lineDashOffset=c(a.lineDashOffset,o.borderDashOffset),u.lineJoin=c(a.lineJoin,o.borderJoinStyle),u.lineWidth=c(a.lineWidth,o.borderWidth),u.strokeStyle=c(a.strokeStyle,n.defaultColor),u.setLineDash&&u.setLineDash(c(a.lineDash,o.borderDash)),r.labels&&r.labels.usePointStyle){var s=h*Math.SQRT2/2,l=s/Math.SQRT2,d=t+l,p=i+l;e.canvasHelpers.drawPoint(u,a.pointStyle,s,d,p)}else u.strokeRect(t,i,v,h),u.fillRect(t,i,v,h);u.restore()}},y=function(e,t,i,r){u.fillText(i.text,v+h/2+e,t),i.hidden&&(u.beginPath(),u.lineWidth=2,u.moveTo(v+h/2+e,t+h/2),u.lineTo(v+h/2+e+r,t+h/2),u.stroke())},x=i.isHorizontal();d=x?{x:i.left+(s-l[0])/2,y:i.top+a.padding,line:0}:{x:i.left+a.padding,y:i.top+a.padding,line:0};var w=h+a.padding;t.each(i.legendItems,function(e,t){var r=u.measureText(e.text).width,n=a.usePointStyle?h+h/2+r:v+h/2+r,o=d.x,c=d.y;x?o+n>=s&&(c=d.y+=w,d.line++,o=d.x=i.left+(s-l[d.line])/2):c+w>i.bottom&&(o=d.x=o+i.columnWidths[d.line]+a.padding,c=d.y=i.top,d.line++),_(o,c,e),b[t].left=o,b[t].top=c,y(o,c,e,r),x?d.x+=n+a.padding:d.y+=w})}},handleEvent:function(e){var i=this,r=t.getRelativePosition(e,i.chart.chart),a=r.x,n=r.y,o=i.options;if(a>=i.left&&a<=i.right&&n>=i.top&&n<=i.bottom)for(var s=i.legendHitBoxes,l=0;l<s.length;++l){var d=s[l];if(a>=d.left&&a<=d.left+d.width&&n>=d.top&&n<=d.top+d.height){o.onClick&&o.onClick.call(i,e,i.legendItems[l]);break}}}}),e.plugins.register({beforeInit:function(t){var i=t.options,r=i.legend;r&&(t.legend=new e.Legend({ctx:t.chart.ctx,options:r,chart:t}),e.layoutService.addBox(t,t.legend))}})}},{}],30:[function(e,t,i){"use strict";t.exports=function(e){var t=e.helpers.noop;e.plugins={_plugins:[],register:function(e){var t=this._plugins;[].concat(e).forEach(function(e){-1===t.indexOf(e)&&t.push(e)})},unregister:function(e){var t=this._plugins;[].concat(e).forEach(function(e){var i=t.indexOf(e);-1!==i&&t.splice(i,1)})},clear:function(){this._plugins=[]},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(e,t){var i,r,a=this._plugins,n=a.length;for(i=0;n>i;++i)if(r=a[i],"function"==typeof r[e]&&r[e].apply(r,t||[])===!1)return!1;return!0}},e.PluginBase=e.Element.extend({beforeInit:t,afterInit:t,beforeUpdate:t,afterUpdate:t,beforeDraw:t,afterDraw:t,destroy:t}),e.pluginService=e.plugins}},{}],31:[function(e,t,i){"use strict";t.exports=function(e){var t=e.helpers;e.defaults.scale={display:!0,position:"left",gridLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",offsetGridLines:!1},scaleLabel:{labelString:"",display:!1},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:10,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:function(e){return t.isArray(e)?e:""+e}}},e.Scale=e.Element.extend({beforeUpdate:function(){t.callCallback(this.options.beforeUpdate,[this])},update:function(e,i,r){var a=this;return a.beforeUpdate(),a.maxWidth=e,a.maxHeight=i,a.margins=t.extend({left:0,right:0,top:0,bottom:0},r),a.beforeSetDimensions(),a.setDimensions(),a.afterSetDimensions(),a.beforeDataLimits(),a.determineDataLimits(),a.afterDataLimits(),a.beforeBuildTicks(),a.buildTicks(),a.afterBuildTicks(),a.beforeTickToLabelConversion(),a.convertTicksToLabels(),a.afterTickToLabelConversion(),a.beforeCalculateTickRotation(),a.calculateTickRotation(),a.afterCalculateTickRotation(),a.beforeFit(),a.fit(),a.afterFit(),a.afterUpdate(),a.minSize},afterUpdate:function(){t.callCallback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){t.callCallback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0},afterSetDimensions:function(){t.callCallback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){t.callCallback(this.options.beforeDataLimits,[this])},determineDataLimits:t.noop,afterDataLimits:function(){t.callCallback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){t.callCallback(this.options.beforeBuildTicks,[this])},buildTicks:t.noop,afterBuildTicks:function(){t.callCallback(this.options.afterBuildTicks,[this])},beforeTickToLabelConversion:function(){t.callCallback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var e=this;e.ticks=e.ticks.map(function(t,i,r){return e.options.ticks.userCallback?e.options.ticks.userCallback(t,i,r):e.options.ticks.callback(t,i,r)},e)},afterTickToLabelConversion:function(){t.callCallback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){t.callCallback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var i=this,r=i.ctx,a=e.defaults.global,n=i.options.ticks,o=t.getValueOrDefault(n.fontSize,a.defaultFontSize),s=t.getValueOrDefault(n.fontStyle,a.defaultFontStyle),l=t.getValueOrDefault(n.fontFamily,a.defaultFontFamily),d=t.fontString(o,s,l);r.font=d;var u,c=r.measureText(i.ticks[0]).width,p=r.measureText(i.ticks[i.ticks.length-1]).width;if(i.labelRotation=n.minRotation||0,i.paddingRight=0,i.paddingLeft=0,i.options.display&&i.isHorizontal()){i.paddingRight=p/2+3,i.paddingLeft=c/2+3,i.longestTextCache||(i.longestTextCache={});for(var h,f,g=t.longestText(r,d,i.ticks,i.longestTextCache),m=g,v=i.getPixelForTick(1)-i.getPixelForTick(0)-6;m>v&&i.labelRotation<n.maxRotation;){if(h=Math.cos(t.toRadians(i.labelRotation)),f=Math.sin(t.toRadians(i.labelRotation)),u=h*c,u+o/2>i.yLabelWidth&&(i.paddingLeft=u+o/2),i.paddingRight=o/2,f*g>i.maxHeight){i.labelRotation--;break}i.labelRotation++,m=h*g}}i.margins&&(i.paddingLeft=Math.max(i.paddingLeft-i.margins.left,0),i.paddingRight=Math.max(i.paddingRight-i.margins.right,0))},afterCalculateTickRotation:function(){t.callCallback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){t.callCallback(this.options.beforeFit,[this])},
fit:function(){var i=this,r=i.minSize={width:0,height:0},a=i.options,n=e.defaults.global,o=a.ticks,s=a.scaleLabel,l=a.display,d=i.isHorizontal(),u=t.getValueOrDefault(o.fontSize,n.defaultFontSize),c=t.getValueOrDefault(o.fontStyle,n.defaultFontStyle),p=t.getValueOrDefault(o.fontFamily,n.defaultFontFamily),h=t.fontString(u,c,p),f=t.getValueOrDefault(s.fontSize,n.defaultFontSize),g=a.gridLines.tickMarkLength;if(d?r.width=i.isFullWidth()?i.maxWidth-i.margins.left-i.margins.right:i.maxWidth:r.width=l?g:0,d?r.height=l?g:0:r.height=i.maxHeight,s.display&&l&&(d?r.height+=1.5*f:r.width+=1.5*f),o.display&&l){i.longestTextCache||(i.longestTextCache={});var m=t.longestText(i.ctx,h,i.ticks,i.longestTextCache),v=t.numberOfLabelLines(i.ticks),b=.5*u;if(d){i.longestLabelWidth=m;var _=Math.sin(t.toRadians(i.labelRotation))*i.longestLabelWidth+u*v+b*v;r.height=Math.min(i.maxHeight,r.height+_),i.ctx.font=h;var y=i.ctx.measureText(i.ticks[0]).width,x=i.ctx.measureText(i.ticks[i.ticks.length-1]).width,w=Math.cos(t.toRadians(i.labelRotation)),j=Math.sin(t.toRadians(i.labelRotation));i.paddingLeft=0!==i.labelRotation?w*y+3:y/2+3,i.paddingRight=0!==i.labelRotation?j*(u/2)+3:x/2+3}else{var k=i.maxWidth-r.width,C=o.mirror;C?m=0:m+=i.options.ticks.padding,k>m?r.width+=m:r.width=i.maxWidth,i.paddingTop=u/2,i.paddingBottom=u/2}}i.margins&&(i.paddingLeft=Math.max(i.paddingLeft-i.margins.left,0),i.paddingTop=Math.max(i.paddingTop-i.margins.top,0),i.paddingRight=Math.max(i.paddingRight-i.margins.right,0),i.paddingBottom=Math.max(i.paddingBottom-i.margins.bottom,0)),i.width=r.width,i.height=r.height},afterFit:function(){t.callCallback(this.options.afterFit,[this])},isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(e){return null===e||"undefined"==typeof e?NaN:"number"==typeof e&&isNaN(e)?NaN:"object"==typeof e?e instanceof Date||e.isValid?e:this.getRightValue(this.isHorizontal()?e.x:e.y):e},getLabelForIndex:t.noop,getPixelForValue:t.noop,getValueForPixel:t.noop,getPixelForTick:function(e,t){var i=this;if(i.isHorizontal()){var r=i.width-(i.paddingLeft+i.paddingRight),a=r/Math.max(i.ticks.length-(i.options.gridLines.offsetGridLines?0:1),1),n=a*e+i.paddingLeft;t&&(n+=a/2);var o=i.left+Math.round(n);return o+=i.isFullWidth()?i.margins.left:0}var s=i.height-(i.paddingTop+i.paddingBottom);return i.top+e*(s/(i.ticks.length-1))},getPixelForDecimal:function(e){var t=this;if(t.isHorizontal()){var i=t.width-(t.paddingLeft+t.paddingRight),r=i*e+t.paddingLeft,a=t.left+Math.round(r);return a+=t.isFullWidth()?t.margins.left:0}return t.top+e*t.height},getBasePixel:function(){var e=this,t=e.min,i=e.max;return e.getPixelForValue(e.beginAtZero?0:0>t&&0>i?i:t>0&&i>0?t:0)},draw:function(i){var r=this,a=r.options;if(a.display){var n,o,s=r.ctx,l=e.defaults.global,d=a.ticks,u=a.gridLines,c=a.scaleLabel,p=0!==r.labelRotation,h=d.autoSkip,f=r.isHorizontal();d.maxTicksLimit&&(o=d.maxTicksLimit);var g=t.getValueOrDefault(d.fontColor,l.defaultFontColor),m=t.getValueOrDefault(d.fontSize,l.defaultFontSize),v=t.getValueOrDefault(d.fontStyle,l.defaultFontStyle),b=t.getValueOrDefault(d.fontFamily,l.defaultFontFamily),_=t.fontString(m,v,b),y=u.tickMarkLength,x=t.getValueOrDefault(c.fontColor,l.defaultFontColor),w=t.getValueOrDefault(c.fontSize,l.defaultFontSize),j=t.getValueOrDefault(c.fontStyle,l.defaultFontStyle),k=t.getValueOrDefault(c.fontFamily,l.defaultFontFamily),C=t.fontString(w,j,k),D=t.toRadians(r.labelRotation),S=Math.cos(D),T=r.longestLabelWidth*S;s.fillStyle=g;var P=[];if(f){if(n=!1,p&&(T/=2),(T+d.autoSkipPadding)*r.ticks.length>r.width-(r.paddingLeft+r.paddingRight)&&(n=1+Math.floor((T+d.autoSkipPadding)*r.ticks.length/(r.width-(r.paddingLeft+r.paddingRight)))),o&&r.ticks.length>o)for(;!n||r.ticks.length/(n||1)>o;)n||(n=1),n+=1;h||(n=!1)}var I="right"===a.position?r.left:r.right-y,$="right"===a.position?r.left+y:r.right,F="bottom"===a.position?r.top:r.bottom-y,M="bottom"===a.position?r.top+y:r.bottom;if(t.each(r.ticks,function(e,o){if(void 0!==e&&null!==e){var s=r.ticks.length===o+1,l=n>1&&o%n>0||o%n===0&&o+n>=r.ticks.length;if((!l||s)&&void 0!==e&&null!==e){var c,h;o===("undefined"!=typeof r.zeroLineIndex?r.zeroLineIndex:0)?(c=u.zeroLineWidth,h=u.zeroLineColor):(c=t.getValueAtIndexOrDefault(u.lineWidth,o),h=t.getValueAtIndexOrDefault(u.color,o));var g,m,v,b,_,x,w,j,k,C,S,T="middle";if(f){p||(T="top"===a.position?"bottom":"top"),S=p?"right":"center";var A=r.getPixelForTick(o)+t.aliasPixel(c);k=r.getPixelForTick(o,u.offsetGridLines)+d.labelOffset,C=p?r.top+12:"top"===a.position?r.bottom-y:r.top+y,g=v=_=w=A,m=F,b=M,x=i.top,j=i.bottom}else{"left"===a.position?d.mirror?(k=r.right+d.padding,S="left"):(k=r.right-d.padding,S="right"):d.mirror?(k=r.left-d.padding,S="right"):(k=r.left+d.padding,S="left");var E=r.getPixelForTick(o);E+=t.aliasPixel(c),C=r.getPixelForTick(o,u.offsetGridLines),g=I,v=$,_=i.left,w=i.right,m=b=x=j=E}P.push({tx1:g,ty1:m,tx2:v,ty2:b,x1:_,y1:x,x2:w,y2:j,labelX:k,labelY:C,glWidth:c,glColor:h,rotation:-1*D,label:e,textBaseline:T,textAlign:S})}}}),t.each(P,function(e){if(u.display&&(s.lineWidth=e.glWidth,s.strokeStyle=e.glColor,s.beginPath(),u.drawTicks&&(s.moveTo(e.tx1,e.ty1),s.lineTo(e.tx2,e.ty2)),u.drawOnChartArea&&(s.moveTo(e.x1,e.y1),s.lineTo(e.x2,e.y2)),s.stroke()),d.display){s.save(),s.translate(e.labelX,e.labelY),s.rotate(e.rotation),s.font=_,s.textBaseline=e.textBaseline,s.textAlign=e.textAlign;var i=e.label;if(t.isArray(i))for(var r=0,a=0;r<i.length;++r)s.fillText(""+i[r],0,a),a+=1.5*m;else s.fillText(i,0,0);s.restore()}}),c.display){var A,E,q=0;if(f)A=r.left+(r.right-r.left)/2,E="bottom"===a.position?r.bottom-w/2:r.top+w/2;else{var O="left"===a.position;A=O?r.left+w/2:r.right-w/2,E=r.top+(r.bottom-r.top)/2,q=O?-.5*Math.PI:.5*Math.PI}s.save(),s.translate(A,E),s.rotate(q),s.textAlign="center",s.textBaseline="middle",s.fillStyle=x,s.font=C,s.fillText(c.labelString,0,0),s.restore()}if(u.drawBorder){s.lineWidth=t.getValueAtIndexOrDefault(u.lineWidth,0),s.strokeStyle=t.getValueAtIndexOrDefault(u.color,0);var R=r.left,N=r.right,G=r.top,L=r.bottom,z=t.aliasPixel(s.lineWidth);f?(G=L="top"===a.position?r.bottom:r.top,G+=z,L+=z):(R=N="left"===a.position?r.right:r.left,R+=z,N+=z),s.beginPath(),s.moveTo(R,G),s.lineTo(N,L),s.stroke()}}}})}},{}],32:[function(e,t,i){"use strict";t.exports=function(e){var t=e.helpers;e.scaleService={constructors:{},defaults:{},registerScaleType:function(e,i,r){this.constructors[e]=i,this.defaults[e]=t.clone(r)},getScaleConstructor:function(e){return this.constructors.hasOwnProperty(e)?this.constructors[e]:void 0},getScaleDefaults:function(i){return this.defaults.hasOwnProperty(i)?t.scaleMerge(e.defaults.scale,this.defaults[i]):{}},updateScaleDefaults:function(e,i){var r=this.defaults;r.hasOwnProperty(e)&&(r[e]=t.extend(r[e],i))},addScalesToLayout:function(i){t.each(i.scales,function(t){e.layoutService.addBox(i,t)})}}}},{}],33:[function(e,t,i){"use strict";t.exports=function(e){var t=e.helpers;e.defaults.global.title={display:!1,position:"top",fullWidth:!0,fontStyle:"bold",padding:10,text:""};var i=t.noop;e.Title=e.Element.extend({initialize:function(i){var r=this;t.extend(r,i),r.options=t.configMerge(e.defaults.global.title,i.options),r.legendHitBoxes=[]},beforeUpdate:function(){var i=this.chart.options;i&&i.title&&(this.options=t.configMerge(e.defaults.global.title,i.title))},update:function(e,t,i){var r=this;return r.beforeUpdate(),r.maxWidth=e,r.maxHeight=t,r.margins=i,r.beforeSetDimensions(),r.setDimensions(),r.afterSetDimensions(),r.beforeBuildLabels(),r.buildLabels(),r.afterBuildLabels(),r.beforeFit(),r.fit(),r.afterFit(),r.afterUpdate(),r.minSize},afterUpdate:i,beforeSetDimensions:i,setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.minSize={width:0,height:0}},afterSetDimensions:i,beforeBuildLabels:i,buildLabels:i,afterBuildLabels:i,beforeFit:i,fit:function(){var i=this,r=t.getValueOrDefault,a=i.options,n=e.defaults.global,o=a.display,s=r(a.fontSize,n.defaultFontSize),l=i.minSize;i.isHorizontal()?(l.width=i.maxWidth,l.height=o?s+2*a.padding:0):(l.width=o?s+2*a.padding:0,l.height=i.maxHeight),i.width=l.width,i.height=l.height},afterFit:i,isHorizontal:function(){var e=this.options.position;return"top"===e||"bottom"===e},draw:function(){var i=this,r=i.ctx,a=t.getValueOrDefault,n=i.options,o=e.defaults.global;if(n.display){var s,l,d=a(n.fontSize,o.defaultFontSize),u=a(n.fontStyle,o.defaultFontStyle),c=a(n.fontFamily,o.defaultFontFamily),p=t.fontString(d,u,c),h=0,f=i.top,g=i.left,m=i.bottom,v=i.right;r.fillStyle=a(n.fontColor,o.defaultFontColor),r.font=p,i.isHorizontal()?(s=g+(v-g)/2,l=f+(m-f)/2):(s="left"===n.position?g+d/2:v-d/2,l=f+(m-f)/2,h=Math.PI*("left"===n.position?-.5:.5)),r.save(),r.translate(s,l),r.rotate(h),r.textAlign="center",r.textBaseline="middle",r.fillText(n.text,0,0),r.restore()}}}),e.plugins.register({beforeInit:function(t){var i=t.options,r=i.title;r&&(t.titleBlock=new e.Title({ctx:t.chart.ctx,options:r,chart:t}),e.layoutService.addBox(t,t.titleBlock))}})}},{}],34:[function(e,t,i){"use strict";t.exports=function(e){function t(e,t){return t&&(a.isArray(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function i(e){if(!e.length)return!1;var t,i,r=[],a=[];for(t=0,i=e.length;i>t;++t){var n=e[t];if(n&&n.hasValue()){var o=n.tooltipPosition();r.push(o.x),a.push(o.y)}}var s=0,l=0;for(t=0;t<r.length;++t)r[t]&&(s+=r[t],l+=a[t]);return{x:Math.round(s/r.length),y:Math.round(l/r.length)}}function r(e){var t=e._xScale,i=e._yScale||e._scale,r=e._index,a=e._datasetIndex;return{xLabel:t?t.getLabelForIndex(r,a):"",yLabel:i?i.getLabelForIndex(r,a):"",index:r,datasetIndex:a}}var a=e.helpers;e.defaults.global.tooltips={enabled:!0,custom:null,mode:"single",backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,yAlign:"center",xAlign:"center",caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",callbacks:{beforeTitle:a.noop,title:function(e,t){var i="",r=t.labels,a=r?r.length:0;if(e.length>0){var n=e[0];n.xLabel?i=n.xLabel:a>0&&n.index<a&&(i=r[n.index])}return i},afterTitle:a.noop,beforeBody:a.noop,beforeLabel:a.noop,label:function(e,t){var i=t.datasets[e.datasetIndex].label||"";return i+": "+e.yLabel},labelColor:function(e,t){var i=t.getDatasetMeta(e.datasetIndex),r=i.data[e.index],a=r._view;return{borderColor:a.borderColor,backgroundColor:a.backgroundColor}},afterLabel:a.noop,afterBody:a.noop,beforeFooter:a.noop,footer:a.noop,afterFooter:a.noop}},e.Tooltip=e.Element.extend({initialize:function(){var t=this,i=e.defaults.global,r=t._options,n=a.getValueOrDefault;a.extend(t,{_model:{xPadding:r.xPadding,yPadding:r.yPadding,xAlign:r.xAlign,yAlign:r.yAlign,bodyFontColor:r.bodyFontColor,_bodyFontFamily:n(r.bodyFontFamily,i.defaultFontFamily),_bodyFontStyle:n(r.bodyFontStyle,i.defaultFontStyle),_bodyAlign:r.bodyAlign,bodyFontSize:n(r.bodyFontSize,i.defaultFontSize),bodySpacing:r.bodySpacing,titleFontColor:r.titleFontColor,_titleFontFamily:n(r.titleFontFamily,i.defaultFontFamily),_titleFontStyle:n(r.titleFontStyle,i.defaultFontStyle),titleFontSize:n(r.titleFontSize,i.defaultFontSize),_titleAlign:r.titleAlign,titleSpacing:r.titleSpacing,titleMarginBottom:r.titleMarginBottom,footerFontColor:r.footerFontColor,_footerFontFamily:n(r.footerFontFamily,i.defaultFontFamily),_footerFontStyle:n(r.footerFontStyle,i.defaultFontStyle),footerFontSize:n(r.footerFontSize,i.defaultFontSize),_footerAlign:r.footerAlign,footerSpacing:r.footerSpacing,footerMarginTop:r.footerMarginTop,caretSize:r.caretSize,cornerRadius:r.cornerRadius,backgroundColor:r.backgroundColor,opacity:0,legendColorBackground:r.multiKeyBackground}})},getTitle:function(){var e=this,i=e._options,r=i.callbacks,a=r.beforeTitle.apply(e,arguments),n=r.title.apply(e,arguments),o=r.afterTitle.apply(e,arguments),s=[];return s=t(s,a),s=t(s,n),s=t(s,o)},getBeforeBody:function(){var e=this._options.callbacks.beforeBody.apply(this,arguments);return a.isArray(e)?e:void 0!==e?[e]:[]},getBody:function(e,i){var r=this,n=r._options.callbacks,o=[];return a.each(e,function(e){var a={before:[],lines:[],after:[]};t(a.before,n.beforeLabel.call(r,e,i)),t(a.lines,n.label.call(r,e,i)),t(a.after,n.afterLabel.call(r,e,i)),o.push(a)}),o},getAfterBody:function(){var e=this._options.callbacks.afterBody.apply(this,arguments);return a.isArray(e)?e:void 0!==e?[e]:[]},getFooter:function(){var e=this,i=e._options.callbacks,r=i.beforeFooter.apply(e,arguments),a=i.footer.apply(e,arguments),n=i.afterFooter.apply(e,arguments),o=[];return o=t(o,r),o=t(o,a),o=t(o,n)},update:function(e){var t,n,o=this,s=o._options,l=o._model,d=o._active,u=o._data,c=o._chartInstance;if(d.length){l.opacity=1;var p=[],h=i(d),f=[];for(t=0,n=d.length;n>t;++t)f.push(r(d[t]));s.itemSort&&(f=f.sort(s.itemSort)),d.length>1&&a.each(f,function(e){p.push(s.callbacks.labelColor.call(o,e,c))}),a.extend(l,{title:o.getTitle(f,u),beforeBody:o.getBeforeBody(f,u),body:o.getBody(f,u),afterBody:o.getAfterBody(f,u),footer:o.getFooter(f,u),x:Math.round(h.x),y:Math.round(h.y),caretPadding:a.getValueOrDefault(h.padding,2),labelColors:p});var g=o.getTooltipSize(l);o.determineAlignment(g),a.extend(l,o.getBackgroundPoint(l,g))}else o._model.opacity=0;return e&&s.custom&&s.custom.call(o,l),o},getTooltipSize:function(e){var t=this._chart.ctx,i={height:2*e.yPadding,width:0},r=e.body,n=r.reduce(function(e,t){return e+t.before.length+t.lines.length+t.after.length},0);n+=e.beforeBody.length+e.afterBody.length;var o=e.title.length,s=e.footer.length,l=e.titleFontSize,d=e.bodyFontSize,u=e.footerFontSize;i.height+=o*l,i.height+=(o-1)*e.titleSpacing,i.height+=o?e.titleMarginBottom:0,i.height+=n*d,i.height+=n?(n-1)*e.bodySpacing:0,i.height+=s?e.footerMarginTop:0,i.height+=s*u,i.height+=s?(s-1)*e.footerSpacing:0;var c=0,p=function(e){i.width=Math.max(i.width,t.measureText(e).width+c)};return t.font=a.fontString(l,e._titleFontStyle,e._titleFontFamily),a.each(e.title,p),t.font=a.fontString(d,e._bodyFontStyle,e._bodyFontFamily),a.each(e.beforeBody.concat(e.afterBody),p),c=r.length>1?d+2:0,a.each(r,function(e){a.each(e.before,p),a.each(e.lines,p),a.each(e.after,p)}),c=0,t.font=a.fontString(u,e._footerFontStyle,e._footerFontFamily),a.each(e.footer,p),i.width+=2*e.xPadding,i},determineAlignment:function(e){var t=this,i=t._model,r=t._chart,a=t._chartInstance.chartArea;i.y<e.height?i.yAlign="top":i.y>r.height-e.height&&(i.yAlign="bottom");var n,o,s,l,d,u=(a.left+a.right)/2,c=(a.top+a.bottom)/2;"center"===i.yAlign?(n=function(e){return u>=e},o=function(e){return e>u}):(n=function(t){return t<=e.width/2},o=function(t){return t>=r.width-e.width/2}),s=function(t){return t+e.width>r.width},l=function(t){return t-e.width<0},d=function(e){return c>=e?"top":"bottom"},n(i.x)?(i.xAlign="left",s(i.x)&&(i.xAlign="center",i.yAlign=d(i.y))):o(i.x)&&(i.xAlign="right",l(i.x)&&(i.xAlign="center",i.yAlign=d(i.y)))},getBackgroundPoint:function(e,t){var i={x:e.x,y:e.y},r=e.caretSize,a=e.caretPadding,n=e.cornerRadius,o=e.xAlign,s=e.yAlign,l=r+a,d=n+a;return"right"===o?i.x-=t.width:"center"===o&&(i.x-=t.width/2),"top"===s?i.y+=l:"bottom"===s?i.y-=t.height+l:i.y-=t.height/2,"center"===s?"left"===o?i.x+=l:"right"===o&&(i.x-=l):"left"===o?i.x-=d:"right"===o&&(i.x+=d),i},drawCaret:function(e,t,i){var r,n,o,s,l,d,u=this._view,c=this._chart.ctx,p=u.caretSize,h=u.cornerRadius,f=u.xAlign,g=u.yAlign,m=e.x,v=e.y,b=t.width,_=t.height;"center"===g?("left"===f?(r=m,n=r-p,o=r):(r=m+b,n=r+p,o=r),l=v+_/2,s=l-p,d=l+p):("left"===f?(r=m+h,n=r+p,o=n+p):"right"===f?(r=m+b-h,n=r-p,o=n-p):(n=m+b/2,r=n-p,o=n+p),"top"===g?(s=v,l=s-p,d=s):(s=v+_,l=s+p,d=s));var y=a.color(u.backgroundColor);c.fillStyle=y.alpha(i*y.alpha()).rgbString(),c.beginPath(),c.moveTo(r,s),c.lineTo(n,l),c.lineTo(o,d),c.closePath(),c.fill()},drawTitle:function(e,t,i,r){var n=t.title;if(n.length){i.textAlign=t._titleAlign,i.textBaseline="top";var o=t.titleFontSize,s=t.titleSpacing,l=a.color(t.titleFontColor);i.fillStyle=l.alpha(r*l.alpha()).rgbString(),i.font=a.fontString(o,t._titleFontStyle,t._titleFontFamily);var d,u;for(d=0,u=n.length;u>d;++d)i.fillText(n[d],e.x,e.y),e.y+=o+s,d+1===n.length&&(e.y+=t.titleMarginBottom-s)}},drawBody:function(e,t,i,r){var n=t.bodyFontSize,o=t.bodySpacing,s=t.body;i.textAlign=t._bodyAlign,i.textBaseline="top";var l=a.color(t.bodyFontColor),d=l.alpha(r*l.alpha()).rgbString();i.fillStyle=d,i.font=a.fontString(n,t._bodyFontStyle,t._bodyFontFamily);var u=0,c=function(t){i.fillText(t,e.x+u,e.y),e.y+=n+o};a.each(t.beforeBody,c);var p=s.length>1;u=p?n+2:0,a.each(s,function(o,s){a.each(o.before,c),a.each(o.lines,function(o){p&&(i.fillStyle=a.color(t.legendColorBackground).alpha(r).rgbaString(),i.fillRect(e.x,e.y,n,n),i.strokeStyle=a.color(t.labelColors[s].borderColor).alpha(r).rgbaString(),i.strokeRect(e.x,e.y,n,n),i.fillStyle=a.color(t.labelColors[s].backgroundColor).alpha(r).rgbaString(),i.fillRect(e.x+1,e.y+1,n-2,n-2),i.fillStyle=d),c(o)}),a.each(o.after,c)}),u=0,a.each(t.afterBody,c),e.y-=o},drawFooter:function(e,t,i,r){var n=t.footer;if(n.length){e.y+=t.footerMarginTop,i.textAlign=t._footerAlign,i.textBaseline="top";var o=a.color(t.footerFontColor);i.fillStyle=o.alpha(r*o.alpha()).rgbString(),i.font=a.fontString(t.footerFontSize,t._footerFontStyle,t._footerFontFamily),a.each(n,function(r){i.fillText(r,e.x,e.y),e.y+=t.footerFontSize+t.footerSpacing})}},draw:function(){var e=this._chart.ctx,t=this._view;if(0!==t.opacity){var i=this.getTooltipSize(t),r={x:t.x,y:t.y},n=Math.abs(t.opacity<.001)?0:t.opacity;if(this._options.enabled){var o=a.color(t.backgroundColor);e.fillStyle=o.alpha(n*o.alpha()).rgbString(),a.drawRoundedRectangle(e,r.x,r.y,i.width,i.height,t.cornerRadius),e.fill(),this.drawCaret(r,i,n),r.x+=t.xPadding,r.y+=t.yPadding,this.drawTitle(r,t,e,n),this.drawBody(r,t,e,n),this.drawFooter(r,t,e,n)}}}})}},{}],35:[function(e,t,i){"use strict";t.exports=function(e){var t=e.helpers,i=e.defaults.global;i.elements.arc={backgroundColor:i.defaultColor,borderColor:"#fff",borderWidth:2},e.elements.Arc=e.Element.extend({inLabelRange:function(e){var t=this._view;return!!t&&Math.pow(e-t.x,2)<Math.pow(t.radius+t.hoverRadius,2)},inRange:function(e,i){var r=this._view;if(r){for(var a=t.getAngleFromPoint(r,{x:e,y:i}),n=a.angle,o=a.distance,s=r.startAngle,l=r.endAngle;s>l;)l+=2*Math.PI;for(;n>l;)n-=2*Math.PI;for(;s>n;)n+=2*Math.PI;var d=n>=s&&l>=n,u=o>=r.innerRadius&&o<=r.outerRadius;return d&&u}return!1},tooltipPosition:function(){var e=this._view,t=e.startAngle+(e.endAngle-e.startAngle)/2,i=(e.outerRadius-e.innerRadius)/2+e.innerRadius;return{x:e.x+Math.cos(t)*i,y:e.y+Math.sin(t)*i}},draw:function(){var e=this._chart.ctx,t=this._view,i=t.startAngle,r=t.endAngle;e.beginPath(),e.arc(t.x,t.y,t.outerRadius,i,r),e.arc(t.x,t.y,t.innerRadius,r,i,!0),e.closePath(),e.strokeStyle=t.borderColor,e.lineWidth=t.borderWidth,e.fillStyle=t.backgroundColor,e.fill(),e.lineJoin="bevel",t.borderWidth&&e.stroke()}})}},{}],36:[function(e,t,i){"use strict";t.exports=function(e){var t=e.helpers,i=e.defaults.global;e.defaults.global.elements.line={tension:.4,backgroundColor:i.defaultColor,borderWidth:3,borderColor:i.defaultColor,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0},e.elements.Line=e.Element.extend({draw:function(){function e(e,t){var i=t._view;t._view.steppedLine===!0?(l.lineTo(t._view.x,e._view.y),l.lineTo(t._view.x,t._view.y)):0===t._view.tension?l.lineTo(i.x,i.y):l.bezierCurveTo(e._view.controlPointNextX,e._view.controlPointNextY,i.controlPointPreviousX,i.controlPointPreviousY,i.x,i.y)}var r=this,a=r._view,n=a.spanGaps,o=a.scaleZero,s=r._loop,l=r._chart.ctx;l.save();var d=r._children.slice(),u=-1;s&&d.length&&d.push(d[0]);var c,p,h,f;if(d.length&&a.fill){for(l.beginPath(),c=0;c<d.length;++c)p=d[c],h=t.previousItem(d,c),f=p._view,0===c?(s?l.moveTo(o.x,o.y):l.moveTo(f.x,o),f.skip||(u=c,l.lineTo(f.x,f.y))):(h=-1===u?h:d[u],f.skip?n||u!==c-1||(s?l.lineTo(o.x,o.y):l.lineTo(h._view.x,o)):(u!==c-1?n&&-1!==u?e(h,p):s?l.lineTo(f.x,f.y):(l.lineTo(f.x,o),l.lineTo(f.x,f.y)):e(h,p),u=c));s||l.lineTo(d[u]._view.x,o),l.fillStyle=a.backgroundColor||i.defaultColor,l.closePath(),l.fill()}var g=i.elements.line;for(l.lineCap=a.borderCapStyle||g.borderCapStyle,l.setLineDash&&l.setLineDash(a.borderDash||g.borderDash),l.lineDashOffset=a.borderDashOffset||g.borderDashOffset,l.lineJoin=a.borderJoinStyle||g.borderJoinStyle,l.lineWidth=a.borderWidth||g.borderWidth,l.strokeStyle=a.borderColor||i.defaultColor,l.beginPath(),u=-1,c=0;c<d.length;++c)p=d[c],h=t.previousItem(d,c),f=p._view,0===c?f.skip||(l.moveTo(f.x,f.y),u=c):(h=-1===u?h:d[u],f.skip||(u!==c-1&&!n||-1===u?l.moveTo(f.x,f.y):e(h,p),u=c));l.stroke(),l.restore()}})}},{}],37:[function(e,t,i){"use strict";t.exports=function(e){var t=e.helpers,i=e.defaults.global,r=i.defaultColor;i.elements.point={radius:3,pointStyle:"circle",backgroundColor:r,borderWidth:1,borderColor:r,hitRadius:1,hoverRadius:4,hoverBorderWidth:1},e.elements.Point=e.Element.extend({inRange:function(e,t){var i=this._view;return!!i&&Math.pow(e-i.x,2)+Math.pow(t-i.y,2)<Math.pow(i.hitRadius+i.radius,2)},inLabelRange:function(e){var t=this._view;return!!t&&Math.pow(e-t.x,2)<Math.pow(t.radius+t.hitRadius,2)},tooltipPosition:function(){var e=this._view;return{x:e.x,y:e.y,padding:e.radius+e.borderWidth}},draw:function(){var a=this._view,n=this._chart.ctx,o=a.pointStyle,s=a.radius,l=a.x,d=a.y;a.skip||(n.strokeStyle=a.borderColor||r,n.lineWidth=t.getValueOrDefault(a.borderWidth,i.elements.point.borderWidth),n.fillStyle=a.backgroundColor||r,e.canvasHelpers.drawPoint(n,o,s,l,d))}})}},{}],38:[function(e,t,i){"use strict";t.exports=function(e){var t=e.defaults.global;t.elements.rectangle={backgroundColor:t.defaultColor,borderWidth:0,borderColor:t.defaultColor,borderSkipped:"bottom"},e.elements.Rectangle=e.Element.extend({draw:function(){function e(e){return l[(u+e)%4]}var t=this._chart.ctx,i=this._view,r=i.width/2,a=i.x-r,n=i.x+r,o=i.base-(i.base-i.y),s=i.borderWidth/2;i.borderWidth&&(a+=s,n-=s,o+=s),t.beginPath(),t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth;var l=[[a,i.base],[a,o],[n,o],[n,i.base]],d=["bottom","left","top","right"],u=d.indexOf(i.borderSkipped,0);-1===u&&(u=0),t.moveTo.apply(t,e(0));for(var c=1;4>c;c++)t.lineTo.apply(t,e(c));t.fill(),i.borderWidth&&t.stroke()},height:function(){var e=this._view;return e.base-e.y},inRange:function(e,t){var i=this._view;return!!i&&(i.y<i.base?e>=i.x-i.width/2&&e<=i.x+i.width/2&&t>=i.y&&t<=i.base:e>=i.x-i.width/2&&e<=i.x+i.width/2&&t>=i.base&&t<=i.y)},inLabelRange:function(e){var t=this._view;return!!t&&(e>=t.x-t.width/2&&e<=t.x+t.width/2)},tooltipPosition:function(){var e=this._view;return{x:e.x,y:e.y}}})}},{}],39:[function(e,t,i){"use strict";t.exports=function(e){var t=e.helpers,i={position:"bottom"},r=e.Scale.extend({getLabels:function(){var e=this.chart.data;return(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels},determineDataLimits:function(){var e=this,i=e.getLabels();e.minIndex=0,e.maxIndex=i.length-1;var r;void 0!==e.options.ticks.min&&(r=t.indexOf(i,e.options.ticks.min),e.minIndex=-1!==r?r:e.minIndex),void 0!==e.options.ticks.max&&(r=t.indexOf(i,e.options.ticks.max),e.maxIndex=-1!==r?r:e.maxIndex),e.min=i[e.minIndex],e.max=i[e.maxIndex]},buildTicks:function(){var e=this,t=e.getLabels();e.ticks=0===e.minIndex&&e.maxIndex===t.length-1?t:t.slice(e.minIndex,e.maxIndex+1)},getLabelForIndex:function(e){return this.ticks[e]},getPixelForValue:function(e,t,i,r){var a=this,n=Math.max(a.maxIndex+1-a.minIndex-(a.options.gridLines.offsetGridLines?0:1),1);if(void 0!==e){var o=a.getLabels(),s=o.indexOf(e);t=-1!==s?s:t}if(a.isHorizontal()){var l=a.width-(a.paddingLeft+a.paddingRight),d=l/n,u=d*(t-a.minIndex)+a.paddingLeft;return a.options.gridLines.offsetGridLines&&r&&(u+=d/2),a.left+Math.round(u)}var c=a.height-(a.paddingTop+a.paddingBottom),p=c/n,h=p*(t-a.minIndex)+a.paddingTop;return a.options.gridLines.offsetGridLines&&r&&(h+=p/2),a.top+Math.round(h)},getPixelForTick:function(e,t){return this.getPixelForValue(this.ticks[e],e+this.minIndex,null,t)},getValueForPixel:function(e){var t,i=this,r=Math.max(i.ticks.length-(i.options.gridLines.offsetGridLines?0:1),1),a=i.isHorizontal(),n=a?i.width-(i.paddingLeft+i.paddingRight):i.height-(i.paddingTop+i.paddingBottom),o=n/r;return e-=a?i.left:i.top,i.options.gridLines.offsetGridLines&&(e-=o/2),e-=a?i.paddingLeft:i.paddingTop,t=0>=e?0:Math.round(e/o)},getBasePixel:function(){return this.bottom}});e.scaleService.registerScaleType("category",r,i)}},{}],40:[function(e,t,i){"use strict";t.exports=function(e){var t=e.helpers,i={position:"left",ticks:{callback:function(e,i,r){var a=r.length>3?r[2]-r[1]:r[1]-r[0];Math.abs(a)>1&&e!==Math.floor(e)&&(a=e-Math.floor(e));var n=t.log10(Math.abs(a)),o="";if(0!==e){var s=-1*Math.floor(n);s=Math.max(Math.min(s,20),0),o=e.toFixed(s)}else o="0";return o}}},r=e.LinearScaleBase.extend({determineDataLimits:function(){function e(e){return s?e.xAxisID===i.id:e.yAxisID===i.id}var i=this,r=i.options,a=i.chart,n=a.data,o=n.datasets,s=i.isHorizontal();if(i.min=null,i.max=null,r.stacked){var l={},d=!1,u=!1;t.each(o,function(n,o){var s=a.getDatasetMeta(o);void 0===l[s.type]&&(l[s.type]={positiveValues:[],negativeValues:[]});var c=l[s.type].positiveValues,p=l[s.type].negativeValues;a.isDatasetVisible(o)&&e(s)&&t.each(n.data,function(e,t){var a=+i.getRightValue(e);isNaN(a)||s.data[t].hidden||(c[t]=c[t]||0,p[t]=p[t]||0,r.relativePoints?c[t]=100:0>a?(u=!0,p[t]+=a):(d=!0,c[t]+=a))})}),t.each(l,function(e){var r=e.positiveValues.concat(e.negativeValues),a=t.min(r),n=t.max(r);i.min=null===i.min?a:Math.min(i.min,a),i.max=null===i.max?n:Math.max(i.max,n)})}else t.each(o,function(r,n){var o=a.getDatasetMeta(n);a.isDatasetVisible(n)&&e(o)&&t.each(r.data,function(e,t){var r=+i.getRightValue(e);isNaN(r)||o.data[t].hidden||(null===i.min?i.min=r:r<i.min&&(i.min=r),null===i.max?i.max=r:r>i.max&&(i.max=r))})});this.handleTickRangeOptions()},getTickLimit:function(){var i,r=this,a=r.options.ticks;if(r.isHorizontal())i=Math.min(a.maxTicksLimit?a.maxTicksLimit:11,Math.ceil(r.width/50));else{var n=t.getValueOrDefault(a.fontSize,e.defaults.global.defaultFontSize);i=Math.min(a.maxTicksLimit?a.maxTicksLimit:11,Math.ceil(r.height/(2*n)))}return i},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(e,t){return+this.getRightValue(this.chart.data.datasets[t].data[e])},getPixelForValue:function(e){var t,i,r=this,a=r.paddingLeft,n=r.paddingBottom,o=r.start,s=+r.getRightValue(e),l=r.end-o;return r.isHorizontal()?(i=r.width-(a+r.paddingRight),t=r.left+i/l*(s-o),Math.round(t+a)):(i=r.height-(r.paddingTop+n),t=r.bottom-n-i/l*(s-o),Math.round(t))},getValueForPixel:function(e){var t=this,i=t.isHorizontal(),r=t.paddingLeft,a=t.paddingBottom,n=i?t.width-(r+t.paddingRight):t.height-(t.paddingTop+a),o=(i?e-t.left-r:t.bottom-a-e)/n;return t.start+(t.end-t.start)*o},getPixelForTick:function(e){return this.getPixelForValue(this.ticksAsNumbers[e])}});e.scaleService.registerScaleType("linear",r,i)}},{}],41:[function(e,t,i){"use strict";t.exports=function(e){var t=e.helpers,i=t.noop;e.LinearScaleBase=e.Scale.extend({handleTickRangeOptions:function(){var e=this,i=e.options,r=i.ticks;if(r.beginAtZero){var a=t.sign(e.min),n=t.sign(e.max);0>a&&0>n?e.max=0:a>0&&n>0&&(e.min=0)}void 0!==r.min?e.min=r.min:void 0!==r.suggestedMin&&(e.min=Math.min(e.min,r.suggestedMin)),void 0!==r.max?e.max=r.max:void 0!==r.suggestedMax&&(e.max=Math.max(e.max,r.suggestedMax)),e.min===e.max&&(e.max++,r.beginAtZero||e.min--)},getTickLimit:i,handleDirectionalChanges:i,buildTicks:function(){var e=this,i=e.options,r=e.ticks=[],a=i.ticks,n=t.getValueOrDefault,o=e.getTickLimit();o=Math.max(2,o);var s,l=a.fixedStepSize&&a.fixedStepSize>0||a.stepSize&&a.stepSize>0;if(l)s=n(a.fixedStepSize,a.stepSize);else{var d=t.niceNum(e.max-e.min,!1);s=t.niceNum(d/(o-1),!0)}var u=Math.floor(e.min/s)*s,c=Math.ceil(e.max/s)*s,p=(c-u)/s;p=t.almostEquals(p,Math.round(p),s/1e3)?Math.round(p):Math.ceil(p),r.push(void 0!==a.min?a.min:u);for(var h=1;p>h;++h)r.push(u+h*s);r.push(void 0!==a.max?a.max:c),e.handleDirectionalChanges(),e.max=t.max(r),e.min=t.min(r),a.reverse?(r.reverse(),e.start=e.max,e.end=e.min):(e.start=e.min,e.end=e.max)},convertTicksToLabels:function(){var t=this;t.ticksAsNumbers=t.ticks.slice(),t.zeroLineIndex=t.ticks.indexOf(0),e.Scale.prototype.convertTicksToLabels.call(t)}})}},{}],42:[function(e,t,i){"use strict";t.exports=function(e){var t=e.helpers,i={position:"left",ticks:{callback:function(e,i,r){var a=e/Math.pow(10,Math.floor(t.log10(e)));return 1===a||2===a||5===a||0===i||i===r.length-1?e.toExponential():""}}},r=e.Scale.extend({determineDataLimits:function(){function e(e){return d?e.xAxisID===i.id:e.yAxisID===i.id}var i=this,r=i.options,a=r.ticks,n=i.chart,o=n.data,s=o.datasets,l=t.getValueOrDefault,d=i.isHorizontal();if(i.min=null,i.max=null,r.stacked){var u={};t.each(s,function(a,o){var s=n.getDatasetMeta(o);n.isDatasetVisible(o)&&e(s)&&(void 0===u[s.type]&&(u[s.type]=[]),t.each(a.data,function(e,t){var a=u[s.type],n=+i.getRightValue(e);isNaN(n)||s.data[t].hidden||(a[t]=a[t]||0,r.relativePoints?a[t]=100:a[t]+=n)}))}),t.each(u,function(e){var r=t.min(e),a=t.max(e);i.min=null===i.min?r:Math.min(i.min,r),i.max=null===i.max?a:Math.max(i.max,a)})}else t.each(s,function(r,a){var o=n.getDatasetMeta(a);n.isDatasetVisible(a)&&e(o)&&t.each(r.data,function(e,t){var r=+i.getRightValue(e);isNaN(r)||o.data[t].hidden||(null===i.min?i.min=r:r<i.min&&(i.min=r),null===i.max?i.max=r:r>i.max&&(i.max=r))})});i.min=l(a.min,i.min),i.max=l(a.max,i.max),i.min===i.max&&(0!==i.min&&null!==i.min?(i.min=Math.pow(10,Math.floor(t.log10(i.min))-1),i.max=Math.pow(10,Math.floor(t.log10(i.max))+1)):(i.min=1,i.max=10))},buildTicks:function(){for(var e=this,i=e.options,r=i.ticks,a=t.getValueOrDefault,n=e.ticks=[],o=a(r.min,Math.pow(10,Math.floor(t.log10(e.min))));o<e.max;){n.push(o);var s=Math.floor(t.log10(o)),l=Math.floor(o/Math.pow(10,s))+1;10===l&&(l=1,++s),o=l*Math.pow(10,s)}var d=a(r.max,o);n.push(d),e.isHorizontal()||n.reverse(),e.max=t.max(n),e.min=t.min(n),r.reverse?(n.reverse(),e.start=e.max,e.end=e.min):(e.start=e.min,e.end=e.max)},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),e.Scale.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(e,t){return+this.getRightValue(this.chart.data.datasets[t].data[e])},getPixelForTick:function(e){return this.getPixelForValue(this.tickValues[e])},getPixelForValue:function(e){var i,r,a=this,n=a.start,o=+a.getRightValue(e),s=t.log10(a.end)-t.log10(n),l=a.paddingTop,d=a.paddingBottom,u=a.paddingLeft;return a.isHorizontal()?0===o?r=a.left+u:(i=a.width-(u+a.paddingRight),r=a.left+i/s*(t.log10(o)-t.log10(n)),r+=u):0===o?r=a.top+l:(i=a.height-(l+d),r=a.bottom-d-i/s*(t.log10(o)-t.log10(n))),r},getValueForPixel:function(e){var i,r,a=this,n=t.log10(a.end)-t.log10(a.start);return a.isHorizontal()?(r=a.width-(a.paddingLeft+a.paddingRight),i=a.start*Math.pow(10,(e-a.left-a.paddingLeft)*n/r)):(r=a.height-(a.paddingTop+a.paddingBottom),i=Math.pow(10,(a.bottom-a.paddingBottom-e)*n/r)/a.start),i}});e.scaleService.registerScaleType("logarithmic",r,i)}},{}],43:[function(e,t,i){"use strict";t.exports=function(e){var t=e.helpers,i=e.defaults.global,r={display:!0,animate:!0,lineArc:!1,position:"chartArea",angleLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2},pointLabels:{fontSize:10,callback:function(e){return e}}},a=e.LinearScaleBase.extend({getValueCount:function(){return this.chart.data.labels.length;
},setDimensions:function(){var e=this,r=e.options,a=r.ticks;e.width=e.maxWidth,e.height=e.maxHeight,e.xCenter=Math.round(e.width/2),e.yCenter=Math.round(e.height/2);var n=t.min([e.height,e.width]),o=t.getValueOrDefault(a.fontSize,i.defaultFontSize);e.drawingArea=r.display?n/2-(o/2+a.backdropPaddingY):n/2},determineDataLimits:function(){var e=this,i=e.chart;e.min=null,e.max=null,t.each(i.data.datasets,function(r,a){if(i.isDatasetVisible(a)){var n=i.getDatasetMeta(a);t.each(r.data,function(t,i){var r=+e.getRightValue(t);isNaN(r)||n.data[i].hidden||(null===e.min?e.min=r:r<e.min&&(e.min=r),null===e.max?e.max=r:r>e.max&&(e.max=r))})}}),e.handleTickRangeOptions()},getTickLimit:function(){var e=this.options.ticks,r=t.getValueOrDefault(e.fontSize,i.defaultFontSize);return Math.min(e.maxTicksLimit?e.maxTicksLimit:11,Math.ceil(this.drawingArea/(1.5*r)))},convertTicksToLabels:function(){var t=this;e.LinearScaleBase.prototype.convertTicksToLabels.call(t),t.pointLabels=t.chart.data.labels.map(t.options.pointLabels.callback,t)},getLabelForIndex:function(e,t){return+this.getRightValue(this.chart.data.datasets[t].data[e])},fit:function(){var e,r,a,n,o,s,l,d,u,c,p,h,f=this.options.pointLabels,g=t.getValueOrDefault(f.fontSize,i.defaultFontSize),m=t.getValueOrDefault(f.fontStyle,i.defaultFontStyle),v=t.getValueOrDefault(f.fontFamily,i.defaultFontFamily),b=t.fontString(g,m,v),_=t.min([this.height/2-g-5,this.width/2]),y=this.width,x=0;for(this.ctx.font=b,r=0;r<this.getValueCount();r++){e=this.getPointPosition(r,_),a=this.ctx.measureText(this.pointLabels[r]?this.pointLabels[r]:"").width+5;var w=this.getIndexAngle(r)+Math.PI/2,j=360*w/(2*Math.PI)%360;0===j||180===j?(n=a/2,e.x+n>y&&(y=e.x+n,o=r),e.x-n<x&&(x=e.x-n,l=r)):180>j?e.x+a>y&&(y=e.x+a,o=r):e.x-a<x&&(x=e.x-a,l=r)}u=x,c=Math.ceil(y-this.width),s=this.getIndexAngle(o),d=this.getIndexAngle(l),p=c/Math.sin(s+Math.PI/2),h=u/Math.sin(d+Math.PI/2),p=t.isNumber(p)?p:0,h=t.isNumber(h)?h:0,this.drawingArea=Math.round(_-(h+p)/2),this.setCenterPoint(h,p)},setCenterPoint:function(e,t){var i=this,r=i.width-t-i.drawingArea,a=e+i.drawingArea;i.xCenter=Math.round((a+r)/2+i.left),i.yCenter=Math.round(i.height/2+i.top)},getIndexAngle:function(e){var t=2*Math.PI/this.getValueCount(),i=this.chart.options&&this.chart.options.startAngle?this.chart.options.startAngle:0,r=i*Math.PI*2/360;return e*t-Math.PI/2+r},getDistanceFromCenterForValue:function(e){var t=this;if(null===e)return 0;var i=t.drawingArea/(t.max-t.min);return t.options.reverse?(t.max-e)*i:(e-t.min)*i},getPointPosition:function(e,t){var i=this,r=i.getIndexAngle(e);return{x:Math.round(Math.cos(r)*t)+i.xCenter,y:Math.round(Math.sin(r)*t)+i.yCenter}},getPointPositionForValue:function(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))},getBasePosition:function(){var e=this,t=e.min,i=e.max;return e.getPointPositionForValue(0,e.beginAtZero?0:0>t&&0>i?i:t>0&&i>0?t:0)},draw:function(){var e=this,r=e.options,a=r.gridLines,n=r.ticks,o=r.angleLines,s=r.pointLabels,l=t.getValueOrDefault;if(r.display){var d=e.ctx,u=l(n.fontSize,i.defaultFontSize),c=l(n.fontStyle,i.defaultFontStyle),p=l(n.fontFamily,i.defaultFontFamily),h=t.fontString(u,c,p);if(t.each(e.ticks,function(o,s){if(s>0||r.reverse){var c=e.getDistanceFromCenterForValue(e.ticksAsNumbers[s]),p=e.yCenter-c;if(a.display&&0!==s)if(d.strokeStyle=t.getValueAtIndexOrDefault(a.color,s-1),d.lineWidth=t.getValueAtIndexOrDefault(a.lineWidth,s-1),r.lineArc)d.beginPath(),d.arc(e.xCenter,e.yCenter,c,0,2*Math.PI),d.closePath(),d.stroke();else{d.beginPath();for(var f=0;f<e.getValueCount();f++){var g=e.getPointPosition(f,c);0===f?d.moveTo(g.x,g.y):d.lineTo(g.x,g.y)}d.closePath(),d.stroke()}if(n.display){var m=l(n.fontColor,i.defaultFontColor);if(d.font=h,n.showLabelBackdrop){var v=d.measureText(o).width;d.fillStyle=n.backdropColor,d.fillRect(e.xCenter-v/2-n.backdropPaddingX,p-u/2-n.backdropPaddingY,v+2*n.backdropPaddingX,u+2*n.backdropPaddingY)}d.textAlign="center",d.textBaseline="middle",d.fillStyle=m,d.fillText(o,e.xCenter,p)}}}),!r.lineArc){d.lineWidth=o.lineWidth,d.strokeStyle=o.color;for(var f=e.getDistanceFromCenterForValue(r.reverse?e.min:e.max),g=l(s.fontSize,i.defaultFontSize),m=l(s.fontStyle,i.defaultFontStyle),v=l(s.fontFamily,i.defaultFontFamily),b=t.fontString(g,m,v),_=e.getValueCount()-1;_>=0;_--){if(o.display){var y=e.getPointPosition(_,f);d.beginPath(),d.moveTo(e.xCenter,e.yCenter),d.lineTo(y.x,y.y),d.stroke(),d.closePath()}var x=e.getPointPosition(_,f+5),w=l(s.fontColor,i.defaultFontColor);d.font=b,d.fillStyle=w;var j=e.pointLabels,k=this.getIndexAngle(_)+Math.PI/2,C=360*k/(2*Math.PI)%360;0===C||180===C?d.textAlign="center":180>C?d.textAlign="left":d.textAlign="right",90===C||270===C?d.textBaseline="middle":C>270||90>C?d.textBaseline="bottom":d.textBaseline="top",d.fillText(j[_]?j[_]:"",x.x,x.y)}}}}});e.scaleService.registerScaleType("radialLinear",a,r)}},{}],44:[function(e,t,i){"use strict";var r=e(1);r="function"==typeof r?r:window.moment,t.exports=function(e){var t=e.helpers,i={units:[{name:"millisecond",steps:[1,2,5,10,20,50,100,250,500]},{name:"second",steps:[1,2,5,10,30]},{name:"minute",steps:[1,2,5,10,30]},{name:"hour",steps:[1,2,3,6,12]},{name:"day",steps:[1,2,5]},{name:"week",maxStep:4},{name:"month",maxStep:3},{name:"quarter",maxStep:4},{name:"year",maxStep:!1}]},a={position:"bottom",time:{parser:!1,format:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,displayFormats:{millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm:ss a",hour:"MMM D, hA",day:"ll",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"}},ticks:{autoSkip:!1}},n=e.Scale.extend({initialize:function(){if(!r)throw new Error("Chart.js - Moment.js could not be found! You must include it before Chart.js to use the time scale. Download at https://momentjs.com");e.Scale.prototype.initialize.call(this)},getLabelMoment:function(e,t){return"undefined"!=typeof this.labelMoments[e]?this.labelMoments[e][t]:null},getMomentStartOf:function(e){var t=this;return"week"===t.options.time.unit&&t.options.time.isoWeekday!==!1?e.clone().startOf("isoWeek").isoWeekday(t.options.time.isoWeekday):e.clone().startOf(t.tickUnit)},determineDataLimits:function(){var e=this;e.labelMoments=[];var i=[];e.chart.data.labels&&e.chart.data.labels.length>0?(t.each(e.chart.data.labels,function(t){var r=e.parseTime(t);r.isValid()&&(e.options.time.round&&r.startOf(e.options.time.round),i.push(r))},e),e.firstTick=r.min.call(e,i),e.lastTick=r.max.call(e,i)):(e.firstTick=null,e.lastTick=null),t.each(e.chart.data.datasets,function(a,n){var o=[],s=e.chart.isDatasetVisible(n);"object"==typeof a.data[0]&&null!==a.data[0]?t.each(a.data,function(t){var i=e.parseTime(e.getRightValue(t));i.isValid()&&(e.options.time.round&&i.startOf(e.options.time.round),o.push(i),s&&(e.firstTick=null!==e.firstTick?r.min(e.firstTick,i):i,e.lastTick=null!==e.lastTick?r.max(e.lastTick,i):i))},e):o=i,e.labelMoments.push(o)},e),e.options.time.min&&(e.firstTick=e.parseTime(e.options.time.min)),e.options.time.max&&(e.lastTick=e.parseTime(e.options.time.max)),e.firstTick=(e.firstTick||r()).clone(),e.lastTick=(e.lastTick||r()).clone()},buildTicks:function(){var r=this;r.ctx.save();var a=t.getValueOrDefault(r.options.ticks.fontSize,e.defaults.global.defaultFontSize),n=t.getValueOrDefault(r.options.ticks.fontStyle,e.defaults.global.defaultFontStyle),o=t.getValueOrDefault(r.options.ticks.fontFamily,e.defaults.global.defaultFontFamily),s=t.fontString(a,n,o);if(r.ctx.font=s,r.ticks=[],r.unitScale=1,r.scaleSizeInUnits=0,r.options.time.unit)r.tickUnit=r.options.time.unit||"day",r.displayFormat=r.options.time.displayFormats[r.tickUnit],r.scaleSizeInUnits=r.lastTick.diff(r.firstTick,r.tickUnit,!0),r.unitScale=t.getValueOrDefault(r.options.time.unitStepSize,1);else{var l=r.isHorizontal()?r.width-(r.paddingLeft+r.paddingRight):r.height-(r.paddingTop+r.paddingBottom),d=r.tickFormatFunction(r.firstTick,0,[]),u=r.ctx.measureText(d).width,c=Math.cos(t.toRadians(r.options.ticks.maxRotation)),p=Math.sin(t.toRadians(r.options.ticks.maxRotation));u=u*c+a*p;var h=l/u;r.tickUnit="millisecond",r.scaleSizeInUnits=r.lastTick.diff(r.firstTick,r.tickUnit,!0),r.displayFormat=r.options.time.displayFormats[r.tickUnit];for(var f=0,g=i.units[f];f<i.units.length;){if(r.unitScale=1,t.isArray(g.steps)&&Math.ceil(r.scaleSizeInUnits/h)<t.max(g.steps)){for(var m=0;m<g.steps.length;++m)if(g.steps[m]>=Math.ceil(r.scaleSizeInUnits/h)){r.unitScale=t.getValueOrDefault(r.options.time.unitStepSize,g.steps[m]);break}break}if(g.maxStep===!1||Math.ceil(r.scaleSizeInUnits/h)<g.maxStep){r.unitScale=t.getValueOrDefault(r.options.time.unitStepSize,Math.ceil(r.scaleSizeInUnits/h));break}++f,g=i.units[f],r.tickUnit=g.name;var v=r.firstTick.diff(r.getMomentStartOf(r.firstTick),r.tickUnit,!0),b=r.getMomentStartOf(r.lastTick.clone().add(1,r.tickUnit)).diff(r.lastTick,r.tickUnit,!0);r.scaleSizeInUnits=r.lastTick.diff(r.firstTick,r.tickUnit,!0)+v+b,r.displayFormat=r.options.time.displayFormats[g.name]}}var _;if(r.options.time.min?_=r.getMomentStartOf(r.firstTick):(r.firstTick=r.getMomentStartOf(r.firstTick),_=r.firstTick),!r.options.time.max){var y=r.getMomentStartOf(r.lastTick),x=y.diff(r.lastTick,r.tickUnit,!0);0>x?r.lastTick=r.getMomentStartOf(r.lastTick.add(1,r.tickUnit)):x>=0&&(r.lastTick=y),r.scaleSizeInUnits=r.lastTick.diff(r.firstTick,r.tickUnit,!0)}r.smallestLabelSeparation=r.width,t.each(r.chart.data.datasets,function(e,t){for(var i=1;i<r.labelMoments[t].length;i++)r.smallestLabelSeparation=Math.min(r.smallestLabelSeparation,r.labelMoments[t][i].diff(r.labelMoments[t][i-1],r.tickUnit,!0))},r),r.options.time.displayFormat&&(r.displayFormat=r.options.time.displayFormat),r.ticks.push(r.firstTick.clone());for(var w=1;w<=r.scaleSizeInUnits;++w){var j=_.clone().add(w,r.tickUnit);if(r.options.time.max&&j.diff(r.lastTick,r.tickUnit,!0)>=0)break;w%r.unitScale===0&&r.ticks.push(j)}var k=r.ticks[r.ticks.length-1].diff(r.lastTick,r.tickUnit);(0!==k||0===r.scaleSizeInUnits)&&(r.options.time.max?(r.ticks.push(r.lastTick.clone()),r.scaleSizeInUnits=r.lastTick.diff(r.ticks[0],r.tickUnit,!0)):(r.ticks.push(r.lastTick.clone()),r.scaleSizeInUnits=r.lastTick.diff(r.firstTick,r.tickUnit,!0))),r.ctx.restore()},getLabelForIndex:function(e,t){var i=this,r=i.chart.data.labels&&e<i.chart.data.labels.length?i.chart.data.labels[e]:"";return"object"==typeof i.chart.data.datasets[t].data[0]&&(r=i.getRightValue(i.chart.data.datasets[t].data[e])),i.options.time.tooltipFormat&&(r=i.parseTime(r).format(i.options.time.tooltipFormat)),r},tickFormatFunction:function(e,i,r){var a=e.format(this.displayFormat),n=this.options.ticks,o=t.getValueOrDefault(n.callback,n.userCallback);return o?o(a,i,r):a},convertTicksToLabels:function(){var e=this;e.tickMoments=e.ticks,e.ticks=e.ticks.map(e.tickFormatFunction,e)},getPixelForValue:function(e,t,i){var a=this;e&&e.isValid||(e=r(a.getRightValue(e)));var n=e&&e.isValid&&e.isValid()?e:a.getLabelMoment(i,t);if(n){var o=n.diff(a.firstTick,a.tickUnit,!0),s=0!==o?o/a.scaleSizeInUnits:o;if(a.isHorizontal()){var l=a.width-(a.paddingLeft+a.paddingRight),d=l*s+a.paddingLeft;return a.left+Math.round(d)}var u=a.height-(a.paddingTop+a.paddingBottom),c=u*s+a.paddingTop;return a.top+Math.round(c)}},getPixelForTick:function(e){return this.getPixelForValue(this.tickMoments[e],null,null)},getValueForPixel:function(e){var t=this,i=t.isHorizontal()?t.width-(t.paddingLeft+t.paddingRight):t.height-(t.paddingTop+t.paddingBottom),a=(e-(t.isHorizontal()?t.left+t.paddingLeft:t.top+t.paddingTop))/i;return a*=t.scaleSizeInUnits,t.firstTick.clone().add(r.duration(a,t.tickUnit).asSeconds(),"seconds")},parseTime:function(e){var t=this;return"string"==typeof t.options.time.parser?r(e,t.options.time.parser):"function"==typeof t.options.time.parser?t.options.time.parser(e):"function"==typeof e.getMonth||"number"==typeof e?r(e):e.isValid&&e.isValid()?e:"string"!=typeof t.options.time.format&&t.options.time.format.call?(console.warn("options.time.format is deprecated and replaced by options.time.parser. See http://nnnick.github.io/Chart.js/docs-v2/#scales-time-scale"),t.options.time.format(e)):r(e,t.options.time.format)}});e.scaleService.registerScaleType("time",n,a)}},{1:1}]},{},[7])(7)}),/*!
 * Copyright 2013 E.J.I.E., S.A.
 *
 * Licencia con arreglo a la EUPL, Versión 1.1 exclusivamente (la «Licencia»);
 * Solo podrá usarse esta obra si se respeta la Licencia.
 * Puede obtenerse una copia de la Licencia en
 *
 *      http://ec.europa.eu/idabc/eupl.html
 *
 * Salvo cuando lo exija la legislación aplicable o se acuerde por escrito,
 * el programa distribuido con arreglo a la Licencia se distribuye «TAL CUAL»,
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ni expresas ni implícitas.
 * Véase la Licencia en el idioma concreto que rige los permisos y limitaciones
 * que establece la Licencia.
 */
function(e){var t={};e.extend(e.rup.iniRup,e.rup.rupSelectorObjectConstructor("rup_accordion",t)),e.fn.rup_accordion("extend",{destroy:function(){e(this).removeData("settings"),e(this).accordion("destroy")},disable:function(){e(this).accordion("disable")},enable:function(){e(this).accordion("enable")},option:function(t,i){return void 0===i?void 0!==t?e(this).accordion("option",t):e(this).accordion("option"):void e(this).accordion("option",t,i)},widget:function(){return e(this).accordion("widget")},activate:function(t){e(this).accordion("activate",t)},resize:function(){e(this).accordion("resize")}}),e.fn.rup_accordion("extend",{_init:function(t){function i(t,i){e(t.target).addClass("rup_accordion_create")}if(t.length>1)e.rup.errorGestor(e.rup.i18n.base.rup_global.initError+e(this).attr("id"));else{var r=this.children(),a=r.length/2,n=e.extend({},e.fn.rup_accordion.defaults,t[0]);if(this.removeClass("rup_accordion"),this.data("settings",n),createUserEvent=n.create,n.create=function(e,t){return(void 0===createUserEvent||createUserEvent(e,t)!==!1)&&void i(e,t)},n.validation){if(parseInt(a)!==a)return e.rup.errorGestor(e.rup.i18n.base.rup_accordion.strucPairError),!1;r.each(function(t,i){if(parseInt(t/2)===t/2&&0===e(i).find("a").length)return e.rup.errorGestor(e.rup.i18n.base.rup_accordion.headFormatError),!1})}this.accordion(n)}}}),e.fn.rup_accordion.defaults={validation:!0}}(jQuery),/*!
 * Copyright 2016 E.J.I.E., S.A.
 *
 * Licencia con arreglo a la EUPL, Versión 1.1 exclusivamente (la «Licencia»);
 * Solo podrá usarse esta obra si se respeta la Licencia.
 * Puede obtenerse una copia de la Licencia en
 *
 *      http://ec.europa.eu/idabc/eupl.html
 *
 * Salvo cuando lo exija la legislación aplicable o se acuerde por escrito,
 * el programa distribuido con arreglo a la Licencia se distribuye «TAL CUAL»,
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ni expresas ni implícitas.
 * Véase la Licencia en el idioma concreto que rige los permisos y limitaciones
 * que establece la Licencia.
 */
function(e){var t={};e.extend(e.ui.autocomplete.prototype,{_renderMenu:function(t,i){var r=this.options;if(r.category){var a=this,n="";e.each(i,function(e,i){var r;i.category!=n&&(t.append("<li class='ui-autocomplete-category'>"+i.category+"</li>"),n=i.category),r=a._renderItem(t,i),i.category&&r.attr("aria-label",i.category+" : "+i.label)})}else{var o=this;e.each(i,function(e,i){o._renderItem(t,i)})}}}),e.extend(e.rup.iniRup,e.rup.rupSelectorObjectConstructor("rup_autocomplete",t)),e.fn.rup_autocomplete("extend",{getRupValue:function(){return e(this).val()},setRupValue:function(t){var i,r=this,a=r.data("rup.autocomplete"),n={};a&&(a.$hiddenField&&(a.$hiddenField.attr("rup_autocomplete_label",t),i=r.data("loadObjects"),n[t]=a.$hiddenField.val(),r.data("loadObjects",jQuery.extend(!0,{},i,n))),a.$labelField&&(i=a.$labelField.data("loadObjects"),n[r.attr("rup_autocomplete_label")]=t,a.$labelField.data("loadObjects",jQuery.extend(!0,{},i,n)))),e(this).val(t)},destroy:function(){var t;t=e(e(this).attr("id").indexOf("_label")>=0?this:"#"+e(this).attr("id")+"_label"),t.autocomplete("destroy")},off:function(){var t;t=e(e(this).attr("id").indexOf("_label")>=0?this:"#"+e(this).attr("id")+"_label"),t.storeEvents()},on:function(){var t;t=e(e(this).attr("id").indexOf("_label")>=0?this:"#"+e(this).attr("id")+"_label"),t.restoreEvents()},disable:function(){var t,i;t=e(e(this).attr("id").indexOf("_label")>=0?this:"#"+e(this).attr("id")+"_label"),i=t.data("settings"),i.combobox&&i.$comboboxToogle.button("disable"),t.attr("disabled","disabled")},enable:function(){var t,i;t=e(e(this).attr("id").indexOf("_label")>=0?this:"#"+e(this).attr("id")+"_label"),i=t.data("settings"),i.combobox&&i.$comboboxToogle.button("enable"),t.removeAttr("disabled")},option:function(t,i,r){var a;a=e(e(this).attr("id").indexOf("_label")>=0?this:"#"+e(this).attr("id")+"_label");var n=a.data("settings");if("source"===t){if("object"==typeof i)void 0!==r?n.i18nId=r:n.i18nId=n.id,a.autocomplete("option",t,this._sourceLOCAL),a.autocomplete("option","minLength",void 0!==n.minLength?n.minLength:0);else{if(void 0===r)return;"data"==t?a.autocomplete("option","data",r):(n.sourceParam=r,a.autocomplete("option",t,this._sourceREMOTE),a.autocomplete("option","minLength",n.minLength>3?n.minLength:3))}n.data=i,a.data("settings",n)}else n[t]=i,a.data("settings",n),a.autocomplete("option",t,i)},search:function(t){void 0!==e._data(e(this)[0],"events")&&(e(this).focus(),e(this).val(t),e(this).autocomplete("search",t))},close:function(){e(this).autocomplete("close")},val:function(){return e("#"+e(this).attr("id")).val()},set:function(t,i){var r,a=e(this),n=jQuery("[id='"+a.attr("id")+"_label']"),o={};a.val(t),a.attr("rup_autocomplete_label",i),n.val(i),r=n.data("loadObjects"),o[i]=t,n.data("loadObjects",jQuery.extend(!0,{},r,o))}}),e.fn.rup_autocomplete("extend",{_parseResponse:function(t,i,r,a){return void 0===a?{label:i.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+e.ui.autocomplete.escapeRegex(t)+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>"),value:r}:{label:i.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+e.ui.autocomplete.escapeRegex(t)+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>"),value:r,category:a}},_sourceLOCAL:function(t,i){var r,a,n,o={};r=void 0!==this.element.data("settings")?this.element.data("settings"):this.options,n=void 0!==r.loadObjects?r.loadObjects:r.id;var s=r.contains?e.ui.autocomplete.escapeRegex(t.term):"^"+e.ui.autocomplete.escapeRegex(t.term),l=e.rup.i18n.app[r.i18nId];s=new RegExp(s,"i"),data=e.map(r.data,function(i){var n,d=i,u=i;if("object"==typeof i&&(d=void 0!==i.i18nCaption?e.rup.i18nParse(l,i.i18nCaption):void 0!==i.label?i.label:i.value,u=i.value,r.category&&(n=i.category)),!t.term||s.test(d))return a=r.category?r._parseResponse(t.term,d,u,n):r._parseResponse(t.term,d,u),o[a.label.replace(/<strong>/g,"").replace(/<\/strong>/g,"")]=a.value,a}),e("#"+n).data("loadObjects",o),data=e.grep(data,function(e){return void 0!=e}),i(data)},_sourceREMOTE:function(t,i){var r,a,n,o,s,l,d,u,c=this.element,p={};r=void 0!==this.element.data("settings")?this.element.data("settings"):this.options,n=void 0!==r.loadObjects?r.loadObjects:r.id,u=jQuery("#"+n),o=t.term.replace(/%/g,"\\%").replace(/_/g,"\\_"),s=e.extend({q:o,c:this.options.contains},this.options.extraParams),l=u.data("tmp.loadObjects.term"),0===o.indexOf(l)?(u.data("tmp.loadObjects.term",o),d=r.data,r.data=u.data("tmp.data"),jQuery.proxy(r.$self._sourceLOCAL,this,t,i)(),r.data=d):e.rup_ajax({url:r.data,data:s,dataType:"json",contentType:"application/json",beforeSend:function(t){e("#"+r.id+"_label").addClass("rup-autocomplete_loading"),t.setRequestHeader("RUP",e.toJSON(r.sourceParam))},success:function(n){return c.triggerHandler("rupAutocomplete_beforeLoadComplete",[n]),0==n.length?(jQuery("#"+r.id+"_label").autocomplete("close"),null):(i(e.map(n,function(e){return a=1==r.category?r._parseResponse(t.term,e.label,e.value,e.category):r._parseResponse(t.term,e.label,e.value),p[a.label.replace(/<strong>/g,"").replace(/<\/strong>/g,"")]=a.value,a})),u.data("loadObjects",p),u.data("tmp.loadObjects.term",o),u.data("tmp.data",n),void c.triggerHandler("rupAutocomplete_loadComplete",[n]))},error:function(t,i,a){null!==r.onLoadError&&"function"==typeof r.onLoadError?jQuery(r.onLoadError(t,i,a)):e.rup.showErrorToUser(e.rup.i18n.base.rup_autocomplete.ajaxError)},complete:function(t,i){e("#"+r.id+"_label").removeClass("rup-autocomplete_loading")}})},_createShowAllButton:function(t){var i=this,r=!1;i.wrap(jQuery("<span>").addClass("rup-combobox"));var a=i.parent(),n=e("<a>").attr("tabIndex",-1).attr("title",e.rup.i18n.base.rup_autocomplete.showAllItems).rup_tooltip().rup_button({icons:{primary:"ui-icon-triangle-1-s"},text:!1}).removeClass("ui-corner-all").addClass("rup-combobox-toggle ui-corner-right").mousedown(function(){r=i.autocomplete("widget").is(":visible")}).click(function(){return i.focus(),!!r||void i.autocomplete("search","")});n.appendTo(a),t.$comboboxToogle=n},_init:function(t){if(t.length>1)e.rup.errorGestor(e.rup.i18nParse(e.rup.i18n.base,"rup_global.initError")+e(this).attr("id"));else{var i,r=e(this),a=e.extend({},e.fn.rup_autocomplete.defaults,t[0]),n=e(this).attr("name");e(this).attr("ruptype","autocomplete"),a.id=e(this).attr("id"),a.loadObjects=a.id,a.data=a.source,a._parseResponse=this._parseResponse,a._sourceLOCAL=this._sourceLOCAL,a.$self=this,a.loadValue=e("#"+a.id).attr("value"),a.i18nId||(a.i18nId=a.id),a._change=a.change,a._select=a.select,a._focus=a.focus,a.change=function(t,n){null!=i&&(e("#"+t.target.id).val(i),e("#"+t.target.id).focus()),i=null,void 0!==a._change&&a._change(t,n),r.triggerHandler("rupAutocomplete_change")},a.select=function(t,n){i=n.item.label.replace(/<strong>/g,"").replace(/<\/strong>/g,""),void 0!==a._select&&a._select(t,n),e("#"+a.id).attr("rup_autocomplete_label",i),e("#"+a.id).data("selected",!0),r.triggerHandler("rupAutocomplete_select",[n])},a.focus=function(t,i){return e("#"+t.target.id).val(i.item.label.replace(/<strong>/g,"").replace(/<\/strong>/g,"")),void 0!==a._focus&&a._focus(t,i),!1};var o=e("<input>").attr({type:"hidden",id:a.id+"_value",name:null===a.valueName?n:a.valueName,ruptype:"autocomplete"});e("#"+a.id).after(o).attr("name",null===a.labelName?n+"_label":a.labelName).addClass("rup-autocomplete_label"),"object"==typeof a.source?a.source=this._sourceLOCAL:(a.minLength=a.minLength>3?a.minLength:3,a.source=this._sourceREMOTE),e("#"+a.id).data("loadObjects",{}),a.combobox===!0&&(e("#"+a.id).addClass("rup-combobox-input ui-corner-left"),a.minLength=0),jQuery(a.appendTo).addClass("ui-front"),jQuery("#"+a.id).autocomplete(a),a.$menu=jQuery("#"+a.id).data("autocomplete").menu.element.attr("id",a.id+"_menu"),a.$menu.off("mousedown"),a.$menu.on("mousedown",function(t){var i=jQuery("#"+a.id+"_menu")[0];e(t.target).closest(".ui-menu-item").length?e("#"+a.id+"_label").triggerHandler("blur"):setTimeout(function(){e(document).one("mousedown",function(t){t.target===jQuery("#"+a.id+"_label")||t.target===i||e.ui.contains(i,t.target)||jQuery("#"+a.id+"_label").autocomplete("close")})},1),setTimeout(function(){clearTimeout(e("#"+a.id+"_label").data("autocomplete").closing)},13)}),a.combobox===!0&&this._createShowAllButton(a),a.menuMaxHeight!==!1&&jQuery("#"+a.id).on("autocompleteopen",function(){a.$menu.css("overflow-y","auto").css("overflow-x","hidden").css("max-height",a.menuMaxHeight).css("width",jQuery("#"+a.id+"_label").innerWidth())}),null!==a.menuAppendTo?0===jQuery(a.menuAppendTo).length?alert("Es necesario especificar un selector válido para la propiedad menuAppendTo"):jQuery(a.menuAppendTo).append(a.$menu):e.rup_utils.aplicatioInPortal()&&e("div.r01gContainer").append(a.$menu),a.defaultValue&&e("#"+a.id).rup_autocomplete("search",a.defaultValue),a.loadValue&&(e("#"+a.id).val(a.loadValue),e("#"+a.id+"_value").val(a.loadValue)),a.loadObjects=a.id+"_label",e("#"+a.id).attr("id",a.id+"_label"),e("#"+a.id+"_value").attr("id",a.id),e("#"+a.id+"_menu").on("mousedown",function(t){var i=e("#"+a.id).data("selected"),r=e(".ui-autocomplete:visible").length>0;!i&&r&&(e("#"+a.id).data("ieIssueScrollVisible",!0),t.preventDefault())}),e("#"+a.id+"_label").bind("keydown",function(t){e("#"+a.id).data("ieIssueScrollVisible",!1)}),e("#"+a.id+"_label").bind("blur",function(t){var i=e("#"+a.id).data("selected"),r=e(".ui-autocomplete:visible").length>0;if(e("#"+a.id).data("selected",!1),"keydown"===t.type&&13!==t.keyCode)return!0;if(e("#"+a.id).data("ieIssueScrollVisible")===!0)return e("#"+a.id).focus(),t.stopPropagation(),e("#"+a.id).data("ieIssueScrollVisible",!1),!0;var n=e(t.currentTarget),o=e("#"+a.loadObjects).data("loadObjects");return 1==a.getText?void 0!==o[n.val()]?(e("#"+a.id).val(n.val()),e("#"+a.id).attr("rup_autocomplete_label",n.val())):(e("#"+a.id).val(n.val()),e("#"+a.id).attr("rup_autocomplete_label",n.val())):void 0!==o[n.val()]?(e("#"+a.id).val(o[n.val()]),e("#"+a.id).attr("rup_autocomplete_label",o[n.val()])):(e("#"+a.id).val(""),e("#"+a.id).attr("rup_autocomplete_label",""),n.val(""),n.autocomplete("close")),("keydown"!==t.type||13!==t.keyCode||!i&&!r)&&void 0}),e("#"+a.id+"_label").data("settings",a),e("#"+a.id+"_label").data("rup.autocomplete",{$hiddenField:e("#"+a.id)}),e("#"+a.id).data("rup.autocomplete",{$labelField:e("#"+a.id+"_label")}),a.disabled===!0?e("#"+a.id).rup_autocomplete("disable"):a.disabled===!1&&e("#"+a.id).rup_autocomplete("enable")}}}),e.fn.rup_autocomplete.defaults={onLoadError:null,contains:!0,valueName:null,labelName:null,getText:!1,combobox:!1,menuMaxHeight:!1,menuAppendTo:null,disabled:!1}}(jQuery),/*!
 * Copyright 2016 E.J.I.E., S.A.
 *
 * Licencia con arreglo a la EUPL, Versión 1.1 exclusivamente (la «Licencia»);
 * Solo podrá usarse esta obra si se respeta la Licencia.
 * Puede obtenerse una copia de la Licencia en
 *
 *      http://ec.europa.eu/idabc/eupl.html
 *
 * Salvo cuando lo exija la legislación aplicable o se acuerde por escrito,
 * el programa distribuido con arreglo a la Licencia se distribuye «TAL CUAL»,
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ni expresas ni implícitas.
 * Véase la Licencia en el idioma concreto que rige los permisos y limitaciones
 * que establece la Licencia.
 */
function(e){e.widget("$.rup_breadCrumb",{options:{showSpeed:"fast",hideSpeed:"",collapsible:!1,collapsedWidth:10,breadCrumb:e.rup.APP_RESOURCES+".breadCrumb"},_create:function(){var t=window.location.pathname,i=t.substring(e.rup.CTX_PATH.length),r=i.split("/"),a=e("<ul>").attr("id","rup_breadCrumbs_ul").addClass("rup-breadCrumb_main"),n=null,o=null,s=void 0!==this.options.initUrl?e.rup.CTX_PATH+this.options.initUrl:e.rup.CTX_PATH,l=void 0===this.options.i18nId?this.element.attr("id"):this.options.i18nId;this.options.breadCrumb instanceof Object?n=this.options.breadCrumb:(e.rup.getFile(this.options.breadCrumb),n=e.rup.i18n[this.options.breadCrumb]),window.LOGGED_USER&&"NULL"!==LOGGED_USER||(LOGGED_USER=""),window.DESTROY_XLNETS_SESSION||(DESTROY_XLNETS_SESSION="false"),""!==LOGGED_USER?(void 0!==this.options.logOutUrl&&("false"===DESTROY_XLNETS_SESSION?this.element.append(e("<div id='logOutDiv' class='rup-breadCrumb_logoutDiv'>").append(e("<a>").addClass("rup-breadCrumb_link").attr("logOutHref",this.options.logOutUrl).bind("click",function(){e.rup_messages("msgConfirm",{message:e.rup.i18nParse(e.rup.i18n.base,"rup_breadCrumb.menuDisconnectMessage"),title:e.rup.i18nParse(e.rup.i18n.base,"rup_breadCrumb.menuDisconnectTitle"),OKFunction:function(){e(window).attr("location",e("#logOutLink").attr("logOutHref"))}})}).html(e.rup.i18nParse(e.rup.i18n.base,"rup_breadCrumb.exit")).attr("id","logOutLink").append(e("<span>").addClass("ui-icon rup-icon rup-icon-door-out rup-breadCrumb_exitImg")))):this.element.append(e("<div id='logOutDiv' class='rup-breadCrumb_logoutDiv'>").append(e("<a>").addClass("rup-breadCrumb_link").attr("logOutHref",this.options.logOutUrl).bind("click",function(){e.rup_messages("msgConfirm",{message:e.rup.i18nParse(e.rup.i18n.base,"rup_breadCrumb.menuSecuritySystemDisconnectMessage"),title:e.rup.i18nParse(e.rup.i18n.base,"rup_breadCrumb.menuDisconnectTitle"),OKFunction:function(){e(window).attr("location",e("#logOutLink").attr("logOutHref"))}})}).mouseover(function(t){e(this).find("span").removeClass("rup-breadCrumb_logoutImg").addClass("rup-breadCrumb_logoutImg_active")}).mouseleave(function(t){e(this).find("span").addClass("rup-breadCrumb_logoutImg").removeClass("rup-breadCrumb_logoutImg_active")}).html(e.rup.i18nParse(e.rup.i18n.base,"rup_breadCrumb.disconnect")).attr("id","logOutLink").append(e("<span>").addClass("rup-breadCrumb_logoutImg ui-icon"))))),breadCrumbSpan=e("<span>").addClass("rup-breadCrumbs_span").text(LOGGED_USER+e.rup.i18nParse(e.rup.i18n.base,"rup_breadCrumb.userAre")),this.element.append(breadCrumbSpan)):(breadCrumbSpan=e("<span>").addClass("rup-breadCrumbs_span").text(e.rup.i18nParse(e.rup.i18n.base,"rup_breadCrumb.youAre")),this.element.append(breadCrumbSpan)),a.append(this._createLI(e.rup.i18nParse(e.rup.i18n.base,"rup_breadCrumb.start"),s));for(var d=0;d<r.length;d++)n[r[d]]&&(n=this._createBreadCrumb(n[r[d]],r[d],a,l));e(a.children()[a.children().length-1]).addClass("rup-breadCrumb_current").find("img.rup-icon, span.rup-icon").remove(),o=e("a:first",e(a.children()[a.children().length-1])),o.replaceWith(e("<span>").text(o.text()).css({"font-weight":"bold",color:"#333333"})),delete o,this.element.append(a),a.xBreadcrumbs()},_createLI:function(t,i,r){var a=e("<li>"),n=e("<a>").attr("href",i).text(t);return a.append(n),r!==!1&&a.append(e("<span>").addClass("ui-icon rup-icon rup-icon-separator-arrow")),a},_createBreadCrumb:function(t,i,r,a){var n,o=e("<ul>");if(t.i18nCaption&&(n=this._createLI(e.rup.i18nParse(e.rup.i18n.app[a],t.i18nCaption),t.url?e.rup.CTX_PATH+t.url:"#")),t.subLevel){for(var s=0;s<t.subLevel.length;s++)o.append(this._createLI(e.rup.i18nParse(e.rup.i18n.app[a],t.subLevel[s].i18nCaption),t.subLevel[s].url?t.subLevel[s].url:"#",!1).css("background","none"));n.append(o),e(n).bind("mouseover",function(t){e(this).find("a:eq(1)").focus()}),n.bind("keydown",function(t){switch(t.keyCode){case e.ui.keyCode.UP:for(var i=e(this).find("li > a"),r=0;r<=i.length&&i[r].text!==e(t.target).text();r++);e(i[r-1]).length>0?e(i[r-1]).focus():e(this).find("li > a").last().focus();break;case e.ui.keyCode.DOWN:for(var i=e(this).find("li > a"),r=0;r<=i.length&&i[r].text!==e(t.target).text();r++);e(i[r+1]).length>0?e(i[r+1]).focus():e(this).find("li > a").first().focus();break;case e.ui.keyCode.ESCAPE:e(this).children("ul").hide()}})}return r.append(n),t},_setOption:function(t,i){e.Widget.prototype._setOption.apply(this,arguments)},destroy:function(){e.Widget.prototype.destroy.apply(this,arguments)}})}(jQuery),/*!
 * Copyright 2016 E.J.I.E., S.A.
 *
 * Licencia con arreglo a la EUPL, Versión 1.1 exclusivamente (la «Licencia»);
 * Solo podrá usarse esta obra si se respeta la Licencia.
 * Puede obtenerse una copia de la Licencia en
 *
 *      http://ec.europa.eu/idabc/eupl.html
 *
 * Salvo cuando lo exija la legislación aplicable o se acuerde por escrito,
 * el programa distribuido con arreglo a la Licencia se distribuye «TAL CUAL»,
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ni expresas ni implícitas.
 * Véase la Licencia en el idioma concreto que rige los permisos y limitaciones
 * que establece la Licencia.
 */
function(e){var t={};e.extend(e.rup.iniRup,e.rup.rupSelectorObjectConstructor("rup_combo",t)),e.fn.rup_combo("extend",{getRupValue:function(t){var i,r,a,n=e(this),o=n.data("settings"),s={};return a=n.attr("name"),a&&(r=n.attr("name").split(".")),o.submitAsJSON?jQuery.rup_utils.getRupValueAsJson(a,n.rup_combo("value")):(i=o.submitAsString?n.rup_combo("value").toString():n.rup_combo("value"),void 0!==r&&null!==r&&o.multiselect&&(s[r[r.length-1]]=i),o.multiselect===!0&&void 0!==r&&r.length>1&&o.legacyWrapMode===!1?s:i)},setRupValue:function(t){var i=e(this),r=i.data("settings");0!==this.length&&e(this).data("settings").multiselect?e(this).rup_combo("select",r.readAsString===!0?t.split(","):t):(e.data(this[0],"setRupValue",t.toString()),e(this).rup_combo("select",t.toString()))},clear:function(){0!==this.length&&e(this).data("settings").multiselect?e(this).multiselect("uncheckAll"):e(this).rup_combo("select")},reset:function(){var t=e(this);t.rup_combo("select",t.find("option[selected]").attr("value"))},checkAll:function(){e(this).data("settings").multiselect?e(this).multiselect("checkAll"):alert("Función no soportada.")},select:function(t){if(0!==this.length&&e(this).data("settings").multiselect)this._setElement(e(this),t,!0);else{var i=this._setElement(e(this),t);if(i){var r=e(this).data("childs");if(void 0!==r)for(var a=0;a<r.length;a+=1)e("#"+r[a]).rup_combo("reload",r[a])}}},selectLabel:function(t){if(0!==this.length&&e(this).data("settings").multiselect){for(var i=0;i<t.length;i++)e("input[name='multiselect_"+e(this).attr("id")+"'][title='"+t[i]+"']").attr("checked",!0);e(this).multiselect("update")}else{var r=this._selectLabel(e(this),t,!0);if(r){var a=e(this).data("childs");if(void 0!==a)for(var i=0;i<a.length;i+=1)e("#"+a[i]).rup_combo("reload",a[i])}}},value:function(){if(0!==this.length&&e(this).data("settings").multiselect){for(var t=new Array,i=e(this).multiselect("getChecked"),r=0;r<i.size();r++)t.push(e(i[r]).val());return t}return e(this).selectmenu("value")},label:function(){if(0!==this.length&&e(this).data("settings").multiselect){for(var t=new Array,i=e(this).multiselect("getChecked"),r=0;r<i.size();r++)t.push(e(i[r]).next().text());return t}return this[0].options[e(this).selectmenu("index")].text},index:function(){if(0!==this.length&&e(this).data("settings").multiselect){for(var t=new Array,i=e(this).rup_combo("value"),r=e(this).find("option"),a=0;a<r.size();a++)e.inArray(e(r[a]).val(),i)!==-1&&t.push(a);return t}return e(this).selectmenu("index")},disable:function(){var t=e(this);e("#"+e(this).attr("id")+"-button").attr("tabindex",-1),e("#"+e(this).attr("id")+"-button").on("focus.rup_combo",function(i){return e("#"+t.attr("id")+"-button").blur(),!1}),0!==this.length&&e(this).data("settings").multiselect?e(this).multiselect("disable"):e(this).selectmenu("disable")},enable:function(){var t=(e(this),e(this).data("settings"));e("#"+e(this).attr("id")+"-button").off("focus.rup_combo"),e("#"+e(this).attr("id")+"-button").attr("tabindex",t.tabindex?t.tabindex:0),0!==this.length&&e(this).data("settings").multiselect?e(this).multiselect("enable"):e(this).selectmenu("enable")},isDisabled:function(){return"false"!==e(this).attr("aria-disabled")},disableChild:function(){e(this).empty().append("<option></option>").selectmenu("disable"),e("#"+e(this).attr("id")+"-button span:first-child").text("");var t=e(this).data("childs");if(void 0!==t)for(var i=0;i<t.length;i+=1)e("#"+t[i]).rup_combo("disableChild")},disableOpt:function(t){if(e(this).data("settings").multiselect){this.find("[value='"+t+"']").attr("disabled","disabled");var i=e("#rup-multiCombo_"+e(this).attr("id")).find("[value='"+t+"']");if(i.attr("disabled","disabled"),i.parent().css("color","grey"),void 0!=e(this).data("settings").sourceGroup){for(var r=i.parentsUntil("ul").last().prevAll("li.ui-multiselect-optgroup-label").first(),a=r.nextUntil("li.ui-multiselect-optgroup-label").find("input"),n=!0,o=0;o<a.length;o++)if(!a[o].disabled){n=!1;break}n&&(r.css("color","grey"),r.children("a").remove(),r.children("span").not(".rup-combo_multiOptgroupLabel").remove())}}else alert("Función no soportada.")},disableOptArr:function(t){if(e(this).data("settings").multiselect)for(var i=0;i<t.length;i++)e(this).rup_combo("disableOpt",t[i]);else alert("Función no soportada.")},enableOpt:function(t){if(e(this).data("settings").multiselect){this.find("[value='"+t+"']").removeAttr("disabled");var i=e("#rup-multiCombo_"+e(this).attr("id")).find("[value='"+t+"']");if(i.removeAttr("disabled"),i.parent().css("color","black"),void 0!=e(this).data("settings").sourceGroup){var r=i.parentsUntil("ul").last().prevAll("li.ui-multiselect-optgroup-label").first();0===r.children("a").length&&(r.css("color","black"),this._generateOptGroupLabel(r,e(this).data("settings").multiOptgroupIconText))}}else alert("Función no soportada.")},enableOptArr:function(t){if(e(this).data("settings").multiselect)for(var i=0;i<t.length;i++)e(this).rup_combo("enableOpt",t[i]);else alert("Función no soportada.")},refresh:function(){if(0!==this.length&&e(this).data("settings").multiselect){e(this).multiselect("refresh");var t=e(this).data("settings").multiOptgroupIconText,i=this;return e.each(e("#rup-multiCombo_"+e(this).attr("id")).find(".ui-multiselect-optgroup-label"),function(e,r){i._generateOptGroupLabel(r,t)}),e("#rup-multiCombo_"+e(this).attr("id")).find(".ui-multiselect-all").attr("title",e.rup.i18n.base.rup_combo.multiselect.checkAllTitle).rup_tooltip(),e("#rup-multiCombo_"+e(this).attr("id")).find(".ui-multiselect-none").attr("title",e.rup.i18n.base.rup_combo.multiselect.uncheckAllTitle).rup_tooltip(),e(this).multiselect("uncheckAll")}return e(this).selectmenu()},reload:function(t){if(0!==this.length){var i,r,a=e(this).data("settings");if(e("#"+a.id).rup_combo("disableChild"),"object"==typeof a.source||"object"==typeof a.sourceGroup)i=a.source[this._getParentsValues(a.parent,!1,a.multiValueToken)],void 0!==i&&(this._parseLOCAL(i,a,e("#"+a.id)),this._makeCombo(a),null!==a.onLoadSuccess&&jQuery(a.onLoadSuccess(e("#"+a.id))),e("#"+a.id).selectmenu("change"),r=e.data(e("#"+a.id)[0],"setRupValue"),r&&e("#"+a.id).rup_combo("select",r));else if("string"==typeof a.source||"string"==typeof a.sourceGroup){var n=this._getParentsValues(a.parent,!0),o=this;if(null===n)return!1;e.rup_ajax({url:a.source?a.source:a.sourceGroup,data:n,dataType:"json",contentType:"application/json",beforeSend:function(e){o._ajaxBeforeSend(e,a)},success:function(t,i,r){o._ajaxSuccess(t,a,e("#"+a.id)),null!==a.onLoadSuccess&&jQuery(a.onLoadSuccess(e("#"+a.id)))},error:function(e,t,i){null!==a.onLoadError?jQuery(a.onLoadError(e,t,i)):self._ajaxError(e,t,i)}})}else"function"!=typeof a.source&&"function"!=typeof a.sourceGroup||(jQuery(a.source),this._makeCombo(a))}},order:function(t,i,r){var a=e(this),n=e("option",a),o=[],s=null;if(a.length>0){var l=a.rup_combo("value");n.each(function(){return r?(r=!1,s={val:e(this).val(),text:e(this).text()},!0):void o.push({val:e(this).val(),text:e(this).text(),clazz:e(this).attr("class")})}),t?i?o.sort(function(e,t){return e.val-t.val}):o.sort(function(e,t){return e.val>t.val?1:e.val==t.val?0:-1}):i?o.sort(function(e,t){return e.text-t.text}):o.sort(function(e,t){return e.text.localeCompare(t.text)});for(var d=0,u=o.length;d<u;d++)e(n[d]).val(o[d].val).text(o[d].text),o[d].clazz&&e(n[d]).attr("class",o[d].clazz);s&&(a.prepend(e("<option>").attr("value",s.val).text(s.text)),e(n[o.length]).remove()),a.rup_combo("refresh"),this._setElement(e(this),l,e(this).data("settings").multiselect)}}}),e.fn.rup_combo("extend",{_setElement:function(t,i,r,a){if(r!==!0){if("string"==typeof i){if(!(e("option[value='"+i+"']",t).length>0))return!1;a===!0&&e("option[value='"+i+"']",t).attr("selected","selected"),e(t).selectmenu("value",i).trigger("_setElement")}else if("number"==typeof i){if(!(e("option",t).length>=i))return!1;a===!0&&e("option:eq("+i+")",t).attr("selected","selected"),e(t).selectmenu("index",i).trigger("_setElement")}else e(t).selectmenu("index",0).trigger("_setElement");return!0}if(null!==i&&"object"==typeof i){for(var n=0;n<i.length;n++)"number"==typeof i[n]?e(e("input[name='multiselect_"+e(this).attr("id")+"']")[i[n]]).attr("checked",!0):"string"==typeof i[n]&&e("input[name='multiselect_"+e(this).attr("id")+"'][value='"+i[n]+"']").attr("checked",!0);e(t).val(i).trigger("_setElement"),e(t).multiselect("update")}return!0},_selectLabel:function(t,i){for(var r,a=0;a<e("option",t).length;a+=1)if(r=jQuery("option:eq("+a+")",t),jQuery("option:eq("+a+")",t).text()===i)return e(t).selectmenu("index",r.prop("index")),!0;return!1},_getBlankLabel:function(t){var i=e.rup.i18n.app;return i[t]&&i[t]._blank?i[t]._blank:e.rup.i18n.base.rup_combo.blankNotDefined},_defaultFormatting:function(e){var t=[{find:/^([^\-]+) \- /g,rep:'<span class="ui-selectmenu-item-header">$1</span>'},{find:/([^\|><]+) \| /g,rep:'<span class="ui-selectmenu-item-content">$1</span>'},{find:/([^\|><\(\)]+) (\()/g,rep:'<span class="ui-selectmenu-item-content">$1</span>$2'},{find:/([^\|><\(\)]+)$/g,rep:'<span class="ui-selectmenu-item-content">$1</span>'},{find:/(\([^\|><]+\))$/g,rep:'<span class="ui-selectmenu-item-footer">$1</span>'}];for(var i in t)e=e.replace(t[i].find,t[i].rep);return e},_getParentsValues:function(t,i,r){var a,n,o,s="",r=null!=r?r:"";if(void 0===t)return s;for(var l=0;l<t.length;l+=1){if(a=t[l],0===e("#"+a).rup_combo("index")&&(n=e("#"+a+"-button span:first-child").text(),n===e.rup.i18n.base.rup_combo.blankNotDefined||void 0!==e.rup.i18n.app[a]&&n===e.rup.i18n.app[t[l]]._blank))return null;if(o=void 0!==e("#"+a).data("settings").blank&&null!==e("#"+a).data("settings").blank?e("#"+a).data("settings").blank:"",null===e("#"+a).val()||e("#"+a).val()===o)return null;s+=i?e("#"+a).attr("name")+"="+e("#"+a).val()+"&":e("#"+a).val()+r}return""!==s&&(s=i?s.substring(0,s.length-1):s.substring(0,s.length-r.length)),s},_makeCombo:function(t){if(null!=t.blank&&e("#"+t.id).prepend(e("<option>").attr("value",t.blank).text(this._getBlankLabel(t.id))),t.imgs){var i=[],r=[];e.map(t.imgs,function(a){e.each(a,function(n,o){n.indexOf("###")==-1?(e("#"+t.id+" [value='"+n+"']").addClass(o),i[i.length]={find:"."+o}):(r=n.split("###"),e("#"+t.id+" > [label='"+r[0]+"'] > [value='"+r[1]+"']").addClass(a[r[0]+"###"+r[1]]),i[i.length]={find:"."+a[r[0]+"###"+r[1]]})})}),t.icons=i}if(t.format="default"===t.format?this._defaultFormatting:t.format,e("#"+t.id).data("settings",t),t.multiselect){e("#"+t.id).width("0"),t.minWidth=t.width,e("#"+t.id).multiselect(t),e("#"+t.id).data("multiselect").button.attr("id",t.id+"-button"),e("#"+t.id).rup_combo("refresh"),e("#"+t.id).attr("multiple","multiple");var a=this;e("#"+t.id).data("multiselect").button.on("keypress.selectmenu",function(e){return e.which>0&&a._typeAheadMultiselect(e.which,"focus",t),!0}),e("#"+t.id).data("multiselect").menu.delegate("label","keydown.multiselect",function(e){return e.which>0&&a._typeAheadMultiselect(e.which,"focus",t),!0})}else e("#"+t.id).selectmenu(t);e.rup_utils.aplicatioInPortal()&&(t.multiselect?e("div.r01gContainer").append(e("#rup-multiCombo_"+t.id)):e("div.r01gContainer").append(e("#"+t.id+"-menu"))),t.ordered&&e("#"+t.id).rup_combo("order",t.orderedByValue,t.orderAsNumber,t.blank),!t.loadFromSelect&&(void 0===t.inputValue||""===t.inputValue)||t.loadFromSelect&&void 0!==t.selected?this._setElement(e("#"+t.id),t.selected,t.multiselect,!0):(t.multiselect&&jQuery.isArray(t.inputValue)===!1&&(t.inputValue=t.inputValue.split("##")),this._setElement(e("#"+t.id),t.inputValue,t.multiselect,!0)),t.disabled?e("#"+t.id).rup_combo("disable"):e("#"+t.id).rup_combo("enable"),t.multiselect&&(void 0!==t.disabledOpts&&e("#"+t.id).rup_combo("disableOptArr",t.disabledOpts),void 0!==t.enabledOpts&&e("#"+t.id).rup_combo("enableOptArr",t.enabledOpts));var n=t.parent;void 0!==n&&e.each(n,function(i,r){if(e("#"+r).rup_combo("isDisabled"))return void e("#"+t.id).rup_combo("disable")}),t.rowStriping&&(t.multiselect?(e("#rup-multiCombo_"+t.id+" .ui-multiselect-checkboxes li:nth-child(2n+1):not(.ui-multiselect-optgroup-label)").addClass("rup-combo_odd"),e("#rup-multiCombo_"+t.id+" .ui-multiselect-checkboxes li:nth-child(2n):not(.ui-multiselect-optgroup-label)").addClass("rup-combo_even"),e.each(e("#rup-multiCombo_"+t.id+" .ui-multiselect-optgroup-label"),function(t,i){t%2==0?e(i).addClass("rup-combo_groupOdd"):e(i).addClass("rup-combo_groupEven")})):(e("#"+t.id+"-menu li:nth-child(2n+1):not(.ui-selectmenu-group)").addClass("rup-combo_odd"),e("#"+t.id+"-menu li:nth-child(2n):not(.ui-selectmenu-group)").addClass("rup-combo_even"),e("#"+t.id+"-menu li:nth-child(2n+1).ui-selectmenu-group").addClass("rup-combo_groupOdd"),e("#"+t.id+"-menu li:nth-child(2n).ui-selectmenu-group").addClass("rup-combo_groupEven")))},_parseLOCAL:function(t,i,r){for(var a,n,o=i.imgs?i.imgs:[],s=0;s<t.length;s+=1)a=n=t[s],"object"==typeof t[s]&&(a=t[s].i18nCaption?e.rup.i18nParse(e.rup.i18n.app[i.i18nId],t[s].i18nCaption):t[s].label,n=t[s].value),void 0!=t[s]&&t[s].style&&(o[o.length]={},o[o.length-1][n]=t[s].style,i.imgs=o),r.append(e("<option>").attr("value",n).text(i.showValue?n+i.token+a:a))},_parseOptGroupLOCAL:function(t,i,r){for(var a,n=this,o=0;o<t.length;o+=1)a=t[o],e.each(a,function(t,a){"string"!=typeof a[0]?r.append(e("<optgroup>").attr("label",e.rup.i18nParse(e.rup.i18n.app[i.i18nId],t))):r.append(e("<optgroup>").attr("label",t)),r=e(r).children("optgroup:last-child"),n._parseLOCAL(a,i,r),r=e(r).parent()})},_parseREMOTE:function(t,i,r,a){for(var n,o=i.imgs?i.imgs:[],s=0;s<t.length;s+=1)n=t[s],n.style&&(o[o.length]={},null==a?o[o.length-1][n.value]=n.style:o[o.length-1][a+"###"+n.value]=n.style,i.imgs=o),r.append(e("<option>").attr("value",n.value).text(i.showValue?n.value+i.token+n.label:n.label))},_parseOptGroupREMOTE:function(t,i,r){for(var a,n=this,o=0;o<t.length;o+=1)a=t[o],e.each(a,function(t,a){r.append(e("<optgroup>").attr("label",t)),r=e(r).children("optgroup:last-child"),n._parseREMOTE(a,i,r,t),r=e(r).parent()})},_ajaxBeforeSend:function(t,i,r){void 0!==r&&e("#"+i.id).replaceWith(r),this._makeCombo(i),e("#"+i.id).rup_combo("disable"),e("#"+i.id+"-button span:first-child").addClass("rup-combo_loadingText").text(e.rup.i18n.base.rup_combo.loadingText);var a=e("#"+i.id+"-button span:last-child");e(a).removeClass("ui-icon-triangle-1-s"),e(a).addClass("rup-combo_loading"),t.setRequestHeader("RUP",e.toJSON(i.sourceParam))},_ajaxSuccess:function(t,i,r){e("#"+i.id+"-button span:first-child").removeClass("rup-combo_loadingText").text("");var a=e("#"+i.id+"-button span:last-child");e(a).removeClass("rup-combo_loading"),e(a).addClass("ui-icon-triangle-1-s"),e("#"+i.id).empty(),t.length>0?(i.source?this._parseREMOTE(t,i,r):(i.ordered=!1,this._parseOptGroupREMOTE(t,i,r)),this._makeCombo(i),setRupValue=e.data(e("#"+i.id)[0],"setRupValue"),setRupValue?e("#"+i.id).rup_combo("select",setRupValue):e("#"+i.id).selectmenu("change")):e("#"+i.id).append("<option></option>")},_ajaxError:function(t,i,r,a){null!==t.responseText?e.rup.showErrorToUser(t.responseText):e.rup.showErrorToUser(e.rup.i18n.base.rup_combo.ajaxError)},_generateOptGroupLabel:function(t,i){e(t).append(e("<span />").text(e(t).children("a").text()).addClass("rup-combo_multiOptgroupLabel")),e(t).children("a").remove(),e(t).append(e("<span />").text(" [")),e(t).append(e("<a />").text(i?e.rup.i18n.base.rup_combo.multiselect.optGroupSelect:"").prepend(e("<span />").addClass("ui-icon ui-icon-check rup-combo_multiOptgroupIcon")).attr("title",e.rup.i18n.base.rup_combo.multiselect.optGroupSelectTitle).rup_tooltip({applyToPortal:!0}).click(function(){for(var i=e(t).nextUntil("li.ui-multiselect-optgroup-label").find("input"),r=0;r<i.length;r++)i[r].disabled||(i[r].checked=!1)})),e(t).append(e("<span />").text(" | ")),e(t).append(e("<a />").text(i?e.rup.i18n.base.rup_combo.multiselect.optGroupDeselect:"").prepend(e("<span />").addClass("ui-icon ui-icon-closethick rup-combo_multiOptgroupIcon")).attr("title",e.rup.i18n.base.rup_combo.multiselect.optGroupDeselectTitle).rup_tooltip({applyToPortal:!0}).click(function(){for(var i=e(t).nextUntil("li.ui-multiselect-optgroup-label").find("input"),r=0;r<i.length;r++)i[r].disabled||(i[r].checked=!0)})),e(t).append(e("<span />").text(" ]"))},_selectedOptionLiMultiselect:function(t){e("#"+t.id).data("multiselect");return this._optionLis.eq(this._selectedIndex())},_focusedOptionLiMultiselect:function(t){var i=e("#"+t.id).data("multiselect"),r=void 0;return jQuery.each(i.inputs,function(t,i){e(i).parent().has(".ui-state-hover")&&(r=e(i))}),r},_typeAheadMultiselect:function(t,i,r){var a=this,n=String.fromCharCode(t).toLowerCase(),o=null,s=null;a._typeAhead_timer&&(window.clearTimeout(a._typeAhead_timer),a._typeAhead_timer=void 0),a._typeAhead_chars=(void 0===a._typeAhead_chars?"":a._typeAhead_chars).concat(n),a._typeAhead_chars.length<2||a._typeAhead_chars.substr(-2,1)===n&&a._typeAhead_cycling?(a._typeAhead_cycling=!0,o=n):(a._typeAhead_cycling=!1,o=a._typeAhead_chars);for(var l=("focus"!==i?this._selectedOptionLiMultiselect(r).data("index"):this._focusedOptionLiMultiselect(r).data("index"))||0,d=e("#"+r.id).data("multiselect"),u=0;u<d.inputs.length;u++){var c=d.inputs.eq(u).next("span").text().substr(0,o.length).toLowerCase();if(c===o)if(a._typeAhead_cycling){if(null===s&&(s=u),u>l){s=u;break}}else s=u}null!==s&&(d.inputs.eq(u).parent().trigger("mouseover"),d.inputs.eq(u).trigger(i)),a._typeAhead_timer=window.setTimeout(function(){a._typeAhead_timer=void 0,a._typeAhead_chars=void 0,a._typeAhead_cycling=void 0},r.typeAhead)},_init:function(t){if(t.length>1)e.rup.errorGestor(e.rup.i18nParse(e.rup.i18n.base,"rup_global.initError")+e(this).attr("id"));else{var i,r,a=e.extend({},e.fn.rup_combo.defaults,t[0]),n=!1,o=!1,s={};a.tabindex=e(this).attr("tabindex"),e.extend(e.ech.multiselect.prototype.options,e.rup.i18n.base.rup_combo.multiselect),a.id=e.rup_utils.escapeId(e(this).attr("id")),a.name=e(this).attr("name"),a.i18nId||(a.i18nId=a.id),a.inputValue=null===e("#"+a.id).val()?e("#"+a.id).prop("value"):e("#"+a.id).val(),r=e(this).prop("attributes");for(var l=0;l<r.length;l++)s[r[l].name]=r[l].value;if(e.extend(s,{name:a.name,ruptype:"combo"}),i=e("<select>").attr(s).addClass("rup_combo"),e(this).hasClass("validableElem")&&(o=!0,i.addClass("validableElem")),e(this).hasClass("customelement")&&(o=!0,i.addClass("customelement")),null===a.firstLoad&&e(this).is("select")&&a.loadFromSelect&&(n=!0),a.parent){if(e.map(a.parent,function(t){var i=void 0===e("#"+t).data("childs")?[]:e("#"+t).data("childs");i[i.length]=a.id,e("#"+t).data("childs",i)}),a.loadFromSelect===!1?(null!==a.firstLoad&&this._parseLOCAL(a.firstLoad,a,i),e("#"+a.id).replaceWith(i)):(e("#"+a.id).attr("ruptype","combo").removeClass().addClass("rup_combo"),o&&e("#"+a.id).removeClass().addClass("validableElem")),this._makeCombo(a),e(this).is("select")&&a.loadFromSelect){for(var d=e(this).find("option"),u=!0,l=0;l<d.size();l+=1)if(""!==e(d[l]).attr("value")){u=!1;break}u&&e("#"+a.id).rup_combo("disable")}else e("#"+a.id).rup_combo("disable");e("#"+a.id).data("settings",a),null!==this._getParentsValues(a.parent)&&null===a.firstLoad&&a.loadFromSelect===!1&&e("#"+a.id).rup_combo("reload",a.id)}else if("object"==typeof a.source||"object"==typeof a.sourceGroup||n)a.loadFromSelect===!1?(a.source?this._parseLOCAL(null!==a.firstLoad?a.firstLoad:a.source,a,i):(a.ordered=!1,this._parseOptGroupLOCAL(null!==a.firstLoad?a.firstLoad:a.sourceGroup,a,i)),e("#"+a.id).replaceWith(i)):(e("#"+a.id).attr("ruptype","combo").removeClass().addClass("rup_combo"),o&&e("#"+a.id).removeClass().addClass("validableElem")),this._makeCombo(a),null!==a.onLoadSuccess&&jQuery(a.onLoadSuccess(e("#"+a.id))),e("#"+a.id).data("settings",a);else if("string"==typeof a.source||"string"==typeof a.sourceGroup){var c=a.source?a.source:a.sourceGroup,p=this,h=this;e.rup_ajax({url:c,dataType:"json",contentType:"application/json",beforeSend:function(e){p._ajaxBeforeSend(e,a,i)},success:function(t,r,n){p._ajaxSuccess(t,a,i),null!==a.onLoadSuccess&&jQuery(a.onLoadSuccess(e("#"+a.id)))},error:function(e,t,i){null!==a.onLoadError?jQuery(a.onLoadError(e,t,i)):h._ajaxError(e,t,i)}}),e("#"+a.id).data("settings",a)}else"function"!=typeof a.source&&"function"!=typeof a.sourceGroup||(jQuery(a.source),this._makeCombo(a),e("#"+a.id).data("settings",a));e("#"+a.id).bind("change",function(t,i){a.multiselect?e("#"+a.id).rup_combo("select",e("#"+a.id).rup_combo("getRupvalue")):e("#"+a.id).rup_combo("select",e("#"+a.id).val())}),e("#"+a.id).next("a").click(function(t){e("#ui-datepicker-div").hide()})}}}),e.fn.rup_combo.defaults={onLoadError:null,width:200,blank:null,style:"dropdown",showValue:!1,token:"|",multiValueToken:"##",ordered:!0,orderedByValue:!1,firstLoad:null,onLoadSuccess:null,loadFromSelect:!1,multiselect:!1,multiOptgroupIconText:!0,submitAsString:!1,submitAsJSON:!1,readAsString:!1,rowStriping:!1,typeAhead:1e3,legacyWrapMode:!1}}(jQuery),/*!
 * Copyright 2016 E.J.I.E., S.A.
 *
 * Licencia con arreglo a la EUPL, Versión 1.1 exclusivamente (la «Licencia»);
 * Solo podrá usarse esta obra si se respeta la Licencia.
 * Puede obtenerse una copia de la Licencia en
 *
 *      http://ec.europa.eu/idabc/eupl.html
 *
 * Salvo cuando lo exija la legislación aplicable o se acuerde por escrito, 
 * el programa distribuido con arreglo a la Licencia se distribuye «TAL CUAL»,
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ni expresas ni implícitas.
 * Véase la Licencia en el idioma concreto que rige los permisos y limitaciones
 * que establece la Licencia.
 */
function(e){var t={};e.extend(e.rup.iniRup,e.rup.rupSelectorObjectConstructor("rup_contextMenu",t)),e.fn.rup_contextMenu("extend",{show:function(t){e(this).contextMenu(t)},hide:function(){e(this).contextMenu("hide")},enable:function(){e(this).contextMenu(!0)},disable:function(){e(this).contextMenu(!1)},destroy:function(){e.contextMenu("destroy",this.selector)}}),e.fn.rup_contextMenu("extend",{_init:function(t){if(t.length>1)e.rup.errorGestor(e.rup.i18nParse(e.rup.i18n.base,"rup_global.initError")+e(this).attr("id"));else{var i=this,r=e.extend({},e.fn.rup_contextMenu.defaults,t[0]);r.selector=i.selector,jQuery.contextMenu(r),i.addClass("context-menu-cursor"),jQuery.rup.browser.isIE&&i.css("cursor",r.msieCursorCss),e.each(e(".context-menu-list.context-menu-root"),function(t,i){var a=jQuery(i);a.data("contextMenuRoot").selector===r.selector&&(a.attr("id",a.data("contextMenuRoot").ns.substring(1)),e.each(e(".context-menu-item"),function(t,i){var a,n,o=jQuery(i),s=o.data("contextMenuKey");void 0!==s&&(n=r.items[s],void 0!==n&&(a=n.cssSprite,void 0===a||o.hasClass("rup-css-sprite")||(o.addClass("rup-css-sprite"),o.prepend(e("<span>").addClass(a))),void 0!==n.id&&o.attr("id",n.id)))}))})}}}),e.fn.rup_contextMenu.defaults={autoHide:!0,showCursor:!0,msieCursorCss:"url("+e.rup.RUP+"/basic-theme/cursors/context-menu.cur),default"}}(jQuery),/*!
 * Copyright 2016 E.J.I.E., S.A.
 *
 * Licencia con arreglo a la EUPL, Versión 1.1 exclusivamente (la «Licencia»);
 * Solo podrá usarse esta obra si se respeta la Licencia.
 * Puede obtenerse una copia de la Licencia en
 *
 *      http://ec.europa.eu/idabc/eupl.html
 *
 * Salvo cuando lo exija la legislación aplicable o se acuerde por escrito,
 * el programa distribuido con arreglo a la Licencia se distribuye «TAL CUAL»,
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ni expresas ni implícitas.
 * Véase la Licencia en el idioma concreto que rige los permisos y limitaciones
 * que establece la Licencia.
 */
function(e){var t={},i={};e.extend(e.rup.iniRup,e.rup.rupSelectorObjectConstructor("rup_date",t)),e.extend(e.rup.iniRup,e.rup.rupObjectConstructor("rup_date",i)),e.fn.rup_date("extend",{getRupValue:function(){if(e(this).data("datepicker").settings.datetimepicker){var t=e(this).datepicker("getDate");if(null===t||"Invalid Date"===t.toString())return"";var i={hour:t.getHours(),minute:t.getMinutes(),second:t.getSeconds()},r=(e.timepicker._formatTime(i,"hh:mm:ss"),e(this).data("datepicker").settings.dateFormat);return e.datepicker.formatDate(r,t)+" "+e.timepicker._formatTime(i,"hh:mm:ss")}return e(this).rup_date("getDate")},setRupValue:function(t){if(e(this).data("datepicker").settings.datetimepicker){var i=t.split(" "),r=new Date(i[0]),r=(i[1],new Date(t));if("Invalid Date"===r.toString())return"";var a={hour:r.getHours(),minute:r.getMinutes(),second:r.getSeconds()},n=e.timepicker._formatTime(a,e(this).data("datepicker").settings.timeFormat);e(this).datepicker("setTime",t),e(this).val(i[0]+" "+n)}else e(this).val(t)},destroy:function(){var t=e(this).data("datepicker").settings.labelMaskId;t&&e("#"+t).text(""),delete t,e(this).datepicker("destroy")},disable:function(){e(this).datepicker("disable")},enable:function(){e(this).datepicker("enable")},isDisabled:function(){return e(this).datepicker("isDisabled")},hide:function(){e(this).datepicker("hide")},show:function(){e(this).datepicker("show")},getDate:function(){return e(this).val()},setDate:function(t){e(this).datepicker("setDate",t)},refresh:function(){e(this).datepicker("refresh")},option:function(t,i){e(this).datepicker("option",t,i)}}),e.fn.rup_date("extend",{_init:function(t){if(t.length>1)e.rup.errorGestor(e.rup.i18nParse(e.rup.i18n.base,"rup_global.initError")+e(this).attr("id"));else{var i=e.extend({},e.fn.rup_date.defaults,t[0]);i._onClose=i.onClose,i.onClose=function(t,r){void 0!==i._onClose&&i._onClose(t,r),e.rup.browser.isIE||e(this).focus()},i.multiSelect&&(i._beforeShow=i.beforeShow,i.beforeShow=function(t,r){void 0!==i._beforeShow&&i._beforeShow(t,r);var a,n=e(t),o=n.attr("value");void 0!==o&&""!==o&&(a=o.split(","),a.length>1&&n.multiDatesPicker("addDates",a))}),i.id=e(this).attr("id"),this.attr("ruptype","date");var r=e.rup.i18n.base.rup_date;for(var a in r)i[a]=r[a];if(i.labelMaskId&&(i.datetimepicker?i.showSecond?e("#"+i.labelMaskId).text(e.rup.i18nParse(e.rup.i18n.base,"rup_date.maskDateTimeSec")+" "):e("#"+i.labelMaskId).text(e.rup.i18nParse(e.rup.i18n.base,"rup_date.maskDateTime")+" "):e("#"+i.labelMaskId).text(e.rup.i18nParse(e.rup.i18n.base,"rup_date.mask")+" ")),e("#"+i.id).is("div")&&1===i.numberOfMonths[1]&&(i.showWeek?e("#"+i.id).css("width","17.1em"):e("#"+i.id).css("width","15.4em")),i.buttonImage=e.rup.STATICS+(i.buttonImage?i.buttonImage:"/rup/basic-theme/images/calendario.png"),i.noWeekend&&(i.beforeShowDay=e.datepicker.noWeekends),i.buttonImageOnly=!0,i.constrainInput=!0,i.showOn="both",i.multiSelect){var n=0;"number"==typeof i.multiSelect?(i.mode={modeName:"normal",options:{maxPicks:i.multiSelect}},n=10*i.multiSelect+(i.multiSelect-1)):"object"==typeof i.multiSelect&&(i.mode={modeName:"daysRange",options:{autoselectRange:i.multiSelect}},n=i.multiSelect[1]-i.multiSelect[0],n=10*n+(n-1)),this.attr("maxlength",n),e.datepicker._defaults.dateFormat=i.dateFormat,e("#"+i.id).multiDatesPicker(i),e(this).keypress(function(t){if(44===t.charCode){var i=e(t.currentTarget).val(),r=t.originalEvent.originalTarget.selectionStart,a=t.originalEvent.originalTarget.selectionEnd;begin=i.substring(0,r),end=i.substring(a),(i.length<e(t.currentTarget).attr("maxlength")||r!==a)&&(e(t.currentTarget).val(begin+","+end),t.originalEvent.originalTarget.selectionStart=r+1,t.originalEvent.originalTarget.selectionEnd=r+1)}})}else i.datetimepicker?(this.attr("maxlength","16"),e("#"+i.id).datetimepicker(i)):(this.attr("maxlength","10"),e("#"+i.id).datepicker(i));e.rup_utils.aplicatioInPortal()&&!e("#"+i.id).is("div")&&e(".r01gContainer").append(e(".ui-datepicker:not(.r01gContainer .ui-datepicker)")),e(this).parent().find("[title]").rup_tooltip({applyToPortal:!0}),i.disabled&&e("#"+i.id).rup_date("disable")}}}),e.rup_date("extend",{_init:function(t){if(t.length>1)e.rup.errorGestor(e.rup.i18nParse(e.rup.i18n.base,"rup_global.initError")+e(this).attr("id"));else{var i=e.extend({},e.fn.rup_date.defaults,t[0]),r=e.extend(!0,{},i),a=e.extend(!0,{},i);r.onClose=function(t,r){var a,n,o,s,l=e("#"+i.to),d=r.input;""!=l.attr("value")?(a=d.data("datepicker"),n=l.data("datepicker"),o=void 0!==a.settings.timepicker?new Date(a.selectedYear,a.selectedMonth,a.selectedDay,a.settings.hour,a.settings.minute,a.settings.second):new Date(a.selectedYear,a.selectedMonth,a.selectedDay),s=void 0!==n.settings.timepicker?new Date(n.selectedYear,n.selectedMonth,n.selectedDay,n.settings.hour,n.settings.minute,n.settings.second):new Date(n.selectedYear,n.selectedMonth,n.selectedDay),o>s&&l.attr("value",t)):l.attr("value",t),void 0!==i.onClose&&i.onClose(t,r)},r.onSelect=a.beforeShow=function(t){var r,a=e("#"+i.from).datetimepicker("getDate");r=null!==a?new Date(a.getTime()):null,e("#"+i.to).datetimepicker("option","minDate",r),i.datetimepicker&&e("#"+i.to).datetimepicker("option","minDateTime",r),void 0!==i.onSelect&&i.onSelect(t)},a.onClose=function(t,r){var a,n,o,s,l=e("#"+i.from),d=r.input;""!=l.attr("value")?(a=l.data("datepicker"),n=d.data("datepicker"),o=void 0!==a.settings.timepicker?new Date(a.selectedYear,a.selectedMonth,a.selectedDay,a.settings.hour,a.settings.minute,a.settings.second):new Date(a.selectedYear,a.selectedMonth,a.selectedDay),s=void 0!==n.settings.timepicker?new Date(n.selectedYear,n.selectedMonth,n.selectedDay,n.settings.hour,n.settings.minute,n.settings.second):new Date(n.selectedYear,n.selectedMonth,n.selectedDay),o>s&&l.attr("value",t)):l.attr("value",t),void 0!==i.onClose&&i.onClose(t,r)},a.onSelect=r.beforeShow=function(t){var r,a=e("#"+i.to).datetimepicker("getDate");r=null!==a?new Date(a.getTime()):null,e("#"+i.from).datetimepicker("option","maxDate",r),i.datetimepicker&&e("#"+i.from).datetimepicker("option","maxDateTime",r),void 0!==i.onSelect&&i.onSelect(t)},e("#"+i.from).rup_date(r),e("#"+i.to).rup_date(a)}}}),e.fn.rup_date.defaults={datetimepicker:!1,multiSelect:!1,changeMonth:!0,changeYear:!0,noWeekend:!1,showSecond:!0}}(jQuery),/*!
 * Copyright 2016 E.J.I.E., S.A.
 *
 * Licencia con arreglo a la EUPL, Versión 1.1 exclusivamente (la «Licencia»);
 * Solo podrá usarse esta obra si se respeta la Licencia.
 * Puede obtenerse una copia de la Licencia en
 *
 *      http://ec.europa.eu/idabc/eupl.html
 *
 * Salvo cuando lo exija la legislación aplicable o se acuerde por escrito, 
 * el programa distribuido con arreglo a la Licencia se distribuye «TAL CUAL»,
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ni expresas ni implícitas.
 * Véase la Licencia en el idioma concreto que rige los permisos y limitaciones
 * que establece la Licencia.
 */
function(e){jQuery.rup_dav={},e.extend(jQuery.rup_dav,{editOnline:function(t){var i;i="string"==typeof t?jQuery.extend({},jQuery.rup_dav.defaults,{url:t}):jQuery.extend({},jQuery.rup_dav.defaults,t),jQuery.rup_dav._checkUrl(i),i.xlnetsAuth&&jQuery.rup_dav._xlnetsAuth(i),e.browser.msie===!0?jQuery.rup_dav._editOnlineIE(i):jQuery.rup_dav._editOnlineFF(i)}}),e.extend(jQuery.rup_dav,{_checkUrl:function(e){var t="";e.url.indexOf(location.protocol)===-1&&(t+=location.protocol+"//",e.url.indexOf(location.host)===-1&&(t+=location.host),e.url.indexOf(CTX_PATH)===-1&&(t+=CTX_PATH),e.url=t+e.url)},_xlnetsAuth:function(t){var i=e.rup_utils.readCookie("n38UidSesion"),r=e.rup_utils.readCookie("n38DominioUid"),a={};void 0!==i&&null!==i&&""!==i&&jQuery.extend(!0,a,{n38UidSesion:i}),void 0!==r&&null!==r&&""!==r&&jQuery.extend(!0,a,{n38DominioUid:r}),jQuery.isEmptyObject(a)||(t.url+="?"+t.xlnetsAuthParam+"="+jQuery.rup_utils.base64.encode(jQuery.param(a)))},_editOnlineIE:function(e){var t;try{t=new ActiveXObject("SharePoint.OpenDocuments.3"),t.EditDocument(encodeURI(e.url))}catch(i){try{t=new ActiveXObject("Word.Application"),t.Visible=!0,t.Documents.Open(encodeURI(e.url))}catch(i){e.downloadOnError===!0&&window.open(encodeURI(e.alternateDownloadURL),"_blank"),jQuery.isFunction(e.fncErrorOnEditOnline)&&jQuery.proxy(e.fncErrorOnEditOnline)(e)}}},_editOnlineFF:function(e){var t,i;try{t=document.getElementById("winFirefoxPlugin"),i=t.GetOfficeVersion(),t.EditDocument(e.url,i)}catch(r){e.downloadOnError===!0&&window.open(encodeURI(e.alternateDownloadURL),"_blank"),jQuery.isFunction(e.fncErrorOnEditOnline)&&jQuery.proxy(e.fncErrorOnEditOnline)(e)}}}),e.rup_dav.defaults={xlnetsAuth:!1,xlnetsAuthParam:"c",downloadOnError:!1,alternateDownloadURL:null,fncErrorOnEditOnline:null}}(jQuery),/*!
 * Copyright 2016 E.J.I.E., S.A.
 *
 * Licencia con arreglo a la EUPL, Versión 1.1 exclusivamente (la «Licencia»);
 * Solo podrá usarse esta obra si se respeta la Licencia.
 * Puede obtenerse una copia de la Licencia en
 *
 *      http://ec.europa.eu/idabc/eupl.html
 *
 * Salvo cuando lo exija la legislación aplicable o se acuerde por escrito,
 * el programa distribuido con arreglo a la Licencia se distribuye «TAL CUAL»,
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ni expresas ni implícitas.
 * Véase la Licencia en el idioma concreto que rige los permisos y limitaciones
 * que establece la Licencia.
 */
function(e){e.extend(e.rup,{dialog:{DIV:"dialogDIV",TEXT:"textDialog",AJAX:"ajaxDialog",LINK:"linkButton"}});var t={};e.extend(e.rup.iniRup,e.rup.rupSelectorObjectConstructor("rup_dialog",t)),e.fn.rup_dialog("extend",{open:function(){var t,i=e.extend({},e(this).dialog("option"));e(this).data("focus",e(document.activeElement));var r=e(document).height(),a=e(document).width();e(this).dialog("option","ajaxCache")===!1?(i.id=e(this).attr("id"),i.autoOpen=!0,this._ajaxLoad(i)):e(this).dialog("open"),e.rup_utils.aplicatioInPortal()&&(null!==e(this).data("dialog").overlay&&(t=e(this).data("dialog").overlay.$el,e(".r01gContainer").append(t),t.css("height",r).css("width",a)),void 0!==i.position&&null!==i.position||e(this).data("dialog").uiDialog.css("position","absolute").css("top",r/2-e("div[aria-labelledby=ui-dialog-title-"+this[0].id+"]").height()/2)),e("div[aria-labelledby=ui-dialog-title-"+this[0].id+"] .ui-dialog-buttonpane button:first").focus()},destroy:function(){e(this).dialog("destroy")},disable:function(){e(this).dialog("disable")},enable:function(){e(this).dialog("enable")},widget:function(){return e(this).dialog("widget")},moveToTop:function(){e(this).dialog("moveToTop")},close:function(){e(this).dialog("close")},isOpen:function(){return e(this).dialog("isOpen")},getOption:function(t){return e(this).dialog("option",t)},setOption:function(t,i){if("buttons"!==t)"title"!==t?void 0!==i?e(this).dialog("option",t,i):e(this).dialog("option",t):e("#ui-dialog-title-"+e(this).attr("id")).html(i);else{var r,a,n,o,s=i.length,l=[];if(s>1){for(r=i,a=0;a<i.length;a++)i[a].btnType===e.rup.dialog.LINK&&(l.push(i.splice(a,1)),a--);a=null}if(o=l.length,s>1&&0===o)return e.rup.msgAlert({message:e.rup.i18nParse(e.rup.i18n,"base.rup_global.rupCheckStyleError")}),!1;if(e(this).dialog("option",t,i),o>0){for(n=0;n<o;n++)this.createBtnLinks(l[n][0],this[0].id);n=null}}},createBtnLinks:function(t,i){var r=e("<a href='#'></a>").attr("role","button").attr("id","rup_dialog"+t.text).addClass("rup-enlaceCancelar").html(t.text).click(t.click);e("div[aria-labelledby=ui-dialog-title-"+i+"] .ui-dialog-buttonset ").append(r)}}),e.fn.rup_dialog("extend",{_init:function(t){if(t.length>1)e.rup.errorGestor(e.rup.i18nParse(e.rup.i18n.base,"rup_global.initError"+e(this).attr("id")));else{var i,r=e.extend({},e.fn.rup_dialog.defaults,t[0]),a=this;r._close=r.close,r.close=function(t,i){void 0!==e(this).data("focus")&&e(this).data("focus").focus(),void 0!==r._close&&r._close(t,i)},null!==r.type&&e(this).length>0?e.each(e(this),function(t,n){void 0!==e(this).attr("id")?r.id=e(this).attr("id"):(r.id="rup_"+r.type+"DIV",i=e("<div/>").attr("id",r.id),i.appendTo("body"));var o,s,l,d,u,c,p=!1,h=[],f=0,g=!1,m=void 0;if(e("div[aria-labelledby=ui-dialog-title-"+r.id+"]").length>0?g=!0:(e("body #"+r.id).not(".ui-dialog-content").length>1&&e(e("body #"+r.id).not(".ui-dialog-content")[1]).remove(),""!==r.specificLocation?m=function(t,i){e("#"+r.id).parent(".ui-dialog").insertAfter(e("#"+r.specificLocation))}:e.rup_utils.aplicatioInPortal()&&(m=function(t,i){e(".r01gContainer").append(e(".ui-dialog"))})),void 0!==m){var v=r.create;r.create=function(e,t){return(void 0===v||null===v||v.call(e,t)!==!1)&&void m(e,t)}}switch(r.type){case e.rup.dialog.DIV:void 0!==r.clone&&(e("#"+r.id).clone(!0).attr("id",r.clone).insertAfter("#"+r.id),r.id=r.clone);break;case e.rup.dialog.TEXT:e("#"+r.id).html(r.message);break;case e.rup.dialog.AJAX:a._ajaxLoad(r)}if(r.autoOpen===!0&&(p=!0,r.autoOpen=!1),r.buttons&&null!==r.buttons){if(o=r.buttons.length,o>1){for(s=r.buttons,u=0;u<r.buttons.length;u++)r.buttons[u].btnType===e.rup.dialog.LINK&&(h.push(r.buttons.splice(u,1)),u--);u=null}f=h.length,o>1&&0===f&&r.rupCheckStyle&&(e(document).rup().msgAlert({message:e.rup.i18nParse(e.rup.i18n.base,"rup_global.rupCheckStyleError")}),r.stack=!1,r.modal=!1,r.zIndex=9999)}if(g?(e("div[aria-labelledby=ui-dialog-title-"+r.id+"] .ui-dialog-buttonset a").remove(),r.title&&e("#ui-dialog-title-"+r.id).text(r.title)):(e("#"+r.id).dialog(r),d="<span id='closeText_"+r.id+"' style='float:right;font-size:0.85em'>"+e.rup.i18nParse(e.rup.i18n.base,"rup_global.cerrar")+"</span>",l=e("<a href='#'></a>").attr("role","button").css("margin-right","0.9em").css("float","right").css("width","50px").addClass("ui-dialog-title").html(d).click(function(t){return e("#"+r.id).dialog("close"),!1}).hover(function(t){e("div[aria-labelledby=ui-dialog-title-"+r.id+"] .ui-dialog-titlebar-close").addClass("ui-state-hover"),e("div[aria-labelledby=ui-dialog-title-"+r.id+"] .ui-dialog-titlebar-close").css("padding","0px")},function(t){e("div[aria-labelledby=ui-dialog-title-"+r.id+"] .ui-dialog-titlebar-close").removeClass("ui-state-hover"),e("div[aria-labelledby=ui-dialog-title-"+r.id+"] .ui-dialog-titlebar-close").attr("style","")}).insertAfter("#ui-dialog-title-"+r.id),e("div[aria-labelledby=ui-dialog-title-"+r.id+"] .ui-dialog-titlebar-close").hover(function(){l.css("text-decoration","none")},function(){l.css("text-decoration","")})),f>0){for(c=0;c<f;c++)e(this).rup_dialog("createBtnLinks",h[c][0],r.id);c=null}p&&(r.type!==e.rup.dialog.AJAX?(e("#"+r.id).rup_dialog("open"),e("div[aria-labelledby=ui-dialog-title-"+r.id+"] .ui-dialog-buttonpane button:first").focus()):r.autoOpen=!0)}):0===e(this).length?e.rup.errorGestor(e.rup.i18nParse(e.rup.i18n.base,"rup_global.selectorError")):e.rup.errorGestor(e.rup.i18nParse(e.rup.i18n.base,"rup_global.dialogTypeError"))}},_ajaxLoad:function(t){if(!t.url||null===t.url||""===t.url)return e.rup.msgAlert({title:e.rup.i18nParse(e.rup.i18n.base,"rup_global.error"),message:e.rup.i18nParse(e.rup.i18n.base,"rup_dialog.noURL")}),!1;t.showLoading&&t.autoOpen===!0&&e.blockUI({message:'<img src="'+e.rup.RUP+'/basic-theme/images/rup.ajaxLoader.gif" style="position:absolute;top:12px;left:15px;" alt="'+e.rup.i18nParse(e.rup.i18n.base,"rup_blockUI.cargando")+'" ><h1 class="loading">'+e.rup.i18nParse(e.rup.i18n.base,"rup_blockUI.cargando")+"...</h1>"});var i=e.extend({},t.ajaxOptions);i.success=function(i,r,a){""===i&&null===i||(e("#"+t.id).html(i),e.unblockUI(),t.autoOpen===!0&&(e("#"+t.id).rup_dialog("open"),e("div[aria-labelledby=ui-dialog-title-"+t.id+"] .ui-dialog-buttonpane button:first").focus())),t.ajaxOptions&&void 0!==t.ajaxOptions.success&&null!==t.ajaxOptions.success&&"function"==typeof t.ajaxOptions.success&&t.ajaxOptions.success(i,r,a)},i.error=function(i,r,a){e.unblockUI(),e(document).rup().msgAlert({message:e.rup.i18nParse(e.rup.i18n.base,"rup_dialog.errorLoadingData")}),void 0!==t.ajaxOptions.error&&null!==t.ajaxOptions.error&&"function"==typeof t.ajaxOptions.error&&t.ajaxOptions.error(i,r,a)},i.url=e.rup_utils.setNoPortalParam(t.url),i.type="GET",i.cache=!1,i.dataType="text",e.rup_ajax(i)}}),e.fn.rup_dialog.defaults={rupCheckStyle:!0,type:null,url:null,minHeight:100,ajaxCache:!0,specificLocation:"",clone:void 0}}(jQuery),/*!
 * Copyright 2016 E.J.I.E., S.A.
 *
 * Licencia con arreglo a la EUPL, Versión 1.1 exclusivamente (la «Licencia»);
 * Solo podrá usarse esta obra si se respeta la Licencia.
 * Puede obtenerse una copia de la Licencia en
 *
 *      http://ec.europa.eu/idabc/eupl.html
 *
 * Salvo cuando lo exija la legislación aplicable o se acuerde por escrito,
 * el programa distribuido con arreglo a la Licencia se distribuye «TAL CUAL»,
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ni expresas ni implícitas.
 * Véase la Licencia en el idioma concreto que rige los permisos y limitaciones
 * que establece la Licencia.
 */
function(e){var t={};e.extend(e.rup.iniRup,e.rup.rupSelectorObjectConstructor("rup_button",t)),e.fn.rup_button("extend",{addButtonToDropdown:function(e){}}),e.fn.rup_button("extend",{_doDropdownListById:function(e,t,i){var r=jQuery("#"+i.dropdownListId);i.$dropdownList=r,t.append(r),e.on("click.rup_dopdown",function(e){r.toggleClass("open"),e.stopPropagation()}),r.on("click.rup_dopdown",function(e){e.stopPropagation()}),jQuery(document).on("click.rup_dopdown.close",function(){r.removeClass("open")})},_doDropdownByDialog:function(e,t,i){var r=jQuery("#"+i.dropdownDialog).rup_dialog(i.dropdownDialogConfig);jQuery.extend(i.dropdownDialogConfig,{autoOpen:!1,position:{my:"right top",at:"right bottom",of:t}}),r.parent().addClass("rup-dropdown-dialog"),e.on("click",function(){r.rup_dialog("open")})},_doDropdownByButtons:function(t,i,r){var a,n=this,o=e("<ul>"),s=r.buttons;o.attr({id:n.attr("id")+"_dropdownList"}).addClass("rup-dropdown-option-list rup-toolbar_menuButtonContainer");for(var l=0;l<s.length;l++)a=e("<li>"),n._addButtonToDropdown(a,s[l]),o.append(a);t.on("click.rup_dopdown",function(e){o.toggleClass("open"),e.stopPropagation()}),o.on("click.rup_dropdown",function(e){e.stopPropagation()}),jQuery(document).on("click.rup_dopdown.close",function(){o.removeClass("open")}),i.append(o)},_addButtonToDropdown:function(t,i,r){var a,n="";return void 0===i.id?(alert("El atributo ID es obligatorio en los MButtons."),n=null):(a=i.id,0!==a.indexOf(e(this).attr("id"))&&(a=e(this).attr("id")+"##"+i.id),n=e("<a/>").attr("id",a).text(e.rup.i18nParse(r,i.i18nCaption)).addClass("rup-toolbar_button"),void 0===i.css&&(i.css="rup-toolbar_menuButtonIcon"),n.button().button("option","icons",{primary:i.css,secondary:null})),t.append(n),this._setKeyDown(n),i.click&&n.click({i18nCaption:i.i18nCaption},i.click),n},_setKeyDown:function(t){t.bind("keydown",function(t){var i,r=e(t.currentTarget),a=r.parent();switch(t.keyCode){case e.ui.keyCode.TAB:if(!t.shiftKey&&(i=r.next().attr("id")!==a.attr("id")+"-rightButtons"?r.next(":focusable"):r.next().children(":focusable:first"),1===i.size()))return i.focus(),e.rup_toolbar.focusedExternally[a.attr("id")]=!0,!1}})}}),e.fn.rup_button("extend",{_init:function(t){var i,r,a,n=e.extend(!0,{},e.fn.rup_button.defaults,t[0]),o=this;if(void 0===n.dropdown||n.dropdown===!1)o.button(n),o.addClass("rup-button");else{e.extend(!0,n.dropdown,e.fn.rup_button.dropdown_defaults,t[0].dropdown),a=n.dropdown,o.addClass("rup-button rup-dropdown"),r=jQuery("<div>").attr("class","rup-dropdown-btn-group"),r=o.wrap(r).parent(),a.$container=r,o.button({}),o.addClass("rup-dropdown");var s=jQuery("<button>").attr({type:"button",id:o.prop("id")+"_dropdown"}).text("Administración de filtros").button({icons:{primary:a.dropdownIcon},text:!1}).addClass("rup-dropdown-button");if(o.after(s),a.dropdownListId)i=jQuery("#"+a.dropdownListId),a.$dropdownList=i,r.append(i),s.on("click.rup_dopdown",function(e){i.toggleClass("open"),e.stopPropagation()}),i.on("click.rup_dopdown",function(e){e.stopPropagation()}),jQuery(document).on("click.rup_dopdown.close",function(){i.removeClass("open")});else if(a.dropdownDialog){jQuery.extend(a.dropdownDialogConfig,{autoOpen:!1,position:{my:"right top",at:"right bottom",of:r}});var l=jQuery("#"+a.dropdownDialog).rup_dialog(a.dropdownDialogConfig);l.parent().addClass("rup-dropdown-dialog"),s.on("click",function(){l.rup_dialog("open")})}else a.buttons&&o._doDropdownByButtons(s,r,a)}}}),e.fn.rup_button.defaults={dropdown:!1},e.fn.rup_button.dropdown_defaults={dropdownIcon:"ui-icon-triangle-1-s",dropdownListId:void 0,dropdownDialog:void 0,dropdownDialogConfig:{type:e.rup.dialog.DIV}}}(jQuery),/*!
 * Copyright 2013 E.J.I.E., S.A.
 *
 * Licencia con arreglo a la EUPL, Versión 1.1 exclusivamente (la «Licencia»);
 * Solo podrá usarse esta obra si se respeta la Licencia.
 * Puede obtenerse una copia de la Licencia en
 *
 *      http://ec.europa.eu/idabc/eupl.html
 *
 * Salvo cuando lo exija la legislación aplicable o se acuerde por escrito,
 * el programa distribuido con arreglo a la Licencia se distribuye «TAL CUAL»,
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ni expresas ni implícitas.
 * Véase la Licencia en el idioma concreto que rige los permisos y limitaciones
 * que establece la Licencia.
 */
function($){$.widget("$.rup_feedback",{options:{type:null,imgClass:null,delay:null,fadeSpeed:null,gotoTop:!0,block:!0,closeLink:!0,_idFeedback:null,_divClose:null},_setOption:function(e,t){var i=this.options,r=this.element;switch(e){case"type":null!==t?(r.removeClass(i.imgClass+" rup-feedback_image_"+i.type),r.addClass("rup-feedback_image rup-feedback_image_"+t)):r.removeClass("rup-feedback_image rup-feedback_image_"+i.type);break;case"imgClass":null!==t?(r.removeClass(i.imgClass+" rup-feedback_image rup-feedback_image_"+i.type),r.addClass(t)):r.removeClass(i.imgClass);break;case"closeLink":t?this._addCloseLink():$("#"+this.options._idFeedback+"_closeDiv").remove()}delete i,delete r,$.Widget.prototype._setOption.apply(this,arguments)},_create:function(){var e=this.options;e._idFeedback=this.element.addClass("rup-feedback ui-widget ui-widget-content ui-corner-all").addClass(null!=e.imgClass?e.imgClass:null!=e.type?"rup-feedback_image rup-feedback_image_"+e.type:"").attr({role:"alert"}).css("display",e.block?"block":"none").css("visibility","hidden").context.id,e._divClose=$("<div />").html($.rup.i18nParse($.rup.i18n.base,"rup_global.cerrar")).attr("id",e._idFeedback+"_closeDiv").attr("title",$.rup.i18nParse($.rup.i18n.base,"rup_feedback.closingLiteral")).addClass("rup-feedback_closeLink"),e.message&&this.set(e.message,e.type,e.imgClass),delete e},_addCloseLink:function(){var e=this.options;e._divClose.click(function(){$("#"+e._idFeedback).rup_feedback("close")}),this.element.prepend(e._divClose),delete e},destroy:function(){var e=this.options;this.element.removeClass().removeAttr("role").css("cssText","").html("").stop().animate({opacity:"100"}),delete e,$.Widget.prototype.destroy.apply(this,arguments)},set:function(e,t,i){var r=this.element,a=this.options;r.stop().animate({opacity:"100"}),void 0!=t?(r.removeClass(a.imgClass),null!=a.type?r.removeClass("rup-feedback_image_"+a.type):r.addClass("rup-feedback_image"),r.addClass("rup-feedback_image_"+t),a.type=t):null===t&&(r.removeClass("rup-feedback_image rup-feedback_image_"+a.type),a.type=null),void 0!=i&&(null!=a.imgClass&&r.removeClass(a.imgClass),r.addClass(i),a.imgClass=i),$("#"+a._idFeedback+"_content").remove(),r.append($("<div/>").attr("id",a._idFeedback+"_content").html(e)),a.closeLink&&this._addCloseLink(),this.show(),a.gotoTop&&$("html, body").animate({scrollTop:"0px"},0),null!=a.delay&&this.hide(),delete r,delete a},hide:function(delay,fadeSpeed){var opciones=this.options,element=this.element;void 0==delay&&(delay=opciones.delay),void 0==fadeSpeed&&(fadeSpeed=opciones.fadeSpeed),element.delay(delay).fadeOut(eval(fadeSpeed),function(){$("#"+opciones._idFeedback).rup_feedback("close",!0)}),delete opciones,delete element},close:function(e){var t=this.element;t.css("display",this.options.block?"block":"none"),t.css("visibility","hidden"),void 0===e&&t.empty(),delete t},show:function(){var e=this.element;e.css("display","block"),e.css("visibility","visible"),this.element.find("[title]").rup_tooltip({position:{at:"bottom center",my:"top center"},applyToPortal:!0}),delete e,jQuery(this.element).triggerHandler("rupFeedback_show")}})}(jQuery),/*!
 * Copyright 2013 E.J.I.E., S.A.
 *
 * Licencia con arreglo a la EUPL, Versión 1.1 exclusivamente (la «Licencia»);
 * Solo podrá usarse esta obra si se respeta la Licencia.
 * Puede obtenerse una copia de la Licencia en
 *
 *      http://ec.europa.eu/idabc/eupl.html
 *
 * Salvo cuando lo exija la legislación aplicable o se acuerde por escrito,
 * el programa distribuido con arreglo a la Licencia se distribuye «TAL CUAL»,
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ni expresas ni implícitas.
 * Véase la Licencia en el idioma concreto que rige los permisos y limitaciones
 * que establece la Licencia.
 */
function(e){var t={};e.extend(e.rup.iniRup,e.rup.rupSelectorObjectConstructor("rup_form",t)),e.fn.rup_form("extend",{ajaxFormSubmit:function(t){var i=this;e.set_uda_ajax_mode_on(),i.ajaxSubmit(t)},ajaxSubmit:function(t){var i=this,r=e.extend(!0,{},e.fn.rup_form.defaults,t);e.set_uda_ajax_mode_on(),i.rup_form("configureOptions",r),r.formValidationRequired?(i.rup_validate(r.validate),i.valid()&&e(this).ajaxSubmit(r)):e(this).ajaxSubmit(r)},destroy:function(){var t=this;e.removeData(t[0]),t.ajaxFormUnbind(),t.unbind()},formSerialize:function(){var t,i,r,a=this,t=[];return e.each(a.formToArray(),function(a,n){i=e("[name='"+n.name+"']",self),r=i.attr("ruptype"),void 0!==r?(n.value=i["rup_"+r]("getRupValue"),t.push(n)):t.push(n)}),e.param(t)},formToJson:function(){return form2object(this[0])},fieldSerialize:function(){var t=[];return this.each(function(){var i=e(this).attr("name");if(i){var r=e(this).rup_form("fieldValue");if(r&&r.constructor==Array)for(var a=0,n=r.length;a<n;a++)t.push({name:i,value:r[a]});else null!==r&&"undefined"!=typeof r&&t.push({name:e(this).attr("name"),value:r})}}),e.param(t)},fieldValue:function(){var t,i=[];return this.each(function(){var r=e(this).attr("ruptype");void 0!==r?(t=e(this)["rup_"+r]("getRupValue"),i.push(t)):e.merge(i,e(this).fieldValue())}),i},resetForm:function(){return this.each(function(){e(this).resetForm()})},clearForm:function(t){return this.each(function(){e("input,select,textarea",this).rup_form("clearFields",t)})},clearFields:function(t){return this.each(function(){var i=e(this).attr("ruptype");void 0===i||"combo"!==i?e(this).clearFields(t):e(this).rup_combo("clear")})},configureOptions:function(t){var i,r,a,n=this;null!==t.url&&n.attr("action",t.url),i=e("input:file",n).length>0,t.useJsonIfPossible&&!i&&(t.contentType="application/json"),r=t.beforeSend,t.beforeSend=function(i,a){var o=!0;if(e.isFunction(r)&&(o=r.call(this,i,a)),o===!1)return!1;if("skip"!==o&&a.contentType.indexOf("application/json")!==-1){var s=n.rup_form("formToJson");null!==t.multimodel&&(i.setRequestHeader("RUP_MULTI_ENTITY","true"),s.rupEntityMapping=t.multimodel),void 0!==a.extraData&&null!==a.extraData&&e.extend(s,a.extraData),a.data=e.toJSON(s)}},a=t.beforeSubmit,t.beforeSubmit=function(i,r,n){var o,s,l;return(!e.isFunction(a)||a.call(this,i,r,n)!==!1)&&(l=jQuery("input:file",r).length>0,void((!e.rup.browser.xhrFileUploadSupport&&l||n.iframe===!0)&&(o=void 0!==t.type?t.type:n.type,e.inArray(o.toUpperCase(),e.rup.IFRAME_ONLY_SUPPORTED_METHODS)===-1&&(n.extraData=e.extend({},n.extraData,{_method:o.toUpperCase()})),n.url=e.rup_utils.setNoPortalParam(n.url),n.extraData=e.extend({},n.extraData,{_emulate_iframe_http_status:"true"}),n.url=n.url+(null===n.url.match("\\?")?"?":"&")+"_emulate_iframe_http_status=true",s=n.error,n.error=function(t,i,r){var a=e.rup.rupAjaxDefaultError(t,i,r);null!=s?e(s(t,i,r)):a&&e.rup.showErrorToUser(a)})))},t.formValidationRequired=void 0!==t.validate,t.formValidationRequired&&(void 0===t.error&&(t.error=function(t,i,r,a){try{var o=jQuery.parseJSON(t.responseText);n.validate().invalid=o.rupErrorFields,n.validate().submited=o.rupErrorFields,n.validate().showErrors(o.rupErrorFields),void 0!==o.rupFeedback&&void 0!==n.validate().settings.feedback&&n.validate().settings.feedback.rup_feedback("set",e.rup_utils.printMsg(o.rupFeedback.message),void 0!==o.rupFeedback.imgClass?o.rupFeedback.imgClass:null)}catch(s){n.validate().settings.feedback.rup_feedback("set",t.responseText,"error")}}),t.validate.submitHandler=function(t){jQuery(t).ajaxSubmit(e(t).data("ajaxSettings"))},t.validate.feedback=t.feedback),n.data("ajaxSettings",t),n.data("settings",t)}}),e.fn.rup_form("extend",{}),e.fn.rup_form("extend",{_init:function(t){var i,r=this;i=e.extend(!0,{},e.fn.rup_form.defaults,t[0]),r.addClass("rup_form"),r.attr("ruptype","form"),r.rup_form("configureOptions",i),i.formValidationRequired?r.rup_validate(i.validate):r.ajaxForm(i),r.data(r[0],"settings",i)}}),e.fn.rup_form.defaults={ajaxForm:null,feedback:null,multimodel:null,useJsonIfPossible:!0}}(jQuery),/*!
 * Copyright 2013 E.J.I.E., S.A.
 *
 * Licencia con arreglo a la EUPL, Versión 1.1 exclusivamente (la «Licencia»);
 * Solo podrá usarse esta obra si se respeta la Licencia.
 * Puede obtenerse una copia de la Licencia en
 *
 *      http://ec.europa.eu/idabc/eupl.html
 *
 * Salvo cuando lo exija la legislación aplicable o se acuerde por escrito, 
 * el programa distribuido con arreglo a la Licencia se distribuye «TAL CUAL»,
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ni expresas ni implícitas.
 * Véase la Licencia en el idioma concreto que rige los permisos y limitaciones
 * que establece la Licencia.
 */
function(e){var t={};e.extend(e.rup.iniRup,e.rup.rupSelectorObjectConstructor("rup_grid",t)),e.fn.rup_grid("extend",{addRowData:function(t,i,r,a){var n=e(this)[0].id;null===e("#"+n+" #separadorAadidos").html()&&(e("#"+n+" tr:first-child").after(e("#"+n+" tr:first-child").clone(!1).css("display","none").css("height","").attr("id","separadorAadidos")),e.each(e("#"+n+" #separadorAadidos td"),function(t,i){e(this).html("").attr("class","tdAddSeparator")}),e("#"+n+" #separadorAadidos").addClass("trAddSeparator"),e("#"+n+" #separadorAadidos").css("display","")),e(this).jqGrid("addRowData",t,i,r,a),e("#"+n+" #"+t).addClass("addElement")},delRowData:function(t){e(this).jqGrid("delRowData",t),e(this).jqGrid("getDataIDs").length===Number(e(this).jqGrid("getGridParam","rowNum"))&&e("#"+e(this)[0].id+" #separadorAadidos").remove()},setRowData:function(t,i,r){e(this).jqGrid("setRowData",t,i,r),this._tooltip(t)},getRowData:function(t){return e(this).jqGrid("getRowData",t)},setSelection:function(t,i){e(this).jqGrid("setSelection",t,i)},resetSelection:function(){var t=this;!t[0].rup_gridProps.hasMaint&&t[0].rup_gridProps.multiselect&&(e(t).data("selectedRows",new Array),e(t).data("selectedRowsCont",0),e(t).data("rowsSelectedPage",0),e(t).data("allSelected",!1),e("#"+t[0].rup_gridProps.pagerName+"_left").html(e(t).data("selectedRowsCont")+" "+e.rup.i18nParse(e.rup.i18n.base,"rup_grid.pager.selected"))),this[0].rup_gridProps.allPksArray=[],e.isFunction(this[0].rup_gridProps.resetSelection)?this[0].rup_gridProps.resetSelection.call():e(this).jqGrid("resetSelection")},getDataIDs:function(){return e(this).jqGrid("getDataIDs")},getGridParam:function(t){return e(this).jqGrid("getGridParam",t)},setGridParam:function(t){e(this).jqGrid("setGridParam",t)},clearGridData:function(t){e(this).jqGrid("clearGridData",t)},getSelectedRows:function(){var t,i=e(this).jqGrid("getGridParam","multiselect");return i?t=jQuery.map(this[0].rup_gridProps.allPksArray,function(e,t){return 0===e.indexOf("/")?e.substring(1):e}):[e(this).jqGrid("getGridParam","selrow")]},reloadGrid:function(t,i){var r=this,a=r[0].rup_gridProps;e("#lui_"+r.attr("id")).show(),e("#load_"+r.attr("id")).show(),void 0!==t&&(a.systemReloadGridFunction=function(){t.call(this,i),r[0].rup_gridProps.systemReloadGridFunction=void 0}),window.setTimeout(function(){r.trigger("reloadGrid")},0,t,i)},editRow:function(t,i,r,a,n,o,s,l,d){e(this).jqGrid("editRow",t,i,r,a,n,o,s,l,d)},saveRow:function(t,i,r,a,n,o,s){function l(t,i){for(var r,a=e("tr#"+t+" select.rup_combo",this),o=0;o<a.length;o+=1)r=e(a[o]).rup_combo("label"),e(a[o]).parent().html(r);n&&n.call(t,i)}e(this).jqGrid("saveRow",t,i,r,a,l,o,s),this._tooltip(t)},restoreRow:function(t,i){for(var r,a=e("tr#"+t+" select.rup_combo",this),n=e(this).jqGrid("getGridParam","savedRow"),o=0;o<a.length;o+=1)r=e(a[o]).rup_combo("value"),n[0][e(a[o]).attr("name")]=r;e(this).jqGrid("restoreRow",t,i),this._tooltip(t)},getColModel:function(){return e(this).jqGrid("getGridParam","colModel")},GridToForm:function(t,i){e(this).jqGrid("GridToForm",t,i)},FormToGrid:function(t,i,r,a){e(this).jqGrid("FormToGrid",t,i,r,a)},isMultiselect:function(){return e(this).jqGrid("getGridParam","multiselect")},getCol:function(t,i){return e(this).jqGrid("getCell",t,i)},isEditable:function(){return this[0].rup_gridProps.editable},getEditingRowData:function(t){var i,r=this.jqGrid("getInd",t,!0),a={},n=this;if(r!==!1)return e("td",r).each(function(t){n.jqGrid("getGridParam","colModel")[t]&&(i=e(":first",this).attr("type"),("checkbox"!==i||"checkbox"===i&&e(":first",this).is(":checked"))&&(a[n.jqGrid("getGridParam","colModel")[t].name]=e(":first",this).val()))}),a},isEditing:function(){for(var t=this.jqGrid("getDataIDs"),i=0;i<t.length;i++)if("1"===e(this.jqGrid("getInd",t[i],!0)).attr("editable"))return!0;return!1},reorderColumns:function(t){e.isFunction(this[0].rup_gridProps.onAfterDragAndDrop)&&this[0].rup_gridProps.onAfterDragAndDrop.call(this,t)}}),e.fn.rup_grid("extend",{_init:function(t){if(t.length>1)e.rup.errorGestor(e.rup.i18nParse(e.rup.i18n.base,"rup_global.initError")+e(this).attr("id"));else{var i=e.extend(!0,{},e.fn.rup_grid.defaults,t[0]);i.groupingView=e.extend({},e.fn.rup_grid.defaults.groupingView,i.groupingView);var r,a,n,o,s,l,d,u,c,p,h,f,g,m,v,b,_,y,x,w,j,k,C=this,D=[2];o=i.beforeRequest,i.beforeRequest=function(){if(void 0!==o&&null!==o)if("function"==typeof o){if(o()===!1)return!1}else if("object"==typeof o)return(void 0===o.pre||o.pre()!==!1)&&(e("#"+e(this).attr("id")).data("defaultEventFunctions").beforeRequest_default()!==!1&&(void 0===o.post||o.post()!==!1));return e("#"+e(this).attr("id")).data("defaultEventFunctions").beforeRequest_default()},l=i.serializeGridData,i.serializeGridData=function(t){var i;if(void 0!==l&&null!==l)if("function"==typeof l){if(l(t)===!1)return!1}else if("object"==typeof l)return(void 0===l.pre||(i=l.pre(t),i!==!1))&&(i=e("#"+e(this).attr("id")).data("defaultEventFunctions").serializeGridData_default(t,i),i!==!1&&(void 0!==l.post&&(i=l.post(t,i)),i));return e("#"+e(this).attr("id")).data("defaultEventFunctions").serializeGridData_default(t)},s=i.loadBeforeSend,i.loadBeforeSend=function(t,i){if(void 0!==s&&null!==s)if("function"==typeof s){if(s(t,i)===!1)return!1}else if("object"==typeof s)return(void 0===s.pre||s.pre(t,i)!==!1)&&(e("#"+e(this).attr("id")).data("defaultEventFunctions").loadBeforeSend_default(t,i)!==!1&&(void 0===s.post||s.post(t,i)!==!1));return e("#"+e(this).attr("id")).data("defaultEventFunctions").loadBeforeSend_default(t,i)},d=i.loadError,i.loadError=function(t,i,r){if(void 0!==d&&null!==d)if("function"==typeof d){if(d(t,i,r)===!1)return!1}else if("object"==typeof d)return(void 0===d.pre||d.pre(t,i,r)!==!1)&&(e("#"+e(this).attr("id")).data("defaultEventFunctions").loadError_default(t,i,r)!==!1&&(void 0!==d.post&&d.post(t,i,r),!1));e(e("#"+e(this).attr("id")).data("defaultEventFunctions").loadError_default(t,i,r))},u=i.beforeProcessing,i.beforeProcessing=function(t,i,r){if(void 0!==u&&null!==u)if("function"==typeof u){if(u(t,i,r)===!1)return!1}else if("object"==typeof u)return(void 0===u.pre||u.pre(t,i,r)!==!1)&&(e("#"+e(this).attr("id")).data("defaultEventFunctions").beforeProcessing_default(t,i,r)!==!1&&(void 0!==u.post&&u.post(t,i,r),!1));e("#"+e(this).attr("id")).data("defaultEventFunctions").beforeProcessing_default(t,i,r)},c=i.gridComplete,i.gridComplete=function(){var t;if(void 0!==c&&null!==c)if("function"==typeof c){if(c()===!1)return!1}else if("object"==typeof c)return(void 0===c.pre||c.pre()!==!1)&&(e("#"+e(this).attr("id")).data("defaultEventFunctions").gridComplete_default()!==!1&&(void 0!==c.post&&c.post(),!1));e("#"+e(this).attr("id")).data("defaultEventFunctions").gridComplete_default(),e("#"+e(this).attr("id")+" [title]").each(function(t,i){var r=e(i);r.attr("grid_tooltip",r.attr("title")).removeAttr("title")}),t=jQuery("#"+e(this).attr("id")+" tbody:first"),t.on("mousestop",{delay:500},function(i,r){var a=e.rup_utils.elementFromPoint(r.clientX,r.clientY,!0),n=e(a);!n.attr("rup_tooltip")&&n.attr("grid_tooltip")&&(n.attr("title",n.attr("grid_tooltip")),n.rup_tooltip({show:{delay:0},position:{viewport:t,adjust:{method:"flip"}}}),n.triggerHandler("mouseenter"),n.rup_tooltip("option","show.delay",500))})},p=i.loadComplete,i.loadComplete=function(t){if(void 0!==p&&null!==p)if("function"==typeof p){if(p(t)===!1)return!1}else if("object"==typeof p)return(void 0===p.pre||p.pre(t)!==!1)&&(e("#"+e(this).attr("id")).data("defaultEventFunctions").loadComplete_default(t)!==!1&&(void 0!==p.post&&p.post(t),!1));e("#"+e(this).attr("id")).data("defaultEventFunctions").loadComplete_default(t);var i=C[0].rup_gridProps.systemReloadGridFunction;void 0!==i&&C[0].rup_gridProps.systemReloadGridFunction.call()},h=i.afterInsertRow,i.afterInsertRow=function(t,i,r){if(void 0!==h&&null!==h)if("function"==typeof h){if(h(t,i,r)===!1)return!1}else if("object"==typeof h)return(void 0===h.pre||h.pre(t,i,r)!==!1)&&(e("#"+e(this).attr("id")).data("defaultEventFunctions").afterInsertRow_default(t,i,r)!==!1&&(void 0!==h.post&&h.post(t,i,r),!1));e("#"+e(this).attr("id")).data("defaultEventFunctions").afterInsertRow_default(t,i,r)},f=i.beforeSelectRow,i.beforeSelectRow=function(t,i){if(void 0!==f&&null!==f)if("function"==typeof f){if(f(t,i)===!1)return!1}else if("object"==typeof f)return(void 0===f.pre||f.pre(t,i)!==!1)&&(e("#"+e(this).attr("id")).data("defaultEventFunctions").beforeSelectRow_default(t,i)!==!1&&(void 0===f.post||f.post(t,i)!==!1));return e("#"+e(this).attr("id")).data("defaultEventFunctions").beforeSelectRow_default(t,i)},g=i.onCellSelect,i.onCellSelect=function(t,i,r,a){if(void 0!==g&&null!==g)if("function"==typeof g){if(g(t,i,r,a)===!1)return!1}else if("object"==typeof g)return(void 0===g.pre||g.pre(t,i,r,a)!==!1)&&(e("#"+e(this).attr("id")).data("defaultEventFunctions").onCellSelect_default(t,i,r,a)!==!1&&(void 0!==g.post&&g.post(t,i,r,a),!1));e("#"+e(this).attr("id")).data("defaultEventFunctions").onCellSelect_default(t,i,r,a)},m=i.ondblClickRow,i.ondblClickRow=function(t,i,r,a){if(void 0!==m&&null!==m)if("function"==typeof m){if(m(t,i,r,a)===!1)return!1}else if("object"==typeof m)return(void 0===m.pre||m.pre(t,i,r,a)!==!1)&&(e("#"+e(this).attr("id")).data("defaultEventFunctions").ondblClickRow_default(t,i,r,a)!==!1&&(void 0!==m.post&&m.post(t,i,r,a),!1));e("#"+e(this).attr("id")).data("defaultEventFunctions").ondblClickRow_default(t,i,r,a)},v=i.onHeaderClick,i.onHeaderClick=function(t){if(void 0!==v&&null!==v)if("function"==typeof v){if(v(t)===!1)return!1}else if("object"==typeof v)return(void 0===v.pre||v.pre(t)!==!1)&&(e("#"+e(this).attr("id")).data("defaultEventFunctions").onHeaderClick_default(t)!==!1&&(void 0!==v.post&&v.post(t),!1));e("#"+e(this).attr("id")).data("defaultEventFunctions").onHeaderClick_default(t)},b=i.onPaging,i.onPaging=function(t){if(e(".ui-tooltip").hide(),"records"===t&&!C[0].rup_gridProps.hasMaint&&C[0].rup_gridProps.multiselect&&void 0!==e(C).data("selectedRows")&&e(C).data("selectedRows").length>0)return e("#lui_"+C.attr("id")).hide(),e("#load_"+C.attr("id")).hide(),e.rup_messages("msgConfirm",{message:e.rup.i18nParse(e.rup.i18n.base,"rup_maint.checkSelectedElems"),title:e.rup.i18nParse(e.rup.i18n.base,"rup_maint.changes"),OKFunction:function(){e(C).data("selectedRows",new Array),e(C).data("selectedRowsCont",0),e(C).data("rowsSelectedPage",0),e("#"+C[0].rup_gridProps.pagerName+"_left").html(e(C).data("selectedRowsCont")+" "+e.rup.i18nParse(e.rup.i18n.base,"rup_grid.pager.selected")),C.trigger("reloadGrid")}}),"stop";if("user"===t){var i=parseInt(e("#gbox_"+e(this).attr("id")).find(".pagControls > input").val()),r=parseInt(e("#gbox_"+e(this).attr("id")).find(".pagControls > input").next().text());if(0==i&&(r=1,i=2),i>r){var a=e(this).rup_grid("getGridParam");a.page=r,e(this).rup_grid("setGridParam",a)}}if(e("#lui_"+C.attr("id")).show(),e("#load_"+C.attr("id")).show(),void 0!==b&&null!==b)if("function"==typeof b){if(b(t)===!1)return e("#lui_"+C.attr("id")).hide(),e("#load_"+C.attr("id")).hide(),"stop"}else if("object"==typeof b)return void 0!==b.pre&&b.pre(t)===!1?(e("#lui_"+C.attr("id")).hide(),e("#load_"+C.attr("id")).hide(),"stop"):e("#"+e(this).attr("id")).data("defaultEventFunctions").onPaging_default(t)===!1?(e("#lui_"+C.attr("id")).hide(),e("#load_"+C.attr("id")).hide(),"stop"):void 0!==b.post&&b.post(t)===!1?(e("#lui_"+C.attr("id")).hide(),e("#load_"+C.attr("id")).hide(),"stop"):"";window.setTimeout(function(){C.trigger("reloadGrid")},0)},w=i.onRightClickRow,i.onRightClickRow=function(t,i,r,a){if(void 0!==w&&null!==w)if("function"==typeof w){if(w(t,i,r,a)===!1)return!1}else if("object"==typeof w)return(void 0===w.pre||w.pre(t,i,r,a)!==!1)&&(e("#"+e(this).attr("id")).data("defaultEventFunctions").onRightClickRow_default(t,i,r,a)!==!1&&(void 0!==w.post&&w.post(t,i,r,a),!1));e("#"+e(this).attr("id")).data("defaultEventFunctions").onRightClickRow_default(t,i,r,a)},_=i.onSelectAll,i.onSelectAll=function(t,i){if(void 0!==_&&null!==_)if("function"==typeof _){if(_(t,i)===!1)return!1}else if("object"==typeof _)return(void 0===_.pre||_.pre(t,i)!==!1)&&(e("#"+e(this).attr("id")).data("defaultEventFunctions").onSelectAll_default(t,i)!==!1&&(void 0!==_.post&&_.post(t,i),!1));e("#"+e(this).attr("id")).data("defaultEventFunctions").onSelectAll_default(t,i)},y=i.onSelectRow,i.onSelectRow=function(t,i){if(void 0!==y&&null!==y)if("function"==typeof y){if(y(t,i)===!1)return!1}else if("object"==typeof y)return(void 0===y.pre||y.pre(t,i)!==!1)&&(e("#"+e(this).attr("id")).data("defaultEventFunctions").onSelectRow_default(t,i)!==!1&&(void 0!==y.post&&y.post(t,i),!1));e("#"+e(this).attr("id")).data("defaultEventFunctions").onSelectRow_default(t,i)},x=i.onSortCol,i.onSortCol=function(t,i,r){if(e("#lui_"+C.attr("id")).show(),e("#load_"+C.attr("id")).show(),void 0!==x&&null!==x)if("function"==typeof x){if(x(t,i,r)===!1)return e("#lui_"+C.attr("id")).hide(),e("#load_"+C.attr("id")).hide(),"stop"}else if("object"==typeof x)return void 0!==x.pre&&x.pre(t,i,r)===!1?(e("#lui_"+C.attr("id")).hide(),e("#load_"+C.attr("id")).hide(),"stop"):"stop"===e("#"+e(this).attr("id")).data("defaultEventFunctions").onSortCol_default(t,i,r)?(e("#lui_"+C.attr("id")).hide(),e("#load_"+C.attr("id")).hide(),!1):void 0!==x.post&&x.post(t,i,r)===!1?(e("#lui_"+C.attr("id")).hide(),e("#load_"+C.attr("id")).hide(),"stop"):"stop";return e("#"+e(this).attr("id")).data("defaultEventFunctions").onSortCol_default(t,i,r),"stop"},j=i.resizeStart,i.resizeStart=function(t,i){if(void 0!==j&&null!==j)if("function"==typeof j){if(j(t,i)===!1)return!1}else if("object"==typeof j)return(void 0===j.pre||j.pre(t,i)!==!1)&&(e("#"+e(C).attr("id")).data("defaultEventFunctions").resizeStart_default(t,i)!==!1&&(void 0!==j.post&&j.post(t,i),!1));e("#"+e(C).attr("id")).data("defaultEventFunctions").resizeStart_default(t,i)},k=i.resizeStop,i.resizeStop=function(t,i){if(void 0!==k&&null!==k)if("function"==typeof k){if(k(t,i)===!1)return!1}else if("object"==typeof k)return(void 0===k.pre||k.pre(t,i)!==!1)&&(e("#"+e(C).attr("id")).data("defaultEventFunctions").resizeStop_default(t,i)!==!1&&(void 0!==k.post&&k.post(t,i),!1));e("#"+e(C).attr("id")).data("defaultEventFunctions").resizeStop_default(t,i)},e("#"+e(this).attr("id")).data("defaultEventFunctions",{beforeRequest_default:function(){var t=e(this).rup_grid("getGridParam","url");return e(this).rup_grid("setGridParam",{url:e.rup_utils.setNoPortalParam(t)}),!0},serializeGridData_default:function(e){return void 0!==e.page&&null!==e.page&&Number(e.page)>C.rup_grid("getGridParam","lastpage")&&C.rup_grid("getGridParam","lastpage")>0&&(e.page=C.rup_grid("getGridParam","lastpage")),e},loadBeforeSend_default:function(e,t){return e.setRequestHeader("JQGridModel","true"),e.setRequestHeader("Content-Type","application/json"),!0},loadError_default:function(t,i,r){if(C.rup_grid("clearGridData"),e.data(C[0],"maintName")&&null!==e.data(C[0],"maintName")&&""!==e.data(C[0],"maintName")){e("#"+e.data(C[0],"maintName"))[0].prop.feedback.rup_feedback("option","closeLink",!0),e("#"+e.data(C[0],"maintName"))[0].prop.feedback.rup_feedback("option","delay",null);var a=e.rup.i18nParse(e.rup.i18n.base,"rup_ajax.httpStatus"+t.status);a.indexOf("rup_ajax.")!==-1&&(a=e.rup.i18nParse(e.rup.i18n.base,"rup_grid.errors.errorOnGet")),e("#"+e.data(C[0],"maintName"))[0].prop.feedback.rup_feedback("set",a,"error"),e("#"+e.data(C[0],"maintName"))[0].prop.feedback.rup_feedback("option","delay",1e3)}else e("#rup_feedback_"+C[0].id).rup_feedback("option","closeLink",!0),e("#rup_feedback_"+C[0].id).rup_feedback("option","delay",null),e("#rup_feedback_"+C[0].id).rup_feedback("set",e.rup.i18nParse(e.rup.i18n.base,"rup_grid.errors.errorOnGet"),"error"),e("#rup_feedback_"+C[0].id).rup_feedback("option","delay",1e3)},beforeProcessing_default:function(e,t,i){},gridComplete_default:function(){var t=null,i=!0;if(e("#rup_feedback_"+C[0].id)&&e("#rup_feedback_"+C[0].id).rup_feedback("close"),e("#"+C[0].id+" tr:nth-child(even)").addClass("rup-grid_evenRow"),e("#"+C[0].id+" tr:nth-child(odd)").addClass("rup-grid_oddRow"),e(".ui-jqgrid tr.jqgrow td").addClass("rup-grid_cellPadding"),0===C.jqGrid("getDataIDs").length){if(e(e.find("#cb_"+C.attr("id"))[0]).attr("disabled",!0),e(C).prev().remove(),e(C.jqGrid("getGridParam","pager")).hide(),0===e("#RUP_GRID_"+C[0].id+"_noRecords").length){var r='<tr class="ui-widget-content jqgrow ui-row-ltr" role="row" id="RUP_GRID_'+C[0].id+'_noRecords" aria-selected="false">';r+='<td aria-describedby="RUP_GRID_'+C[0].id+'_NO_REGISTROS" title="'+e.rup.i18nParse(e.rup.i18n.base,"rup_grid.noRecordsFound")+'" style="border:0;padding-left: 0.5em ! important;text-align: left;width:'+e("#gview_"+e(C).attr("id")).width()+'px;background:white;" role="gridcell">',r+=e.rup.i18nParse(e.rup.i18n.base,"rup_grid.noRecordsFound"),r+="</td></tr>",C.before(r),e('[aria-describedby="RUP_GRID_'+C[0].id+'_NO_REGISTROS"]').rup_tooltip({position:{my:"center",at:"center"}})}}else if(e(e.find("#cb_"+C.attr("id"))[0]).attr("disabled",!1),e("#RUP_GRID_"+C[0].id+"_noRecords").length&&e("#RUP_GRID_"+C[0].id+"_noRecords").remove(),e(C.jqGrid("getGridParam","pager")).show(),e.isFunction(C[0].rup_gridProps.onAfterGridComplete)&&C[0].rup_gridProps.onAfterGridComplete.call(C,t,i),!C[0].rup_gridProps.hasMaint&&C[0].rup_gridProps.multiselect&&!e.isFunction(C[0].rup_gridProps.onAfterGridComplete)){var a=e(C).data("selectedRows"),n=e(C).data("selectedRowsCont"),o=!1,s=C.rup_grid("getDataIDs"),l=C.rup_grid("getGridParam","page"),d=e(C).data("selectedRows"),u=new Array;void 0!==d&&void 0!==d[l-1]&&(o=!0,u=e(C).data("selectedRows")[l-1]);for(var c=0;c<s.length;c++)e.inArray(s[c],u)!==-1?C.rup_grid("setSelection",s[c],!0):o||e(C).data("allSelected")!==!0||C.rup_grid("setSelection",s[c],!0);e(C).data("selectedRows",a),e(C).data("selectedRowsCont",n),e(C).data("rowsSelectedPage",C.find('[aria-describedby="'+C.attr("id")+'_cb"] input:checked').length),e("#"+C[0].rup_gridProps.pagerName+"_left").html(e(C).data("selectedRowsCont")+" "+e.rup.i18nParse(e.rup.i18n.base,"rup_grid.pager.selected"))}},loadComplete_default:function(e){if(e.rows.length>0&&e.rows[0].id instanceof Object){for(var t=0;t<e.rows.length;t++)e.rows[t].id instanceof Object&&(e.rows[t].JPA_ID=e.rows[t].id,delete e.rows[t].id);this.addJSONData(e)}},afterInsertRow_default:function(e,t,i){},beforeSelectRow_default:function(e,t){return!0},onCellSelect_default:function(e,t,i,r){},ondblClickRow_default:function(e,t,i,r){},onHeaderClick_default:function(e){},onPaging_default:function(t){if("user"==t){var i=parseInt(e("td.pagControls .ui-pg-input",e("#gbox_"+C[0].id)).val());if(0===i)C.rup_grid("setGridParam",{page:1});else{var r=parseInt(C.rup_grid("getGridParam","lastpage"));i>r&&C.rup_grid("setGridParam",{page:r})}}return""},onRightClickRow_default:function(e,t,i,r){},onSelectAll_default:function(t,i){var r=e.rup.i18nParse(e.rup.i18n.base,"rup_grid.selectMsg"),a=e.rup.i18nParse(e.rup.i18n.base,"rup_grid.selectRestMsg"),n=e.rup.i18nParse(e.rup.i18n.base,"rup_grid.deselectMsg"),o=e.rup.i18nParse(e.rup.i18n.base,"rup_grid.deselectRestMsg"),s=0;if(i){var l=C.rup_grid("getGridParam","records"),d=C.rup_grid("getGridParam","reccount"),u=e.data(C[0],"rowsSelectedPage"),c=e.data(C[0],"selectedRowsCont"),p=l-d!==0?l-d-(c-u):0;h=e.jgrid.format(a,p),f=e("<input/>").attr("type","button").attr("id","rup_grid_"+C[0].id+"_selectAll").css("margin-left","1em").addClass("botonElementosRestantes").attr("value",h).attr("alt",e.rup.i18nParse(e.rup.i18n.base,"rup_grid.selectAll")),numFilas="<b>"+t.length+"</b>",v="<b>"+jqGrid.rup_grid("getGridParam","page")+"</b>",msg=e.jgrid.format(r,numFilas,v),0!==p?e("#rup_feedback_"+C[0].id).rup_feedback("set",msg+e(f)[0].outerHTML):e("#rup_feedback_"+C[0].id).rup_feedback("set",msg),e("#rup_grid_"+C[0].id+"_selectAll").bind("click",function(t){e.data(C[0],"selectedRowsCont",C.rup_grid("getGridParam","records")),e.data(C[0],"allSelected",!0),e("#rup_feedback_"+C[0].id).rup_feedback("close"),e.isFunction(C[0].rup_gridProps.selectAllGetPrimaryKeys)&&(C[0].rup_gridProps.selectAllGetPrimaryKeys.call(C),C[0].rup_gridProps.onSelectAllRows.call(C)),e.data(C[0],"deSelectedPages",[]),C[0].rup_gridProps.hasMaint||!C[0].rup_gridProps.multiselect||e.isFunction(C[0].rup_gridProps.onAfterSelectAll)||e("#"+C[0].rup_gridProps.pagerName+"_left").html(e(C).data("selectedRowsCont")+" "+e.rup.i18nParse(e.rup.i18n.base,"rup_grid.pager.selected"))}),s=e.data(C[0],"selectedRowsCont")+C.rup_grid("getGridParam","reccount")-e.data(C[0],"rowsSelectedPage")}else{e.data(C[0],"rowsSelectedPage",0);var p=Number(e.data(C[0],"selectedRowsCont")-C.rup_grid("getGridParam","reccount"));if(p>0){var h=e.jgrid.format(o,p),f=e("<input/>").attr("type","button").attr("id","rup_grid_"+C[0].id+"_deSelectAll").css("margin-left","1em").addClass("botonElementosRestantes").attr("value",h).attr("alt",e.rup.i18nParse(e.rup.i18n.base,"rup_grid.deSelectAll"));numFilas="<b>"+t.length+"</b>",v="<b>"+jqGrid.rup_grid("getGridParam","page")+"</b>",msg=e.jgrid.format(n,numFilas,v),e("#rup_feedback_"+C[0].id).rup_feedback("set",msg+e(f)[0].outerHTML),e("#rup_grid_"+C[0].id+"_deSelectAll").bind("click",function(t){e.data(C[0],"selectedRowsCont",0),e.data(C[0],"allSelected",!1),e("#rup_feedback_"+C[0].id).rup_feedback("close"),e.isFunction(C[0].rup_gridProps.onAfterSelectAll)&&(C[0].rup_gridProps.onDeSelectAllRows.call(C),e.isFunction(C[0].rup_gridProps.onDeselectAllGetPKs)&&C[0].rup_gridProps.onDeselectAllGetPKs.call(C)),C[0].rup_gridProps.hasMaint||!C[0].rup_gridProps.multiselect||e.isFunction(C[0].rup_gridProps.onAfterSelectAll)||e("#"+C[0].rup_gridProps.pagerName+"_left").html(e(C).data("selectedRowsCont")+" "+e.rup.i18nParse(e.rup.i18n.base,"rup_grid.pager.selected"))})}else e("#rup_feedback_"+C[0].id).rup_feedback("close");s=p}if(e.isFunction(C[0].rup_gridProps.onAfterSelectAll)&&C[0].rup_gridProps.onAfterSelectAll.call(C,t,i,s),!C[0].rup_gridProps.hasMaint&&C[0].rup_gridProps.multiselect&&!e.isFunction(C[0].rup_gridProps.onAfterSelectAll)){var g=void 0===e(C).data("selectedRows")?new Array:e(C).data("selectedRows"),m=C.rup_grid("getDataIDs"),v=e(C).rup_grid("getGridParam","page");g[v-1]=void 0===g[v-1]?new Array:g[v-1];for(var b=0;b<m.length;b++)i?e.inArray(m[b],g[v-1])===-1&&g[v-1].push(m[b]):g[v-1].splice(e.inArray(m[b],g[v-1]),1);e(C).data("selectedRows",g),e(C).data("selectedRowsCont",s),e(C).data("rowsSelectedPage",i?C.find('[aria-describedby="'+C.attr("id")+'_cb"] input:checked').length:0),e("#"+C[0].rup_gridProps.pagerName+"_left").html(e(C).data("selectedRowsCont")+" "+e.rup.i18nParse(e.rup.i18n.base,"rup_grid.pager.selected"))}},onSelectRow_default:function(t,i){if(e.isFunction(C[0].rup_gridProps.onAfterSelectRow)&&C[0].rup_gridProps.onAfterSelectRow.call(C,t,i),!C[0].rup_gridProps.hasMaint&&C[0].rup_gridProps.multiselect&&!e.isFunction(C[0].rup_gridProps.onAfterSelectRow)){var r=void 0===e(C).data("selectedRows")?new Array:e(C).data("selectedRows"),a=e(C).rup_grid("getGridParam","page");r[a-1]=void 0===r[a-1]?new Array:r[a-1],i?e.inArray(t,r[a-1])===-1&&r[a-1].push(t):r[a-1].splice(e.inArray(t,r[a-1]),1),e(C).data("selectedRows",r),e(C).data("selectedRowsCont",i?e(C).data("selectedRowsCont")+1:e(C).data("selectedRowsCont")-1),e(C).data("rowsSelectedPage",C.find('[aria-describedby="'+C.attr("id")+'_cb"] input:checked').length),e("#"+C[0].rup_gridProps.pagerName+"_left").html(e(C).data("selectedRowsCont")+" "+e.rup.i18nParse(e.rup.i18n.base,"rup_grid.pager.selected")),C.find('[aria-describedby="'+C.attr("id")+'_cb"] input:checked').length===C.find('[aria-describedby="'+C.attr("id")+'_cb"] input').length&&e(e.find("#cb_"+C.attr("id"))[0]).attr("checked",!0)}e("#rup_feedback_"+C[0].id)&&e("#rup_feedback_"+C[0].id).rup_feedback("close")},onSortCol_default:function(t,i,r){return!C[0].rup_gridProps.hasMaint&&C[0].rup_gridProps.multiselect&&void 0!==e(C).data("selectedRows")&&e(C).data("selectedRows").length>0?(e("#lui_"+C.attr("id")).hide(),e("#load_"+C.attr("id")).hide(),e.rup_messages("msgConfirm",{message:e.rup.i18nParse(e.rup.i18n.base,"rup_maint.checkSelectedElems"),title:e.rup.i18nParse(e.rup.i18n.base,"rup_maint.changes"),OKFunction:function(){e(C).data("selectedRows",new Array),e(C).data("selectedRowsCont",0),e(C).data("rowsSelectedPage",0),e("#"+C[0].rup_gridProps.pagerName+"_left").html(e(C).data("selectedRowsCont")+" "+e.rup.i18nParse(e.rup.i18n.base,"rup_grid.pager.selected")),C.trigger("reloadGrid")}}),""):(window.setTimeout(function(){e("#lui_"+C.attr("id")).hide(),e("#load_"+C.attr("id")).hide(),C.trigger("reloadGrid")},0),"")},resizeStart_default:function(t,i){D[0]=e("#gbox_"+C[0].id+" .ui-jqgrid-htable th:eq(1)").css("cursor"),"col-resize"===D[0]&&(D[0]="default"),e("#gbox_"+C[0].id+" .ui-jqgrid-htable th").css("cursor","col-resize"),D[1]=e("#gbox_"+C[0].id+" .ui-jqgrid-sortable").css("cursor"),e("#gbox_"+C[0].id+" .ui-jqgrid-sortable").css("cursor","col-resize"),e("#gbox_"+C[0].id+" .ui-jqgrid-sortable div").css("cursor","col-resize"),e("#gbox_"+C[0].id+" .ui-grid-ico-sort").css("cssText","cursor: col-resize !important;")},resizeStop_default:function(t,i){e("#gbox_"+C[0].id+" .ui-jqgrid-htable th").css("cursor",D[0]),e("#gbox_"+C[0].id+" .ui-jqgrid-sortable").css("cursor",D[1]),e("#gbox_"+C[0].id+" .ui-jqgrid-sortable div").css("cursor","pointer"),e("#gbox_"+C[0].id+" .ui-grid-ico-sort").css("cssText","cursor: pointer !important;")}}),i.loadOnStartUp&&!i.hasMaint&&(i.url=e.rup_utils.setNoPortalParam(i.url)),i.sortable!==!1&&(n=i.sortable,i.sortable={update:function(e){C.reorderColumns(e)}}),i.jsonReader={repeatitems:!1,id:"rup_id"},i.prmNames={id:"rup_id"},i.loadui="block",i.pager=e("#"+i.pagerName),void 0===i.datatype&&(i.loadOnStartUp&&!i.hasMaint?i.datatype="json":i.datatype="clientSide"),C[0].rup_gridProps=i,C[0].rup_gridProps.allPksArray=[],e.data(C[0],"selectedRowsCont",0);var S=C.jqGrid(i);null===i.fluidBaseLayer&&(i.fluidBaseLayer=e("#gbox_"+S.attr("id")).parent(),i.fluidBaseLayer.attr("id").indexOf("RUP_GRID_")!==-1&&(i.fluidBaseLayer=i.fluidBaseLayer.parent())),e("#"+C[0].id).bind("fluidWidth.resize",function(t,i,r){e(S).setGridWidth(r)}),i.hasMaint===!1&&"auto"===i.width&&e("#"+C[0].id).fluidWidth({fluidBaseLayer:i.fluidBaseLayer,minWidth:i.minWidth,maxWidth:i.maxWidth,fluidOffset:i.fluidOffset}),i.loadOnStartUp||C.setGridParam({url:i.hasMaint?null:i.url,datatype:i.hasMaint?"clientSide":"json"}),e("<div/>").attr("id","rup_feedback_"+C[0].id).insertBefore("#gbox_"+C[0].id),e("#"+C[0].id).getGridParam("sortable")?e("#gview_"+C[0].id+" .ui-jqgrid-sortable").css("cursor","move"):e("#gview_"+C[0].id+" .ui-jqgrid-sortable").css("cursor","default"),e("#rup_feedback_"+C[0].id).rup_feedback({closeLink:!1,gotoTop:!1,block:!1}),e.each(e("#gview_"+C[0].id+" .ui-jqgrid-sortable"),function(t,i){r=e(i).text(),a=e(i).children(),e(i).text("").prepend(e("<div />").css("cursor","pointer").css("display","inline-table").html(r)).append(a)}),i.multiselect&&e("#gview_"+C[0].id+" thead th").first().attr("title",e.rup.i18nParse(e.rup.i18n.base,"rup_maint.multiselectHeader")),e("#gview_"+C[0].id+" thead th[title]").rup_tooltip({show:{delay:500},position:{viewport:e("#gview_"+C[0].id),adjust:{method:"flip"}}}),e("#"+i.pagerName).css("height","auto"),e("#"+i.pagerName+"_left").addClass("pager_left"),e("#"+i.pagerName+"_center").addClass("pager_center"),e("#"+i.pagerName+"_right").addClass("pager_right"),e("#"+i.pagerName+"_left").html(""),i.multiselect===!0&&e("#"+i.pagerName+"_left").append(e("<div/>").addClass("ui-paging-selected").html("0 "+e.rup.i18nParse(e.rup.i18n.base,"rup_grid.pager.selected"))),e("#"+i.pagerName+" .pager_center table td").addClass("pagControls"),e("#"+i.pagerName+"_center .ui-pg-table #first_"+i.pagerName).html(e('<a href="#" />').html(e.rup.i18nParse(e.rup.i18n.base,"rup_grid.pager.primPag")).addClass("linkPaginacion")).removeClass("ui-pg-button"),e("#"+i.pagerName+"_center .ui-pg-table #prev_"+i.pagerName).html(e('<a href="#" />').html(e.rup.i18nParse(e.rup.i18n.base,"rup_grid.pager.anterior")).addClass("linkPaginacion")).removeClass("ui-pg-button"),e("#"+i.pagerName+"_center .ui-pg-table #next_"+i.pagerName).html(e('<a href="#" />').html(e.rup.i18nParse(e.rup.i18n.base,"rup_grid.pager.siguiente")).addClass("linkPaginacion")).removeClass("ui-pg-button"),e("#"+i.pagerName+"_center .ui-pg-table #last_"+i.pagerName).html(e('<a href="#" />').html(e.rup.i18nParse(e.rup.i18n.base,"rup_grid.pager.ultiPag")).addClass("linkPaginacion")).removeClass("ui-pg-button"),e("td.pagControls input",e("#gbox_"+C[0].id)).numeric(!1).attr("title",e.rup.i18nParse(e.rup.i18n.base,"rup_grid.pager.input")).rup_tooltip(),e("td.pagControls select").attr("title",e.rup.i18nParse(e.rup.i18n.base,"rup_grid.pager.select")).rup_tooltip(),i.pagerInline||(e("#"+i.pagerName+" tr:eq(0)").parent().append(e("<tr/>").attr("id",i.pagerName+"_pagerNewLine")),e("#"+i.pagerName+"_pagerNewLine").append(e("#"+i.pagerName+"_left")),e("#"+i.pagerName+"_pagerNewLine").append(e("#"+i.pagerName+"_right")),e("#"+i.pagerName+"_right").attr("colspan","2"),e("#"+i.pagerName+"_center").attr("colspan","3")),i.multiselect===!0&&(e("#cb_"+e.jgrid.jqID(C[0].id),"#gbox_"+C[0].id).unbind("click"),e("#cb_"+e.jgrid.jqID(C[0].id),"#gbox_"+C[0].id).bind("click",function(){this.checked?(C[0].p.selarrrow=[],e("[id^=jqg_"+C[0].id+"_]").attr("checked","checked"),e(C[0].rows).each(function(t){t>0&&(e(this).hasClass("subgrid")||e(this).hasClass("jqgroup")||(e(this).addClass("ui-state-highlight").attr("aria-selected","true"),C[0].p.selarrrow.push(this.id),C[0].p.selrow=this.id))}),chk=!0,emp=[]):(e("[id^=jqg_"+C[0].p.id+"_]").removeAttr("checked"),e(C[0].rows).each(function(t){t>0&&(e(this).hasClass("subgrid")||(e(this).removeClass("ui-state-highlight").attr("aria-selected","false"),emp.push(this.id)))}),C[0].p.selarrrow=[],C[0].p.selrow=null,chk=!1),e.isFunction(C[0].p.onSelectAll)&&C[0].p.onSelectAll.call(C[0],chk?C[0].p.selarrrow:emp,chk)}),e("#RUP_"+C[0].id).width(this.width()))}var T=e("#gbox_"+e(this).attr("id")).find("table");e(T[0]).attr("sumary",e.rup.i18nParse(e.rup.i18n.base,"rup_grid.summary.cabecera")),i.summary?e(T[1]).attr("sumary",i.summary):e(T[1]).attr("sumary",e.rup.i18nParse(e.rup.i18n.base,"rup_grid.summary.datos")),e(T[2]).attr("sumary",e.rup.i18nParse(e.rup.i18n.base,"rup_grid.summary.paginador")),e(T[3]).attr("sumary",e.rup.i18nParse(e.rup.i18n.base,"rup_grid.summary.paginador_navegar")),e(i.colModel).each(function(t,i){"ui-ellipsis"===i.classes&&e("[id='jqgh_"+e(C).attr("id")+"_"+i.name+"']").css("display","block").css("text-overflow","ellipsis");var r=e("[id='jqgh_"+e(C).attr("id")+"_"+i.name+"']").children("div");e(r).replaceWith(e("<span>").text(e(r).text()).css("cursor","pointer"))})},_tooltip:function(t){e("tr#"+t+" > td").each(function(t){e.attr(this,"rup_tooltip",e.attr(this,"title"))}).removeAttr("title"),e(".qtip").qtip("hide",!0)}}),e.fn.rup_grid.defaults={altclass:"",altRows:!1,autoencode:!0,botones:null,checkMultiBoxOnly:!1,colModel:[],colNames:[],editable:!1,editurl:null,filterParameters:null,fluidBaseLayer:null,fluidOffset:0,grouping:!1,groupingView:{groupDataSorted:!0,groupText:["<b>{0} - {1} "+e.rup.i18nParse(e.rup.i18n.base,"rup_maint.elements")+"</b>"]},hasMaint:!1,height:"auto",imgpath:"",loadOnStartUp:!0,maxWidth:null,menuContextual:null,minWidth:null,multiboxonly:!1,multiselect:!1,multiselectWidth:40,noMulticheckSelection:!1,offset:0,pagerName:"pager",pagerInline:!0,rowList:[10,20,30],rowNum:10,searchOnEnter:!0,sortable:!0,sortname:null,sortorder:"asc",tableclose:!0,treeGrid:!1,headertitles:!1,treedatatype:"json",url:"",viewrecords:!0,width:"auto",tooltipDelay:500}}(jQuery),/*!
 * Copyright 2013 E.J.I.E., S.A.
 *
 * Licencia con arreglo a la EUPL, Versión 1.1 exclusivamente (la «Licencia»);
 * Solo podrá usarse esta obra si se respeta la Licencia.
 * Puede obtenerse una copia de la Licencia en
 *
 *      http://ec.europa.eu/idabc/eupl.html
 *
 * Salvo cuando lo exija la legislación aplicable o se acuerde por escrito, 
 * el programa distribuido con arreglo a la Licencia se distribuye «TAL CUAL»,
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ni expresas ni implícitas.
 * Véase la Licencia en el idioma concreto que rige los permisos y limitaciones
 * que establece la Licencia.
 */
function(e){var t={};e.extend(e.rup.iniRup,e.rup.rupSelectorObjectConstructor("rup_grid_jerarquia",t)),e.fn.rup_grid_jerarquia("extend",{reset:function(){e(this).data("jerarquia.tree",[]),postData=e(this).getGridParam("postData"),delete postData["jerarquia.tree"]},resetMultiselect:function(){var t=this,i=e(t).attr("id");t.data("treeSelection",[]),t.getGridParam("selarrrow").length=0,e.each(t.find("tr[aria-selected='true']"),function(t,r){e(r).removeClass("ui-state-highlight").attr("aria-selected","false"),e(r).find("[aria-describedby='"+i+"_cb'] input").removeAttr("checked")}),t._refreshFooter.call(t)},getMultiselect:function(){var t=this;if(void 0!==t.data("settings")){var i=t.data("settings").token;return e.map(this.data("treeSelection"),function(e,t){return e.substring(e.lastIndexOf(i)+i.length)})}return[]}}),e.fn.rup_grid_jerarquia("extend",{_init:function(t){function i(){var t=jQuery.extend({},e(a).getGridParam("postData"));t["jerarquia.parentId"]=e(a).data("treeSelection").toString(),e.rup_ajax({url:a[0].rup_gridProps.url,dataType:"json",type:"GET",async:!1,data:t,contentType:"application/json",beforeSend:function(e){e.setRequestHeader("JQGridModel_selected",!0)},success:function(t,i){var r=[],n=[],o=a.data("settings").token;e.map(t,function(t,i){r.push(parseInt(i));var a=[];e.map(t,function(e,t){a.push(parseInt(t));var i=[];i.push(e),n.push(e),i["id_"+e]=o+e,a["l_"+t]=i}),r["p_"+i]=a}),e("#"+p)[0].prop.selectedRows=r,a[0].rup_gridProps.allPksArray=n,e("#"+p)[0].prop.selectedRowsCont=n.length},error:function(t,i,r){e.rup_messages("msgError",{title:e.rup.i18nParse(e.rup.i18n.base,"rup_grid_jerarquia.errorTitle"),message:e.rup.i18nParse(e.rup.i18n.base,"rup_grid_jerarquia.errorMessageSelected")})},complete:function(e,t){}})}if(t.length>1)e.rup.errorGestor(e.rup.i18nParse(e.rup.i18n.base,"rup_global.initError")+e(this).attr("id"));else{var r=e.extend(!0,{},e.fn.rup_grid_jerarquia.defaults,t[0]),a=this,n=null,o=null,s=null,l=null,d=null;r.id=e(this).attr("id");var u=e(a).getGridParam("postData");u["jerarquia.token"]=r.token,n=e(a).getGridParam("colModel");for(var c=0;c<n.length;c++)if(n[c].name===r.expandColName){o=n[c].formatter,n[c].formatter=function(e,t,i){return s=void 0!==e?e:"",void 0!==o&&(s=o.call(this,e,t,i)),a._formatter(r,e,t,i)+s};break}if(l=e(a).getGridParam("loadComplete"),d=function(t){e.isEmptyObject(t.rows)||(l.call(this,t),a._loadComplete(r,t)),a._refreshFooter.call(a)},e(a).setGridParam({loadComplete:d}),e.each(r.resetEvents,function(t,i){var r=e.isFunction(i[0])?i.shift():null,n="#"+i.join(", #");e(n).on(t,function(t){null!==r&&r.call(this,t)!==!1||e(a).rup_grid_jerarquia("reset")});for(var o=0;o<i.length;o++)e._data(e("#"+i[o])[0],"events")[t]=e._data(e("#"+i[o])[0],"events")[t].reverse()}),e(a).data("jerarquia.tree",[]),e(a).data("settings",r),u=e(a).getGridParam("postData"),e(a).getGridParam("multiselect")){a._multiselect();var p=a.data("maintName");if(toolbar=e("#"+p)[0].prop.toolbar.self,toolbar.find("[id$='rup-maint_toolbar-"+p+"##edit']").length>0&&(toolbar.find("[id$='rup-maint_toolbar-"+p+"##edit']").click(i),e._data(toolbar.find("[id$='rup-maint_toolbar-"+p+"##edit']")[0],"events").click.reverse()),toolbar.find("[id$='rup-maint_toolbar-"+p+"##delete']").length>0&&(toolbar.find("[id$='rup-maint_toolbar-"+p+"##delete']").click(i),e._data(toolbar.find("[id$='rup-maint_toolbar-"+p+"##delete']")[0],"events").click.reverse(),toolbar.find("[id$='rup-maint_toolbar-"+p+"##delete']").click(function(){e(".ui-dialog:visible").find("button").click(function(){e(a).rup_grid_jerarquia("resetMultiselect")}),e(".ui-dialog:visible").on("dialogclose",function(t){var i=a.data("maintName");e("#"+i)[0].prop.selectedRows=[],a[0].rup_gridProps.allPksArray=[],e("#"+i)[0].prop.selectedRowsCont=0})})),toolbar.find("[id$='rup-maint_toolbar-"+p+"##new']").length>0){var h=function(){a.data("treeSelection",[]),a._reloadMultiselect.call(a)};toolbar.find("[id$='rup-maint_toolbar-"+p+"##new']").click(function(t){a.data("treeSelection").length>0&&0===e("#"+p)[0].prop.selectedRows.length?(e.rup_messages("msgConfirm",{message:e.rup.i18nParse(e.rup.i18n.base,"rup_maint.checkSelectedElems"),title:e.rup.i18nParse(e.rup.i18n.base,"rup_maint.changes"),OKFunction:function(){h.call(a),e("#"+p).rup_maint("newElement")}}),t.stopImmediatePropagation()):h.call(a)}),e._data(toolbar.find("[id$='rup-maint_toolbar-"+p+"##new']")[0],"events").click.reverse()}}}},_formatter:function(t,i,r,a){if(void 0===a.level){var n=this.getRowData(r.rowId);a.hasChildren=e.parseJSON(n.hasChildren),a.filter=e.parseJSON(n.filter),a.level=n.level}var o=e("<span />").addClass("rup-grid-jerarquia rup-grid-jerarquia_level_"+a.level+" ui-icon");if(a.hasChildren){var s=e("#"+t.id).data("jerarquia.tree"),l=""+a[t.relatedColName];e.inArray(l,s)===-1?o.addClass(t.expandedClass).text(e.rup.i18nParse(e.rup.i18n.base,"rup_grid_jerarquia.icons.expanded")):o.addClass(t.unExpandedClass).text(e.rup.i18nParse(e.rup.i18n.base,"rup_grid_jerarquia.icons.unexpanded"))}else o.addClass(t.noChildClass).text(e.rup.i18nParse(e.rup.i18n.base,"rup_grid_jerarquia.icons.nochild"));return a.filter?(o=e(o).before(e("<span />").addClass("rup-grid-jerarquia rup-grid-jerarquia_filter_"+a.level+" ui-icon").addClass("rup-grid-jerarquia_filter").addClass(t.filterClass).text(e.rup.i18nParse(e.rup.i18n.base,"rup_grid_jerarquia.icons.filtered"))),o[0].outerHTML+o[1].outerHTML||(new XMLSerializer).serializeToString(o[0]+o[1])):o[0].outerHTML||(new XMLSerializer).serializeToString(o[0])},_loadComplete:function(t,i){if(e.each(e("td[aria-describedby$='hasChildren']:contains('true')"),function(i,r){e(r).parent().find("span[class^='rup-grid-jerarquia']").click(function(i){if(e(this).hasClass(t.filterClass))return!1;e(this).rup_tooltip("destroy"),e(this).parent().rup_tooltip("destroy");for(var a,n,o=e("#"+t.id),s=e(o).getGridParam("colModel"),l=0,d=null,u=0;u<s.length;u++)if(s[u].name===t.relatedColName){l=u;break}return a=e(e(r).parent().children()[l]),parentValue=e.trim(a.contents(":not(span[class^='rup-grid-jerarquia'])").first().text()),n=e(o).data("jerarquia.tree"),e.inArray(parentValue,n)===-1?n.push(parentValue):n.splice(e.inArray(parentValue,n),1),e(o).data("jerarquia.tree",n),d=e(o).getGridParam("postData"),d["jerarquia.tree"]=n.toString(),e(o).trigger("reloadGrid"),!1})}),t.parentNodesTooltip){var r=this;e.each(this.find("span[class^='rup-grid-jerarquia']"),function(i,a){var n=e(r).attr("id"),o=e(a).parentsUntil("tr").siblings("[aria-describedby='"+n+"_parentNodes']").html(),s=e(a).parent();s.rup_tooltip("destroy"),s.attr("title",r._parseParentNodes(o)),s.rup_tooltip({show:{delay:t.tooltipDelay}})})}r.getGridParam("multiselect")&&e(this).getGridParam("selarrrow").length===e(this).getGridParam("rowNum")&&e("#cb_"+e(this).attr("id")).attr("checked","checked")},_parseParentNodes:function(e){var t=this.data("settings").parentNodesTooltipFnc;if(nodes=e.split(this.data("settings").token).slice(1),null===t){for(var i="",r="&nbsp;&nbsp;",a=0;a<nodes.length;a++)a!==nodes.length-1?(i+=nodes[a]+"<br/>"+r+"└&nbsp;",r+="&nbsp;&nbsp;&nbsp;"):i+="<b>"+nodes[a]+"</b>";return i}return t.call(this,nodes)},_multiselect:function(){var t=this,i=e(t).attr("id");e(t).data("treeSelection",[]),t.data("settings").multiboxonly&&(e(t).data("defaultEventFunctions").beforeSelectRow_default=function(e,t){return"checkbox"==t.target.type},e(t).data("defaultEventFunctions").onCellSelect_default=function(t,r,a,n){if(e(n.target).attr("id")!=="jqg_"+i+"_"+t)return!1}),e(t).data("defaultEventFunctions").onSelectRow_default=function(e,i){t._selectRow.call(t,e,i)},e(t).data("defaultEventFunctions").onSelectAll_default=function(e,i){t._selectAll.call(t,e,i)},e("#"+t.data("maintName"))[0].prop.detailDiv.on("dialogclose",function(i){var r=t.data("maintName");e("#"+r)[0].prop.selectedRows=[],t[0].rup_gridProps.allPksArray=[],e("#"+r)[0].prop.selectedRowsCont=0}),e(t).on("jqGridLoadComplete",function(){t._reloadMultiselect.call(t),e("#"+i+"_cb").rup_tooltip("destroy"),e("#"+i+"_cb").removeAttr("title");var r=e(),a=t.data("settings").multiMenu,n=function(a){t.data("checkMenuValue",e(this).data("checkMenuValue")),void 0!==r.data("rowId")?e("#"+i).setSelection(r.data("rowId"),!0):t._selectRow(),t.removeData("checkMenuValue"),r.hide()};e.each(e.merge(e("#"+i+"_cb"),e(t).find("[aria-describedby='"+i+"_cb']")),function(o,s){if(e(s).find("input").css("margin-right","1em").after(e("<a />").attr("href","javascript:void(0)").addClass("ui-icon rup-grid-jerarquia_checkmenu_arrow").click(function(){if(0===t.getGridParam("records")||r.is(":visible"))return r.hide(),!1;e("#"+i+"_checkmenu").remove();var o=e(this).parent(),s=o.offset();r=e("<ul />").attr("id",i+"_checkmenu").addClass("rup-grid-jerarquia_checkmenu").on({mouseenter:function(){e(this).show()},mouseleave:function(){e(this).hide()},keydown:function(t){switch(t.keyCode){case 27:e(this).hide();break;case 13:e(this).find(".ui-state-focus").click()}}}).css({top:s.top+o.height(),left:s.left}),e.rup_utils.aplicatioInPortal()?r.appendTo(".r01gContainer"):r.appendTo("body");var l=e(this).parents("tr").attr("id"),d=e(t).getRowData(l),u=e(t).data("treeSelection"),c=u.length,p=function(t,i,a){r.append(e("<a />").text(t).data("checkMenuValue",a).click(function(){n.call(this)}).append(e("<span />").addClass("ui-icon "+i)).wrap(e("<li />")).parent())};if(void 0===o.attr("id")){"true"===d.hasChildren&&(a.hijos&&p(e.rup.i18nParse(e.rup.i18n.base,"rup_grid_jerarquia.menu.opt_1"),"child_icon",1),a.descendientes&&p(e.rup.i18nParse(e.rup.i18n.base,"rup_grid_jerarquia.menu.opt_2"),"hierarchy-down_icon",2));for(var h=!1,f=t.data("settings").token,g=0;g<c;g++){var m=u[g];if(0===m.indexOf(d.treeNodes)&&(m=m.substr(d.treeNodes.length),m.split(f).length>=2)){h=!0;break}}h&&a.hijos&&p(e.rup.i18nParse(e.rup.i18n.base,"rup_grid_jerarquia.menu.opt_3"),"child_icon",3),h&&a.descendientes&&p(e.rup.i18nParse(e.rup.i18n.base,"rup_grid_jerarquia.menu.opt_4"),"hierarchy-down_icon",4)}else{var v=e(t).getGridParam("records"),b=e(t).data("treeSelection").length;v!==b?p(e.rup.i18nParse(e.rup.i18n.base,"rup_grid_jerarquia.menu.opt_5"),"check_icon",5):p(e.rup.i18nParse(e.rup.i18n.base,"rup_grid_jerarquia.menu.opt_6"),"uncheck_icon",6)}r.data("rowId",l),r.rup_menu({display:"vertical"}),r.find("a:first").focus()})),"TD"===this.nodeName){var l=e(t).getRowData(e(this).parent().attr("id")).hasChildren;(a.hijos&&"false"===l&&!a.descendientes||!a.hijos&&a.descendientes&&"false"===l||a.hijos&&"false"===l&&a.descendientes&&"false"===l)&&(t.data("settings").multiMenuDisabled?e(this).find("a").addClass("ui-state-disabled").off("click"):e(this).find("a").remove())}else 0===t.getGridParam("records")&&(t.data("settings").multiMenuDisabled?e(this).find("a").addClass("ui-state-disabled"):e(this).find("a").remove());e(s).on("mouseleave",function(){r.is(":visible")&&r.hide()})})}),e.each(e(t).data("settings").resetMultiEvents,function(i,r){var a=e.isFunction(r[0])?r.shift():null,n="#"+r.join(", #");e(n).on(i,function(i){null!==a&&a.call(this,i)!==!1||e(t).rup_grid_jerarquia("resetMultiselect")});for(var o=0;o<r.length;o++)e._data(e("#"+r[o])[0],"events")[i]=e._data(e("#"+r[o])[0],"events")[i].reverse()})},_selectRow:function(t,i){var r=this,a=e(r).attr("id"),n=e(r).data("treeSelection"),o=e(r).getRowData(t).treeNodes;switch(ajaxData=jQuery.extend({},e(r).getGridParam("postData")),checkMenuValue=r.data("checkMenuValue"),token=r.data("settings").token,checkMenuValue){default:r.getGridParam("selarrrow").length===r.getGridParam("rowNum")&&e("#cb_"+a).attr("checked","checked"),e("#"+a+"_checkmenu").hide(),i?e.inArray(o,n)===-1&&n.push(o):n.splice(e.inArray(o,n),1),r._refreshFooter.call(r);break;case 5:case 6:o=token;case 1:case 2:case 3:case 4:r._checkNode.call(r,o,!1),ajaxData.page=ajaxData.rows=null,ajaxData["jerarquia.tree"]=null,ajaxData["jerarquia.parentId"]=o.substring(o.lastIndexOf(token)+token.length),e.rup_ajax({url:r[0].rup_gridProps.url,dataType:"json",type:"GET",async:!1,data:ajaxData,contentType:"application/json",beforeSend:function(t){t.setRequestHeader("RUP",e.toJSON({treeNodes:"treeNodes"})),t.setRequestHeader("JQGridModel",!0),e("#lui_"+a).show(),e("#load_"+a).show()},success:function(t,i){t=t.rows;var s=[],l=0,d=r.data("settings").token;switch(checkMenuValue){case 1:case 3:s=e.map(t,function(e,t){var i=e.treeNodes;if(i.split(d).length<3)return o+i});break;case 5:case 6:o="";case 2:case 4:s=e.map(t,function(e,t){var i=e.treeNodes;return o+i})}if(l=s.length,1===checkMenuValue||2===checkMenuValue||5===checkMenuValue)for(var u=0;u<l;u++)e.inArray(s[u],n)===-1&&n.push(s[u]);else for(var u=0;u<l;u++)n.splice(e.inArray(s[u],n),1);e(r).data("treeSelection",n),5!==checkMenuValue&&6!==checkMenuValue||(5===checkMenuValue&&(e("#cb_"+a).attr("checked","checked"),feedbackTxt=e.rup.i18nParse(e.rup.i18n.base,"rup_grid_jerarquia.feedbackTableSelect")),6===checkMenuValue&&(e("#cb_"+a).removeAttr("checked"),feedbackTxt=e.rup.i18nParse(e.rup.i18n.base,"rup_grid_jerarquia.feedbackTableDeselect")),e("#rup_feedback_"+a).rup_feedback("option",{closeLink:!0}),e("#rup_feedback_"+a).rup_feedback("set",feedbackTxt))},error:function(t,i,r){e.rup_messages("msgError",{title:e.rup.i18nParse(e.rup.i18n.base,"rup_grid_jerarquia.errorTitle"),message:e.rup.i18nParse(e.rup.i18n.base,"rup_grid_jerarquia.errorMessageMulti")})},complete:function(t,i){r._reloadMultiselect.call(r),e("#lui_"+a).hide(),e("#load_"+a).hide(),void 0!==r.data("settings").multiMenuCallback&&r.data("settings").multiMenuCallback.call(this)}})}},_selectAll:function(t,i){var r=this,a=e(r).attr("id"),n=t.length,o=e(r).data("treeSelection"),s="";s=i?e.rup.i18nParse(e.rup.i18n.base,"rup_grid_jerarquia.feedbackVisualSelect"):e.rup.i18nParse(e.rup.i18n.base,"rup_grid_jerarquia.feedbackVisualDeselect"),e("#rup_feedback_"+a).rup_feedback("option",{closeLink:!0}),e("#rup_feedback_"+a).rup_feedback("set",s);for(var l=0;l<n;l++)if(t[l].indexOf("ghead")===-1){var d=e(r).getRowData(t[l]).treeNodes;i?e.inArray(d,o)===-1&&o.push(d):o.splice(e.inArray(d,o),1)}r._refreshFooter.call(r)},_checkNode:function(t,i){var r=this,a=e(r).attr("id"),n=r.getGridParam("selarrrow"),o=(e(r).data("treeSelection"),r.find("td[aria-describedby='"+a+"_treeNodes']").filter(function(){return e(this).html()===t})),s=e(o).parent().attr("id");i?(e(o).parent().addClass("ui-state-highlight").attr("aria-selected","true"),e(o).parent().find("[aria-describedby='"+a+"_cb'] input").attr("checked","checked"),e.inArray(s,n)==-1&&n.push(s)):(e(o).parent().removeClass("ui-state-highlight").attr("aria-selected","false"),e(o).parent().find("[aria-describedby='"+a+"_cb'] input").removeAttr("checked"),e.inArray(s,n)!==-1&&n.splice(e.inArray(s,n),1))},_reloadMultiselect:function(){var t=this,i=e(t).attr("id"),r=e(t).data("treeSelection");e.each(t.find("td[aria-describedby='"+i+"_treeNodes']"),function(i,a){e.inArray(e(a).html(),r)!==-1?t._checkNode.call(t,e(a).html(),!0):t._checkNode.call(t,e(a).html(),!1)}),e(this).getGridParam("multiselect")&&e(this).getGridParam("selarrrow").length===e(this).getGridParam("rowNum")&&e("#cb_"+e(this).attr("id")).attr("checked","checked"),t._refreshFooter.call(t)},_refreshFooter:function(){var t=this,i=(e(t).attr("id"),e(t).data("treeSelection"));if(t.getGridParam("multiselect")){e("#"+t[0].rup_gridProps.pagerName+"_left").html(i.length+" "+e.rup.i18nParse(e.rup.i18n.base,"rup_grid.pager.selected"));var r=e("#"+t.data("maintName"))[0].prop.toolbar.self,a=e(t).data("jerarquia.tree"),n=[];n=e.grep(i,function(i,r){var n=!1;return selectionNodes=i.split(t.data("settings").token),selectionNodes_length=selectionNodes.length,e.each(selectionNodes,function(t,i){if(e.inArray(i,a)!==-1&&t+1!==selectionNodes_length)return n=!0,!1}),n},!0),n.length>0?(r.enableButton("edit"),r.enableButton("delete")):(r.disableButton("edit"),r.disableButton("delete"))}}}),e.fn.rup_grid_jerarquia.defaults={token:"/",resetEvents:{},resetMultiEvents:{},parentNodesTooltip:!0,parentNodesTooltipFnc:null,tooltipDelay:500,multiMenu:{hijos:!0,descendientes:!0},multiMenuDisabled:!0,multiboxonly:!1,expandedClass:"ui-icon-triangle-1-se",unExpandedClass:"ui-icon-triangle-1-e",noChildClass:"ui-icon-none",filterClass:"ui-icon-star"}}(jQuery),/*!
 * Copyright 2016 E.J.I.E., S.A.
 *
 * Licencia con arreglo a la EUPL, Versión 1.1 exclusivamente (la «Licencia»);
 * Solo podrá usarse esta obra si se respeta la Licencia.
 * Puede obtenerse una copia de la Licencia en
 *
 *      http://ec.europa.eu/idabc/eupl.html
 *
 * Salvo cuando lo exija la legislación aplicable o se acuerde por escrito, 
 * el programa distribuido con arreglo a la Licencia se distribuye «TAL CUAL»,
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ni expresas ni implícitas.
 * Véase la Licencia en el idioma concreto que rige los permisos y limitaciones
 * que establece la Licencia.
 */
function(e){e.widget("$.rup_language",{options:{languages:null,active:null,modo:""},_create:function(){this.options.active=null==e.rup.lang?"[lang]":e.rup.lang,active=this.options.active,this.options.languages=e.rup.AVAILABLE_LANGS.split(",");var t=this.element,i=e("<a>").attr("id","rup_language_choice").addClass("rup-language_change_option").text(e.rup.i18nParse(e.rup.i18n.base,"rup_language.changeLanguage"));if(e(t).addClass("ui-widget"),"portal"===this.options.modo){var r=e("<ul>").addClass("rup-language_portal"),a=e(this.options.languages).size();e.each(this.options.languages,function(t,i){i=i.replace(/^\s*|\s*$/g,"");var n=e.rup.i18nParse(e.rup.i18n.base,"rup_language."+i+"_short");i!==active?e("<li>").append(e("<a>").attr("href","?"+e.rup.LOCALE_PARAM_NAME+"="+i).text(n).addClass("rup-language_portal_list ui-corner-all").attr("title",e.rup.i18nParse(e.rup.i18n.base,"rup_language.changeLanguageLiteral_"+i)+e.rup.i18nParse(e.rup.i18n.base,"rup_language."+i))).appendTo(r):e("<li>").addClass("ui-state-active").append(e("<a>").attr("href","javascript:void(0);").text(n).addClass("rup-language_portal_list_active ui-corner-all").attr("title",e.rup.i18nParse(e.rup.i18n.base,"rup_language.changeLanguageLiteral")+e.rup.i18nParse(e.rup.i18n.base,"rup_language."+i))).appendTo(r),t<a-1&&r.append(e("<div>").html("|").addClass("rup-language_portal_separator"))}),t.append(r)}else{var r=e("<ul>").attr("id","ulGeneral"),n=e("<li>").attr("id","rup_active_language").addClass("rup-language_active").text(e.rup.i18nParse(e.rup.i18n.base,"rup_language."+this.options.active)).attr("title",e.rup.i18nParse(e.rup.i18n.base,"rup_language.changeLanguageLiteral")+e.rup.i18nParse(e.rup.i18n.base,"rup_language."+active)),o=e("<li>").addClass("rup-language_change").attr("id","rup_language_link"),s=e("<li>").attr("id","rup_language_list").addClass("rup-language_change_opened").css("visibility","hidden"),l=e("<div>"),d=e("<div>").addClass("rup-language_language_list"),u=e("<a>").addClass("rup-language_close_languages").attr("id","rup_language_close").attr("href","#").attr("title",e.rup.i18nParse(e.rup.i18n.base,"rup_language.closingLiteral")).html(e.rup.i18nParse(e.rup.i18n.base,"rup_global.cerrar")),c=e("<ul>");r.append(n),e("<a>").attr("href","#").text(e.rup.i18nParse(e.rup.i18n.base,"rup_language.changeLanguage")).appendTo(o),r.append(o),l.append(i),d.append(u),e.each(this.options.languages,function(t,i){i=i.replace(/^\s*|\s*$/g,"");var r=e("<li>").attr("id","rup_language_lng_"+i),a=e.rup.i18nParse(e.rup.i18n.base,"rup_language."+i);i!==active?e("<a>").appendTo(r).attr("href","?"+e.rup.LOCALE_PARAM_NAME+"="+i).text(a).attr("title",e.rup.i18nParse(e.rup.i18n.base,"rup_language.changeLanguageLiteral_"+i)+e.rup.i18nParse(e.rup.i18n.base,"rup_language."+i)):e("<a>").appendTo(r).attr("href","javascript:void(0);").text(a).attr("title",e.rup.i18nParse(e.rup.i18n.base,"rup_language.changeLanguageLiteral")+e.rup.i18nParse(e.rup.i18n.base,"rup_language."+i)),r.appendTo(c)}),d.append(c),l.append(d),s.append(l),r.append(s),t.append(r);var p=d.css("width","0.8em").width(),h=o.css("margin-right");o.css("margin-right","0px"),d.width(s.position().left-p),d.css("padding-left","0.6em"),d.css("padding-right","0.2em"),d.css("top",n.height()-1),s.hide(),s.css("visibility",""),o.css("margin-right",h),e("#rup_language_lng_"+e.rup.lang).addClass("ui-state-active"),o.click(function(){o.hide(),s.show(),e(".rup-language_language_list").find("li:not(.rup-language_language_list_active)").first().children("a").focus()}),i.click(function(){s.hide(),o.show()}),u.click(function(){s.hide(),o.show()}),s.mouseenter(function(){t.one("mouseleave",function(){s.hide(),o.show()})}),t.bind("keydown",function(t){switch(t.keyCode){case e.ui.keyCode.UP:e(t.target).parent().prevAll("li:not(.rup-language_language_list_active)").length>0?e(t.target).parent().prevAll("li:not(.rup-language_language_list_active)").first().children().focus():e(t.target).parent().siblings("li:not(.rup-language_language_list_active)").last().children().focus();break;case e.ui.keyCode.DOWN:e(t.target).parent().nextAll("li:not(.rup-language_language_list_active)").length>0?e(t.target).parent().nextAll("li:not(.rup-language_language_list_active)").first().children().focus():e(t.target).parent().siblings("li:not(.rup-language_language_list_active)").first().children().focus();break;case e.ui.keyCode.ESCAPE:s.hide(),o.show()}})}t.find("[title]").rup_tooltip({applyToPortal:!0})},_setOption:function(t,i){e.Widget.prototype._setOption.apply(this,arguments)},destroy:function(){e.Widget.prototype.destroy.apply(this,arguments)}})}(jQuery),/*!
 * Copyright 2013 E.J.I.E., S.A.
 *
 * Licencia con arreglo a la EUPL, Versión 1.1 exclusivamente (la «Licencia»);
 * Solo podrá usarse esta obra si se respeta la Licencia.
 * Puede obtenerse una copia de la Licencia en
 *
 *      http://ec.europa.eu/idabc/eupl.html
 *
 * Salvo cuando lo exija la legislación aplicable o se acuerde por escrito, 
 * el programa distribuido con arreglo a la Licencia se distribuye «TAL CUAL»,
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ni expresas ni implícitas.
 * Véase la Licencia en el idioma concreto que rige los permisos y limitaciones
 * que establece la Licencia.
 */
function($){$.fn.fmatter.rup_combo=function(e,t,i,r){var a,n,o,s,l,d,u,c,p=t.colModel.editoptions.source,h="",f=t.colModel.name,g=t.rowId,m=!0;if("string"==typeof p){f=t.colModel.jsonmap?t.colModel.jsonmap:t.colModel.name,a=f.indexOf(".")!==-1?f.substring(0,f.lastIndexOf(".")):"";var v=$.rup_utils.unnestjson(i)[(""!==a?a+".":"")+t.colModel.editoptions.sourceParam.label];void 0===v&&(v=$("#"+t.gid).data("Collection_rup_combo")[parseInt(t.rowId)][t.colModel.name].label),void 0!==v&&(n=v)}else void 0!==t.colModel.editoptions.parent&&(c=$("#detailForm_"+t.gid.split("GRID_")[1]+"_"+t.colModel.name),0!==c.length&&(m=!0,d=c.data("settings").multiValueToken,u="",$.each(t.colModel.editoptions.parent,function(e,i){s=t.colModel.editoptions.parent[e].split("detailForm_"+t.gid.split("GRID_")[1]+"_")[1],l=$("#"+t.gid).data("Collection_rup_combo")[g][s].value,m?(u+=l,m=!1):u+=d+l}),p=p[u])),$.each(p,function(i,r){if(r.value===e)return h=void 0===t.colModel.editoptions.i18nId?$.rup.i18nParse($.rup.i18n.app[t.gid+"##"+f],r.i18nCaption):$.rup.i18nParse($.rup.i18n.app[t.colModel.editoptions.i18nId],r.i18nCaption),!1}),n=h;return o=$("#"+t.gid).data("Collection_rup_combo"),void 0===o&&(o={},$("#"+t.gid).data("Collection_rup_combo",o)),$.extend(!0,o,o,$.parseJSON('{"'+g+'":{"'+t.colModel.name+'":{"value": "'+e+'" ,"label":"'+n+'"}}}')),n},$.fn.fmatter.rup_time=function(e,t,i,r){if(!e)return"";var a=t.colModel.formatoptions,n=$.rup.i18nParse($.rup.i18n.base,"rup_grid.formatter.date");return $.fmatter.util.DateFormat(a.newformat,e,a.newformat,n)},$.maint=$.maint||{},$.extend($.maint,{extend:function(e){$.fn.extend(e)},getPrimaryKeys:function(e){var t=[],i=0,r=0;for(i=0;i<e.length;i++)for(r=0;r<e[e[i]].length;r++)t.push(e[e[i]][e[e[i]][r]]);return t}}),$.extend($.rup,{maint:{detailButtons:{ALL:"all",SAVE:"onlySave",SAVE_REPEAT:"save_repeat"}}});var rup_maint={};$.extend($.rup.iniRup,$.rup.rupSelectorObjectConstructor("rup_maint",rup_maint)),$.fn.rup_maint("extend",{getSerializedForm:function(e){return $.param($.merge(e.serializeArray(),$.map($("input[type='file']",e),function(e,t){return{name:$(e).attr("name"),value:$(e).attr("value")}})))},newElement:function(){return this.each(function(){this.prop.jQueryGrid.rup_grid("isEditable")?$(this).rup_maint("newElementEditable"):(this.prop.isLazyCreationDone===!1&&($(this).rup_maint("defineDetailForm"),$(this).rup_maint("defineValidationConfig"),$.isFunction(this.prop.onAfterLazyDetailLoad)&&this.prop.onAfterLazyDetailLoad.call(),this.prop.isLazyCreationDone=!0),this.prop.MODO="new",$(this).rup_maint("resetForm",this.prop.detailForm),this.prop.detailForm.data("initialData",$(this).rup_maint("getSerializedForm",this.prop.detailForm)),$("#"+this.prop.detailDiv[0].id+" .rup-maint_validateIcon").remove(),this.prop.detailFeedback.rup_feedback("close"),$.isFunction(this.prop.onbeforeDetailShow)&&this.prop.onbeforeDetailShow.call(this,this.prop.detailDiv),$(this).rup_maint("updateDetailPagination",1,1),this.prop.detailDiv.rup_dialog("open"),$("input:not([readonly]):not(:disabled):visible,.ui-selectmenu:not(.ui-state-disabled):visible",this.prop.detailForm).first().focus())})},resetForm:function(e){if(void 0!=e.data("validator")){var t=e.data("validator").settings.errorClass;$("."+t,e).removeClass(t)}$("input[type!='button'][type!='checkbox'][type!='radio'], textarea",e).val(""),$("input[type='checkbox']").not("[name*='jqg_GRID_']").not("[disabled='disabled']",e).removeAttr("checked"),$.each($("select.rup_combo",e),function(e,t){$(t).rup_combo("clear")}),$("[ruptype='autocomplete']",e).each(function(e,t){$(t).val("")}),"reset"===this[0].prop.clearSearchFormMode?e.resetForm():$("input[type='radio']").removeAttr("checked")},updateDetailPagination:function(e,t){return this.each(function(){$("#rup_maint_selectedElements_"+this.prop.name).text($.jgrid.format($.rup.i18nParse($.rup.i18n.base,"rup_grid.defaults.detailForm_pager"),e,t)),e===t?($("#last_"+this.prop.name+", #forward_"+this.prop.name,this.prop.detailDiv).addClass("ui-state-disabled"),1===e?$("#first_"+this.prop.name+", #back_"+this.prop.name,this.prop.detailDiv).addClass("ui-state-disabled"):$("#first_"+this.prop.name+", #back_"+this.prop.name,this.prop.detailDiv).removeClass("ui-state-disabled")):1===e&&t>1?($("#first_"+this.prop.name+", #back_"+this.prop.name,this.prop.detailDiv).addClass("ui-state-disabled"),$("#last_"+this.prop.name+", #forward_"+this.prop.name,this.prop.detailDiv).removeClass("ui-state-disabled")):($("#last_"+this.prop.name+", #forward_"+this.prop.name,this.prop.detailDiv).removeClass("ui-state-disabled"),$("#first_"+this.prop.name+", #back_"+this.prop.name,this.prop.detailDiv).removeClass("ui-state-disabled"))})},loadDetailFromServer:function(e,t){var i=this;return this.each(function(){var t,r=this;this.prop.jQueryGrid.rup_grid("getDataIDs"),this.prop.jQueryGrid.rup_grid("getGridParam","page");t=i._getDetailUrl(e),$.rup_ajax({url:t,dataType:"json",type:"GET",async:!1,contentType:"application/json",success:function(t,a){var n,o,s;r.prop.jQueryGrid.rup_grid("getGridParam","page");return n=i._getCurrentDetailIndex(e),i.rup_maint("updateDetailPagination",n.current,n.total),t.id&&t.id instanceof Object&&t.id instanceof Object&&(t.JPA_ID=t.id,delete t.id),o=$.rup_utils.jsontoarray(t),$.rup_utils.populateForm(o,r.prop.detailForm),$.isFunction(r.prop.onbeforeDetailShow)&&r.prop.onbeforeDetailShow.call(r,r.prop.detailDiv,t,a),s=$.map(i._getDataForFormModifications(r.prop.detailForm),function(e,t){return o[e.name]?{name:e.name,value:null!==o[e.name]?o[e.name]:""}:{name:e.name,value:null!==e.value?e.value:""}}),r.prop.detailForm.data("initialData",$.param(s)),r.prop.detailDiv.rup_dialog("isOpen")||r.prop.detailDiv.rup_dialog("open"),$.isFunction(r.prop.onafterDetailShow)&&r.prop.onafterDetailShow.call(r,r.prop.detailDiv,t,a),$("input:not([readonly]):not(:disabled):visible,.ui-selectmenu:not(.ui-state-disabled):visible",r.prop.detailForm).first().focus(),!1},error:function(e,t,i){r.prop.feedback.rup_feedback("option","delay",null),r.prop.feedback.rup_feedback("set",e.responseText,"error"),r.prop.feedback.rup_feedback("option","delay",1e3)}})})},onBeforeEdit:function(e){function t(e,t){e.rup_grid("getDataIDs");e[0].p.ajaxGridOptions={async:!1},e.rup_grid("setGridParam",{page:parseFloat(t)}),e.rup_grid("reloadGrid"),e[0].p.ajaxGridOptions={async:!0}}function i(i,r){var n,s,l;return 9!=r.keyCode||($(this).hasClass("hasDatepicker")&&$(this).datepicker("hide"),$("#"+o).rup_maint("saveMaint",null,e,function(){if(n=Number(i.rup_grid("getInd",e,!1))-1,s=i.rup_grid("getDataIDs"),page=Number(i.rup_grid("getGridParam","page")),r.shiftKey){if(rowId=s[n-1],0==n){if(page=Number(i.rup_grid("getGridParam","page")),!(parseFloat(page)>1))return!1;t(i,page-1),s=i.rup_grid("getDataIDs"),rowId=s[s.length-1]}}else if(rowId=s[n+1],n==s.length-1){if(l=Number(i.rup_grid("getGridParam","lastpage")),!(parseFloat(page)+1<=l))return!1;t(i,page+1),s=i.rup_grid("getDataIDs"),rowId=s[0]}if("new"===$("#"+o)[0].prop.MODO)r.shiftKey||($("#"+o).rup_maint("newElement"),$("tr.addElement:first .editable:first",i).focus());else{var d=$("#"+o)[0].prop.jQueryGrid.rup_grid("getColModel");if(r.shiftKey){for(var u=d.length-1;u>=0;u-=1)if(d[u].editable===!0&&d[u].hidden!==!0){$("#"+o)[0].prop.selectedCell=u;break}}else for(var u=0;u<d.length;u+=1)if(d[u].editable===!0&&d[u].hidden!==!0){$("#"+o)[0].prop.selectedCell=u;break}$("#"+o).rup_maint("editElement",rowId),$("#"+rowId+"_"+a[$("#"+o)[0].prop.selectedCell].name,i).focus(),$("#"+o)[0].prop.jQueryGrid.rup_grid("setSelection",rowId,!1)}return!1}),!1)}var r,a,n,o=$.data(this,"maintName"),s=$(this);if($("#"+o)[0].prop.toolbar.self.enableButton("cancel"),$("#"+o)[0].prop.toolbar.self.disableButton("new"),$("#"+o)[0].prop.toolbar.self.disableButton("filter"),$.isFunction($("#"+o)[0].prop.onbeforeDetailShow)&&(r=$("#"+o)[0].prop.onbeforeDetailShow.call(this,e)),r)return!1;n=$("[id='"+e+"']",s),a=s.rup_grid("getColModel");for(var l=0;l<a.length;l++)if(a[l].editable){var d=a[l].rupType,u=$("[id='"+e+"_"+a[l].name+"']"),c=a[l].editoptions;s.rup_grid("isEditable")&&u.parent().removeClass("ui-ellipsis"),d&&("datepicker"===d?(u.rup_date(a[l].editoptions),s.rup_grid("isEditable")&&u.parent().find("img.ui-datepicker-trigger").remove()):"numeric"===d?u.numeric(","):"integer"===d?u.numeric(!1):(c&&void 0===c.i18nId&&(a[l].i18nId=s.attr("id")+"##"+a[l].name),$.rup["rup_combo_"+u.attr("id")]={index:l,rowN:e,rupType:a[l].rupType,name:a[l].name},"combo"===d&&(c=$.extend(c,{width:"auto",menuWidth:u.width()}),c.onLoadSuccess=function(e){if("object"==typeof e){var t=$.rup["rup_combo_"+e.attr("id")];void 0!==s.data("Collection_rup_combo")&&e["rup_"+t.rupType]("setRupValue",s.data("Collection_rup_combo")[t.rowN][t.name].value),e.attr("rup_combo_col_position",t.index),$("#gview_"+s.attr("id")).append($("#"+s.attr("id")+" ul.rup_combo").attr("rup_combo_col_position",t.index)),$("#"+s.attr("id")+" a.rup_combo[id='"+e.attr("id")+"-button']").attr("rup_combo_col_position",t.index),delete $.rup["rup_combo_"+e.attr("id")]}}),u["rup_"+a[l].rupType](c),"date"===d?(u["rup_"+a[l].rupType]("setRupValue",u.val()),s.rup_grid("isEditable")&&u.parent().find("img.ui-datepicker-trigger").remove()):"combo"!==d&&u["rup_"+a[l].rupType]("setRupValue",u.val()))),$.rup.browser.isIE&&void 0!==a[l+1]&&"combo"===a[l+1].rupType&&u.width(u.width()-.01)}$(".validableElem").live("change",function(){var e=[];e.push({name:"property",value:this.name}),e.push({name:"bean",value:$("#"+o)[0].prop.modelObject}),e.push({name:"value",value:$(this).val()}),$.rup_ajax({url:$("#"+o)[0].prop.validationUrl,dataType:"json",type:"POST",data:e,contentType:"application/x-www-form-urlencoded; charset=UTF-8",success:function(e,t){$("#"+o)[0].prop.feedback.rup_feedback("close")},error:function(e,t,i){var r=$.rup.i18nParse($.rup.i18n.base,"rup_maint.validateError");null!==e.responseText&&""!==e.responseText&&(406===e.status?$(mant).rup_maint("showFieldValidationErrors",e):($("#"+o)[0].prop.feedback.rup_feedback("option","delay",null),$("#"+o)[0].prop.feedback.rup_feedback("set",r,"error"),$("#"+o)[0].prop.feedback.rup_feedback("option","delay",1e3)))}})});var p=a[a.length-1].name,h=a[0].name;$("input[name='"+p+"']",s).bind("keydown",function(e){if(9==e.keyCode&&!e.shiftKey)return i(s,e)}),$("input[name='"+h+"']",s).bind("keydown",function(e){if(9==e.keyCode&&e.shiftKey)return i(s,e)})},saveEditableError:function(){},saveEditableSucces:function(){},saveEditable:function(){$(this).rup_maint("saveMaint")},restore:function(){var e=$("#"+$.data(this,"maintName"));e[0].prop.toolbar.self.disableButton("cancel"),e[0].prop.toolbar.self.enableButton("new"),e[0].prop.toolbar.self.enableButton("filter"),e.data("initialData",null),e[0].prop.feedback.rup_feedback("close"),"new"===e[0].prop.MODO&&e[0].prop.jQueryGrid.rup_grid("delRowData",e[0].prop.jQueryGrid.rup_grid("getGridParam","selrow"))},aftersavefunc:function(e,t){if(t){var i=$("#"+$.data(this,"maintName"));i.rup_maint("saveMaint",null,e)}},checkOutOfGrid:function(e,t){var i=this;if(""===e.target.id){if(""!==e.target.className&&$("#gbox_"+i[0].prop.jQueryGrid[0].id).find("."+e.target.className).length>0)return!1;if(null!==this[0].prop.toolbar.self&&$(e.target).find(".rup-maint_cancel").length>0)return!1}else if($("#gbox_"+i[0].prop.jQueryGrid[0].id).find("#"+e.target.id).length>0)return!1;if(i[0].prop.jQueryGrid.rup_grid("isEditable")&&i[0].prop.jQueryGrid.rup_grid("isEditing"))return i[0].prop.toolbar.self.disableButton("cancel"),i[0].prop.toolbar.self.enableButton("new"),i[0].prop.toolbar.self.enableButton("filter"),this.rup_maint("saveMaint",null,i[0].prop.lastsel,function(){i[0].prop.lastsel=null}),!1},editElement:function(e,t){function i(t,i,a,n){$(i).unbind("keydown").bind("keydown",function(t){if(27===t.keyCode&&r.rup_maint("cancelEditing"),13===t.keyCode){var i=t.target;return"TEXTAREA"==i.tagName||($(n).rup_maint("saveMaint",null,e,function(){n.prop.lastsel=null,n.prop.toolbar.self.disableButton("cancel"),n.prop.toolbar.self.enableButton("new"),n.prop.toolbar.self.enableButton("filter")}),!1)}t.stopPropagation()})}var r=this,r=this;return r[0].prop.isLazyCreationDone===!1&&(r.rup_maint("defineDetailForm"),r.rup_maint("defineValidationConfig"),$.isFunction(r[0].prop.onAfterLazyDetailLoad)&&r[0].prop.onAfterLazyDetailLoad.call(),r[0].prop.isLazyCreationDone=!0),this.each(function(a,n){if(null!==e){var o,s,l,d,u=this,c=$(this),p=this.prop.jQueryGrid,h=this.prop.lastsel;if(p.rup_grid("isEditable")){if(!r._checkValidRowId_editline(e))return!1;if($("#gbox_"+p[0].id).parent().bind("mousedown",function(e){c.rup_maint("checkOutOfGrid",e,this)}),this.prop.searchForm.parent().bind("mousedown",function(e){c.rup_maint("checkOutOfGrid",e,this)}),null!==this.prop.lastsel){if(null===c.data("initialData")){t||(this.prop.MODO="edit"),p.rup_grid("editRow",e,!0,rup_maint.onBeforeEdit,rup_maint.saveEditable,"clientArray",null,rup_maint.aftersavefunc,null,rup_maint.restore);var f=p.rup_grid("getInd",e,!0);return i(e,f,p,u),c.data("initialData",$.toJSON(p.rup_grid("getEditingRowData",e))),"edit"===this.prop.MODO&&p.rup_grid("setSelection",e,!1),this.prop.lastsel=e,$.isFunction(this.prop.onafterDetailShow)&&this.prop.onafterDetailShow.call(this,e),!1}return $(this).rup_maint("saveMaint",null,this.prop.lastsel,function(){t||(u.prop.MODO="edit"),p.rup_grid("editRow",e,!0,rup_maint.onBeforeEdit,rup_maint.saveEditable,"clientArray",null,rup_maint.aftersavefunc,null,rup_maint.restore);var r=p.rup_grid("getInd",e,!0);return i(e,r,p,u),c.data("initialData",$.toJSON(p.rup_grid("getEditingRowData",e))),u.prop.lastsel=e,!1},function(){return p.rup_grid("setSelection",h,null),u.prop.lastsel=h,!1}),!1}t||(this.prop.MODO="edit"),p.rup_grid("editRow",e,!0,rup_maint.onBeforeEdit,rup_maint.saveEditable,"clientArray",null,rup_maint.aftersavefunc,null,rup_maint.restore);var f=p.rup_grid("getInd",e,!0);i(e,f,p,u),c.data("initialData",$.toJSON(p.rup_grid("getEditingRowData",e))),this.prop.lastsel=e,$.isFunction(this.prop.onafterDetailShow)&&this.prop.onafterDetailShow.call(this,e)}else{$("#"+this.prop.detailDiv[0].id+" .rup-maint_validateIcon").remove();var g=this.prop.detailForm.data("validator").settings.errorClass;if($("."+g,this.prop.detailForm).removeClass(g),this.prop.detailFeedback.rup_feedback("close"),this.prop.detailServer||p.rup_grid("isMultiselect"))return $(this).rup_maint("loadDetailFromServer",e,this.prop.detailForm),!1;s=p.rup_grid("getGridParam","page"),d=p.rup_grid("getGridParam","records"),l=p.rup_grid("getGridParam","rowNum");var m=Number(p.rup_grid("getInd",rowN,!1))-1;o=parseInt(s)*parseInt(l)-parseInt(l)+m,$(this).rup_maint("updateDetailPagination",o,d),$.isFunction(this.prop.onbeforeDetailShow)&&this.prop.onbeforeDetailShow.call(this,this.prop.detailDiv),p.rup_grid("GridToForm",e,this.prop.detailForm),this.prop.detailDiv.rup_dialog("open"),$("input:not([readonly]):not(:disabled):visible,.ui-selectmenu:not(.ui-state-disabled):visible",this.prop.detailForm).first().focus()}}else alert($.rup.i18nParse($.rup.i18n.base,"rup_grid.nav.alerttext"))})},deleteElement:function(e){return this.each(function(){var t,i,r,a="",n=null,o=null,s="",l=0,d=null,u=[],c=null,p=[];return o=this,this.prop.jQueryGrid.rup_grid("isMultiselect")?(this.prop.selectedRows.length<=0&&this.prop.jQueryGrid[0].rup_gridProps.allPksArray.length<=0?$.rup_messages("msgAlert",{message:$.rup.i18nParse($.rup.i18n.base,"rup_maint.noReg"),title:$.rup.i18nParse($.rup.i18n.base,"rup_maint.titleDelAll")}):$.rup_messages("msgConfirm",{message:$.rup.i18nParse($.rup.i18n.base,"rup_maint.deleteAll"),title:$.rup.i18nParse($.rup.i18n.base,"rup_maint.titleDelAll"),OKFunction:function(){if(null!==$.data(o.prop.jQueryGrid[0],"allSelected")&&void 0!==$.data(o.prop.jQueryGrid[0],"allSelected"))for(var e=0;e<o.prop.jQueryGrid[0].rup_gridProps.allPksArray.length;e++){if(o.prop.primaryKey.indexOf(";")>0){t=o.prop.jQueryGrid[0].rup_gridProps.allPksArray[e].substring(1).split("/"),s=t.length;for(var a=0;a<s;a++)p.push(t[a])}else p.push(o.prop.jQueryGrid[0].rup_gridProps.allPksArray[e].substring(1));u.push(p),p=[]}else for(e=0;e<o.prop.selectedRows.length;e++)for(var n=o.prop.selectedRows,l=n[e],h=n["p_"+l],f=0;f<h.length;f++){var g=h[f],m=h["l_"+g][0];if(o.prop.primaryKey.indexOf(";")>0){t=m.split("/"),s=t.length;for(var a=0;a<s;a++)p.push(t[a])}else p.push(m);u.push(p),p=[]}d=o.prop.jQueryGrid[0].rup_gridProps.url+"/deleteAll",c=$.toJSON(u),$.rup_ajax({url:d,data:c,async:!1,type:"POST",contentType:"application/json",success:function(e,t){o.prop.selectedRows=[],o.prop.selectedRowsCont=0,o.prop.jQueryGrid[0].rup_gridProps.allPksArray=[],o.prop.jQueryGrid.rup_grid("reloadGrid"),i=o.prop.jQueryGrid.rup_grid("getGridParam","reccount"),o.prop.jQueryGrid.rup_grid("resetSelection"),$.data(o.prop.jQueryGrid[0],"allSelected",null),$.data(o.prop.jQueryGrid[0],"deSelectedPages",[]),0===i&&(r=o.prop.jQueryGrid.rup_grid("getGridParam","page")-1,o.prop.jQueryGrid.rup_grid("setGridParam",{page:r}),o.prop.jQueryGrid.rup_grid("reloadGrid")),o.prop.showMessages&&o.prop.feedback.rup_feedback("set",$.rup.i18nParse($.rup.i18n.base,"rup_maint.deletedOK"),"ok"),o.prop.jQueryGrid.rup_grid("reloadGrid")},error:function(e,t,i){o.prop.feedback.rup_feedback("option","delay",null),o.prop.feedback.rup_feedback("set",e.responseText,"error"),o.prop.feedback.rup_feedback("option","delay",1e3)}})}}),!1):void(null===o.prop.jQueryGrid.rup_grid("getGridParam","selrow")?$.rup_messages("msgAlert",{message:$.rup.i18nParse($.rup.i18n.base,"rup_maint.noReg"),title:$.rup.i18nParse($.rup.i18n.base,"rup_maint.titleDelAll")}):$.rup_messages("msgConfirm",{message:$.rup.i18nParse($.rup.i18n.base,"rup_maint.deleteAll"),title:$.rup.i18nParse($.rup.i18n.base,"rup_maint.titleDelAll"),OKFunction:function(){if(o.prop.jQueryGrid.rup_grid("isEditable")&&o.prop.jQueryGrid.rup_grid("isEditing")){if("new"===o.prop.MODO)return $(o).rup_maint("cancelEditing",o),!1;o.prop.jQueryGrid.rup_grid("restoreRow",e)}if(n=o.prop.jQueryGrid.getRowData(e),null===n)return!1;if(o.prop.primaryKey.indexOf(";")>0)for(t=o.prop.primaryKey.split(";"),s=t.length,l=0;l<s;l++)a=a+"/"+n[t[l]];else a="/"+n[o.prop.primaryKey];d=o.prop.jQueryGrid[0].rup_gridProps.url+a,$.rup_ajax({url:d,data:c,async:!1,type:"DELETE",contentType:"application/json",success:function(t,a){i=o.prop.jQueryGrid.rup_grid("getGridParam","reccount");o.prop.jQueryGrid.rup_grid("delRowData",e);o.prop.showMessages&&o.prop.feedback.rup_feedback("set",$.rup.i18nParse($.rup.i18n.base,"rup_maint.deletedOK"),"ok"),o.prop.jQueryGrid.rup_grid("getDataIDs").length>0&&o.prop.jQueryGrid.rup_grid("setSelection",o.prop.jQueryGrid.rup_grid("getDataIDs")[0],!1),o.prop.jQueryGrid.rup_grid("resetSelection"),$.data(o.prop.jQueryGrid[0],"allSelected",null),$.data(o.prop.jQueryGrid[0],"deSelectedPages",[]),o.prop.jQueryGrid.rup_grid("isEditable")&&(o.prop.toolbar.self.disableButton("cancel"),o.prop.toolbar.self.enableButton("new"),o.prop.toolbar.self.enableButton("filter")),o.prop.lastsel=null,1===i&&(r=o.prop.jQueryGrid.rup_grid("getGridParam","page")-1,o.prop.jQueryGrid.rup_grid("setGridParam",{page:r})),o.prop.jQueryGrid.rup_grid("reloadGrid")},error:function(e,t,i){o.prop.feedback.rup_feedback("option","delay",null),o.prop.feedback.rup_feedback("set",e.responseText,"error"),o.prop.feedback.rup_feedback("option","delay",1e3)}})}}))})},saveMaint:function(saveAndRepeat,rowId,aftersavefunc,aftererrorfunc){var self=this;return this.each(function(){var mant=this,id=null,dt,parent,parentColPks,parentSelectedRow,parentPKObject={},aux,rowValues;if(mant.prop.jQueryGrid.rup_grid("isEditable")?(null==rowId&&(rowId=mant.prop.jQueryGrid.rup_grid("getSelectedRows")[0]),dt=form2object(mant.prop.jQueryGrid.rup_grid("getInd",rowId,!0),null,!1)):dt=form2object(mant.prop.detailForm[0],null,!1),dt.JPA_ID instanceof Object&&(dt.id=dt.JPA_ID,delete dt.JPA_ID),null!==mant.prop.parent){if(parent=$("#"+mant.prop.parent),parentColPks=parent.rup_maint("getPrimaryKey").split(";"),parentSelectedRow=parent[0].prop.jQueryGrid.rup_grid("getSelectedRows")[0],parentColPks.length>1)for(var i=0;i<parentColPks.length;i++)parentPKObject[$.rup_utils.firstCharToLowerCase(parent[0].prop.modelObject)][parentColPks[i]]=parent[0].prop.jQueryGrid.rup_grid("getCol",parentSelectedRow,parentColPks[i]);else parentPKObject[$.rup_utils.firstCharToLowerCase(parent[0].prop.modelObject)]={},parentPKObject[$.rup_utils.firstCharToLowerCase(parent[0].prop.modelObject)][parentColPks[0]]=parent[0].prop.jQueryGrid.rup_grid("getCol",parentSelectedRow,parentColPks[0]);$.extend(!0,dt,parentPKObject)}var init=eval("("+$(mant).data("initialData")+")"),validationErrors=[];if(validationErrors.push({key:mant.prop.modelObject}),!mant.prop.detailForm.validate().checkForm())return validationErrors.push(mant.prop.detailForm.validate().errorMap),$(mant).rup_maint("showFieldValidationErrors",$.toJSON(validationErrors)),aftererrorfunc&&aftererrorfunc.call(),!1;if(mant.prop.jQueryGrid.rup_grid("isEditable")&&!$.rup_utils.compareObjects(init,dt)||!mant.prop.jQueryGrid.rup_grid("isEditable")&&mant.prop.detailForm&&$.param(self._getDataForFormModifications(mant.prop.detailForm))!==mant.prop.detailForm.data("initialData")){dt=$.toJSON(dt),dt=dt.split("null").join("");var errores=!1;return mant.prop.detailForm.rup_form("ajaxFormSubmit",{url:$.rup_utils.setNoPortalParam(mant.prop.jQueryGrid[0].rup_gridProps.url),dataType:"json",type:"new"===mant.prop.MODO?"POST":"PUT",beforeSubmit:function(e,t,i){var r,a={},n=$("input:file",t),o=n.length>0;if(o){if(!$.rup.browser.xhrFileUploadSupport||i.iframe===!0){r=i.type,$.inArray(r.toUpperCase(),$.rup.IFRAME_ONLY_SUPPORTED_METHODS)===-1&&(i.extraData=$.extend({},i.extraData,{_method:r.toUpperCase()})),i.extraData=$.extend({},i.extraData,{_emulate_iframe_http_status:"true"}),i.url=i.url+(null===i.url.match("\\?")?"?":"&")+"_emulate_iframe_http_status=true";var s=i.error;i.error=function(e,t,i){var r=$.rup.rupAjaxDefaultError(e,t,i);null!=s?$(s(e,t,i)):r&&$.rup.showErrorToUser(r)}}$.each(e,function(e,i){var r=$("[name='"+i.name+"'][ruptype]",t);1===r.length&&(i.value=r["rup_"+r.attr("ruptype")]("getRupValue")),a[i.name]=i.value}),e=a}else i.contentType="application/json",e=dt},success:function(e,t){return self._saveMaintSuccess(e,t,saveAndRepeat,rowId,aftersavefunc)},error:function(e,t,i){return self._saveMaintError(e,t,i,rowId,aftererrorfunc)},beforeSend:function(e,t){return t.contentType.indexOf("application/json")!==-1&&(t.data=dt),mant.prop.validationFilter&&e.setRequestHeader("validation","true"),e.setRequestHeader("bean",mant.prop.modelObject),e.setRequestHeader("rup_maint_mode","new"===mant.prop.MODO?"add":"edit"),"skip"}}),errores}mant.prop.jQueryGrid.rup_grid("isEditable")&&dt===$(mant).data("initialData")&&$(mant).data("initialData",null),mant.prop.jQueryGrid.rup_grid("isEditable")?"new"===mant.prop.MODO?mant.prop.jQueryGrid.rup_grid("delRowData",mant.prop.lastsel):(mant.prop.jQueryGrid.rup_grid("restoreRow",mant.prop.lastsel),mant.prop.lastsel=null,$(mant).rup_maint("ellipsisRestoreOnEdit")):saveAndRepeat?mant.prop.detailFeedback.is(":visible")||(mant.prop.detailFeedback.rup_feedback("option","delay",null),mant.prop.detailFeedback.rup_feedback("set",$.rup.i18nParse($.rup.i18n.base,"rup_maint.emptyChanges"),"alert"),mant.prop.detailFeedback.rup_feedback("option","delay",1e3)):mant.prop.detailFeedback.is(":visible")||mant.prop.detailDiv.rup_dialog("close"),aftersavefunc&&aftersavefunc.call(),mant.prop.jQueryGrid.rup_grid("isEditable")||$(mant).data("initialData",null)})},getPrimaryKey:function(){return this[0].prop.primaryKey},clearSearchCriteria:function(){var e=this,t=e[0].prop;$("#titleSearch_"+t.name).text($.rup.i18nParse($.rup.i18n.base,"rup_maint.searchOptions")).removeClass("rup-maint_searchCriteria "),$("#titleSearch_"+t.name).rup_tooltip("destroy")},showSearchCriteria:function(){var e,t,i,r,a,n,o=this,s=o[0].prop,l=" ",d=new Array;e=s.searchForm.serializeArray(),t=s.searchForm;for(var u=0;u<e.length;u++)if(""!==e[u].value){if(i=$("[name='"+e[u].name+"']",t),$.inArray(i.attr("id"),s.filterExclude)!==-1)continue;if(i.length>1&&(i=$("[name='"+e[u].name+"']:checked",t)),"hidden"===$(i).attr("type"))continue;switch(r=$(i).attr("id"),"combo"===$(i).attr("ruptype")&&0==i.next(".ui-multiselect").length&&(r+="-button"),"autocomplete"===$(i).attr("ruptype")&&(r=r.substring(0,r.indexOf("_label"))),label=$("label[for^='"+r+"']",t),a=label.length>0?label.html():"combo"!==$(i).attr("ruptype")?$("[name='"+e[u].name+"']",t).prev("div").find("label").first().html():$("[name='"+e[u].name+"']",t).parent().prev("div").find("label").first().html(),null!==a&&void 0!==a||(a=""),n=" = ",$(i)[0].tagName){case"INPUT":n+=$(i).val(),"checkbox"!==$(i)[0].type&&"radio"!==$(i)[0].type||(n="");break;case"SELECT":0==i.next(".ui-multiselect").length?n+=$("option[value='"+e[u].value+"']",i).html():$.inArray($(i).attr("id"),d)===-1?(numSelected=i.rup_combo("value").length,0!==numSelected?n+=numSelected:(a="",n=""),d.push($(i).attr("id"))):(a="",n="")}for(var c=new Array(":","="),p=0;p<c.length;p++)if(""!==a&&a.indexOf(c[p])!==-1){a=a.substring(0,a.indexOf(c[p]));break}for(;n.indexOf("&amp;nbsp;")!==-1;)n=n.replace("&amp;nbsp;","");if(""===a&&n.indexOf(" = ")!==-1&&(n=n.substring(2,n.length)),""===a&&""===$.trim(n))continue;l=l+a+n+", "}if(l.length>1){l=l.substring(0,l.length-2);for(var h,f=$("#titleSearch_"+s.name).css("height"),g=l,m=!1;;){if($("#titleSearch_"+s.name).html($.rup.i18nParse($.rup.i18n.base,"rup_maint.searchOptions")+"<i>"+g+"</i>"),h=$("#titleSearch_"+s.name).css("height"),h===f)break;g=g.substring(0,g.lastIndexOf(","))+" <b>...</b>",m=!0}m&&$("#titleSearch_"+s.name).rup_tooltip({content:{text:l.substring(1)},position:{my:"bottom center",at:"top center"}})}},toggleSearchForm:function(e,t){return this.each(function(){if(null===this.prop.searchForm)return!1;$("#"+e).is(":hidden")&&void 0===t?($("#"+e).show({duration:"slow",effect:"blind"}),$("#titleSearch_"+this.prop.name).removeClass("rup-maint_searchCriteria"),$("input:first",this.prop.searchForm).focus()):($("#"+e).hide({duration:"slow",effect:"blind"}),$("#titleSearch_"+this.prop.name).addClass("rup-maint_searchCriteria")),this.prop.toolbar.self.tooglePressButton("filter","rup-maint_filter_pressed")})},search:function(e){return this.each(function(){var t=this.prop,i=!0;if(t.feedback.rup_feedback("close"),t.jQueryGrid.rup_grid("isMultiselect")&&(t.jQueryGrid.rup_grid("resetSelection"),$.data(t.jQueryGrid[0],"allSelected",null),$.data(t.jQueryGrid[0],"deSelectedPages",[])),t.jQueryGrid.rup_grid("setGridParam",{url:$.rup_utils.setNoPortalParam(t.jQueryGrid[0].rup_gridProps.url),datatype:"json",mtype:"GET",page:e?e:"rup"}),t.parent)for(var r=$("#"+t.parent),a=r.rup_maint("getPrimaryKey").split(";"),n=r[0].prop.jQueryGrid.rup_grid("getSelectedRows")[0],o=0;o<a.length;o++)r[0].prop.jQueryGrid.rup_grid("getCol",n,a[o])===!1&&(i=!1);i&&($(this).rup_maint("showSearchCriteria"),this.prop.jQueryGrid.rup_grid("reloadGrid"))})},toggleGrid:function(){return this.each(function(){$("#gbox_"+this.prop.jQueryGrid[0].id).is(":hidden")?$("#gbox_"+this.prop.jQueryGrid[0].id).slideDown("fast"):$("#gbox_"+this.prop.jQueryGrid[0].id).slideUp("fast")})},cleanSearchForm:function(){return this.each(function(){$(this).rup_maint("resetForm",this.prop.searchForm),$(this).rup_maint("clearSearchCriteria"),this.prop.jQueryGrid[0].rup_gridProps.loadOnStartUp?(this.prop.jQueryGrid.rup_grid("setGridParam",{url:this.prop.jQueryGrid[0].rup_gridProps.url,page:"rup"}),this.prop.jQueryGrid.rup_grid("isMultiselect")&&(this.prop.jQueryGrid.rup_grid("resetSelection"),$.data(this.prop.jQueryGrid[0],"allSelected",null),$.data(this.prop.jQueryGrid[0],"deSelectedPages",[])),this.prop.jQueryGrid.rup_grid("setGridParam",{url:$.rup_utils.setNoPortalParam(this.prop.jQueryGrid[0].rup_gridProps.url)}),this.prop.jQueryGrid.rup_grid("reloadGrid")):this.prop.jQueryGrid.rup_grid("getDataIDs").length>0&&this.prop.jQueryGrid.rup_grid("clearGridData")})},getMode:function(){return this[0].prop.MODO},isEditing:function(){return"edit"===this[0].prop.MODO},isAdding:function(){return"new"===this[0].prop.MODO},getToolbarObject:function(){return this[0].prop.toolbar.self},getAddBootonDefaultFunction:function(){return this[0].prop.toolbar.defaultFunctionAddButton},getCancelBootonDefaultFunction:function(){return this[0].prop.toolbar.defaultFunctionCancelButton},getEditBootonDefaultFunction:function(){return this[0].prop.toolbar.defaultFunctionEditButton},getDeleteBootonDefaultFunction:function(){return this[0].prop.toolbar.defaultFunctionDeleteButton},getFilterBootonDefaultFunction:function(){return this[0].prop.toolbar.defaultFunctionFilterButton}}),$.fn.rup_maint("extend",{addChild:function(e){var t=[];null!==this.data("_children")&&void 0!==this.data("_children")&&(t=this.data("_children")),t.push(e),this.data("_children",t)},showFieldValidationErrors:function(e){return this.each(function(){var t,i=this,t=($.rup.i18nParse($.rup.i18n.base,"rup_maint.validateError"),null),r={};if("string"==typeof e)try{t=$.parseJSON(e)}catch(a){return i.prop.detailForm.validate().settings.feedback.rup_feedback("option","delay",null),i.prop.detailForm.validate().settings.feedback.rup_feedback("set",e,"error"),void i.prop.detailForm.validate().settings.feedback.rup_feedback("option","delay",1e3)}else t=e;if(void 0!==t.rupErrorFields||void 0!==t.rupFeedback)r=t.rupErrorFields;else{$.isArray(t)&&2===t.length&&(r=jQuery.isPlainObject(t[1])?t[1]:$.parseJSON(t[1]));var n={};$.each(r,function(e,t){if($.isArray(t)){var i=$.map(t,function(e,t){return"object"==typeof e?$.map(e,function(e,t){return e}):e});n[e]=i}else n[e]=t}),r=n}void 0!==r?(i.prop.detailForm.validate().submitted=$.extend(!0,i.prop.detailForm.validate().submitted,r),i.prop.detailForm.validate().invalid=r,i.prop.detailForm.validate().showErrors(r)):void 0!==t.rupFeedback&&i.prop.detailForm.validate().settings.feedback.rup_feedback("set",$.rup_utils.printMsg(t.rupFeedback.message),void 0!==t.rupFeedback.imgClass?t.rupFeedback.imgClass:null)})},appendRupFieldsData:function(e){return this.each(function(){var t,i,r,a=this;t=a.prop.jQueryGrid.rup_grid("getColModel");for(var n=0;n<t.length;n+=1)t[n].formatterOnUpdate?e[t[n].name]=t[n].formatterOnUpdate.call($(this),a.prop.detailForm):"combo"===t[n].rupType&&"string"==typeof t[n].editoptions.source&&t[n].editoptions.sourceParam.label&&(i=t[n].name,i.indexOf(".")!==-1&&(r=i.substring(0,i.lastIndexOf("."))),r+="."+t[n].editoptions.sourceParam.label,i=a.prop.customDetailForm?$("[name='"+i+"']",a.prop.detailForm[0]).attr("id"):"detailForm_"+a.prop.name+"_"+i.replace(/[.]/g,"_"),e[r]=$("[id='"+i+"']",a.prop.detailForm[0]).rup_combo("label"));return this})},_addValidation:function(e){var t=this,i=t[0].prop;$(".validableElem",e).die("change"),$(".validableElem",e).live("change",function(){var e=[],r=this;e.push({name:"property",value:this.name}),e.push({name:"bean",value:i.modelObject}),e.push({name:"value",value:$(this).val()}),$.rup_ajax({url:i.validationUrl,dataType:"json",type:"POST",data:e,contentType:"application/x-www-form-urlencoded; charset=UTF-8",success:function(e,t){var a=$("#"+i.detailDiv[0].id+" .rup-maint_validateIcon").parent().find("#shipmentinfo");0!=a.length&&a.parent().find("img.rup-maint_validateIcon").remove(),r=null,i.detailFeedback.rup_feedback("close")},error:function(e,r,a){var n=$.rup.i18nParse($.rup.i18n.base,"rup_maint.validateError");null!==e.responseText&&""!==e.responseText&&(406===e.status?t.rup_maint("showFieldValidationErrors",e.responseText):(i.detailFeedback.rup_feedback("option","delay",null),i.detailFeedback.rup_feedback("set",n,"error"),i.detailFeedback.rup_feedback("option","delay",1e3)))}})})},_checkDetailFormModifications:function(e){var t=this,i=t[0].prop;$.param(t._getDataForFormModifications(i.detailForm))!==i.detailForm.data("initialData")?$.rup_messages("msgConfirm",{message:$.rup.i18nParse($.rup.i18n.base,"rup_maint.saveAndContinue"),title:$.rup.i18nParse($.rup.i18n.base,"rup_maint.changes"),
OKFunction:function(){$(this).dialog("destroy").remove(),e.call()}}):e.call()},_getDataForFormModifications:function(e){return $.merge(e.serializeArray(),$.map($("input[type='file']",e),function(e,t){return{name:$(e).attr("name"),value:$(e).attr("value")}}))},_checkSelectedElements:function(e){var t=this,i=t[0].prop,r=i.selectedRows,a=!1;if(r)for(var n=0;n<r.length;n++)if(r["p_"+(n+1)].length>0){a=!0;break}i.showMultiselectAlerts&&a?$.rup_messages("msgConfirm",{message:$.rup.i18nParse($.rup.i18n.base,"rup_maint.checkSelectedElems"),title:$.rup.i18nParse($.rup.i18n.base,"rup_maint.changes"),OKFunction:function(){e.call()}}):e.call()},_checkValidRowId:function(e,t){var i=this,r=i[0].prop,a=r.jQueryGrid;return 0!==$("#"+e,a[0]).length||("function"==typeof t&&$(t(i)),!1)},_createData:function(e,t){var i,r,a,n,o,s=this,l=s[0].prop,d=l.jQueryGrid,u=$("<form>").attr("id","detailForm_"+l.name),c=d[0];return t.append(u),e.append(t),$("#"+l.name).append(e),$(c.p.colModel).each(function(e){if(a="",i=this.name,o=this.editoptions,"cb"!==i&&this.editable===!0){var t=$.extend({},o||{},{id:i,name:i});if(this.edittype?"hidden"===this.edittype&&(this.edittype="text",a="display:none"):this.edittype="text",t.id="detailForm_"+l.name+"_"+t.id.replace(/[.]/g,"_"),n=$.jgrid.createEl(this.edittype,t,"",!1,$.extend({},$.jgrid.ajaxOptions,c.p.ajaxSelectOptions||{})),$(n).attr("class","formulario_linea_input"),"individual"===l.validationMode&&this.editRules&&this.editRules.validate&&$(n).addClass("validableElem"),r=$("<div>").attr("id","rup-maint_detailInput_"+n.id).addClass("floating_left_pad_right").append("<p>").html("<label for='"+n.id+"' >"+("undefined"==typeof this.label?c.p.colNames[e]:this.label)+"</label>").append("<br>").append(n).appendTo(u),""!==a&&r.attr("style",a),this.rupType)if("numeric"===this.rupType)$(n).numeric(","),$(n).addClass("numeric");else if("integer"===this.rupType)$(n).numeric(!1),$(n).addClass("integer");else if("datepicker"===this.rupType)$(n).rup_date(o),$(n).addClass("datepicker");else{if(o&&void 0===o.i18nId&&(o.i18nId=d.attr("id")+"##"+this.name),"combo"===this.rupType&&o.parent){var s="detailForm_"+l.name+"_";$.each(o.parent,function(e,t){o.parent[e].indexOf(s)===-1&&(o.parent[e]=s+o.parent[e].replace(/[.]/g,"_"))})}$(n)["rup_"+this.rupType](o)}}}),u},_createDetailForm:function(e){var t=this,i=t[0].prop,r=null,a="",n="",o=null,s=t._createDetailNavigation();s="<div id='pagination_"+i.name+"' style='float:left;font-size:11px'><img alt='"+$.rup.i18nParse($.rup.i18n.base,"rup_maint.numResult")+"' src='"+i.imgPath+"/numero_elementos.png'/> <div id='rup_maint_selectedElements_"+i.name+"' style='float: right; margin-left: 3px; margin-top: 2px; position: relative;'> </div></div>"+s+"<div style='clear:both'/> </div>",e?(r=i.detailForm.parent(),$("#"+i.detailForm.attr("id")+" .datepicker").each(function(){$(this).rup_date()}),$("#"+i.detailForm.attr("id")+" .numeric").each(function(){$(this).numeric(",")}),$("#"+i.detailForm.attr("id")+" .integer").each(function(){$(this).numeric(!1)}),n=$("<div/>").attr("id","rup-feedback_detail_"+i.name),r.prepend(n),0===$("#pagination_"+i.name,r).length&&r.prepend(s),n.rup_feedback({closeLink:!0,gotoTop:!1,block:!1,delay:1e3,fadeSpeed:500}),i.detailFeedback=n):($("#detailDiv_"+i.name).length>0&&$("#detailDiv_"+i.name).parent().remove(),r=$("<div/>").attr("id","detailDiv_"+i.name).attr("title",$.rup.i18nParse($.rup.i18n.base,"rup_maint.detailTitle")).attr("style","display:none"),a=$("<div/>").attr("id","detailBody").attr("style","padding-top:0.6em;"),r.append(s),n=$("<div/>").attr("id","rup-feedback_detail_"+i.name),a.append(n),n.rup_feedback({closeLink:!0,gotoTop:!1,block:!1,delay:1e3,fadeSpeed:500}),i.detailFeedback=n,o=t._createData(r,a),i.detailForm=$("#detailForm_"+i.name).ajaxForm()),t._createNavigationButtons(),t[0].prop.detailDiv=r,t._addValidation(i.detailForm)},_createDetailNavigation:function(){var e=this,t=e[0].prop;return"<div id='rup-maint_detailPagination' style='border-bottom:1px solid #D1D1D1'><div id='pag_"+t.name+"' style='float:right'><a href='#' id='first_"+t.name+"' alt='"+$.rup.i18nParse($.rup.i18n.base,"rup_maint.first")+"' class='rup-maint_linkPaginacionDetalle'>"+$.rup.i18nParse($.rup.i18n.base,"rup_maint.first")+"</a><a href='#' id='back_"+t.name+"' alt='"+$.rup.i18nParse($.rup.i18n.base,"rup_maint.previous")+"' class='rup-maint_linkPaginacionDetalle'>"+$.rup.i18nParse($.rup.i18n.base,"rup_maint.previous")+"</a><a href='#' id='forward_"+t.name+"' alt='"+$.rup.i18nParse($.rup.i18n.base,"rup_maint.next")+"' class='rup-maint_linkPaginacionDetalle'>"+$.rup.i18nParse($.rup.i18n.base,"rup_maint.next")+"</a><a href='#' id='last_"+t.name+"' alt='"+$.rup.i18nParse($.rup.i18n.base,"rup_maint.last")+"' class='rup-maint_linkPaginacionDetalle'>"+$.rup.i18nParse($.rup.i18n.base,"rup_maint.last")+"</a></div>"},_createNavigationButtons:function(){var e=this,t=e[0].prop;$("#back_"+t.name).click(function(t){return!$(this).hasClass("ui-state-disabled")&&void e._checkDetailFormModifications(function(){e._editPreviousElement()})}),$("#forward_"+t.name).click(function(t){return!$(this).hasClass("ui-state-disabled")&&void e._checkDetailFormModifications(function(){e._editNextElement()})}),$("#first_"+t.name).click(function(t){return!$(this).hasClass("ui-state-disabled")&&void e._checkDetailFormModifications(function(){e._editFirstElement()})}),$("#last_"+t.name).click(function(t){return!$(this).hasClass("ui-state-disabled")&&void e._checkDetailFormModifications(function(){e._editLastElement()})})},_createDetailButtons:function(e){var t=this,i=t[0].prop,r=null;switch(i.detailButtons){case $.rup.maint.detailButtons.SAVE_REPEAT:r=[{text:$.rup.i18nParse($.rup.i18n.base,"rup_global.save"),click:function(){t.rup_maint("saveMaint"),i.MODO=null}},{text:$.rup.i18nParse($.rup.i18n.base,"rup_global.save_repeat"),click:function(){t.rup_maint("saveMaint",!0)}},{text:$.rup.i18nParse($.rup.i18n.base,"rup_global.cancel"),click:function(){return t._checkDetailFormModifications(function(){i.detailDiv.rup_dialog("close"),i.MODO=null}),$("#"+i.detailDiv[0].id+" .rup-maint_validateIcon").remove(),i.detailFeedback.rup_feedback("close"),$(jqGrid).rup_grid("isEditable")||$(jqGrid).rup_grid("isMultiselect")||null!==$(jqGrid).rup_grid("getGridParam","selrow")||$(jqGrid).rup_grid("setSelection",$(jqGrid).rup_grid("getDataIDs")[0],!1),!1},btnType:$.rup.dialog.LINK}];break;case $.rup.maint.detailButtons.SAVE:default:r=[{text:$.rup.i18nParse($.rup.i18n.base,"rup_global.save"),click:function(){t.rup_maint("saveMaint")}},{text:$.rup.i18nParse($.rup.i18n.base,"rup_global.cancel"),click:function(){return t._checkDetailFormModifications(function(){i.detailDiv.rup_dialog("close")}),$("#"+i.detailDiv[0].id+" .rup-maint_validateIcon").remove(),i.detailFeedback.rup_feedback("close"),$(jqGrid).rup_grid("isEditable")||$(jqGrid).rup_grid("isMultiselect")||null!==$(jqGrid).rup_grid("getGridParam","selrow")||$(jqGrid).rup_grid("setSelection",$(jqGrid).rup_grid("getDataIDs")[0],!1),!1},btnType:$.rup.dialog.LINK}]}e.rup_dialog("setOption","buttons",r)},_deselectAddedElements:function(){var e=this,t=e[0].prop;t.MODO=null,$(e[0]).find(" tr.addElement td input[type='checkbox'].cbox:checked").click(),t.jQueryGrid.rup_grid("reloadGrid")},_ellipsisDeleteOnEdit:function(e){e.parent().removeClass("ui-ellipsis")},ellipsisRestoreOnEdit:function(){var e,t,i=this,r=i[0].prop;t=jqGrid.getInd(r.lastsel,!0),e=jqGrid.rup_grid("getColModel");for(var a=0;a<e.length;a++)void 0!==e[a].classes&&e[a].classes.indexOf("ui-ellipsis")!==-1&&$("[aria-describedby='"+jqGrid.attr("id")+"_"+e[a].name+"']",t).addClass("ui-ellipsis")},_loadComplete:function(e){var t=this,i=t[0].prop,r=i.jQueryGrid;i.lastsel=null,$.data(r[0],"numPags",parseInt(e.total)),0==e.records?(i.toolbar.self.disableButton("delete"),i.jQueryGrid.rup_grid("isEditable")?i.toolbar.self.disableButton("cancel"):i.toolbar.self.disableButton("edit")):(i.toolbar.self.enableButton("delete"),i.jQueryGrid.rup_grid("isEditable")?(i.toolbar.self.disableButton("cancel"),i.toolbar.self.enableButton("new")):i.toolbar.self.enableButton("edit"),i.jQueryGrid.rup_grid("isMultiselect")&&(i.selectedRowsCont>0?(i.toolbar.self.enableButton("edit"),i.toolbar.self.enableButton("delete")):(i.toolbar.self.disableButton("edit"),i.toolbar.self.disableButton("delete"))))},_onAfterGridComplete:function(e,t){var i=this,r=i[0].prop,a=r.jQueryGrid;a.rup_grid("getGridParam","page");return a.rup_grid("isMultiselect")?"new"!==r.MODO&&i._markSelectedRows_multiselect():(null===e?a.rup_grid("getDataIDs").length>0&&(a.rup_grid("isEditable")?a.rup_grid("setSelection",a.rup_grid("getDataIDs")[0],!1):a.rup_grid("setSelection",a.rup_grid("getDataIDs")[0],!0)):a.rup_grid("getDataIDs").length>0&&(a.rup_grid("isEditable")?a.rup_grid("setSelection",e,!1):a.rup_grid("setSelection",e,!0)),void(e&&i.rup_maint("editElement",e)))},_ondblClickRow:function(e,t,i,r){var a=this,n=a[0].prop;$("body").data("e_click_mnt",!1),window.clearTimeout($("body").data("clicktimer_mnt")),n.jQueryGrid.rup_grid("isMultiselect")||n.jQueryGrid.rup_grid("isEditable")||(n.MODO="edit",a.rup_maint("editElement",e),$("#"+e,a).click())},_saveMaintSuccess:function(e,t,i,r,a){var n,o,s=this,l=s[0].prop,d=l.jQueryGrid;if(n=$.rup_utils.unnestjson(e),l.feedback.rup_feedback("close"),l.jQueryGrid.rup_grid("isEditable"))l.toolbar.self.disableButton("cancel"),l.toolbar.self.enableButton("new"),d.rup_grid("saveRow",l.lastsel,rup_maint.saveEditableSucces,"clientArray",null,null,rup_maint.saveEditableError,null),l.showMessages&&("new"===l.MODO?l.feedback.rup_feedback("set",$.rup.i18nParse($.rup.i18n.base,"rup_maint.insertOK"),"ok"):l.feedback.rup_feedback("set",$.rup.i18nParse($.rup.i18n.base,"rup_maint.modifyOK"),"ok")),o=d.rup_grid("getInd",l.lastsel,!0),o!==!1&&($(o).attr("id",n[l.primaryKey]),l.lastsel=n[l.primaryKey]),s.data("initialData",null);else if(s.rup_maint("appendRupFieldsData",n),i?(l.showMessages&&("new"===l.MODO?(s.rup_maint("resetForm",l.detailForm),l.detailFeedback.rup_feedback("set",$.rup.i18nParse($.rup.i18n.base,"rup_maint.insertOK"),"ok")):l.detailFeedback.rup_feedback("set",$.rup.i18nParse($.rup.i18n.base,"rup_maint.modifyOK"),"ok")),l.detailForm.data("initialData",s.rup_maint("getSerializedForm",l.detailForm))):(s.rup_maint("resetForm",l.detailForm),l.showMessages&&("new"===l.MODO?l.feedback.rup_feedback("set",$.rup.i18nParse($.rup.i18n.base,"rup_maint.insertOK"),"ok"):l.feedback.rup_feedback("set",$.rup.i18nParse($.rup.i18n.base,"rup_maint.modifyOK"),"ok")),l.detailDiv.rup_dialog("close")),"new"===l.MODO){var u=d.rup_grid("getDataIDs"),c=Math.max.apply(Math,u)+1;d.rup_grid("addRowData",c,n,"first"),d.rup_grid("isMultiselect")||(d.rup_grid("setSelection",c,!0),l.toolbar.self.enableButton("edit"),l.toolbar.self.enableButton("delete"))}else if(d.rup_grid("isMultiselect")){var p=l.currentSelectedRow;d.rup_grid("setRowData",p,n)}else d.rup_grid("setRowData",d.rup_grid("getSelectedRows")[0],n);return s.rup_maint("ellipsisRestoreOnEdit"),a&&a.call(),!1},_saveMaintError:function(e,t,i,r,a){var n=this,o=n[0].prop,s=o.jQueryGrid;$.rup.i18nParse($.rup.i18n.base,"rup_maint.validateError");if(s.rup_grid("isEditable")||$("#"+o.detailDiv[0].id+" img.rup-maint_validateIcon").remove(),null!==e.responseText&&""!==e.responseText&&406===e.status&&n.rup_maint("showFieldValidationErrors",e.responseText),a&&a.call(),void 0!==r&&null!==r&&void 0!==s.data("Collection_rup_combo")){var l=s.data("Collection_rup_combo")[r];$.each(l,function(t,i){i[0];i.label=s.rup_grid("getCol",r,t),i.value=e[t]})}return!1},_serializeGridData:function(e){var t=this,i=t[0].prop;if("rup"!==e.page)return e;if(e.page=1,null!==i.searchForm){for(var r=i.searchForm.serializeArray(),a=0;a<r.length;a++)delete e[r[a].name];void 0!==e.page&&null!==e.page&&Number(e.page)>$(this).rup_grid("getGridParam","lastpage")&&$(this).rup_grid("getGridParam","lastpage")>0&&(e.page=$(this).rup_grid("getGridParam","lastpage"));var n=$.map($.makeArray(i.searchForm.find("[name]")),function(e){return $(e).attr("name")});$.each(n,function(t){delete e[n[t]]}),$.extend(e,$.rup_utils.unnestjson(form2object(i.searchForm[0])))}if(i.parent){var o=$("#"+i.parent),s=o.rup_maint("getPrimaryKey").split(";"),l={},d=o[0].prop.jQueryGrid.rup_grid("getSelectedRows")[0];if(s.length>1)for(var a=0;a<s.length;a++)l[$.rup_utils.firstCharToLowerCase(o[0].prop.modelObject)+s[a]]=o[0].prop.jQueryGrid.rup_grid("getCol",d,s[a])+";";else{var u=s[0].substring(0,1).toUpperCase()+s[0].substring(1);l[$.rup_utils.firstCharToLowerCase(o[0].prop.modelObject)+u]=o[0].prop.jQueryGrid.rup_grid("getCol",d,s[0])}$.extend(e,l)}return e}}),$.fn.rup_maint("extend",{_init:function(e){var t,i,r,a=this,n=[2],o=a[0].prop,s=this,l={};if(null===e[0].jQueryGrid)return $.rup_messages("msgError",{message:$.rup.i18nParse($.rup.i18n.base,"rup_maint.noGrid")}),!1;if(e[0].jQueryGrid=$("#"+e[0].jQueryGrid),l=$.extend(!0,{},$.fn.rup_maint.defaults,e[0]),"string"==typeof e[0].toolbar&&(l.toolbar=$.fn.rup_maint.defaults.toolbar,l.toolbar.id=e[0].toolbar),void 0!==e[0].autoAjustToolbar&&(l.toolbar.autoAjustToolbar=e[0].autoAjustToolbar),void 0!==e[0].createDefaultToolButtons&&(l.toolbar.createDefaultToolButtons=e[0].createDefaultToolButtons),l.name=a[0].id,a[0].prop=l,o=a[0].prop,jqGrid=o.jQueryGrid,$.data(jqGrid[0],"maintName",a[0].id),o.selectedRows=[],o.selectedRowsCont=0,o.currentSelectedRow=0,o.lastsel=null,jqGrid.rup_grid("isEditable")||(o.lazyLoadDetailForm?o.isLazyCreationDone=!1:a.rup_maint("defineDetailForm")),o.toolbar.defaultFunctionAddButton=function(){a._checkSelectedElements(function(){o.jQueryGrid.rup_grid("resetSelection"),$.data(s[0].prop.jQueryGrid[0],"allSelected",null),$.data(s[0].prop.jQueryGrid[0],"deSelectedPages",[]),s.rup_maint("newElement")}),o.MODO="new"},o.toolbar.defaultFunctionCancelButton=function(){s.rup_maint("cancelEditing",this)},o.toolbar.defaultFunctionEditButton=function(){var e,t=a[0].prop.jQueryGrid.rup_grid("getGridParam","selrow"),i=jqGrid.rup_grid("getGridParam","page");if(jqGrid.rup_grid("isMultiselect")){if(e=a._getFirstElement(i),void 0===e)return!1;o.currentSelectedRow=e.rowId,e.page!==i&&(o.jQueryGrid.rup_grid("setGridParam",{page:e.page}),o.jQueryGrid.rup_grid("reloadGrid",function(){o.currentSelectedRow=e.rowId})),o.MODO="edit",a.rup_maint("editElement",e.rowId)}else o.MODO="edit",o.currentSelectedRow=t,a.rup_maint("editElement",t);return!1},o.toolbar.defaultFunctionDeleteButton=function(){a.rup_maint("deleteElement",o.jQueryGrid.rup_grid("getGridParam","selrow"))},o.toolbar.defaultFunctionFilterButton=function(){a.rup_maint("toggleSearchForm","FIELDSET_SEARCH_"+o.name)},null!==o.toolbar.id&&void 0!==o.toolbar.id?o.toolbar.self=$("#"+o.toolbar.id):(o.toolbar.id="rup-maint_toolbar-"+o.name,o.toolbar.self=$("<div/>").attr("id",o.toolbar.id),a.prepend(o.toolbar.self),o.toolbar.self.rup_toolbar({width:796})),o.toolbar.autoAjustToolbar&&o.toolbar.self.css("width",o.jQueryGrid.rup_grid("getGridParam","width")-5),o.toolbar.createDefaultToolButtons&&(o.toolbar.defaultAdd&&(a[0].prop.btnNew=o.toolbar.self.addButton({i18nCaption:"new",css:"rup-icon rup-icon-new",index:1},$.rup.i18nParse($.rup.i18n.base,"rup_maint")).bind("click",o.toolbar.defaultFunctionAddButton)),o.toolbar.defaultCancel&&o.jQueryGrid.rup_grid("isEditable")&&(a[0].prop.btnCancel=o.toolbar.self.addButton({i18nCaption:"cancel",css:"rup-icon rup-icon-cancel",index:2},$.rup.i18nParse($.rup.i18n.base,"rup_maint")).bind("click",o.toolbar.defaultFunctionCancelButton).button("option","disabled",!0)),o.toolbar.defaultEdit&&(o.jQueryGrid.rup_grid("isEditable")||(a[0].prop.btnEdit=o.toolbar.self.addButton({i18nCaption:"edit",css:"rup-icon rup-icon-edit",index:2},$.rup.i18nParse($.rup.i18n.base,"rup_maint")).bind("click",o.toolbar.defaultFunctionEditButton))),o.toolbar.defaultDelete&&(o.btnDelete=l.toolbar.self.addButton({i18nCaption:"delete",css:"rup-icon rup-icon-delete",index:3},$.rup.i18nParse($.rup.i18n.base,"rup_maint")).bind("click",o.toolbar.defaultFunctionDeleteButton)),o.toolbar.defaultFilter&&(o.btnFilter=l.toolbar.self.addButton({i18nCaption:"filter",css:"rup-icon rup-icon-filter",index:4},$.rup.i18nParse($.rup.i18n.base,"rup_maint")).bind("click",o.toolbar.defaultFunctionFilterButton),o.toolbar.self.pressButton("filter","rup-maint_filter_pressed"))),void 0!==o.toolbar.newButtons&&null!==o.toolbar.newButtons&&$.each(o.toolbar.newButtons,function(e,t){if(void 0===t.json_i18n&&(t.json_i18n={}),void 0!==t.obj&&void 0!==t.click)o.toolbar.self.addButton(t.obj,t.json_i18n).bind("click",t.click);else if(void 0!==t.buttons){var i=o.toolbar.self.addMButton(t,t.json_i18n).bind("click",o.toolbar.self.showMButton);o.toolbar.self.addButtonsToMButton(t.buttons,i,t.json_i18n)}else $.rup.errorGestor($.rup.i18nParse($.rup.i18n.base,"rup_maint.toolbarNewButtonError"))}),null!==o.feedback){if("object"!=typeof o.feedback){$.rup_utils.escapeId(o.feedback);o.feedback=$($.rup_utils.selectorId(o.feedback))}}else{o.feedback=$("<div/>").attr("id","feedback_"+o.name),a.prepend(o.feedback),o.feedback.rup_feedback({type:"ok",closeLink:!0,delay:1e3,fadeSpeed:500,block:!!o.showFeedback});var d=parseInt(o.feedback.css("padding-left")),u=parseInt(o.feedback.css("padding-right"));o.feedback.css("width",o.jQueryGrid.rup_grid("getGridParam","width")-(d+u))}if(null!==o.searchForm&&($("#titleSearch_"+o.name).text($.rup.i18nParse($.rup.i18n.base,"rup_maint.searchOptions")),o.searchForm=$("#"+o.searchForm),o.searchForm.ajaxForm(),o.searchForm.parent().css("width",o.jQueryGrid.rup_grid("getGridParam","width")),o.searchURL=l.jQueryGrid.rup_grid("getGridParam","url"),o.searchForm.bind("keydown",function(e){13==e.keyCode&&a.rup_maint("search")}),t=$("<input type='button' />").attr("id","bt_search_"+o.name).bind("click",function(){jqGrid.rup_grid("isMultiselect")?a._checkSelectedElements(function(){o.jQueryGrid.rup_grid("resetSelection"),$.data(s[0].prop.jQueryGrid[0],"allSelected",null),$.data(s[0].prop.jQueryGrid[0],"deSelectedPages",[]),a.rup_maint("search")}):a.rup_maint("search")}),t.button({label:$.rup.i18nParse($.rup.i18n.base,"rup_global.search")}),i=$("<a href='#' />").attr("id","clean_search_"+o.name).attr("class","rup-enlaceCancelar").text($.rup.i18nParse($.rup.i18n.base,"rup_global.clean")).bind("click",function(){a.rup_maint("cleanSearchForm")}),r=$("<div>").attr("id","SEARCH_FORM_BUTTONS_"+o.name).addClass("right_buttons").append(t).append("&nbsp;").append(i).append("&nbsp;"),$("#FIELDSET_SEARCH_"+o.name).append(r)),o.parent&&$("#"+o.parent).length>0&&$("#"+o.parent).rup_maint("addChild",a[0].id),jqGrid.data("defaultEventFunctions").loadComplete_default=function(e){a._loadComplete(e)},jqGrid.data("defaultEventFunctions").ondblClickRow_default=function(e,t,i,r){a._ondblClickRow(e,t,i,r)},jqGrid.data("defaultEventFunctions").serializeGridData_default=function(e,t){return a._serializeGridData(e)},jqGrid[0].rup_gridProps.onAfterGridComplete=function(e,t){return a._onAfterGridComplete(e,t)},jqGrid.rup_grid("isMultiselect")){jqGrid[0].rup_gridProps.resetSelection=function(){return a._resetSelection_multiselect()},jqGrid[0].rup_gridProps.onAfterSelectRow=function(e,t){return a._onAfterSelectRow_multiselect(e,t)},jqGrid[0].rup_gridProps.selectAllGetPrimaryKeys=function(){return a._selectAllGetPrimaryKeys_multiselect()},jqGrid[0].rup_gridProps.onAfterSelectAll=function(e,t,i){return a._onAfterSelectAll_multiselect(e,t,i)},jqGrid[0].rup_gridProps.onSelectAllRows=function(){return a._onSelectAllRows_multiselect()},jqGrid[0].rup_gridProps.onDeSelectAllRows=function(){return a._onDeSelectAllRows_multiselect()},jqGrid.data("defaultEventFunctions").onPaging_default=function(e){return a._onPaging_multiselect(e)},jqGrid.data("defaultEventFunctions").onSortCol_default=function(e,t,i){return a._onSortCol_multiselect(e,t,i)};var c="pg_"+jqGrid[0].rup_gridProps.pagerName;$(".ui-pg-selbox","#"+c).unbind("change"),$(".ui-pg-selbox","#"+c).bind("change",function(){var e=(o.selectedRows,this.value),t=this;jqGrid[0].p.rowNum;$(this).val(jqGrid[0].p.rowNum),a._checkSelectedElements(function(){return $(t).val(e),jqGrid.rup_grid("resetSelection"),$.data(jqGrid[0],"allSelected",null),$.data(jqGrid[0],"deSelectedPages",[]),jqGrid[0].p.page=Math.round(jqGrid[0].p.rowNum*(jqGrid[0].p.page-1)/e-.5)+1,jqGrid[0].p.rowNum=e,jqGrid[0].grid.populate(),!1})})}if(jqGrid.rup_grid("isEditable")){var p=$("<form>").attr("id","detailForm_"+o.name);jqGrid.wrap(p),o.detailForm=$("#detailForm_"+o.name),jqGrid.data("defaultEventFunctions").onCellSelect_default=function(e,t,i,r){return a._onCellSelect_editline(e,t,i,r)},jqGrid[0].rup_gridProps.onAfterSelectRow=function(e,t){a._onAfterSelectRow_editline(e,t)},jqGrid[0].rup_gridProps.onAfterDragAndDrop=function(e){a._onAfterDragAndDrop_editline(e)},jqGrid.data("defaultEventFunctions").resizeStart_default=function(e,t){n[0]=$("#gbox_GRID_"+a[0].id+" .ui-jqgrid-htable th:eq(1)").css("cursor"),"col-resize"===n[0]&&(n[0]="default"),$("#gbox_GRID_"+a[0].id+" .ui-jqgrid-htable th").css("cursor","col-resize"),n[1]=$("#gbox_"+a[0].id+" .ui-jqgrid-sortable").css("cursor"),$("#gbox_GRID_"+a[0].id+" .ui-jqgrid-sortable").css("cursor","col-resize"),$("#gbox_GRID_"+a[0].id+" .ui-jqgrid-sortable div").css("cursor","col-resize"),$("#gbox_GRID_"+a[0].id+" .ui-grid-ico-sort").css("cssText","cursor: col-resize !important;")},jqGrid.data("defaultEventFunctions").resizeStop_default=function(e,t){$("#gbox_GRID_"+a[0].id+" .ui-jqgrid-htable th").css("cursor",n[0]),$("#gbox_GRID_"+a[0].id+" .ui-jqgrid-sortable").css("cursor",n[1]),$("#gbox_GRID_"+a[0].id+" .ui-jqgrid-sortable div").css("cursor","pointer"),$("#gbox_GRID_"+a[0].id+" .ui-grid-ico-sort").css("cssText","cursor: pointer !important;"),$("#"+a[0].id+" ul.rup_combo[rup_combo_col_position = "+t+"]").width($("#"+a[0].id+" a.rup_combo[rup_combo_col_position = "+t+"]").width())}}if(jqGrid.rup_grid("isEditable")?a.rup_maint("defineValidationConfig"):o.lazyLoadDetailForm||a.rup_maint("defineValidationConfig"),jqGrid[0].rup_gridProps.loadOnStartUp&&(a.rup_maint("search"),!jqGrid.rup_grid("isMultiselect")&&!jqGrid.rup_grid("isEditable"))){var h=jqGrid[0].p.onSelectRow;jqGrid[0].p.onSelectRow=function(e,t){var i=$(this);h&&h.call(i,[e,t]),$("body").data("e_click_mnt",!0),$("body").data("clicktimer_mnt",window.setTimeout(function(){if($("body").data("e_click_mnt")&&($("body").data("e_click_mnt",!1),window.clearTimeout($("body").data("clicktimer_mnt")),clearTimeout($("body").data("clicktimer_mnt")),$("body").data("clicktimer_mnt",null),s.data("_children")))for(var e=a.data("_children").length,t=0;t<e;t++)$("#"+a.data("_children"))[t].prop.jQueryGrid[0].p.ajaxGridOptions={async:!0},$("#"+a.data("_children"))[t].prop.jQueryGrid.rup_grid("setGridParam",{page:"rup"}),$("#"+a.data("_children"))[t].prop.jQueryGrid.rup_grid("reloadGrid")},300))}}$(jqGrid).bind("fluidWidth.resize",function(e,t,i){$("#"+o.name).children().width(i);var r=parseInt(o.feedback.css("padding-left")),a=parseInt(o.feedback.css("padding-right"));if(o.feedback.width(i-(r+a)),o.toolbar.autoAjustToolbar){var n=parseInt(o.toolbar.self.css("padding-left")),s=parseInt(o.toolbar.self.css("padding-right"));o.toolbar.self.width(i-(n+s)),o.toolbar.self.css("width",i-(n+s))}}),"auto"===jqGrid[0].rup_gridProps.width&&$(jqGrid).fluidWidth({fluidBaseLayer:jqGrid[0].rup_gridProps.fluidBaseLayer,minWidth:jqGrid[0].rup_gridProps.minWidth,maxWidth:jqGrid[0].rup_gridProps.maxWidth,fluidOffset:jqGrid[0].rup_gridProps.fluidOffset}),$(jqGrid.rup_grid("getColModel")).each(function(e,t){"ui-ellipsis"===t.classes&&$("[id='jqgh_"+$(jqGrid).attr("id")+"_"+t.name+"']").css("display","block").css("text-overflow","ellipsis");var i=$("[id='jqgh_"+$(jqGrid).attr("id")+"_"+t.name+"']").children("div");$(i).replaceWith($("<span>").text($(i).text()).css("cursor","pointer"))})}}),$.fn.rup_maint.defaults={contentPercentage:.9,fluidOffset:0,fluid:!0,clearSearchFormMode:"clear",detailButtons:$.rup.maint.detailButtons.SAVE_REPEAT,detailDiv:null,detailForm:null,detailServer:!0,eventCreateDetailForm:void 0,feedback:null,imgPath:$.rup.RUP+"/basic-theme/images",jQueryGrid:null,lazyLoadDetailForm:!1,modelObject:null,MODO:null,name:null,onafterDetailShow:null,onbeforeDetailShow:null,parent:null,primaryKey:null,rupCheckStyle:!0,searchForm:null,showFeedback:!0,showMessages:!1,showMultiselectAlerts:!0,toolbar:{autoAjustToolbar:!0,createDefaultToolButtons:!0,defaultAdd:!0,defaultEdit:!0,defaultCancel:!0,defaultDelete:!0,defaultFilter:!0},validation:null,validationMode:"individual",validationFilter:!0,validationUrl:$.rup.CTX_PATH+"validate",filterExclude:new Array}}(jQuery),function(e){e.fn.rup_maint("extend",{selectRow:function(t,i){var r,a,n,o,s=this,l=s[0].prop,d=l.jQueryGrid;r=l.jQueryGrid.rup_grid("getGridParam","page"),a=l.jQueryGrid.rup_grid("getInd",t,!1),n=s._getPrimaryKeysForRow(t),void 0===l.selectedRows["p_"+r]&&(l.selectedRows["p_"+r]=[],l.selectedRows.push(Number(r))),void 0===l.selectedRows["p_"+r]["l_"+a]&&(l.selectedRows["p_"+r]["l_"+a]=[],l.selectedRows["p_"+r].push(Number(a))),void 0===l.selectedRows["p_"+r]["l_"+a]["id_"+t]&&(l.selectedRows["p_"+r]["l_"+a]["id_"+t]=n,l.selectedRows["p_"+r]["l_"+a].push(t),void 0!==i&&i!==!0||(l.selectedRowsCont+=1,e.data(d[0],"selectedRowsCont",Number(e.data(d[0],"selectedRowsCont")+1))),d[0].rup_gridProps.allPksArray.push(n),o=e.data(d[0],"deSelectedPages"),void 0!=o&&(ind=e.inArray(r,void 0!=o?o:[]),ind>-1&&(o.splice(ind,1),e.data(d[0],"deSelectedPages",o)))),l.currentSelectedRow=t},deselectRow:function(t){var i,r,a,n=this,o=n[0].prop,s=o.jQueryGrid;i=s.rup_grid("getGridParam","page"),r=s.rup_grid("getInd",t,!1),a=n._getPrimaryKeysForRow(t),n._isSelected(t,null,i,r)&&(delete o.selectedRows["p_"+i]["l_"+r],o.selectedRows["p_"+i].splice(e.inArray(r,o.selectedRows["p_"+i]),1)),ind=e.inArray(a,s[0].rup_gridProps.allPksArray),s[0].rup_gridProps.allPksArray.splice(ind,1),e.data(s[0],"selectedRowsCont",Number(e.data(s[0],"selectedRowsCont")-1)),o.selectedRowsCont-=1}}),e.fn.rup_maint("extend",{defineDetailForm:function(){var t=this,i=t[0].prop;null!==i.detailForm?(i.customDetailForm=!0,i.detailForm=e("#"+i.detailForm).ajaxForm(),t._createDetailForm(!0)):(i.customDetailForm=!1,t._createDetailForm()),i.detailDiv.rup_dialog({type:jQuery.rup.dialog.DIV,autoOpen:!1,modal:!0,width:void 0!==i.detailDivWidth?i.detailDivWidth:569,height:void 0!==i.detailDivHeight?i.detailDivHeight:"auto",specificLocation:i.name,create:i.eventCreateDetailForm,open:function(){e(this).find(".ui-selectmenu-menu").each(function(t,i){e(i).appendTo(e(i).parents(".ui-dialog"))}),e(".ui-dialog").css("overflow","visible"),e.isFunction(i.onafterDetailShow)&&i.onafterDetailShow.call(t[0],i.detailDiv)},close:function(){e(jqGrid).rup_grid("isEditable")||e(jqGrid).rup_grid("isMultiselect")||null!==e(jqGrid).rup_grid("getGridParam","selrow")||e(jqGrid).rup_grid("setSelection",e(jqGrid).rup_grid("getDataIDs")[0],!1)}}),i.detailDiv.parent().find("#closeText_"+i.detailDiv.first()[0].id).parent().unbind("click").bind("click",function(){t._checkDetailFormModifications(function(){i.detailDiv.rup_dialog("close")})}),i.detailDiv.parent().find(".ui-dialog-titlebar-close").unbind("click").bind("click",function(){t._checkDetailFormModifications(function(){i.detailDiv.rup_dialog("close")})}),t._createDetailButtons(i.detailDiv),e.rup_utils.aplicatioInPortal()?i.detailDiv.dialog("widget").appendTo(e("div.r01gContainer")):i.detailDiv.dialog("widget").appendTo("body")},defineValidationConfig:function(){var t,i,r,a,n=this,o=n[0].prop;null!==o.validation&&void 0!==o.validation.rules?a=e.extend({feedback:jqGrid.rup_grid("isEditable")===!0?o.feedback:o.detailFeedback},o.validation):(t=jqGrid.rup_grid("getColModel"),i=e.map(t,function(e){return void 0!==e.validationrules?{name:e.name,value:e.validationrules}:null}),r={},e.each(i,function(e,t){r[t.name]=t.value}),a={rules:r,feedback:jqGrid.rup_grid("isEditable")===!0?o.feedback:o.detailFeedback}),jqGrid.rup_grid("isEditable")&&(a=e.extend(a,{errorPlacement:function(e,t){},feedbackErrorConfig:{getFieldName:function(e,t,i){for(var r=i.attr("name"),a=o.jQueryGrid.rup_grid("getColModel"),n=o.jQueryGrid.rup_grid("getGridParam","colNames"),s=!1,l=0;l<a.length&&!s;l+=1)if(a[l].name==r)return errorKey=n[l],errorKey;return r}}})),o.detailForm.rup_validate(a)},_isFirstSelectedElement:function(e){var t,i,r=this,a=r[0].prop;return t=a.selectedRows.sort(function(e,t){return e-t}),i=a.selectedRows["p_"+t[0]].sort(function(e,t){return e-t}),i["l_"+i[0]][0]===e},_isLastSelectedElement:function(e){var t,i,r=this,a=r[0].prop;return t=a.selectedRows.sort(function(e,t){return e-t}),i=a.selectedRows["p_"+t[t.length-1]].sort(function(e,t){return e-t}),i["l_"+i[i.length-1]][0]===e},_isSelected:function(e,t,i,r){var r,a=this,n=a[0].prop,o=n.jQueryGrid;return void 0===i&&(i=o.rup_grid("getGridParam","page")),void 0===r&&(r=o.rup_grid("getInd",e,!1)),void 0!==n.selectedRows["p_"+i]&&(void 0!==n.selectedRows["p_"+i]["l_"+r]&&void 0!==n.selectedRows["p_"+i]["l_"+r]["id_"+e])},_markSelectedRows_multiselect:function(){var t,i,r=this,a=r[0].prop,n=a.jQueryGrid,o=!1,s=0;t=n.rup_grid("getDataIDs"),i=n.rup_grid("getGridParam","page"),void 0!==a.selectedRows["p_"+i]&&(o=!0);for(var l=0;l<t.length;l++)rowNum=n.rup_grid("getInd",t[l],!1),r._isSelected(t[l],null,i,rowNum)?(n.rup_grid("setSelection",t[l],!0),s++):o||e.data(n[0],"allSelected")!==!0||(r.rup_maint("selectRow",t[l],!1),n.rup_grid("setSelection",t[l],!0));return a.selectedRows["p_"+i]&&a.selectedRows["p_"+i].length===n.rup_grid("getDataIDs").length?e("#cb_"+n[0].id).attr("checked",!0):e("#cb_"+n[0].id).attr("checked",!1),e.data(n[0],"rowsSelectedPage",s),!1},_onAfterSelectRow_multiselect:function(t,i){var r,a=this,n=a[0].prop,o=n.jQueryGrid,s=o.rup_grid("getGridParam","page");i?a.rup_maint("selectRow",t):a.rup_maint("deselectRow",t),r=n.selectedRowsCont,e("#cb_"+o[0].id).is(":checked")&&(r=Number(e.data(o[0],"selectedRowsCont"))-1,e("#cb_"+o[0].id).attr("checked",!1)),r=Number(e.data(o[0],"selectedRowsCont")),o.rup_grid("isMultiselect")&&(r>0?(n.toolbar.self.enableButton("edit"),n.toolbar.self.enableButton("delete")):(n.toolbar.self.disableButton("edit"),n.toolbar.self.disableButton("delete"))),n.selectedRows["p_"+s]&&n.selectedRows["p_"+s].length===o.rup_grid("getDataIDs").length?e("#cb_"+o[0].id).attr("checked",!0):e("#cb_"+o[0].id).attr("checked",!1),e("#"+o[0].rup_gridProps.pagerName+"_left").html(r+" "+e.rup.i18nParse(e.rup.i18n.base,"rup_grid.pager.selected")),e.data(o[0],"rowsSelectedPage",o.rup_grid("getGridParam","selarrrow").length)},_onAfterSelectAll_multiselect:function(t,i,r){var a,n=this,o=n[0].prop,s=o.jQueryGrid;if(a=s.rup_grid("getGridParam","page"),i)for(var l=0;l<t.length;l++)n.rup_maint("selectRow",t[l]);else for(var l=0;l<t.length;l++)n.rup_maint("deselectRow",t[l]);e.data(s[0],"selectedRowsCont",r),r>0?(o.toolbar.self.enableButton("edit"),o.toolbar.self.enableButton("delete")):(o.toolbar.self.disableButton("edit"),o.toolbar.self.disableButton("delete")),e("#"+s[0].rup_gridProps.pagerName+"_left").html(r+" "+e.rup.i18nParse(e.rup.i18n.base,"rup_grid.pager.selected"))},_onSelectAllRows_multiselect:function(){var t=this,i=t[0].prop,r=i.jQueryGrid;e.data(r[0],"selectedRowsCont",r.rup_grid("getGridParam","records")),e.data(r[0],"allSelected",!0),r[0].rup_gridProps.allPksArray=[],i.selectedRows=[],e("#"+r[0].rup_gridProps.pagerName+"_left").html(r.rup_grid("getGridParam","records")+" "+e.rup.i18nParse(e.rup.i18n.base,"rup_grid.pager.selected"))},_onDeSelectAllRows_multiselect:function(){var t=this,i=t[0].prop,r=i.jQueryGrid;e.data(r[0],"selectedRowsCont",0),e.data(r[0],"allSelected",!1),r[0].rup_gridProps.allPksArray=[],i.selectedRows=[],e("#"+r[0].rup_gridProps.pagerName+"_left").html("0 "+e.rup.i18nParse(e.rup.i18n.base,"rup_grid.pager.selected"))},_onPaging_multiselect:function(t){var i=this,r=i[0].prop,a=r.jQueryGrid,n=e(this).find(" tr.addElement td input[type='checkbox'].cbox:checked");if(n.length>0)return r.showMultiselectAlerts?e.rup_messages("msgConfirm",{
message:e.rup.i18nParse(e.rup.i18n.base,"rup_maint.checkAddedSelectedElems"),title:e.rup.i18nParse(e.rup.i18n.base,"rup_maint.changes"),OKFunction:function(e){i._deselectAddedElements()}}):i._deselectAddedElements(),!1;if("user"==t){var o=parseInt(e("td.pagControls .ui-pg-input",e("#gbox_"+a[0].id)).val());if(0===o)a.setGridParam({page:1});else{var s=parseInt(a.getGridParam("lastpage"));o>s&&a.setGridParam({page:s})}}return""},_onSortCol_multiselect:function(t,i,r){var a=this,n=a[0].prop,o=n.jQueryGrid,s=n.jQueryGrid.data("sorting");return s?void o.data("sorting",!1):(a._checkSelectedElements(function(){n.jQueryGrid.rup_grid("resetSelection"),e.data(o[0],"allSelected",null),e.data(o[0],"deSelectedPages",[]),o.data("sorting",!0),o.jqGrid("sortGrid",t,i,r),window.setTimeout(function(){o.trigger("reloadGrid")},0)}),o.data("sorting",!1),e("#lui_"+o.attr("id")).hide(),e("#load_"+o.attr("id")).hide(),"stop")},_selectAllGetPrimaryKeys_multiselect:function(){var t,i=this,r=i[0].prop,a=r.jQueryGrid;t=void 0===r.searchDivFunc?e.rup_utils.unnestjson(form2object(r.searchForm[0])):r.searchDivFunc.call(),e.rup_ajax({url:a.rup_grid("getGridParam","url"),dataType:"json",type:"GET",data:t,contentType:"application/json",success:function(t,n){for(var o=i.rup_maint("getPrimaryKey").split(";"),s=[],l="",d=0;d<t.length;d++){if(o.length>1)for(var u=0;u<o.length;u++)l=l+"/"+t[d][o[u]];else l="/"+t[d][o[0]];s.push(l),l=""}a[0].rup_gridProps.allPksArray=s,e("#"+a[0].rup_gridProps.pagerName+"_left").html(s.length+" "+e.rup.i18nParse(e.rup.i18n.base,"rup_grid.pager.selected")),e.data(a[0],"allSelected",!0);for(var c=a.rup_grid("getGridParam","page"),u=0;u<r.selectedRows.length;u+=1)!r.selectedRows[u]==="p_"+c&&delete r.selectedRows[u];r.selectedRowsCont=s.length,s=null},error:function(e,t,i){},beforeSend:function(t){var r=i.rup_maint("getPrimaryKey").split(";"),n={};if(r.length>1)for(var o=0;o<r.length;o++)n[r[o]]=r[o];else n[r[0]]=r[0];t.setRequestHeader("RUP",e.toJSON(n)),r=null,e.isFunction(a[0].rup_gridProps.onSelectAllGetPKs)?a[0].rup_gridProps.onSelectAllGetPKs.call(this,t):e.isPlainObject(a[0].rup_gridProps.onSelectAllGetPKs)&&a[0].rup_gridProps.onSelectAllGetPKs.pre.call(this,t)},complete:function(t,i){e.isFunction(a[0].rup_gridProps.onSelectAllGetPKs)?a[0].rup_gridProps.onSelectAllGetPKs.call(this,t):e.isPlainObject(a[0].rup_gridProps.onSelectAllGetPKs)&&a[0].rup_gridProps.onSelectAllGetPKs.post.call(this,t)}})},_resetSelection_multiselect:function(){var t=this,i=t[0].prop,r=i.jQueryGrid;i.selectedRows=[],r.jqGrid("resetSelection"),i.selectedRowsCont=0,e("#"+r[0].rup_gridProps.pagerName+"_left").html(i.selectedRowsCont+" "+e.rup.i18nParse(e.rup.i18n.base,"rup_grid.pager.selected")),i.toolbar.self.disableButton("edit"),i.toolbar.self.disableButton("delete")}})}(jQuery),function(e){e.fn.rup_maint("extend",{cancelEditing:function(){return this.each(function(){var t=this.prop;"new"===t.MODO?t.jQueryGrid.rup_grid("delRowData",t.jQueryGrid.rup_grid("getGridParam","selrow")):(t.jQueryGrid.rup_grid("restoreRow",t.lastsel),e(this).rup_maint("ellipsisRestoreOnEdit")),t.lastsel=null,t.toolbar.self.disableButton("cancel"),t.toolbar.self.enableButton("new"),t.toolbar.self.enableButton("filter"),t.toolbar.self.enableButton("delete"),t.feedback.rup_feedback("close");var i=this.prop.jQueryGrid.rup_grid("getDataIDs").length-1;e("#"+i,jqGrid).remove()})},newElementEditable:function(){return this.each(function(){if(this.prop.jQueryGrid.rup_grid("isEditing")){if("new"===this.prop.MODO)return e("#"+this.prop.lastsel+" .editable:first",this.prop.jQueryGrid).focus(),!1;this.prop.jQueryGrid.rup_grid("saveRow",this.prop.lastsel,rup_maint.saveEditableSucces,"clientArray",null,rup_maint.aftersavefunc,rup_maint.saveEditableError,null)}this.prop.MODO="new";var t=this.prop.jQueryGrid.rup_grid("getDataIDs"),i=t.length;this.prop.jQueryGrid.rup_grid("addRowData",i,{},"first"),this.prop.jQueryGrid.rup_grid("setSelection",i,!1),this.prop.selectedCell=0,e(this)[0].prop.toolbar.self.disableButton("filter"),e(this)[0].prop.toolbar.self.disableButton("delete"),obj=this.prop.jQueryGrid,e("#"+i,jqGrid).children().first().click()})}}),e.fn.rup_maint("extend",{_checkValidRowId_editline:function(t,i){var r=this,a=r[0].prop;return r._checkValidRowId(t,function(){a.feedback.rup_feedback("set",e.rup.i18nParse(e.rup.i18n.base,"rup_maint.invalidRowId"),"error"),a.toolbar.self.disableButton("cancel"),a.toolbar.self.enableButton("filter"),a.toolbar.self.enableButton("new"),a.toolbar.self.enableButton("delete")})},_onCellSelect_editline:function(t,i,r,a){var n,o=this,s=o[0].prop,l=s.jQueryGrid;return s.selectedCell=i,n=l.rup_grid("getColModel"),e("#"+t+"_"+n[s.selectedCell].name,l).focus(),!0},_onAfterSelectRow_editline:function(e,t){var i=this,r=i[0].prop;e!==r.lastsel&&i.rup_maint("editElement",e)},_onAfterDragAndDrop_editline:function(t){var i,r,a=this,n=a[0].prop,o=n.jQueryGrid,s=this.rup_grid("getSelectedRows")[0],l=e.data(o,"maintName");return!!o.rup_grid("isEditing")&&(i=o.rup_grid("getColModel"),r=i[i.length-1].name,e(".editable").unbind("keydown"),e("input[name='"+r+"']",o).bind("keydown",function(t){var i=0,r=o.rup_grid("getGridParam","page");if(9==t.keyCode&&!t.shiftKey){if(e(this).hasClass("hasDatepicker")&&e(this).datepicker("hide"),o.rup_grid("saveRow",s,rup_maint.saveEditableSucces,"clientArray",null,rup_maint.aftersavefunc,rup_maint.saveEditableError,null),s==o.rup_grid("getDataIDs").length){if(i=o.rup_grid("getGridParam","lastpage"),!(parseFloat(r)+1<=i))return!1;o[0].p.ajaxGridOptions={async:!1},o.rup_grid("setGridParam",{page:parseFloat(r)+1}),o.rup_grid("reloadGrid"),o[0].p.ajaxGridOptions={async:!0},s=0}return o.rup_grid("setSelection",Number(s)+1,!1),e("#"+l).rup_maint("editElement",Number(s)+1),e("body").data("clicktimer",window.setTimeout(function(){e("#"+Number(s+1)+" .editable:first",relatedGrid).focus()},0)),!1}}),firstColName=i[0].name,void e("input[name='"+firstColName+"']",relatedGrid).bind("keydown",function(t){var i=relatedGrid.rup_grid("getGridParam","page");if(9==t.keyCode&&t.shiftKey){if(e(this).hasClass("hasDatepicker")&&e(this).datepicker("hide"),relatedGrid.rup_grid("saveRow",s,rup_maint.saveEditableSucces,"clientArray",null,rup_maint.aftersavefunc,rup_maint.saveEditableError,null),1==s){if(!(parseFloat(i)>1))return!1;relatedGrid[0].p.ajaxGridOptions={async:!1},relatedGrid.rup_grid("setGridParam",{page:parseFloat(i)-1}),relatedGrid.rup_grid("reloadGrid"),relatedGrid[0].p.ajaxGridOptions={async:!0},s=relatedGrid.rup_grid("getDataIDs").length+1}return relatedGrid.rup_grid("setSelection",Number(s-1),!1),e("#"+l).rup_maint("editElement",Number(s-1)),e("body").data("clicktimer",window.setTimeout(function(){e("#"+Number(s-1)+" .editable:last",relatedGrid).focus()},0)),!1}}))}})}(jQuery),function(e){e.fn.rup_maint("extend",{_editFirstElement:function(){function e(){void 0===t.rowId&&(t.rowId=n.rup_grid("getDataIDs")[0]),n.rup_grid("isMultiselect")||n.find("#"+t.rowId).click(),a.currentSelectedRow=t.rowId,r.rup_maint("editElement",t.rowId)}var t,i,r=this,a=r[0].prop,n=a.jQueryGrid;t=r._getFirstElement(),i=n.rup_grid("getGridParam","page"),i!==t.page?(n.rup_grid("setGridParam",{page:t.page}),n.rup_grid("reloadGrid",e)):e()},_editLastElement:function(){function e(){n.rup_grid("isMultiselect")?void 0===lastElement.rowId&&(dataIDs=n.rup_grid("getDataIDs"),lastElement.rowId=dataIDs[dataIDs.length-1]):(i=n.rup_grid("getDataIDs"),lastElement.rowId=i[i.length-1],n.find("#"+lastElement.rowId).click()),a.currentSelectedRow=lastElement.rowId,r.rup_maint("editElement",lastElement.rowId)}var t,i,r=this,a=r[0].prop,n=a.jQueryGrid;lastElement=r._getLastElement(),t=n.rup_grid("getGridParam","page"),t!==lastElement.page?(n.rup_grid("setGridParam",{page:lastElement.page}),n.rup_grid("reloadGrid",e)):e()},_editNextElement:function(){function e(e){if(r.rup_grid("isMultiselect"))void 0===e.rowId&&(e.rowId=r.rup_grid("getDataIDs")[0]);else{r.rup_grid("getDataIDs");a?e.rowId=r.rup_grid("getDataIDs")[0]:e.rowId=r.rup_grid("getDataIDs")[e.line-1],r.find("#"+e.rowId).click()}i.currentSelectedRow=e.rowId,t.rup_maint("editElement",e.rowId)}var t=this,i=t[0].prop,r=i.jQueryGrid,a=!1,n=t._getNextElement(i.currentSelectedRow),o=r.rup_grid("getGridParam","page");o!==n.page?(a=!0,r.rup_grid("setGridParam",{page:n.page}),r.rup_grid("reloadGrid",e,n)):e(n)},_editPreviousElement:function(){function e(){if(a.rup_grid("isMultiselect"))void 0===o.rowId&&(t=a.rup_grid("getDataIDs"),o.rowId=t[t.length-1]);else{if(n){var e=a.rup_grid("getDataIDs");o.rowId=e[e.length-1]}else o.rowId=a.rup_grid("getDataIDs")[o.line-1];a.find("#"+o.rowId).click()}r.currentSelectedRow=o.rowId,i.rup_maint("editElement",o.rowId)}var t,i=this,r=i[0].prop,a=r.jQueryGrid,n=!1,o=i._getPreviousElement(r.currentSelectedRow),s=a.rup_grid("getGridParam","page"),n=!1;s!==o.page?(n=!0,a.rup_grid("setGridParam",{page:o.page}),a.rup_grid("reloadGrid",e)):e()},_getCurrentDetailIndex:function(t){var i,r,a,n,o,s,l,d,u=this,c=u[0].prop,p=0;if(i=c.jQueryGrid.rup_grid("getGridParam","page"),rowNum=parseInt(c.jQueryGrid.rup_grid("getInd",t,!1)),s=c.jQueryGrid.rup_grid("getGridParam","rowNum"),d=e.data(c.jQueryGrid[0],"allSelected"),c.jQueryGrid.rup_grid("isMultiselect")){l=c.selectedRowsCont,r=c.selectedRows.sort(function(e,t){return e-t});for(var h=0;h<r.length;h+=1)r[h]<parseInt(i)?p+=c.selectedRows["p_"+r[h]].length:r[h]===parseInt(i)&&(a=c.selectedRows["p_"+r[h]].sort(function(e,t){return e-t}),o=isNaN(rowNum)?0:e.inArray(rowNum,a),p+=o+1);null!==d&&d===!0&&(n=e.inArray(parseInt(i),r),p+=(parseInt(i)-(n+1))*parseInt(s))}else l=c.jQueryGrid.rup_grid("getGridParam","records"),p=parseInt(i)*parseInt(s)-parseInt(s)+rowNum;return{current:p,total:l}},_getDetailUrl:function(e){var t=this,i=t[0].prop,r=i.jQueryGrid.rup_grid("getSelectedRows"),a=i.jQueryGrid[0].rup_gridProps.url,n=i.primaryKey.split(";");if(i.jQueryGrid.rup_grid("isMultiselect")!==!1)return"/false"!==t._getPrimaryKeysForRow(e)?a+=t._getPrimaryKeysForRow(e):a=a+"/"+e,a;if(n.length>1)for(var o=0;o<n.length;o++)a=a+"/"+i.jQueryGrid.rup_grid("getCol",r[0],n[o]);else a="/false"===t._getPrimaryKeysForRow(e)?a+"/"+e:a+"/"+i.jQueryGrid.rup_grid("getCol",r[0],n[0]);return a},_getFirstElement:function(t){var i,r,a,n,o=this,s=o[0].prop,l=t,d=e.data(s.jQueryGrid[0],"allSelected"),u=e.data(jqGrid[0],"numPags");if(s.jQueryGrid.rup_grid("isMultiselect")){if(void 0!==t&&void 0!==s.selectedRows["p_"+t]&&s.selectedRows["p_"+t].length>0)return o._getFirstSelectedLine(t);if(!d)return i=s.selectedRows.sort(function(e,t){return e-t}),e.each(i,function(e,t){if(void 0!==s.selectedRows["p_"+t]&&s.selectedRows["p_"+t].length>0)return l=t,a=o._getFirstSelectedLine(t),!1}),a;for(var c=1;c<=u;c++){if(void 0!==s.selectedRows["p_"+c]&&s.selectedRows["p_"+c].length>0)return o._getFirstSelectedLine(c);if(void 0===s.selectedRows["p_"+c]){l=c,r=0;break}}}else l=1,r=0;return{page:l.toString(),line:r.toString(),rowId:n}},_getFirstSelectedLine:function(e){var t,i,r,a=this,n=a[0].prop;return void 0!==n.selectedRows["p_"+e]&&n.selectedRows["p_"+e].length>0?(t=n.selectedRows["p_"+e].sort(function(e,t){return e-t}),i=t[0],r=n.selectedRows["p_"+e]["l_"+i][0],{page:e.toString(),line:i.toString(),rowId:r}):{page:e,line:"0",rowId:void 0}},_getLastElement:function(t){var i,r,a,n,o=this,s=o[0].prop,l=e.data(s.jQueryGrid[0],"allSelected"),d=s.jQueryGrid,u=e.data(d[0],"numPags");if(s.jQueryGrid.rup_grid("isMultiselect")){if(void 0!==t&&void 0!==s.selectedRows["p_"+t]&&s.selectedRows["p_"+t].length>0)return o._getLastSelectedLine(t);if(!l)return i=s.selectedRows.sort(function(e,t){return t-e}),e.each(i,function(e,t){if(void 0!==s.selectedRows["p_"+t]&&s.selectedRows["p_"+t].length>0)return n=t,returnElem=o._getLastSelectedLine(t),!1}),returnElem;for(var c=u;c>0;c--){if(void 0!==s.selectedRows["p_"+c]&&s.selectedRows["p_"+c].length>0)return o._getLastSelectedLine(c);if(void 0===s.selectedRows["p_"+c]){n=c,r=-1;break}}}else n=u,r=-1;return{page:n.toString(),line:r.toString(),rowId:a}},_getLastSelectedLine:function(e){var t,i,r,a=this,n=a[0].prop;return void 0!==n.selectedRows["p_"+e]&&n.selectedRows["p_"+e].length>0?(t=n.selectedRows["p_"+e].sort(function(e,t){return t-e}),i=t[0],r=n.selectedRows["p_"+e]["l_"+i][0],{page:e.toString(),line:i.toString(),rowId:r}):{page:e,line:"0",rowId:void 0}},_getNextElement:function(t){var i,r,a,n,o,t,s,l,d,u,c=this,p=c[0].prop,h=e.data(p.jQueryGrid[0],"allSelected");i=c[0].prop.jQueryGrid.rup_grid("getGridParam","page"),n=i;var f=e.data(jqGrid[0],"numPags");if(p.jQueryGrid.rup_grid("isMultiselect")){if(r=p.jQueryGrid.rup_grid("getInd",t,!1),l=p.selectedRows.sort(function(e,t){return e-t}),d=p.selectedRows["p_"+i].sort(function(e,t){return e-t}),u=e.inArray(r,d),o=r,r===d[d.length-1]){posicionPage=e.inArray(parseInt(i),l);for(var g=parseInt(i)+1;g<=f;g++){if(h&&void 0===p.selectedRows["p_"+g]){n=g,o=0;break}if(p.selectedRows["p_"+g].length>0){n=g,o=p.selectedRows["p_"+n][0];break}}}else o=p.selectedRows["p_"+n][u+1],void 0===o&&(o=p.selectedRows["p_"+n][u]);void 0!==p.selectedRows["p_"+n]&&void 0!==p.selectedRows["p_"+n]["l_"+o]&&p.selectedRows["p_"+n]["l_"+o].length>0&&(s=p.selectedRows["p_"+n]["l_"+o][0])}else{a=p.jQueryGrid.rup_grid("getSelectedRows"),r=parseInt(p.jQueryGrid.rup_grid("getInd",a[0],!1)),o=r,rowsPerPage=parseInt(p.jQueryGrid.rup_grid("getGridParam","rowNum"));var f=Math.ceil(p.jQueryGrid.jqGrid("getGridParam","records")/p.jQueryGrid.rup_grid("getGridParam","rowNum"));r===rowsPerPage?parseInt(i)<f&&(n=parseInt(n)+1,o=0):o+=1}return{page:n.toString(),line:o.toString(),rowId:s}},_getPreviousElement:function(t){var i,t,r,a=this,n=a[0].prop,o=e.data(n.jQueryGrid[0],"allSelected"),s=(e.data(jqGrid[0],"numPags"),a[0].prop.jQueryGrid.rup_grid("getGridParam","page")),l=s;if(n.jQueryGrid.rup_grid("isMultiselect")){i=n.jQueryGrid.rup_grid("getInd",t,!1);var s=a[0].prop.jQueryGrid.rup_grid("getGridParam","page"),d=n.selectedRows.sort(function(e,t){return e-t}),u=n.selectedRows["p_"+s].sort(function(e,t){return e-t});posicionLine=e.inArray(i,u);var l=s,c=i;if(i===u[0]){posicionPage=e.inArray(parseInt(s),d);for(var p=parseInt(s)-1;p>0;p--){if(o&&void 0===n.selectedRows["p_"+p]){l=p,c=-1;break}if(n.selectedRows["p_"+p].length>0){l=p,c=n.selectedRows["p_"+l][n.selectedRows["p_"+l].length-1];break}}}else c=n.selectedRows["p_"+l][posicionLine-1];void 0!==n.selectedRows["p_"+l]&&void 0!==n.selectedRows["p_"+l]["l_"+c]&&n.selectedRows["p_"+l]["l_"+c].length>0&&(r=n.selectedRows["p_"+l]["l_"+c][0])}else selectedRows=n.jQueryGrid.rup_grid("getSelectedRows"),i=parseInt(n.jQueryGrid.rup_grid("getInd",selectedRows[0],!1)),c=i,rowsPerPage=parseInt(n.jQueryGrid.rup_grid("getGridParam","rowNum")),1===i?parseInt(s)>1&&(l=parseInt(l)-1,c=rowsPerPage):c-=1;return{page:l.toString(),line:c.toString(),rowId:r}},_getPrimaryKeysForRow:function(e){var t=this,i=t[0].prop,r=t.rup_maint("getPrimaryKey").split(";"),a="";if(r.length>1)for(var n=0;n<r.length;n++)a=a+"/"+i.jQueryGrid.rup_grid("getCol",e,r[n]);else a=a+"/"+i.jQueryGrid.rup_grid("getCol",e,r[0]);return a}})}(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery","private-jqueryui-menu"],e):e(jQuery)}(function(e,t){var i={};e.extend(e.rup.iniRup,e.rup.rupSelectorObjectConstructor("rup_menu",i)),e.fn.rup_menu("extend",{disable:function(t){var i=e("#"+t);i.addClass("ui-state-disabled")},enable:function(t){var i=e("#"+t);i.removeClass("ui-state-disabled")}}),e.fn.rup_menu("extend",{_init:function(i){if(i.length>1)e.rup.errorGestor(e.rup.i18nParse(e.rup.i18n.base,"rup_global.initError"+e(this).attr("id")));else if(this.length>0){var r,a,n=void 0!==window.widgetMenu?window.widgetMenu:t,o=e.extend({},e.fn.rup_menu.defaults,i[0]),s=this,l=n(this),d=s[0].id;if(l.removeClass("rup_invisible_menu"),void 0===o.i18nId&&(o.i18nId=d),a=e.rup.i18n.app[o.i18nId],void 0!==o.menu?r=o.menu:void 0!==o.json&&(r=o.json),n.widget("ui.rupMenu",n.ui.menu,e.rup.compatibility.menu),void 0!==r&&(s._parseJSON(r,a,l,o.forceAbs),l=t("#"+s.attr("id"))),selectUserEvent=o.select,o.select=function(t,i){if(void 0!==selectUserEvent&&null!==selectUserEvent&&"function"==typeof selectUserEvent&&selectUserEvent(t,i)===!1)return!1;if(/^keydown/.test(t.originalEvent.type))if(t.stopImmediatePropagation(),redirectObject=e(i.item.children()),"_blank"!==redirectObject.attr("target"))e(location).attr("href",redirectObject.attr("href"));else if(e.rup.browser.isFF){var r=Components.classes["@mozilla.org/appshell/window-mediator;1"].getService(Components.interfaces.nsIWindowMediator),a=r.getMostRecentWindow("navigator:browser");a.delayedOpenTab(redirectObject.attr("href"),null,null,null,null)}else e.rup.browser.isChrome?chrome.tabs.create({url:redirectObject.attr("href")}):window.open(redirectObject.attr("href"),"_blank");return!1},l.find("a[target='_blank']").append("<span class='ui-icon ui-icon-extlink rup_external_link'></span>"),"horizontal"===o.display){l.addClass("rup_menu_horizontal").addClass("ui-widget-header"),l.children().addClass("rup_menu_horizontal_children"),l.children().children("a").addClass("rup_menu_horizontal_children_entry"),l.rupMenu(o),l.children(".ui-menu-divider").remove(),l.children(".ui-state-disabled").css({"margin-top":"0em","margin-bottom":"0em"}),e("#"+d+" .rup_menu_horizontal_children .rup_menu_horizontal_children_entry .ui-icon-carat-1-e").removeClass("ui-icon-carat-1-e").addClass("ui-icon-carat-1-s").addClass("rup-menu_horizontalIcon"),l.children().children("a").css("font-weight","bold"),l.children().each(function(t,i){var r=0;e(i).children(".rup_menu_horizontal_children_entry:has(span:not(.rup-menu_horizontalIcon))").each(function(t,i){r=1===e(i).find("span").size()?e(i).find("span").width():e(i).find("span:not(.rup-menu_horizontalIcon)").width()/2}),e(i).css("width",e(i).width()+r)}),l.children().children("a").css("font-weight",""),l.children(":has(.rup_menu_horizontal_children_entry span:not(.rup-menu_horizontalIcon))").addClass("rup_menu_horizontal_childrenIcon"),l.find(".rup_menu_horizontal_children_entry span:not(.rup-menu_horizontalIcon)").addClass("rup_menu_horizontal_children_icon"),l.children(":has(.rup_menu_horizontal_children_entry span.rup-menu_horizontalIcon)").addClass("rup_menu_horizontal_childrenMenuIcon"),l.children(":has(.rup_menu_horizontal_children_entry span.rup_menu_horizontal_children_icon):has(span.rup-menu_horizontalIcon)").addClass("rup_menu_horizontal_children_double"),l.children(":last-child").addClass("rup_menu_horizontal_children_last"),l.children().children("a[aria-haspopup='true']").parent().attr("rupMenu_firsLevel","true"),e("#"+d+" [rupmenu_firslevel='true'] [role='menu']").addClass("rup_menu_vertical_horizontal"),void 0===o.verticalWidth?e("#"+d+" [rupmenu_firslevel='true'] [role='menu']").css("white-space","nowrap"):e("#"+d+" [rupmenu_firslevel='true'] [role='menu']").css("width",o.verticalWidth),l.find("a[target='_blank'] span.rup_menu_horizontal_children_icon").each(function(t,i){e(i).is(".ui-icon-extlink")&&e(i).addClass("ui-menu-icon").removeClass("rup_menu_horizontal_children_icon")});var u=l.find("a[target='_blank'] span.rup_menu_horizontal_children_icon").parents("li");u.css("width",u.width()+16),u.find("span.ui-icon-extlink").css("margin-left","-1em")}else"vertical"===o.display?(l.addClass("rup_menu_vertical"),void 0===o.verticalWidth?l.css("white-space","nowrap"):l.css("width",o.verticalWidth),l.children().addClass("rup_menu_vertical_children"),l.rupMenu(o),void 0!==o.verticalWidth&&e("#"+d+" .ui-menu .ui-menu-item").css("width",o.verticalWidth)):e.rup.errorGestor(e.rup.i18n.base.rup_menu.displayMenuError);var c=!1;e("ul.rup_menu_vertical, ul.rup_menu_vertical ul, ul.rup_menu_vertical_horizontal").each(function(t,i){e(i).children("li").children("a").children("span").each(function(t,i){if(!e(i).is(".ui-icon.ui-icon-extlink, .ui-icon.ui-icon-carat-1-e"))return c=!0,!1}),c&&e(i).children("li").children("a").css("padding-left","2em"),c=!1}),e("#"+d+" [role = 'menuitem']").not(e("[aria-haspopup = 'true']")).css("text-decoration","underline"),l.find("a").bind("click",function(t){e(t.currentTarget).hasClass("ui-state-disabled")&&(t.preventDefault(),t.stopImmediatePropagation())})}},_parseJSON:function(t,i,r,a){var n,o,s,l="";"true"===r.attr("uda-submenu")?r.attr("uda-submenu",""):(r.replaceWith(e("<ul>").attr("id",r.attr("id")).attr("style",r.attr("style")).attr("class",r.attr("class"))),r=e("#"+r.attr("id")));for(var d=t.length;d--;)o=t[d],s=e("<a>"),void 0!==o&&(null!==o.divider&&o.divider!==!0?(void 0!==o.pathUrl||void 0!==o.url?(l=void 0!==o.pathUrl?a===!0||o.forceAbs===!0?e.rup_utils.relToAbsUrl(o.pathUrl):o.pathUrl:e.rup.CTX_PATH+o.url,o.newWindow!==!0?void 0!==o.icon?r.prepend(e("<li>").append(s.text(e.rup.i18nParse(i,o.i18nCaption)).attr("href",l).css("text-decoration","underline").append(e("<span>").addClass("ui-icon").addClass(o.icon)))):r.prepend(e("<li>").append(s.text(e.rup.i18nParse(i,o.i18nCaption)).attr("href",l).css("text-decoration","underline"))):void 0!==o.icon?r.prepend(e("<li>").append(s.text(e.rup.i18nParse(i,o.i18nCaption)).attr("href",l).attr("target","_blank").css("text-decoration","underline").append(e("<span>").addClass("ui-icon").addClass(o.icon)))):r.prepend(e("<li>").append(s.text(e.rup.i18nParse(i,o.i18nCaption)).attr("href",l).attr("target","_blank").css("text-decoration","underline")))):(void 0!==o.icon?r.prepend(e("<li>").append(s.text(e.rup.i18nParse(i,o.i18nCaption)).css("cursor","default").append(e("<span>").addClass("ui-icon").addClass(o.icon))).append(e("<ul>").attr("uda-submenu","true"))):r.prepend(e("<li>").append(s.text(e.rup.i18nParse(i,o.i18nCaption)).css("cursor","default")).append(e("<ul>").attr("uda-submenu","true"))),n=e("[uda-submenu = 'true']"),n.append(this._parseJSON(o.submenu,i,n)),delete n),o.disabled===!0&&s.parent().addClass("ui-state-disabled")):void 0===o.i18nCaption?r.prepend(e("<li>").addClass("ui-widget-content ui-menu-divider")):r.prepend(e("<li>").append(e("<strong>").text(e.rup.i18nParse(i,o.i18nCaption))))),delete o}}),e.fn.rup_menu.defaults={verticalWidth:void 0,display:"horizontal",forceAbs:!1,i18nId:void 0,menus:"ul"}}),/*!
 * Copyright 2016 E.J.I.E., S.A.
 *
 * Licencia con arreglo a la EUPL, Versión 1.1 exclusivamente (la «Licencia»);
 * Solo podrá usarse esta obra si se respeta la Licencia.
 * Puede obtenerse una copia de la Licencia en
 *
 *      http://ec.europa.eu/idabc/eupl.html
 *
 * Salvo cuando lo exija la legislación aplicable o se acuerde por escrito,
 * el programa distribuido con arreglo a la Licencia se distribuye «TAL CUAL»,
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ni expresas ni implícitas.
 * Véase la Licencia en el idioma concreto que rige los permisos y limitaciones
 * que establece la Licencia.
 */
function(e){var t={};e.extend(e.rup.iniRup,e.rup.rupObjectConstructor("rup_messages",t)),window.alert=function(t){e.rup_messages("msgAlert",{title:e.rup.i18nParse(e.rup.i18n.base,"rup_message.alert"),message:t})},e.rup_messages("extend",{msgError:function(t){var i,r,a=e.extend({},e.rup_messages.defaults,t),n=e(document.activeElement);this._rupProperties(a,e.rup.i18nParse(e.rup.i18n.base,"rup_message.tituloError")),a._close=a.close,a.close=function(e,t){n.focus(),void 0!==a._close&&a._close(e,t)},a.buttons=[{text:e.rup.i18nParse(e.rup.i18n.base,"rup_message.aceptar"),click:function(){o.dialog("close")}}];var o=this._createDiv().appendTo("body");o.dialog(a),this._createCloseLink(o),this._addStyles(o,"error",a.message),i=e(document).height(),r=e(document).width(),o.dialog("open"),this._dialogInPortal(r,i,o,a)},msgConfirm:function(t){var i,r,a=e.extend({},e.rup_messages.defaults,t),n=e(document.activeElement);this._rupProperties(a,e.rup.i18nParse(e.rup.i18n.base,"rup_message.confirmacion")),a._close=a.close,a.close=function(e,t){n.focus(),void 0!==a._close&&a._close(e,t)};var o,s=this._createDiv().appendTo("body");s.dialog(a),o=[{text:e.rup.i18nParse(e.rup.i18n.base,"rup_message.aceptar"),click:function(){a.OKFunction.call(this,s),s.dialog("close")}}],s.dialog("option","buttons",o),this._createCloseLink(s),this._addStyles(s,"confirm",a.message),this._createLinkButton(s,a.CANCELFunction),i=e(document).height(),r=e(document).width(),s.dialog("open"),this._dialogInPortal(r,i,s,a),e("div[aria-labelledby=ui-dialog-title-"+s[0].id+"] .ui-dialog-buttonpane button:first").focus()},msgOK:function(t){var i,r,a=e.extend({},e.rup_messages.defaults,t),n=e(document.activeElement);this._rupProperties(a,e.rup.i18nParse(e.rup.i18n.base,"rup_message.correct")),a._close=a.close,a.close=function(e,t){n.focus(),void 0!==a._close&&a._close(e,t)},a.buttons=[{text:e.rup.i18nParse(e.rup.i18n.base,"rup_message.aceptar"),click:function(){o.dialog("close")}}];var o=this._createDiv().appendTo("body");o.dialog(a),this._createCloseLink(o),this._addStyles(o,"ok",a.message),i=e(document).height(),r=e(document).width(),o.dialog("open"),this._dialogInPortal(r,i,o,a)},msgAlert:function(t){var i,r,a=e.extend({},e.rup_messages.defaults,t),n=e(document.activeElement);this._rupProperties(a,e.rup.i18nParse(e.rup.i18n.base,"rup_message.alert")),a._close=a.close,a.close=function(e,t){n.focus(),void 0!==a._close&&a._close(e,t)},a.buttons=[{text:e.rup.i18nParse(e.rup.i18n.base,"rup_message.aceptar"),click:function(){o.dialog("close")}}];var o=this._createDiv().appendTo("body");o.dialog(a),this._createCloseLink(o),this._addStyles(o,"alert",a.message),i=e(document).height(),r=e(document).width(),o.dialog("open"),this._dialogInPortal(r,i,o,a)}}),e.rup_messages("extend",{_createDiv:function(){return e("<div/>").attr("id","rup_msgDIV_"+(new Date).getTime()).attr("rup_message","true")},_createCloseLink:function(t){var i="<span id='closeText_"+t[0].id+"' style='float:right;font-size:0.85em;'>"+e.rup.i18nParse(e.rup.i18n.base,"rup_global.cerrar")+"</span>",r=e("<a href='#'></a>").attr("role","button").css("margin-right","0.9em").css("float","right").addClass("ui-dialog-title").html(i).click(function(e){return t.dialog("close"),!1}).hover(function(i){e("div[aria-labelledby=ui-dialog-title-"+t[0].id+"] .ui-dialog-titlebar-close").addClass("ui-state-hover"),e("div[aria-labelledby=ui-dialog-title-"+t[0].id+"] .ui-dialog-titlebar-close").css("padding","0px")},function(i){e("div[aria-labelledby=ui-dialog-title-"+t[0].id+"] .ui-dialog-titlebar-close").removeClass("ui-state-hover"),e("div[aria-labelledby=ui-dialog-title-"+t[0].id+"] .ui-dialog-titlebar-close").attr("style","")}).insertAfter("#ui-dialog-title-"+t[0].id);e("div[aria-labelledby=ui-dialog-title-"+t[0].id+"] .ui-dialog-titlebar-close").hover(function(){r.css("text-decoration","none")},function(){r.css("text-decoration","")})},_addStyles:function(t,i,r){var a=e("<div>").attr("id","rup_msgDIV_msg_icon").addClass("rup-message_icon-"+i),n=e("<div>").attr("id","rup_msgDIV_msg").addClass("rup-message_msg-"+i).html(r);t.append(a),t.append(n)},_createLinkButton:function(t,i){var r=i,a=e("<a href='#'></a>").attr("role","button").attr("id",t[0].id+"_cancel").addClass("rup-enlaceCancelar").html(e.rup.i18nParse(e.rup.i18n.base,"rup_global.cancel")).click(function(e){return t.dialog("close"),void 0!==r&&r.call(this,t),!1});e("div[aria-labelledby=ui-dialog-title-"+t[0].id+"] .ui-dialog-buttonset ").prepend(a)},_dialogInPortal:function(t,i,r,a){var n;e.rup_utils.aplicatioInPortal()&&(null!==r.data("dialog").overlay&&(n=r.data("dialog").overlay.$el,n.css("height",i).css("width",t),e(".r01gContainer").append(r.data("dialog").uiDialog).append(n)),void 0!==a.position&&null!==a.position||r.data("dialog").uiDialog.css("position","absolute").css("top",i/2-e(".ui-dialog:visible").height()/2))},_rupProperties:function(t,i){t.autoOpen=!1,t.modal=!0,t.resizable=!1,t.title=null===t.title||""===t.title?i:t.title,t.closeText=e.rup.i18nParse(e.rup.i18n.base,"rup_message.tituloError.cerrar"),t.close=function(){e(this).remove()}}}),e.rup_messages.defaults={minHeight:100}}(jQuery),/*!
 * Copyright 2016 E.J.I.E., S.A.
 *
 * Licencia con arreglo a la EUPL, Versión 1.1 exclusivamente (la «Licencia»);
 * Solo podrá usarse esta obra si se respeta la Licencia.
 * Puede obtenerse una copia de la Licencia en
 *
 *      http://ec.europa.eu/idabc/eupl.html
 *
 * Salvo cuando lo exija la legislación aplicable o se acuerde por escrito, 
 * el programa distribuido con arreglo a la Licencia se distribuye «TAL CUAL»,
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ni expresas ni implícitas.
 * Véase la Licencia en el idioma concreto que rige los permisos y limitaciones
 * que establece la Licencia.
 */
function(e){var t={};e.extend(e.rup.iniRup,e.rup.rupObjectConstructor("rup_report",t)),e.rup_report("extend",{}),e.rup_report("extend",{_init:function(t){if(t.length>1)e.rup.errorGestor(e.rup.i18n.base.rup_global.initError+e(this).attr("id"));else{var i=this,r=e.extend(!0,{},e.rup_report.defaults,t[0]),a=r.buttons,n=r.dialog,o=r.customDialog,s=e.find("[id='"+r.appendTo+"']");if(e.isEmptyObject(s))return alert("No existe objeto al que añadir el componente"),!1;s=e(s[0]),s.data("report",r);var l=e("<div />").attr("id","reportFileWait").attr("title",n.wait.title).text(n.wait.msg).addClass("rup_report").hide().append(e("<div />").addClass("ui-progressbar ui-progressbar-value ui-corner-left ui-corner-right")),d=e("<div />").attr("id","reportFileError").attr("title",n.error.title).text(n.error.msg).addClass("rup_report").hide(),u=e("<div />").attr("id","rup_report_dialogsContainer").append(l).append(d);s.after(u),n.waitDiv="reportFileWait",n.errorDiv="reportFileError";var c,p=!1;if(s.hasClass("rup-toolbar_menuButtonContainer")&&(c=e("[id='"+s.attr("id").substring("8")+"']"),s=c.parents(".rup-toolbar"),p=!0,e.grep(a,function(e,t){return void 0!==e.buttons}).length>0))return alert("No se pueden añadir MButtons a un contenedor MButton"),!1;var h=[];if(e.each(a,function(t,a){void 0!==a.buttons?(a.click=s.showMButton,c=s.addMButton(a,a.json_i18n),s.addButtonsToMButton(a.buttons,c,a.json_i18n),e.each(a.buttons,function(e,t){i._checkButton(t,h),i._configureButton(t,n,o,r)})):(p?(s.addButtonsToMButton(new Array(a),c,a.json_i18n),$mbuttonDiv=e("[id='mbutton_"+c.attr("id")+"']"),$mbuttonDiv.find("li:first").appendTo($mbuttonDiv.children("ul"))):(s.addButton(a,a.json_i18n),a.id=s.attr("id")+"##"+(a.id?a.id:a.i18nCaption)),i._checkButton(a,h),i._configureButton(a,n,o,r))}),h.length>0){for(var f="",g=0;g<h.length;g++)f+=h[g]+"<br/>";alert(f)}}},_checkButton:function(t,i){var r=t.id.substring(t.id.lastIndexOf("##")+2);if(void 0===t.url&&i.push(r+": no tiene URL asociada"),void 0!==t.columns){var a=e.find("#"+t.columns.grid);e.isEmptyObject(a)&&i.push(r+": no existe el Grid asociado")}},_configureButton:function(t,i,r,a){var n=this,o={};e.extend(o,i),t.isInline=void 0!==t.isInline&&t.isInline,t.isInline?e("[id='"+t.id+"']").on("click",function(){window.open(t.url+"?isInline=true","_blank")}):e("[id='"+t.id+"']").on("click",function(){var i=e(this).parents("div.rup-toolbar_menuButtonContainer");i.length>0&&(i.showMButton(),i.removeClass("rup-toolbar_menuButtonSlided"));var s={};if(void 0!==t.columns){var l=e(e.find("#"+t.columns.grid)[0]);s=jQuery.isFunction(a.fncGetGridParam)?jQuery.proxy(a.fncGetGridParam,l)():l.jqGrid("getGridParam","postData"),s.columns=e.toJSON(n._getColumns(l,t.columns))}var d=!0;if(void 0!==t.customDialog){var u=r[t.customDialog];void 0===u.waitDiv?o.wait=u.wait:(o.waitDiv=u.waitDiv,e("#"+o.waitDiv).addClass("rup_report")),void 0===u.errorDiv?o.error=u.error:(o.errorDiv=u.errorDiv,e("#"+o.errorDiv).addClass("rup_report")),o.successCallback=u.successCallback,o.failCallback=u.failCallback}var c=e("#"+o.waitDiv);if(c.rup_dialog({type:e.rup.dialog.TEXT,autoOpen:!1,modal:!0,resizable:!1,close:function(t,i){e.rup.browser.isIE?document.execCommand("Stop"):window.stop()}}),d){c.rup_dialog("setOption","title",o.wait.title);for(var p=c.html().split(c.text()),h="",f=0;f<p.length;f++)h+=""===p[f]?o.wait.msg:p[f];c.html(h)}return c.rup_dialog("open"),e.fileDownload(e.rup_utils.setNoPortalParam(t.url),{httpMethod:"POST",data:jQuery.rup_utils.unnestjson(s),successCallback:function(e){void 0!==o.successCallback&&o.successCallback(),c.rup_dialog("close")},failCallback:function(t,i){c.rup_dialog("close");var r=e("#"+o.errorDiv);r.rup_dialog({type:e.rup.dialog.TEXT,autoOpen:!1,modal:!0,resizable:!1}),d&&(r.rup_dialog("setOption","title",o.error.title),r.rup_dialog("setOption","message",o.error.msg)),r.rup_dialog("open"),void 0!==o.failCallback&&o.failCallback()}}),!1})},_getColumns:function(t,i){var r=t.jqGrid("getGridParam","colModel"),a=t.jqGrid("getGridParam","colNames"),n=a.length,o=[],s=i.customNames,l=i.hidden===!0;if(void 0===s){for(var d=0;d<n;d++)if(a[d].indexOf("type='checkbox'")===-1&&(l||!l&&r[d].hidden===!1)){var u=[];u.push(r[d].name),u.push(a[d]),o.push(u)}}else for(var d=0;d<n;d++)if(e.inArray(r[d].name,s)!==-1){var u=[];u.push(r[d].name),u.push(a[d]),o.push(u)}return o}}),e.rup_report.defaults={fncGetGridParam:null,dialog:{wait:{title:e.rup.i18nParse(e.rup.i18n.base,"rup_report.waitTitle"),msg:e.rup.i18nParse(e.rup.i18n.base,"rup_report.waitMsg")},error:{title:e.rup.i18nParse(e.rup.i18n.base,"rup_report.errorTitle"),msg:e.rup.i18nParse(e.rup.i18n.base,"rup_report.errorMsg")}}}}(jQuery),/*!
 * Copyright 2014 E.J.I.E., S.A.
 *
 * Licencia con arreglo a la EUPL, Versión 1.1 exclusivamente (la «Licencia»);
 * Solo podrá usarse esta obra si se respeta la Licencia.
 * Puede obtenerse una copia de la Licencia en
 *
 *      http://ec.europa.eu/idabc/eupl.html
 *
 * Salvo cuando lo exija la legislación aplicable o se acuerde por escrito,
 * el programa distribuido con arreglo a la Licencia se distribuye «TAL CUAL»,
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ni expresas ni implícitas.
 * Véase la Licencia en el idioma concreto que rige los permisos y limitaciones
 * que establece la Licencia.
 */
function(e){var t={};e.extend(e.rup.iniRup,e.rup.rupSelectorObjectConstructor("rup_chart",t)),e.fn.rup_chart("extend",{destroy:function(){var e=this.data("chart");e.destro(),this.data("chart",""),this.data("settings","")},updateData:function(e){var t=this.data("settings"),i=this.data("chart");i.data.datasets=e.datasets,i.data.labels=e.labels,i.update(),t.data=e,this.data("settings",t)},updateLabels:function(e){var t=this.data("settings"),i=this.data("chart");i.data.labels=e,i.update(),t.data.labels=e},updateDatasets:function(e){var t=this.data("settings"),i=this.data("chart");i.data.datasets=e,i.update(),t.data.datasets=e},getDatasets:function(){return this.data("settings").data.datasets},getLabels:function(){return this.data("settings").data.labels},getData:function(){return this.data("settings").data},getChart:function(){return this.data("chart")}}),e.fn.rup_chart("extend",{}),e.fn.rup_chart("extend",{_init:function(t){var i=e.extend({},e.fn.rup_chart.defaults,t[0]);i.id=e(this).attr("id"),$self=this;var r,a=document.getElementById(i.id).getContext("2d");t.length>1?e.rup.errorGestor(e.rup.i18nParse(e.rup.i18n.base,"rup_global.initError")+e(this).attr("id")):(r=void 0!==i.options?new Chart(a,{type:i.type,data:i.data,options:i.options}):new Chart(a,{type:i.type,data:i.data}),$self.attr("role","graphics-data"),$self.addClass("rup-chart"),$self.attr("ruptype","chart"),e("#"+i.id).data("settings",i),e("#"+i.id).data("chart",r))}}),e.fn.rup_chart.defaults={}}(jQuery),/*!
 * Copyright 2013 E.J.I.E., S.A.
 *
 * Licencia con arreglo a la EUPL, Versión 1.1 exclusivamente (la «Licencia»);
 * Solo podrá usarse esta obra si se respeta la Licencia.
 * Puede obtenerse una copia de la Licencia en
 *
 *      http://ec.europa.eu/idabc/eupl.html
 *
 * Salvo cuando lo exija la legislación aplicable o se acuerde por escrito,
 * el programa distribuido con arreglo a la Licencia se distribuye «TAL CUAL»,
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ni expresas ni implícitas.
 * Véase la Licencia en el idioma concreto que rige los permisos y limitaciones
 * que establece la Licencia.
 */
function(e){var t={};t.plugins=[],jQuery.rup_table=jQuery.rup_table||{},jQuery.extend(jQuery.rup_table,{registerPlugin:function(e,i){jQuery.inArray(e,t.plugins)===-1&&(t.plugins.push(e),t.plugins[e]=i)}}),jQuery.extend(jQuery.rup.iniRup,jQuery.rup.rupSelectorObjectConstructor("rup_table",t)),e.fn.fmatter.rup_combo=function(t,i,r,a){var n,o,s=void 0!==e(this).data("rup.table.formatter")?e(this).data("rup.table.formatter"):{},l={};l.rup_combo={value:t};var d={};d[i.colModel.name]=l;var u={};if(u[i.rowId]=d,i.colModel.formatoptions&&i.colModel.formatoptions.labelName)n=i.colModel.formatoptions.labelName,o=e.rup_utils.getJson(r,n);else if("string"==typeof i.colModel.editoptions.source)n=i.colModel.name.indexOf(".")!==-1?i.colModel.name.substring(0,i.colModel.name.lastIndexOf("."))+"."+i.colModel.editoptions.sourceParam.label:i.colModel.editoptions.sourceParam.label,o=e.rup_utils.getJson(r,n);else{var c=e.grep(i.colModel.editoptions.source,function(e,i){if(e.value===t)return!0});1===c.length&&(o=c[0].i18nCaption?e.rup.i18nParse(e.rup.i18n.app[settings.i18nId],c[0].i18nCaption):c[0].label)}return l.rup_combo.label=o,e.extend(!0,s,u),e(this).data("rup.table.formatter",s),o||""},e.fn.fmatter.rup_combo.unformat=function(t,i){var r=e(this).data("rup.table.formatter")[i.rowId][i.colModel.name].rup_combo.value;return r||""},jQuery.extend(jQuery.jgrid,{createModal:function(t,i,r,a,n,o,s){var l=jQuery("<div/>").attr("id",t.themodal).append(e(i));l.find("#"+t.scrollelm);if(l.insertBefore(e(a)),l.rup_dialog({type:e.rup.dialog.DIV,autoOpen:!1,modal:!0,resizable:r.resize,title:r.caption,width:r.width,buttons:r.buttons}),jQuery.isFunction(r.onClose)&&jQuery(".ui-dialog-titlebar-close, a:has(#closeText_"+l.first()[0].id+")",l.parent()).off("click").on("click",function(e){r.onClose.call(e)}),jQuery("#"+t.scrollelm+"_2").addClass("botoneraModal"),jQuery(".fm-button","#"+t.scrollelm+"_2").on({focusin:function(){jQuery(this).addClass("ui-state-focus")},focusout:function(){jQuery(this).removeClass("ui-state-focus")}}),void 0!==r.linkStyleButtons)for(var d=0;d<r.linkStyleButtons.length;d++)jQuery(r.linkStyleButtons[0]).addClass("botonEnlace")},hideModal:function(e,t){jQuery(e).rup_dialog("close")},viewModal:function(e,t){jQuery(e).rup_dialog("open")}}),jQuery.extend(jQuery.rup_table,{proxyAjax:function(e,t){jQuery.rup_ajax(e)}}),jQuery.fn.rup_table("extend",{preConfigureCore:function(t){var i,r,a=this;t.baseUrl=t.url,jQuery.inArray("filter",t.usePlugins)===-1&&(t.url+="/filter"),t.id=a.attr("id"),a.attr("ruptype","table"),t.core.tableDiv=t.id+"_div",t.core.$tableDiv=jQuery("#"+t.core.tableDiv),jQuery(document).bind("click",function(e){var i=jQuery(e.target);i.parents().index(t.core.$tableDiv)===-1&&a.triggerHandler("rupTable_checkOutOfGrid",[e,i])}),t.pager!==!1&&(t.pager=e.rup_utils.getJQueryId(null!==t.pager?t.pager:t.id+"_pager"),t.$pager=jQuery(t.pager),0===t.$pager.length&&alert("El identificador "+t.pager+" especificado para el paginador no existe.")),i=t.colModel,t.loadOnStartUp!==!1&&void 0==t.multifilter||(a.data("tmp.loadOnStartUp.datatype",t.datatype),t.datatype="clientSide");for(var n=0;n<i.length;n++)r=i[n],void 0!==r.rupType&&null!==r.rupType&&(r.edittype="custom",jQuery.isFunction(r.editoptions.custom_element)||(r.editoptions.custom_element=function(t,i){return e("<input>").attr({type:"text",id:i.id,name:i.name,"class":"FormElement formulario_linea_input customelement",style:"width:98%",value:t})[0]}),jQuery.isFunction(r.editoptions.custom_value)||(r.editoptions.custom_value=function(e,t,i){var r=e.attr("ruptype");if(void 0!==r)if("set"===t)e["rup_"+r]("setRupValue",i);else if("get"===t)return e["rup_"+r]("getRupValue")}));if(t.showGridInfoCol&&(t.colNames=e.merge([""],t.colNames),t.colModel=e.merge([t.defaultGridInfoCol],t.colModel)),void 0!==t.primaryKey&&"string"==typeof t.primaryKey&&(t.primaryKey=[t.primaryKey]),void 0!==t.primaryKey&&"object"==typeof t.primaryKey){if(1===t.primaryKey.length){t.primaryKeyCol=t.primaryKey[0];for(var n=0;n<i.length;n++)if(i[n].name===t.primaryKeyCol){i[n].key=!0;break}}else if(t.primaryKey.length>1){t.colNames=e.merge([""],t.colNames);var o=e.extend({},t.defaultGridMultiplePkCol,{key:!0,formatter:function(t,i,r){for(var a=e(this),n=a.data("settings"),o="",s=0;s<n.primaryKey.length;s++)o+=e.rup_utils.unnestjson(r)[n.primaryKey[s]]+n.multiplePkToken;return o=o.substr(0,o.length-1)}});t.primaryKeyCol="pkCol",t.colModel=e.merge([o],t.colModel)}e.extend(t,{prmNames:{id:t.primaryKeyCol}})}for(var n=0;n<i.length;n++)r=i[n],r.editable===!0&&(void 0===r.editableOnAdd&&(r.editableOnAdd=!0),void 0===r.editableOnEdit&&(jQuery.inArray(i[n].name,t.primaryKey)!==-1?r.editableOnEdit=!1:r.editableOnEdit=!0));t.serializeGridData=function(i){var r,n=parseInt(i.page),o=parseInt(a.rup_table("getGridParam","lastpage"));return 0!==o&&n>o&&(i.page=o),null!==t.core.startOnPage&&(i.page=t.core.startOnPage,a.data("tmp.firstLoad",!0)),jQuery.extend(!0,i,{core:{pkToken:t.multiplePkToken,pkNames:t.primaryKey}}),r=e.extend({},{filter:{}},i),a.triggerHandler("rupTable_serializeGridData",[r]),delete a.data("tmp.firstLoad"),t.core.startOnPage=null,jQuery.toJSON(r)},t.beforeProcessing=function(i,r,n){return!a.triggerHandler("rupTable_beforeProcessing",[i,r,n]===!1)&&(t.primaryKey.length>1&&e.each(i.rows,function(i,r){for(var a="",n=0;n<t.primaryKey.length;n++)a+=e.rup_utils.unnestjson(r)[t.primaryKey[n]]+t.multiplePkToken;a=a.substr(0,a.length-1),r.pkCol=a}),!0)};var s=t.loadError;t.loadError=function(t,i,r){var a,n=e(this);a=n.triggerHandler("rupTable_loadError",t,i,r),a!==!1&&jQuery.proxy(s,n)(t,i,r)},t.getActiveLineId=function(){var t=this,i=t.jqGrid("getDataIDs"),r=t.jqGrid("getGridParam","selrow");return e.inArray(r,i)},t.getActiveRowId=function(){var e=this;return e.rup_table("getGridParam","selrow")},t.getSelectedRows=function(){var e=this,t=e.rup_table("getGridParam","selrow");return null===t?[]:[t]},t.getSelectedLines=function(){var t=this,i=t.rup_table("getGridParam","selrow");return null===i?[]:[e.inArray(i,t.jqGrid("getDataIDs"))]},jQuery.each(t.core.operations,function(e,i){t.core.showOperations[e]=!0}),jQuery.extend(!0,t.core.defaultOperations,t.core.operations),a.on({jqGridBeforeRequest:function(){jQuery.set_uda_ajax_mode_on()},"jqGridLoadComplete.rup_table.tooltip":function(i,r){e(this);void 0!==r&&jQuery(".pagControls input.ui-pg-input",t.$pager).attr({size:r.total.length,maxlength:r.total.length})},jqGridResizeStart:function(t,i){e("#"+a[0].id+"_search_rowInputs select").each(function(){e(this).selectmenu("close")})},jqGridResizeStop:function(t,i){e("#"+a[0].id+"_search_rowInputs select").each(function(){e("[id='"+this.id+"-menu']").width(e("[id='"+this.id+"-button']").width())})},"jqGridGridComplete.rup_table.core":function(t){var i=e(this);if(0===i.rup_table("getGridParam","records")){i.prev().remove(),e(i.jqGrid("getGridParam","pager")).hide();var r='<tr class="ui-widget-content jqgrow ui-row-ltr" role="row" id="'+i[0].id+'_noRecords" aria-selected="false">';r+='<td aria-describedby="'+i[0].id+'_NO_REGISTROS" title="'+e.rup.i18nParse(e.rup.i18n.base,"rup_grid.noRecordsFound")+'" style="border:0;padding-left: 0.5em ! important;text-align: left;width:'+e("#gview_"+i.attr("id")).width()+'px;background:white;" role="gridcell">',r+=e.rup.i18nParse(e.rup.i18n.base,"rup_grid.noRecordsFound"),r+="</td></tr>",i.before(r),e('[aria-describedby="'+i[0].id+'_NO_REGISTROS"]').rup_tooltip({position:{my:"center",at:"center"}})}else jQuery("#"+i[0].id+"_noRecords").remove(),jQuery(i.jqGrid("getGridParam","pager")).show()},"jqGridGridComplete.rup_table.tooltip":function(t){var i,r=e(this);e("#"+e(this).attr("id")+" [title]").each(function(t,i){var r=e(i);r.attr("grid_tooltip",r.attr("title")).removeAttr("title")}),i=jQuery("tbody:first",r),i.on("mousestop",{delay:500},function(t,i){var r,a,n,o=e.rup_utils.elementFromPoint(i.clientX,i.clientY,!0),s=e(o);!s.attr("rup_tooltip")&&s.attr("grid_tooltip")&&(a=s.parent().attr("id")?s.parent().attr("id"):s.parents("tr[role='row']").attr("id"),n=s.attr("aria-describedby")?s.attr("aria-describedby"):s.parents("td[role='gridcell']").attr("aria-describedby"),s.attr("title",s.attr("grid_tooltip")),r=a+"_"+n,s.rup_tooltip({show:{delay:0},id:r,position:{viewport:e(window),adjust:{method:"flip"}}}),s.triggerHandler("mouseenter.qtip-"+r+"-create"),s.rup_tooltip("option","show.delay",500))})}})},postConfigureCore:function(t){var i=this;t.resizable!==!1&&i.rup_table("gridResize",jQuery.isPlainObject(t.resizable)?t.resizable:{}),t.pager!==!1&&i.rup_table("configurePager",t),e.each(e("#gview_table th:visible"),function(t,i){var r=e(i),a=r.find("div").text();""!==a&&r.attr("title",a).rup_tooltip({show:{delay:500},position:{viewport:e(window),adjust:{method:"flip"}}})}),jQuery(i.rup_table("getGridParam","colModel")).each(function(e,i){var r;"ui-ellipsis"===i.classes&&jQuery("[id='jqgh_"+t.id+"_"+i.name+"']").css("display","block").css("text-overflow","ellipsis"),r=jQuery("[id='jqgh_"+t.id+"_"+i.name+"']").children("div"),r.replaceWith(jQuery("<span>").text(r.text()).css("cursor","pointer"))}),t.showGridInfoCol&&jQuery("#gview_"+t.id+" table thead th#"+t.id+"_rupInfoCol").css("border-right","0px none"),t.loadOnStartUp!==!1&&void 0==t.multifilter||(t.datatype=i.data("tmp.loadOnStartUp.datatype"),i.rup_table("setGridParam",{datatype:i.data("tmp.loadOnStartUp.datatype")}),i.removeData("tmp.loadOnStartUp.datatype"))}}),jQuery.fn.rup_table("extend",{getColModel:function(){return e(this).jqGrid("getGridParam","colModel")},getGridParam:function(t){return e(this).jqGrid("getGridParam",t)},gridResize:function(t){return e(this).jqGrid("gridResize",t)},getSelectedRows:function(){var e=this,t=e.data("settings");return jQuery.proxy(t.getSelectedRows,e)()},getSelectedLines:function(){var e=this,t=e.data("settings");return jQuery.proxy(t.getSelectedLines,e)()},getPkUrl:function(e){var t,i=this,r=i.data("settings");return t=jQuery.isArray(e)?void 0!==e[0]?e[0]:"":e,t.split(r.multiplePkToken).join("/")},reloadGrid:function(e){var t=this,i=(t.data("settings"),t.rup_table("getGridParam","page"),t.jqGrid("getGridParam","ajaxGridOptions"));i.async;i.async=!1,t.jqGrid("setGridParam",{ajaxGridOptions:i}),t.jqGrid("setGridParam",{page:1}),t.trigger("reloadGrid"),i.async=!0,t.jqGrid("setGridParam",{ajaxGridOptions:i});var r=jQuery.proxy(jQuery.jgrid.getCurrPos,t[0])();t.jqGrid("setSelection",r[1][0])},resetForm:function(t){var i=this,r=i.data("settings");if(void 0!=t.data("validator")){var a=t.data("validator").settings.errorClass;e("."+a,t).removeClass(a)}return jQuery("input[type!='button'][type!='checkbox'][type!='radio'], textarea",t).val(""),jQuery("input[type='checkbox']",t).not("[name*='jqg_GRID_']",t).not("[disabled='disabled']",t).removeAttr("checked"),jQuery.each(e("select.rup_combo",t),function(e,t){r.filter&&"reset"===r.filter.clearSearchFormMode?jQuery(t).rup_combo("reset"):jQuery(t).rup_combo("clear")}),e("[ruptype='autocomplete']",t).each(function(t,i){e(i).val("")}),e("[ruptype='tree']",t).each(function(t,i){e(i).rup_tree("setRupValue","")}),r.filter&&"reset"===r.filter.clearSearchFormMode?t.resetForm():e("input[type='radio']",t).removeAttr("checked"),i},setGridParam:function(t){return e(this).jqGrid("setGridParam",t),e(this)},setSelection:function(e,t,i){var r,a=this;a.data("settings");r=a.triggerHandler("rupTable_setSelection",arguments),r!==!1&&a.jqGrid("setSelection",e,t,i)},showServerValidationFieldErrors:function(t,i){var r=e(this);void 0!==i.rupErrorFields||void 0!==i.rupFeedback?(t.validate().submitted=e.extend(!0,t.validate().submitted,i.rupErrorFields),t.validate().invalid=i.rupErrorFields,t.validate().showErrors(i.rupErrorFields)):void 0!==i.rupFeedback&&r.rup_table("showFeedback",t.validate().settings.feedback,e.rup_utils.printMsg(i.rupFeedback.message),void 0!==i.rupFeedback.imgClass?i.rupFeedback.imgClass:null)},clearHighlightedRowAsSelected:function(t){var i=this,r=i[0],a=r.p,n=t[0],o=a.frozenColumns===!0?a.id+"_frozen":"";t.hasClass("ui-subgrid")||t.hasClass("ui-state-disabled")||(e("#jqg_"+e.jgrid.jqID(a.id)+"_"+e.jgrid.jqID(n.id))[a.useProp?"prop":"attr"]("checked",!1),t.removeClass("ui-state-highlight").attr("aria-selected","false"),o&&(e("#jqg_"+e.jgrid.jqID(a.id)+"_"+e.jgrid.jqID(n.id),r.grid.fbDiv)[a.useProp?"prop":"attr"]("checked",!1),e("#"+e.jgrid.jqID(n.id),r.grid.fbDiv).removeClass("ui-state-highlight"))),i.trigger("rupTableClearHighlightedRowAsSelected",[t])},highlightRowAsSelected:function(t){var i=this,r=i[0],a=r.p,n=t[0],o=a.frozenColumns===!0?a.id+"_frozen":"";t.length>0&&!t.hasClass("ui-subgrid")&&!t.hasClass("jqgroup")&&!t.hasClass("ui-state-disabled")&&(e("#jqg_"+e.jgrid.jqID(a.id)+"_"+e.jgrid.jqID(n.id))[a.useProp?"prop":"attr"]("checked",!0),t.addClass("ui-state-highlight").attr("aria-selected","true"),a.selarrrow.push(n.id),a.selrow=n.id,o&&(e("#jqg_"+e.jgrid.jqID(a.id)+"_"+e.jgrid.jqID(n.id),r.grid.fbDiv)[a.useProp?"prop":"attr"]("checked",!0),e("#"+e.jgrid.jqID(n.id),r.grid.fbDiv).addClass("ui-state-highlight")),i.trigger("rupTableHighlightRowAsSelected",[t]))},updateDetailPagination:function(t,i){var r,a,n=this,o=n.data("settings"),s=o.id;r=void 0!==t?t:e.proxy(o.getDetailCurrentRowCount,n)(),a=void 0!==i?i:e.proxy(o.getDetailTotalRowCount,n)(),1===r?e("#first_"+s+", #back_"+s,o.$detailFormDiv).addClass("ui-state-disabled"):e("#first_"+s+", #back_"+s,o.$detailFormDiv).removeClass("ui-state-disabled"),r===a?e("#forward_"+s+", #last_"+s,o.$detailFormDiv).addClass("ui-state-disabled"):e("#forward_"+s+", #last_"+s,o.$detailFormDiv).removeClass("ui-state-disabled"),e("#rup_maint_selectedElements_"+n.attr("id")).text(jQuery.jgrid.format(jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_grid.defaults.detailForm_pager"),r,a))},updateSavedData:function(e){var t=this,i=t.data("settings");jQuery.isFunction(e)&&jQuery.proxy(e,t)(rp_ge[i.id]._savedData)}}),jQuery.fn.rup_table("extend",{configurePager:function(t){var i,r,a=this;void 0!==t.pager&&null!==t.pager&&(t.$pager=e(0===t.pager.indexOf("#")?t.pager:"#"+t.pager),i=t.$pager.attr("id"),t.$pager.css("height","auto"),$pagerLeft=e("#"+i+"_left"),r=e("#"+i+"_center"),$pagerRight=e("#"+i+"_right"),$pagerLeft.addClass("pager_left"),r.addClass("pager_center"),$pagerRight.addClass("pager_right"),$pagerLeft.html(""),t.multiselect===!0&&$pagerLeft.append(e("<div/>").addClass("ui-paging-selected").html("0 "+jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_grid.pager.selected"))),jQuery(".pager_center table td",t.$pager).addClass("pagControls"),jQuery(".pagControls input.ui-pg-input",r).on("change",function(){var t=parseInt(e(this).val()),i=parseInt(a.rup_table("getGridParam","lastpage"));isNaN(t)===!1&&t>i&&e(this).val(i)}),jQuery(".pagControls select.ui-pg-selbox",r).attr("title",jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_grid.pager.select")).rup_tooltip(),jQuery(".pagControls input.ui-pg-input",r).attr("title",jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_grid.pager.input")).rup_tooltip(),jQuery("#first_"+i,r).html(e("<a/>").attr("href","javascript:void(0)").html(jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_grid.pager.primPag")).addClass("linkPaginacion")).removeClass("ui-pg-button"),jQuery("#prev_"+i,r).html(e("<a/>").attr("href","javascript:void(0)").html(jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_grid.pager.anterior")).addClass("linkPaginacion")).removeClass("ui-pg-button"),jQuery("#next_"+i,r).html(e("<a/>").attr("href","javascript:void(0)").html(jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_grid.pager.siguiente")).addClass("linkPaginacion")).removeClass("ui-pg-button"),jQuery("#last_"+i,r).html(e("<a/>").attr("href","javascript:void(0)").html(jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_grid.pager.ultiPag")).addClass("linkPaginacion")).removeClass("ui-pg-button"))}}),jQuery.fn.rup_table("extend",{_init:function(i){if(i.length>1)jQuery.rup.errorGestor(jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_global.initError")+e(this).attr("id"));else{var r=this,a={},n=jQuery.isArray(i[0].defaultPlugins)?i[0].defaultPlugins:jQuery.fn.rup_table.defaults.defaultPlugins,o=jQuery.merge([],i[0].usePlugins),s=jQuery.merge(jQuery.merge([],n),o);jQuery.rup_utils.sortArray(s,function(e,i){return t.plugins[i].loadOrder-t.plugins[e].loadOrder}),a=e.extend(!0,{},a,jQuery.fn.rup_table.plugins.core.defaults),e.each(s,function(i,r){void 0!==t.plugins[r]&&void 0!==jQuery.fn.rup_table.plugins[r]&&(a=e.extend(!0,{},a,jQuery.fn.rup_table.plugins[r].defaults))}),a=jQuery.extend(!0,{},jQuery.fn.rup_table.defaults,a,i[0]),r.rup_table("preConfigureCore",a),e.each(s,function(e,i){jQuery.isFunction(t.plugins[i].preConfiguration)&&jQuery.proxy(t.plugins[i].preConfiguration,r)(a)}),r.jqGrid(a),r.rup_table("postConfigureCore",a),e.each(s,function(e,i){jQuery.isFunction(t.plugins[i].postConfiguration)&&jQuery.proxy(t.plugins[i].postConfiguration,r)(a)}),r.data("settings",a),r.triggerHandler("rupTable_coreConfigFinished")}},_getLineIndex:function(e){var t,i,r=this,a=r.data("settings"),n=a.id+"ghead_",o=0;if(r.rup_table("getGridParam","grouping")!==!0)return r.jqGrid("getInd",e);for(var s=0;s<r[0].rows.length;s++)if(t=jQuery(r[0].rows[s]),i=t.attr("id"),void 0!==i&&i.indexOf(n)===-1&&(o++,i===e))return o}}),jQuery.fn.rup_table("extend",{addRowData:function(t,i,r,a){var n=e(this);return n.jqGrid("addRowData",t,i,r,a)},delRowData:function(t){var i=e(this);return i.jqGrid("delRowData",t),i},getActiveRowId:function(){var e=this,t=e.data("settings");return jQuery.proxy(t.getActiveRowId,e)()},getActiveLineId:function(){var e=this,t=e.data("settings");return jQuery.proxy(t.getActiveLineId,e)()},setRowData:function(t,i,r){var a=e(this);a.jqGrid("setRowData",t,i,r),jQuery("td[title]",a).each(function(e,t){var i=jQuery(t),r=i.prop("title");i.attr({grid_tooltip:r,oldtitle:r}).removeAttr("title")})},getRowData:function(t){var i=e(this);return i.jqGrid("getRowData",t)},getDataIDs:function(){var t=e(this);return t.jqGrid("getDataIDs")},clearGridData:function(t){var i=e(this);return i.jqGrid("clearGridData",t)},getColModel:function(){var t=e(this);return t.jqGrid("getGridParam","colModel")},getCol:function(t,i){var r=e(this);return r.jqGrid("getCell",t,i)},getSerializedForm:function(e,t,i){return form2object(e instanceof jQuery?e[0]:e,i?i:null,!!t&&t)}}),jQuery.fn.rup_table.plugins={},jQuery.fn.rup_table.plugins.core={},jQuery.fn.rup_table.plugins.core.defaults={core:{operations:{},defaultOperations:{},showOperations:{},defaultLoadErrorTitle:e.rup.i18n.base.rup_ajax.errorTitle}},jQuery.fn.rup_table.defaults={altRows:!0,altclass:"rup-grid_oddRow",datatype:"json",editable:!1,height:"auto",jsonReader:{repeatitems:!1},pager:null,resizable:!1,rowNum:10,rowList:[10,20,30],sortable:!0,viewrecords:!0,mtype:"POST",loadError:function(t,i,r){var a=e(this),n=a.data("settings");jQuery.rup_messages("msgError",{title:n.core.defaultLoadErrorTitle,message:t.responseText})},loadOnStartUp:!0,loadBeforeSend:function(e,t){e.setRequestHeader("JQGridModel","true"),e.setRequestHeader("Content-Type","application/json")},loadui:"block",validate:{},defaultPlugins:[],dataProxy:jQuery.rup_table.proxyAjax,defaultGridInfoCol:{name:"rupInfoCol",index:"rupInfoCol",editable:!1,fixed:!0,sortable:!1,width:16,resizable:!1,classes:"rupInfoCol",search:!1,formatter:function(){return"<span class='ui-icon ui-icon-rupInfoCol'/>"}},defaultGridMultiplePkCol:{name:"pkCol",index:"pkCol",hidden:!0,editable:!1,fixed:!0,sortable:!1,width:25,resizable:!1,search:!1},multiplePkToken:"~",scrollOffset:0,showGridInfoCol:!1,tooltipDelay:500}}(jQuery),/*!
 * Copyright 2013 E.J.I.E., S.A.
 *
 * Licencia con arreglo a la EUPL, Versión 1.1 exclusivamente (la «Licencia»);
 * Solo podrá usarse esta obra si se respeta la Licencia.
 * Puede obtenerse una copia de la Licencia en
 *
 *      http://ec.europa.eu/idabc/eupl.html
 *
 * Salvo cuando lo exija la legislación aplicable o se acuerde por escrito, 
 * el programa distribuido con arreglo a la Licencia se distribuye «TAL CUAL»,
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ni expresas ni implícitas.
 * Véase la Licencia en el idioma concreto que rige los permisos y limitaciones
 * que establece la Licencia.
 */
function(e){jQuery.rup_table.registerPlugin("contextMenu",{loadOrder:4,preConfiguration:function(e){var t=this;return t.rup_table("preConfigureContextMenu",e)},postConfiguration:function(e){var t=this;return t.rup_table("postConfigureContextMenu",e)}}),jQuery.fn.rup_table("extend",{preConfigureContextMenu:function(e){var t=e.contextMenu;t.createDefaultRowOperations===!0&&(t.showOperations=jQuery.extend(!0,{},t.defaultRowOperations,e.core.showOperations,t.showOperations))},postConfigureContextMenu:function(t){function i(e,i){for(var r=0;r<e.length;r++)if(jQuery(e[r]).attr("id")===t.id+"_"+i)return r+1;return-1}var r=this,a=t.contextMenu;r.one({"jqGridLoadComplete.rupTable.contextMenu":function(n){var o,s,l=jQuery(t.contextMenu.tbodySelector,r),d={},u=!1,c=jQuery.isArray(t.contextMenu.colNames),p={};if(jQuery.each(t.contextMenu.showOperations,function(e,i){var a;i!==!1&&(a=t.core.operations[e],void 0!==a&&(d[e]={name:a.name,id:t.id+"_contextMenu_"+e,cssSprite:a.icon,disabled:function(){return!jQuery.proxy(a.enabled,r)()},callback:function(e,t){jQuery.proxy(a.callback,r)(e,t)},className:a.className},jQuery.isArray(i)===!0&&(u=!0,d[e].colNames=i)))}),jQuery.each(t.contextMenu.items,function(e,t){jQuery.isArray(t.colNames)&&(u=!0)}),jQuery.extend(!0,d,t.contextMenu.items),s=jQuery(t.contextMenu.theadThSelector,"#gview_"+t.id),e("ul.context-menu-list",l).remove(),c&&!u)for(var h=0;h<a.colNames.length;h++)jQuery(a.tbodyTdSelector+":nth-child("+i(s,a.colNames[h])+")",r).rup_contextMenu({items:d});else u?(jQuery.isArray(a.colNames)||(a.colNames=jQuery.map(t.colModel,function(e,t){if(e.hidden!==!0)return e.name})),jQuery.each(d,function(e,t){var i;i=jQuery.isArray(t.colNames)?t.colNames:a.colNames;for(var r=0;r<i.length;r++){o={},o[i[r]]={},jQuery.extend(!0,p,o);var n={};n[e]=t,jQuery.extend(!0,p[i[r]],n)}}),jQuery.each(p,function(e,t){jQuery(a.tbodyTdSelector+":nth-child("+i(s,e)+")",r).rup_contextMenu({items:t})})):l.rup_contextMenu({items:d})}})}}),jQuery.fn.rup_table.plugins.contextMenu={},jQuery.fn.rup_table.plugins.contextMenu.defaults={contextMenu:{colNames:null,createDefaultRowOperations:!0,defaultRowOperations:{},rowOperations:{},tbodySelector:"tbody:first tr[role='row'].jqgrow",tbodyTdSelector:"tbody:first tr.jqgrow td",theadThSelector:"thead:first th",items:{}}}}(jQuery),/*!
 * Copyright 2013 E.J.I.E., S.A.
 *
 * Licencia con arreglo a la EUPL, Versión 1.1 exclusivamente (la «Licencia»);
 * Solo podrá usarse esta obra si se respeta la Licencia.
 * Puede obtenerse una copia de la Licencia en
 *
 *      http://ec.europa.eu/idabc/eupl.html
 *
 * Salvo cuando lo exija la legislación aplicable o se acuerde por escrito, 
 * el programa distribuido con arreglo a la Licencia se distribuye «TAL CUAL»,
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ni expresas ni implícitas.
 * Véase la Licencia en el idioma concreto que rige los permisos y limitaciones
 * que establece la Licencia.
 */
function(e){jQuery.rup_table.registerPlugin("filter",{loadOrder:1,preConfiguration:function(e){var t=this;return t.rup_table("preConfigureFilter",e)},postConfiguration:function(e){var t=this;return t.rup_table("postConfigureFilter",e)}}),jQuery.fn.rup_table("extend",{preConfigureFilter:function(t){var i,r,a,n,o,s,l,d,u=this,c=t.id,p=t.filter;if(p.id=void 0!==p.id?p.id:c+"_filter_form",p.filterToolbarId=void 0!==p.filterToolbar?p.filterToolbar:c+"_filter_toolbar",p.filterButtonId=void 0!==p.filterButtonId?p.filterButtonId:c+"_filter_filterButton",p.cleanLinkId=void 0!==p.cleanLinkId?p.cleanLinkId:c+"_filter_cleanLink",p.collapsableLayerId=void 0!==p.collapsableLayerId?p.collapsableLayerId:c+"_filter_fieldset",p.toggleIcon1Id=void 0!==p.toggleIcon1?p.toggleIcon1:c+"_filter_toggle_icon1",p.toggleLabelId=void 0!==p.toggleLabelId?p.toggleLabelId:c+"_filter_toggle_label",p.filterSummaryId=void 0!==p.filterSummaryId?p.filterSummaryId:c+"_filter_summary",p.toggleIcon2Id=void 0!==p.toggleIcon2?p.toggleIcon2:c+"_filter_toggle_icon2",p.$filterContainer=jQuery("#"+p.id),p.$filterToolbar=jQuery("#"+p.filterToolbarId),0===p.$filterContainer.length?alert("El identificador especificado para el fomulario de búsqueda no existe."):0===p.$filterToolbar.length?alert("El identificador especificado para la barra de controles del formulario de filtrado no existe."):(i=jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_table.templates.filter.toggleIcon1"),r=jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_table.templates.filter.toggleLabel"),a=jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_table.templates.filter.filterSummary"),n=jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_table.templates.filter.toggleIcon2"),o=e(jQuery.jgrid.format(i,p.toggleIcon1Id)),s=e(jQuery.jgrid.format(r,p.toggleLabelId,e.rup.i18n.base.rup_table.plugins.filter.filterCriteria)),l=e(jQuery.jgrid.format(a,p.filterSummaryId)),d=e(jQuery.jgrid.format(n,p.toggleIcon2Id)),p.$filterToolbar.append(o).append(s).append(l).append(d),p.$filterContainer=jQuery("#"+p.id),p.$filterButton=jQuery("#"+p.filterButtonId),p.$cleanLink=jQuery("#"+p.cleanLinkId),p.$collapsableLayer=jQuery("#"+p.collapsableLayerId),p.$toggleIcon1=o,p.$toggleLabel=s,p.$filterSummary=l,p.$toggleIcon2=d,"FORM"===p.$filterContainer.prop("tagName")&&p.$filterContainer.ajaxForm(),p.$filterContainer.parent().css("width",u.rup_table("getGridParam","width")),null===t.filter.url&&(t.filter.url=t.baseUrl+"/filter"),t.url=t.filter.url,t.searchURL=u.rup_table("getGridParam","url"),p.$filterContainer.bind("keydown",function(e){13==e.keyCode&&u.rup_table("filter")}),p.$filterButton.bind("click",function(){t.$firstStartUp&&(t.$firstStartUp=!1),u.rup_table("filter")}),p.$cleanLink.bind("click",function(){t.$firstStartUp&&(t.$firstStartUp=!1),u.rup_table("cleanFilterForm").rup_table("filter"),void 0!==p.validate&&jQuery(".rup-maint_validateIcon",p.$filterContainer).remove()}),p.$toggleIcon1.add(p.$toggleLabel).add(p.$toggleIcon2).attr("tabindex","0").on({keydown:function(e){13==e.keyCode&&u.rup_table("toggleFilterForm")}}),p.$filterToolbar.addClass("cursor_pointer").on({click:function(){u.rup_table("toggleFilterForm")}}),t.filter.showHidden===!0&&(p.$collapsableLayer.hide(),p.$toggleIcon1.removeClass("ui-icon-triangle-1-n").addClass("ui-icon-triangle-1-s"),p.$filterSummary.parent().addClass("rup-maint_searchCriteria")),void 0!==p.validate&&(p.$filterContainer.rup_validate(p.validate),u.on({"rupTable_beforeFilter.filter.validate":function(){return void 0!==h&&t.$firstStartUp?null:p.$filterContainer.valid()}}))),u.on({"rupTable_serializeGridData.filter":function(e,i){var r,a=form2object(t.filter.$filterContainer[0]),n=jQuery.param(a),o=u.data("tmp.lastFilterParams");if(1==t.$firstStartUp)var r=h.$filterDefaultValue;void 0==r?jQuery.extend(i,{filter:a}):jQuery.extend(i,{filter:r}),void 0!==o&&o===n||(jQuery.extend(i,{page:u.data("tmp.firstLoad")===!0&&null!==t.core.startOnPage?t.core.startOnPage:"1"}),u.data("tmp.lastFilterParams",n))}}),u.on("jqGridGridComplete",function(e){void 0!==u.data("settings")&&u.rup_table("showSearchCriteria")}),void 0!=t.multifilter&&null!=t.multifilter){var h=t.multifilter;t.filter.$filterForm=e("#"+t.id+"_filter_form");var f;t.$firstStartUp=!0,f=null!=h.idFilter?h.idFilter:t.id;var g;g=null!=h.userFilter?h.userFilter:LOGGED_USER;var m;m=null==h.getDefault||h.getDefault,m&&e.rup_ajax({url:t.baseUrl+"/multiFilter/getDefault?filterSelector="+f+"&user="+g,type:"GET",dataType:"json",showLoading:!1,contentType:"application/json",complete:function(e,i){t.loadOnStartUp&&u.rup_table("filter"),u.triggerHandler("rupTable_multifilter_fillForm",u.data.filterData)},success:function(t,i,r){if(null!=t){var a=e.parseJSON(t.filterValue);u._fillForm(a),h.$filterDefaultName=t.filterName,h.$filterDefaultValue=a,u.data.filterData=a}},error:function(e,t,i){}})}},postConfigureFilter:function(e){}}),jQuery.fn.rup_table("extend",{cleanFilterForm:function(){var e=this,t=e.data("settings");return e.triggerHandler("rupTable_filter_beforeCleanFilterForm"),e.rup_table("resetForm",t.filter.$filterContainer),e.triggerHandler("rupTable_filter_afterCleanFilterForm"),e},filter:function(t){var i=this,r=i.data("settings"),a=i.triggerHandler("rupTable_beforeFilter");a!==!1&&"stop"!==a&&(e.isFunction(r.filter.beforeFilter)&&(a=r.filter.beforeFilter.call(i),void 0===a&&(a=!0),a===!1)||(i.rup_table("setGridParam",{page:"1"}),i.trigger("reloadGrid")))},getFilterParams:function(){var e=this,t=e.data("settings");return form2object(t.filter.$filterContainer[0])},hideFilterForm:function(){var t=e(this),i=t.data("settings"),r=i.filter;r.$collapsableLayer.hide(i.filter.transitionConfig),r.$toggleIcon2.removeClass("ui-icon-circle-triangle-n").addClass("ui-icon-circle-triangle-s"),r.$toggleIcon1.removeClass("ui-icon-triangle-1-s").addClass("ui-icon-triangle-1-e"),r.$filterSummary.parent().addClass("rup-maint_searchCriteria")},showFilterForm:function(){var t=e(this),i=t.data("settings"),r=i.filter;r.$collapsableLayer.show(e.extend({},i.filter.transitionConfig,{complete:function(){jQuery("input:first",r.$filterContainer).focus()}})),r.$toggleIcon2.removeClass("ui-icon-circle-triangle-s").addClass("ui-icon-circle-triangle-n"),r.$toggleIcon1.removeClass("ui-icon-triangle-1-e").addClass("ui-icon-triangle-1-s"),r.$filterSummary.parent().removeClass("rup-maint_searchCriteria")},toggleFilterForm:function(t){var i=e(this),r=i.data("settings"),a=r.filter;return a.$collapsableLayer.is(":hidden")?i.rup_table("showFilterForm"):i.rup_table("hideFilterForm"),i},showSearchCriteria:function(){var t,i,r,a,n,o,s=this,l=s.data("settings"),d=" ",t=l.filter.$filterContainer.serializeArray();i=l.filter.$filterContainer,filterMulticombo=new Array;var u,c=(e(".jstree",l.filter.$filterContainer),e(".jstree",l.filter.$filterContainer));e.each(c,function(i,r){u=new Object,u.name=e(r).attr("name"),u.value=e(r).rup_tree("getRupValue").length,u.type="rup_tree",t.push(u)});for(var p=0;p<t.length;p++)if(""!==t[p].value&&0!=e.inArray(t[p].name,l.filter.excludeSummary)){if(r=e("[name='"+t[p].name+"']",i),e.inArray(r.attr("id"),l.filter.filterExclude)!==-1)continue;if(r.length>1&&(r=e("[name='"+t[p].name+"']:checked",i)),"hidden"===e(r).attr("type"))continue;if(a=e(r).attr("id"),"combo"===e(r).attr("ruptype")&&0==r.next(".ui-multiselect").length&&(a+="-button"),"autocomplete"===e(r).attr("ruptype")&&(a=a.substring(0,a.indexOf("_label"))),label=e("label[for^='"+a+"']",i),label.length>0)n=label.html();else if("combo"!==e(r).attr("ruptype"))n=e("[name='"+t[p].name+"']",i).prev("div").find("label").first().html();else{var h,f=e("[name='"+t[p].name+"']",i);h=jQuery("[for='"+f.attr("id")+"']"),n=h.length>0?h.first().text():e("[name='"+t[p].name+"']",i).parent().prev("div").find("label").first().html()}switch(null!==n&&void 0!==n||(n=""),o=" = ",e(r)[0].tagName){case"INPUT":o+=e(r).val(),"checkbox"!==e(r)[0].type&&"radio"!==e(r)[0].type||(o="");break;case"DIV":e.each(t,function(e,t){t.name==r.attr("id")?0!=t.value&&(o+=" = "+t.value):o=""}),""==o&&(n="");break;case"SELECT":0==r.next(".ui-multiselect").length?o+=e("option[value='"+t[p].value+"']",r).html():e.inArray(e(r).attr("id"),filterMulticombo)===-1?(numSelected=r.rup_combo("value").length,0!==numSelected?o+=numSelected:(n="",o=""),filterMulticombo.push(e(r).attr("id"))):(n="",o="")}for(var g=new Array(":","="),m=0;m<g.length;m++)if(""!==n&&n.indexOf(g[m])!==-1){n=n.substring(0,n.indexOf(g[m]));break}for(;o.indexOf("&amp;nbsp;")!==-1;)o=o.replace("&amp;nbsp;","");if(""===n&&o.indexOf(" = ")!==-1&&(o=o.substring(2,o.length)),""===n&&""===e.trim(o))continue;d=d+n+o+", "}jQuery.isFunction(l.filter.fncSearchCriteria)&&(d=jQuery.proxy(l.filter.fncSearchCriteria,s,d)()),e.trim(d).length-1==e.trim(d).lastIndexOf(",")&&(d=d.substr(0,d.lastIndexOf(","))+" "),l.multifilter&&jQuery.isFunction(l.multifilter.fncFilterName)&&(d=jQuery.proxy(l.multifilter.fncFilterName,s,d)());for(var v,b=e("#titleSearch_"+l.id.name).css("height"),_=d,y=!1;;){if(l.filter.$filterSummary.html(" <i>"+_+"</i>"),v=e("#titleSearch_"+l.id.name).css("height"),v===b)break;_=_.substring(0,_.lastIndexOf(","))+" <b>...</b>",y=!0}y&&l.filter.$filterSummary.rup_tooltip({content:{text:d.substring(1)},position:{my:"bottom center",at:"top center"}})}}),jQuery.fn.rup_table("extend",{_getSearchFormFieldLabel:function(t,i){var r,a=t.attr("id"),n="",o=t.attr("ruptype");return r="combo"!==o?jQuery("label[for='"+a+"']",i):jQuery("label[for='"+a+"-button']",i),n=r.length>0?r.html():"combo"!==t.attr("ruptype")?e("[name='"+name+"']",i).prev("div").find("label").first().html():e("[name='"+name+"']",i).parent().prev("div").find("label").first().html(),n=n.replace(/[:=]/g,"")},_getSearchFormFieldValue:function(t,i){var r,a=" = ",n=[];switch(t.prop("tagName")){case"INPUT":a+=t.val(),"checkbox"!==t.attr("type")&&"radio"!==t.attr("type")||(a="");break;case"SELECT":0==t.next(".ui-multiselect").length?a+=e("option[value='"+t.rup_combo("getRupValue")+"']",t).html():e.inArray(t.attr("id"),n)===-1?(r=t.rup_combo("value").length,0!==r?a+=r:(fieldName="",a=""),n.push(t.attr("id"))):(fieldName="",a="")}for(;a.indexOf("&amp;nbsp;")!==-1;)a=a.replace("&amp;nbsp;","");return a}}),jQuery.fn.rup_table.plugins.filter={},jQuery.fn.rup_table.plugins.filter.defaults={core:{startOnPage:null},filter:{url:null,showHidden:!1,transitionConfig:{duration:"slow",effect:"blind"}}}}(jQuery),/*!
 * Copyright 2013 E.J.I.E., S.A.
 *
 * Licencia con arreglo a la EUPL, Versión 1.1 exclusivamente (la «Licencia»);
 * Solo podrá usarse esta obra si se respeta la Licencia.
 * Puede obtenerse una copia de la Licencia en
 *
 *      http://ec.europa.eu/idabc/eupl.html
 *
 * Salvo cuando lo exija la legislación aplicable o se acuerde por escrito,
 * el programa distribuido con arreglo a la Licencia se distribuye «TAL CUAL»,
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ni expresas ni implícitas.
 * Véase la Licencia en el idioma concreto que rige los permisos y limitaciones
 * que establece la Licencia.
 */
function(e){jQuery.rup_table.registerPlugin("search",{loadOrder:9,preConfiguration:function(e){var t=this;return t.rup_table("preConfigureSearch",e)},postConfiguration:function(e){var t=this;return t.rup_table("postConfigureSearch",e)}}),jQuery.fn.rup_table("extend",{preConfigureSearch:function(e){null===e.search.url&&(e.search.url=e.baseUrl+"/search")},postConfigureSearch:function(t){var i=this;i.rup_table("createSearchRow",t),i._initializeSearchProps(t),i.on({"jqGridLoadComplete.rupTable.search":function(e){var t=parseInt(i.rup_table("getGridParam","page"),10);i._hasPageMatchedElements(t)&&i.rup_table("highlightMatchedRowsInPage",t),i.rup_table("updateSearchPagination")},"jqGridSelectRow.rupTable.search rupTable_setSelection.search":function(e,t,r,a){i.rup_table("updateSearchPagination",t)},"jqGridGridComplete.rup_table.search":function(t){var i=e(this),r=i.data("settings");0===i.rup_table("getGridParam","records")?r.search.$searchRow.hide():r.search.$searchRow.show()},rupTable_searchAfterCreateToolbar:function(t,r){var a,n,o,s,l=i[0].p,d=l.colModel;e("th[role='columnheader']",r).each(function(t){if(a=d[t],o=void 0!==a.searchoptions&&void 0!==a.searchoptions.rupType?a.searchoptions.rupType:a.rupType,colModelName=a.name,n=e("[name='"+colModelName+"']",r),n.attr({title:l.colNames[t],"class":"editable customelement"}).removeAttr("readOnly"),void 0!==o){switch(s=a.searchoptions||a.editoptions,o){case"combo":s=e.extend({},{menuWidth:n.width()},s,{width:"97%"})}switch(n["rup_"+o](s),o){case"date":n.css("width","86%")}}})}})}}),jQuery.fn.rup_table("extend",{toggleSearchForm:function(){var e,t,i=this,r=i.data("settings"),a=i[0].p;r.search.created?(e=jQuery("tr.ui-search-toolbar",i[0].grid.hDiv),t=a.frozenColumns===!0&&jQuery("tr.ui-search-toolbar",i[0].grid.fhDiv),jQuery("tr.ui-search-toolbar","#gview_"+r.id).is(":visible")?(e.hide(r.search.transitionConfig),t&&t.hide(r.search.transitionConfig),jQuery("#searchNavLayer_"+r.id).hide(r.search.transitionConfig),r.search.$collapseIcon.removeClass("ui-icon-triangle-1-s"),r.search.$collapseIcon.addClass("ui-icon-triangle-1-e")):(e.show(r.search.transitionConfig),t&&t.show(r.search.transitionConfig),jQuery("#searchNavLayer_"+r.id).show(r.search.transitionConfig),r.search.$collapseIcon.removeClass("ui-icon-triangle-1-e"),r.search.$collapseIcon.addClass("ui-icon-triangle-1-s"))):(i.rup_table("createSearchToolbar"),r.search.$collapseIcon.removeClass("ui-icon-triangle-1-e"),r.search.$collapseIcon.addClass("ui-icon-triangle-1-s"),jQuery("#searchNavLayer_"+r.id).show(),r.search.created=!0,jQuery("input","table thead tr.ui-search-toolbar").keypress(function(e){var t=e.charCode||e.keyCode||0;return 13==t?(i.rup_table("search"),!1):this}))},createSearchToolbar:function(){var t=this,i=t.data("settings"),r=t[0].p,a=jQuery("<tr>").attr({"class":"ui-search-toolbar",role:"rowheader"});0!==jQuery("table thead tr:first th[id='"+i.id+"_cb']",t[0].grid.hDiv).length&&a.append(jQuery("<th>").attr({role:"columnheader","class":"search_row_header ui-th-column ui-th-"+r.direction})),a.append(jQuery("<th>").attr({role:"columnheader","class":"search_row_header ui-th-column ui-th-"+r.direction})),e.each(r.colModel,function(n,o){var s,l,d=jQuery("<th>").attr({role:"columnheader","class":"search_row_header ui-th-column ui-th-"+r.direction});o.hidden===!0&&d.css("display","none"),o.search=o.search!==!1,void 0===o.stype&&(o.stype=void 0!==o.edittype?o.edittype:"text",void 0!==o.searchoptions&&"combo"===o.searchoptions.rupType&&(o.stype="text")),soptions=e.extend({},o.searchoptions||o.editoptions||{},{id:o.name,name:o.name}),o.search&&(s=e.jgrid.createEl.call(t[0],void 0!==o.stype?o.stype:o.edittype,soptions,"",!0,e.extend({},e.jgrid.ajaxOptions,soptions.ajaxSelectOptions||{})),l=jQuery(s),l.css("width","97%"),d.append(l)),o.name!==i.defaultGridInfoCol.name&&o.name!==i.defaultGridMultiplePkCol.name&&"cb"!==o.name&&a.append(d)}),e("table thead",t[0].grid.hDiv).append(a),i.search.$searchRowInputs=jQuery("table thead tr.ui-search-toolbar","#gview_"+i.id),i.search.$searchRowInputs.attr({id:i.id+"_search_rowInputs",form:i.id+"_search_rowInputs"}),void 0!==i.search.validate&&(i.search.$searchForm.rup_validate(i.search.validate),t.on({"rupTable_beforeSearch.search.validate":function(){return i.search.$searchForm.valid()}})),t.triggerHandler("rupTable_searchAfterCreateToolbar",[a]),t[0].ftoolbar=!0},createSearchRow:function(t){function i(e,t){e.hasClass("ui-state-disabled")||r.rup_table("navigateToMatchedRow",t)}var r=this,a=jQuery("table thead","#gview_"+t.id),n=jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_table.templates.search.searchRowHeader"),o=jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_table.templates.search.collapseLayer"),s=jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_table.templates.search.collapseIcon"),l=jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_table.templates.search.collapseLabel"),d=jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_table.templates.search.matchedLayer"),u=jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_table.templates.search.matchedLabel"),c=jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_table.templates.search.navLayer"),p=jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_table.templates.search.navLink"),h=jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_table.templates.search.navSearchButton"),f=jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_table.templates.search.navClearLink"),g=e(jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_table.templates.search.searchRow")),m=e(jQuery.jgrid.format(n,a.find("th").length)),v=e(jQuery.jgrid.format(o,"searchCollapseLayer_"+t.id)),b=e(jQuery.jgrid.format(s,"searchCollapseIcon_"+t.id)),_=e(jQuery.jgrid.format(l,"searchCollapsLabel_"+t.id,jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_table.plugins.search.searchCriteria")));$matchedLayer=e(jQuery.jgrid.format(d,"matchedLayer_"+t.id)),$matchedLabel=e(jQuery.jgrid.format(u,"matchedLabel_"+t.id,jQuery.jgrid.format(jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_table.plugins.search.matchedRecords"),0))),$navLayer=e(jQuery.jgrid.format(c,"searchNavLayer_"+t.id)),$firstNavLink=e(jQuery.jgrid.format(p,"search_nav_first_"+t.id,jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_table.first"))),$backNavLink=e(jQuery.jgrid.format(p,"search_nav_back_"+t.id,jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_table.previous"))),$forwardNavLink=e(jQuery.jgrid.format(p,"search_nav_forward_"+t.id,jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_table.next"))),$lastNavLink=e(jQuery.jgrid.format(p,"search_nav_last_"+t.id,jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_table.last"))),$navSearchButton=e(jQuery.jgrid.format(h,"search_nav_button_"+t.id,jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_table.search.Find"))),$navClearLink=e(jQuery.jgrid.format(f,"search_nav_clear_link"+t.id,jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_table.search.Reset"))),v.append(b).append(_),$matchedLayer.append($matchedLabel),$navLayer.append($firstNavLink).append($backNavLink).append($forwardNavLink).append($lastNavLink).append($navSearchButton).append($navClearLink),m.append(v),m.append($matchedLayer),m.append($navLayer),g.append(m),a.append(g),t.search=t.search||{},t.search.created=!1,t.search.$collapseIcon=b,t.search.$searchRow=g,t.search.$matchedLabel=$matchedLabel,t.search.$firstNavLink=$firstNavLink,t.search.$backNavLink=$backNavLink,t.search.$forwardNavLink=$forwardNavLink,t.search.$lastNavLink=$lastNavLink,b.add(_).on("click",function(){r.rup_table("toggleSearchForm")}),$navSearchButton.on("click",function(){r.rup_table("search")}),$navClearLink.on("click",function(){r.rup_table("clearSearch")}),$navLayer.hide(),$firstNavLink.on("click",function(){i(jQuery(this),"first")}),$backNavLink.on("click",function(){i(jQuery(this),"prev")}),$forwardNavLink.on("click",function(){i(jQuery(this),"next")}),$lastNavLink.on("click",function(){i(jQuery(this),"last")}),$searchForm=jQuery("<form>").attr("id",t.id+"_search_searchForm"),t.search.$searchRow.parent().parent().wrap($searchForm),t.search.$searchForm=jQuery("#"+t.id+"_search_searchForm"),t.search.$searchRow.hide()},navigateToMatchedRow:function(e){var t=this,i=t.rup_table("fncGetSearchNavigationParams",e);t.rup_table("doSearchNavigation",i)},search:function(){var t=this,i=t.data("settings"),r=t.triggerHandler("rupTable_beforeSearch");r!==!1&&"stop"!==r&&(e.isFunction(i.search.beforeSearch)&&(r=i.search.beforeSearch.call(t),void 0===r&&(r=!0),r===!1)||t.rup_table("doSearch"))},doSearch:function(){var t,i=this,r=i.data("settings"),a={},n=parseInt(i.rup_table("getGridParam","page"),10),o=i.rup_table("getGridParam","postData");return a.filter=i.rup_table("getFilterParams"),a.search=form2object(r.search.$searchRowInputs[0]),i._initializeSearchProps(r),t=i.triggerHandler("rupTable_searchBeforeSubmit.rupTable.masterDetail",[o,a]),t!==!1&&void jQuery.rup_ajax({url:r.search.url,type:"POST",dataType:"json",data:jQuery.toJSON(e.extend(!0,{},o,a)),contentType:"application/json",success:function(e,t,a){rowsPerPage=parseInt(i.rup_table("getGridParam","rowNum"),10),0===e.length?(i._initializeSearchProps(r),i.rup_table("updateSearchPagination"),i.rup_table("clearHighlightedMatchedRows")):(jQuery.each(e,function(e,t){for(var a="",n=0;n<r.primaryKey.length;n++)a+=t.pk[r.primaryKey[n]]+r.multiplePkToken;t.id=a.substr(0,a.length-1),t.page=Math.ceil(t.tableLine/rowsPerPage),t.pageLine=t.tableLine-(t.page-1)*rowsPerPage,i._processMatchedRow(r,t)}),i.trigger("rupTableSearchSuccess"),i.rup_table("goToFirstMatched",n))}})},goToFirstMatched:function(e){var t=this,i=t.data("settings"),r="string"==typeof e?parseInt(e,10):e;t._hasPageMatchedElements(r)?(t.rup_table("setSelection",i.search.matchedRowsPerPage[r][0],!0),t.rup_table("highlightMatchedRowsInPage",r)):t.rup_table("navigateToMatchedRow","first")},fncGetSearchNavigationParams:function(t){var i,r,a,n,o=this,s=o.data("settings"),l=!1,d=!1,u=0,c=0,p=jQuery.proxy(jQuery.jgrid.getCurrPos,o[0])(),h=parseInt(o.rup_table("getGridParam","page"),10),f=h;switch(o.trigger("rupTableAfterSearchNav",[t]),p[0]=parseInt(p[0],10),i=o.rup_table("getActiveLineId"),e("#"+s.formEdit.feedbackId,s.$detailForm).hide(),t){case"first":l=!0,s.search.matchedPages[0]!==h&&(d=!0,f=s.search.matchedPages[0]),u=s.search.matchedLinesPerPage[f][0],c=u;break;case"prev":l=!0,a=s.search.matchedLinesPerPage[h]||[],r=e.inArray(i+1,a),r===-1&&(r=e.rup_utils.insertSorted(e.merge([],a),i+1)),0===r?(d=!0,n=e.inArray(h,s.search.matchedPages),n===-1&&(n=e.rup_utils.insertSorted(e.merge([],s.search.matchedPages),h)),f=s.search.matchedPages[n-1],a=s.search.matchedLinesPerPage[f],u=a[a.length-1]):u=a[r-1],c=u;break;case"next":l=!0,a=s.search.matchedLinesPerPage[h]||[],r=e.inArray(i+1,a),r===-1&&(r=e.rup_utils.insertSorted(e.merge([],a),i+1),r--),r===a.length-1?(d=!0,n=e.inArray(h,s.search.matchedPages),n===-1&&(n=e.rup_utils.insertSorted(e.merge([],s.search.matchedPages),h)-1),f=s.search.matchedPages[n+1],a=s.search.matchedLinesPerPage[f],u=a[0]):u=a[r+1],c=u;break;case"last":l=!0,s.search.matchedPages[s.search.matchedPages.length-1]!==h&&(d=!0,f=s.search.matchedPages[s.search.matchedPages.length-1]),u=s.search.matchedLinesPerPage[f][s.search.matchedLinesPerPage[f].length-1],c=u}return[t,l,d,u-1,p,f,c-1]},doSearchNavigation:function(t,i,r,a,n,o,s){var i,r,a,o,s,l,d,u,c=this,p=c.data("settings");e.isArray(t)&&(linkType=t[0],i=t[1],r=t[2],a=t[3],n=t[4],o=t[5],s=t[6],i&&(c.rup_table("hideFormErrors",p.$detailForm),pagePos=jQuery.proxy(jQuery.jgrid.getCurrPos,c[0])(),d=c.rup_table("getActiveRowId"),$row=jQuery(c.jqGrid("getInd",d,!0)),"true"!==$row.data("tmp.search.notToDeselect")&&(c.rup_table("setSelection",d,!1),void 0!==$row.data("tmp.search.notToDeselect")&&delete $row.data("tmp.search.notToDeselect")),r?(c.trigger("reloadGrid",[{page:o}]),c.on("jqGridAfterLoadComplete.rupTable.serach.pagination",function(e,t){l=jQuery.inArray(s+1,p.search.matchedLinesPerPage[o]),u=p.search.matchedRowsPerPage[parseInt(t.page,10)][l],$row=jQuery(c.jqGrid("getInd",u,!0)),"true"===$row.attr("aria-selected")&&$row.data("tmp.search.notToDeselect","true"),c.rup_table("setSelection",u,!0),c.off("jqGridAfterLoadComplete.rupTable.serach.pagination")})):(l=jQuery.inArray(a+1,p.search.matchedLinesPerPage[o]),u=p.search.matchedRowsPerPage[o][l],$row=jQuery(c.jqGrid("getInd",u,!0)),"true"===$row.attr("aria-selected")&&$row.data("tmp.search.notToDeselect","true"),c.rup_table("setSelection",u,!0))))},clearSearch:function(){var e=this,t=e.data("settings");e._initializeSearchProps(t),e.rup_table("updateSearchPagination"),e.rup_table("clearHighlightedMatchedRows"),jQuery("input,textarea","#gview_"+t.id+" table thead tr.ui-search-toolbar").val(""),jQuery("table thead tr.ui-search-toolbar [ruptype='combo']","#gview_"+t.id).rup_combo("clear")},clearHighlightedMatchedRows:function(){var e=this,t=e.data("settings");e.find("td[aria-describedby='"+t.id+"_rupInfoCol'] span.ui-icon.ui-icon-search").removeClass("ui-icon-search")},highlightMatchedRowsInPage:function(t){var i,r=this,a=r.data("settings");r[0].p;r.rup_table("clearHighlightedMatchedRows");for(var n=0;n<a.search.matchedRowsPerPage[t].length;n++)newIndexPos=a.search.matchedRowsPerPage[t][n],i=e(r.jqGrid("getInd",newIndexPos,!0)),r.rup_table("highlightMatchedRow",i)},highlightMatchedRow:function(e){var t=this,i=t.data("settings");e.find("td[aria-describedby='"+i.id+"_rupInfoCol'] span").addClass("ui-icon ui-icon-rupInfoCol ui-icon-search")},updateSearchPagination:function(t){var i,r,a,n,o=this,s=o.data("settings"),l=parseInt(o.rup_table("getGridParam","page"),10),d=e.jgrid.formatter.integer;void 0!==t?i=t:(r=jQuery.proxy(jQuery.jgrid.getCurrPos,o[0])(),i=r[0]!==-1?r[1][r[0]-1]:-1),0===s.search.numMatched?(s.search.$firstNavLink.add(s.search.$backNavLink).add(s.search.$forwardNavLink).add(s.search.$lastNavLink).addClass("ui-state-disabled"),s.search.$matchedLabel.html(jQuery.jgrid.format(jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_table.plugins.search.matchedRecords"),"0"))):i!==-1&&(jQuery.inArray(i,s.search.matchedRowsPerPage[l])!==-1?(n=o.rup_table("getSearchCurrentRowCount",i),s.search&&s.search.numMatched&&s.search.$matchedLabel.html(jQuery.jgrid.format(jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_table.plugins.search.matchedRecordsCount"),e.fmatter.util.NumberFormat(n,d),e.fmatter.util.NumberFormat(s.search.numMatched,d))),1===n?(s.search.$firstNavLink.addClass("ui-state-disabled"),s.search.$backNavLink.addClass("ui-state-disabled")):(s.search.$firstNavLink.removeClass("ui-state-disabled"),s.search.$backNavLink.removeClass("ui-state-disabled")),n===s.search.numMatched?(s.search.$lastNavLink.addClass("ui-state-disabled"),s.search.$forwardNavLink.addClass("ui-state-disabled")):(s.search.$lastNavLink.removeClass("ui-state-disabled"),s.search.$forwardNavLink.removeClass("ui-state-disabled"))):(s.search&&s.search.numMatched&&s.search.$matchedLabel.html(jQuery.jgrid.format(jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_table.plugins.search.matchedRecords"),e.fmatter.util.NumberFormat(s.search.numMatched,d))),s.search.$firstNavLink.removeClass("ui-state-disabled"),s.search.$backNavLink.removeClass("ui-state-disabled"),s.search.$forwardNavLink.removeClass("ui-state-disabled"),s.search.$lastNavLink.removeClass("ui-state-disabled"),jQuery.inArray(s.search.matchedPages,l)>0?s.search.$backNavLink.removeClass("ui-state-disabled"):jQuery.inArray(l,s.search.matchedPages)===-1&&0===e.rup_utils.insertSorted(e.merge([],s.search.matchedPages),l)?(s.search.$backNavLink.addClass("ui-state-disabled"),s.search.$firstNavLink.addClass("ui-state-disabled")):jQuery.inArray(l,s.search.matchedPages)===-1&&e.rup_utils.insertSorted(e.merge([],s.search.matchedPages),l)>=s.search.matchedPages.length?(s.search.$forwardNavLink.addClass("ui-state-disabled"),s.search.$lastNavLink.addClass("ui-state-disabled")):(r=o.rup_table("getActiveLineId"),a=e.rup_utils.insertSorted(e.merge([],s.search.matchedLinesPerPage[l]),r+1),0===a&&s.search.$backNavLink.addClass("ui-state-disabled"),a===s.search.matchedLinesPerPage[l].length&&s.search.$forwardNavLink.addClass("ui-state-disabled"))))},getSearchCurrentRowCount:function(t){var i,r=this,a=r.data("settings"),n=parseInt(r.rup_table("getGridParam","page"),10),o=jQuery.proxy(jQuery.jgrid.getCurrPos,r[0])(),s=r.rup_table("getSelectedRows"),l=jQuery.inArray(void 0!==t?t:s[0],o[1]),d=0;i=jQuery.inArray(n,a.search.matchedPages);for(var u=0;u<i;u++)d+=a.search.matchedLinesPerPage[a.search.matchedPages[u]].length;return d+=e.inArray(l+1,a.search.matchedLinesPerPage[a.search.matchedPages[i]])+1}}),jQuery.fn.rup_table("extend",{_hasPageMatchedElements:function(e){var t=this,i=t.data("settings"),r="string"==typeof e?parseInt(e,10):e;return jQuery.inArray(r,i.search.matchedPages)!==-1},_initializeSearchProps:function(e){void 0===e.search&&(e.search={}),e.search.numMatched=0,e.search.matchedRowsPerPage=[],e.search.matchedLinesPerPage=[],e.search.matchedRows=[],e.search.matchedIds=[],e.search.matchedPages=[]},_processMatchedRow:function(t,i){var r;void 0===t.search.matchedRowsPerPage[i.page]&&(t.search.matchedRowsPerPage[i.page]=[],t.search.matchedLinesPerPage[i.page]=[]),jQuery.inArray(i.id,t.search.matchedIds)===-1&&(t.search.matchedIds.push(i.id),t.search.matchedRows.push({id:i.id,page:i.page}),r=e.rup_utils.insertSorted(t.search.matchedLinesPerPage[i.page],i.pageLine),t.search.matchedRowsPerPage[i.page].splice(r,0,i.id),t.search.matchedRowsPerPage[i.page].length>0&&jQuery.inArray(parseInt(i.page,10),t.search.matchedPages)===-1&&e.rup_utils.insertSorted(t.search.matchedPages,parseInt(i.page,10)),t.search.numMatched++)}}),jQuery.fn.rup_table.plugins.search={},jQuery.fn.rup_table.plugins.search.defaults={showGridInfoCol:!0,search:{url:null,autosearch:!1,beforeSearch:function(){return!0},defaultSearchInfoCol:{name:"infoSearch",index:"infoSearch",editable:!1,width:"15em",search:!1},searchOnEnter:!1,transitionConfig:{duration:0}}}}(jQuery),/*!
 * Copyright 2013 E.J.I.E., S.A.
 *
 * Licencia con arreglo a la EUPL, Versión 1.1 exclusivamente (la «Licencia»);
 * Solo podrá usarse esta obra si se respeta la Licencia.
 * Puede obtenerse una copia de la Licencia en
 *
 *      http://ec.europa.eu/idabc/eupl.html
 *
 * Salvo cuando lo exija la legislación aplicable o se acuerde por escrito, 
 * el programa distribuido con arreglo a la Licencia se distribuye «TAL CUAL»,
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ni expresas ni implícitas.
 * Véase la Licencia en el idioma concreto que rige los permisos y limitaciones
 * que establece la Licencia.
 */
function(e){jQuery.rup_table.registerPlugin("toolbar",{loadOrder:3,preConfiguration:function(e){var t=this;return t.rup_table("preConfigureToolbar",e)},postConfiguration:function(e){var t=this;return t.rup_table("postConfigureToolbar",e)}}),jQuery.fn.rup_table("extend",{preConfigureToolbar:function(t){var i=this,r=t.toolbar;r.id=null!==r.id?r.id:t.id+"_toolbar",jQuery("#"+r.id).length>0?(t.$toolbar=e("#"===r.id[0]?r.id:"#"+r.id),t.$toolbar.hasClass("rup-toolbar")||t.$toolbar.rup_toolbar({width:796})):(r={},r.id="rup-maint_toolbar-"+t.id,r.self=e("<div/>").attr("id",r.id),i.prepend(r.self),r.self.rup_toolbar({width:796})),r.$toolbar=t.$toolbar,r.autoAjustToolbar&&t.$toolbar.css("width",i.rup_table("getGridParam","width")-5),r.createDefaultToolButtons===!0&&(r.showOperations=jQuery.extend(!0,{},r.defaultButtons,t.core.showOperations,r.showOperations)),r.buttons=jQuery.extend(!0,{},r.newButtons,r.buttons)},postConfigureToolbar:function(t){var i=this,r=t.toolbar,a=1;jQuery.each(t.toolbar.showOperations,function(e,n){var o;n===!0&&(o=t.core.operations[e],void 0!==o&&(r["btn"+e.capitalize()]=t.$toolbar.addButton({id:"btn"+e.capitalize(),i18nCaption:o.name,css:o.icon,index:a++,dropdown:o.dropdown,right:o.right},jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_table")).bind("click",function(e){jQuery.proxy(o.callback,i)(i,e)})))}),void 0!==r.buttons&&null!==r.buttons&&jQuery.each(r.buttons,function(i,r){if(void 0===r.json_i18n&&(r.json_i18n={}),void 0!==r.obj&&void 0!==r.click)t.$toolbar.addButton(r.obj,r.json_i18n).bind("click",r.click);else if(void 0!==r.buttons){var a=t.$toolbar.addMButton(r,r.json_i18n).bind("click",t.$toolbar.showMButton);t.$toolbar.addButtonsToMButton(r.buttons,a,r.json_i18n)}else e.rup.errorGestor(e.rup.i18nParse(e.rup.i18n.base,"rup_table.toolbarNewButtonError"))}),i.on({"jqGridSelectRow.rupTable.toolbar jqGridLoadComplete.rupTable.toolbar jqGridInlineEditRow.rupTable.toolbar jqGridInlineAfterRestoreRow.rupTable.toolbar rupTableHighlightRowAsSelected.rupTable.toolbar rupTableSelectedRowNumberUpdated jqGridInlineAfterSaveRow rupTable_toolbarButtonsStateRefresh rupTable_afterDeleteRow.rupTable.toolbar rupTable_coreConfigFinished.toolbar rupTable_deleteAfterComplete.rupTable.toolbar":function(e,t,i,r){function a(e,t){void 0!==e&&(t?e.button("enable"):e.button("disable"))}var n=jQuery(this),o=n.data("settings");jQuery.each(o.core.operations,function(e,t){o.toolbar.showOperations[e]===!0&&void 0!==t&&a(o.toolbar["btn"+e.capitalize()],jQuery.proxy(t.enabled,n)())})},rupTable_internalFeedbackClose:function(){var e=jQuery(this),t=e.data("settings");t.$internalFeedback.rup_feedback("close")}})}}),jQuery.fn.rup_table.plugins.toolbar={},jQuery.fn.rup_table.plugins.toolbar.defaults={toolbar:{id:null,autoAjustToolbar:!0,createDefaultToolButtons:!0,defaultAdd:!0,defaultEdit:!0,defaultSave:!0,defaultClone:!0,defaultCancel:!0,defaultDelete:!0,defaultFilter:!1,defaultButtons:{},showOperations:{}}}}(jQuery),/*!
 * Copyright 2013 E.J.I.E., S.A.
 *
 * Licencia con arreglo a la EUPL, Versión 1.1 exclusivamente (la «Licencia»);
 * Solo podrá usarse esta obra si se respeta la Licencia.
 * Puede obtenerse una copia de la Licencia en
 *
 *      http://ec.europa.eu/idabc/eupl.html
 *
 * Salvo cuando lo exija la legislación aplicable o se acuerde por escrito, 
 * el programa distribuido con arreglo a la Licencia se distribuye «TAL CUAL»,
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ni expresas ni implícitas.
 * Véase la Licencia en el idioma concreto que rige los permisos y limitaciones
 * que establece la Licencia.
 */
function(e){jQuery.rup_table.registerPlugin("feedback",{loadOrder:2,preConfiguration:function(e){var t=this;return t.rup_table("preConfigureFeedback",e)},postConfiguration:function(e){var t=this;return t.rup_table("postConfigureFeedback",e)}}),jQuery.fn.rup_table("extend",{preConfigureFeedback:function(e){var t,i,r=this,a=e.feedback;a.id=null!==a.id?a.id:e.id+"_feedback",t="#"===a.id[0]?a.id:"#"+a.id,i=jQuery(t),0===i.length?alert("El identificador especificado para el feedback no existe."):(e.$feedback=i,e.$feedback.rup_feedback(a.config).attr("ruptype","feedback")),jQuery.isFunction(e.loadError)||(e.loadError=function(t,i,a){r.rup_table("showFeedback",e.$feedback,t.responseText,"error")})},postConfigureFeedback:function(t){t.$internalFeedback=e("<div/>").attr("id","rup_feedback_"+t.id).insertBefore("#gbox_"+t.id),t.$internalFeedback.rup_feedback(t.feedback.internalFeedbackConfig)}}),jQuery.fn.rup_table("extend",{showFeedback:function(e,t,i,r){var a,n=this,o=n.data("settings");r===!1?e.rup_feedback("set",t,i):jQuery.isPlainObject(r)?(e.rup_feedback("option",r),e.rup_feedback("set",t,i)):(a=void 0!==o.feedback[i+"FeedbackConfig"]?o.feedback[i+"FeedbackConfig"]:o.feedback.okFeedbackConfig,e.rup_feedback("option",a),e.rup_feedback("set",t,i))}}),jQuery.fn.rup_table.plugins.feedback={},jQuery.fn.rup_table.plugins.feedback.defaults={loadError:function(t,i,r){var a=e(this),n=a.data("settings");a.rup_table("showFeedback",n.$feedback,t.responseText,"error")},feedback:{okFeedbackConfig:{closeLink:!0,gotoTop:!1,delay:1e3},errorFeedbackConfig:{closeLink:!0,gotoTop:!1,delay:null},alertFeedbackConfig:{closeLink:!0,gotoTop:!1,delay:null},id:null,config:{type:"ok",closeLink:!0,gotoTop:!1,block:!0},internalFeedbackConfig:{type:"ok",closeLink:!0,gotoTop:!1,block:!1}}}}(jQuery),/*!
 * Copyright 2013 E.J.I.E., S.A.
 *
 * Licencia con arreglo a la EUPL, Versión 1.1 exclusivamente (la «Licencia»);
 * Solo podrá usarse esta obra si se respeta la Licencia.
 * Puede obtenerse una copia de la Licencia en
 *
 *      http://ec.europa.eu/idabc/eupl.html
 *
 * Salvo cuando lo exija la legislación aplicable o se acuerde por escrito, 
 * el programa distribuido con arreglo a la Licencia se distribuye «TAL CUAL»,
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ni expresas ni implícitas.
 * Véase la Licencia en el idioma concreto que rige los permisos y limitaciones
 * que establece la Licencia.
 */
function(e){jQuery.rup_table.registerPlugin("fluid",{loadOrder:5,postConfiguration:function(e){var t=this;return t.rup_table("postConfigureFluid",e)}}),jQuery.fn.rup_table("extend",{postConfigureFluid:function(t){var i,r=this;return t.fluid.baseLayer=e.rup_utils.getJQueryId(null!==t.fluid.baseLayer?t.fluid.baseLayer:t.id+"_div"),t.fluid.$baseLayer=jQuery(t.fluid.baseLayer),0===t.fluid.$baseLayer.length?void alert("El identificador "+t.baseLayer+" especificado para la capa sobre la que se va a aplicar el diseño líquido no existe."):(i=t.fluid.fluidBaseLayer=t.fluid.$baseLayer,r.bind("fluidWidth.resize",function(e,a,n){if(r.is(":visible")){var o,s,l,d;r.setGridWidth(n),i.children().width(n),t.$feedback&&(o=parseInt(t.$feedback.css("padding-left")),s=parseInt(t.$feedback.css("padding-right")),t.$feedback.width(n-(o+s))),t.$toolbar&&(l=parseInt(t.$toolbar.css("padding-left")),d=parseInt(t.$toolbar.css("padding-right")),t.$toolbar.width(n-(l+d)),t.$toolbar.css("width",n-(l+d)))}}),r.fluidWidth(t.fluid),void r.on("rupTable_fluidUpdate",function(e){r.fluidWidth(t.fluid)}))}}),jQuery.fn.rup_table.plugins.fluid={},jQuery.fn.rup_table.plugins.fluid.defaults={fluid:{baseLayer:null,minWidth:100,maxWidth:2e3,fluidOffset:0}}}(jQuery),/*!
 * Copyright 2013 E.J.I.E., S.A.
 *
 * Licencia con arreglo a la EUPL, Versión 1.1 exclusivamente (la «Licencia»);
 * Solo podrá usarse esta obra si se respeta la Licencia.
 * Puede obtenerse una copia de la Licencia en
 *
 *      http://ec.europa.eu/idabc/eupl.html
 *
 * Salvo cuando lo exija la legislación aplicable o se acuerde por escrito,
 * el programa distribuido con arreglo a la Licencia se distribuye «TAL CUAL»,
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ni expresas ni implícitas.
 * Véase la Licencia en el idioma concreto que rige los permisos y limitaciones
 * que establece la Licencia.
 */
function(e){jQuery.rup_table.registerPlugin("formEdit",{loadOrder:6,preConfiguration:function(e){var t=this;return t.rup_table("preConfigureFormEdit",e)},postConfiguration:function(e){var t=this;return t.rup_table("postConfigureFormEdit",e)}}),jQuery.fn.rup_table("extend",{preConfigureFormEdit:function(t){var i=this,r=t.colModel;if(t.formEdit.navigationBarId=void 0!==t.formEdit.navigationBarId?t.formEdit.navigationBarId:t.id+"_detail_navigation",t.formEdit.saveButtonId=void 0!==t.formEdit.saveButtonId?t.formEdit.saveButtonId:t.id+"_detail_button_save",t.formEdit.saveRepeatButtonId=void 0!==t.formEdit.saveRepeatButtonId?t.formEdit.saveRepeatButtonId:t.id+"_detail_button_save_repeat",t.formEdit.cancelLinkId=void 0!==t.formEdit.cancelLinkId?t.formEdit.cancelLinkId:t.id+"_detail_link_cancel",t.formEdit.feedbackId=void 0!==t.formEdit.feedbackId?t.formEdit.feedbackId:t.id+"_detail_feedback",t.formEdit.$navigationBar=jQuery("#"+t.formEdit.navigationBarId),t.formEdit.$saveButton=jQuery("#"+t.formEdit.saveButtonId),t.formEdit.$saveRepeatButton=jQuery("#"+t.formEdit.saveRepeatButtonId),t.formEdit.$cancelLink=jQuery("#"+t.formEdit.cancelLinkId),t.formEdit.$feedback=jQuery("#"+t.formEdit.feedbackId),void 0===t.formEdit.editurl&&(t.formEdit.editurl=t.baseUrl,t.formEdit.editOptions.ajaxEditOptions.url=t.baseUrl,t.formEdit.addOptions.ajaxEditOptions.url=t.baseUrl),void 0===t.formEdit.detailOptions.ajaxDetailOptions.url&&(t.formEdit.detailOptions.ajaxDetailOptions.url=t.baseUrl),t.ondblClickRow=function(e,t,r,a){return i.rup_table("editElement",e),!1},t.formEdit.deleteOptions.ajaxDelOptions=jQuery.extend(!0,t.formEdit.deleteOptions.ajaxDelOptions,{success:function(r,a,n){i.triggerHandler("rupTableAfterDelete",[r,a,n]),i.rup_table("showFeedback",t.$feedback,e.rup.i18nParse(e.rup.i18n.base,"rup_table.deletedOK"),"ok")}}),void 0===t.formEdit.detailForm)for(var a=0;a<r.length;a++)colModelObj=r[a],colModelObj.id="detailForm_"+t.id+"_"+colModelObj.name.replace(/[.]/g,"_");t.core.defaultOperations={add:{name:e.rup.i18nParse(e.rup.i18n.base,"rup_table.new"),icon:"rup-icon rup-icon-new",enabled:function(){return!0},callback:function(e,t){i.rup_table("newElement")}},edit:{name:e.rup.i18nParse(e.rup.i18n.base,"rup_table.modify"),icon:"rup-icon rup-icon-edit",enabled:function(){var e=this,t=e.data("settings");return jQuery.proxy(t.fncHasSelectedElements,e)()},callback:function(e,t){i.rup_table("editElement")}},clone:{name:e.rup.i18nParse(e.rup.i18n.base,"rup_table.clone"),icon:"rup-icon rup-icon-clone",enabled:function(){return jQuery.proxy(t.fncHasSelectedElements,i)()},callback:function(e,t){i.rup_table("cloneElement")}},"delete":{name:e.rup.i18nParse(e.rup.i18n.base,"rup_table.delete"),icon:"rup-icon rup-icon-delete",enabled:function(){var e=this,t=e.data("settings");return jQuery.proxy(t.fncHasSelectedElements,e)()},callback:function(e,t){i.rup_table("deleteElement")}}},e.extend(!0,t.core.operations,t.core.defaultOperations),t.formEdit.addOptions=e.extend(!0,{},t.formEdit.addEditOptions,t.formEdit.addOptions),t.formEdit.editOptions=e.extend(!0,{},t.formEdit.addEditOptions,t.formEdit.editOptions)},postConfigureFormEdit:function(t){var i,r=this;if(t.formEdit.detailForm)if(0===jQuery(t.formEdit.detailForm).length)alert("El identificador especificado para el fomulario de detalle no existe.");else{if(i=e(t.formEdit.detailForm),i.is("form"))i.parent().is("div")?(t.formEdit.$detailFormDiv=i.parent(),t.formEdit.$detailForm=i):alert("El fomrmulario no está incluido dentro de un div");else if(i.is("div")){var a=i.find("form");1===a.length?(t.formEdit.$detailFormDiv=i,t.formEdit.$detailForm=a):alert("El div indicado no contiene un único formulario")}t.formEdit.$detailForm.rup_form(t.formEdit.editOptions),t.formEdit.ownFormEdit=!0}beforeSendUserEvent=t.beforeSend;var n=function(i,r){return r.beforeSend=beforeSendUserEvent,r.validate=t.formEdit.validate,r.feedback=t.$detailFeedback,delete r.contentType,jQuery.isPlainObject(r.data)&&(r.data=e.rup_utils.unnestjson(r.data)),r.beforeSubmit=function(t,i,r){var a=jQuery("input:file",i).length>0;(!e.rup.browser.xhrFileUploadSupport&&a||r.iframe===!0)&&(r.extraData={}),delete t},r.propperFormSerialization=!1,t.formEdit.$detailForm.rup_form("ajaxSubmit",r),rp_ge[t.id].processing=!1,!1};t.formEdit.editOptions.ajaxEditOptions.beforeSend=n,t.formEdit.addOptions.ajaxEditOptions.beforeSend=n,t.getDetailTotalRowCount=function(){var e=this;return e.rup_table("getGridParam","records")},t.getDetailCurrentRowCount=function(){var e,t,i,r=this;return e=parseInt(r.rup_table("getGridParam","page"),10),i=r.rup_table("getGridParam","selrow"),t=jQuery.inArray(i,jQuery.proxy(jQuery.jgrid.getCurrPos,r[0])()[1])+1,rowsPerPage=parseInt(r.rup_table("getGridParam","rowNum"),10),cont=e*rowsPerPage-rowsPerPage+t,cont},t.getRowForEditing=function(){var e=this,t=e.jqGrid("getGridParam","selrow");return null!==t&&t},t.fncHasSelectedElements=function(){var e=this;return jQuery.proxy(t.getRowForEditing,e)()!==!1},t.fncGetNavigationParams=function(e){var t=this,i=!1,r=!1,a=0,n=0,o=0,s=jQuery.proxy(jQuery.jgrid.getCurrPos,t[0])(),l=parseInt(t.rup_table("getGridParam","page"),10),d=parseInt(t.rup_table("getGridParam","rowNum"),10),u=parseInt(Math.ceil(t.rup_table("getGridParam","records")/t.rup_table("getGridParam","rowNum")),10);switch(s[0]=parseInt(s[0],10),e){case"first":1===l&&0===s[0]||(i=!0,a=0,l>1&&(r=!0,n=1,o=0));break;case"prev":1===l&&0===s[0]||(i=!0,a=s[0]-1,a<0&&(r=!0,n=l-1,o=d));break;case"next":l===u&&s[0]===s[1].length-1||(i=!0,a=s[0]+1,a>s[1].length-1&&(r=!0,n=l+1,o=0));break;case"last":l===u&&s[0]===s[1].length-1||(i=!0,a=s[1].length-1,l<u&&(r=!0,n=u,o=d))}return[e,i,r,a,s,n,o]},t.doNavigation=function(t,i,r,a,n,o,s){var l,i,r,a,n,o,s,d=this,u=d.data("settings"),c=rp_ge[d.attr("id")];e.isArray(t)&&(l=t[0],i=t[1],r=t[2],a=t[3],n=t[4],o=t[5],s=t[6],i&&(d.rup_table("hideFormErrors",u.formEdit.$detailForm),d.triggerHandler("jqGridAddEditClickPgButtons",[l,u.formEdit.$detailForm,n[1][n[a]]]),r?(d.trigger("reloadGrid",[{page:o}]),d.on("jqGridAfterLoadComplete.pagination",function(e,t){var i=jQuery.proxy(jQuery.jgrid.getCurrPos,d[0])(),r=s<i[1].length?s:i[1].length-1;d.jqGrid("setSelection",i[1][r]),jQuery.proxy(jQuery.jgrid.fillData,d[0])(i[1][r],d[0],u.formEdit.$detailForm.attr("id"),u.opermode),jQuery.proxy(jQuery.jgrid.updateNav,d[0])(i[1][r],n[1].length-1),d.off("jqGridAfterLoadComplete.pagination")})):(jQuery.proxy(jQuery.jgrid.fillData,d[0])(n[1][a],d[0],u.formEdit.$detailForm.attr("id"),u.opermode),d.jqGrid("setSelection",n[1][a]),jQuery.proxy(jQuery.jgrid.updateNav,d[0])(n[1][a],n[1].length-1)),d.triggerHandler("jqGridAddEditAfterClickPgButtons",[l,u.formEdit.$detailForm,n[1][n[a]]]),jQuery.isFunction(c.afterclickPgButtons)&&c.afterclickPgButtons.call(d,"next",u.formEdit.$detailForm,n[1][n[a]])))},r.on({"jqGridLoadComplete.rupTable.formEditing":function(t){var i,r=e(this),a=r.data("settings");a.formEdit.autoselectFirstRecord&&(i=jQuery.proxy(jQuery.jgrid.getCurrPos,r[0])(),r.jqGrid("setSelection",i[1][0],!1))},"jqGridAddEditInitializeForm.rupTable.formEditing":function(t,i,r){var a=e(this),n=a.data("settings"),o=n.colModel;n.formEdit.ownFormEdit===!1&&jQuery.each(o,function(t,r){r.rupType&&(r.editoptions&&void 0===r.editoptions.i18nId&&(r.editoptions.i18nId=a.attr("id")+"##"+this.name),e("#"+(null!==r.id?r.id:name),i)["rup_"+r.rupType](r.editoptions))}),n.$detailFeedback=n.formEdit.$feedback.rup_feedback({closeLink:!0,gotoTop:!1,block:!1,fadeSpeed:500}).attr("ruptype","feedback")},"jqGridAddEditAfterSubmit.rupTable.formEditing":function(t,i,a,n){var o,s,l=r.data("settings"),d=r.data("tmp.formEditSaveType"),u="",c=null;r.removeData("tmp.formEditSaveType"),jQuery.each(l.colModel,function(e,t){"combo"===t.rupType&&(s=jQuery("[name='"+t.name+"']",l.$detailForm),void 0!==t.editoptions.labelProperty?c=t.editoptions.labelProperty:void 0!==t.editoptions.sourceParam&&(c=t.name.substring(0,t.name.lastIndexOf(".")+1)+t.editoptions.sourceParam.label),null!==c&&(a[c]=s.rup_combo("label")))}),"SAVE"===d?("edit"===n?r.rup_table("showFeedback",l.$feedback,e.rup.i18nParse(e.rup.i18n.base,"rup_table.modifyOK"),"ok"):r.rup_table("showFeedback",l.$feedback,e.rup.i18nParse(e.rup.i18n.base,"rup_table.insertOK"),"ok"),l.formEdit.$detailFormDiv.rup_dialog("close")):"SAVE_REPEAT"===d&&("edit"===n?r.rup_table("showFeedback",l.$detailFeedback,e.rup.i18nParse(e.rup.i18n.base,"rup_table.modifyOK"),"ok"):r.rup_table("showFeedback",l.$detailFeedback,e.rup.i18nParse(e.rup.i18n.base,"rup_table.insertOK"),"ok"));try{responseJson=e.parseJSON(i.responseText)}catch(p){responseJson=a}if(l.primaryKey&&"object"==typeof l.primaryKey&&l.primaryKey.length>1){for(var h=0;h<l.primaryKey.length;h++)u+=responseJson[l.primaryKey[h]]+l.multiplePkToken;o=u.substr(0,u.length-1)}else o=responseJson[l.primaryKey?l.primaryKey:r[0].p.prmNames.id];return[!0,"",o]},"jqGridAddEditErrorTextFormat.rupTable.formEditing":function(e,i,a){var n;if(406===i.status&&""!==i.responseText)try{n=jQuery.parseJSON(i.responseText),n.rupErrorFields&&r.rup_table("showServerValidationFieldErrors",t.formEdit.$detailForm,n)}catch(o){r.rup_table("showFeedback",t.$detailFeedback,i.responseText,"error")}},"jqGridAddEditBeforeShowForm.rupTable.formEditing":function(t,i,r){var a=e(this),n=a.data("settings"),o=jQuery("#ui-dialog-title-"+n.formEdit.$detailFormDiv.attr("id"),n.formEdit.$detailFormDiv.parent());a[0].p.colModel;a.rup_table("hideFormErrors",n.formEdit.$detailForm),"add"===r||"clone"===r||"clone_clear"===r?(o.html(rp_ge[a[0].p.id].addCaption),e("#pagination_"+n.id+",#pag_"+n.id).hide()):(o.html(rp_ge[a[0].p.id].editCaption),e("#pagination_"+n.id+",#pag_"+n.id).show())},"jqGridAddEditBeforeShowForm.rupTable.formEditing.readOnlyPks":function(t,i,r){for(var a=e(this),n=a.data("settings"),o=a[0].p.colModel,s=0;s<o.length;s++)(n.ownFormEdit!==!0||n.ownFormEdit===!0&&jQuery.inArray(colmodel[s].name,n.primaryKey))&&("add"===r||"clone"===r||"clone_clear"===r?o[s].editableOnAdd===!1?jQuery("[name='"+o[s].name+"']",n.formEdit.$detailFormDiv).attr("readonly","readonly"):jQuery("[name='"+o[s].name+"']",n.formEdit.$detailFormDiv).removeAttr("readonly"):o[s].editableOnEdit===!1?jQuery("[name='"+o[s].name+"']",n.formEdit.$detailFormDiv).attr("readonly","readonly"):jQuery("[name='"+o[s].name+"']",n.formEdit.$detailFormDiv).removeAttr("readonly"))},"jqGridAddEditAfterShowForm.rupTable.formEditing":function(e,t,i){jQuery(":focusable:enabled:not([readonly]):first",t).focus()}})}}),jQuery.fn.rup_table("extend",{createDetailNavigation:function(){function t(t,a){var n=e.proxy(r.fncGetNavigationParams,i)(t);a.hasClass("ui-state-disabled")||e.proxy(e.jgrid.checkUpdates,i[0])(g,function(){e.proxy(r.doNavigation,i)(n)})&&e.proxy(r.doNavigation,i)(n)}var i=e(this),r=i.data("settings"),a=i.attr("id"),n=jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_table.templates.detailForm.paginationBar"),o=jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_table.templates.detailForm.paginationLink"),s=jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_table.templates.detailForm.elementCounter"),l=e(jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_table.templates.detailForm.separator")),d=e(jQuery.jgrid.format(s,a,jQuery.rup.STATICS,jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_table.numResult"))),u=e(jQuery.jgrid.format(n,a)),c=e(jQuery.jgrid.format(o,"first_"+a,jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_table.first"))),p=e(jQuery.jgrid.format(o,"back_"+a,jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_table.previous"))),h=e(jQuery.jgrid.format(o,"forward_"+a,jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_table.next"))),f=e(jQuery.jgrid.format(o,"last_"+a,jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_table.last"))),g=void 0;return u.append(c).append(p).append(h).append(f),c.on("click",function(){t("first",e(this))}),p.on("click",function(){t("prev",e(this))}),h.on("click",function(){t("next",e(this))}),f.on("click",function(){t("last",e(this))}),d.after(u).after(l)},deleteElement:function(e,t){var i=this,r=i.data("settings"),a=jQuery.extend(!0,{},r.formEdit.deleteOptions,t),n=void 0===e?i.rup_table("getSelectedRows"):e;return 1===n.length?"DELETE"===a.mtype&&(a.url=r.formEdit.editurl+"/"+i.rup_table("getPkUrl",n)):(a.mtype="POST",a.ajaxDelOptions.contentType="application/json",a.ajaxDelOptions.type="POST",a.ajaxDelOptions.dataType="json",a.url=r.formEdit.editurl+"/deleteAll",a.serializeDelData=function(e,t){return jQuery.toJSON({core:{pkToken:r.multiplePkToken,pkNames:r.primaryKey},multiselection:i.rup_table("getSelectedIds"),filter:i.rup_table("getFilterParams")})}),a.afterSubmit=function(){return i.triggerHandler("rupTable_deleteAfterSubmit"),!0},a.afterComplete=function(){i.triggerHandler("rupTable_afterDeleteRow")},i.triggerHandler("rupTable_beforeDeleteRow",[a,n])!==!1&&i.jqGrid("delGridRow",n,a),i},editElement:function(t,i){var r=this,a=r.data("settings"),n=void 0===t?e.proxy(a.getRowForEditing,r)():t,o=r[0].p.colModel;if(n!==!1){for(var s=0;s<o.length;s++)o[s].editable===!0&&o[s].editableOnEdit===!1?(void 0===o[s].editoptions&&(o[s].editoptions={}),o[s].editoptions.readonly="readonly"):void 0!==o[s].editoptions&&void 0!==o[s].editoptions.readonly&&delete o[s].editoptions.readonly;r.triggerHandler("rupTable_beforeEditRow",[a.formEdit.editOptions,n])!==!1&&r.jqGrid("editGridRow",n,a.formEdit.editOptions)}return r},newElement:function(e){for(var t=this,i=t.data("settings"),r=t[0].p.colModel,a=0;a<r.length;a++)r[a].editable===!0&&r[a].editableOnAdd!==!1&&(r[a].editable===!0&&r[a].editableOnAdd===!1?(void 0===r[a].editoptions&&(r[a].editoptions={}),r[a].editoptions.readonly="readonly"):void 0!==r[a].editoptions&&void 0!==r[a].editoptions.readonly&&delete r[a].editoptions.readonly);return(e===!1||e!==!1&&t.triggerHandler("rupTable_beforeAddRow",[i.formEdit.addOptions])!==!1)&&t.jqGrid("editGridRow","new",i.formEdit.addOptions),t},cloneElement:function(t,i,r){for(var a=this,n=a.data("settings"),o=a[0].p.colModel,s=void 0===t?e.proxy(n.getRowForEditing,a)():t,l=0;l<o.length;l++)o[l].editable===!0&&o[l].editableOnAdd!==!1&&(o[l].editable===!0&&o[l].editableOnAdd===!1?(void 0===o[l].editoptions&&(o[l].editoptions={}),o[l].editoptions.readonly="readonly"):void 0!==o[l].editoptions&&void 0!==o[l].editoptions.readonly&&delete o[l].editoptions.readonly);return(r===!1||r!==!1&&a.triggerHandler("rupTable_beforeCloneRow",[n,s])!==!1)&&(a.jqGrid("editGridRow","cloned",n.formEdit.addOptions),jQuery.proxy(jQuery.jgrid.fillData,a[0])(s,a[0],n.formEdit.$detailForm,"clone"),jQuery("#id_g",n.formEdit.$detailForm).val("_empty")),a},hideFormErrors:function(e){var t=this,i=t.data("settings");i.formEdit.$feedback.hide(),jQuery(".rup-maint_validateIcon",e).remove(),jQuery(".rup-maint_validateIcon",e).remove(),jQuery("input.error",e).removeClass("error")}}),e.extend(e.jgrid,{createData:function(t,i,r,a){var n,o,s,l,d,u,c,p,h=(r.parent(),this),f=e(h),g=(f.data("settings"),0),m=[],v=!1,b="<label class='CaptionTD'></label>";for(p=1;p<=a;p++)r.append(e("<div>").attr("id","col_"+parseInt(2*(parseInt(p,10)||1),10)).addClass("floating_left_pad_right").width(100/a*.95+"%"));if("_empty"!=t&&(v=e(i).jqGrid("getInd",t)),e(i.p.colModel).each(function(a){if(o=this.name,n=this.id,s=(!this.editrules||this.editrules.edithidden!==!0)&&this.hidden===!0,u=s?"style='display:none'":"","cb"!==o&&"subgrid"!==o&&this.editable===!0&&"rn"!==o){if(v===!1)d="";else if(o==i.p.ExpandColumn&&i.p.treeGrid===!0)d=e("td[role='gridcell']:eq("+a+")",i.rows[v]).text();else{try{d=e.unformat.call(i,e("td[role='gridcell']:eq("+a+")",i.rows[v]),{rowId:t,colModel:this},a)}catch(p){d=this.edittype&&"textarea"==this.edittype?e("td[role='gridcell']:eq("+a+")",i.rows[v]).text():e("td[role='gridcell']:eq("+a+")",i.rows[v]).html()}(!d||"&nbsp;"==d||"&#160;"==d||1==d.length&&160==d.charCodeAt(0))&&(d="")}var f=e.extend({},this.editoptions||{},{id:n,name:o}),_=e.extend({},{elmprefix:"",elmsuffix:"",rowabove:!1,rowcontent:""},this.formoptions||{}),y=parseInt(_.rowpos,10)||g+1,x=parseInt(2*(parseInt(_.colpos,10)||1),10);if("_empty"==t&&f.defaultValue&&(d=e.isFunction(f.defaultValue)?f.defaultValue.call(h):f.defaultValue),this.edittype||(this.edittype="text"),h.p.autoencode&&(d=e.jgrid.htmlDecode(d)),c=e.jgrid.createEl.call(h,this.edittype,f,d,!1,e.extend({},e.jgrid.ajaxOptions,i.p.ajaxSelectOptions||{})),""===d&&"checkbox"==this.edittype&&(d=e(c).attr("offval")),""===d&&"select"==this.edittype&&(d=e("option:eq(0)",c).text()),"custom"===this.edittype&&(c=e(c).children()[0]),e(c).addClass("FormElement"),l=e(r).find("tr[rowpos="+y+"]"),_.rowabove){var w=e("<div><span class='contentinfo'>"+_.rowcontent+"</span></div>");e(r).append(w),w[0].rp=y}0===l.length&&(l=e("<div "+u+" rowpos='"+y+"'></div>").addClass("FormData floating_left_pad_right one-column").attr("id","tr_"+o),e(l).append(b),e(r).find("#col_"+x).append(l),l[0].rp=y);var j=e("label",l[0]).attr("for",n).html("undefined"==typeof _.label?i.p.colNames[a]:_.label);j.parent().append(_.elmprefix).append(c).append(_.elmsuffix),m[g]=a,g++}}),g>0){var _=e("<div class='FormData' style='display:none'><span class='CaptionTD'></span><span class='DataTD '><input class='FormElement' id='id_g' type='text' name='"+i.p.id+"_id' value='"+t+"'/></span></div>");_[0].rp=g+999,e(r).append(_),(rp_ge[h.p.id].checkOnSubmit||rp_ge[h.p.id].checkOnUpdate)&&(rp_ge[h.p.id]._savedData[i.p.id+"_id"]=t)}return m},fillDataClientSide:function(t,i,r,a){var n,o,s,l,d,u,c,p=this,h=e(p),f=h.data("settings"),g=p.p.id,m=(e.fn.jqGrid.rup.edit.detail.detailFormId+g,e.fn.jqGrid.rup.edit.detail.detailBodyId+g),v="#"+e.jgrid.jqID(m),b=0;(rp_ge[p.p.id].checkOnSubmit||rp_ge[p.p.id].checkOnUpdate)&&(rp_ge[p.p.id]._savedData={},rp_ge[p.p.id]._savedData[i.p.id+"_id"]=t);var _=i.p.colModel;if("_empty"==t)return h.rup_table("resetForm",f.formEdit.$detailForm),e(_).each(function(){n=this.name,o=void 0!==this.id?this.id:n,d=e.extend({},this.editoptions||{}),l=e("#"+e.jgrid.jqID(o),f.formEdit.$detailForm),0===l.length&&(l=e("[name='"+o+"']",f.formEdit.$detailForm)),l&&l.length&&null!==l[0]&&(u="",d.defaultValue?(u=e.isFunction(d.defaultValue)?d.defaultValue.call(p):d.defaultValue,"checkbox"==l[0].type||"radio"==l[0].type?(c=u.toLowerCase(),c.search(/(false|0|no|off|undefined)/i)<0&&""!==c?(l[0].checked=!0,l[0].defaultChecked=!0,l[0].value=u):(l[0].checked=!1,l[0].defaultChecked=!1)):l.val(u)):"checkbox"==l[0].type||"radio"==l[0].type?(l[0].checked=!1,l[0].defaultChecked=!1,u=e(l).attr("offval")):l[0].type&&"select"==l[0].type.substr(0,6)?"combo"===l.attr("ruptype")?l.rup_combo("reset"):l[0].selectedIndex=0:l.val(u),(rp_ge[p.p.id].checkOnSubmit===!0||rp_ge[p.p.id].checkOnUpdate)&&(rp_ge[p.p.id]._savedData[n]=u))}),void e("#id_g",f.formEdit.$detailForm).val(t);var y=e(i).jqGrid("getInd",t,!0);y&&(e('td[role="gridcell"]',y).each(function(a){if(n=_[a].name,o=void 0!==this.id?this.id:n,"cb"!==n&&"subgrid"!==n&&"rn"!==n&&_[a].editable===!0){if(n==i.p.ExpandColumn&&i.p.treeGrid===!0)s=e(this).text();else try{s=e.unformat.call(i,e(this),{rowId:t,colModel:_[a]},a)}catch(l){s="textarea"==_[a].edittype?e(this).text():e(this).html()}switch(p.p.autoencode&&(s=e.jgrid.htmlDecode(s)),(rp_ge[p.p.id].checkOnSubmit===!0||rp_ge[p.p.id].checkOnUpdate)&&(rp_ge[p.p.id]._savedData[n]=s),n=e.jgrid.jqID(n),_[a].edittype){case"password":case"text":case"button":case"image":case"textarea":("&nbsp;"==s||"&#160;"==s||1==s.length&&160==s.charCodeAt(0))&&(s=""),e("#"+o,"#"+r).val(s);break;case"select":var d=s.split(",");d=e.map(d,function(t){return e.trim(t)}),e("#"+o+" option","#"+r).each(function(){_[a].editoptions.multiple||e.trim(s)!=e.trim(e(this).text())&&d[0]!=e.trim(e(this).text())&&d[0]!=e.trim(e(this).val())?_[a].editoptions.multiple&&(e.inArray(e.trim(e(this).text()),d)>-1||e.inArray(e.trim(e(this).val()),d)>-1)?this.selected=!0:this.selected=!1:this.selected=!0});break;case"checkbox":if(s=String(s),_[a].editoptions&&_[a].editoptions.value){var u=_[a].editoptions.value.split(":");u[0]==s?(e("#"+o,"#"+r)[p.p.useProp?"prop":"attr"]("checked",!0),e("#"+o,"#"+r)[p.p.useProp?"prop":"attr"]("defaultChecked",!0)):(e("#"+o,"#"+r)[p.p.useProp?"prop":"attr"]("checked",!1),e("#"+o,"#"+r)[p.p.useProp?"prop":"attr"]("defaultChecked",!1))}else s=s.toLowerCase(),s.search(/(false|0|no|off|undefined)/i)<0&&""!==s?(e("#"+o,"#"+r)[p.p.useProp?"prop":"attr"]("checked",!0),e("#"+o,"#"+r)[p.p.useProp?"prop":"attr"]("defaultChecked",!0)):(e("#"+o,"#"+r)[p.p.useProp?"prop":"attr"]("checked",!1),e("#"+o,"#"+r)[p.p.useProp?"prop":"attr"]("defaultChecked",!1));break;case"custom":try{if(!_[a].editoptions||!e.isFunction(_[a].editoptions.custom_value))throw"e1";_[a].editoptions.custom_value.call(p,e("#"+o,"#"+r),"set",s)}catch(c){"e1"==c?e.jgrid.info_dialog(e.jgrid.errors.errcap,"function 'custom_value' "+e.jgrid.edit.msg.nodefined,e.jgrid.edit.bClose):e.jgrid.info_dialog(e.jgrid.errors.errcap,c.message,e.jgrid.edit.bClose)}}b++}}),b>0&&e("#id_g",v).val(t))},fillDataServerSide:function(t,i,r){var a=this,n=e(a),o=n.data("settings"),s={},l=void 0!==i?i:o.formEdit.$detailForm;if("_empty"==t)return n.rup_table("resetForm",o.formEdit.$detailForm),e.proxy(e.jgrid.getFormData,a)(s,{}),rp_ge[a.p.id]._savedData=e.rup_utils.unnestjson(s),"clone_clear"!==r&&n.triggerHandler("jqGridAddEditAfterFillData",[i,r]),void e("#id_g",i).val(t);var d=e.extend({success:function(r,s){var d;r.id&&r.id instanceof Object&&r.id instanceof Object&&(r.JPA_ID=r.id,delete r.id),d=e.rup_utils.jsontoarray(r),e.rup_utils.populateForm(d,l),rp_ge[a.p.id]._savedData=e.rup_utils.unnestjson(r),rp_ge[a.p.id]._savedData[o.id+"_id"]=t,e("#id_g",i).val(t),n.triggerHandler("rupTable_afterFormFillDataServerSide",[r,l,s])},error:function(e,t,i){o.$feedback.rup_feedback("option","delay",null),o.$feedback.rup_feedback("set",e.responseText,"error"),o.$feedback.rup_feedback("option","delay",1e3)}},o.formEdit.detailOptions.ajaxDetailOptions);d.url+="/"+n.rup_table("getPkUrl",t),e.when(e.rup_ajax(d)).then(function(e,t,a){n.triggerHandler("jqGridAddEditAfterFillData",[i,r])})},fillData:function(t,i,r,a){var n=this,o=e(n),s=o.data("settings");switch(s.formEdit.editOptions.fillDataMethod){case"clientSide":e.proxy(e.jgrid.fillDataClientSide,n)(t,i,r,a);break;case"serverSide":default:e.proxy(e.jgrid.fillDataServerSide,n)(t,s.formEdit.$detailForm,a)}},getFormData:function(t,i){var r,a=e(this),n=a.data("settings");return r=form2object(n.formEdit.$detailForm[0],null,!1),jQuery.extend(!0,t,r),!0},postIt:function(t,i,r){var a,n,o,s,l,d,u=this,c=u,p=jQuery(c),h=p.data("settings"),f=u.p.id,g=e.fn.jqGrid.rup.edit.detail.detailFormId+f,m=e.fn.jqGrid.rup.edit.detail.detailBodyId+f,v="#"+e.jgrid.jqID(m),b=[!0,"",""],_={},y=u.p.prmNames,x=e(u).triggerHandler("jqGridAddEditBeforeCheckValues",[e("#"+g),r]);x&&"object"==typeof x&&(t=x),e.isFunction(rp_ge[u.p.id].beforeCheckValues)&&(x=rp_ge[u.p.id].beforeCheckValues.call(u,t,e("#"+g),"_empty"==t[u.p.id+"_id"]?y.addoper:y.editoper),x&&"object"==typeof x&&(t=x));for(s in t)if(t.hasOwnProperty(s)&&(b=e.jgrid.checkValues.call(u,t[s],s,u),b[0]===!1))break;if(e.proxy(e.jgrid.setNulls,u)(),b[0]&&(_=e(u).triggerHandler("jqGridAddEditClickSubmit",[rp_ge[u.p.id],t,r]),void 0===_&&e.isFunction(rp_ge[u.p.id].onclickSubmit)&&(_=rp_ge[u.p.id].onclickSubmit.call(u,rp_ge[u.p.id],t)||{}),b=e(u).triggerHandler("jqGridAddEditBeforeSubmit",[t,e("#"+g),r]),void 0===b&&(b=[!0,"",""]),b[0]&&e.isFunction(rp_ge[u.p.id].beforeSubmit)&&(b=rp_ge[u.p.id].beforeSubmit.call(u,t,e("#"+g)))),b[0]){if(rp_ge[u.p.id].processing=!0,e("#sData",v+"_2").addClass("ui-state-active"),o=y.oper,n=y.id,t[o]="_empty"==e.trim(t[u.p.id+"_id"])?y.addoper:y.editoper,t[o]!=y.addoper?t[n]=t[u.p.id+"_id"]:void 0===t[n]&&(t[n]=t[u.p.id+"_id"]),delete t[u.p.id+"_id"],t=e.extend(t,rp_ge[u.p.id].editData,_),u.p.treeGrid===!0){if(t[o]==y.addoper){l=e(u).jqGrid("getGridParam","selrow");var w="adjacency"==u.p.treeGridModel?u.p.treeReader.parent_id_field:"parent_id";t[w]=l}for(d in u.p.treeReader)if(u.p.treeReader.hasOwnProperty(d)){var j=u.p.treeReader[d];if(t.hasOwnProperty(j)){if(t[o]==y.addoper&&"parent_id_field"===d)continue;delete t[j]}}}t[n]=e.jgrid.stripPref(u.p.idPrefix,t[n]);var k=e.extend({url:rp_ge[u.p.id].url||e(u).jqGrid("getGridParam","editurl"),type:rp_ge[u.p.id].mtype,data:e.isFunction(rp_ge[u.p.id].serializeEditData)?rp_ge[u.p.id].serializeEditData.call(u,t):t,complete:function(s,d){var c,p;if(t[n]=u.p.idPrefix+t[n],"success"!=d?(b[0]=!1,b[1]=e(u).triggerHandler("jqGridAddEditErrorTextFormat",[s,r]),e.isFunction(rp_ge[u.p.id].errorTextFormat)?b[1]=rp_ge[u.p.id].errorTextFormat.call(u,s):b[1]=d+" Status: '"+s.statusText+"'. Error code: "+s.status):(b=e(u).triggerHandler("jqGridAddEditAfterSubmit",[s,t,r]),void 0===b&&(b=[!0,"",""]),b[0]&&e.isFunction(rp_ge[u.p.id].afterSubmit)&&(b=rp_ge[u.p.id].afterSubmit.call(u,s,t))),b[0]===!1)e("#"+h.formEdit.feedbackId+">td",v).html(b[1]),e("#"+h.formEdit.feedbackId,v).show();else if(p=e.parseJSON(s.responseText),e.each(u.p.colModel,function(){if(i[this.name]&&this.formatter&&"select"==this.formatter)try{delete i[this.name]}catch(r){}"checkbox"==this.formatter&&void 0==t[this.name]&&(t[this.name]=null),this.formatter&&"checkbox"!==this.formatter&&"select"!==this.formatter&&void 0===t[this.name]&&(t[this.name]=this.formatter.call(e(u),b[2],void 0,p,t[o])),this.formatterOnUpdate&&(t[this.name]=this.formatterOnUpdate.call(e(u),e("#"+g))),this.updateFromDetail&&(t[this.name]=this.updateFromDetail.call(e(u),e("#"+g)))}),t=e.extend(t,i),u.p.autoencode&&e.each(t,function(i,r){t[i]=e.jgrid.htmlDecode(r)}),t[o]==y.addoper?(b[2]||(b[2]=e.jgrid.randId()),t[n]=b[2],rp_ge[u.p.id].closeAfterAdd?(rp_ge[u.p.id].reloadAfterSubmit?e(u).trigger("reloadGrid"):u.p.treeGrid===!0?e(u).jqGrid("addChildNode",b[2],l,t):(e(u).jqGrid("addRowData",b[2],t,rp_ge[u.p.id].addedrow),e(u).jqGrid("setSelection",b[2])),e.jgrid.hideModal("#"+e.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+e.jgrid.jqID(f),jqm:rp_ge[u.p.id].jqModal,onClose:rp_ge[u.p.id].onClose})):rp_ge[u.p.id].clearAfterAdd?(rp_ge[u.p.id].reloadAfterSubmit?e(u).trigger("reloadGrid"):u.p.treeGrid===!0?e(u).jqGrid("addChildNode",b[2],l,t):(e(u).jqGrid("addRowData",b[2],t,rp_ge[u.p.id].addedrow),e(u).jqGrid("setSelection",b[2])),e.proxy(e.jgrid.fillData,u)("_empty",u,g)):rp_ge[u.p.id].reloadAfterSubmit?e(u).trigger("reloadGrid"):u.p.treeGrid===!0?e(u).jqGrid("addChildNode",b[2],l,t):e(u).jqGrid("addRowData",b[2],t,rp_ge[u.p.id].addedrow)):(rp_ge[u.p.id].reloadAfterSubmit?(e(u).trigger("reloadGrid"),rp_ge[u.p.id].closeAfterEdit||setTimeout(function(){e(u).jqGrid("setSelection",t[n])},1e3)):u.p.treeGrid===!0?e(u).jqGrid("setTreeRow",t[n],t):e(u).jqGrid("setRowData",t[n],t),rp_ge[u.p.id].closeAfterEdit&&e.jgrid.hideModal("#"+e.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+e.jgrid.jqID(f),jqm:rp_ge[u.p.id].jqModal,onClose:rp_ge[u.p.id].onClose})),e.isFunction(rp_ge[u.p.id].afterComplete)&&(a=s,setTimeout(function(){e(u).triggerHandler("jqGridAddEditAfterComplete",[a,t,e("#"+g),r]),rp_ge[u.p.id].afterComplete.call(u,a,t,e("#"+g)),a=null},500)),(rp_ge[u.p.id].checkOnSubmit||rp_ge[u.p.id].checkOnUpdate)&&(e("#"+g).data("disabled",!1),"_empty"!=rp_ge[u.p.id]._savedData[u.p.id+"_id"]))for(c in rp_ge[u.p.id]._savedData)rp_ge[u.p.id]._savedData.hasOwnProperty(c)&&t[c]&&(rp_ge[u.p.id]._savedData[c]=t[c]);rp_ge[u.p.id].processing=!1,e("#sData",v+"_2").removeClass("ui-state-active");try{e(":input:visible","#"+g)[0].focus()}catch(m){}}},e.jgrid.ajaxOptions,rp_ge[u.p.id].ajaxEditOptions);if(k.url||rp_ge[u.p.id].useDataProxy||(e.isFunction(u.p.dataProxy)?rp_ge[u.p.id].useDataProxy=!0:(b[0]=!1,b[1]+=" "+e.jgrid.errors.nourl)),b[0])if(rp_ge[u.p.id].useDataProxy){var C=u.p.dataProxy.call(u,k,"set_"+u.p.id);void 0===C&&(C=[!0,""]),C[0]===!1?(b[0]=!1,b[1]=C[1]||"Error deleting the selected row!"):(k.data.oper==y.addoper&&rp_ge[u.p.id].closeAfterAdd&&e.jgrid.hideModal("#"+e.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+e.jgrid.jqID(f),jqm:rp_ge[u.p.id].jqModal,onClose:rp_ge[u.p.id].onClose}),k.data.oper==y.editoper&&rp_ge[u.p.id].closeAfterEdit&&e.jgrid.hideModal("#"+e.jgrid.jqID(IDs.themodal),{gb:"#gbox_"+e.jgrid.jqID(f),jqm:rp_ge[u.p.id].jqModal,onClose:rp_ge[u.p.id].onClose}))}else e.ajax(k)}b[0]===!1&&(e("#"+h.formEdit.feedbackId+">td",v).html(b[1]),e("#"+h.formEdit.feedbackId,v).show())},setNulls:function(){var t=this;e.each(t.p.colModel,function(e,t){t.editoptions&&t.editoptions.NullIfEmpty===!0&&postdata.hasOwnProperty(t.name)&&""===postdata[t.name]&&(postdata[t.name]="null")})},compareData:function(e,t){var i,r=!1,a=jQuery.rup_utils.unnestjson(e),n=jQuery.rup_utils.unnestjson(t);for(i in a)if(a.hasOwnProperty(i)&&String(a[i])!==String(n[i])){r=!0;break}return r},checkUpdates:function(t,i){var r=e(this),a=r.data("settings"),n=this,o=n.p.id,s=(e.fn.jqGrid.rup.edit.detail.detailFormId+o,e.fn.jqGrid.rup.edit.detail.detailBodyId+o),l=("#"+e.jgrid.jqID(s),!0),d=!1;if(rp_ge[n.p.id].checkOnUpdate){postdata={},t={},e.proxy(e.jgrid.getFormData,n)(postdata,t),newData=e.extend({},postdata,t),a.formEdit.addEditOptions.defaultCompareData===!0&&(d=e.proxy(e.jgrid.compareData,n)(newData,rp_ge[n.p.id]._savedData));var u=jQuery.Event("rupTable_formEditCompareData");u.isDifferent=d,r.triggerHandler(u,[rp_ge[n.p.id]._savedData,newData]),u.isDifferent&&(e.rup_messages("msgConfirm",{message:e.rup.i18nParse(e.rup.i18n.base,"rup_table.saveAndContinue"),title:e.rup.i18nParse(e.rup.i18n.base,"rup_table.changes"),OKFunction:function(){e(this).dialog("destroy").remove(),jQuery.isFunction(i)&&jQuery.proxy(i,r)()}}),l=!1)}return l},restoreInline:function(t){var i,r=this;if("_empty"!==t&&"undefined"!=typeof r.p.savedRow&&r.p.savedRow.length>0&&e.isFunction(e.fn.jqGrid.restoreRow))for(i=0;i<r.p.savedRow.length;i++)if(r.p.savedRow[i].id==t){e(r).jqGrid("restoreRow",t);break}},getCurrPos:function(){var t=this,i=e(this),r=i.data("settings"),a=t.p.id,n=(e.fn.jqGrid.rup.edit.detail.detailFormId+a,e.fn.jqGrid.rup.edit.detail.detailBodyId+a),o=("#"+e.jgrid.jqID(n),e(t).jqGrid("getDataIDs")),s=e("#id_g",r.formEdit.$detailForm).val(),l=void 0!==s&&"_empty"!==s?s:i.jqGrid("getGridParam","selrow");return pos=e.inArray(l,o),[pos,o]},updateNav:function(t,i){var r,a=e(this);void 0!==i&&void 0!==i[1]&&(r=i[1].length-1,0===t?e("#pData",frmtb+"_2").addClass("ui-state-disabled"):void 0!==i[1][t-1]&&e("#"+e.jgrid.jqID(i[1][t-1])).hasClass("ui-state-disabled")?e("#pData",frmtb+"_2").addClass("ui-state-disabled"):e("#pData",frmtb+"_2").removeClass("ui-state-disabled"),t==r?e("#nData",frmtb+"_2").addClass("ui-state-disabled"):void 0!==i[1][t+1]&&e("#"+e.jgrid.jqID(i[1][t+1])).hasClass("ui-state-disabled")?e("#nData",frmtb+"_2").addClass("ui-state-disabled"):e("#nData",frmtb+"_2").removeClass("ui-state-disabled")),a.rup_table("updateDetailPagination")}}),e.jgrid.extend({editGridRow:function(t,i){return i=e.extend({top:0,left:0,width:300,height:"auto",dataheight:"auto",modal:!1,overlay:30,drag:!0,resize:!0,url:null,mtype:"POST",clearAfterAdd:!0,closeAfterEdit:!1,reloadAfterSubmit:!0,onInitializeForm:null,beforeInitData:null,beforeShowForm:null,afterShowForm:null,beforeSubmit:null,afterSubmit:null,onclickSubmit:null,afterComplete:null,onclickPgButtons:null,afterclickPgButtons:null,editData:{},recreateForm:!1,jqModal:!0,closeOnEscape:!1,addedrow:"first",topinfo:"",bottominfo:"",saveicon:[],closeicon:[],savekey:[!1,13],navkeys:[!1,38,40],checkOnSubmit:!1,checkOnUpdate:!1,_savedData:{},processing:!1,onClose:null,ajaxEditOptions:{},serializeEditData:null,viewPagerButtons:!0},e.jgrid.edit,i||{}),rp_ge[e(this)[0].p.id]=i,this.each(function(){function r(){return u={},c={},e("#"+d.formEdit.feedbackId,b).hide(),e.proxy(e.jgrid.getFormData,s)(u),"_empty"==u[s.p.id+"_id"]?e.proxy(e.jgrid.postIt,s)(u,c,d.opermode):i.checkOnSubmit===!0?(p=e.extend({},u,c),h=compareData(p,rp_ge[s.p.id]._savedData),h?(e("#"+m).data("disabled",!0),e(".confirm","#"+e.jgrid.jqID(_.themodal)).show()):e.proxy(e.jgrid.postIt,s)(u,c,d.opermode)):e.proxy(e.jgrid.postIt,s)(u,c,d.opermode),!1}function a(){if(l.data("tmp.formEditSaveType","SAVE"),!r())return!1}function n(){
if(l.data("tmp.formEditSaveType","SAVE_REPEAT"),!r())return!1}function o(){return!!e.proxy(e.jgrid.checkUpdates,s)(c,function(){e.jgrid.hideModal("#"+e.jgrid.jqID(_.themodal),{gb:"#gbox_"+e.jgrid.jqID(g),jqm:i.jqModal,onClose:rp_ge[s.p.id].onClose})})&&(e.jgrid.hideModal("#"+e.jgrid.jqID(_.themodal),{gb:"#gbox_"+e.jgrid.jqID(g),jqm:i.jqModal,onClose:rp_ge[s.p.id].onClose}),!1)}var s=this,l=e(s),d=l.data("settings");if(s.grid&&t){var u,c,p,h,f,g=s.p.id,m=e.fn.jqGrid.rup.edit.detail.detailFormId+g,v=e.fn.jqGrid.rup.edit.detail.detailBodyId+g,b="#"+e.jgrid.jqID(v),_={themodal:e.fn.jqGrid.rup.edit.detail.detailDivId+g,modalhead:"edithd"+g,modalcontent:"editcnt"+g,scrollelm:m},y=!!e.isFunction(rp_ge[s.p.id].beforeShowForm)&&rp_ge[s.p.id].beforeShowForm,x=!!e.isFunction(rp_ge[s.p.id].afterShowForm)&&rp_ge[s.p.id].afterShowForm,w=!!e.isFunction(rp_ge[s.p.id].beforeInitData)&&rp_ge[s.p.id].beforeInitData,j=!!e.isFunction(rp_ge[s.p.id].onInitializeForm)&&rp_ge[s.p.id].onInitializeForm,k=!0,C=1,D=0;m=e.jgrid.jqID(m),"new"===t?(t="_empty",f="add",i.caption=rp_ge[s.p.id].addCaption):"cloned"===t?(i.caption=rp_ge[s.p.id].addCaption,t="_empty",f="clone_clear"):(i.caption=rp_ge[s.p.id].editCaption,f="edit"),d.opermode=f,i.recreateForm===!0&&d.formEdit.detailFormCreated===!0&&d.formEdit.$detailFormDiv.remove();var S=!0;if(i.checkOnUpdate&&i.jqModal&&!i.modal&&(S=!1),d.formEdit.detailFormCreated===!0){if(_.themodal=d.formEdit.$detailFormDiv.attr("id"),k=e(s).triggerHandler("jqGridAddEditBeforeInitData",[d.formEdit.$detailForm?d.formEdit.$detailForm:e("#"+m),f]),void 0===k&&(k=!0),k&&w&&(k=w.call(s,d.formEdit.$detailForm?d.formEdit.$detailForm:e("#"+m))),k===!1)return;e.proxy(e.jgrid.restoreInline,s)(t),e(".ui-jqdialog-title","#"+e.jgrid.jqID(_.modalhead)).html(i.caption),e("#"+d.formEdit.feedbackId,b).hide(),rp_ge[s.p.id].topinfo?(e(".topinfo",b).html(rp_ge[s.p.id].topinfo),e(".tinfo",b).show()):e(".tinfo",b).hide(),rp_ge[s.p.id].bottominfo?(e(".bottominfo",b+"_2").html(rp_ge[s.p.id].bottominfo),e(".binfo",b+"_2").show()):e(".binfo",b+"_2").hide(),e.proxy(e.jgrid.fillData,s)(t,s,m,f),"_empty"!=t&&rp_ge[s.p.id].viewPagerButtons?e("#pData, #nData",b+"_2").show():e("#pData, #nData",b+"_2").hide(),rp_ge[s.p.id].processing===!0&&(rp_ge[s.p.id].processing=!1,e("#sData",b+"_2").removeClass("ui-state-active")),(d.formEdit.$detailForm?d.formEdit.$detailForm:e("#"+m)).data("disabled")===!0&&(e(".confirm","#"+e.jgrid.jqID(_.themodal)).hide(),(d.formEdit.$detailForm?d.formEdit.$detailForm:e("#"+m)).data("disabled",!1)),e(s).triggerHandler("jqGridAddEditBeforeShowForm",[d.formEdit.$detailForm?d.formEdit.$detailForm:e("#"+m),f]),y&&y.call(s,d.formEdit.$detailForm?d.formEdit.$detailForm:e("#"+m)),e("#"+e.jgrid.jqID(_.themodal)).data("onClose",rp_ge[s.p.id].onClose),e.jgrid.viewModal("#"+e.jgrid.jqID(_.themodal),{gbox:"#gbox_"+e.jgrid.jqID(g),jqm:i.jqModal,jqM:!1,overlay:i.overlay,modal:i.modal}),S||e(".jqmOverlay").click(function(){return!!e.proxy(e.jgrid.checkUpdates,s)(c)&&(e.jgrid.hideModal("#"+e.jgrid.jqID(_.themodal),{gb:"#gbox_"+e.jgrid.jqID(g),jqm:i.jqModal,onClose:rp_ge[s.p.id].onClose}),!1)}),e(s).triggerHandler("jqGridAddEditAfterShowForm",[d.formEdit.$detailForm?d.formEdit.$detailForm:e("#"+m),f]),x&&x.call(s,d.formEdit.$detailForm?d.formEdit.$detailForm:e("#"+m))}else{var T=isNaN(i.dataheight)?i.dataheight:i.dataheight+"px",P=(isNaN(i.datawidth)?i.datawidth:i.datawidth+"px",e(jQuery.rup.i18nTemplate(jQuery.rup.i18n.base,"rup_table.templates.detailForm.form",m,T)).data("disabled",!1)),I=e(jQuery.rup.i18nTemplate(jQuery.rup.i18n.base,"rup_table.templates.detailForm.body",v)),k=e(s).triggerHandler("jqGridAddEditBeforeInitData",[e("#"+m),f]);if("undefined"==typeof k&&(k=!0),k&&w&&(k=w.call(s,e("#"+m))),k===!1)return;e.proxy(e.jgrid.restoreInline,s)(t),e(s.p.colModel).each(function(){var e=this.formoptions;C=Math.max(C,e?e.colpos||0:0),D=Math.max(D,e?e.rowpos||0:0)}),e(P).append(I),flr=e(jQuery.rup.i18nTemplate(jQuery.rup.i18n.base,"rup_table.templates.detailForm.errorFeedback",d.formEdit.feedbackId)),flr[0].rp=0,e(I).append(flr),flr=e("<div class='tinfo' style='display:none'><span class='topinfo'>"+rp_ge[s.p.id].topinfo+"</span></div>"),flr[0].rp=0,e(I).append(flr);var $="rtl"==s.p.direction,F=$?"nData":"pData",M=$?"pData":"nData";void 0===d.formEdit.$detailForm?(d.formEdit.$detailForm=I.parent(),e.proxy(e.jgrid.createData,s)(t,s,I,C)):d.formEdit.$detailForm.append(e("<div class='FormData' style='display:none'><span class='CaptionTD'></span><span class='DataTD '><input class='FormElement' id='id_g' type='text' name='"+s.p.id+"_id' value='"+t+"'/></span></div>")),P=d.formEdit.$detailForm[0],e.proxy(e.jgrid.fillData,s)(t,s,m,f);var A="<a href='javascript:void(0)' id='"+F+"' class='fm-button ui-state-default ui-corner-left'><span class='ui-icon ui-icon-triangle-1-w'></span></a>",E="<a href='javascript:void(0)' id='"+M+"' class='fm-button ui-state-default ui-corner-right'><span class='ui-icon ui-icon-triangle-1-e'></span></a>",q="<a href='javascript:void(0)' id='sData' class='fm-button ui-state-default ui-corner-all'>"+i.bSubmit+"</a>",O="<a href='javascript:void(0)' id='cData' class='fm-button ui-state-default ui-corner-all'>"+i.bCancel+"</a>",R="<table border='0' cellspacing='0' cellpadding='0' class='EditTable' id='"+v+"_2'><tbody><tr><td colspan='2'><hr class='ui-widget-content' style='margin:1px'/></td></tr><tr id='Act_Buttons'><td class='navButton'>"+($?E+A:A+E)+"</td><td class='EditButton'>"+q+O+"</td></tr>";if(R+="<tr style='display:none' class='binfo'><td class='bottominfo' colspan='2'>"+rp_ge[s.p.id].bottominfo+"</td></tr>",R+="</tbody></table>",d.formEdit.ownFormEdit===!1&&D>0)for(var N=1;N<=C;N++){var G=I.find("#col_"+parseInt(2*(parseInt(N,10)||1),10)),L=[];e.each(G.find("div"),function(e,t){L[e]=t}),L.sort(function(e,t){return e.rp>t.rp?1:e.rp<t.rp?-1:0}),e.each(L,function(e,t){G.append(t)})}i.gbox="#gbox_"+e.jgrid.jqID(g);var z=!1;i.closeOnEscape===!0&&(i.closeOnEscape=!1,z=!0);var Q,H=l.rup_table("createDetailNavigation");if(d.formEdit.ownFormEdit===!0)d.formEdit.$detailFormDiv.is(":visible")||d.formEdit.$detailFormDiv.show(),d.formEdit.$detailFormDiv.rup_dialog(e.extend({},{type:e.rup.dialog.DIV,autoOpen:!1,modal:!0,resizable:i.resize,title:i.caption,width:i.width},d.formEdit.dialogOptions)),d.formEdit.detailFormCreated=!0,d.formEdit.$navigationBar.append(H),d.formEdit.$saveButton.length>0&&d.formEdit.$saveButton.button().click(function(){jQuery.proxy(a,l)()}),d.formEdit.$saveRepeatButton.length>0&&d.formEdit.$saveRepeatButton.button().click(function(){jQuery.proxy(n,l)()}),d.formEdit.$cancelLink.length>0&&d.formEdit.$cancelLink.on("click",function(){jQuery.proxy(o,l)()}),jQuery.isFunction(i.onClose)||(i.onClose=o),jQuery(".ui-dialog-titlebar-close, a:has(#closeText_"+d.formEdit.$detailFormDiv.first()[0].id+")",d.formEdit.$detailFormDiv.parent()).off("click").on("click",function(e){i.onClose.call(e)}),_.themodal=d.formEdit.$detailFormDiv.attr("id");else{var Q=H.after(P),B={text:e.rup.i18nParse(e.rup.i18n.base,"rup_global.save"),click:a},W={text:e.rup.i18nParse(e.rup.i18n.base,"rup_global.save_repeat"),click:n},U={text:e.rup.i18nParse(e.rup.i18n.base,"rup_global.cancel"),btnType:e.rup.dialog.LINK,click:o};i.buttons=[B,W,U],i.onClose=o,e.jgrid.createModal(_,Q,i,"#gview_"+e.jgrid.jqID(s.p.id),e("#gbox_"+e.jgrid.jqID(s.p.id))[0]),d.formEdit.detailFormCreated=!0}void 0===d.formEdit.$detailFormDiv&&(d.formEdit.$detailFormDiv=e("#"+e.jgrid.jqID(_.themodal))),$&&(e("#pData, #nData",b+"_2").css("float","right"),e(".EditButton",b+"_2").css("text-align","left")),rp_ge[s.p.id].topinfo&&e(".tinfo",b).show(),rp_ge[s.p.id].bottominfo&&e(".binfo",b+"_2").show(),Q=null,R=null,e("#"+e.jgrid.jqID(_.themodal)).keydown(function(t){var r=t.target;if(e("#"+m).data("disabled")===!0)return!1;if(rp_ge[s.p.id].savekey[0]===!0&&t.which==rp_ge[s.p.id].savekey[1]&&"TEXTAREA"!=r.tagName)return e("#sData",b+"_2").trigger("click"),!1;if(27===t.which)return!!e.proxy(e.jgrid.checkUpdates,s)(c)&&(z&&e.jgrid.hideModal("#"+e.jgrid.jqID(_.themodal),{gb:i.gbox,jqm:i.jqModal,onClose:rp_ge[s.p.id].onClose}),!1);if(rp_ge[s.p.id].navkeys[0]===!0){if("_empty"==e("#id_g",b).val())return!0;if(t.which==rp_ge[s.p.id].navkeys[1])return e("#pData",b+"_2").trigger("click"),!1;if(t.which==rp_ge[s.p.id].navkeys[2])return e("#nData",b+"_2").trigger("click"),!1}}),i.checkOnUpdate&&(e("a.ui-jqdialog-titlebar-close span","#"+e.jgrid.jqID(_.themodal)).removeClass("jqmClose"),e("a.ui-jqdialog-titlebar-close","#"+e.jgrid.jqID(_.themodal)).unbind("click").click(function(){return!!e.proxy(e.jgrid.checkUpdates,s)(c)&&(e.jgrid.hideModal("#"+e.jgrid.jqID(_.themodal),{gb:"#gbox_"+e.jgrid.jqID(g),jqm:i.jqModal,onClose:rp_ge[s.p.id].onClose}),!1)})),i.saveicon=e.extend([!0,"left","ui-icon-disk"],i.saveicon),i.closeicon=e.extend([!0,"left","ui-icon-close"],i.closeicon),i.saveicon[0]===!0&&e("#sData",b+"_2").addClass("right"==i.saveicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+i.saveicon[2]+"'></span>"),i.closeicon[0]===!0&&e("#cData",b+"_2").addClass("right"==i.closeicon[1]?"fm-button-icon-right":"fm-button-icon-left").append("<span class='ui-icon "+i.closeicon[2]+"'></span>"),e(s).triggerHandler("jqGridAddEditInitializeForm",[d.formEdit.$detailForm,f]),j&&j.call(s,d.formEdit.$detailForm),"_empty"!=t&&rp_ge[s.p.id].viewPagerButtons?e("#pData,#nData",b+"_2").show():e("#pData,#nData",b+"_2").hide(),e(s).triggerHandler("jqGridAddEditBeforeShowForm",[d.formEdit.$detailForm,f]),y&&y.call(s,d.formEdit.$detailForm),e("#"+e.jgrid.jqID(_.themodal)).data("onClose",rp_ge[s.p.id].onClose),e.jgrid.viewModal("#"+e.jgrid.jqID(_.themodal),{gbox:"#gbox_"+e.jgrid.jqID(g),jqm:i.jqModal,overlay:i.overlay,modal:i.modal}),S||e(".jqmOverlay").click(function(){return!!e.proxy(e.jgrid.checkUpdates,s)(c)&&(e.jgrid.hideModal("#"+e.jgrid.jqID(_.themodal),{gb:"#gbox_"+e.jgrid.jqID(g),jqm:i.jqModal,onClose:rp_ge[s.p.id].onClose}),!1)}),e(s).triggerHandler("jqGridAddEditAfterShowForm",[d.formEdit.$detailForm,f]),x&&x.call(s,d.formEdit.$detailForm),e(".fm-button","#"+e.jgrid.jqID(_.themodal)).hover(function(){e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")})}var V=e.proxy(e.jgrid.getCurrPos,s)();l.rup_table("updateDetailPagination"),e.proxy(e.jgrid.updateNav,s)(V[0],V[1].length-1)}})}}),e.fn.jqGrid.rup={},e.fn.jqGrid.rup.edit={detail:{detailDivId:"detailDiv_",detailBodyId:"detailBody_",detailFormId:"detailForm_"},navigation:{forward:{id:"#nData"},back:{id:"#pData"}}},jQuery.fn.rup_table.plugins.formEdit={},jQuery.fn.rup_table.plugins.formEdit.defaults={toolbar:{defaultButtons:{add:!0,edit:!0,cancel:!1,save:!1,clone:!0,"delete":!0,filter:!1}},contextMenu:{defaultRowOperations:{add:!0,edit:!0,cancel:!1,save:!1,clone:!0,"delete":!0,filter:!1}},formEdit:{autoselectFirstRecord:!0,ownFormEdit:!1,detailFormCreated:!1,dialogOptions:{}}},jQuery.fn.rup_table.plugins.formEdit.defaults.formEdit.deleteOptions={bSubmit:jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_message.aceptar"),cancelicon:[!0,"left","icono_cancelar"],delicon:[!1],linkStyleButtons:["#eData"],msg:'<div id="rup_msgDIV_msg_icon" class="rup-message_icon-confirm"></div><div id="rup_msgDIV_msg" class="rup-message_msg-confirm white-space-normal">'+jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_table.deleteAll")+"</div>",mtype:"DELETE",width:320,reloadAfterSubmit:!1,resize:!1,useDataProxy:!0},jQuery.fn.rup_table.plugins.formEdit.defaults.formEdit.addEditOptions={bSubmit:jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_message.aceptar"),closeicon:[!1],checkOnUpdate:!0,defaultCompareData:!0,fillDataMethod:"serverSide",saveicon:[!1],linkStyleButtons:["#cData"],msg:'<div id="rup_msgDIV_msg_icon" class="rup-message_icon-confirm"></div><div id="rup_msgDIV_msg" class="rup-message_msg-confirm white-space-normal">'+jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_table.deleteAll")+"</div>",mtype:"PUT",reloadAfterSubmit:!1,resize:!1,viewPagerButtons:!1,width:569,ajaxEditOptions:{type:"PUT",dataType:"json",processData:!1}},jQuery.fn.rup_table.plugins.formEdit.defaults.formEdit.addOptions={mtype:"POST",ajaxEditOptions:{type:"POST"}},jQuery.fn.rup_table.plugins.formEdit.defaults.formEdit.editOptions={mtype:"PUT",ajaxEditOptions:{type:"PUT"}},jQuery.fn.rup_table.plugins.formEdit.defaults.formEdit.detailOptions={ajaxDetailOptions:{dataType:"json",type:"GET",async:!1,contentType:"application/json"}}}(jQuery),/*!
 * Copyright 2013 E.J.I.E., S.A.
 *
 * Licencia con arreglo a la EUPL, Versión 1.1 exclusivamente (la «Licencia»);
 * Solo podrá usarse esta obra si se respeta la Licencia.
 * Puede obtenerse una copia de la Licencia en
 *
 *      http://ec.europa.eu/idabc/eupl.html
 *
 * Salvo cuando lo exija la legislación aplicable o se acuerde por escrito, 
 * el programa distribuido con arreglo a la Licencia se distribuye «TAL CUAL»,
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ni expresas ni implícitas.
 * Véase la Licencia en el idioma concreto que rige los permisos y limitaciones
 * que establece la Licencia.
 */
function(e){jQuery.rup_table.registerPlugin("inlineEdit",{loadOrder:7,preConfiguration:function(e){var t=this;t.rup_table("preConfigureInlineEdit",e)},postConfiguration:function(e){var t=this;t.rup_table("postConfigureInlineEdit",e)}}),jQuery.fn.rup_table("extend",{preConfigureInlineEdit:function(t){var i,r=e(this);t.editable=!0,void 0===t.inlineEdit.addEditOptions.url&&(t.inlineEdit.addEditOptions.url=t.baseUrl),t.inlineEdit.deleteOptions.ajaxDelOptions=e.extend(!0,t.inlineEdit.deleteOptions.ajaxDelOptions,{success:function(i,a,n){r.triggerHandler("rupTableAfterDelete",[i,a,n]),r.rup_table("showFeedback",t.$feedback,e.rup.i18nParse(e.rup.i18n.base,"rup_table.deletedOK"),"ok")}}),i=t.inlineEdit.beforeSend,t.inlineEdit.addEditOptions.restoreAfterError=!1,t.inlineEdit.addEditOptions.errorfunc=function(e,i,a,n,o){var s;if(406===i.status&&""!==i.responseText)try{s=jQuery.parseJSON(i.responseText),s.rupErrorFields&&r.rup_table("showServerValidationFieldErrors",t.inlineEdit.$inlineForm,s)}catch(l){r.rup_table("showFeedback",t.$feedback,i.responseText,"error")}},t.inlineEdit.addEditOptions.ajaxRowOptions.beforeSend=function(a,n){return jQuery.extend(!0,n,{validate:t.validate,beforeSend:jQuery.isFunction(i)?i:null,feedback:t.$feedback}),t.inlineEdit.$inlineForm.on("rupValidate_formValidationError.inlineEditing",function(i,a){r.off("rupValidate_formValidationError.inlineEditing"),e("#lui_"+e.jgrid.jqID(t.id)).hide()}),t.inlineEdit.$inlineForm.rup_form("ajaxSubmit",n),!1},t.inlineEdit.addOptions=e.extend(!0,{},t.inlineEdit.addEditOptions,t.inlineEdit.addOptions),t.inlineEdit.editOptions=e.extend(!0,{},t.inlineEdit.addEditOptions,t.inlineEdit.editOptions),t.multiboxonly=!0,t.getRowForEditing=function(){var e=this,t=e.jqGrid("getGridParam","selrow");return null!==t&&t},t.core.operations={add:{name:e.rup.i18nParse(e.rup.i18n.base,"rup_table.new"),icon:"rup-icon rup-icon-new",enabled:function(){var e=this;return 0===jQuery("tr[editable='1']",e).length},callback:function(e,t){var i=this;i.rup_table("addRow")}},edit:{name:e.rup.i18nParse(e.rup.i18n.base,"rup_table.modify"),icon:"rup-icon rup-icon-edit",enabled:function(){var e,t=this,i=t.jqGrid("getGridParam","selrow");return i=null!==i&&i,i=i&&i.indexOf("jqg")===-1,e=0===jQuery("tr[editable='1'].jqgrid-new-row",t).length,i&&e},callback:function(e,i){r.rup_table("editRow",jQuery.proxy(t.getRowForEditing,r)())}},save:{name:e.rup.i18nParse(e.rup.i18n.base,"rup_table.save"),icon:"rup-icon rup-icon-save",enabled:function(){var e=this;return jQuery("tr[editable='1']",e).length>0},callback:function(e,t){r.rup_table("saveRow")}},clone:{name:e.rup.i18nParse(e.rup.i18n.base,"rup_table.clone"),icon:"rup-icon rup-icon-clone",enabled:function(){var e,t=this,i=t.jqGrid("getGridParam","selrow");return i=null!==i&&i,i=i&&i.indexOf("jqg")===-1,e=0===jQuery("tr[editable='1'].jqgrid-new-row",t).length,i&&e},callback:function(e,t){jQuery("tr[editable='1']",r).length>0&&r.rup_table("restoreRow"),r.rup_table("cloneRow")}},cancel:{name:e.rup.i18nParse(e.rup.i18n.base,"rup_table.cancel"),icon:"rup-icon rup-icon-cancel",enabled:function(){var e=this;return jQuery("tr[editable='1']",e).length>0},callback:function(e,t){r.rup_table("restoreRow")}},"delete":{name:e.rup.i18nParse(e.rup.i18n.base,"rup_table.delete"),icon:"rup-icon rup-icon-delete",enabled:function(){var e=this,t=e.jqGrid("getGridParam","selrow");return t=null!==t&&t.indexOf("jqg")===-1&&t,jQuery("tr[editable='1']:not(.jqgrid-new-row)",e).length>0||t},callback:function(e,t){r.rup_table("deleteRow")}}},r.on({"jqGridInlineErrorSaveRow.rupTable.inlineEditing":function(e,i,a){jQuery(r.getInd(i,!0)).attr("id",t.inlineEditingRow),r.rup_table("setSelection",t.inlineEditingRow)},"jqGridInlineAfterSaveRow.rupTable.inlineEditing":function(i,a,n,o,s){jQuery("#"+jQuery.jgrid.jqID(a)+".jqgrid-new-row",r).removeClass("jqgrid-new-row"),"edit"===s.oper?r.rup_table("showFeedback",t.$feedback,e.rup.i18nParse(e.rup.i18n.base,"rup_table.modifyOK"),"ok"):r.rup_table("showFeedback",t.$feedback,e.rup.i18nParse(e.rup.i18n.base,"rup_table.insertOK"),"ok")},"jqGridInlineEditRow.rupTable.inlineEditing":function(t,i){function r(e,t){return c.on("jqGridInlineAfterSaveRow.inlineEditing.addNextRow",function(e){c.rup_table("addRow"),jQuery(c.getInd(c[0].p.selrow,!0)).find(":not([readonly]):focusable:first").focus(),c.off("jqGridInlineAfterSaveRow.inlineEditing.addNextRow")}),c.rup_table("saveRow",e),!0}function a(e,t){var i,r,a,n,o,s;return i=c.getDataIDs(),r=c.getInd(e)-1,a=parseInt(c.rup_table("getGridParam","rowNum"),10),r!==a-1?(c.on("jqGridInlineEditRow.rupTable.inlineEditing.tabKeyNav.cellSelected",function(e,i){s=void 0===t||t===-1?jQuery(c.jqGrid("getInd",i,!0)).find("td :not([readonly]):focusable:first"):jQuery(c.jqGrid("getInd",i,!0)).find("td:eq("+t+") :not([readonly]):focusable:first"),s.trigger("focus"),c.off("jqGridInlineEditRow.rupTable.inlineEditing.tabKeyNav.cellSelected")}),jQuery(c.getInd(i[r+1],!0)).trigger("click"),!1):(n=parseInt(c.rup_table("getGridParam","page"),10),o=parseInt(Math.ceil(c.rup_table("getGridParam","records")/c.rup_table("getGridParam","rowNum")),10),!(n<o)||(c.trigger("reloadGrid",[{page:n+1}]),c.on("jqGridAfterLoadComplete.rupTable.inlineEdit",function(e,r){i=c.getDataIDs(),c.on("jqGridInlineEditRow.rupTable.inlineEditing.tabKeyNav.cellSelected",function(e,i){s=void 0===t||t===-1?jQuery(c.jqGrid("getInd",i,!0)).find("td :not([readonly]):focusable:first"):jQuery(c.jqGrid("getInd",i,!0)).find("td:eq("+t+") :not([readonly]):focusable:first"),s.trigger("focus"),c.off("jqGridInlineEditRow.rupTable.inlineEditing.tabKeyNav.cellSelected")}),jQuery(c.getInd(i[0],!0)).trigger("click"),c.off("jqGridAfterLoadComplete.rupTable.inlineEdit")}),!1))}function n(e,t){var i,r,a,n;return i=c.getDataIDs(),r=c.getInd(e)-1,0!==r?(c.on("jqGridInlineEditRow.rupTable.inlineEditing.tabKeyNav.cellSelected",function(e,i){n=void 0===t||t===-1?jQuery(c.jqGrid("getInd",i,!0)).find("td :not([readonly]):focusable:last"):jQuery(c.jqGrid("getInd",i,!0)).find("td:eq("+t+") :not([readonly]):focusable:last"),n.trigger("focus"),c.off("jqGridInlineEditRow.rupTable.inlineEditing.tabKeyNav.cellSelected")}),jQuery(c.getInd(i[r-1],!0)).trigger("click"),!1):(a=parseInt(c.rup_table("getGridParam","page"),10),a>1?(c.trigger("reloadGrid",[{page:a-1}]),c.on("jqGridAfterLoadComplete.rupTable.inlineEdit",function(e,r){i=c.getDataIDs(),c.on("jqGridInlineEditRow.rupTable.inlineEditing.tabKeyNav.cellSelected",function(e,i){n=void 0===t||t===-1?jQuery(c.jqGrid("getInd",i,!0)).find("td :not([readonly]):focusable:last"):jQuery(c.jqGrid("getInd",i,!0)).find("td:eq("+t+") :not([readonly]):focusable:last"),n.trigger("focus"),c.off("jqGridInlineEditRow.rupTable.inlineEditing.tabKeyNav.cellSelected")}),jQuery(c.getInd(i[i.length-1],!0)).trigger("click"),c.off("jqGridAfterLoadComplete.rupTable.inlineEdit")}),!1):void 0)}var o,s,l,d,u=this,c=e(u),p=c.data("settings"),h=u.p.colModel,f=c.jqGrid("getInd",i,!0);e("td[role='gridcell']",f).each(function(t){if(o=h[t],o.editable===!0&&(s=o.name,d=e("[name='"+s+"']",f),d.attr({title:u.p.colNames[t],"class":"editable customelement"}),void 0!==o.rupType)){switch(l=o.editoptions,o.rupType){case"combo":l=e.extend({menuWidth:d.width()},l,{width:"100%"})}switch(d["rup_"+o.rupType](l),o.rupType){case"date":d.css("width","88%")}}}),p.inlineEditingRow=i,c.data("initialFormData",p.inlineEdit.$inlineForm.rup_form("formSerialize")),jQuery(f).on({keydown:function(t){if(27===t.keyCode)return c.rup_table("restoreRow",e(this).attr("id"),p.afterrestorefunc),!1;if(13===t.keyCode){var i=t.target;return"TEXTAREA"==i.tagName||(c.rup_table("saveRow"),!1)}}}),jQuery("td",jQuery(f)).on({keydown:function(t){var i,r;return 38===t.keyCode?(r=e.map(c.rup_table("getColModel"),function(e,t){return e.name}),i=jQuery.inArray(e(this).attr("aria-describedby").split(p.id+"_")[1],r),n(e(f).attr("id"),i),!1):40===t.keyCode?(r=e.map(c.rup_table("getColModel"),function(e,t){return e.name}),i=jQuery.inArray(e(this).attr("aria-describedby").split(p.id+"_")[1],r),a(e(f).attr("id"),i),!1):void 0}}),jQuery("input,select",jQuery(f)).on({focus:function(e){}}),jQuery("input, textarea, select,a.rup_combo",jQuery(f)).filter(".editable:visible:last").on({keydown:function(e){if(9==e.keyCode&&!e.shiftKey)if(jQuery(f).attr("id").indexOf("jqg")!==-1){if(r(jQuery(f).attr("id"))===!1)return!1}else if(a(jQuery(f).attr("id"))===!1)return!1}}),jQuery("input, textarea, select,a.rup_combo",jQuery(f)).filter(".editable:visible:first").on({keydown:function(e){var t,r,a;if(9==e.keyCode&&e.shiftKey){if(t=c.getDataIDs(),r=c.getInd(i)-1,0!==r)return c.on("jqGridInlineEditRow.rupTable.inlineEditing.tabKeyNav.cellSelected",function(e,t){jQuery(c.jqGrid("getInd",t,!0)).find("td :focusable:last").trigger("focus"),c.off("jqGridInlineEditRow.rupTable.inlineEditing.tabKeyNav.cellSelected")}),jQuery(c.getInd(t[r-1],!0)).trigger("click"),!1;if(a=parseInt(c.rup_table("getGridParam","page"),10),a>1)return c.trigger("reloadGrid",[{page:a-1}]),c.on("jqGridAfterLoadComplete.rupTable.inlineEdit",function(e,i){t=c.getDataIDs(),c.on("jqGridInlineEditRow.rupTable.inlineEditing.tabKeyNav.cellSelected",function(e,t){jQuery(c.jqGrid("getInd",t,!0)).find("td :focusable:last").trigger("focus"),c.off("jqGridInlineEditRow.rupTable.inlineEditing.tabKeyNav.cellSelected")}),jQuery(c.getInd(t[t.length-1],!0)).trigger("click"),c.off("jqGridAfterLoadComplete.rupTable.inlineEdit")}),!1}}})},"jqGridDblClickRow.rupTable.inlineEdit":function(e,i,a,n){return!t.inlineEdit.autoEditRow&&void r.rup_table("editRow",i)},"jqGridInlineAfterRestoreRow.inlineEditing.processRupObjects":function(t,i){var r=this,a=e(this),n=r.p.savedRow[0];a.rup_table("restoreInlineRupFields",i,n)},"rupTable_beforeSaveRow.inlineEditing.processRupObjects":function(t,i,r){var a,n,o,s=this,l=e(this);e(s.p.colModel).each(function(t){a=e(s.rows.namedItem(i)),n=a.find("td:eq("+t+")"),o=n.find("[ruptype]"),"combo"===o.attr("ruptype")&&void 0!==l.data("rup.table.formatter")&&(l.data("rup.table.formatter")[i][this.name]["rup_"+o.attr("rupType")]={label:o.rup_combo("label"),value:o.rup_combo("getRupValue")})})},"jqGridInlineSuccessSaveRow.rupTable.inlineEditing.processRupObjects":function(t,i,r,a){var n=jQuery.parseJSON(i.responseText),o=this,s=e(o);return s.rup_table("restoreInlineRupFields",r,n),[!0,n,r]},"jqGridBeforeSelectRow.rupTable.inlineEditing":function(t,i,r){var a=e(this),n=a.data("settings"),o=e("tr[editable=1]",a);if(o.length>0&&void 0!==n.inlineEditingRow&&n.inlineEditingRow!==i&&a.data("initialFormData")!==n.inlineEdit.$inlineForm.rup_form("formSerialize")){a.on("jqGridInlineSuccessSaveRow.inlineEditing_beforeSelectRow",function(e){a.rup_table("setSelection",i),a.off("jqGridInlineSuccessSaveRow.inlineEditing_beforeSelectRow")});for(var s=0;s<o.length;s++)a.rup_table("saveRow",o[0].id);return!1}return!0},"jqGridSelectRow.rupTable.inlineEditing":function(i,r,a,n){var o,s=e(this);o=e("tr[editable=1]",s),o.length>0&&jQuery.each(e("tr[editable=1]",s),function(t,i){e(i).attr("id")!==r&&s.jqGrid("restoreRow",e(i).attr("id"))}),t.inlineEdit.autoEditRow&&s.rup_table("editRow",r)},"rupTable_checkOutOfGrid.rupTable.inlineEditing":function(t,i){var r=e(this),a=r.data("settings"),n=a.core.operations.save;jQuery.proxy(n.enabled,r)()&&jQuery.proxy(n.callback,r)(r,t)}}),t.inlineEdit.autoEditRow&&r.on({"jqGridCellSelect.rupTable.inlineEditing":function(t,i,r,a,n){var o=e(this);r!==-1&&o.on("jqGridInlineEditRow.rupTable.inlineEditing.cellSelected",function(e,t){jQuery(o.jqGrid("getInd",i,!0)).find("td:eq("+r+") :focusable:first").trigger("focus"),o.off("jqGridInlineEditRow.rupTable.inlineEditing.cellSelected")})}})},postConfigureInlineEdit:function(t){var i=this,r="inlineForm_"+t.id,a=e("<form>").attr({id:"inlineForm_"+t.id});i.wrap(a),t.inlineEdit.$inlineForm=e("#"+r),t.inlineEdit.$inlineForm.on("rupValidate_formValidationError.inlineEditing",function(e,r){var a=i.jqGrid("getGridParam","selrow");jQuery(i.getInd(a,!0)).attr("id",t.inlineEditingRow),i.rup_table("setSelection",t.inlineEditingRow)}),i.on({"jqGridLoadComplete.rupTable.formEditing":function(t){var i,r=e(this),a=r.data("settings");a.inlineEdit.autoselectFirstRecord&&(i=jQuery.proxy(jQuery.jgrid.getCurrPos,r[0])(),r.rup_table("highlightRowAsSelected",jQuery(r.jqGrid("getInd",i[1][0],!0))))}})}}),jQuery.fn.rup_table("extend",{addRow:function(t){for(var i=this,r=i.data("settings"),a=i[0].p.colModel,n={addRowParams:e.extend({},r.inlineEdit.addOptions,t)},o=0;o<a.length;o++)a[o].editable===!0&&a[o].editableOnAdd!==!1&&(a[o].editable===!0&&a[o].editableOnAdd===!1?(void 0===a[o].editoptions&&(a[o].editoptions={}),a[o].editoptions.readonly="readonly"):void 0!==a[o].editoptions&&void 0!==a[o].editoptions.readonly&&delete a[o].editoptions.readonly);return i.triggerHandler("rupTable_beforeAddRow",[n])!==!1&&i.jqGrid("addRow",e.extend({},n)),i},cloneRow:function(e,t){var i,r,a=this,n=a.data("settings"),o=void 0===e?a.jqGrid("getGridParam","selrow"):e,s=a[0].p.colModel;if(a.triggerHandler("rupTable_beforeCloneRow",[n,e])!==!1){i=a.jqGrid("getRowData",o),a.rup_table("addRow"),r=jQuery("tbody:first tr[id*='jqg']",a).attr("id"),a.jqGrid("setRowData",r,i),jQuery(a.jqGrid("getInd",r,!0)).attr("editable","0");for(var l=0;l<s.length;l++)s[l].editable===!0&&s[l].editableOnAdd!==!1&&(s[l].editable===!0&&s[l].editableOnAdd===!1?(void 0===s[l].editoptions&&(s[l].editoptions={}),s[l].editoptions.readonly="readonly"):void 0!==s[l].editoptions&&void 0!==s[l].editoptions.readonly&&delete s[l].editoptions.readonly);a.rup_table("editRow",r,{},!0)}},editRow:function(t,i,r){var a=this,n=a.data("settings"),o=void 0===t?a.jqGrid("getGridParam","selrow"):t,s=a[0].p.colModel;if(r!==!0)for(var l=0;l<s.length;l++)s[l].editable===!0&&s[l].editableOnEdit===!1?(void 0===s[l].editoptions&&(s[l].editoptions={}),s[l].editoptions.readonly="readonly"):void 0!==s[l].editoptions&&void 0!==s[l].editoptions.readonly&&delete s[l].editoptions.readonly;return a.triggerHandler("rupTable_beforeEditRow",[n.inlineEdit.editOptions,o])!==!1&&a.jqGrid("editRow",o,e.extend({},n.inlineEdit.editOptions,i)),a},deleteRow:function(e,t){var i=this,r=i.data("settings"),a=jQuery.extend(!0,{},r.inlineEdit.deleteOptions,t),n=void 0===e?i.rup_table("getSelectedRows"):e;return 1===n.length?"DELETE"===a.mtype&&(a.url=r.baseUrl+"/"+i.rup_table("getPkUrl",n)):(a.mtype="POST",a.ajaxDelOptions.contentType="application/json",a.ajaxDelOptions.type="POST",a.ajaxDelOptions.dataType="json",a.url=r.baseUrl+"/deleteAll",a.serializeDelData=function(e,t){return jQuery.toJSON({core:{pkToken:r.multiplePkToken,pkNames:r.primaryKey},multiselection:i.rup_table("getSelectedIds")})}),a.afterSubmit=function(e,t){return i.triggerHandler("rupTable_deleteAfterSubmit",[e,t]),[!0]},a.afterComplete=function(e,t){i.triggerHandler("rupTable_deleteAfterComplete",[e,t])},i.triggerHandler("rupTable_beforeDeleteRow",[a,n])!==!1&&i.jqGrid("delGridRow",n,a),i},saveRow:function(e,t){var i=this,r=i.data("settings"),a=void 0===e?i.jqGrid("getGridParam","selrow"):e;return i.triggerHandler("rupTable_beforeSaveRow",[a,t]),a.indexOf("jqg")!==-1?(i[0].p.ajaxRowOptions=r.inlineEdit.addOptions.ajaxRowOptions,i.jqGrid("saveRow",a,r.inlineEdit.addOptions)):(i[0].p.ajaxRowOptions=r.inlineEdit.editOptions.ajaxRowOptions,i.jqGrid("saveRow",a,r.inlineEdit.editOptions)),i},restoreRow:function(e,t){var i=this,r=void 0===e?i.jqGrid("getGridParam","selrow"):e;i.triggerHandler("rupTable_beforeRestoreRow",[e]),i.jqGrid("restoreRow",r,t)},restoreInlineRupFields:function(t,i){var r,a,n=this,o=this[0];e(o.p.colModel).each(function(i){if(r=e(o.rows.namedItem(t)),a=r.find("td:eq("+i+")"),this.rupType&&"combo"===this.rupType&&void 0!==n.data("rup.table.formatter")){var s=n.data("rup.table.formatter")[t][this.name]["rup_"+this.rupType].label;a.html(s)}})}}),jQuery.fn.rup_table.plugins.inlineEdit={},jQuery.fn.rup_table.plugins.inlineEdit.defaults={toolbar:{defaultButtons:{add:!0,edit:!0,cancel:!0,save:!0,clone:!0,"delete":!0,filter:!1}},contextMenu:{defaultRowOperations:{add:!0,edit:!0,cancel:!0,save:!0,clone:!0,"delete":!0,filter:!1}},inlineEdit:{autoselectFirstRecord:!0,autoEditRow:!1},formEdit:{}},jQuery.fn.rup_table.plugins.inlineEdit.defaults.inlineEdit.addEditOptions={contentType:"application/json",type:"PUT",dataType:"json",ajaxRowOptions:{contentType:"application/json",dataType:"json",processData:!1}},jQuery.fn.rup_table.plugins.inlineEdit.defaults.inlineEdit.addOptions={mtype:"POST",ajaxRowOptions:{type:"POST"}},jQuery.fn.rup_table.plugins.inlineEdit.defaults.inlineEdit.editOptions={mtype:"PUT",ajaxRowOptions:{type:"PUT"}},jQuery.fn.rup_table.plugins.inlineEdit.defaults.inlineEdit.deleteOptions={bSubmit:jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_message.aceptar"),cancelicon:[!0,"left","icono_cancelar"],delicon:[!1],linkStyleButtons:["#eData"],msg:'<div id="rup_msgDIV_msg_icon" class="rup-message_icon-confirm"></div><div id="rup_msgDIV_msg" class="rup-message_msg-confirm white-space-normal">'+jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_table.deleteAll")+"</div>",mtype:"DELETE",width:320,reloadAfterSubmit:!1,resize:!1},jQuery.jgrid.inlineEdit={keys:!1}}(jQuery),/*!
 * Copyright 2013 E.J.I.E., S.A.
 *
 * Licencia con arreglo a la EUPL, Versión 1.1 exclusivamente (la «Licencia»);
 * Solo podrá usarse esta obra si se respeta la Licencia.
 * Puede obtenerse una copia de la Licencia en
 *
 *      http://ec.europa.eu/idabc/eupl.html
 *
 * Salvo cuando lo exija la legislación aplicable o se acuerde por escrito,
 * el programa distribuido con arreglo a la Licencia se distribuye «TAL CUAL»,
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ni expresas ni implícitas.
 * Véase la Licencia en el idioma concreto que rige los permisos y limitaciones
 * que establece la Licencia.
 */
function(e){jQuery.rup_table.registerPlugin("multiselection",{loadOrder:8,preConfiguration:function(e){var t=this;t.rup_table("preConfigureMultiselection",e)},postConfiguration:function(e){var t=this;e.multiselect===!0&&t.rup_table("postConfigureMultiselection",e)}}),jQuery.fn.rup_table("extend",{preConfigureMultiselection:function(e){var t=this;e.multiselect=!0,e.multiselectWidth=40,e.core.operations.clone.enabled=function(){return 1===e.multiselection.numSelected},e.getActiveLineId=function(){var e=this,t=e.data("settings"),i=jQuery.proxy(jQuery.jgrid.getCurrPos,e[0])();return jQuery.inArray(t.multiselection.rowForEditing,i[1])},e.getActiveRowId=function(){var e=this,t=e.data("settings");return t.multiselection.rowForEditing},e.getSelectedRows=function(){var e=this,t=e.data("settings");return t.multiselection.selectedAll!==!0?t.multiselection.selectedIds:t.multiselection.deselectedIds},e.getSelectedLines=function(){var e=this,t=e.data("settings"),i=parseInt(e.rup_table("getGridParam","page"),10);return t.multiselection.selectedAll!==!0?t.multiselection.selectedLinesPerPage[i]:t.multiselection.deselectedLinesPerPage[i]},t.on({"rupTable_serializeGridData.multiselection":function(i,r){function a(e){return e.rows+e.sidx+e.sord+e.filter!==void 0?jQuery.param(jQuery.extend({},e.filter,{rows:e.rows,sidx:e.sidx,sord:e.sord})):""}var n,o={};n=t.data("tmp.lastSearch"),void 0!==n&&n!==a(r)&&e&&e.multiselection&&e.multiselection.numSelected>0&&(o=t.rup_table("getSelectedIds"),jQuery.extend(!0,r,{multiselection:o})),t.data("tmp.lastSearch",a(r))},"rupTable_setSelection.multiselection":function(i,r,a,n){parseInt(t.rup_table("getGridParam","page"),10);if(jQuery.isArray(r))for(var o=0;o<r.length;o++)t._processSelectedRow(e,r[o],a);else t._processSelectedRow(e,r,a);return n===!0&&t.on("rupTable_serializeGridData.multiselection.reorderSelection",function(e,i){t.off("rupTable_serializeGridData.multiselection.reorderSelection"),jQuery.extend(!0,i,{multiselection:t.rup_table("getSelectedIds")})}),t.triggerHandler("rupTable_multiselectionUpdated"),t.triggerHandler("jqGridSelectRow.rupTable.multiselection",[r,a]),!1}})},postConfigureMultiselection:function(t){var i=this;i._initializeMultiselectionProps(t),t.$selectAllCheck=jQuery("#cb_"+t.id),t.fncHasSelectedElements=function(){return t.multiselection.numSelected>0},t.getRowForEditing=function(){var e,t,i=this,r=i.data("settings"),a=parseInt(i.rup_table("getGridParam","page"),10),n=jQuery.proxy(jQuery.jgrid.getCurrPos,i[0])();return i._hasPageSelectedElements(a)?void 0!==r.multiselection.rowForEditing?r.multiselection.rowForEditing:(e=i._getSelectedLinesOfPage(a)[0],n[1][e-1]):(t=jQuery.proxy(r.fncGetNavigationParams,i)("first"),execute=t[1],newPage=t[5],newPageIndex=t[6],execute&&(i.trigger("reloadGrid",[{page:newPage}]),i.on("jqGridAfterLoadComplete.multiselection.editRow",function(e,t){var a=(jQuery.proxy(jQuery.jgrid.getCurrPos,i[0])(),i.getActiveRowId());i.jqGrid("editGridRow",a,r.editOptions),i.off("jqGridAfterLoadComplete.multiselection.editRow")})),!1)},t.getDetailTotalRowCount=function(){var e=this,t=e.data("settings");return t.multiselection.numSelected},t.getDetailCurrentRowCount=function(){var e,t,i=this,r=i.data("settings"),a=parseInt(i.rup_table("getGridParam","page"),10),n=jQuery.proxy(jQuery.jgrid.getCurrPos,i[0])(),o=parseInt(i.rup_table("getGridParam","rowNum"),10),s=0;if(r.multiselection.selectedAll){s=a>1?(a-1-r.multiselection.deselectedPages.length)*o:0;for(var l=0;l<r.multiselection.deselectedPages.length&&r.multiselection.deselectedPages[l]!==a;l++)s+=o-r.multiselection.deselectedLinesPerPage[r.multiselection.deselectedPages[l]].length;s+=jQuery.inArray(n[0]+1,i._getSelectedLinesOfPage(a))+1}else{e=jQuery.inArray(a,r.multiselection.selectedPages),t=r.multiselection.selectedPages[e];for(var l=1;l<t;l++)void 0!==r.multiselection.selectedLinesPerPage[l]&&(s+=r.multiselection.selectedLinesPerPage[l].length);s+=jQuery.inArray(n[0]+1,r.multiselection.selectedLinesPerPage[t])+1}return s},t.fncGetNavigationParams=function(t){var i,r,a=this,n=a.data("settings"),o=!1,s=!1,l=0,d=0,u=jQuery.proxy(jQuery.jgrid.getCurrPos,a[0])(),c=parseInt(a.rup_table("getGridParam","page"),10),p=c,h=parseInt(Math.ceil(a.rup_table("getGridParam","records")/a.rup_table("getGridParam","rowNum")),10);switch(u[0]=parseInt(u[0],10),e("#"+n.formEdit.feedbackId,n.formEdit.$detailForm).hide(),t){case"first":if(o=!0,n.multiselection.selectedAll){for(var f=1;f<=h;f++)if(a._hasPageSelectedElements(f)){f!==c&&(p=f,s=!0);break}}else n.multiselection.selectedPages[0]!==c&&(s=!0,p=n.multiselection.selectedPages[0]);l=a._getFirstSelectedElementOfPage(p),d=l;break;case"prev":if(o=!0,r=a._getSelectedLinesOfPage(c),i=jQuery.inArray(u[0]+1,r),0===i){s=!0;for(var f=c-1;f>=0;f--)if(a._hasPageSelectedElements(f)){p=f,r=a._getSelectedLinesOfPage(f),l=r[r.length-1];break}}else l=r[i-1];d=l;break;case"next":if(o=!0,r=a._getSelectedLinesOfPage(c),i=jQuery.inArray(u[0]+1,r),i===r.length-1){s=!0;for(var f=c+1;f<=h;f++)if(a._hasPageSelectedElements(f)){p=f,r=a._getSelectedLinesOfPage(f),l=r[0];break}}else l=r[i+1];d=l;break;case"last":if(o=!0,n.multiselection.selectedAll){for(var f=h;f>0;f--)if(a._hasPageSelectedElements(f)){f!==c&&(p=f,s=!0);break}}else n.multiselection.selectedPages[n.multiselection.selectedPages.length-1]!==c&&(s=!0,p=n.multiselection.selectedPages[n.multiselection.selectedPages.length-1]);r=a._getSelectedLinesOfPage(p),l=r[r.length-1],d=l}return[t,o,s,l-1,u,p,d-1]},t.doNavigation=function(e,t,i,r,a,n,o){var s,t,i,r,a,n,o,l,d=this,u=d.data("settings"),c=rp_ge[d.attr("id")];jQuery.isArray(e)&&(s=e[0],t=e[1],i=e[2],r=e[3],a=e[4],n=e[5],o=e[6],t&&(d.rup_table("hideFormErrors",u.formEdit.$detailForm),d.triggerHandler("jqGridAddEditClickPgButtons",[s,u.formEdit.$detailForm,a[1][a[r]]]),i?(d.trigger("reloadGrid",[{page:n}]),d.on("jqGridAfterLoadComplete.pagination",function(e,t){var i=jQuery.proxy(jQuery.jgrid.getCurrPos,d[0])(),r=i[1][o];jQuery.proxy(jQuery.jgrid.fillData,d[0])(r,d[0],u.formEdit.$detailForm.attr("id"),u.opermode),jQuery.proxy(jQuery.jgrid.updateNav,d[0])(),u.multiselection.rowForEditing=r,d.rup_table("clearHighlightedEditableRows"),d.rup_table("highlightEditableRow",d.jqGrid("getInd",r,!0)),d.off("jqGridAfterLoadComplete.pagination")})):(jQuery.proxy(jQuery.jgrid.fillData,d[0])(a[1][r],d[0],u.formEdit.$detailForm.attr("id"),u.opermode),jQuery.proxy(jQuery.jgrid.updateNav,d[0])(),u.multiselection.rowForEditing=a[1][r],d.rup_table("clearHighlightedEditableRows"),d.rup_table("highlightEditableRow",d.jqGrid("getInd",a[1][r],!0))),d.triggerHandler("jqGridAddEditAfterClickPgButtons",[s,u.formEdit.$detailForm,a[1][a[r]]]),l=void 0!==c?c.afterclickPgButtons:u.afterclickPgButtons,jQuery.isFunction(l)&&c.fncAfterclickPgButtons.call(d,s,u.formEdit.$detailForm,a[1][a[r]])))},i.on({"jqGridSelectRow.rupTable.multiselection":function(e,r,a,n){var o,s,l,d,u,c;if(n!==!1){if(void 0!==n&&jQuery(n.target).hasClass("treeclick"))return!1;if(jQuery.rup.isCtrlPressed()!==!0&&jQuery.rup.isShiftPressed()!==!0||window.getSelection().removeAllRanges(),jQuery.rup.isCtrlPressed()||jQuery.rup.isShiftPressed()||t.multiboxonly!==!0||void 0===n||void 0!==n.originalEvent&&jQuery(n.originalEvent.target).is(":checkbox")&&jQuery(n.originalEvent.target).attr("id").indexOf("jqg_")!==-1||i.rup_table("deselectRemainingRows"),jQuery.rup.isShiftPressed()===!0){l=i.jqGrid("getInd",r,!1),s=i.rup_table("getActiveLineId"),s<l?(d=l-1,u=s+1):(d=s,u=l),c=i.jqGrid("getDataIDs");for(var p=u;p<d;p++)i._processSelectedRow(t,c[p],a),i.rup_table("highlightRowAsSelected",jQuery(i.jqGrid("getInd",c[p],!0)))}i._processSelectedRow(t,r,a),i.rup_table("updateSelectedRowNumber"),t.$internalFeedback.rup_feedback("close"),i.rup_table("clearHighlightedEditableRows"),a?(t.multiselection.rowForEditing=r,i.rup_table("highlightEditableRow",i.jqGrid("getInd",r,!0))):(o=parseInt(i.rup_table("getGridParam","page"),10),i._hasPageSelectedElements(o)&&i.rup_table("highlightFirstEditableRow"))}},"jqGridDblClickRow.rupTable.multiselection":function(e,t,r,a,n){i.rup_table("setSelection",t,!0),i.rup_table("clearHighlightedEditableRows"),i.rup_table("highlightEditableRow",i.jqGrid("getInd",t,!0))},"jqGridGridComplete.rup_table.multiselection":function(t){var i=e(this),r=i.data("settings");0===i.rup_table("getGridParam","records")?jQuery(jQuery("#cb_"+i.attr("id"),r.core.$tableDiv)[0]).attr("disabled","disabled"):jQuery(jQuery("#cb_"+i.attr("id"),r.core.$tableDiv)[0]).removeAttr("disabled")},"jqGridLoadComplete.rupTable.multiselection":function(r,a){var n,o,s,l,d,u,c,p,h,f=i[0],g=(f.p,i.rup_table("getGridParam","page"));i.rup_table("getGridParam","rowNum"),t.multiselection.selectedRowsPerPage[g],t.multiselection.deselectedRowsPerPage[g]||[];if(void 0!==a.reorderedSelection&&null!==a.reorderedSelection){i._initializeMultiselectionProps(t),t.multiselection.selectedAll=a.selectedAll,t.multiselection.selectedAll===!0?(d=t.multiselection.deselectedRowsPerPage,u=t.multiselection.deselectedLinesPerPage,c=t.multiselection.deselectedIds,p=t.multiselection.deselectedRows,h=t.multiselection.deselectedPages,t.multiselection.numSelected=a.records-a.reorderedSelection.length):(d=t.multiselection.selectedRowsPerPage,u=t.multiselection.selectedLinesPerPage,c=t.multiselection.selectedIds,p=t.multiselection.selectedRows,h=t.multiselection.selectedPages,t.multiselection.numSelected=a.reorderedSelection.length);for(var m=0;m<a.reorderedSelection.length;m++){n=a.reorderedSelection[m],o=n.page,s=n.pageLine;for(var v="",b=0;b<t.primaryKey.length;b++)v+=n.pk[t.primaryKey[b]]+t.multiplePkToken;l=v.substr(0,v.length-1),void 0===d[o]&&(d[o]=[],u[o]=[]),jQuery.inArray(l,c)===-1&&(c.push(l),p.push({id:l,page:o}),d[o].push(l),u[o].push(s),d[o].length>0&&jQuery.inArray(o,h)===-1&&jQuery.rup_utils.insertSorted(h,o))}}i.triggerHandler("rupTable_multiselectionUpdated"),t.$internalFeedback.rup_feedback("close"),i._hasPageSelectedElements(g)&&(void 0!==t.multiselection.rowForEditing&&jQuery.inArray(t.multiselection.rowForEditing,i.jqGrid("getDataIDs"))!==-1?i.rup_table("highlightEditableRow",jQuery(i.jqGrid("getInd",t.multiselection.rowForEditing,!0)),!0):i.rup_table("highlightFirstEditableRow"));var _=jQuery("[id='"+t.id+"_cb']");if(t.multiselection.headerContextMenu_enabled&&0===_.find("a").length&&(_.find("input").css("margin-right","1em"),i._addArrow(_.find("input"))),i.find(".cbox").css("margin-right","1em"),t.multiselection.rowContextMenu_enabled){var y=void 0!==t.jerarquia,x=jQuery.isEmptyObject(t.multiselection.rowContextMenu.items);e.each(i.find(".cbox"),function(t,r){i._addArrow(jQuery(r)),y&&x&&e(r).parents("tr").find(".treeclick").hasClass("tree-leaf")&&jQuery(this).next("a").addClass("ui-state-disabled").off("click")})}},"jqGridSelectAll.rupTable.multiselection":function(r,a,n){var o,s,l,d,u,c,p,h=i.rup_table("getGridParam","page");i.triggerHandler("rupTable_internalFeedbackClose"),p=0;for(var f=0;f<a.length;f++)a[f].indexOf(t.id+"ghead_")===-1&&(i._processSelectedRow(t,a[f],n),p++);o=jQuery.rup.i18nTemplate(jQuery.rup.i18n.base,"rup_grid.selectMsg","<b>"+p+"</b>","<b>"+h+"</b>"),s=jQuery.rup.i18nTemplate(jQuery.rup.i18n.base,"rup_grid.deselectMsg","<b>"+p+"</b>","<b>"+h+"</b>"),n?(l=i._getRemainingRecordNum(t,a),0!==l?(d=jQuery.rup.i18nTemplate(jQuery.rup.i18n.base,"rup_table.selectRestMsg",l),u=jQuery.rup.i18nTemplate(jQuery.rup.i18n.base,"rup_table.templates.multiselection.selectRemainingRecords",i[0].id,d,jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_grid.selectAll")),i.rup_table("showFeedback",t.$internalFeedback,o+u,"alert")):i.rup_table("showFeedback",t.$internalFeedback,o,"alert"),e("#rup_grid_"+i[0].id+"_selectAll").on("click",function(e){i.rup_table("selectRemainingRows")}),i.rup_table("highlightFirstEditableRow")):(i.rup_table("clearHighlightedEditableRows"),t.multiselection.numSelected>0?(d=jQuery.rup.i18nTemplate(jQuery.rup.i18n.base,"rup_table.deselectRestMsg",t.multiselection.numSelected),c=jQuery.rup.i18nTemplate(jQuery.rup.i18n.base,"rup_table.templates.multiselection.deselectRemainingRecords",i[0].id,d,jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_grid.deSelectAll")),i.rup_table("showFeedback",t.$internalFeedback,s+c,"alert")):i.rup_table("showFeedback",t.$internalFeedback,s,"alert"),e("#rup_grid_"+i[0].id+"_deselectAll").on("click",function(e){i.rup_table("deselectRemainingRows")})),i.rup_table("updateSelectedRowNumber")},"rupTableAfterSearchNav.rupTable.multiselection rupTableSearchSuccess.rupTable.multiselection rupTableAfterDelete.rupTable.multiselection":function(){var t=e(this);t.rup_table("resetSelection")},"rupTable_multiselectionUpdated.multiselection":function(){var t,i=e(this),r=i[0],a=i.rup_table("getGridParam","page"),n=i.data("settings"),o=r.p,s=i.rup_table("getGridParam","rowNum"),l=n.multiselection.selectedRowsPerPage[a],d=n.multiselection.deselectedRowsPerPage[a]||[];if(i.triggerHandler("rupTable_internalFeedbackClose"),n.multiselection.selectedAll){o.selarrrow=[],t=r.rows;for(var u=0;u<t.length;u++)jQuery.inArray(t[u].id,d)===-1?i.rup_table("highlightRowAsSelected",e(t[u])):i.rup_table("clearHighlightedRowAsSelected",e(t[u]));0===d.length&&n.$selectAllCheck[o.useProp?"prop":"attr"]("checked",!0)}else if(l){t=r.rows,o.selarrrow=[];for(var u=0;u<t.length;u++)jQuery.inArray(t[u].id,l)!==-1?i.rup_table("highlightRowAsSelected",e(t[u])):i.rup_table("clearHighlightedRowAsSelected",e(t[u]));l.length===s&&n.$selectAllCheck[o.useProp?"prop":"attr"]("checked",!0)}i.rup_table("updateSelectedRowNumber")},"rupTable_beforeAddRow.multiselection":function(e,t){return i._checkSelectedElements(function(){i.jqGrid("editGridRow","new",t),i.rup_table("resetSelection"),i.rup_table("clearHighlightedEditableRows")}),!1},"jqGridAddEditAfterSubmit.rupTable.formEditing":function(e,t,r,a){"edit"!==a&&(i.rup_table("resetSelection"),i.rup_table("clearHighlightedEditableRows"))}}),t.multiboxonly===!0&&(t.multiselection.multiboxonly=!0),jQuery("body").on({"rup_ctrlKeyDown rup_shiftKeyDown":function(){return t.multiselection.multiboxonly===!0&&(i[0].p.multiboxonly=!1),!1},"rup_ctrlKeyUp rup_shiftKeyUp":function(){return t.multiselection.multiboxonly===!0&&(i[0].p.multiboxonly=!0),!1}}),jQuery.contextMenu("destroy","[id='"+t.id+"_cb']"),jQuery("[id='"+t.id+"_cb']").rup_contextMenu({trigger:"none",callback:t.multiselection.headerContextMenu.callback,items:i._headerContextMenuItems(t.multiselection.headerContextMenu,t),position:function(e,t,i){var r=this.offset();e.$menu.css({top:r.top+this.height(),left:r.left})}}),t.multiselection.rowContextMenu_enabled&&(jQuery.contextMenu("destroy","td[aria-describedby='"+t.id+"_cb']"),jQuery("td[aria-describedby='"+t.id+"_cb']").rup_contextMenu({trigger:"none",callback:t.multiselection.rowContextMenu.callback,items:i._rowContextMenuItems(t.multiselection.rowContextMenu,t),position:function(e,t,i){var r=this.offset();e.$menu.css({top:r.top+this.height(),left:r.left})}}))}}),jQuery.fn.rup_table("extend",{getSelectedIds:function(){var e=this,t=e.data("settings"),i={};return t.multiselection.selectedAll?(t.multiselection.deselectedIds.length>0&&jQuery.extend(!0,i,{selectedIds:t.multiselection.deselectedIds}),jQuery.extend(!0,i,{selectedAll:!0})):(void 0!=t.multiselection.selectedIds&&t.multiselection.selectedIds.length>0&&jQuery.extend(!0,i,{selectedIds:t.multiselection.selectedIds}),jQuery.extend(!0,i,{selectedAll:!1})),i},clearHighlightedEditableRows:function(){var e=this,t=e.data("settings");e.find("td[aria-describedby='"+t.id+"_rupInfoCol'] span.ui-icon.ui-icon-pencil").removeClass("ui-icon-pencil")},highlightFirstEditableRow:function(){var e,t,i=this,r=i.data("settings"),a=parseInt(i.rup_table("getGridParam","page"),10);i.rup_table("clearHighlightedEditableRows"),i._hasPageSelectedElements(a)&&(e=i._getFirstSelectedElementOfPage(a),t=i.jqGrid("getDataIDs")[e-1],r.multiselection.rowForEditing=t,i.rup_table("highlightEditableRow",i.jqGrid("getInd",t,!0)))},highlightEditableRow:function(e){var t=this,i=t.data("settings");e=jQuery(e),e.find("td[aria-describedby='"+i.id+"_rupInfoCol'] span").addClass("ui-icon ui-icon-rupInfoCol ui-icon-pencil")},refreshSelection:function(){var e=this;e.triggerHandler("rupTable_multiselectionUpdated")},resetSelection:function(){var e=this,t=e.data("settings");e.jqGrid("resetSelection"),e._initializeMultiselectionProps(t),e.triggerHandler("rupTable_multiselectionUpdated")},selectAllRows:function(e){var t,i,r=this,a=r.data("settings");r.rup_table("selectRemainingRows"),jQuery("#cb_"+a.id).attr("checked","checked"),t=r.jqGrid("getDataIDs");for(var n=0;n<t.length;n++)i=jQuery(r.jqGrid("getInd",t[n],!0)),r.rup_table("highlightRowAsSelected",i);r.rup_table("highlightFirstEditableRow")},selectRemainingRows:function(e){var t=this,i=t.data("settings");t._initializeMultiselectionProps(i),i.multiselection.selectedAll=!0,i.multiselection.numSelected=t.rup_table("getGridParam","records"),t.rup_table("updateSelectedRowNumber"),i.$internalFeedback.rup_feedback("close")},deselectAllRows:function(e){var t,i,r=this,a=r.data("settings"),n=r[0].p;r.rup_table("deselectRemainingRows"),r.rup_table("clearHighlightedEditableRows"),jQuery("#cb_"+a.id).removeAttr("checked"),t=r.jqGrid("getDataIDs"),n.selarrrow=[];for(var o=0;o<t.length;o++)i=jQuery(r.jqGrid("getInd",t[o],!0)),r.rup_table("clearHighlightedRowAsSelected",i)},deselectRemainingRows:function(e){var t=this,i=t.data("settings");t._initializeMultiselectionProps(i),t.rup_table("updateSelectedRowNumber"),i.$internalFeedback.rup_feedback("close")},updateSelectedRowNumber:function(){var t=e(this),i=t.data("settings");e("div .ui-paging-selected",i.$pager).html(i.multiselection.numSelected+" "+jQuery.rup.i18nParse(jQuery.rup.i18n.base,"rup_grid.pager.selected")),t.triggerHandler("rupTableSelectedRowNumberUpdated")}}),jQuery.fn.rup_table("extend",{_addArrow:function(t){jQuery(t).after(jQuery("<a />").attr("href","javascript:void(0)").addClass("ui-icon rup-jerarquia_checkmenu_arrow").on("click",function(t){e(this).parents("th, td").contextMenu()}))},_checkSelectedElements:function(t){var i=e(this),r=(i[0],i.rup_table("getGridParam","page"),i.data("settings"));r.multiselection.numSelected>0?e.rup_messages("msgConfirm",{message:e.rup.i18nParse(e.rup.i18n.base,"rup_maint.checkSelectedElems"),title:e.rup.i18nParse(e.rup.i18n.base,"rup_maint.changes"),OKFunction:function(){t.call()}}):t.call()},_headerContextMenuItems:function(t,i){var r=this,a={};return t.selectAllPage&&jQuery.extend(a,{selectAllPage:{name:e.rup.i18nParse(e.rup.i18n.base,"rup_table.plugins.multiselection.selectAllPage"),icon:"check",disabled:function(e,t){return r._getSelectedLinesOfPage(parseInt(r.rup_table("getGridParam","page"))).length===r.jqGrid("getGridParam","reccount")},callback:function(t,r){e("[id='cb_"+i.id+"']").attr("checked","checked").click().attr("checked","checked")}}}),t.deselectAllPage&&jQuery.extend(a,{deselectAllPage:{name:e.rup.i18nParse(e.rup.i18n.base,"rup_table.plugins.multiselection.deselectAllPage"),icon:"uncheck",disabled:function(e,t){return 0===r._getSelectedLinesOfPage(parseInt(r.rup_table("getGridParam","page"))).length},callback:function(t,r){e("[id='cb_"+i.id+"']").removeAttr("checked").click().removeAttr("checked")}}}),t.separator&&jQuery.extend(a,{separator:""}),t.selectAll&&jQuery.extend(a,{selectAll:{name:e.rup.i18nParse(e.rup.i18n.base,"rup_table.plugins.multiselection.selectAll"),icon:"check_all",disabled:function(e,t){return i.multiselection.numSelected===r.rup_table("getGridParam","records")},callback:function(e,t){r.rup_table("selectAllRows")}}}),t.deselectAll&&jQuery.extend(a,{deselectAll:{name:e.rup.i18nParse(e.rup.i18n.base,"rup_table.plugins.multiselection.deselectAll"),icon:"uncheck_all",disabled:function(e,t){return 0===i.multiselection.numSelected},callback:function(e,t){r.rup_table("deselectAllRows")}}}),jQuery.isEmptyObject(t.items)||jQuery.extend(a,t.items),a},_rowContextMenuItems:function(t,i){var r=this,a={};return void 0!==i.jerarquia&&i.jerarquia.contextMenu&&(t.selectChild&&jQuery.extend(a,{selectChild:{name:e.rup.i18nParse(e.rup.i18n.base,"rup_table.plugins.jerarquia.selectChild"),icon:"child",callback:function(e,t){r._getJerarquiaChildren(this,e,t)}}}),t.selectDescendent&&jQuery.extend(a,{selectDescendent:{name:e.rup.i18nParse(e.rup.i18n.base,"rup_table.plugins.jerarquia.selectDescendent"),icon:"descendent",callback:function(e,t){r._getJerarquiaChildren(this,e,t)}}}),t.separator&&jQuery.extend(a,{separator:""}),t.deselectChild&&jQuery.extend(a,{deselectChild:{name:e.rup.i18nParse(e.rup.i18n.base,"rup_table.plugins.jerarquia.deselectChild"),icon:"uncheck",callback:function(e,t){r._getJerarquiaChildren(this,e,t)}}}),t.deselectDescendent&&jQuery.extend(a,{deselectDescendent:{name:e.rup.i18nParse(e.rup.i18n.base,"rup_table.plugins.jerarquia.deselectDescendent"),icon:"uncheck",callback:function(e,t){r._getJerarquiaChildren(this,e,t)}}})),jQuery.isEmptyObject(t.items)||jQuery.extend(a,t.items),a},_refreshSelectedElements:function(e,t,i,r){var a,n,o,s,l;if(e.multiselection.selectedAll!==!0?(a=e.multiselection.selectedRowsPerPage,n=e.multiselection.selectedLinesPerPage,o=e.multiselection.selectedIds,s=e.multiselection.selectedRows,l=e.multiselection.selectedPages):(a=e.multiselection.deselectedRowsPerPage,n=e.multiselection.deselectedLinesPerPage,o=e.multiselection.deselectedIds,s=e.multiselection.deselectedRows,l=e.multiselection.deselectedPages,t=!t),t)jQuery.inArray(i,o)===-1&&(e.multiselection.selectedAll!==!0?e.multiselection.numSelected++:e.multiselection.numSelected--,void 0===a[r.page]&&(a[r.page]=[],n[r.page]=[]),o.push(i),jQuery.rup_utils.insertSorted(n[r.page],r.pageLine),s.push({id:i,page:r.page}),a[r.page].splice(r.pageLine,0,i),a[r.page].length>0&&jQuery.inArray(r.page,l)===-1&&jQuery.rup_utils.insertSorted(l,r.page));else if(jQuery.inArray(i,o)!==-1){e.multiselection.selectedAll!==!0?e.multiselection.numSelected--:e.multiselection.numSelected++,o.splice(jQuery.inArray(i,o),1),n[r.page].splice(jQuery.inArray(r.pageLine,n[r.page]),1);var d=JSON.stringify({id:i,page:r.page}),u=null;jQuery.grep(s,function(e,t){JSON.stringify(e)===d&&(u=t)}),s.splice(u,1),a[r.page].splice(jQuery.inArray(i,a[r.page]),1),0==a[r.page].length&&jQuery.inArray(r.page,l)!==-1&&l.splice(jQuery.inArray(r.page,l),1)}},_hasPageSelectedElements:function(e){var t,i=this,r=i.data("settings"),a="string"==typeof e?parseInt(e,10):e;return r.multiselection.selectedAll?(t=parseInt(i.rup_table("getGridParam","rowNum"),10),jQuery.inArray(a,r.multiselection.deselectedPages)===-1||r.multiselection.deselectedLinesPerPage[a].length!==t):jQuery.inArray(a,r.multiselection.selectedPages)!==-1},_initializeMultiselectionProps:function(e){void 0===e.multiselection&&(e.multiselection={}),e.multiselection.selectedAll=!1,e.multiselection.numSelected=0,e.multiselection.selectedRowsPerPage=[],e.multiselection.selectedLinesPerPage=[],e.multiselection.selectedRows=[],e.multiselection.selectedIds=[],e.multiselection.selectedPages=[],e.multiselection.deselectedRowsPerPage=[],e.multiselection.deselectedLinesPerPage=[],e.multiselection.deselectedRows=[],e.multiselection.deselectedIds=[],e.multiselection.deselectedPages=[]},_getFirstSelectedElementOfPage:function(e){var t,i=this,r=i.data("settings"),a="string"==typeof e?parseInt(e,10):e;if(!r.multiselection.selectedAll)return jQuery.inArray(a,r.multiselection.selectedPages)!==-1&&r.multiselection.selectedLinesPerPage[a][0];if(jQuery.inArray(a,r.multiselection.deselectedPages)===-1)return 1;if(t=parseInt(i.rup_table("getGridParam","rowNum"),10),r.multiselection.deselectedLinesPerPage[a].length===t)return!1;for(var n=1;n<=t;n++)if(jQuery.inArray(n,r.multiselection.deselectedLinesPerPage[a])===-1)return n},_getRemainingRecordNum:function(e,t){var i=this,r=i.rup_table("getGridParam","records"),a=i.rup_table("getGridParam","reccount"),n=t.length,o=e.multiselection.numSelected,s=r-a!==0?r-a-(o-n):0;return s},_getSelectedLinesOfPage:function(e){var t,i,r,a=this,n=a.data("settings"),o=[];if(n.multiselection.selectedAll){t=parseInt(a.rup_table("getGridParam","rowNum"),10),i=a.rup_table("getGridParam","records"),r=parseInt(Math.ceil(i/t,10)),e===r&&(t=i-(r-1)*t);for(var s=1;s<=t;s++)o[s-1]=s;return jQuery.inArray(e,n.multiselection.deselectedPages)===-1?o:n.multiselection.deselectedLinesPerPage[e].length===t?[]:jQuery.grep(o,function(t){return jQuery.inArray(t,n.multiselection.deselectedLinesPerPage[e])===-1})}return jQuery.inArray(e,n.multiselection.selectedPages)===-1?[]:n.multiselection.selectedLinesPerPage[e]},_processSelectedRow:function(e,t,i){var r,a,n,o,s=this,l=s.rup_table("getGridParam","page"),d=parseInt(l);i?e.multiselection.selectedAll?(a=jQuery.inArray(t,e.multiselection.deselectedIds),a!=-1&&(e.multiselection.deselectedIds.splice(a,1),e.multiselection.deselectedRows.splice(a,1),n=jQuery.inArray(t,e.multiselection.deselectedRowsPerPage[l]),e.multiselection.deselectedRowsPerPage[l].splice(n,1),e.multiselection.deselectedLinesPerPage[l].splice(n,1),0===e.multiselection.deselectedRowsPerPage[l].length&&(o=jQuery.inArray(d,e.multiselection.deselectedPages),o!==-1&&e.multiselection.deselectedPages.splice(o,1)),e.multiselection.numSelected++)):(void 0===e.multiselection.selectedRowsPerPage[l]&&(e.multiselection.selectedRowsPerPage[l]=[],e.multiselection.selectedLinesPerPage[l]=[]),jQuery.inArray(t,e.multiselection.selectedIds)===-1&&(e.multiselection.selectedIds.push(t),e.multiselection.selectedRows.push({id:t,page:l}),r=jQuery.rup_utils.insertSorted(e.multiselection.selectedLinesPerPage[l],s._getLineIndex(t)),e.multiselection.selectedRowsPerPage[l].splice(r,0,t),e.multiselection.selectedRowsPerPage[l].length>0&&jQuery.inArray(d,e.multiselection.selectedPages)===-1&&jQuery.rup_utils.insertSorted(e.multiselection.selectedPages,d),e.multiselection.numSelected++)):e.multiselection.selectedAll?(void 0===e.multiselection.deselectedRowsPerPage[l]&&(e.multiselection.deselectedRowsPerPage[l]=[],e.multiselection.deselectedLinesPerPage[l]=[]),jQuery.inArray(t,e.multiselection.deselectedIds)===-1&&(e.multiselection.deselectedIds.push(t),e.multiselection.deselectedRows.push({id:t,page:l}),r=jQuery.rup_utils.insertSorted(e.multiselection.deselectedLinesPerPage[l],s._getLineIndex(t)),e.multiselection.deselectedRowsPerPage[l].splice(r,0,t),e.multiselection.deselectedRowsPerPage[l].length>0&&jQuery.inArray(d,e.multiselection.deselectedPages)===-1&&jQuery.rup_utils.insertSorted(e.multiselection.deselectedPages,d),e.multiselection.numSelected--)):(index=jQuery.inArray(t,e.multiselection.selectedIds),index!=-1&&(e.multiselection.selectedIds.splice(index,1),e.multiselection.selectedRows.splice(index,1),n=jQuery.inArray(t,e.multiselection.selectedRowsPerPage[l]),e.multiselection.selectedRowsPerPage[l].splice(n,1),e.multiselection.selectedLinesPerPage[l].splice(n,1),0===e.multiselection.selectedRowsPerPage[l].length&&(o=jQuery.inArray(d,e.multiselection.selectedPages),o!==-1&&e.multiselection.selectedPages.splice(o,1)),e.multiselection.numSelected--)),s.rup_table("updateSelectedRowNumber")}}),jQuery.fn.rup_table.plugins.multiselection=jQuery.fn.rup_table.plugins.multiselection||{},jQuery.fn.rup_table.plugins.multiselection.defaults={showGridInfoCol:!0,formEdit:{autoselectFirstRecord:!1},inlineEdit:{autoselectFirstRecord:!1},multiselection:{defaultEditableInfoCol:{name:"infoEditable",index:"infoEditable",editable:!1,width:"15em",search:!1},headerContextMenu_enabled:!0,headerContextMenu:{selectAllPage:!0,deselectAllPage:!0,separator:!0,selectAll:!0,deselectAll:!0,items:{}},rowContextMenu_enabled:!1,rowContextMenu:{selectChild:!0,selectDescendent:!0,separator:!0,deselectChild:!0,deselectDescendent:!0,items:{}}}},jQuery.fn.rup_table.defaults.multiselection={loadBeforeSend:function(e,t){e.setRequestHeader("JQGridModel","true"),e.setRequestHeader("Content-Type","application/json")}}}(jQuery),/*!
 * Copyright 2013 E.J.I.E., S.A.
 *
 * Licencia con arreglo a la EUPL, Versión 1.1 exclusivamente (la «Licencia»);
 * Solo podrá usarse esta obra si se respeta la Licencia.
 * Puede obtenerse una copia de la Licencia en
 *
 *      http://ec.europa.eu/idabc/eupl.html
 *
 * Salvo cuando lo exija la legislación aplicable o se acuerde por escrito, 
 * el programa distribuido con arreglo a la Licencia se distribuye «TAL CUAL»,
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ni expresas ni implícitas.
 * Véase la Licencia en el idioma concreto que rige los permisos y limitaciones
 * que establece la Licencia.
 */
function(e){e.rup_table.registerPlugin("jerarquia",{loadOrder:11,preConfiguration:function(e){var t=this;return t.rup_table("preConfigurejerarquia",e)},postConfiguration:function(e){var t=this;return t.rup_table("postConfigurejerarquia",e)}}),e.fn.rup_table("extend",{preConfigurejerarquia:function(t){var i=this,r=t.jerarquia;i.jqGrid("setGridParam",{postData:{jerarquia:{}}}),t.treeGrid=!0,t.rowTotal=0,t.treeGridModel="adjacency",t.treeIcons=r.icons;var a=i.jqGrid.setTreeGrid;if(e.jgrid.extend({setTreeGrid:function(){a.call(i),i[0].p.altRows=!0,i[0].p.pgbuttons=!0,i[0].p.pginput=!0,i[0].p.rowList=t.rowList,t.multiselect&&(i[0].p.multiselect=!0)}}),null===t.filter.childrenUrl&&(t.filter.childrenUrl=t.baseUrl+"Children"),t.ExpandColumn=r.column,t.multiselect)for(key in t.colModel)if(t.colModel[key].name===t.ExpandColumn){key=parseInt(key)+1,void 0===t.colModel[key]&&(t.colNames[key]="jerarquia_multiselect",t.colModel[key]={name:"jerarquia_multiselect",hidden:!0}),t.ExpandColumn=t.colModel[key].name;break}t.colNames=e.merge(["level"],t.colNames),t.colModel=e.merge([{name:"level",hidden:!0}],t.colModel),t.colNames=e.merge(["isLeaf"],t.colNames),t.colModel=e.merge([{name:"isLeaf",hidden:!0}],t.colModel),t.colNames=e.merge(["parentNodes"],t.colNames),t.colModel=e.merge([{name:"parentNodes",hidden:!0}],t.colModel),t.colNames=e.merge(["filter"],t.colNames),t.colModel=e.merge([{name:"filter",hidden:!0}],t.colModel),e(i).data("tree",[]),i.on({"rupTable_serializeGridData.multiselection":function(t,i){e.extend(!0,i,{jerarquia:{token:r.token}}),e.isArray(i.jerarquia.tree)&&0===i.jerarquia.tree.length&&(i.jerarquia.tree="")},"jqGridAddEditAfterComplete.rupTable.jerarquia":function(){i[0].p.treeGrid=!1},"jqGridAddEditBeforeSubmit.rupTable.jerarquia jqGridBeforeRequest.rupTable.jerarquia":function(){i[0].p.treeGrid=!0},"jqGridLoadComplete.rupTable.jerarquia":function(a,n){for(var o=e(i).data("tree"),s=o.length,l=0;l<s;l++)e("[id='"+o[l]+"'] .tree-wrap > div").removeClass("tree-leaf "+t.treeIcons.leaf).addClass("tree-minus "+t.treeIcons.minus);for(var d=i.rup_table("getGridParam","data"),u=d.length,c=e("<div />").addClass("rup-jerarquia_filter ui-icon").addClass(r.icons.filter).text(e.rup.i18nParse(e.rup.i18n.base,"rup_grid_jerarquia.icons.filtered")),l=0;l<u;l++){var p=e.jgrid.getAccessor(d[l],i.rup_table("getGridParam","localReader").id),h=e("tr[id='"+p+"'] > td .tree-wrap");d[l].filter&&h.prepend(c.clone()),r.parentNodesTooltip&&h.parent().rup_tooltip({content:{text:i._parseParentNodes(d[l].parentNodes)}})}e(".tree-plus, .tree-minus").off("click"),e(".tree-plus, .tree-minus").on("click",function(r){var a=e(this),n=i.rup_table("getGridParam","_index")[a.closest("tr.jqgrow")[0].id],s=i.rup_table("getGridParam","data")[n],l=e.jgrid.getAccessor(s,i.rup_table("getGridParam","localReader").id);a.hasClass(t.treeIcons.plus)?o.push(l):o.splice(e.inArray(l,o),1),e(i).data("tree",o),i.jqGrid("setGridParam",{postData:{jerarquia:{tree:o.toString()}}}),i.trigger("reloadGrid")}),i[0].p.treeGrid=!1}}),e.each(r.resetEvents,function(t,r){var a=e.isFunction(r[0])?r.shift():null,n="[id='"+r.join("'], [id='")+"']";e(n).on(t,function(e){null!==a&&a.call(i,e)!==!1||i.reset()});for(var o=0;o<r.length;o++)e._data(e("#"+r[o])[0],"events")[t]=e._data(e("#"+r[o])[0],"events")[t].reverse()}),t.multiselection.rowContextMenu_enabled=t.jerarquia.contextMenu},postConfigurejerarquia:function(e){e.jerarquia}}),e.fn.rup_table("extend",{reset:function(){e(this).data("tree",[]),e(this).jqGrid("setGridParam",{postData:{jerarquia:{tree:[]}}})}}),e.fn.rup_table("extend",{_parseParentNodes:function(e){var t=this.data("settings").jerarquia.parentNodesTooltipFnc,i=e.split(this.data("settings").jerarquia.token).slice(1);if(null===t){for(var r="",a="&nbsp;&nbsp;",n=0;n<i.length;n++)n!==i.length-1?(r+=i[n]+"<br/>"+a+"└&nbsp;",a+="&nbsp;&nbsp;&nbsp;"):r+="<b>"+i[n]+"</b>";return r}return t.call(this,i)},_getJerarquiaChildren:function(t,i,r){var a=this,n=a.data("settings"),o=a.rup_table("getRowData",t.parent().attr("id")),s={jerarquia:{parentId:e.jgrid.getAccessor(o,n.primaryKeyCol),child:i.toLowerCase().indexOf("child")!=-1},filter:a.rup_table("getFilterParams")};e.extend(!0,s,a.rup_table("getGridParam","postData"));var l=e.isArray(n.primaryKey)?n.primaryKey[0]:n.primaryKey;e.rup_ajax({url:n.filter.childrenUrl,dataType:"json",data:e.toJSON(s),type:"POST",async:!1,contentType:"application/json",beforeSend:function(t){t.setRequestHeader("JQGridModel",!0),t.setRequestHeader("RUP",e.toJSON({primaryKey:l}))},success:function(e,t){for(var r=e.children,o=r.length,s=i.indexOf("deselect")==-1,d=0;d<o;d++){var u=r[d];rowPK=u.pk[l],a._refreshSelectedElements(n,s,rowPK,u)}a.triggerHandler("rupTable_multiselectionUpdated")},error:function(e,t,i){},complete:function(e,t){}})}}),e.fn.rup_table.plugins.jerarquia={},e.fn.rup_table.plugins.jerarquia.defaults={treedatatype:"json",formEdit:{addEditOptions:{reloadAfterSubmit:!0}},jerarquia:{token:"/",icons:{plus:"ui-icon-triangle-1-se",minus:"ui-icon-triangle-1-e",leaf:"ui-icon-none",filter:"ui-icon-star"},parentNodesTooltip:!0,parentNodesTooltipFnc:null,contextMenu:!0}}}(jQuery),/*!
 * Copyright 2013 E.J.I.E., S.A.
 *
 * Licencia con arreglo a la EUPL, Versión 1.1 exclusivamente (la «Licencia»);
 * Solo podrá usarse esta obra si se respeta la Licencia.
 * Puede obtenerse una copia de la Licencia en
 *
 *      http://ec.europa.eu/idabc/eupl.html
 *
 * Salvo cuando lo exija la legislación aplicable o se acuerde por escrito, 
 * el programa distribuido con arreglo a la Licencia se distribuye «TAL CUAL»,
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ni expresas ni implícitas.
 * Véase la Licencia en el idioma concreto que rige los permisos y limitaciones
 * que establece la Licencia.
 */
function(e){jQuery.rup_table.registerPlugin("masterDetail",{loadOrder:10,preConfiguration:function(e){var t=this;return t.rup_table("preConfigureMasterDetail",e)}}),jQuery.fn.rup_table("extend",{preConfigureMasterDetail:function(e){var t,i=this;t=jQuery(e.masterDetail.master),e.masterDetail.$master=t,i.on({"rupTable_serializeGridData.rupTable.masterDetail":function(e,t){var r=i.rup_table("getMasterTablePkObject");null!==r&&(jsonParam={filter:r},jQuery.extend(!0,t,jsonParam))},"jqGridAddEditBeforeSubmit.rupTable.masterDetail":function(e,t,r){var a=i.rup_table("getMasterTablePkObject");null!==a&&jQuery.extend(t,a)},"rupTable_searchBeforeSubmit.rupTable.masterDetail":function(e,t,r){var a=i.rup_table("getMasterTablePkObject");null!==a&&(jsonParam={filter:a},jQuery.extend(!0,r,jsonParam))}}),t.on({"jqGridSelectRow.rupTable.masterDetail":function(t,r,a){var n=i.data("tmp.masterDetail.lastRowid");void 0!==n&&n===r||(jQuery.inArray("filter",e.usePlugins)!==-1?(i.data("tmp.masterDetail.lastRowid",r),i.rup_table("showSearchCriteria"),i.rup_table("filter")):i.rup_table("reloadGrid"))},"jqGridAfterLoadComplete.multiselection.editRow":function(e,t){0===t.rows.length&&(i.removeData("tmp.masterDetail.lastRowid"),i.jqGrid("clearGridData"))}})}}),jQuery.fn.rup_table("extend",{getMasterTablePkObject:function(){function t(e,i){var r={},a=e.split(".");return 1===a.length?(r[e]=i,r):(r[a[0]]=t(e.substr(e.indexOf(".")+1),i),r)}var i=this,r=i.data("settings"),a=r.masterDetail.$master,n=a.rup_table("getSelectedRows"),o=r.masterDetail.masterPrimaryKey;if(e.isArray(o)&&o.length>0&&1===n.length){var s=a.rup_table("getGridParam","multiplePkToken"),l=n[0].split(s),d={};return l.length===o.length&&e.each(o,function(e,i){jQuery.extend(!0,d,t(i,l[e]))}),d}return 1===n.length?t(o,n[0]):0===n.length?null:void 0}}),jQuery.fn.rup_table.plugins.masterDetail={},jQuery.fn.rup_table.plugins.masterDetail.defaults={}}(jQuery),/*!
 * Copyright 2013 E.J.I.E., S.A.
 *
 * Licencia con arreglo a la EUPL, Versión 1.1 exclusivamente (la «Licencia»);
 * Solo podrá usarse esta obra si se respeta la Licencia.
 * Puede obtenerse una copia de la Licencia en
 *
 *      http://ec.europa.eu/idabc/eupl.html
 *
 * Salvo cuando lo exija la legislación aplicable o se acuerde por escrito, 
 * el programa distribuido con arreglo a la Licencia se distribuye «TAL CUAL»,
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ni expresas ni implícitas.
 * Véase la Licencia en el idioma concreto que rige los permisos y limitaciones
 * que establece la Licencia.
 */
function(e){jQuery.rup_table.registerPlugin("report",{loadOrder:11,preConfiguration:function(e){var t=this;return t.rup_table("preConfigureReport",e)},postConfiguration:function(e){var t=this;return t.rup_table("postConfigureReport",e)}}),jQuery.fn.rup_table("extend",{preConfigureReport:function(e){},postConfigureReport:function(t){var i,r=this,a=r.rup_table("getColModel"),n=t.report;i=r._getReportColumns(a,t),void 0===n.appendTo&&(n.appendTo=t.toolbar.id),jQuery.each(n.buttons[0].buttons,function(r,a){a.columns=e.extend(!0,{},n.columns,a.columns),void 0===a.columns.grid&&(a.columns.grid=t.id),void 0===a.columns.customNames&&(a.columns.customNames=i),void 0===a.columns.click&&(a.columns.click=function(){})}),n.fncGetGridParam=function(){var t=this,i=t.data("settings"),r={},a={};return jQuery.each(t.jqGrid("getGridParam","postData"),function(e,t){jQuery.inArray(e,i.report.sendPostDataParams)!==-1&&(r[e]=t)}),void 0!==i.filter&&void 0!==i.filter.$filterContainer&&(a=t.rup_table("getFilterParams")),jQuery.extend(!0,r,a),t.triggerHandler("rupTable_serializeReportData",[r]),e.rup_utils.unnestjson(r)},jQuery.rup_report(n)}}),jQuery.fn.rup_table("extend",{_getReportColumns:function(e,t){return jQuery.map(e,function(e,i){return jQuery.inArray(e.name,t.report.excludeColumns)===-1?e.name:null})}}),jQuery.fn.rup_table.plugins.report={},jQuery.fn.rup_table.plugins.report.defaults={report:{columns:{},excludeColumns:["rupInfoCol","cb"],sendPostDataParams:["_search","core","nd","page","rows","sidx","sord"]}}}(jQuery),/*!
 * Copyright 2013 E.J.I.E., S.A.
 *
 * Licencia con arreglo a la EUPL, Versión 1.1 exclusivamente (la «Licencia»);
 * Solo podrá usarse esta obra si se respeta la Licencia.
 * Puede obtenerse una copia de la Licencia en
 *
 *      http://ec.europa.eu/idabc/eupl.html
 *
 * Salvo cuando lo exija la legislación aplicable o se acuerde por escrito,
 * el programa distribuido con arreglo a la Licencia se distribuye «TAL CUAL»,
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ni expresas ni implícitas.
 * Véase la Licencia en el idioma concreto que rige los permisos y limitaciones
 * que establece la Licencia.
 */
function(e){jQuery.rup_table.registerPlugin("multifilter",{loadOrder:15,preConfiguration:function(e){var t=this;return t.rup_table("preConfigureMultifilter",e)},postConfiguration:function(e){var t=this;return t.rup_table("postConfigureMultifilter",e)}}),jQuery.fn.rup_table("extend",{preConfigureMultifilter:function(t){var i,r=this,a=(t.id,t.multifilter);a.$dropdownDialog=e("#"+t.id+"_multifilter_dropdownDialog"),a.dropdownDialogId=t.id+"_multifilter_dropdownDialog",i=r.rup_table("getMultifilterDialogTemplate",t),t.filter.$filterContainer.after(i),r.rup_table("configureMultifilter",t),t.multifilter.fncFilterName=function(e){return void 0==a.$comboLabel?void 0!==a.$filterDefaultName&&(e=a.$filterDefaultName+"  {"+e+"}   "):void 0!=a.$comboLabel&&t.$firstStartUp?""==a.$comboLabel.val()&&void 0!=a.$filterDefaultName&&void 0!==a.$filterDefaultName&&(e=a.$filterDefaultName+"  {"+e+"}   "):""!=a.$comboLabel.val()&&a.$filterWithName&&(a.$filterWithName=!1,e=a.$comboLabel.val()+"  {"+e+"}   "),e}},postConfigureMultifilter:function(t){var i=this,r=t.multifilter;t.filter.$filterButton.rup_button({dropdown:{dropdownIcon:"ui-icon-gear",dropdownDialog:r.dropdownDialogId,dropdownDialogConfig:{title:"<span class='rup-icon rup-icon-filter'/>"+e.rup.i18n.base.rup_table.plugins.multifilter.tittle,width:"450px",buttons:[{id:t.id+"_multifilter_BtnSave",text:e.rup.i18n.base.rup_table.plugins.multifilter.save,click:function(){if(i._checkLabel(t)){var a=i._createFilterFromForm(t),n=i.triggerHandler("rupTable_beforeAdd");if(n===!1||"stop"===n)return void r.$feedback.rup_feedback("set",e.rup.i18n.base.rup_table.plugins.multifilter.errorValidate,"error");i.rup_table("addFilter",a)}}},{id:t.id+"_multifilter_BtnApply",text:e.rup.i18n.base.rup_table.plugins.multifilter.apply,click:function(){if(t.$firstStartUp&&(t.$firstStartUp=!1),i._checkLabel(t)){r.$filterWithName=!0;var a=i._searchFilterInCombo(t);void 0!=a?(i.rup_table("cleanFilterForm"),i.triggerHandler("rupTable_multifilter_fillForm",a),i._fillForm(a),i.rup_table("filter"),r.$closeDialog.click()):r.$feedback.rup_feedback("set",e.rup.i18n.base.rup_table.plugins.multifilter.errorNoexiste,"error")}}},{id:t.id+"_multifilter_BtnRemove",text:e.rup.i18n.base.rup_table.plugins.multifilter.remove,click:function(){if(i._checkLabel(t)){var e=i._createFilterFromForm(t);i.rup_table("deleteFilter",e)}}},{text:e.rup.i18n.base.rup_table.plugins.multifilter.cancel,click:function(){var e=i.data("filtroAnterior");null!=e&&(i.rup_table("cleanFilterForm"),i.triggerHandler("rupTable_multifilter_fillForm",e),i._fillForm(e)),r.$comboLabel.val(""),r.$closeDialog.click()},btnType:e.rup.dialog.LINK}]}}}),i.on("rupTable_beforeFilter",function(e){}),r.$dropdownButton=e("#"+t.id+"_filter_filterButton_dropdown"),r.$combo=e("#"+t.id+"_multifilter_combo"),r.$comboLabel=e("#"+t.id+"_multifilter_combo_label"),r.$comboButton=e("#"+t.id+"_multifilter_dropdownDialog .rup-combobox-toggle"),r.$defaultCheck=e("#"+t.id+"_multifilter_defaultFilter"),r.$feedback=e("#"+t.id+"_multifilter_dropdownDialog_feedback"),r.$closeDialog=e("#closeText_"+t.id+"_multifilter_dropdownDialog"),e("#"+r.dropdownDialogId).rup_dialog("setOption","modal",!0),e("#"+r.dropdownDialogId).rup_dialog("setOption","draggable",!1),e("#"+r.dropdownDialogId).rup_dialog("setOption","resizable",!1),e("#"+r.dropdownDialogId).parent().css("width","500px"),r.$dropdownButton.on("click",function(){var a=form2object(t.filter.$filterContainer[0]);e.rup_utils.jsontoarray(a);i.data("filtroAnterior",a),r.$comboLabel.focus()}),i._configCombo(t),r.$feedback.rup_feedback({block:!1}),e(".rup-dropdown-dialog").on("dialogclose",function(){r.$comboLabel.autocomplete("widget").hide()});var a=form2object(t.filter.$filterContainer[0]);xhrArray=e.rup_utils.jsontoarray(a),i.data("filtroAnterior",a),i.on({"rupTable_beforeAdd.multifilter.validate":function(){return void 0!==r&&t.$firstStartUp?null:t.filter.$filterContainer.valid()}})}}),jQuery.fn.rup_table("extend",{getMultifilterDialogTemplate:function(t){var i=t.multifilter,r=jQuery('<div id="'+i.dropdownDialogId+'" style="display:none" class="rup_multifilter_dropdown"><div id="'+i.dropdownDialogId+'_feedback"></div><form><fieldset class="dropdownButton-inputs"><div id="'+i.dropdownDialogId+'_columna_cnt" class="formulario_columna_cnt"><div  id="'+i.dropdownDialogId+'_lineaCombo"  class="formulario_linea_izda_float"><label for="'+t.id+'_multifilter_combo">'+e.rup.i18n.base.rup_table.plugins.multifilter.filters+'</label><input id="'+t.id+'_multifilter_combo" class="rup_multifilter_selector" /></div><div  id="'+i.dropdownDialogId+'_lineaDefault" class="formulario_linea_izda_float"><input type="checkbox" id="'+t.id+'_multifilter_defaultFilter"/><label for="'+t.id+'_multifilter_defaultFilter">'+e.rup.i18n.base.rup_table.plugins.multifilter.defaultFilter+"</label></div></div></fieldset></form></div>");return r},configureMultifilter:function(t){var i=this,r=t.multifilter;i.data("settings",t),t.filter.$filterForm=e("#"+t.id+"_filter_form");var a;a=null!=r.idFilter?r.idFilter:t.id;var n;n=null!=r.userFilter?r.userFilter:LOGGED_USER;var o;o=null==r.getDefault||r.getDefault,jQuery("#"+t.id+"_multifilter_combo").rup_autocomplete({source:t.baseUrl+"/multiFilter/getAll?filterSelector="+a+"&user="+n,sourceParam:{label:"filterName",value:"filterDefault",data:"filterValue"},method:"GET",contains:!1,combobox:!0,menuAppendTo:e("#"+r.dropdownDialogId).parent(),select:function(){var e=i._searchFilterInCombo(t);i.rup_table("cleanFilterForm"),i.triggerHandler("rupTable_multifilter_fillForm",e),i._fillForm(e)}}),e(".jstree").on("rup_filter_treeLoaded",function(t,i){e(this).rup_tree("setRupValue",i)}),t.filter.$cleanLink.on("click",function(){r.$combo.rup_autocomplete("set","",""),t.filter.$filterSummary.html("<i></i>")})},addFilter:function(t){var i=this,r=i.data("settings"),a=r.multifilter;null!=a.idFilter&&(t.filtro.filterSelector=a.idFilter),e.rup_ajax({url:r.baseUrl+"/multiFilter/add",type:"POST",data:e.toJSON(t),dataType:"json",showLoading:!1,contentType:"application/json",async:!1,beforeSend:function(e,t){return i.triggerHandler("rupTable_multifilter_beforeAdd",[e,t])},success:function(t,i,r){a.$savedFilterName=t.filterName,a.$savedFilterValue=t.filterValue,a.$feedback.rup_feedback("set",e.rup.i18n.base.rup_table.plugins.multifilter.ok,"ok"),a.$comboLabel.data("tmp.loadObjects.term",null),a.$comboLabel.data("loadObjects",{}),a.$comboLabel.data("tmp.data",{}),a.$comboLabel.autocomplete("widget").is(":visible")&&a.$comboLabel.autocomplete("widget").hide()},error:function(t,i,r){a.$feedback.rup_feedback("set",e.rup.i18n.base.rup_table.plugins.multifilter.error,"error")}})},deleteFilter:function(t){var i=this,r=i.data("settings"),a=r.multifilter;a.$savedFilterName=void 0,a.$savedFilterValue=void 0,null!=a.idFilter&&(t.filtro.filterSelector=a.idFilter),e.rup_ajax({url:r.baseUrl+"/multiFilter/delete",type:"POST",data:e.toJSON(t),dataType:"json",showLoading:!1,contentType:"application/json",async:!1,success:function(t,i,r){a.$feedback.rup_feedback("set",e.rup.i18n.base.rup_table.plugins.multifilter.ok,"ok"),a.$combo.rup_autocomplete("set","",""),a.$comboLabel.data("tmp.loadObjects.term",null),a.$comboLabel.data("loadObjects",{}),a.$comboLabel.data("tmp.data",{}),a.$comboLabel.autocomplete("widget").is(":visible")&&a.$comboLabel.autocomplete("widget").hide(),"no_records"==t.filterFeedback&&a.$feedback.rup_feedback("set",e.rup.i18n.base.rup_table.plugins.multifilter.noRecords,"error")},error:function(t,i,r){a.$feedback.rup_feedback("set",e.rup.i18n.base.rup_table.plugins.multifilter.error,"error")}})}}),jQuery.fn.rup_table("extend",{_createFilterFromForm:function(t){var i,r=t.multifilter,a=form2object(t.filter.$filterContainer[0]);e.each(e("[ruptype='date']",t.filter.$filterContainer),function(t,r){i=e(r).datepicker("getDate"),null!=i&&(a[r.name]=i.getTime().toString())});var n,o=e.toJSON(a);n=null!=r.userFilter?r.userFilter:LOGGED_USER;var s={filtro:{filterSelector:t.id,filterName:r.$comboLabel.val(),filterValue:o,filterDefault:r.$defaultCheck.is(":checked"),filterUser:n}};return s},_configCombo:function(t){var i=t.multifilter;i.$comboLabel.on("change",function(){t.filter.$filterSummary.html("<i></i>")}),i.$comboLabel.data("autocomplete")._renderItem=function(t,i){return i.value?e("<li></li>").data("item.autocomplete",i).append("<a><b>"+i.label+"</b></a>").appendTo(t):e("<li></li>").data("item.autocomplete",i).append("<a>"+i.label+"</a>").appendTo(t)},i.$comboLabel.off("blur click"),i.$comboLabel.attr("placeholder",e.rup.i18n.base.rup_table.plugins.multifilter.input),i.$comboLabel.on("blur",function(r){var a=i.$combo.data("selected"),n=e(".ui-autocomplete:visible").length>0;if(i.$combo.data("selected",!1),"keydown"===r.type&&13!==r.keyCode)return!0;if(n===!0&&"keydown"===r.type)return i.$combo.focus(),r.stopPropagation(),!0;var o=e(r.currentTarget),s=i.$comboLabel.data("loadObjects");return 1==t.getText?void 0!==s[o.val()]?(i.$combo.val(o.val()),i.$combo.attr("rup_autocomplete_label",o.val())):(i.$combo.val(o.val()),i.$combo.attr("rup_autocomplete_label",o.val())):void 0!==s[o.val()]?(i.$combo.val(s[o.val()]),i.$combo.attr("rup_autocomplete_label",s[o.val()])):o.autocomplete("close"),("keydown"!==r.type||13!==r.keyCode||!a&&!n)&&void 0}),i.$comboButton.off("click mousedown"),i.$comboButton.on("blur",function(){i.$comboLabel.autocomplete("widget").is(":visible")&&i.$comboLabel.autocomplete("widget").hide()}),i.$comboButton.on("click",function(){i.$comboLabel.autocomplete("widget").is(":visible")?i.$comboLabel.autocomplete("widget").hide():(i.$comboLabel.autocomplete("search",""),i.$comboLabel.autocomplete("widget").show(),i.$comboLabel.autocomplete("widget").trigger("focus"))})},_checkLabel:function(t){var i=t.multifilter;return""==e.trim(i.$comboLabel.val())?(i.$feedback.rup_feedback("set",e.rup.i18n.base.rup_table.plugins.multifilter.emptyName,"error"),!1):!(i.$comboLabel.val().length>t.multifilter.labelSize)||(i.$feedback.rup_feedback("set",e.rup.i18n.base.rup_table.plugins.multifilter.tooLong,"error"),!1)},_searchFilterInCombo:function(t){var i=t.multifilter,r=e("#"+t.id+"_multifilter_combo_label").val(),a=e("#"+t.id+"_multifilter_combo_label").data("tmp.data"),n=e.grep(a,function(e,t){if(e.label==r)return e});if(0!=n.length){i.$defaultCheck.attr("checked",n[0].value);var o=e.parseJSON(n[0].data),s=[];s=e.rup_utils.jsontoarray(o)}if(void 0==o&&void 0!=i.$savedFilterName&&i.$savedFilterName===r)var o=e.parseJSON(i.$savedFilterValue);return o},_fillForm:function(t){var i=this,r=i.data("settings");e("[ruptype='date']",r.filter.$filterContainer).each(function(i,r){var a,n=jQuery(r),o=t[r.name];if(void 0!=o&&o.search("/")==-1){var s=new Date(parseInt(o)),l=n.data("datepicker").settings.dateFormat;if(n.data("datepicker").settings.datetimepicker){var d={hour:s.getHours(),minute:s.getMinutes(),second:s.getSeconds()};a=e.datepicker.formatDate(l,s)+" "+e.timepicker._formatTime(d,"hh:mm:ss")}else a=e.datepicker.formatDate(l,s);t[r.name]=a}});var a=e.rup_utils.jsontoarray(t);e.rup_utils.populateForm(a,e(this.selector+"_filter_form"))}}),jQuery.fn.rup_table.plugins.multifilter={},jQuery.fn.rup_table.plugins.multifilter.defaults={multifilter:{}}}(jQuery),/*!
 * Copyright 2013 E.J.I.E., S.A.
 *
 * Licencia con arreglo a la EUPL, Versión 1.1 exclusivamente (la «Licencia»);
 * Solo podrá usarse esta obra si se respeta la Licencia.
 * Puede obtenerse una copia de la Licencia en
 *
 *      http://ec.europa.eu/idabc/eupl.html
 *
 * Salvo cuando lo exija la legislación aplicable o se acuerde por escrito,
 * el programa distribuido con arreglo a la Licencia se distribuye «TAL CUAL»,
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ni expresas ni implícitas.
 * Véase la Licencia en el idioma concreto que rige los permisos y limitaciones
 * que establece la Licencia.
 */
function(e){var t={};e.extend(e.rup.iniRup,e.rup.rupSelectorObjectConstructor("rup_tabs",t)),e.fn.rup_tabs("extend",{disableTabs:function(t){if("number"==typeof t.position)e("#"+t.idTab).tabs("disable",t.position);else if("object"==typeof t.position)for(var i in t.position)e("#"+t.idTab).tabs("disable",t.position[i]);else"undefined"==typeof t.position&&e("#"+t.idTab).tabs("disable")},enableTabs:function(t){if("number"==typeof t.position)e("#"+t.idTab).tabs("enable",t.position);else if("object"==typeof t.position)for(var i in t.position)e("#"+t.idTab).tabs("enable",t.position[i]);else"undefined"==typeof t.position&&e("#"+t.idTab).tabs("enable")},loadTab:function(t){e("#"+t.idTab).tabs("load",t.position)},changeUrlTab:function(t){e("#"+t.idTab).tabs("url",t.position,e.rup_utils.setNoPortalParam(t.url))},changeLayerTab:function(t){this._includeLayer(e("#"+t.idTab+" ul:first-child"),t.layer,e(e("#"+t.idTab+" ul li a").get(t.position)))},selectTab:function(t){e("#"+t.idTab).tabs("select",t.position)},addTab:function(t){var i,r,a="rup-tabs-",n=0,o="";if(void 0!==t.maxNumberTabs){var s=e("#"+t.idTab+" li").size();if(s+1>t.maxNumberTabs)return e("#"+t.idTab).trigger("limitTabs"),!1}if(void 0!==t.lengthLiteral&&(o=t.label,t.label.length>t.lengthLiteral&&(t.label=t.label.substr(0,t.lengthLiteral).concat("..."))),void 0!==t.tabs){if(void 0===t.idNewTab||0!==e("#"+t.idNewTab).length)return e.rup.errorGestor(e.rup.i18nParse(e.rup.i18n.base,"rup_global.parameterError")),!1;i=e("<div>").attr("id",t.idNewTab),i.appendTo("body"),r=this._includeLayer(e("#"+t.idTab+" > ul:first-child"),"#"+t.idNewTab,null),i.rup_tabs(t),e("#"+t.idTab).tabs("add","#"+t.idNewTab,t.label,t.position),e(r).remove()}else void 0!==t.layer?(t.layer=this._includeLayer(e("#"+t.idTab+" > ul:first-child"),t.layer,null),e("#"+t.idTab).tabs("add",t.layer,t.label,t.position),e.each(e("#"+t.idTab+" div[id*='"+a+"']"),function(e,t){n<parseFloat(t.id.split(a)[1])&&(n=t.id.split(a)[1])})):(e("#"+t.idTab).tabs("add",e.rup_utils.setNoPortalParam(t.url),t.label,t.position),e.each(e("#"+t.idTab+" div[id*='"+a+"']"),function(e,t){n<parseFloat(t.id.split(a)[1])&&(n=t.id.split(a)[1])}),e("#"+t.idTab+" div[id='rup-tabs-"+n+"']").addClass("ui-tabs-hide"),void 0!==t.fixedHeight&&e("#"+t.idTab+" div[id='rup-tabs-"+n+"']").css("height",t.fixedHeight));e("#"+t.idTab+" ul:first li:nth-child("+(t.position+1)+") a").attr("title",o).rup_tooltip({}),t.tabsAtBottom&&(loadLi=e("#"+t.idTab+" ul li:last").not(".rup-tabs_loading"),loadLi.removeClass("ui-corner-top").addClass("ui-corner-botttom")),loadSpan=e("#"+t.idTab+" ul li a span:last").not(".rup-tabs_loading"),t.close===!0?(loadSpan.parent().append(e("<div>").addClass("rup-tabs_title").text(e.rup.i18nParse(e.rup.i18n.app[e(this).attr("id")],t.label))).append(e("<span>").addClass("rup-tabs_loading")).append('<span class="ui-icon ui-icon-close" role="presentation">Remove Tab</span>'),e("span.ui-icon-close").on("click",function(){var t=e(this).parent().attr("href");e(this).parent().parent().remove(),e(t).remove(),tabs.tabs("refresh")}),e("span.ui-icon-close").addClass("rup-tabs-close"),e("span.ui-icon-close").on({mouseenter:function(){e(this).addClass("rup-tabs-close-hover")},mouseleave:function(){e(this).removeClass("rup-tabs-close-hover")}})):loadSpan.parent().append(e("<div>").addClass("rup-tabs_title").text(e.rup.i18nParse(e.rup.i18n.app[e(this).attr("id")],t.label))).append(e("<span>").addClass("rup-tabs_loading")),loadSpan.remove()},removeTab:function(t){e("#"+t.idTab).tabs("remove",t.position)},selected:0}),e.fn.rup_tabs("extend",{_init:function(t){if(t.length>1)e.rup.errorGestor(e.rup.i18nParse(e.rup.i18n.base,"rup_global.initError")+e(this).attr("id"));else{var i=e.extend({},e.fn.rup_tabs.defaults,t[0]);i.id=e(this).attr("id"),i.iniLoad=!1,void 0!==i.width&&e("#"+i.id).css("width",i.width).addClass("rup-tabs_overflow"),void 0!==i.height&&e("#"+i.id).css("height",i.height).addClass("rup-tabs_overflow");for(var r=i.tabs,a=0;void 0!==r;)a+=1,r=r[0].tabs;if(i.profun=a,this._parseJSON(i.tabs,e.rup.i18n.app[i.id],e("#"+i.id),"",1,i),i.iniLoad=!0,this._tabify(e("#"+i.id),i),void 0!==i.fixedHeight&&e("#"+i.id+">.ui-tabs-panel").css("height",i.fixedHeight),e("#"+i.id).on("limitTabs",function(){alert("limite de pestañas alcanzado")}),void 0!==i.disabled)for(var n in i.disabled)e("#"+i.id).rup_tabs("disableTabs",{idTab:n,position:i.disabled[n]})}},_tabify:function(t,i){t.addClass("rup-tabs_container"),t.data("settings",i);var r=function(t,r){void 0!==e(r.panel).data("cargado")&&e(r.panel).data("cargado")===!1&&e(r.panel).length>0&&(e(r.panel).tabs("load",i.selected),e(r.panel).data("cargado",!0)),void 0!==i.select&&null!==i.select&&"function"==typeof i.select&&i.select(t,r)},a=e.extend({},i.ajaxOptions);a.beforeSend=function(e,r){if(void 0!==i.ajaxOptions.beforeSend&&null!==i.ajaxOptions.beforeSend&&"function"==typeof i.ajaxOptions.beforeSend&&i.ajaxOptions.beforeSend.call(),!i.iniLoad)return t.data("cargado",!1),!1},a.complete=function(e,r){t.find("span.rup-tabs_loading_img").remove(),void 0!==i.ajaxOptions.complete&&null!==i.ajaxOptions.complete&&"function"==typeof i.ajaxOptions.complete&&i.ajaxOptions.complete(e,r)},a.success=function(e,t,r){void 0!==i.ajaxOptions.success&&null!==i.ajaxOptions.success&&"function"==typeof i.ajaxOptions.success&&i.ajaxOptions.success(e,t,r)},a.error=function(t,r,a){var n;void 0!==i.ajaxOptions.error&&null!==i.ajaxOptions.error&&"function"==typeof i.ajaxOptions.error&&(n=function(){i.ajaxOptions.error(t,r,a)}),e.rup_messages("msgError",{title:e.rup.i18nParse(e.rup.i18n.base,"rup_global.developerError"),message:"<p>"+e.rup.i18nParse(e.rup.i18n.base,"rup_tabs.serverError")+"<b> "+r+":  "+t.status+" - "+t.statusText+".</b></p>",width:"40%",beforeClose:n})},e(t).tabs({ajaxOptions:i.cache===!1?e.extend(a,{cache:!1}):a,cache:i.cache,cookie:null,fx:i.fx,idPrefix:"rup-tabs-",panelTemplate:i.panelTemplate,selected:i.selected,spinner:"<span class='rup-tabs_loading_img' />",create:i.create,select:r,load:i.load,show:i.show,add:i.add,remove:i.remove,enable:i.enable,disable:i.disable}),i.scrollable===!0&&this._scrollable(i),i.tabsAtBottom===!0&&(e(t).addClass("tabs-bottom"),e(t).find(".tabs-spacer").css("float","left").css("height","200px"),e(".ui-tabs-nav, .ui-tabs-nav > *",e(t)).removeClass("ui-corner-all ui-corner-top").addClass("ui-corner-bottom"),e(".ui-tabs-panel.ui-widget-content.ui-corner-bottom",e(t)).removeClass("ui-corner-bottom").addClass("ui-corner-top"),e(".ui-tabs-nav",e(t)).appendTo(".tabs-bottom"))},_parseJSON:function(t,i,r,a,n,o){var s,l,d,u="";r.append(e("<ul>")),r=e(r).children("ul");for(var c=t.length;c--;)if(l=a+c,s=t[c],0===c&&n===o.profun?o.iniLoad=!0:o.iniLoad=!1,d=e.rup.i18nParse(i,s.i18nCaption),void 0!==o.lengthLiteral&&(u=d,d.length>o.lengthLiteral&&(d=d.substr(0,o.lengthLiteral).concat("..."))),void 0!==s.layer)s.layer=this._includeLayer(r,s.layer,null),o.close===!0?(r.prepend(e("<li>").append(e("<a>").attr("href",s.layer).attr({rupLevel:l,title:u,alt:u}).rup_tooltip({}).css("padding-left","1.4em").css("padding-right","0.3em").append(e("<div>").addClass("rup-tabs_title").text(d)).append(e("<span>").addClass("rup-tabs_loading")).append('<span class="ui-icon ui-icon-close" role="presentation">Remove Tab</span>'))),e("span.ui-icon-close").on("click",function(){var t=e(this).parent().attr("href");e(this).parent().parent().remove(),e(t).remove(),r.tabs("refresh")}),e("span.ui-icon-close").addClass("rup-tabs-close"),e("span.ui-icon-close").on({mouseenter:function(){e(this).addClass("rup-tabs-close-hover")},mouseleave:function(){e(this).removeClass("rup-tabs-close-hover")}})):r.prepend(e("<li>").append(e("<a>").attr("href",s.layer).attr({rupLevel:l,title:u,alt:u}).rup_tooltip({}).css("padding-left","1.4em").css("padding-right","0.3em").append(e("<div>").addClass("rup-tabs_title").text(d)).append(e("<span>").addClass("rup-tabs_loading"))));else if(void 0!==s.url)r.prepend(e("<li>").append(e("<a>").attr("href",e.rup_utils.setNoPortalParam(s.url)).attr({rupLevel:l,title:u,alt:u}).rup_tooltip({}).css("padding-left","1.4em").css("padding-right","0.3em").append(e("<div>").addClass("rup-tabs_title").text(d)).append(e("<span>").addClass("rup-tabs_loading"))));else if(void 0!==s.tabs){r.prepend(e("<li>").append(e("<a>").attr("id","#"+s.i18nCaption).attr("href","#"+s.i18nCaption).attr({rupLevel:l,title:u,alt:u}).rup_tooltip({}).css("padding-left","1.4em").css("padding-right","0.3em").append(e("<div>").addClass("rup-tabs_title").text(d)).append(e("<span>").addClass("rup-tabs_loading")))),r=e(r).parent();var p=e("<div>"),h=e.rup_utils.randomIdGenerator(p);r.append(p),r=e(r).children("#"+h),r.prepend(e("<div>").attr("id",s.i18nCaption).attr("actualTab",!0)),r=e(r).children("div:first-child");var f=jQuery.extend(!0,{},o);f.selected=s.selected,r.append(this._parseJSON(s.tabs,i,r,l,n+1,f)),this._tabify(r,f),r=e(r).parents("div[actualTab=true]").find("ul").first(),0===r.length&&(r=e("#"+o.id).find("ul").first())}e(r).parents("div[actualTab=true]").first().removeAttr("actualTab"),delete r},_includeLayer:function(t,i,r){var a,n;return e(i).length>0?(n=1===e(i).length?e(i).css("display",""):e("<div>").append(e(i).css("display","")),null===r?(a=e("<div>").append(n),t.parent().append(a),i="#"+e.rup_utils.randomIdGenerator(a)):(i=r.attr("href"),a=e(r.attr("href")),a.children().remove(),a.append(n))):(i="#load-tab-error",null===r?t.parent().append(e("<div>").attr("id","load-tab-error").append(e("<div>").addClass("rup-loading_tab_error").append(e.rup.i18nParse(e.rup.i18n.base,"rup_global.selectorError")))):(i=r.attr("href"),a=e(r.attr("href")),a.children().remove(),a.append(e("<div>").attr("id","load-tab-error").append(e("<div>").addClass("rup-loading_tab_error").append(e.rup.i18nParse(e.rup.i18n.base,"rup_global.selectorError")))))),i},_scrollable:function(t){var i,r=e.extend({},t),a=e(this),n=a.find(".ui-tabs-nav");a.css({padding:2,position:"relative"}),a.wrap('<div id="stTabswrapper" class="stTabsMainWrapper" style="position:relative"/>').find(".ui-tabs-nav").css("overflow","hidden").wrapInner('<div class="stTabsInnerWrapper" style="width:30000px"><span class="stWidthChecker"/></div>');var o=(a.find(".stWidthChecker"),a.find(".stTabsInnerWrapper"),a.parents("#stTabswrapper").width(a.outerWidth(!0)));e.browser.safari&&o.width(a.width()+6),r.resizable&&(e.fn.resizable?o.resizable({minWidth:o.width(),maxWidth:2*o.width(),minHeight:o.height(),maxHeight:2*o.height(),handles:r.resizeHandles,alsoResize:a,resize:function(){a.trigger("resized")}}):alert('Error:\nCannot be resizable because "jQuery.resizable" plugin is not available.'));var s=parseInt(parseInt(n.innerHeight()/2)-8),l={cursor:"pointer","z-index":1e3,position:"absolute",top:3,height:n.outerHeight()-(e.browser.safari?2:1)};o.prepend(i=e("<div/>").disableSelection().css({position:"relative","z-index":3e3,display:"block"}).append(e("<span/>").disableSelection().attr("title","Previous tab").css(l).addClass("ui-state-active ui-corner-tl ui-corner-bl stPrev stNav").css("left",3).append(e("<span/>").disableSelection().addClass("ui-icon ui-icon-carat-1-w").html("Previous tab").css("margin-top",s)).click(function(){if(!e(this).hasClass("ui-state-disabled"))return prevIndex=n.find("li.ui-tabs-selected").prevAll().length-1,n.find("li").eq(prevIndex).find("a").trigger("click"),!1}),e("<span/>").disableSelection().attr("title","Next tab").css(l).addClass("ui-state-active ui-corner-tr ui-corner-br stNext stNav").css({right:3}).append(e("<span/>").addClass("ui-icon ui-icon-carat-1-e").html("Next tab").css("margin-top",s)).click(function(){return nextIndex=n.find("li.ui-tabs-selected").prevAll().length+1,n.find("li").eq(nextIndex).find("a").trigger("click"),!1}))),a.on("navEnabler",function(){setTimeout(function(){var e=n.find(".ui-tabs-selected").is(":last-child"),t=n.find(".ui-tabs-selected").is(":first-child"),i=o.find(".stNext"),r=o.find(".stPrev");e?(r.removeClass("ui-state-disabled"),i.addClass("ui-state-disabled")):t?(i.removeClass("ui-state-disabled"),r.addClass("ui-state-disabled")):(i.removeClass("ui-state-disabled"),r.removeClass("ui-state-disabled"))},r.animationSpeed)}).on("navHandler",function(){e(".stWidthChecker").children().length>5?(i.show(),n.find("li:first").css("margin-left",i.find(".stPrev").outerWidth(!0))):(i.hide(),n.find("li:first").css("margin-left",0))}).on("scrollToTab",function(t,o,s,l){o="undefined"!=typeof o?e(o):n.find("li.ui-tabs-selected");var d=i.is(":visible")?i.find(".stPrev").outerWidth(!0):0;offsetLeft=-(a.width()-(o.outerWidth(!0)+d+parseInt(n.find("li:last").css("margin-right"),10))),offsetLeft="tabClicked"==s&&"left"==l?-d:offsetLeft,offsetLeft="tabClicked"==s&&"right"==l?offsetLeft:offsetLeft;var u={axis:"x",margin:!0,offset:{left:offsetLeft},easing:r.easing||""};n.scrollTo(o,r.animationSpeed,u)}).on("bindTabClick",function(){n.find("a").click(function(){var t=e(this).parents("li"),r=i.find(".stPrev").outerWidth(!0);return t.position().left-r<0?a.trigger("scrollToTab",[t,"tabClicked","left"]):t.outerWidth()+t.position().left>a.width()-r&&a.trigger("scrollToTab",[t,"tabClicked","right"]),a.trigger("navEnabler"),!1})}).on("resized",function(){a.trigger("navHandler"),a.trigger("scrollToTab",n.find("li.ui-tabs-selected"))}).trigger("navHandler").trigger("navEnabler").trigger("bindTabClick")}}),e.fn.rup_tabs.defaults={ajaxOptions:{},cache:!0,cookie:null,fx:null,panelTemplate:"<div></div>",profun:0,selected:0,create:null,select:null,load:null,show:null,add:null,remove:null,enable:null,disable:null,tabsAtBottom:!1}}(jQuery),function(e){function t(e){return"object"==typeof e?e:{top:e,left:e}}var i=e.scrollTo=function(t,i,r){e(window).scrollTo(t,i,r)};i.defaults={axis:"xy",duration:parseFloat(e.fn.jquery)>=1.3?0:1},i.window=function(t){return e(window)._scrollable()},e.fn._scrollable=function(){return this.map(function(){var t=this,i=!t.nodeName||e.inArray(t.nodeName.toLowerCase(),["iframe","#document","html","body"])!=-1;if(!i)return t;var r=(t.contentWindow||t).document||t.ownerDocument||t;return e.browser.safari||"BackCompat"==r.compatMode?r.body:r.documentElement})},e.fn.scrollTo=function(r,a,n){return"object"==typeof a&&(n=a,a=0),"function"==typeof n&&(n={onAfter:n}),"max"==r&&(r=9e9),n=e.extend({},i.defaults,n),a=a||n.speed||n.duration,n.queue=n.queue&&n.axis.length>1,n.queue&&(a/=2),n.offset=t(n.offset),n.over=t(n.over),this._scrollable().each(function(){function o(e){d.animate(c,a,n.easing,e&&function(){e.call(this,r,n)})}var s,l=this,d=e(l),u=r,c={},p=d.is("html,body");switch(typeof u){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(u)){u=t(u);break}u=e(u,this);case"object":(u.is||u.style)&&(s=(u=e(u)).offset())}e.each(n.axis.split(""),function(e,t){var r="x"==t?"Left":"Top",a=r.toLowerCase(),h="scroll"+r,f=l[h],g=i.max(l,t);if(s)c[h]=s[a]+(p?0:f-d.offset()[a]),n.margin&&(c[h]-=parseInt(u.css("margin"+r))||0,c[h]-=parseInt(u.css("border"+r+"Width"))||0),c[h]+=n.offset[a]||0,n.over[a]&&(c[h]+=u["x"==t?"width":"height"]()*n.over[a]);else{var m=u[a];c[h]=m.slice&&"%"==m.slice(-1)?parseFloat(m)/100*g:m}/^\d+$/.test(c[h])&&(c[h]=c[h]<=0?0:Math.min(c[h],g)),!e&&n.queue&&(f!=c[h]&&o(n.onAfterFirst),delete c[h])}),o(n.onAfter)}).end()},i.max=function(t,i){var r="x"==i?"Width":"Height",a="scroll"+r;if(!e(t).is("html,body"))return t[a]-e(t)[r.toLowerCase()]();var n="client"+r,o=t.ownerDocument.documentElement,s=t.ownerDocument.body;return Math.max(o[a],s[a])-Math.min(o[n],s[n])}}(jQuery),/*!
 * Copyright 2016 E.J.I.E., S.A.
 *
 * Licencia con arreglo a la EUPL, Versión 1.1 exclusivamente (la «Licencia»);
 * Solo podrá usarse esta obra si se respeta la Licencia.
 * Puede obtenerse una copia de la Licencia en
 *
 *      http://ec.europa.eu/idabc/eupl.html
 *
 * Salvo cuando lo exija la legislación aplicable o se acuerde por escrito, 
 * el programa distribuido con arreglo a la Licencia se distribuye «TAL CUAL»,
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ni expresas ni implícitas.
 * Véase la Licencia en el idioma concreto que rige los permisos y limitaciones
 * que establece la Licencia.
 */
function(e){var t={};e.extend(e.rup.iniRup,e.rup.rupSelectorObjectConstructor("rup_time",t)),e.fn.rup_time("extend",{getRupValue:function(){var t,i;return t=e(this).data("datepicker").settings.timeFormat,i=e.datepicker.parseTime(t,e(this).rup_time("getTime")),i?e.timepicker._formatTime(i,"hh:mm:ss"):""},setRupValue:function(t){var i,r,a;i=e(this).data("datepicker").settings.timeFormat,r=e.datepicker.parseTime("hh:mm:ss",t),a=r?e.timepicker._formatTime(r,i):"",e(this).val(a)},destroy:function(){var t=e(this).data("datepicker").settings.labelMaskId;t&&e("#"+t).text(""),delete t,e(this).next("img").remove(),e(this).timepicker("destroy")},disable:function(){e(this).timepicker("disable")},enable:function(){e(this).timepicker("enable")},isDisabled:function(){return e(this).timepicker("isDisabled")},hide:function(){e(this).timepicker("hide")},show:function(){e(this).timepicker("show")},getTime:function(){return e(this).val()},setTime:function(t){e(this).timepicker("refresh"),e.datepicker._setTime(e.datepicker._getInst(e("#"+e(this).data("datepicker").settings.id)[0]),t)},refresh:function(){e(this).timepicker("refresh")},option:function(t,i){e(this).timepicker("option",t,i)}}),e.fn.rup_time("extend",{_init:function(t){if(t.length>1)e.rup.errorGestor(e.rup.i18nParse(e.rup.i18n.base,"rup_global.initError")+e(this).attr("id"));else{var i=e.extend({},e.fn.rup_time.defaults,t[0]);i.id=e(this).attr("id"),this.attr("ruptype","time");var r=e.rup.i18n.base.rup_time;for(var a in r)e.timepicker._defaults[a]=r[a];i.labelMaskId&&e("#"+i.labelMaskId).text(e.rup.i18nParse(e.rup.i18n.base,"rup_time.mask")+" "),i.buttonImage=e.rup.STATICS+(i.buttonImage?i.buttonImage:"/rup/basic-theme/images/clock.png"),e("#"+i.id).timepicker(i),e("#"+i.id).is("div")||e("<img>").addClass("ui-timepicker-trigger").attr({src:i.buttonImage,alt:e.rup.i18nParse(e.rup.i18n.base,"rup_time.buttonText"),title:e.rup.i18nParse(e.rup.i18n.base,"rup_time.buttonText")}).click(function(){"none"===e("#ui-datepicker-div").css("display")?e("#"+i.id).timepicker("show"):e("#"+i.id).timepicker("hide")}).insertAfter(e("#"+i.id)),e.rup_utils.aplicatioInPortal()&&!e("#"+i.id).is("div")&&e(".r01gContainer").append(e(".ui-datepicker:not(.r01gContainer .ui-datepicker)")),i.disabled&&e("#"+i.id).rup_time("disable"),e(this).parent().find("[title]").rup_tooltip({applyToPortal:!0})}}}),e.fn.rup_time.defaults={stepHour:1,stepMinute:1,stepSecond:1,showButtonPanel:!1,timeOnly:!0},e.datepicker._timepicker_doKeyPress=e.datepicker._doKeyPress,e.datepicker._doKeyPress=function(t){var i=e.datepicker._get(e.datepicker._getInst(t.target),"timepicker");switch(t.keyCode){case 37:!t.ctrlKey||t.altKey||t.shiftKey?t.ctrlKey&&t.shiftKey&&!t.altKey?i.minute_slider.slider("option","value",i.minute_slider.slider("option","value")-i._defaults.stepMinute):t.ctrlKey&&t.shiftKey&&t.altKey&&i.second_slider.slider("option","value",i.second_slider.slider("option","value")-i._defaults.stepSecond):i.hour_slider.slider("option","value",i.hour_slider.slider("option","value")-i._defaults.stepHour);break;case 39:!t.ctrlKey||t.altKey||t.shiftKey?t.ctrlKey&&t.shiftKey&&!t.altKey?i.minute_slider.slider("option","value",i.minute_slider.slider("option","value")+i._defaults.stepMinute):t.ctrlKey&&t.shiftKey&&t.altKey&&i.second_slider.slider("option","value",i.second_slider.slider("option","value")+i._defaults.stepSecond):i.hour_slider.slider("option","value",i.hour_slider.slider("option","value")+i._defaults.stepHour)}return i&&i._onTimeChange(),e.datepicker._timepicker_doKeyPress(t)}}(jQuery),/*!
 * Copyright 2016 E.J.I.E., S.A.
 *
 * Licencia con arreglo a la EUPL, Versión 1.1 exclusivamente (la «Licencia»);
 * Solo podrá usarse esta obra si se respeta la Licencia.
 * Puede obtenerse una copia de la Licencia en
 *
 *      http://ec.europa.eu/idabc/eupl.html
 *
 * Salvo cuando lo exija la legislación aplicable o se acuerde por escrito, 
 * el programa distribuido con arreglo a la Licencia se distribuye «TAL CUAL»,
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ni expresas ni implícitas.
 * Véase la Licencia en el idioma concreto que rige los permisos y limitaciones
 * que establece la Licencia.
 */
function(e){e.rup_toolbar=e.rup_toolbar||{},e.extend(e.rup_toolbar,{extend:function(t){e.fn.extend(t)}}),e.rup_toolbar.showingMB=null,e.rup_toolbar.extend({addButton:function(t,i){var r;r=t.id?t.id:t.i18nCaption,0!==r.indexOf(e(this).attr("id"))&&(r=e(this).attr("id")+"##"+r);var a=e("<button type='button'/>").text(e.rup.i18nParse(i,t.i18nCaption)).addClass("rup-toolbar_button").attr({id:r});if(a.rup_button(t),a.button("option","icons",{primary:t.css,secondary:null}),void 0!==t.right&&t.right===!0){var n=this.children("div:not(.rup-dropdown-btn-group)");0===n.length&&(n=e("<div />").attr("id",this.attr("id")+"-rightButtons").css("float","right"),this.append(n)),a.prependTo(n)}else a.parent().is(".rup-dropdown-btn-group")?e(this).append(a.parent()):e(this).append(a);return this._setKeyDown(a),t.click&&a.click({i18nCaption:t.i18nCaption},t.click),a.bind("focusout",function(){e(this).removeClass("ui-state-focus")}),a},addMButton:function(t,i){var r,a="";if(void 0===t.id?(alert("El atributo ID es obligatorio en los MButtons."),a=null):(r=t.id,0!==r.indexOf(e(this).attr("id"))&&(r=e(this).attr("id")+"##"+t.id),a=e("<a/>").attr("id",r).text(e.rup.i18nParse(i,t.i18nCaption)).addClass("rup-toolbar_menuButton"),void 0===t.css&&(t.css="rup-toolbar_menuButtonIcon"),a.button().button("option","icons",{primary:null,secondary:t.css})),void 0!==t.right&&t.right===!0){var n=this.children("div:not(.rup-dropdown-btn-group)");0===n.length&&(n=e("<div />").attr("id",this.attr("id")+"-rightButtons").css("float","right"),this.append(n)),a.prependTo(n)}else e(this).append(a);return this._setKeyDown(a),t.click&&a.click({i18nCaption:t.i18nCaption},t.click),a},addButtonsToMButton:function(t,i,r){var a,n,o,s,l=t.length;0===e("[id='mbutton_"+i.attr("id")+"']").length?(a=e("<div>").addClass("ui-widget ui-widget-content rup-toolbar_menuButtonContainer").attr("id","mbutton_"+i[0].id).css("display","none"),n=e("<ul>").attr("role","menu").attr("aria-activedescendant","active-menuitem").attr("aria-labelledby","active-menuitem")):(a=e("[id='mbutton_"+i.attr("id")+"']"),n=a.children("ul")),i.attr("href","#");for(var d=l;d--;)o=t[d],s=o.id?i.attr("id")+"##"+o.id:i.attr("id")+"##"+o.i18nCaption,t[d].id=s,n.prepend(e("<li>").css("display","block").append(this.addButton(t[d],r).addClass("rup-toolbar_menuButtonElement")));e.rup_utils.aplicatioInPortal()?(a.append(n),e(".r01gContainer").append(a)):(a.appendTo("body"),a.append(n)),delete n,delete a},showMButton:function(){var t=e(this),i=t.offset().top+t.getTotalHeight(),r=e.rup_toolbar.showingMB,a=this.id;return r===a?(e("[id='mbutton_"+a+"']").slideUp("fast"),t.removeClass("rup-toolbar_menuButtonSlided"),r=null):(e("[id='mbutton_"+r+"']").slideUp("fast"),e("[id='mbutton_"+a+"']").css("position","absolute").css("top",i).css("left",t.offset().left).slideDown("fast"),e("[id='"+r+"']").removeClass("rup-toolbar_menuButtonSlided"),t.addClass("rup-toolbar_menuButtonSlided"),r=a),e.rup_toolbar.showingMB=r,delete a,delete r,delete i,delete t,!1},disableButton:function(t){t.indexOf(this.attr("id"))===-1&&(t=this.attr("id")+"##"+t),e("[id='"+t+"']").button("disable")},enableButton:function(t){t.indexOf(this.attr("id"))===-1&&(t=this.attr("id")+"##"+t),e("[id='"+t+"']").button("enable")},pressButton:function(t,i){t.indexOf(this.attr("id"))===-1&&(t=this.attr("id")+"##"+t),e("[id='"+t+"']").addClass(i)},unpressButton:function(t,i){t.indexOf(this.attr("id"))===-1&&(t=this.attr("id")+"##"+t),e("[id='"+t+"']").removeClass(i)},tooglePressButton:function(t,i){t.indexOf(this.attr("id"))===-1&&(t=this.attr("id")+"##"+t),e("[id='"+t+"']").toggleClass(i)},refreshButton:function(t){t.indexOf(this.attr("id"))===-1&&(t=this.attr("id")+"##"+t),e("[id='"+t+"']").button("refresh")},_setKeyDown:function(t){t.bind("keydown",function(t){var i,r=e(t.currentTarget),a=r.parent();switch(t.keyCode){case e.ui.keyCode.TAB:if(!t.shiftKey&&(i=r.next().attr("id")!==a.attr("id")+"-rightButtons"?r.next(":focusable"):r.next().children(":focusable:first"),1===i.size()))return i.focus(),e.rup_toolbar.focusedExternally[a.attr("id")]=!0,!1}})}}),e.rup_toolbar.hideMButtons=function(){var t=e.rup_toolbar.showingMB;e("[id='mbutton_"+t+"']").slideUp("fast"),e("[id='"+t+"']").removeClass("rup-toolbar_menuButtonSlided"),t=null,e.rup_toolbar.showingMB=t,delete t},e.fn.getTotalHeight=function(){return e(this).height()+parseInt(e(this).css("paddingTop"))+parseInt(e(this).css("paddingBottom"))+parseInt(e(this).css("borderTopWidth"))+parseInt(e(this).css("borderBottomWidth"))},e.fn.rup_toolbar=function(t){return this.each(function(){var i,r=e.extend({},e.fn.rup_toolbar.defaults,t),a=e(this),n=[];void 0===e.rup_toolbar.focusedExternally&&(e.rup_toolbar.focusedExternally={}),e.rup_toolbar.focusedExternally[this.id]=!1,r.id=this.id,i=e.rup.i18n.app[r.id],a.addClass("rup-toolbar ui-widget-header ui-widget ui-widget-content"),null!=r.width&&a.width(r.width),e(document).click(e.rup_toolbar.hideMButtons);for(var o=0;o<r.buttons.length;o+=1){var s=r.buttons[o];void 0===s.right||s.right!==!0?s.buttons?(mbutton=a.addMButton({id:s.id,i18nCaption:s.i18nCaption,css:s.css,click:a.showMButton},i),null!==mbutton&&a.addButtonsToMButton(s.buttons,mbutton,i)):a.addButton(s,i):n.push(s)}for(var o=0;o<n.length;o+=1){var l=n[o];l.buttons?(mbutton=a.addMButton({id:l.id,i18nCaption:l.i18nCaption,css:l.css,click:a.showMButton,right:l.right},i),null!==mbutton&&a.addButtonsToMButton(l.buttons,mbutton,i)):a.addButton(l,i)}})},e.fn.rup_toolbar.defaults={width:null,buttons:[],mbuttons:null}}(jQuery),/*!
 * Copyright 2016 E.J.I.E., S.A.
 *
 * Licencia con arreglo a la EUPL, Versión 1.1 exclusivamente (la «Licencia»);
 * Solo podrá usarse esta obra si se respeta la Licencia.
 * Puede obtenerse una copia de la Licencia en
 *
 *      http://ec.europa.eu/idabc/eupl.html
 *
 * Salvo cuando lo exija la legislación aplicable o se acuerde por escrito, 
 * el programa distribuido con arreglo a la Licencia se distribuye «TAL CUAL»,
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ni expresas ni implícitas.
 * Véase la Licencia en el idioma concreto que rige los permisos y limitaciones
 * que establece la Licencia.
 */
function(e){var t={};e.extend(e.rup.iniRup,e.rup.rupSelectorObjectConstructor("rup_tooltip",t)),e.fn.rup_tooltip("extend",{open:function(){e(this).qtip("show",!0)},close:function(){e(this).qtip("hide",!0)},enable:function(){e(this).qtip("enable",!0)},disable:function(){e(this).rup_tooltip("close"),e(this).qtip("disable",!0)},destroy:function(){e(this).rup_tooltip("disable"),e(this).qtip("destroy")},option:function(t,i){return e(this).qtip("option",t,i)}}),e.fn.rup_tooltip("extend",{_init:function(t){if(t.length>1)e.rup.errorGestor(e.rup.i18nParse(e.rup.i18n.base,"rup_global.initError")+e(this).attr("id"));else if(e(this).size()>0){var i=e.extend({},e.fn.rup_tooltip.defaults,t[0]),r=this[0].className.indexOf("rup-grid")!==-1;if(void 0===i.id&&(i.id=e(this).attr("id")),r){e(this).each(function(t,i){e.attr(this,"rup_tooltip",e.attr(this,"title")),"img"===i.localName&&e(i).parents("td").attr("rup_tooltip",e(i).attr("rup_tooltip"))}).removeAttr("title");i={content:" ",position:{target:"event",effect:!1},show:{delay:i.show.delay},hide:{delay:0},events:{show:function(t,i){var r=e(t.originalEvent.target);if(r.length){for(;void 0===r.attr("rup_tooltip")&&"TD"!==r[0].nodeName;)r=e(r).parent();i.set("content.text",""===r.attr("rup_tooltip")?" ":r.attr("rup_tooltip")),""!==r.attr("rup_tooltip")&&" "!==r.attr("rup_tooltip")||r.qtip("destroy"),"TD"!==r[0].nodeName&&(r=e(r).parents("td")),0==r.nextAll("td:visible").length?i.set("position.my.x","right"):i.set("position.my.x","left"),i.set("position.target",r)}},render:function(t,i){e.rup_utils.aplicatioInPortal()&&(e("div.r01gContainer").append(e(this)),0!==e("#qtip-overlay").size()&&e("div.r01gContainer").append(e("#qtip-overlay")))}}},e(this).qtip(i)}else{var a;a=e.rup_utils.aplicatioInPortal()&&!i.applyToPortal?e("div.r01gContainer "+e(this).selector):this,void 0!==i.open&&(i.events.show=i.open),void 0!==i.close&&(i.events.hide=i.close),i.events.render=function(t,i){e.rup_utils.aplicatioInPortal()&&(e("div.r01gContainer").append(e(this)),0!==e("#qtip-overlay").size()&&e("div.r01gContainer").append(e("#qtip-overlay")))},e(a).qtip(i),i.disabled&&e(a).qtip("disable")}}}}),e.fn.rup_tooltip.defaults={disabled:!1,applyToPortal:!1,show:{delay:0},position:{my:"top left",at:"bottom right",target:"event",effect:!1},events:{}}}(jQuery),/*!
 * Copyright 2016 E.J.I.E., S.A.
 *
 * Licencia con arreglo a la EUPL, Versión 1.1 exclusivamente (la «Licencia»);
 * Solo podrá usarse esta obra si se respeta la Licencia.
 * Puede obtenerse una copia de la Licencia en
 *
 *      http://ec.europa.eu/idabc/eupl.html
 *
 * Salvo cuando lo exija la legislación aplicable o se acuerde por escrito, 
 * el programa distribuido con arreglo a la Licencia se distribuye «TAL CUAL»,
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ni expresas ni implícitas.
 * Véase la Licencia en el idioma concreto que rige los permisos y limitaciones
 * que establece la Licencia.
 */
function(e){e.widget("blueimpUIX.fileupload",e.blueimpUI.fileupload,{options:{errorMessages:{maxFileSize:e.rup.i18nParse(e.rup.i18n.base,"rup_upload.maxFileSizeError"),minFileSize:e.rup.i18nParse(e.rup.i18n.base,"rup_upload.minFileSizeError"),acceptFileTypes:e.rup.i18nParse(e.rup.i18n.base,"rup_upload.acceptFileTypesError"),maxNumberOfFiles:e.rup.i18nParse(e.rup.i18n.base,"rup_upload.maxNumberOfFilesError")}},_renderUpload:function(t){var i=this,r=this.options,a=this._renderUploadTemplate(t),n=this._validate(t);if(!(a instanceof e))return e();var o=e.data(this.element[0],"settings");a.css("display","none"),a.find(".progress div").slice(n?1:0).remove().end().first().progressbar(),a.find(".start button").slice(this.options.autoUpload||!n?0:1).remove().end().first().button({text:!0,icons:{primary:"ui-icon-circle-arrow-e"}});var s=a.find(".cancel button").slice(1).remove().end().first().button({text:!0,icons:{primary:"ui-icon-cancel"}});return o.submitInForm&&s.bind("click",function(e){var t;e.preventDefault(),i.options.fileInput.attr("value",""),t=i.options.fileInput.clone(!0).attr("value","").insertAfter(i.options.fileInput),i.options.fileInput.remove(),i.options.fileInput=t}),a.find(".preview").each(function(a,n){i._loadImage(t[a],function(t){e(t).hide().appendTo(n).fadeIn()},{maxWidth:r.previewMaxWidth,maxHeight:r.previewMaxHeight,fileTypes:r.previewFileTypes,canvas:r.previewAsCanvas})}),a},_renderDownload:function(t){var i=this._renderDownloadTemplate(t);return i instanceof e?(i.css("display","none"),i.find(".delete button").button({text:!0,icons:{primary:"ui-icon-trash"}}),i.find("a").each(this._enableDragToDesktop),i):e()},_renderUploadTemplate:function(t){var i=this,r=e(),a=e.data(this.element[0],"settings");return e.each(t,function(t,n){n=i._uploadTemplateHelper(n);var o=e('<tr class="template-upload"><td><div class="formulario_columna_cnt"><span class="izq_float file_icon">&nbsp;</span><div class="izq_float name"><b></b></div><div class="formulario_columna_cnt"><div class="izq_float type"></div><div class="izq_float size"></div>'+(a.submitInForm?'<div class="izq_float cancel" style><button>'+e.rup.i18nParse(e.rup.i18n.base,"rup_upload.cancelUpload")+"</button></div>":"")+"</div>"+(a.submitInForm?'<div class="izq_float start fileupload-buttonbar ui-button" style="display:none"><button>'+e.rup.i18nParse(e.rup.i18n.base,"rup_upload.startUpload")+"</button></div>":'<div class="formulario_columna_cnt">'+(n.error?'<div class="izq_float error" ></div>':'<div class="izq_float progress"><div></div></div><div class="izq_float start fileupload-buttonbar ui-button"><button>'+e.rup.i18nParse(e.rup.i18n.base,"rup_upload.startUpload")+"</button></div>")+'<div class="izq_float cancel"><button>'+e.rup.i18nParse(e.rup.i18n.base,"rup_upload.cancelUpload")+"</button></div></div>")+"</td></tr>");o.find(".name b").text(n.name),o.find(".size").text(n.sizef),o.find(".type").text(n.type),n.error&&(o.addClass("ui-state-error"),o.find(".error").text(i.options.errorMessages[n.error]||n.error)),r=r.add(o)}),r},_renderDownloadTemplate:function(t){var i=this,r=e();return e.each(t,function(t,a){a=i._downloadTemplateHelper(a);var n=e('<tr class="template-download"><td>'+(a.error?'<td class="file_icon"></td><td class="name"></td><td class="size"></td><td class="error" colspan="2"></td>':'<div class="formulario_columna_cnt"><span class="izq_float file_icon">&nbsp;</span><div class="izq_float name"><a></a></div></div><div class="formulario_columna_cnt"><div class="izq_float type"></div><div class="izq_float size"></div></div><div class="formulario_columna_cnt"><a><div class="izq_float"><div class="file_download" ><span class="file_download_icon">&nbsp;</span><span class="file_download_text">'+e.rup.i18nParse(e.rup.i18n.base,"rup_upload.openUploaded")+'</span></div></div></a><div class="izq_float delete"><button>'+e.rup.i18nParse(e.rup.i18n.base,"rup_upload.deleteUploaded")+"</button></div></div>")+"</td></tr>");n.find(".size").text(a.sizef),n.find(".type").text(a.type),a.error?(n.find(".name").text(a.name),n.addClass("ui-state-error"),n.find(".error").text(i.options.errorMessages[a.error]||a.error)):(n.find(".name a").text(a.name),a.thumbnail_url&&(n.find(".preview").append("<a><img></a>").find("img").prop("src",a.thumbnail_url),n.find("a").prop("target","_blank")),n.find("a").prop("href",e.rup_utils.setNoPortalParam(a.url)),n.find(".delete button").attr("data-type",a.delete_type).attr("data-url",e.rup_utils.setNoPortalParam(a.delete_url))),r=r.add(n)}),r},_initFileUploadButtonBar:function(){var t=this.element.find(".fileupload-buttonbar"),i=this.element.find(".files"),r=this.options.namespace;t.find(".start").button({icons:{primary:"ui-icon-circle-arrow-e"}}).bind("click."+r,function(e){e.preventDefault(),i.find(".start button").click()}),t.find(".cancel").button({icons:{primary:"ui-icon-cancel"}}).bind("click."+r,function(e){e.preventDefault(),i.find(".cancel button").click()}),t.find(".delete").button({icons:{primary:"ui-icon-trash"}}).bind("click."+r,function(e){e.preventDefault(),i.find(".delete button").click()}),t.find(".toggle").bind("change."+r,function(t){i.find(".delete input").prop("checked",e(this).is(":checked"))})},_getAJAXSettings:function(t){var i=e.extend({},this.options,t);return this._initFormSettings(i),this._initDataSettings(i),i}});var t={};e.extend(e.rup.iniRup,e.rup.rupSelectorObjectConstructor("rup_upload",t)),e.fn.rup_upload("extend",{option:function(t){e(this).fileupload("option",t)},destroy:function(){e(this).fileupload("destroy")},enable:function(){e(this).fileupload("enable")},disable:function(){e(this).fileupload("disable")},add:function(t){e(this).fileupload("add",t)},send:function(t){e(this).fileupload("send",t)}}),e.fn.rup_upload("extend",{_init:function(t){var i=e.extend({},e.fn.rup_upload.defaults,t[0]);if(null!==i.pif){var r=jQuery.extend(!0,e.fn.rup_upload.pif.defaults,i.pif);if(r.userFolder!==!0&&void 0===r.folderPath)return alert("RUP_UPLOAD - No se ha especificado el valor del parámetro folderPath para el uso del PIF."),-1;jQuery.extend(!0,i,{formData:{base_url:i.url,hadoop_folder_path:r.folderPath,hadoop_preserve_name:r.preserveName,y31_ttl:r.fileTtl,securityToken:r.securityToken}})}e.data(this[0],"settings",i),e(this).fileupload(i),i.submitInForm&&e(this).rup_upload("option",{singleFileUploads:!1,maxNumberOfFiles:1,replaceFileInput:!1}),e(this).bind("fileuploadadd",function(t,r){i.submitInForm&&(e(this).find(".template-upload").hide(),e(this).find(".template-upload .cancel button").unbind("click"),e(this).find(".template-upload .cancel button").click())}),e(this).bind("fileuploadsend",function(t,i){i.url=e.rup_utils.setNoPortalParam(i.url)})},_private:function(e){}}),e.fn.rup_upload.defaults={label:null,fileInput:null,submitInForm:!1,submitFormButton:void 0,pif:null},e.fn.rup_upload.pif={},e.fn.rup_upload.pif.defaults={fileTtl:129600,preserveName:!1,_JANO_PUT_SERVLET:"/y31ApiJSWAR/Y31JanoServicePutServlet",securityToken:"app"}}(jQuery),/*!
 * Copyright 2016 E.J.I.E., S.A.
 *
 * Licencia con arreglo a la EUPL, Versión 1.1 exclusivamente (la «Licencia»);
 * Solo podrá usarse esta obra si se respeta la Licencia.
 * Puede obtenerse una copia de la Licencia en
 *
 *      http://ec.europa.eu/idabc/eupl.html
 *
 * Salvo cuando lo exija la legislación aplicable o se acuerde por escrito,
 * el programa distribuido con arreglo a la Licencia se distribuye «TAL CUAL»,
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ni expresas ni implícitas.
 * Véase la Licencia en el idioma concreto que rige los permisos y limitaciones
 * que establece la Licencia.
 */
function(e){function t(e){if(9===e.length){var t=e.substr(0,8);typeof e.substr(e.length-1,e.length);t%=23;var i="TRWAGMYFPDXBNJZSQVHLCKET";return i=i.substring(t,t+1),i==e.substr(e.length-1,e.length).toUpperCase()}return!1}function i(e){return e.replace(/<.[^<>]*?>/g," ").replace(/&nbsp;|&#160;/gi," ").replace(/[0-9.(),;:!?%#$'"_+=\/-]*/g,"")}var r={};e.rup_validate={},e.extend(e.rup.iniRup,e.rup.rupSelectorObjectConstructor("rup_validate",r));var a={},n=new RegExp("\\{\\d\\}");e.each(e.rup.i18n.base.rup_validate.messages,function(e,t){null!==t.match(n)?a[e]=jQuery.validator.format(t):a[e]=t});new RegExp(e.rup.i18n.base.rup_validate.regexp.decimal);e.extend(e.validator.messages,a),jQuery.validator.addMethod("dni",function(e,t){return this.optional(t)||euroNif(e)}),jQuery.validator.addMethod("dni",function(e,i){return this.optional(i)||t(e)}),jQuery.validator.addMethod("maxWords",function(e,t,r){return this.optional(t)||i(e).match(/\b\w+\b/g).length<r}),jQuery.validator.addMethod("minWords",function(e,t,r){return this.optional(t)||i(e).match(/\b\w+\b/g).length>=r}),jQuery.validator.addMethod("rangeWords",function(e,t,r){return this.optional(t)||i(e).match(/\b\w+\b/g).length>=r[0]&&e.match(/bw+b/g).length<r[1]}),jQuery.validator.addMethod("letterswithbasicpunc",function(e,t){return this.optional(t)||/^[a-z-.,()'\"\s]+$/i.test(e)}),jQuery.validator.addMethod("alphanumeric",function(e,t){return this.optional(t)||/^\w+$/i.test(e)}),jQuery.validator.addMethod("lettersonly",function(e,t){return this.optional(t)||/^[a-z]+$/i.test(e)}),jQuery.validator.addMethod("nowhitespace",function(e,t){return this.optional(t)||/^\S+$/i.test(e)}),jQuery.validator.addMethod("integer",function(e,t){return this.optional(t)||/^-?\d+$/.test(e)}),jQuery.validator.addMethod("pattern",function(e,t,i){return this.optional(t)||i.test(e)}),jQuery.validator.addMethod("number",function(t,i){var r=new RegExp(e.rup.i18n.base.rup_validate.regexp.decimal);return this.optional(i)||r.test(t)}),jQuery.validator.addMethod("date",function(t,i,r){var a;if("boolean"==typeof r){if(r!==!0)return!0;a=e.rup.i18n.base.rup_validate.format.date}else a=r;return this.optional(i)||e.rup_validate.checkDate(a,t)}),e.extend(e.rup_validate,{checkDate:function(e,t){var i,r=function(e){return e%4!==0||e%100===0&&e%400!==0?28:29},a=function(e){for(var t=1;t<=e;t++)this[t]=31,4!=t&&6!=t&&9!=t&&11!=t||(this[t]=30),2==t&&(this[t]=29);return this},n={};if(e=e.toLowerCase(),i=e.indexOf("/")!=-1?"/":e.indexOf("-")!=-1?"-":e.indexOf(".")!=-1?".":"/",e=e.split(i),t=t.split(i),3!=t.length)return!1;for(var o,s=-1,l=-1,d=-1,u=0;u<e.length;u++){var c=null===t[u]||""===t[u]||isNaN(t[u])?0:parseInt(t[u],10);n[e[u]]=c,o=e[u],o.indexOf("y")!=-1&&(s=u),o.indexOf("m")!=-1&&(d=u),o.indexOf("d")!=-1&&(l=u)}o="y"==e[s]||"yyyy"==e[s]?4:"yy"==e[s]?2:-1;var p,h=a(12);return s!==-1&&(p=n[e[s]].toString(),2==o&&1==p.length&&(o=1),p.length==o&&(0!==n[e[s]]||"00"==t[s])&&(d!==-1&&(p=n[e[d]].toString(),!(p.length<1||n[e[d]]<1||n[e[d]]>12)&&(l!==-1&&(p=n[e[l]].toString(),!(p.length<1||n[e[l]]<1||n[e[l]]>31||2==n[e[d]]&&n[e[l]]>r(n[e[s]])||n[e[l]]>h[n[e[d]]]))))))}}),e.fn.rup_validate("extend",{destroy:function(){var t=this;t.rup_validate("resetForm"),e.removeData(t[0]),t.unbind()},resetForm:function(){var e=this,t=e.data("settings");null!=t&&void 0!==t.feedback&&t.showErrorsInFeedback&&t.feedback.rup_feedback("hide"),e.validate().resetForm()}}),e.fn.rup_validate("extend",{});var o={defaultPresetSettings:{showErrors:function(t){var i,r,a,n,o,s,l,d,u=this;if(1===u.currentElements.length&&e.isEmptyObject(t)&&delete u.invalid[u.currentElements.attr("name")],r=u.settings.feedback,u.settings.showErrorsInFeedback&&void 0!==r&&null!==r&&(i=e("<ul>").addClass("rup-maint_feedbackUL").prepend(u.settings.feedbackErrorConfig.errorMsg),jQuery.isEmptyObject(u.invalid)?r.rup_feedback("close"):(u.settings.showFieldErrorsInFeedback&&e.each(jQuery.isEmptyObject(u.submitted)?u.invalid:u.submitted,function(e,t){void 0!==u.invalid[e]&&(a=u.settings.feedbackErrorConfig.getField(u,u.currentForm,e),n=u.settings.feedbackErrorConfig.getFieldName(u,u.currentForm,a),o=u.settings.feedbackErrorConfig.getFieldErrorLabel(u,u.currentForm,a,n),s=u.settings.feedbackErrorConfig.getFieldErrorMsg(u,u.currentForm,a,t),o.append(s),i.append(o))}),r.rup_feedback("option",u.settings.feedbackOptions),r.rup_feedback("set",i,"error"))),u.settings.showFieldErrorAsDefault)for(var c=0;u.errorList[c];c++)l=u.errorList[c],void 0!==l.element&&(d=u.errorsFor(l.element),d.length&&d.remove());for(var c=0;c<u.errorList.length;c++)if(void 0===u.errorList[c].element&&alert("El campo validado no existe en el formulario"),e.isArray(u.errorList[c].message)){for(var p="",h=0;h<u.errorList[c].message.length;h++)p+=u.errorList[c].message[h],h!==u.errorList[c].message.length-1&&(p+=", ");u.errorList[c].message=p}e("."+u.settings.errorClass+":not(.rup-maint_validateIcon)",u.currentForm).removeClass(u.settings.errorClass),u.defaultShowErrors()},showErrorsInFeedback:function(e){},errorPlacement:function(t,i){if("combo"===i.attr("ruptype")){var r=e("#"+i.attr("id")+"-button");r&&t.insertAfter(r)}else t.insertAfter(i)}},showFieldErrorAsDefault:{errorElement:"img",errorPlacement:function(t,i){var r=t.attr("src",this.errorImage).addClass("rup-maint_validateIcon").html("").rup_tooltip({applyToPortal:!0});if("combo"===i.attr("ruptype")){var a=e("#"+i.attr("id")+"-button");a&&r.insertAfter(a)}else r.insertAfter(i)}}};e.fn.rup_validate("extend",{_init:function(t){var i=this,r=e.extend(!0,{},e.fn.rup_validate.defaults,o.defaultPresetSettings,t[0]);i.addClass("rup_validate"),i.attr("ruptype","validate"),r.showFieldErrorAsDefault&&(r=e.extend(!0,r,o.showFieldErrorAsDefault)),r=e.extend(!0,{},r,t[0]),i.validate(r),r.showFieldErrorAsDefault&&(i.validate().showLabel=function(t,i){var a=this.errorsFor(t);a.length?(a.removeClass(this.settings.validClass).addClass(this.settings.errorClass),a.attr("generated")&&a.html(i)):(a=r.showFieldErrorAsDefault?e("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(t),generated:!0}).addClass(this.settings.errorClass).attr("title",i||""):e("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(t),generated:!0}).addClass(this.settings.errorClass).html(i||""),this.settings.wrapper&&(a=a.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(a).length||(this.settings.errorPlacement?this.settings.errorPlacement(a,e(t)):a.insertAfter(t))),!i&&this.settings.success&&(a.text(""),"string"==typeof this.settings.success?a.addClass(this.settings.success):this.settings.success(a)),this.toShow=this.toShow.add(a)}),r.liveCheckingErrors||i.unbind("click").unbind("focusin").unbind("focusout").unbind("keyup"),i.on("invalid-form.rupValidate_formValidationError",function(e){i.off("invalid-form.rupValidate_formValidationError"),i.triggerHandler("rupValidate_formValidationError",[this])}),i.data("settings",r)}}),e.fn.rup_validate.defaults={ignore:":hidden[ruptype!='autocomplete'][ruptype!='combo']",feedbackOptions:{gotoTop:!1,fadeSpeed:null,delay:null},feedbackErrorConfig:{errorMsg:e.rup.i18nParse(e.rup.i18n.base,"rup_maint.validateError"),getField:function(t,i,r){return e("[name='"+r+"']",i)},getFieldName:function(e,t,i){var r,a,n,r,o,s=i.attr("ruptype");return n=jQuery(i.length>1?i[0]:i),r=n.attr("name"),o=n.attr("id"),void 0!==s&&("combo"===s&&(o+="-button"),"autocomplete"===s&&(o+="_label")),a=n.parent().find("label[for='"+r+"']"),a.length>0?a.text():(a=n.parent().find("label[for='"+o+"']"),a.length>0?a.text():n.attr("title"))},getFieldErrorLabel:function(t,i,r,a){return e("<li>").append("<b>"+a+":</b>")},getFieldErrorMsg:function(t,i,r,a){if(e.isArray(a)){for(var n=e("<ul>"),o=0;o<a.length;o++)n.append(e("<li>").append(a[o]));return n}return e("<ul>").append(e("<li>").append(a))}},liveCheckingErrors:!1,showErrorsInFeedback:!0,showFieldErrorAsDefault:!0,showFieldErrorsInFeedback:!0,errorImage:e.rup.STATICS+"/rup/basic-theme/images/exclamation.png"}}(jQuery),/*!
 * Copyright 2016 E.J.I.E., S.A.
 *
 * Licencia con arreglo a la EUPL, Versión 1.1 exclusivamente (la «Licencia»);
 * Solo podrá usarse esta obra si se respeta la Licencia.
 * Puede obtenerse una copia de la Licencia en
 *
 *      http://ec.europa.eu/idabc/eupl.html
 *
 * Salvo cuando lo exija la legislación aplicable o se acuerde por escrito, 
 * el programa distribuido con arreglo a la Licencia se distribuye «TAL CUAL»,
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ni expresas ni implícitas.
 * Véase la Licencia en el idioma concreto que rige los permisos y limitaciones
 * que establece la Licencia.
 */
function(e){var t={};e.extend(e.rup.iniRup,e.rup.rupSelectorObjectConstructor("rup_wizard",t)),e.fn.rup_wizard("extend",{step:function(t){if(e("#stepDesc"+t).hasClass("disabled"))return!1;var i=e("#steps li.current").attr("id");e("#steps li").removeClass("current"),e("#stepDesc"+t).addClass("current"),e("#steps li").removeClass("visited"),0!=t&&e("#stepDesc"+(t-1)).addClass("visited"),e("#step"+i.substring(8)).hide(),e("#step"+t).show(),this.rup_wizard("isCurrentStepLast")?(e(".rup-wizard_submitButton").show(),this.rup_wizard("isCurrentStepSummary")||e("#step"+t).find("p[id$='commands']").append(e(".rup-wizard_submitButton"))):e(".rup-wizard_submitButton").hide()},first:function(){this.rup_wizard("step",0)},last:function(){this.rup_wizard("step",e("#steps").children().size()-1)},getCurrentStep:function(){return parseInt(e("#steps li.current").attr("id").substring(8))},isCurrentStep:function(e){return this.rup_wizard("getCurrentStep")===e},isCurrentStepFirst:function(){return this.rup_wizard("isCurrentStep",0)},isCurrentStepLast:function(){return e("#steps").children().size()-1===this.rup_wizard("getCurrentStep")},isCurrentStepSummary:function(){return e("#stepDesc"+this.rup_wizard("getCurrentStep")).hasClass("rup-wizard_summary")},enableStep:function(t){e("#stepDesc"+t).removeClass("disabled")},disableStep:function(t){e("#stepDesc"+t).addClass("disabled")},isStepDisabled:function(t){return e("#stepDesc"+t).hasClass("disabled")}}),e.fn.rup_wizard("extend",{_init:function(t){if(t.length>1)e.rup.errorGestor(e.rup.i18nParse(e.rup.i18n.base,"rup_global.initError")+e(this).attr("id"));else{var i=e.extend({},e.fn.rup_wizard.defaults,t[0]),r=this;if(this._formToWizard(i),e("#steps").addClass("rup-wizard_stepsDescContainer"),e("#steps").children().each(function(t,a){e(a).addClass("rup-wizard_stepDesc").click(function(t){var a=e(this).attr("id").substring(8);if(!r.isStepDisabled(a)){if(void 0!==i.stepFnc[a]&&i.stepFnc[a].call()===!1)return t.stopImmediatePropagation(),!1;e(this).rup_wizard("step",a)}});var n=e(a).children();e(n).text(t+1+". "+e(n).text()),e(a).text("").append(n)}),e("p[id$='commands'] .prev").removeClass("prev").addClass("rup-wizard_prev").text(e.rup.i18nParse(e.rup.i18n.base,"rup_wizard.prev")).unbind("click").click(function(e){r._gotoPrevStep(r,i,e)}),e("p[id$='commands'] .next").removeClass("next").addClass("rup-wizard_next").text(e.rup.i18nParse(e.rup.i18n.base,"rup_wizard.next")).unbind("click").click(function(e){r._gotoNextStep(r,i,e)}),e("#"+i.submitButton).addClass("rup-wizard_submitButton"),i.submitFnc&&e("#"+i.submitButton).click(i.submitFnc),e("#steps li:first").addClass("rup-wizard_firstStepDesc"),e("#steps li:last").addClass("rup-wizard_lastStepDesc"),i.summary){e("#steps li:last").removeClass("rup-wizard_lastStepDesc");var a=e("#steps").children().size(),n=e("<li>").attr("id","stepDesc"+a).addClass("rup-wizard_stepDesc rup-wizard_summary rup-wizard_lastStepDesc").append("<a href='#'>"+(a+1)+". "+e.rup.i18nParse(e.rup.i18n.base,"rup_wizard.summary")+"</a>").click(function(){e(this).rup_wizard("step",e(this).attr("id").substring(8)),r._generateSummary(a,r,i)});if(e("#steps").append(n),a>1){e("div[id='step"+(a-1)+"']").after("<div id='step"+a+"' style='display: none;'/>");var o=e("<a>").attr("id","step"+(a-1)+"Next").html(e.rup.i18nParse(e.rup.i18n.base,"rup_wizard.next")).addClass("rup-wizard_next").unbind("click").click(function(e){r._gotoNextStep(r,i,e),r._generateSummary(a,r,i)});e("#step"+(a-1)+"commands").append(o)}}void 0!==i.disabled&&e.each(i.disabled,function(t,i){if("number"==typeof i)e(this).rup_wizard("disableStep",i);else if("string"==typeof i)for(var r=parseInt(i.substring(0,i.indexOf("-"))),a=parseInt(i.substring(i.indexOf("-")+1,i.length)),n=r;n<=a;n++)e(this).rup_wizard("disableStep",n)})}this.rup_wizard("step",0)},_gotoNextStep:function(t,i,r){var a=parseInt(e("#steps li.current").attr("id").substring(8))+1;if(t.isStepDisabled(a)){if(a=e("#stepDesc"+(a-1)).nextAll("li:not(.disabled)").first().attr("id"),void 0===a)return!1;a=parseInt(a.substring(8)),jQuery("#steps").children().size()-1===a&&t._generateSummary(a,t,i)}return void 0!==i.stepFnc[a]&&e("#stepDesc"+a).not(".rup-wizard_summary").length>0&&i.stepFnc[a].call()===!1?(r.stopImmediatePropagation(),!1):void e("#stepDesc"+a).rup_wizard("step",a)},_gotoPrevStep:function(t,i,r){var a=parseInt(e("#steps li.current").attr("id").substring(8))-1;if(t.isStepDisabled(a)){if(a=e("#stepDesc"+(a+1)).prevAll("li:not(.disabled)").first().attr("id"),void 0===a)return!1;a=parseInt(a.substring(8))}return void 0!==i.stepFnc[a]&&i.stepFnc[a].call()===!1?(r.stopImmediatePropagation(),!1):void e("#stepDesc"+a).rup_wizard("step",a)},_generateSummary:function(t,i,r){if(e("#stepDesc"+t).hasClass("disabled"))return!1;if(e("#step"+t).parent().append(e(".rup-wizard_submitButton")),r.summaryFnc_PRE&&r.summaryFnc_PRE.call()===!1)return!1;e("#step"+t).remove(),e("div[id='step"+(t-1)+"']").after("<div id='step"+t+"' style='display: none;'/>");for(var a=0;a<t;a++)i.isStepDisabled(a)||e("#step"+t).append(e("#step"+a).children().clone());e("#step"+t+" p[id$='commands']").remove(),e("div[id='step"+t+"'] fieldset:last").append("<p id='step"+t+"commands'></p>");var n=e("<a>").attr("id","step"+t+"Prev").html(e.rup.i18nParse(e.rup.i18n.base,"rup_wizard.prev")).addClass("rup-wizard_prev").unbind("click").click(function(e){i._gotoPrevStep(i,r,e)});if(e("#step"+t+"commands").append(n),r.summaryFnc_INTER&&r.summaryFnc_INTER.call()===!1)return!1;e("#step"+t+" .ui-multiselect").each(function(){var t=e("#"+e(this).prev().attr("id"));if(void 0!==t.data("settings")){var i=t.rup_combo("label");if(i.length>0)if(void 0==t.data("settings").summaryInline)for(var a=e("<div />").addClass("rup-wizard_summaryMultivalue").insertAfter(this),n=0;n<i.length;n++)e(r.labelElement,{text:"- "+i[n],"class":"rup-wizard_summaryValue"}).appendTo(a),e("<br/>").appendTo(a);else e(r.labelElement,{text:i.toString().replace(/,/g,", "),"class":"rup-wizard_summaryValue"}).insertAfter(this);else e(r.labelElement,{html:"&nbsp;","class":"rup-wizard_summaryValue"}).insertAfter(this);e(this).prev().remove(),e(this).remove()}}),e("#step"+t+" input").each(function(){"text"===this.type?e(r.labelElement,{text:this.value,"class":"rup-wizard_summaryValue"}).insertAfter(this):"password"===this.type?e(r.labelElement,{text:i._hidePassword(this.value),"class":"rup-wizard_summaryValue"}).insertAfter(this):"radio"===this.type?(this.checked&&(e(r.labelElement,{text:e("#step"+t+" label[for='"+this.id+"']").text(),"class":"rup-wizard_summaryValue"}).insertAfter(this),e("#"+this.id).attr("checked","checked")),e("#step"+t+" label[for='"+this.id+"']").remove()):"checkbox"===this.type&&(this.checked?e(r.labelElement,{text:"[X] "+e("#step"+t+" label[for='"+this.id+"']").text(),"class":"rup-wizard_summaryValue"}).insertAfter(this):e(r.labelElement,{text:"[ ] "+e("#step"+t+" label[for='"+this.id+"']").text(),"class":"rup-wizard_summaryValue"}).insertAfter(this),e("#step"+t+" label[for='"+this.id+"']").remove()),e(this).remove()}),e("#step"+t+" textarea").each(function(){e(r.textareaElement,{text:e("#"+e(this).attr("id")).val(),"class":"rup-wizard_summaryParagraph"}).insertAfter(this),e(this).remove()}),e("#step"+t+" select:not('.ui-pg-selbox')").each(function(){e(r.labelElement,{text:"&nbsp;"!==e("#"+this.id+" option:selected").text()?e("#"+this.id+" option:selected").text():"","class":"rup-wizard_summaryValue"}).insertAfter(this),e(this).remove()}),e("#step"+t+" label").each(function(){e(r.labelSeparatorElement,{html:r.labelSeparatorText,"class":"rup-wizard_separator"}).insertAfter(this),e(r.labelElement,{text:this.innerHTML,"class":"rup-wizard_summaryLabel"}).insertAfter(this),e(this).remove()}),e("#step"+t+" .ui-accordion").each(function(){e(this).attr("id",e(this).attr("id")+"_summary"),e(this).removeAttr("class"),e(this).children("h1").removeAttr("class"),e(this).children("div").removeAttr("class"),e.isEmptyObject(r.rupAccordion)?e(this).rup_accordion(r.accordion):e(this).rup_accordion(r.rupAccordion)}),e("#step"+t+" .rup_combo").each(function(){e(this).remove()}),e("#step"+t+" img.ui-datepicker-trigger").each(function(){e(this).remove()}),e("#step"+t+" img.ui-timepicker-trigger").each(function(){e(this).remove()});var o=0;if(r.summaryTabs2Accordion&&(r.rupTabsElement="<a />"),e("#step"+t+" > fieldset").children(".rup-tabs_container").each(function(){var a=new Array,n=new Array,s=e(this).parent().attr("accordionable",!0),l=new Array;i._getRupTabs(i,e(this),a,n);for(var d=null,u=e(s),c=0;c<a.length;c++)if(d=e(r.rupTabsElement).text(a[c]),n[c].indexOf("rupRandomLayerId")!==-1){if(d=e(d).wrap("<div class='IE8_fix'>"),d=e(d).parent().append(e(this).find(n[c]).html()),e(d).children("div").addClass("rup-wizard_tabLevel-"+l.length),d=e(d).children().unwrap(),0===e("#"+l[l.length-1]).find(n[c]).length){u=e(s);do{if(l.pop(),e("#"+l[l.length-1]).find(n[c]).length>0){u=e("#subtab_"+l[l.length-1]);break}e(e(d).get(1)).removeAttr("class").addClass("rup-wizard_tabLevel-"+l.length)}while(l.length>0)}e(u).append(d)}else d=e(d).attr("tabContainer",!0),d=e(d).wrap("<div class='IE8_fix'>"),d=e(d).parent().append(e("<div>").attr("id","subtab_"+a[c]).attr("accordionable",!0).addClass("rup-wizard_tabContainerLevel-"+l.length)),d=e(d).children().unwrap(),l.push(a[c]),o++,e(u).append(d),u=e("#subtab_"+a[c]);e("#step"+t+" .rup-table-container").each(function(){var t=e(this);t.fluidWidth({fluidBaseLayer:"#"+t.parent().attr("id")})}),r.summaryTabs2Accordion&&e(s).find("a").each(function(){e(this).hasClass("rup-wizard_prev")||e(this).hasClass("rup-wizard_next")||e(this).wrap("<h1>")}),e(this).remove()}),r.summaryWithAccordion&&(e("#step"+t).find("legend").each(function(t,i){e("<a />").text(i.innerHTML).insertBefore(e(i).parent()).wrap("<h1 />"),e(i).parent().replaceWith(e("<div />").attr("accordionable",void 0!==e(i).parent().attr("accordionable")).append(e(i).parent().children())),e(i).remove()}),e.isEmptyObject(r.summaryAccordion)?e("#step"+t).rup_accordion(r.accordion):e("#step"+t).rup_accordion(r.summaryAccordion),e("<fieldset />").attr("id","commands_fieldset").append(e("#step"+t).find("p[id='step"+t+"commands']")).appendTo(e("#step"+t)),r.summaryWithAccordionSpaceBefore&&e("#step"+t).prepend("</br>"),r.summaryWithAccordionSpaceAfter&&e("#commands_fieldset").prepend("</br>")),r.summaryTabs2Accordion){for(var a=0;a<=o;a++)e(".rup-wizard_tabLevel-"+a).removeClass("rup-wizard_tabLevel-"+a),e(".rup-wizard_tabContainerLevel-"+a).removeClass("rup-wizard_tabContainerLevel-"+a);e("[accordionable=true]").each(function(i,a){if("FIELDSET"===a.nodeName){var n=e(a).find("legend")[0],o=e(a).find("p[id='step"+t+"commands']"),s=e("<div />").attr("accordionable",void 0!==e(a).attr("accordionable")).append(e(a).children());e(a).replaceWith(s),e(n).remove(),e(o).remove(),e.isEmptyObject(r.tabAccordion)?e(s).rup_accordion(r.accordion):e(s).rup_accordion(r.tabAccordion),e(s).prepend(n),e(s).append(e("<fieldset />").append(o))}else e.isEmptyObject(r.tabAccordion)?e(a).rup_accordion(r.accordion):e(a).rup_accordion(r.tabAccordion)})}e("[accordionable]").removeAttr("accordionable"),e("#step"+t).find("p[id$='commands']").append(e(".rup-wizard_submitButton")),e("#step"+t).show(),r.summaryFnc_POST&&r.summaryFnc_POST.call()},_getRupTabs:function(t,i,r,a){e(i).find(".rup-tabs_title").each(function(i,n){e.inArray(n.innerHTML,r)===-1&&(a.push(e(n).parent().attr("href")),r.push(n.innerHTML),a[a.length-1].substring(1)===r[r.length-1]&&t._getRupTabs(t,e("#"+r[r.length-1]),r,a))})},_hidePassword:function(e){for(var t="",i=0;i<e.length;i++)t+="*";return t},_formToWizard:function(t){function i(t){var i="step"+t;e("#"+i+"commands").append("<a href='#' id='"+i+"Prev' class='prev'>< Back</a>"),e("#"+i+"Prev").bind("click",function(r){e("#"+i).hide(),e("#step"+(t-1)).show(),e(l).hide(),a(t-1)})}function r(t){var i="step"+t;e("#"+i+"commands").append("<a href='#' id='"+i+"Next' class='next'>Next ></a>"),e("#"+i+"Next").bind("click",function(r){e("#"+i).hide(),e("#step"+(t+1)).show(),t+2==s&&e(l).show(),a(t+1)})}function a(t){e("#steps li").removeClass("current"),e("#stepDesc"+t).addClass("current")}t=e.extend({submitButton:""},t);var n=this,o=e(n).find("fieldset"),s=o.size(),l="#"+t.submitButton;e(l).hide(),e(n).before("<ul id='steps'></ul>"),o.each(function(t){e(this).wrap("<div id='step"+t+"'></div>"),e(this).append("<p id='step"+t+"commands'></p>");var n=e(this).find("legend").html();e("#steps").append("<li id='stepDesc"+t+"'>Step "+(t+1)+"<a href='#'>"+n+"</a></li>"),0==t?(r(t),a(t)):t==s-1?(e("#step"+t).hide(),i(t)):(e("#step"+t).hide(),i(t),r(t))})}}),e.fn.rup_wizard.defaults={summary:!0,summaryWithAccordion:!1,summaryWithAccordionSpaceBefore:!0,summaryWithAccordionSpaceAfter:!0,summaryTabs2Accordion:!1,stepFnc:{},accordion:{animated:"bounceslide",active:!1,autoHeight:!1,collapsible:!0},rupAccordion:{},summaryAccordion:{},tabAccordion:{},rupTabsElement:"<h4 />",labelElement:"<span />",labelSeparatorElement:"<span />",labelSeparatorText:"&nbsp;&nbsp;&nbsp;",textareaElement:"<p />"}}(jQuery),/*!
 * Copyright 2013 E.J.I.E., S.A.
 *
 * Licencia con arreglo a la EUPL, Versión 1.1 exclusivamente (la «Licencia»);
 * Solo podrá usarse esta obra si se respeta la Licencia.
 * Puede obtenerse una copia de la Licencia en
 *
 *      http://ec.europa.eu/idabc/eupl.html
 *
 * Salvo cuando lo exija la legislación aplicable o se acuerde por escrito, 
 * el programa distribuido con arreglo a la Licencia se distribuye «TAL CUAL»,
 * SIN GARANTÍAS NI CONDICIONES DE NINGÚN TIPO, ni expresas ni implícitas.
 * Véase la Licencia en el idioma concreto que rige los permisos y limitaciones
 * que establece la Licencia.
 */
function(e){var t={};e.extend($.rup.iniRup,$.rup.rupSelectorObjectConstructor("rup_tree",t)),e.fn.rup_tree("extend",{getRupValue:function(){var t,i,r=this,a=r.data("settings"),n=r.attr("name");t=e.inArray("checkbox",a.plugins)!==-1?r.rup_tree("get_checked",null,!0):r.rup_tree("get_selected");var o=e.map(t,function(t,n){var o=e(t);return e.isFunction(a.core.getValue)?e.proxy(a.core.getValue,r)(o,o.data()):(i=o.attr("id"),i?i:o.text())});return a.core.submitAsJSON?e.rup_utils.getRupValueAsJson(n,o):a.core.submitAsString?e.rup_utils.getRupValueWrapped(n,o.toString()):e.rup_utils.getRupValueWrapped(n,o)},setRupValue:function(t){var i,r,a,n,o,s=this,l=s.data("settings");s.rup_tree("uncheck_all"),i=s.get_container_ul().find("li"),o=l.core.readAsString===!0?t.split(","):t,e.each(i,function(t,i){r=e(i),e.isFunction(l.core.getValue)?a=e.proxy(l.core.getValue,s)(r,r.data()):(n=r.attr("id"),a=n?n:r.text()),e.inArray(a,o)!==-1&&s.rup_tree("check_node",i)})},rollback:function(t){e.jstree.rollback(t)},get_container:function(){return $(this).jstree("get_container")},get_container_ul:function(){return $(this).jstree("get_container_ul")},destroy:function(){$(this).jstree("destroy")},refresh:function(e){$(this).jstree("refresh",e)},set_focus:function(){$(this).jstree("set_focus")},unset_focus:function(){$(this).jstree("unset_focus")},is_focused:function(){return $(this).jstree("is_focused")},lock:function(){$(this).jstree("lock")},unlock:function(){$(this).jstree("unlock")},is_locked:function(){return $(this).jstree("is_locked")},get_path:function(e,t){return $(this).jstree("get_path",e,t)},open_node:function(e,t,i){$(this).jstree("open_node",e,t,i)},close_node:function(e,t){$(this).jstree("close_node",e,t)},toggle_node:function(e){return $(this).jstree("toggle_node",e)},open_all:function(e,t){$(this).jstree("open_all",e,t)},close_all:function(e,t){$(this).jstree("close_all",e,t)},is_open:function(e){return $(this).jstree("is_open",e)},is_closed:function(e){return $(this).jstree("is_closed",e)},is_leaf:function(e){return $(this).jstree("is_leaf",e)},get_rollback:function(){return $(this).jstree("get_rollback")},create_node:function(e,t,i,r){return $(this).jstree("create_node",e,t,i,r)},get_text:function(e){return $(this).jstree("get_text",e)},rename_node:function(e,t){$(this).jstree("rename_node",e,t)},delete_node:function(e){$(this).jstree("delete_node",e)},check_move:function(){return $(this).jstree("check_move")},move_node:function(e,t,i,r,a,n){return $(this).jstree("move_node",e,t,i,r,a,n)},get_theme:function(){var e=$(this).jstree("get_theme");return"string"!=typeof e?"rup-default":e},set_theme:function(e,t){if("rup-default"!==e){"rup-default"===$(this).rup_tree("get_theme")&&$(this).removeClass("jstree-rup-default");var i=this.data("settings");i.actualThemeUrl=t,this.data("settings",i),$(this).jstree("set_theme",e,t)}else $(this).jstree("set_theme","rup-default",this.data("settings").actualThemeUrl)},show_dots:function(){$(this).jstree("show_dots")},hide_dots:function(){$(this).jstree("hide_dots")},toggle_dots:function(){$(this).jstree("toggle_dots")},show_icons:function(){$(this).jstree("show_icons")},hide_icons:function(){$(this).jstree("hide_icons")},toggle_icons:function(){$(this).jstree("toggle_icons")},save_selected:function(){$(this).jstree("save_selected")},reselect:function(){$(this).jstree("reselect")},refresh:function(e){return $(this).jstree("refresh",e)},hover_node:function(e){$(this).jstree("hover_node",e)},dehover_node:function(){$(this).jstree("dehover_node")},select_node:function(e,t,i){$(this).jstree("select_node",e,t,i)},deselect_node:function(e){$(this).jstree("deselect_node",e)},toggle_select:function(e){$(this).jstree("toggle_select",e)},deselect_all:function(e){$(this).jstree("deselect_all",e)},get_selected:function(e){return $(this).jstree("get_selected",e)},is_selected:function(e){return $(this).jstree("is_selected",e)},enable_hotkeys:function(){$(this).jstree("enable_hotkeys")},disable_hotkeys:function(){$(this).jstree("disable_hotkeys")},change_state:function(e,t){$(this).jstree("change_state",e,t)},check_node:function(e){$(this).jstree("check_node",e)},uncheck_node:function(e){$(this).jstree("uncheck_node",e)},check_all:function(){$(this).jstree("check_all")},uncheck_all:function(){$(this).jstree("uncheck_all")},is_checked:function(e){return $(this).jstree("is_checked",e)},get_checked:function(e,t){return $(this).jstree("get_checked",e,t)},get_unchecked:function(e,t){return $(this).jstree("is_checked",e,t)},show_checkboxes:function(){$(this).jstree("show_checkboxes")},hide_checkboxes:function(){$(this).jstree("hide_checkboxes")},rename:function(e){$(this).jstree("rename",e)},create:function(e,t,i,r,a){return $(this).jstree("create",e,t,i,r,a)},remove:function(e){$(this).jstree("remove",e)},cut:function(e){$(this).jstree("cut",e)},copy:function(e){$(this).jstree("copy",e)},paste:function(e){$(this).jstree("paste",e)},show_contextmenu:function(e,t,i){$(this).jstree("show_contextmenu",e,t,i)},set_type:function(e,t){$(this).jstree("set_type",e,t)}}),e.fn.rup_tree("extend",{_init:function(t){if(t.length>1)e.rup.errorGestor(e.rup.i18n.base.rup_global.initError+e(this).attr("id"));else{t.length>0&&(t[0].select&&(t[0].ui=t[0].select,delete t[0].select),t[0].jQueryUIStyles&&(t[0].themeroller=t[0].jQueryUIStyles,delete t[0].jQueryUIStyles));var i=e.extend(!0,{},e.fn.rup_tree.defaults,t[0]),r=(this[0],this);if(i.$self=$(this),i.$self.attr("ruptype","tree"),void 0!==i.ui&&i.ui.enable===!1||(i.plugins[i.plugins.length]="ui"),void 0!==i.crrm&&i.crrm.enable===!1||(i.plugins[i.plugins.length]="crrm",r.bind("cut.jstree",$.proxy(function(e,t){$(this).find(".rup_tree_cutNode.ui-state-disabled").removeClass("rup_tree_cutNode ui-state-disabled"),t.args[0].children("a").addClass("rup_tree_cutNode ui-state-disabled")},this)),r.bind("copy.jstree",$.proxy(function(e,t){$(this).find(".rup_tree_cutNode.ui-state-disabled").removeClass("rup_tree_cutNode ui-state-disabled")},this)),r.bind("paste.jstree",$.proxy(function(e,t){$(this).find(".rup_tree_cutNode.ui-state-disabled").removeClass("rup_tree_cutNode ui-state-disabled")},this))),void 0!==i.hotkeys&&i.hotkeys.enable===!1||(i.plugins[i.plugins.length]="hotkeys",void 0!==i.crrm&&i.crrm.enable===!1||(e.jstree.defaults.hotkeys.esc=$.proxy(function(e){"BODY"===e.target.tagName&&($(this).jstree("cleanCut"),$(this).find(".rup_tree_cutNode.ui-state-disabled").removeClass("rup_tree_cutNode ui-state-disabled"))},this))),r._eventRecollector(i,r),r.addClass("rup_tree"),void 0!==i.xml_data?i.plugins[i.plugins.length]="xml_data":void 0!==i.json_data?i.plugins[i.plugins.length]="json_data":i.plugins[i.plugins.length]="html_data",void 0!==i.contextmenu&&i.contextmenu.enable===!0?i.plugins[i.plugins.length]="contextmenu":delete i.contextmenu,void 0!==i.sort&&(i.sort.enable===!0?(i.plugins[i.plugins.length]="sort",void 0!==i.sort.sortFunction?i.sort=i.sort.sortFunction:delete i.sort):delete i.sort),void 0!==i.checkbox&&i.checkbox.enable===!0?(i.plugins[i.plugins.length]="checkbox",delete i.checkbox.enable):delete i.checkbox,void 0!==i.wholerow&&i.wholerow===!0&&(i.plugins[i.plugins.length]="wholerow"),void 0!==i.unique&&i.unique.enable===!0?(i.plugins[i.plugins.length]="unique",delete i.unique.enable):delete i.unique,void 0!==i.types&&(i.plugins[i.plugins.length]="types",$.rup_utils.aplicatioInPortal()&&this.get_container().bind("loaded.jstree",$.proxy(function(){$(this).jstree("types_portal_css")},this))),void 0!==i.dnd&&i.dnd.enable===!0?(i.plugins[i.plugins.length]="dnd",delete i.dnd.enable):delete i.dnd,void 0!==i.themeroller?i.themeroller.enable===!0?(i.plugins[i.plugins.length]="themeroller",delete i.themeroller.enable):(i.plugins[i.plugins.length]="themes",delete i.themeroller):i.plugins[i.plugins.length]="themes",r.data("settings",i),r.jstree(i),r.bind("loaded.jstree",$.proxy(function(){this.removeClass("rup_tree")},this)),void 0!==i.themeroller||i.themes.theme||(r.addClass("jstree-rup-default"),$(this).jstree("set_theme_data","rup-default")),void 0!==i.contextmenu&&i.contextmenu.enable===!0){if(delete i.contextmenu.enable,void 0!==i.contextmenu.defaultOptions){var a=this.jstree("get_settings").contextmenu.items,n=i.contextmenu.defaultOptions;for(option in n)if(n[option]===!1)a[option]=null;else if("ccp"===option){var o=n.ccp;for(ccpOption in o)o[ccpOption]===!1&&(a.ccp.submenu[ccpOption]=null)}$(this).jstree("set_contextmenu_items",a),delete i.contextmenu.defaultOptions}}else delete i.contextmenu}},_eventRecollector:function(e,t){var i;for(var r in e)i=r.split("_event"),i.length>1&&this.bind(i[0]+".jstree",e[r])}}),e.fn.rup_tree.defaults={plugins:["rup_extend"],actualThemeUrl:"",core:{strings:{loading:$.rup.i18nParse($.rup.i18n.base,"rup_tree.loading"),new_node:$.rup.i18nParse($.rup.i18n.base,"rup_tree.new_node")},getValue:void 0,submitAsJSON:!1,submitAsString:!1,readAsString:!1},themes:{theme:""},checkbox:{override_ui:!0},crrm:{input_width_limit:200}},e.jstree.defaults.contextmenu.items.create.label=$.rup.i18nParse($.rup.i18n.base,"rup_tree.create"),e.jstree.defaults.contextmenu.items.rename.label=$.rup.i18nParse($.rup.i18n.base,"rup_tree.rename"),e.jstree.defaults.contextmenu.items.remove.label=$.rup.i18nParse($.rup.i18n.base,"rup_tree.remove"),e.jstree.defaults.contextmenu.items.ccp.label=$.rup.i18nParse($.rup.i18n.base,"rup_tree.ccp.label"),e.jstree.defaults.contextmenu.items.ccp.submenu.cut.label=$.rup.i18nParse($.rup.i18n.base,"rup_tree.ccp.cut"),e.jstree.defaults.contextmenu.items.ccp.submenu.copy.label=$.rup.i18nParse($.rup.i18n.base,"rup_tree.ccp.copy"),e.jstree.defaults.contextmenu.items.ccp.submenu.paste.label=$.rup.i18nParse($.rup.i18n.base,"rup_tree.ccp.paste"),e.extend(e.jstree.defaults.hotkeys,$.rup.compatibility.jstree.hotkeys),$.jstree.plugin("rup_extend",$.rup.compatibility.jstree.rup_extend)}(jQuery),/*!
 * jQuery JavaScript Library v1.7.2
 * http://jquery.com/
 *
 * Copyright 2011, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2011, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Wed Mar 21 12:46:34 2012 -0700
 */
function(e,t){function i(e){var t,i,r=q[e]={};for(e=e.split(/\s+/),t=0,i=e.length;t<i;t++)r[e[t]]=!0;return r}function r(e,i,r){if(r===t&&1===e.nodeType){var a="data-"+i.replace(N,"-$1").toLowerCase();if(r=e.getAttribute(a),"string"==typeof r){try{r="true"===r||"false"!==r&&("null"===r?null:E.isNumeric(r)?+r:R.test(r)?E.parseJSON(r):r)}catch(n){}E.data(e,i,r)}else r=t}return r}function a(e){for(var t in e)if(("data"!==t||!E.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function n(e,t,i){var r=t+"defer",a=t+"queue",n=t+"mark",o=E._data(e,r);!o||"queue"!==i&&E._data(e,a)||"mark"!==i&&E._data(e,n)||setTimeout(function(){E._data(e,a)||E._data(e,n)||(E.removeData(e,r,!0),o.fire())},0)}function o(){return!1}function s(){return!0}function l(e){return!e||!e.parentNode||11===e.parentNode.nodeType}function d(e,t,i){if(t=t||0,E.isFunction(t))return E.grep(e,function(e,r){var a=!!t.call(e,r,e);return a===i});if(t.nodeType)return E.grep(e,function(e,r){return e===t===i});if("string"==typeof t){var r=E.grep(e,function(e){return 1===e.nodeType});if(ue.test(t))return E.filter(t,r,!i);t=E.filter(t,r)}return E.grep(e,function(e,r){return E.inArray(e,t)>=0===i})}function u(e){var t=fe.split("|"),i=e.createDocumentFragment();if(i.createElement)for(;t.length;)i.createElement(t.pop());return i}function c(e,t){return E.nodeName(e,"table")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function p(e,t){if(1===t.nodeType&&E.hasData(e)){var i,r,a,n=E._data(e),o=E._data(t,n),s=n.events;if(s){delete o.handle,o.events={};for(i in s)for(r=0,a=s[i].length;r<a;r++)E.event.add(t,i,s[i][r])}o.data&&(o.data=E.extend({},o.data))}}function h(e,t){var i;1===t.nodeType&&(t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),i=t.nodeName.toLowerCase(),"object"===i?t.outerHTML=e.outerHTML:"input"!==i||"checkbox"!==e.type&&"radio"!==e.type?"option"===i?t.selected=e.defaultSelected:"input"===i||"textarea"===i?t.defaultValue=e.defaultValue:"script"===i&&t.text!==e.text&&(t.text=e.text):(e.checked&&(t.defaultChecked=t.checked=e.checked),t.value!==e.value&&(t.value=e.value)),t.removeAttribute(E.expando),t.removeAttribute("_submit_attached"),t.removeAttribute("_change_attached"))}function f(e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName("*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll("*"):[]}function g(e){"checkbox"!==e.type&&"radio"!==e.type||(e.defaultChecked=e.checked)}function m(e){var t=(e.nodeName||"").toLowerCase();"input"===t?g(e):"script"!==t&&"undefined"!=typeof e.getElementsByTagName&&E.grep(e.getElementsByTagName("input"),g)}function v(e){var t=F.createElement("div");return Te.appendChild(t),t.innerHTML=e.outerHTML,t.firstChild}function b(e,t,i){var r="width"===t?e.offsetWidth:e.offsetHeight,a="width"===t?1:0,n=4;if(r>0){if("border"!==i)for(;a<n;a+=2)i||(r-=parseFloat(E.css(e,"padding"+Ge[a]))||0),"margin"===i?r+=parseFloat(E.css(e,i+Ge[a]))||0:r-=parseFloat(E.css(e,"border"+Ge[a]+"Width"))||0;return r+"px"}if(r=Pe(e,t),(r<0||null==r)&&(r=e.style[t]),qe.test(r))return r;if(r=parseFloat(r)||0,i)for(;a<n;a+=2)r+=parseFloat(E.css(e,"padding"+Ge[a]))||0,"padding"!==i&&(r+=parseFloat(E.css(e,"border"+Ge[a]+"Width"))||0),"margin"===i&&(r+=parseFloat(E.css(e,i+Ge[a]))||0);return r+"px"}function _(e){return function(t,i){if("string"!=typeof t&&(i=t,t="*"),E.isFunction(i))for(var r,a,n,o=t.toLowerCase().split(tt),s=0,l=o.length;s<l;s++)r=o[s],n=/^\+/.test(r),n&&(r=r.substr(1)||"*"),a=e[r]=e[r]||[],a[n?"unshift":"push"](i)}}function y(e,i,r,a,n,o){n=n||i.dataTypes[0],o=o||{},o[n]=!0;for(var s,l=e[n],d=0,u=l?l.length:0,c=e===nt;d<u&&(c||!s);d++)s=l[d](i,r,a),"string"==typeof s&&(!c||o[s]?s=t:(i.dataTypes.unshift(s),s=y(e,i,r,a,s,o)));return!c&&s||o["*"]||(s=y(e,i,r,a,"*",o)),s}function x(e,i){var r,a,n=E.ajaxSettings.flatOptions||{};for(r in i)i[r]!==t&&((n[r]?e:a||(a={}))[r]=i[r]);a&&E.extend(!0,e,a)}function w(e,t,i,r){if(E.isArray(t))E.each(t,function(t,a){i||He.test(e)?r(e,a):w(e+"["+("object"==typeof a?t:"")+"]",a,i,r)});else if(i||"object"!==E.type(t))r(e,t);else for(var a in t)w(e+"["+a+"]",t[a],i,r)}function j(e,i,r){var a,n,o,s,l=e.contents,d=e.dataTypes,u=e.responseFields;for(n in u)n in r&&(i[u[n]]=r[n]);for(;"*"===d[0];)d.shift(),a===t&&(a=e.mimeType||i.getResponseHeader("content-type"));if(a)for(n in l)if(l[n]&&l[n].test(a)){d.unshift(n);break}if(d[0]in r)o=d[0];else{for(n in r){if(!d[0]||e.converters[n+" "+d[0]]){o=n;break}s||(s=n)}o=o||s}if(o)return o!==d[0]&&d.unshift(o),r[o]}function k(e,i){e.dataFilter&&(i=e.dataFilter(i,e.dataType));var r,a,n,o,s,l,d,u,c=e.dataTypes,p={},h=c.length,f=c[0];for(r=1;r<h;r++){if(1===r)for(a in e.converters)"string"==typeof a&&(p[a.toLowerCase()]=e.converters[a]);if(o=f,f=c[r],"*"===f)f=o;else if("*"!==o&&o!==f){if(s=o+" "+f,l=p[s]||p["* "+f],!l){u=t;for(d in p)if(n=d.split(" "),(n[0]===o||"*"===n[0])&&(u=p[n[1]+" "+f])){d=p[d],d===!0?l=u:u===!0&&(l=d);break}}l||u||E.error("No conversion from "+s.replace(" "," to ")),l!==!0&&(i=l?l(i):u(d(i)))}}return i}function C(){try{return new e.XMLHttpRequest}catch(t){}}function D(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function S(){return setTimeout(T,0),vt=E.now()}function T(){vt=t}function P(e,t){var i={};return E.each(xt.concat.apply([],xt.slice(0,t)),function(){i[this]=e}),i}function I(e){if(!bt[e]){var t=F.body,i=E("<"+e+">").appendTo(t),r=i.css("display");i.remove(),"none"!==r&&""!==r||(ft||(ft=F.createElement("iframe"),ft.frameBorder=ft.width=ft.height=0),t.appendChild(ft),gt&&ft.createElement||(gt=(ft.contentWindow||ft.contentDocument).document,gt.write((E.support.boxModel?"<!doctype html>":"")+"<html><body>"),gt.close()),i=gt.createElement(e),gt.body.appendChild(i),r=E.css(i,"display"),t.removeChild(ft)),bt[e]=r}return bt[e]}function $(e){return E.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}var F=e.document,M=e.navigator,A=e.location,E=function(){function i(){if(!s.isReady){try{F.documentElement.doScroll("left")}catch(e){return void setTimeout(i,1)}s.ready()}}var r,a,n,o,s=function(e,t){return new s.fn.init(e,t,r)},l=e.jQuery,d=e.$,u=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,c=/\S/,p=/^\s+/,h=/\s+$/,f=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,g=/^[\],:{}\s]*$/,m=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,v=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,b=/(?:^|:|,)(?:\s*\[)+/g,_=/(webkit)[ \/]([\w.]+)/,y=/(opera)(?:.*version)?[ \/]([\w.]+)/,x=/(msie) ([\w.]+)/,w=/(mozilla)(?:.*? rv:([\w.]+))?/,j=/-([a-z]|[0-9])/gi,k=/^-ms-/,C=function(e,t){return(t+"").toUpperCase()},D=M.userAgent,S=Object.prototype.toString,T=Object.prototype.hasOwnProperty,P=Array.prototype.push,I=Array.prototype.slice,$=String.prototype.trim,A=Array.prototype.indexOf,E={};return s.fn=s.prototype={constructor:s,init:function(e,i,r){var a,n,o,l;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if("body"===e&&!i&&F.body)return this.context=F,this[0]=F.body,this.selector=e,this.length=1,this;if("string"==typeof e){if(a="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:u.exec(e),!a||!a[1]&&i)return!i||i.jquery?(i||r).find(e):this.constructor(i).find(e);if(a[1])return i=i instanceof s?i[0]:i,l=i?i.ownerDocument||i:F,o=f.exec(e),o?s.isPlainObject(i)?(e=[F.createElement(o[1])],s.fn.attr.call(e,i,!0)):e=[l.createElement(o[1])]:(o=s.buildFragment([a[1]],[l]),e=(o.cacheable?s.clone(o.fragment):o.fragment).childNodes),s.merge(this,e);if(n=F.getElementById(a[2]),n&&n.parentNode){if(n.id!==a[2])return r.find(e);this.length=1,this[0]=n}return this.context=F,this.selector=e,this}return s.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),s.makeArray(e,this))},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return I.call(this,0)},get:function(e){return null==e?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,i){var r=this.constructor();return s.isArray(e)?P.apply(r,e):s.merge(r,e),r.prevObject=this,r.context=this.context,"find"===t?r.selector=this.selector+(this.selector?" ":"")+i:t&&(r.selector=this.selector+"."+t+"("+i+")"),r},each:function(e,t){return s.each(this,e,t)},ready:function(e){return s.bindReady(),n.add(e),this},eq:function(e){return e=+e,e===-1?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(I.apply(this,arguments),"slice",I.call(arguments).join(","))},map:function(e){return this.pushStack(s.map(this,function(t,i){return e.call(t,i,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:P,sort:[].sort,splice:[].splice},s.fn.init.prototype=s.fn,s.extend=s.fn.extend=function(){var e,i,r,a,n,o,l=arguments[0]||{},d=1,u=arguments.length,c=!1;for("boolean"==typeof l&&(c=l,l=arguments[1]||{},d=2),"object"==typeof l||s.isFunction(l)||(l={}),u===d&&(l=this,--d);d<u;d++)if(null!=(e=arguments[d]))for(i in e)r=l[i],a=e[i],l!==a&&(c&&a&&(s.isPlainObject(a)||(n=s.isArray(a)))?(n?(n=!1,o=r&&s.isArray(r)?r:[]):o=r&&s.isPlainObject(r)?r:{},l[i]=s.extend(c,o,a)):a!==t&&(l[i]=a));return l},s.extend({noConflict:function(t){return e.$===s&&(e.$=d),t&&e.jQuery===s&&(e.jQuery=l),s},isReady:!1,readyWait:1,holdReady:function(e){e?s.readyWait++:s.ready(!0)},ready:function(e){if(e===!0&&!--s.readyWait||e!==!0&&!s.isReady){if(!F.body)return setTimeout(s.ready,1);if(s.isReady=!0,e!==!0&&--s.readyWait>0)return;n.fireWith(F,[s]),s.fn.trigger&&s(F).trigger("ready").off("ready")}},bindReady:function(){if(!n){if(n=s.Callbacks("once memory"),"complete"===F.readyState)return setTimeout(s.ready,1);if(F.addEventListener)F.addEventListener("DOMContentLoaded",o,!1),e.addEventListener("load",s.ready,!1);else if(F.attachEvent){F.attachEvent("onreadystatechange",o),e.attachEvent("onload",s.ready);var t=!1;try{t=null==e.frameElement}catch(r){}F.documentElement.doScroll&&t&&i()}}},isFunction:function(e){return"function"===s.type(e)},isArray:Array.isArray||function(e){return"array"===s.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):E[S.call(e)]||"object"},isPlainObject:function(e){if(!e||"object"!==s.type(e)||e.nodeType||s.isWindow(e))return!1;try{if(e.constructor&&!T.call(e,"constructor")&&!T.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}var r;for(r in e);return r===t||T.call(e,r)},isEmptyObject:function(e){for(var t in e)return!1;return!0},error:function(e){throw new Error(e)},parseJSON:function(t){return"string"==typeof t&&t?(t=s.trim(t),e.JSON&&e.JSON.parse?e.JSON.parse(t):g.test(t.replace(m,"@").replace(v,"]").replace(b,""))?new Function("return "+t)():void s.error("Invalid JSON: "+t)):null},parseXML:function(i){if("string"!=typeof i||!i)return null;var r,a;try{e.DOMParser?(a=new DOMParser,r=a.parseFromString(i,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(i))}catch(n){r=t}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length||s.error("Invalid XML: "+i),r},noop:function(){},globalEval:function(t){t&&c.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(k,"ms-").replace(j,C)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toUpperCase()===t.toUpperCase()},each:function(e,i,r){var a,n=0,o=e.length,l=o===t||s.isFunction(e);if(r)if(l){for(a in e)if(i.apply(e[a],r)===!1)break}else for(;n<o&&i.apply(e[n++],r)!==!1;);else if(l){for(a in e)if(i.call(e[a],a,e[a])===!1)break}else for(;n<o&&i.call(e[n],n,e[n++])!==!1;);return e},trim:$?function(e){return null==e?"":$.call(e)}:function(e){return null==e?"":e.toString().replace(p,"").replace(h,"")},makeArray:function(e,t){var i=t||[];if(null!=e){var r=s.type(e);null==e.length||"string"===r||"function"===r||"regexp"===r||s.isWindow(e)?P.call(i,e):s.merge(i,e)}return i},inArray:function(e,t,i){var r;if(t){if(A)return A.call(t,e,i);for(r=t.length,i=i?i<0?Math.max(0,r+i):i:0;i<r;i++)if(i in t&&t[i]===e)return i}return-1},merge:function(e,i){var r=e.length,a=0;if("number"==typeof i.length)for(var n=i.length;a<n;a++)e[r++]=i[a];else for(;i[a]!==t;)e[r++]=i[a++];return e.length=r,e},grep:function(e,t,i){var r,a=[];i=!!i;for(var n=0,o=e.length;n<o;n++)r=!!t(e[n],n),i!==r&&a.push(e[n]);return a},map:function(e,i,r){var a,n,o=[],l=0,d=e.length,u=e instanceof s||d!==t&&"number"==typeof d&&(d>0&&e[0]&&e[d-1]||0===d||s.isArray(e));if(u)for(;l<d;l++)a=i(e[l],l,r),null!=a&&(o[o.length]=a);else for(n in e)a=i(e[n],n,r),null!=a&&(o[o.length]=a);return o.concat.apply([],o)},guid:1,proxy:function(e,i){if("string"==typeof i){var r=e[i];i=e,e=r}if(!s.isFunction(e))return t;var a=I.call(arguments,2),n=function(){return e.apply(i,a.concat(I.call(arguments)))};return n.guid=e.guid=e.guid||n.guid||s.guid++,n},access:function(e,i,r,a,n,o,l){var d,u=null==r,c=0,p=e.length;if(r&&"object"==typeof r){for(c in r)s.access(e,i,c,r[c],1,o,a);n=1}else if(a!==t){if(d=l===t&&s.isFunction(a),u&&(d?(d=i,i=function(e,t,i){return d.call(s(e),i)}):(i.call(e,a),i=null)),i)for(;c<p;c++)i(e[c],r,d?a.call(e[c],c,i(e[c],r)):a,l);n=1}return n?e:u?i.call(e):p?i(e[0],r):o},now:function(){return(new Date).getTime()},uaMatch:function(e){e=e.toLowerCase();var t=_.exec(e)||y.exec(e)||x.exec(e)||e.indexOf("compatible")<0&&w.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},sub:function(){function e(t,i){return new e.fn.init(t,i)}s.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(i,r){return r&&r instanceof s&&!(r instanceof e)&&(r=e(r)),s.fn.init.call(this,i,r,t)},e.fn.init.prototype=e.fn;var t=e(F);return e},browser:{}}),s.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){E["[object "+t+"]"]=t.toLowerCase()}),a=s.uaMatch(D),a.browser&&(s.browser[a.browser]=!0,s.browser.version=a.version),s.browser.webkit&&(s.browser.safari=!0),c.test(" ")&&(p=/^[\s\xA0]+/,h=/[\s\xA0]+$/),r=s(F),F.addEventListener?o=function(){F.removeEventListener("DOMContentLoaded",o,!1),s.ready()}:F.attachEvent&&(o=function(){"complete"===F.readyState&&(F.detachEvent("onreadystatechange",o),s.ready())}),s}(),q={};E.Callbacks=function(e){e=e?q[e]||i(e):{};var r,a,n,o,s,l,d=[],u=[],c=function(t){var i,r,a,n;for(i=0,r=t.length;i<r;i++)a=t[i],n=E.type(a),"array"===n?c(a):"function"===n&&(e.unique&&h.has(a)||d.push(a))},p=function(t,i){for(i=i||[],r=!e.memory||[t,i],a=!0,n=!0,l=o||0,o=0,s=d.length;d&&l<s;l++)if(d[l].apply(t,i)===!1&&e.stopOnFalse){r=!0;break}n=!1,d&&(e.once?r===!0?h.disable():d=[]:u&&u.length&&(r=u.shift(),h.fireWith(r[0],r[1])))},h={add:function(){if(d){var e=d.length;c(arguments),n?s=d.length:r&&r!==!0&&(o=e,p(r[0],r[1]))}return this},remove:function(){if(d)for(var t=arguments,i=0,r=t.length;i<r;i++)for(var a=0;a<d.length&&(t[i]!==d[a]||(n&&a<=s&&(s--,a<=l&&l--),d.splice(a--,1),!e.unique));a++);return this},has:function(e){if(d)for(var t=0,i=d.length;t<i;t++)if(e===d[t])return!0;return!1},empty:function(){return d=[],this},disable:function(){return d=u=r=t,this},disabled:function(){return!d},lock:function(){return u=t,r&&r!==!0||h.disable(),this},locked:function(){return!u},fireWith:function(t,i){return u&&(n?e.once||u.push([t,i]):e.once&&r||p(t,i)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!a}};return h};var O=[].slice;E.extend({Deferred:function(e){var t,i=E.Callbacks("once memory"),r=E.Callbacks("once memory"),a=E.Callbacks("memory"),n="pending",o={resolve:i,reject:r,notify:a},s={done:i.add,fail:r.add,progress:a.add,state:function(){return n},isResolved:i.fired,isRejected:r.fired,then:function(e,t,i){return l.done(e).fail(t).progress(i),this},always:function(){return l.done.apply(l,arguments).fail.apply(l,arguments),this},pipe:function(e,t,i){return E.Deferred(function(r){E.each({done:[e,"resolve"],fail:[t,"reject"],progress:[i,"notify"]},function(e,t){var i,a=t[0],n=t[1];E.isFunction(a)?l[e](function(){i=a.apply(this,arguments),i&&E.isFunction(i.promise)?i.promise().then(r.resolve,r.reject,r.notify):r[n+"With"](this===l?r:this,[i])}):l[e](r[n])})}).promise()},promise:function(e){if(null==e)e=s;else for(var t in s)e[t]=s[t];return e}},l=s.promise({});for(t in o)l[t]=o[t].fire,l[t+"With"]=o[t].fireWith;return l.done(function(){n="resolved"},r.disable,a.lock).fail(function(){n="rejected"},i.disable,a.lock),e&&e.call(l,l),l},when:function(e){function t(e){return function(t){r[e]=arguments.length>1?O.call(arguments,0):t,--s||l.resolveWith(l,r)}}function i(e){return function(t){o[e]=arguments.length>1?O.call(arguments,0):t,l.notifyWith(d,o)}}var r=O.call(arguments,0),a=0,n=r.length,o=new Array(n),s=n,l=n<=1&&e&&E.isFunction(e.promise)?e:E.Deferred(),d=l.promise();if(n>1){for(;a<n;a++)r[a]&&r[a].promise&&E.isFunction(r[a].promise)?r[a].promise().then(t(a),l.reject,i(a)):--s;s||l.resolveWith(l,r)}else l!==e&&l.resolveWith(l,n?[e]:[]);return d}}),E.support=function(){var t,i,r,a,n,o,s,l,d,u,c,p=F.createElement("div");F.documentElement;if(p.setAttribute("className","t"),p.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",i=p.getElementsByTagName("*"),r=p.getElementsByTagName("a")[0],!i||!i.length||!r)return{};a=F.createElement("select"),n=a.appendChild(F.createElement("option")),o=p.getElementsByTagName("input")[0],t={leadingWhitespace:3===p.firstChild.nodeType,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:"/a"===r.getAttribute("href"),opacity:/^0.55/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:"on"===o.value,optSelected:n.selected,getSetAttribute:"t"!==p.className,enctype:!!F.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==F.createElement("nav").cloneNode(!0).outerHTML,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,pixelMargin:!0},E.boxModel=t.boxModel="CSS1Compat"===F.compatMode,o.checked=!0,t.noCloneChecked=o.cloneNode(!0).checked,a.disabled=!0,t.optDisabled=!n.disabled;try{delete p.test}catch(h){t.deleteExpando=!1}if(!p.addEventListener&&p.attachEvent&&p.fireEvent&&(p.attachEvent("onclick",function(){t.noCloneEvent=!1}),p.cloneNode(!0).fireEvent("onclick")),o=F.createElement("input"),o.value="t",o.setAttribute("type","radio"),t.radioValue="t"===o.value,o.setAttribute("checked","checked"),o.setAttribute("name","t"),p.appendChild(o),s=F.createDocumentFragment(),s.appendChild(p.lastChild),t.checkClone=s.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=o.checked,s.removeChild(o),s.appendChild(p),p.attachEvent)for(u in{submit:1,change:1,focusin:1})d="on"+u,c=d in p,c||(p.setAttribute(d,"return;"),c="function"==typeof p[d]),t[u+"Bubbles"]=c;return s.removeChild(p),s=a=n=p=o=null,E(function(){var i,r,a,n,o,s,d,u,h,f,g,m,v=F.getElementsByTagName("body")[0];v&&(d=1,m="padding:0;margin:0;border:",f="position:absolute;top:0;left:0;width:1px;height:1px;",g=m+"0;visibility:hidden;",u="style='"+f+m+"5px solid #000;",h="<div "+u+"display:block;'><div style='"+m+"0;display:block;overflow:hidden;'></div></div><table "+u+"' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",i=F.createElement("div"),i.style.cssText=g+"width:0;height:0;position:static;top:0;margin-top:"+d+"px",v.insertBefore(i,v.firstChild),p=F.createElement("div"),i.appendChild(p),p.innerHTML="<table><tr><td style='"+m+"0;display:none'></td><td>t</td></tr></table>",l=p.getElementsByTagName("td"),c=0===l[0].offsetHeight,l[0].style.display="",l[1].style.display="none",t.reliableHiddenOffsets=c&&0===l[0].offsetHeight,e.getComputedStyle&&(p.innerHTML="",s=F.createElement("div"),s.style.width="0",s.style.marginRight="0",p.style.width="2px",p.appendChild(s),t.reliableMarginRight=0===(parseInt((e.getComputedStyle(s,null)||{marginRight:0}).marginRight,10)||0)),"undefined"!=typeof p.style.zoom&&(p.innerHTML="",p.style.width=p.style.padding="1px",p.style.border=0,p.style.overflow="hidden",p.style.display="inline",p.style.zoom=1,t.inlineBlockNeedsLayout=3===p.offsetWidth,p.style.display="block",p.style.overflow="visible",p.innerHTML="<div style='width:5px;'></div>",t.shrinkWrapBlocks=3!==p.offsetWidth),p.style.cssText=f+g,p.innerHTML=h,r=p.firstChild,a=r.firstChild,n=r.nextSibling.firstChild.firstChild,o={doesNotAddBorder:5!==a.offsetTop,doesAddBorderForTableAndCells:5===n.offsetTop},a.style.position="fixed",a.style.top="20px",o.fixedPosition=20===a.offsetTop||15===a.offsetTop,a.style.position=a.style.top="",r.style.overflow="hidden",r.style.position="relative",o.subtractsBorderForOverflowNotVisible=a.offsetTop===-5,o.doesNotIncludeMarginInBodyOffset=v.offsetTop!==d,e.getComputedStyle&&(p.style.marginTop="1%",t.pixelMargin="1%"!==(e.getComputedStyle(p,null)||{marginTop:0}).marginTop),"undefined"!=typeof i.style.zoom&&(i.style.zoom=1),v.removeChild(i),s=p=i=null,E.extend(t,o))}),t}();var R=/^(?:\{.*\}|\[.*\])$/,N=/([A-Z])/g;E.extend({cache:{},uuid:0,expando:"jQuery"+(E.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?E.cache[e[E.expando]]:e[E.expando],!!e&&!a(e)},data:function(e,i,r,a){if(E.acceptData(e)){var n,o,s,l=E.expando,d="string"==typeof i,u=e.nodeType,c=u?E.cache:e,p=u?e[l]:e[l]&&l,h="events"===i;if(p&&c[p]&&(h||a||c[p].data)||!d||r!==t)return p||(u?e[l]=p=++E.uuid:p=l),c[p]||(c[p]={},u||(c[p].toJSON=E.noop)),"object"!=typeof i&&"function"!=typeof i||(a?c[p]=E.extend(c[p],i):c[p].data=E.extend(c[p].data,i)),n=o=c[p],a||(o.data||(o.data={}),o=o.data),r!==t&&(o[E.camelCase(i)]=r),h&&!o[i]?n.events:(d?(s=o[i],null==s&&(s=o[E.camelCase(i)])):s=o,s)}},removeData:function(e,t,i){if(E.acceptData(e)){var r,n,o,s=E.expando,l=e.nodeType,d=l?E.cache:e,u=l?e[s]:s;if(d[u]){if(t&&(r=i?d[u]:d[u].data)){E.isArray(t)||(t in r?t=[t]:(t=E.camelCase(t),t=t in r?[t]:t.split(" ")));for(n=0,o=t.length;n<o;n++)delete r[t[n]];if(!(i?a:E.isEmptyObject)(r))return}(i||(delete d[u].data,a(d[u])))&&(E.support.deleteExpando||!d.setInterval?delete d[u]:d[u]=null,l&&(E.support.deleteExpando?delete e[s]:e.removeAttribute?e.removeAttribute(s):e[s]=null))}}},_data:function(e,t,i){return E.data(e,t,i,!0)},acceptData:function(e){if(e.nodeName){var t=E.noData[e.nodeName.toLowerCase()];if(t)return!(t===!0||e.getAttribute("classid")!==t)}return!0}}),E.fn.extend({data:function(e,i){var a,n,o,s,l,d=this[0],u=0,c=null;if(e===t){if(this.length&&(c=E.data(d),1===d.nodeType&&!E._data(d,"parsedAttrs"))){for(o=d.attributes,l=o.length;u<l;u++)s=o[u].name,0===s.indexOf("data-")&&(s=E.camelCase(s.substring(5)),r(d,s,c[s]));E._data(d,"parsedAttrs",!0)}return c}return"object"==typeof e?this.each(function(){E.data(this,e)}):(a=e.split(".",2),a[1]=a[1]?"."+a[1]:"",n=a[1]+"!",E.access(this,function(i){return i===t?(c=this.triggerHandler("getData"+n,[a[0]]),c===t&&d&&(c=E.data(d,e),c=r(d,e,c)),c===t&&a[1]?this.data(a[0]):c):(a[1]=i,void this.each(function(){var t=E(this);t.triggerHandler("setData"+n,a),E.data(this,e,i),t.triggerHandler("changeData"+n,a)}))},null,i,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){E.removeData(this,e)})}}),E.extend({_mark:function(e,t){e&&(t=(t||"fx")+"mark",E._data(e,t,(E._data(e,t)||0)+1))},_unmark:function(e,t,i){if(e!==!0&&(i=t,t=e,e=!1),t){i=i||"fx";var r=i+"mark",a=e?0:(E._data(t,r)||1)-1;a?E._data(t,r,a):(E.removeData(t,r,!0),n(t,i,"mark"))}},queue:function(e,t,i){var r;if(e)return t=(t||"fx")+"queue",r=E._data(e,t),i&&(!r||E.isArray(i)?r=E._data(e,t,E.makeArray(i)):r.push(i)),r||[]},dequeue:function(e,t){t=t||"fx";var i=E.queue(e,t),r=i.shift(),a={};"inprogress"===r&&(r=i.shift()),r&&("fx"===t&&i.unshift("inprogress"),E._data(e,t+".run",a),r.call(e,function(){E.dequeue(e,t)},a)),i.length||(E.removeData(e,t+"queue "+t+".run",!0),n(e,t,"queue"))}}),E.fn.extend({queue:function(e,i){var r=2;return"string"!=typeof e&&(i=e,e="fx",r--),arguments.length<r?E.queue(this[0],e):i===t?this:this.each(function(){var t=E.queue(this,e,i);"fx"===e&&"inprogress"!==t[0]&&E.dequeue(this,e)})},dequeue:function(e){return this.each(function(){E.dequeue(this,e)})},delay:function(e,t){return e=E.fx?E.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,i){var r=setTimeout(t,e);i.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,i){function r(){--l||n.resolveWith(o,[o])}"string"!=typeof e&&(i=e,e=t),e=e||"fx";for(var a,n=E.Deferred(),o=this,s=o.length,l=1,d=e+"defer",u=e+"queue",c=e+"mark";s--;)(a=E.data(o[s],d,t,!0)||(E.data(o[s],u,t,!0)||E.data(o[s],c,t,!0))&&E.data(o[s],d,E.Callbacks("once memory"),!0))&&(l++,a.add(r));return r(),n.promise(i)}});var G,L,z,Q=/[\n\t\r]/g,H=/\s+/,B=/\r/g,W=/^(?:button|input)$/i,U=/^(?:button|input|object|select|textarea)$/i,V=/^a(?:rea)?$/i,K=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,X=E.support.getSetAttribute;E.fn.extend({attr:function(e,t){return E.access(this,E.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){E.removeAttr(this,e)})},prop:function(e,t){return E.access(this,E.prop,e,t,arguments.length>1)},removeProp:function(e){return e=E.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(i){}})},addClass:function(e){var t,i,r,a,n,o,s;if(E.isFunction(e))return this.each(function(t){E(this).addClass(e.call(this,t,this.className))});if(e&&"string"==typeof e)for(t=e.split(H),i=0,r=this.length;i<r;i++)if(a=this[i],1===a.nodeType)if(a.className||1!==t.length){for(n=" "+a.className+" ",o=0,s=t.length;o<s;o++)~n.indexOf(" "+t[o]+" ")||(n+=t[o]+" ");a.className=E.trim(n)}else a.className=e;return this},removeClass:function(e){var i,r,a,n,o,s,l;if(E.isFunction(e))return this.each(function(t){E(this).removeClass(e.call(this,t,this.className))});if(e&&"string"==typeof e||e===t)for(i=(e||"").split(H),r=0,a=this.length;r<a;r++)if(n=this[r],1===n.nodeType&&n.className)if(e){for(o=(" "+n.className+" ").replace(Q," "),s=0,l=i.length;s<l;s++)o=o.replace(" "+i[s]+" "," ");n.className=E.trim(o)}else n.className="";return this},toggleClass:function(e,t){var i=typeof e,r="boolean"==typeof t;return E.isFunction(e)?this.each(function(i){E(this).toggleClass(e.call(this,i,this.className,t),t)}):this.each(function(){if("string"===i)for(var a,n=0,o=E(this),s=t,l=e.split(H);a=l[n++];)s=r?s:!o.hasClass(a),o[s?"addClass":"removeClass"](a);else"undefined"!==i&&"boolean"!==i||(this.className&&E._data(this,"__className__",this.className),this.className=this.className||e===!1?"":E._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",i=0,r=this.length;i<r;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(Q," ").indexOf(t)>-1)return!0;return!1},val:function(e){var i,r,a,n=this[0];{if(arguments.length)return a=E.isFunction(e),this.each(function(r){var n,o=E(this);1===this.nodeType&&(n=a?e.call(this,r,o.val()):e,null==n?n="":"number"==typeof n?n+="":E.isArray(n)&&(n=E.map(n,function(e){return null==e?"":e+""})),i=E.valHooks[this.type]||E.valHooks[this.nodeName.toLowerCase()],i&&"set"in i&&i.set(this,n,"value")!==t||(this.value=n))});if(n)return i=E.valHooks[n.type]||E.valHooks[n.nodeName.toLowerCase()],i&&"get"in i&&(r=i.get(n,"value"))!==t?r:(r=n.value,"string"==typeof r?r.replace(B,""):null==r?"":r)}}}),E.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,i,r,a,n=e.selectedIndex,o=[],s=e.options,l="select-one"===e.type;if(n<0)return null;for(i=l?n:0,r=l?n+1:s.length;i<r;i++)if(a=s[i],a.selected&&(E.support.optDisabled?!a.disabled:null===a.getAttribute("disabled"))&&(!a.parentNode.disabled||!E.nodeName(a.parentNode,"optgroup"))){if(t=E(a).val(),l)return t;o.push(t)}return l&&!o.length&&s.length?E(s[n]).val():o},set:function(e,t){var i=E.makeArray(t);return E(e).find("option").each(function(){this.selected=E.inArray(E(this).val(),i)>=0}),i.length||(e.selectedIndex=-1),i}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(e,i,r,a){var n,o,s,l=e.nodeType;if(e&&3!==l&&8!==l&&2!==l)return a&&i in E.attrFn?E(e)[i](r):"undefined"==typeof e.getAttribute?E.prop(e,i,r):(s=1!==l||!E.isXMLDoc(e),s&&(i=i.toLowerCase(),o=E.attrHooks[i]||(K.test(i)?L:G)),r!==t?null===r?void E.removeAttr(e,i):o&&"set"in o&&s&&(n=o.set(e,r,i))!==t?n:(e.setAttribute(i,""+r),r):o&&"get"in o&&s&&null!==(n=o.get(e,i))?n:(n=e.getAttribute(i),null===n?t:n))},removeAttr:function(e,t){var i,r,a,n,o,s=0;if(t&&1===e.nodeType)for(r=t.toLowerCase().split(H),n=r.length;s<n;s++)a=r[s],a&&(i=E.propFix[a]||a,o=K.test(a),o||E.attr(e,a,""),e.removeAttribute(X?a:i),o&&i in e&&(e[i]=!1))},attrHooks:{type:{set:function(e,t){if(W.test(e.nodeName)&&e.parentNode)E.error("type property can't be changed");else if(!E.support.radioValue&&"radio"===t&&E.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}},value:{get:function(e,t){return G&&E.nodeName(e,"button")?G.get(e,t):t in e?e.value:null},set:function(e,t,i){return G&&E.nodeName(e,"button")?G.set(e,t,i):void(e.value=t)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,i,r){var a,n,o,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return o=1!==s||!E.isXMLDoc(e),o&&(i=E.propFix[i]||i,n=E.propHooks[i]),r!==t?n&&"set"in n&&(a=n.set(e,r,i))!==t?a:e[i]=r:n&&"get"in n&&null!==(a=n.get(e,i))?a:e[i]},propHooks:{tabIndex:{get:function(e){var i=e.getAttributeNode("tabindex");return i&&i.specified?parseInt(i.value,10):U.test(e.nodeName)||V.test(e.nodeName)&&e.href?0:t}}}}),E.attrHooks.tabindex=E.propHooks.tabIndex,L={get:function(e,i){var r,a=E.prop(e,i);return a===!0||"boolean"!=typeof a&&(r=e.getAttributeNode(i))&&r.nodeValue!==!1?i.toLowerCase():t},set:function(e,t,i){var r;return t===!1?E.removeAttr(e,i):(r=E.propFix[i]||i,r in e&&(e[r]=!0),e.setAttribute(i,i.toLowerCase())),i}},X||(z={name:!0,id:!0,coords:!0},G=E.valHooks.button={get:function(e,i){var r;return r=e.getAttributeNode(i),r&&(z[i]?""!==r.nodeValue:r.specified)?r.nodeValue:t},set:function(e,t,i){var r=e.getAttributeNode(i);return r||(r=F.createAttribute(i),e.setAttributeNode(r)),r.nodeValue=t+""}},E.attrHooks.tabindex.set=G.set,E.each(["width","height"],function(e,t){E.attrHooks[t]=E.extend(E.attrHooks[t],{set:function(e,i){if(""===i)return e.setAttribute(t,"auto"),i}})}),E.attrHooks.contenteditable={get:G.get,set:function(e,t,i){""===t&&(t="false"),G.set(e,t,i)}}),E.support.hrefNormalized||E.each(["href","src","width","height"],function(e,i){E.attrHooks[i]=E.extend(E.attrHooks[i],{get:function(e){var r=e.getAttribute(i,2);return null===r?t:r}})}),E.support.style||(E.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=""+t}}),E.support.optSelected||(E.propHooks.selected=E.extend(E.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),E.support.enctype||(E.propFix.enctype="encoding"),E.support.checkOn||E.each(["radio","checkbox"],function(){E.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),E.each(["radio","checkbox"],function(){E.valHooks[this]=E.extend(E.valHooks[this],{set:function(e,t){if(E.isArray(t))return e.checked=E.inArray(E(e).val(),t)>=0}})});var Y=/^(?:textarea|input|select)$/i,J=/^([^\.]*)?(?:\.(.+))?$/,Z=/(?:^|\s)hover(\.\S+)?\b/,ee=/^key/,te=/^(?:mouse|contextmenu)|click/,ie=/^(?:focusinfocus|focusoutblur)$/,re=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,ae=function(e){
var t=re.exec(e);return t&&(t[1]=(t[1]||"").toLowerCase(),t[3]=t[3]&&new RegExp("(?:^|\\s)"+t[3]+"(?:\\s|$)")),t},ne=function(e,t){var i=e.attributes||{};return(!t[1]||e.nodeName.toLowerCase()===t[1])&&(!t[2]||(i.id||{}).value===t[2])&&(!t[3]||t[3].test((i["class"]||{}).value))},oe=function(e){return E.event.special.hover?e:e.replace(Z,"mouseenter$1 mouseleave$1")};E.event={add:function(e,i,r,a,n){var o,s,l,d,u,c,p,h,f,g,m;if(3!==e.nodeType&&8!==e.nodeType&&i&&r&&(o=E._data(e))){for(r.handler&&(f=r,r=f.handler,n=f.selector),r.guid||(r.guid=E.guid++),l=o.events,l||(o.events=l={}),s=o.handle,s||(o.handle=s=function(e){return"undefined"==typeof E||e&&E.event.triggered===e.type?t:E.event.dispatch.apply(s.elem,arguments)},s.elem=e),i=E.trim(oe(i)).split(" "),d=0;d<i.length;d++)u=J.exec(i[d])||[],c=u[1],p=(u[2]||"").split(".").sort(),m=E.event.special[c]||{},c=(n?m.delegateType:m.bindType)||c,m=E.event.special[c]||{},h=E.extend({type:c,origType:u[1],data:a,handler:r,guid:r.guid,selector:n,quick:n&&ae(n),namespace:p.join(".")},f),g=l[c],g||(g=l[c]=[],g.delegateCount=0,m.setup&&m.setup.call(e,a,p,s)!==!1||(e.addEventListener?e.addEventListener(c,s,!1):e.attachEvent&&e.attachEvent("on"+c,s))),m.add&&(m.add.call(e,h),h.handler.guid||(h.handler.guid=r.guid)),n?g.splice(g.delegateCount++,0,h):g.push(h),E.event.global[c]=!0;e=null}},global:{},remove:function(e,t,i,r,a){var n,o,s,l,d,u,c,p,h,f,g,m,v=E.hasData(e)&&E._data(e);if(v&&(p=v.events)){for(t=E.trim(oe(t||"")).split(" "),n=0;n<t.length;n++)if(o=J.exec(t[n])||[],s=l=o[1],d=o[2],s){for(h=E.event.special[s]||{},s=(r?h.delegateType:h.bindType)||s,g=p[s]||[],u=g.length,d=d?new RegExp("(^|\\.)"+d.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null,c=0;c<g.length;c++)m=g[c],!a&&l!==m.origType||i&&i.guid!==m.guid||d&&!d.test(m.namespace)||r&&r!==m.selector&&("**"!==r||!m.selector)||(g.splice(c--,1),m.selector&&g.delegateCount--,h.remove&&h.remove.call(e,m));0===g.length&&u!==g.length&&(h.teardown&&h.teardown.call(e,d)!==!1||E.removeEvent(e,s,v.handle),delete p[s])}else for(s in p)E.event.remove(e,s+t[n],i,r,!0);E.isEmptyObject(p)&&(f=v.handle,f&&(f.elem=null),E.removeData(e,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(i,r,a,n){if(!a||3!==a.nodeType&&8!==a.nodeType){var o,s,l,d,u,c,p,h,f,g,m=i.type||i,v=[];if(!ie.test(m+E.event.triggered)&&(m.indexOf("!")>=0&&(m=m.slice(0,-1),s=!0),m.indexOf(".")>=0&&(v=m.split("."),m=v.shift(),v.sort()),a&&!E.event.customEvent[m]||E.event.global[m]))if(i="object"==typeof i?i[E.expando]?i:new E.Event(m,i):new E.Event(m),i.type=m,i.isTrigger=!0,i.exclusive=s,i.namespace=v.join("."),i.namespace_re=i.namespace?new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,c=m.indexOf(":")<0?"on"+m:"",a){if(i.result=t,i.target||(i.target=a),r=null!=r?E.makeArray(r):[],r.unshift(i),p=E.event.special[m]||{},!p.trigger||p.trigger.apply(a,r)!==!1){if(f=[[a,p.bindType||m]],!n&&!p.noBubble&&!E.isWindow(a)){for(g=p.delegateType||m,d=ie.test(g+m)?a:a.parentNode,u=null;d;d=d.parentNode)f.push([d,g]),u=d;u&&u===a.ownerDocument&&f.push([u.defaultView||u.parentWindow||e,g])}for(l=0;l<f.length&&!i.isPropagationStopped();l++)d=f[l][0],i.type=f[l][1],h=(E._data(d,"events")||{})[i.type]&&E._data(d,"handle"),h&&h.apply(d,r),h=c&&d[c],h&&E.acceptData(d)&&h.apply(d,r)===!1&&i.preventDefault();return i.type=m,n||i.isDefaultPrevented()||p._default&&p._default.apply(a.ownerDocument,r)!==!1||"click"===m&&E.nodeName(a,"a")||!E.acceptData(a)||c&&a[m]&&("focus"!==m&&"blur"!==m||0!==i.target.offsetWidth)&&!E.isWindow(a)&&(u=a[c],u&&(a[c]=null),E.event.triggered=m,a[m](),E.event.triggered=t,u&&(a[c]=u)),i.result}}else{o=E.cache;for(l in o)o[l].events&&o[l].events[m]&&E.event.trigger(i,r,o[l].handle.elem,!0)}}},dispatch:function(i){i=E.event.fix(i||e.event);var r,a,n,o,s,l,d,u,c,p,h=(E._data(this,"events")||{})[i.type]||[],f=h.delegateCount,g=[].slice.call(arguments,0),m=!i.exclusive&&!i.namespace,v=E.event.special[i.type]||{},b=[];if(g[0]=i,i.delegateTarget=this,!v.preDispatch||v.preDispatch.call(this,i)!==!1){if(f&&(!i.button||"click"!==i.type))for(o=E(this),o.context=this.ownerDocument||this,n=i.target;n!=this;n=n.parentNode||this)if(n.disabled!==!0){for(l={},u=[],o[0]=n,r=0;r<f;r++)c=h[r],p=c.selector,l[p]===t&&(l[p]=c.quick?ne(n,c.quick):o.is(p)),l[p]&&u.push(c);u.length&&b.push({elem:n,matches:u})}for(h.length>f&&b.push({elem:this,matches:h.slice(f)}),r=0;r<b.length&&!i.isPropagationStopped();r++)for(d=b[r],i.currentTarget=d.elem,a=0;a<d.matches.length&&!i.isImmediatePropagationStopped();a++)c=d.matches[a],(m||!i.namespace&&!c.namespace||i.namespace_re&&i.namespace_re.test(c.namespace))&&(i.data=c.data,i.handleObj=c,s=((E.event.special[c.origType]||{}).handle||c.handler).apply(d.elem,g),s!==t&&(i.result=s,s===!1&&(i.preventDefault(),i.stopPropagation())));return v.postDispatch&&v.postDispatch.call(this,i),i.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,i){var r,a,n,o=i.button,s=i.fromElement;return null==e.pageX&&null!=i.clientX&&(r=e.target.ownerDocument||F,a=r.documentElement,n=r.body,e.pageX=i.clientX+(a&&a.scrollLeft||n&&n.scrollLeft||0)-(a&&a.clientLeft||n&&n.clientLeft||0),e.pageY=i.clientY+(a&&a.scrollTop||n&&n.scrollTop||0)-(a&&a.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&s&&(e.relatedTarget=s===e.target?i.toElement:s),e.which||o===t||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[E.expando])return e;var i,r,a=e,n=E.event.fixHooks[e.type]||{},o=n.props?this.props.concat(n.props):this.props;for(e=E.Event(a),i=o.length;i;)r=o[--i],e[r]=a[r];return e.target||(e.target=a.srcElement||F),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey===t&&(e.metaKey=e.ctrlKey),n.filter?n.filter(e,a):e},special:{ready:{setup:E.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,i){E.isWindow(this)&&(this.onbeforeunload=i)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,i,r){var a=E.extend(new E.Event,i,{type:e,isSimulated:!0,originalEvent:{}});r?E.event.trigger(a,null,t):E.event.dispatch.call(t,a),a.isDefaultPrevented()&&i.preventDefault()}},E.event.handle=E.event.dispatch,E.removeEvent=F.removeEventListener?function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)}:function(e,t,i){e.detachEvent&&e.detachEvent("on"+t,i)},E.Event=function(e,t){return this instanceof E.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?s:o):this.type=e,t&&E.extend(this,t),this.timeStamp=e&&e.timeStamp||E.now(),void(this[E.expando]=!0)):new E.Event(e,t)},E.Event.prototype={preventDefault:function(){this.isDefaultPrevented=s;var e=this.originalEvent;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=s;var e=this.originalEvent;e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=s,this.stopPropagation()},isDefaultPrevented:o,isPropagationStopped:o,isImmediatePropagationStopped:o},E.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){E.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,r=this,a=e.relatedTarget,n=e.handleObj;n.selector;return a&&(a===r||E.contains(r,a))||(e.type=n.origType,i=n.handler.apply(this,arguments),e.type=t),i}}}),E.support.submitBubbles||(E.event.special.submit={setup:function(){return!E.nodeName(this,"form")&&void E.event.add(this,"click._submit keypress._submit",function(e){var i=e.target,r=E.nodeName(i,"input")||E.nodeName(i,"button")?i.form:t;r&&!r._submit_attached&&(E.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),r._submit_attached=!0)})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&E.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return!E.nodeName(this,"form")&&void E.event.remove(this,"._submit")}}),E.support.changeBubbles||(E.event.special.change={setup:function(){return Y.test(this.nodeName)?("checkbox"!==this.type&&"radio"!==this.type||(E.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),E.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1,E.event.simulate("change",this,e,!0))})),!1):void E.event.add(this,"beforeactivate._change",function(e){var t=e.target;Y.test(t.nodeName)&&!t._change_attached&&(E.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||E.event.simulate("change",this.parentNode,e,!0)}),t._change_attached=!0)})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type)return e.handleObj.handler.apply(this,arguments)},teardown:function(){return E.event.remove(this,"._change"),Y.test(this.nodeName)}}),E.support.focusinBubbles||E.each({focus:"focusin",blur:"focusout"},function(e,t){var i=0,r=function(e){E.event.simulate(t,e.target,E.event.fix(e),!0)};E.event.special[t]={setup:function(){0===i++&&F.addEventListener(e,r,!0)},teardown:function(){0===--i&&F.removeEventListener(e,r,!0)}}}),E.fn.extend({on:function(e,i,r,a,n){var s,l;if("object"==typeof e){"string"!=typeof i&&(r=r||i,i=t);for(l in e)this.on(l,i,r,e[l],n);return this}if(null==r&&null==a?(a=i,r=i=t):null==a&&("string"==typeof i?(a=r,r=t):(a=r,r=i,i=t)),a===!1)a=o;else if(!a)return this;return 1===n&&(s=a,a=function(e){return E().off(e),s.apply(this,arguments)},a.guid=s.guid||(s.guid=E.guid++)),this.each(function(){E.event.add(this,e,a,r,i)})},one:function(e,t,i,r){return this.on(e,t,i,r,1)},off:function(e,i,r){if(e&&e.preventDefault&&e.handleObj){var a=e.handleObj;return E(e.delegateTarget).off(a.namespace?a.origType+"."+a.namespace:a.origType,a.selector,a.handler),this}if("object"==typeof e){for(var n in e)this.off(n,i,e[n]);return this}return i!==!1&&"function"!=typeof i||(r=i,i=t),r===!1&&(r=o),this.each(function(){E.event.remove(this,e,r,i)})},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,i){return E(this.context).on(e,this.selector,t,i),this},die:function(e,t){return E(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,i,r){return this.on(t,e,i,r)},undelegate:function(e,t,i){return 1==arguments.length?this.off(e,"**"):this.off(t,e,i)},trigger:function(e,t){return this.each(function(){E.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return E.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,i=e.guid||E.guid++,r=0,a=function(i){var a=(E._data(this,"lastToggle"+e.guid)||0)%r;return E._data(this,"lastToggle"+e.guid,a+1),i.preventDefault(),t[a].apply(this,arguments)||!1};for(a.guid=i;r<t.length;)t[r++].guid=i;return this.click(a)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),E.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){E.fn[t]=function(e,i){return null==i&&(i=e,e=null),arguments.length>0?this.on(t,null,e,i):this.trigger(t)},E.attrFn&&(E.attrFn[t]=!0),ee.test(t)&&(E.event.fixHooks[t]=E.event.keyHooks),te.test(t)&&(E.event.fixHooks[t]=E.event.mouseHooks)}),/*!
 * Sizzle CSS Selector Engine
 *  Copyright 2011, The Dojo Foundation
 *  Released under the MIT, BSD, and GPL Licenses.
 *  More information: http://sizzlejs.com/
 */
function(){function e(e,t,i,r,n,o){for(var s=0,l=r.length;s<l;s++){var d=r[s];if(d){var u=!1;for(d=d[e];d;){if(d[a]===i){u=r[d.sizset];break}if(1!==d.nodeType||o||(d[a]=i,d.sizset=s),d.nodeName.toLowerCase()===t){u=d;break}d=d[e]}r[s]=u}}}function i(e,t,i,r,n,o){for(var s=0,l=r.length;s<l;s++){var d=r[s];if(d){var u=!1;for(d=d[e];d;){if(d[a]===i){u=r[d.sizset];break}if(1===d.nodeType)if(o||(d[a]=i,d.sizset=s),"string"!=typeof t){if(d===t){u=!0;break}}else if(p.filter(t,[d]).length>0){u=d;break}d=d[e]}r[s]=u}}}var r=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,a="sizcache"+(Math.random()+"").replace(".",""),n=0,o=Object.prototype.toString,s=!1,l=!0,d=/\\/g,u=/\r\n/g,c=/\W/;[0,0].sort(function(){return l=!1,0});var p=function(e,t,i,a){i=i||[],t=t||F;var n=t;if(1!==t.nodeType&&9!==t.nodeType)return[];if(!e||"string"!=typeof e)return i;var s,l,d,u,c,h,m,v,_=!0,y=p.isXML(t),x=[],j=e;do if(r.exec(""),s=r.exec(j),s&&(j=s[3],x.push(s[1]),s[2])){u=s[3];break}while(s);if(x.length>1&&g.exec(e))if(2===x.length&&f.relative[x[0]])l=w(x[0]+x[1],t,a);else for(l=f.relative[x[0]]?[t]:p(x.shift(),t);x.length;)e=x.shift(),f.relative[e]&&(e+=x.shift()),l=w(e,l,a);else if(!a&&x.length>1&&9===t.nodeType&&!y&&f.match.ID.test(x[0])&&!f.match.ID.test(x[x.length-1])&&(c=p.find(x.shift(),t,y),t=c.expr?p.filter(c.expr,c.set)[0]:c.set[0]),t)for(c=a?{expr:x.pop(),set:b(a)}:p.find(x.pop(),1!==x.length||"~"!==x[0]&&"+"!==x[0]||!t.parentNode?t:t.parentNode,y),l=c.expr?p.filter(c.expr,c.set):c.set,x.length>0?d=b(l):_=!1;x.length;)h=x.pop(),m=h,f.relative[h]?m=x.pop():h="",null==m&&(m=t),f.relative[h](d,m,y);else d=x=[];if(d||(d=l),d||p.error(h||e),"[object Array]"===o.call(d))if(_)if(t&&1===t.nodeType)for(v=0;null!=d[v];v++)d[v]&&(d[v]===!0||1===d[v].nodeType&&p.contains(t,d[v]))&&i.push(l[v]);else for(v=0;null!=d[v];v++)d[v]&&1===d[v].nodeType&&i.push(l[v]);else i.push.apply(i,d);else b(d,i);return u&&(p(u,n,i,a),p.uniqueSort(i)),i};p.uniqueSort=function(e){if(y&&(s=l,e.sort(y),s))for(var t=1;t<e.length;t++)e[t]===e[t-1]&&e.splice(t--,1);return e},p.matches=function(e,t){return p(e,null,null,t)},p.matchesSelector=function(e,t){return p(t,null,null,[e]).length>0},p.find=function(e,t,i){var r,a,n,o,s,l;if(!e)return[];for(a=0,n=f.order.length;a<n;a++)if(s=f.order[a],(o=f.leftMatch[s].exec(e))&&(l=o[1],o.splice(1,1),"\\"!==l.substr(l.length-1)&&(o[1]=(o[1]||"").replace(d,""),r=f.find[s](o,t,i),null!=r))){e=e.replace(f.match[s],"");break}return r||(r="undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName("*"):[]),{set:r,expr:e}},p.filter=function(e,i,r,a){for(var n,o,s,l,d,u,c,h,g,m=e,v=[],b=i,_=i&&i[0]&&p.isXML(i[0]);e&&i.length;){for(s in f.filter)if(null!=(n=f.leftMatch[s].exec(e))&&n[2]){if(u=f.filter[s],c=n[1],o=!1,n.splice(1,1),"\\"===c.substr(c.length-1))continue;if(b===v&&(v=[]),f.preFilter[s])if(n=f.preFilter[s](n,b,r,v,a,_)){if(n===!0)continue}else o=l=!0;if(n)for(h=0;null!=(d=b[h]);h++)d&&(l=u(d,n,h,b),g=a^l,r&&null!=l?g?o=!0:b[h]=!1:g&&(v.push(d),o=!0));if(l!==t){if(r||(b=v),e=e.replace(f.match[s],""),!o)return[];break}}if(e===m){if(null!=o)break;p.error(e)}m=e}return b},p.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};var h=p.getText=function(e){var t,i,r=e.nodeType,a="";if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;if("string"==typeof e.innerText)return e.innerText.replace(u,"");for(e=e.firstChild;e;e=e.nextSibling)a+=h(e)}else if(3===r||4===r)return e.nodeValue}else for(t=0;i=e[t];t++)8!==i.nodeType&&(a+=h(i));return a},f=p.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(e,t){var i="string"==typeof t,r=i&&!c.test(t),a=i&&!r;r&&(t=t.toLowerCase());for(var n,o=0,s=e.length;o<s;o++)if(n=e[o]){for(;(n=n.previousSibling)&&1!==n.nodeType;);e[o]=a||n&&n.nodeName.toLowerCase()===t?n||!1:n===t}a&&p.filter(t,e,!0)},">":function(e,t){var i,r="string"==typeof t,a=0,n=e.length;if(r&&!c.test(t)){for(t=t.toLowerCase();a<n;a++)if(i=e[a]){var o=i.parentNode;e[a]=o.nodeName.toLowerCase()===t&&o}}else{for(;a<n;a++)i=e[a],i&&(e[a]=r?i.parentNode:i.parentNode===t);r&&p.filter(t,e,!0)}},"":function(t,r,a){var o,s=n++,l=i;"string"!=typeof r||c.test(r)||(r=r.toLowerCase(),o=r,l=e),l("parentNode",r,s,t,o,a)},"~":function(t,r,a){var o,s=n++,l=i;"string"!=typeof r||c.test(r)||(r=r.toLowerCase(),o=r,l=e),l("previousSibling",r,s,t,o,a)}},find:{ID:function(e,t,i){if("undefined"!=typeof t.getElementById&&!i){var r=t.getElementById(e[1]);return r&&r.parentNode?[r]:[]}},NAME:function(e,t){if("undefined"!=typeof t.getElementsByName){for(var i=[],r=t.getElementsByName(e[1]),a=0,n=r.length;a<n;a++)r[a].getAttribute("name")===e[1]&&i.push(r[a]);return 0===i.length?null:i}},TAG:function(e,t){if("undefined"!=typeof t.getElementsByTagName)return t.getElementsByTagName(e[1])}},preFilter:{CLASS:function(e,t,i,r,a,n){if(e=" "+e[1].replace(d,"")+" ",n)return e;for(var o,s=0;null!=(o=t[s]);s++)o&&(a^(o.className&&(" "+o.className+" ").replace(/[\t\n\r]/g," ").indexOf(e)>=0)?i||r.push(o):i&&(t[s]=!1));return!1},ID:function(e){return e[1].replace(d,"")},TAG:function(e,t){return e[1].replace(d,"").toLowerCase()},CHILD:function(e){if("nth"===e[1]){e[2]||p.error(e[0]),e[2]=e[2].replace(/^\+|\s*/g,"");var t=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===e[2]&&"2n"||"odd"===e[2]&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0,e[3]=t[3]-0}else e[2]&&p.error(e[0]);return e[0]=n++,e},ATTR:function(e,t,i,r,a,n){var o=e[1]=e[1].replace(d,"");return!n&&f.attrMap[o]&&(e[1]=f.attrMap[o]),e[4]=(e[4]||e[5]||"").replace(d,""),"~="===e[2]&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(e,t,i,a,n){if("not"===e[1]){if(!((r.exec(e[3])||"").length>1||/^\w/.test(e[3]))){var o=p.filter(e[3],t,i,!0^n);return i||a.push.apply(a,o),!1}e[3]=p(e[3],null,null,t)}else if(f.match.POS.test(e[0])||f.match.CHILD.test(e[0]))return!0;return e},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return e.disabled===!1&&"hidden"!==e.type},disabled:function(e){return e.disabled===!0},checked:function(e){return e.checked===!0},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,i){return!!p(i[3],e).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){var t=e.getAttribute("type"),i=e.type;return"input"===e.nodeName.toLowerCase()&&"text"===i&&(t===i||null===t)},radio:function(e){return"input"===e.nodeName.toLowerCase()&&"radio"===e.type},checkbox:function(e){return"input"===e.nodeName.toLowerCase()&&"checkbox"===e.type},file:function(e){return"input"===e.nodeName.toLowerCase()&&"file"===e.type},password:function(e){return"input"===e.nodeName.toLowerCase()&&"password"===e.type},submit:function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&"submit"===e.type},image:function(e){return"input"===e.nodeName.toLowerCase()&&"image"===e.type},reset:function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&"reset"===e.type},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(e,t){return 0===t},last:function(e,t,i,r){return t===r.length-1},even:function(e,t){return t%2===0},odd:function(e,t){return t%2===1},lt:function(e,t,i){return t<i[3]-0},gt:function(e,t,i){return t>i[3]-0},nth:function(e,t,i){return i[3]-0===t},eq:function(e,t,i){return i[3]-0===t}},filter:{PSEUDO:function(e,t,i,r){var a=t[1],n=f.filters[a];if(n)return n(e,i,t,r);if("contains"===a)return(e.textContent||e.innerText||h([e])||"").indexOf(t[3])>=0;if("not"===a){for(var o=t[3],s=0,l=o.length;s<l;s++)if(o[s]===e)return!1;return!0}p.error(a)},CHILD:function(e,t){var i,r,n,o,s,l,d=t[1],u=e;switch(d){case"only":case"first":for(;u=u.previousSibling;)if(1===u.nodeType)return!1;if("first"===d)return!0;u=e;case"last":for(;u=u.nextSibling;)if(1===u.nodeType)return!1;return!0;case"nth":if(i=t[2],r=t[3],1===i&&0===r)return!0;if(n=t[0],o=e.parentNode,o&&(o[a]!==n||!e.nodeIndex)){for(s=0,u=o.firstChild;u;u=u.nextSibling)1===u.nodeType&&(u.nodeIndex=++s);o[a]=n}return l=e.nodeIndex-r,0===i?0===l:l%i===0&&l/i>=0}},ID:function(e,t){return 1===e.nodeType&&e.getAttribute("id")===t},TAG:function(e,t){return"*"===t&&1===e.nodeType||!!e.nodeName&&e.nodeName.toLowerCase()===t},CLASS:function(e,t){return(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(e,t){var i=t[1],r=p.attr?p.attr(e,i):f.attrHandle[i]?f.attrHandle[i](e):null!=e[i]?e[i]:e.getAttribute(i),a=r+"",n=t[2],o=t[4];return null==r?"!="===n:!n&&p.attr?null!=r:"="===n?a===o:"*="===n?a.indexOf(o)>=0:"~="===n?(" "+a+" ").indexOf(o)>=0:o?"!="===n?a!==o:"^="===n?0===a.indexOf(o):"$="===n?a.substr(a.length-o.length)===o:"|="===n&&(a===o||a.substr(0,o.length+1)===o+"-"):a&&r!==!1},POS:function(e,t,i,r){var a=t[2],n=f.setFilters[a];if(n)return n(e,i,t,r)}}},g=f.match.POS,m=function(e,t){return"\\"+(t-0+1)};for(var v in f.match)f.match[v]=new RegExp(f.match[v].source+/(?![^\[]*\])(?![^\(]*\))/.source),f.leftMatch[v]=new RegExp(/(^(?:.|\r|\n)*?)/.source+f.match[v].source.replace(/\\(\d+)/g,m));f.match.globalPOS=g;var b=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(F.documentElement.childNodes,0)[0].nodeType}catch(_){b=function(e,t){var i=0,r=t||[];if("[object Array]"===o.call(e))Array.prototype.push.apply(r,e);else if("number"==typeof e.length)for(var a=e.length;i<a;i++)r.push(e[i]);else for(;e[i];i++)r.push(e[i]);return r}}var y,x;F.documentElement.compareDocumentPosition?y=function(e,t){return e===t?(s=!0,0):e.compareDocumentPosition&&t.compareDocumentPosition?4&e.compareDocumentPosition(t)?-1:1:e.compareDocumentPosition?-1:1}:(y=function(e,t){if(e===t)return s=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var i,r,a=[],n=[],o=e.parentNode,l=t.parentNode,d=o;if(o===l)return x(e,t);if(!o)return-1;if(!l)return 1;for(;d;)a.unshift(d),d=d.parentNode;for(d=l;d;)n.unshift(d),d=d.parentNode;i=a.length,r=n.length;for(var u=0;u<i&&u<r;u++)if(a[u]!==n[u])return x(a[u],n[u]);return u===i?x(e,n[u],-1):x(a[u],t,1)},x=function(e,t,i){if(e===t)return i;for(var r=e.nextSibling;r;){if(r===t)return-1;r=r.nextSibling}return 1}),function(){var e=F.createElement("div"),i="script"+(new Date).getTime(),r=F.documentElement;e.innerHTML="<a name='"+i+"'/>",r.insertBefore(e,r.firstChild),F.getElementById(i)&&(f.find.ID=function(e,i,r){if("undefined"!=typeof i.getElementById&&!r){var a=i.getElementById(e[1]);return a?a.id===e[1]||"undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id").nodeValue===e[1]?[a]:t:[]}},f.filter.ID=function(e,t){var i="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return 1===e.nodeType&&i&&i.nodeValue===t}),r.removeChild(e),r=e=null}(),function(){var e=F.createElement("div");e.appendChild(F.createComment("")),e.getElementsByTagName("*").length>0&&(f.find.TAG=function(e,t){var i=t.getElementsByTagName(e[1]);if("*"===e[1]){for(var r=[],a=0;i[a];a++)1===i[a].nodeType&&r.push(i[a]);i=r}return i}),e.innerHTML="<a href='#'></a>",e.firstChild&&"undefined"!=typeof e.firstChild.getAttribute&&"#"!==e.firstChild.getAttribute("href")&&(f.attrHandle.href=function(e){return e.getAttribute("href",2)}),e=null}(),F.querySelectorAll&&!function(){var e=p,t=F.createElement("div"),i="__sizzle__";if(t.innerHTML="<p class='TEST'></p>",!t.querySelectorAll||0!==t.querySelectorAll(".TEST").length){p=function(t,r,a,n){if(r=r||F,!n&&!p.isXML(r)){var o=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(t);if(o&&(1===r.nodeType||9===r.nodeType)){if(o[1])return b(r.getElementsByTagName(t),a);if(o[2]&&f.find.CLASS&&r.getElementsByClassName)return b(r.getElementsByClassName(o[2]),a)}if(9===r.nodeType){if("body"===t&&r.body)return b([r.body],a);if(o&&o[3]){var s=r.getElementById(o[3]);if(!s||!s.parentNode)return b([],a);if(s.id===o[3])return b([s],a)}try{return b(r.querySelectorAll(t),a)}catch(l){}}else if(1===r.nodeType&&"object"!==r.nodeName.toLowerCase()){var d=r,u=r.getAttribute("id"),c=u||i,h=r.parentNode,g=/^\s*[+~]/.test(t);u?c=c.replace(/'/g,"\\$&"):r.setAttribute("id",c),g&&h&&(r=r.parentNode);try{if(!g||h)return b(r.querySelectorAll("[id='"+c+"'] "+t),a)}catch(m){}finally{u||d.removeAttribute("id")}}}return e(t,r,a,n)};for(var r in e)p[r]=e[r];t=null}}(),function(){var e=F.documentElement,t=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(t){var i=!t.call(F.createElement("div"),"div"),r=!1;try{t.call(F.documentElement,"[test!='']:sizzle")}catch(a){r=!0}p.matchesSelector=function(e,a){if(a=a.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']"),!p.isXML(e))try{if(r||!f.match.PSEUDO.test(a)&&!/!=/.test(a)){var n=t.call(e,a);if(n||!i||e.document&&11!==e.document.nodeType)return n}}catch(o){}return p(a,null,null,[e]).length>0}}}(),function(){var e=F.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>",e.getElementsByClassName&&0!==e.getElementsByClassName("e").length&&(e.lastChild.className="e",1!==e.getElementsByClassName("e").length&&(f.order.splice(1,0,"CLASS"),f.find.CLASS=function(e,t,i){if("undefined"!=typeof t.getElementsByClassName&&!i)return t.getElementsByClassName(e[1])},e=null))}(),F.documentElement.contains?p.contains=function(e,t){return e!==t&&(!e.contains||e.contains(t))}:F.documentElement.compareDocumentPosition?p.contains=function(e,t){return!!(16&e.compareDocumentPosition(t))}:p.contains=function(){return!1},p.isXML=function(e){var t=(e?e.ownerDocument||e:0).documentElement;return!!t&&"HTML"!==t.nodeName};var w=function(e,t,i){for(var r,a=[],n="",o=t.nodeType?[t]:t;r=f.match.PSEUDO.exec(e);)n+=r[0],e=e.replace(f.match.PSEUDO,"");e=f.relative[e]?e+"*":e;for(var s=0,l=o.length;s<l;s++)p(e,o[s],a,i);return p.filter(n,a)};p.attr=E.attr,p.selectors.attrMap={},E.find=p,E.expr=p.selectors,E.expr[":"]=E.expr.filters,E.unique=p.uniqueSort,E.text=p.getText,E.isXMLDoc=p.isXML,E.contains=p.contains}();var se=/Until$/,le=/^(?:parents|prevUntil|prevAll)/,de=/,/,ue=/^.[^:#\[\.,]*$/,ce=Array.prototype.slice,pe=E.expr.match.globalPOS,he={children:!0,contents:!0,next:!0,prev:!0};E.fn.extend({find:function(e){var t,i,r=this;if("string"!=typeof e)return E(e).filter(function(){for(t=0,i=r.length;t<i;t++)if(E.contains(r[t],this))return!0});var a,n,o,s=this.pushStack("","find",e);for(t=0,i=this.length;t<i;t++)if(a=s.length,E.find(e,this[t],s),t>0)for(n=a;n<s.length;n++)for(o=0;o<a;o++)if(s[o]===s[n]){s.splice(n--,1);break}return s},has:function(e){var t=E(e);return this.filter(function(){for(var e=0,i=t.length;e<i;e++)if(E.contains(this,t[e]))return!0})},not:function(e){return this.pushStack(d(this,e,!1),"not",e)},filter:function(e){return this.pushStack(d(this,e,!0),"filter",e)},is:function(e){return!!e&&("string"==typeof e?pe.test(e)?E(e,this.context).index(this[0])>=0:E.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var i,r,a=[],n=this[0];if(E.isArray(e)){for(var o=1;n&&n.ownerDocument&&n!==t;){for(i=0;i<e.length;i++)E(n).is(e[i])&&a.push({selector:e[i],elem:n,level:o});n=n.parentNode,o++}return a}var s=pe.test(e)||"string"!=typeof e?E(e,t||this.context):0;for(i=0,r=this.length;i<r;i++)for(n=this[i];n;){if(s?s.index(n)>-1:E.find.matchesSelector(n,e)){a.push(n);break}if(n=n.parentNode,!n||!n.ownerDocument||n===t||11===n.nodeType)break}return a=a.length>1?E.unique(a):a,this.pushStack(a,"closest",e)},index:function(e){return e?"string"==typeof e?E.inArray(this[0],E(e)):E.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var i="string"==typeof e?E(e,t):E.makeArray(e&&e.nodeType?[e]:e),r=E.merge(this.get(),i);return this.pushStack(l(i[0])||l(r[0])?r:E.unique(r))},andSelf:function(){return this.add(this.prevObject)}}),E.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return E.dir(e,"parentNode")},parentsUntil:function(e,t,i){return E.dir(e,"parentNode",i)},next:function(e){return E.nth(e,2,"nextSibling")},prev:function(e){return E.nth(e,2,"previousSibling")},nextAll:function(e){return E.dir(e,"nextSibling")},prevAll:function(e){return E.dir(e,"previousSibling")},nextUntil:function(e,t,i){return E.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return E.dir(e,"previousSibling",i)},siblings:function(e){return E.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return E.sibling(e.firstChild)},contents:function(e){return E.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:E.makeArray(e.childNodes)}},function(e,t){E.fn[e]=function(i,r){var a=E.map(this,t,i);return se.test(e)||(r=i),r&&"string"==typeof r&&(a=E.filter(r,a)),a=this.length>1&&!he[e]?E.unique(a):a,(this.length>1||de.test(r))&&le.test(e)&&(a=a.reverse()),this.pushStack(a,e,ce.call(arguments).join(","))}}),E.extend({filter:function(e,t,i){return i&&(e=":not("+e+")"),1===t.length?E.find.matchesSelector(t[0],e)?[t[0]]:[]:E.find.matches(e,t)},dir:function(e,i,r){for(var a=[],n=e[i];n&&9!==n.nodeType&&(r===t||1!==n.nodeType||!E(n).is(r));)1===n.nodeType&&a.push(n),n=n[i];return a},nth:function(e,t,i,r){t=t||1;for(var a=0;e&&(1!==e.nodeType||++a!==t);e=e[i]);return e},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}});var fe="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",ge=/ jQuery\d+="(?:\d+|null)"/g,me=/^\s+/,ve=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,be=/<([\w:]+)/,_e=/<tbody/i,ye=/<|&#?\w+;/,xe=/<(?:script|style)/i,we=/<(?:script|object|embed|option|style)/i,je=new RegExp("<(?:"+fe+")[\\s/>]","i"),ke=/checked\s*(?:[^=]|=\s*.checked.)/i,Ce=/\/(java|ecma)script/i,De=/^\s*<!(?:\[CDATA\[|\-\-)/,Se={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Te=u(F);Se.optgroup=Se.option,Se.tbody=Se.tfoot=Se.colgroup=Se.caption=Se.thead,Se.th=Se.td,E.support.htmlSerialize||(Se._default=[1,"div<div>","</div>"]),E.fn.extend({text:function(e){return E.access(this,function(e){return e===t?E.text(this):this.empty().append((this[0]&&this[0].ownerDocument||F).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(E.isFunction(e))return this.each(function(t){E(this).wrapAll(e.call(this,t))});if(this[0]){var t=E(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return E.isFunction(e)?this.each(function(t){E(this).wrapInner(e.call(this,t))}):this.each(function(){var t=E(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=E.isFunction(e);return this.each(function(i){E(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){E.nodeName(this,"body")||E(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){1===this.nodeType&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){1===this.nodeType&&this.insertBefore(e,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=E.clean(arguments);return e.push.apply(e,this.toArray()),this.pushStack(e,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode)return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=this.pushStack(this,"after",arguments);return e.push.apply(e,E.clean(arguments)),e}},remove:function(e,t){for(var i,r=0;null!=(i=this[r]);r++)e&&!E.filter(e,[i]).length||(t||1!==i.nodeType||(E.cleanData(i.getElementsByTagName("*")),E.cleanData([i])),i.parentNode&&i.parentNode.removeChild(i));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)for(1===e.nodeType&&E.cleanData(e.getElementsByTagName("*"));e.firstChild;)e.removeChild(e.firstChild);return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return E.clone(this,e,t)})},html:function(e){return E.access(this,function(e){var i=this[0]||{},r=0,a=this.length;if(e===t)return 1===i.nodeType?i.innerHTML.replace(ge,""):null;if("string"==typeof e&&!xe.test(e)&&(E.support.leadingWhitespace||!me.test(e))&&!Se[(be.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(ve,"<$1></$2>");try{for(;r<a;r++)i=this[r]||{},1===i.nodeType&&(E.cleanData(i.getElementsByTagName("*")),i.innerHTML=e);i=0}catch(n){}}i&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return this[0]&&this[0].parentNode?E.isFunction(e)?this.each(function(t){var i=E(this),r=i.html();i.replaceWith(e.call(this,t,r))}):("string"!=typeof e&&(e=E(e).detach()),this.each(function(){var t=this.nextSibling,i=this.parentNode;E(this).remove(),t?E(t).before(e):E(i).append(e)})):this.length?this.pushStack(E(E.isFunction(e)?e():e),"replaceWith",e):this},detach:function(e){return this.remove(e,!0)},domManip:function(e,i,r){var a,n,o,s,l=e[0],d=[];if(!E.support.checkClone&&3===arguments.length&&"string"==typeof l&&ke.test(l))return this.each(function(){E(this).domManip(e,i,r,!0)});if(E.isFunction(l))return this.each(function(a){var n=E(this);e[0]=l.call(this,a,i?n.html():t),n.domManip(e,i,r)});if(this[0]){if(s=l&&l.parentNode,a=E.support.parentNode&&s&&11===s.nodeType&&s.childNodes.length===this.length?{fragment:s}:E.buildFragment(e,this,d),o=a.fragment,n=1===o.childNodes.length?o=o.firstChild:o.firstChild){i=i&&E.nodeName(n,"tr");for(var u=0,p=this.length,h=p-1;u<p;u++)r.call(i?c(this[u],n):this[u],a.cacheable||p>1&&u<h?E.clone(o,!0,!0):o)}d.length&&E.each(d,function(e,t){t.src?E.ajax({type:"GET",global:!1,url:t.src,async:!1,dataType:"script"}):E.globalEval((t.text||t.textContent||t.innerHTML||"").replace(De,"/*$0*/")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),E.buildFragment=function(e,t,i){var r,a,n,o,s=e[0];return t&&t[0]&&(o=t[0].ownerDocument||t[0]),o.createDocumentFragment||(o=F),!(1===e.length&&"string"==typeof s&&s.length<512&&o===F&&"<"===s.charAt(0))||we.test(s)||!E.support.checkClone&&ke.test(s)||!E.support.html5Clone&&je.test(s)||(a=!0,n=E.fragments[s],n&&1!==n&&(r=n)),r||(r=o.createDocumentFragment(),E.clean(e,o,r,i)),a&&(E.fragments[s]=n?r:1),{fragment:r,cacheable:a}},E.fragments={},E.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){E.fn[e]=function(i){var r=[],a=E(i),n=1===this.length&&this[0].parentNode;if(n&&11===n.nodeType&&1===n.childNodes.length&&1===a.length)return a[t](this[0]),this;for(var o=0,s=a.length;o<s;o++){var l=(o>0?this.clone(!0):this).get();E(a[o])[t](l),r=r.concat(l)}return this.pushStack(r,e,a.selector)}}),E.extend({clone:function(e,t,i){var r,a,n,o=E.support.html5Clone||E.isXMLDoc(e)||!je.test("<"+e.nodeName+">")?e.cloneNode(!0):v(e);if(!(E.support.noCloneEvent&&E.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||E.isXMLDoc(e)))for(h(e,o),r=f(e),a=f(o),n=0;r[n];++n)a[n]&&h(r[n],a[n]);if(t&&(p(e,o),i))for(r=f(e),a=f(o),n=0;r[n];++n)p(r[n],a[n]);return r=a=null,o},clean:function(e,t,i,r){var a,n,o,s=[];t=t||F,"undefined"==typeof t.createElement&&(t=t.ownerDocument||t[0]&&t[0].ownerDocument||F);for(var l,d=0;null!=(l=e[d]);d++)if("number"==typeof l&&(l+=""),l){if("string"==typeof l)if(ye.test(l)){l=l.replace(ve,"<$1></$2>");var c,p=(be.exec(l)||["",""])[1].toLowerCase(),h=Se[p]||Se._default,f=h[0],g=t.createElement("div"),v=Te.childNodes;for(t===F?Te.appendChild(g):u(t).appendChild(g),g.innerHTML=h[1]+l+h[2];f--;)g=g.lastChild;if(!E.support.tbody){var b=_e.test(l),_="table"!==p||b?"<table>"!==h[1]||b?[]:g.childNodes:g.firstChild&&g.firstChild.childNodes;for(o=_.length-1;o>=0;--o)E.nodeName(_[o],"tbody")&&!_[o].childNodes.length&&_[o].parentNode.removeChild(_[o])}!E.support.leadingWhitespace&&me.test(l)&&g.insertBefore(t.createTextNode(me.exec(l)[0]),g.firstChild),l=g.childNodes,g&&(g.parentNode.removeChild(g),v.length>0&&(c=v[v.length-1],c&&c.parentNode&&c.parentNode.removeChild(c)))}else l=t.createTextNode(l);var y;if(!E.support.appendChecked)if(l[0]&&"number"==typeof(y=l.length))for(o=0;o<y;o++)m(l[o]);else m(l);l.nodeType?s.push(l):s=E.merge(s,l)}if(i)for(a=function(e){return!e.type||Ce.test(e.type)},d=0;s[d];d++)if(n=s[d],r&&E.nodeName(n,"script")&&(!n.type||Ce.test(n.type)))r.push(n.parentNode?n.parentNode.removeChild(n):n);else{if(1===n.nodeType){var x=E.grep(n.getElementsByTagName("script"),a);s.splice.apply(s,[d+1,0].concat(x))}i.appendChild(n)}return s},cleanData:function(e){for(var t,i,r,a=E.cache,n=E.event.special,o=E.support.deleteExpando,s=0;null!=(r=e[s]);s++)if((!r.nodeName||!E.noData[r.nodeName.toLowerCase()])&&(i=r[E.expando])){if(t=a[i],t&&t.events){for(var l in t.events)n[l]?E.event.remove(r,l):E.removeEvent(r,l,t.handle);t.handle&&(t.handle.elem=null)}o?delete r[E.expando]:r.removeAttribute&&r.removeAttribute(E.expando),delete a[i]}}});var Pe,Ie,$e,Fe=/alpha\([^)]*\)/i,Me=/opacity=([^)]*)/,Ae=/([A-Z]|^ms)/g,Ee=/^[\-+]?(?:\d*\.)?\d+$/i,qe=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,Oe=/^([\-+])=([\-+.\de]+)/,Re=/^margin/,Ne={position:"absolute",visibility:"hidden",display:"block"},Ge=["Top","Right","Bottom","Left"];E.fn.css=function(e,i){return E.access(this,function(e,i,r){return r!==t?E.style(e,i,r):E.css(e,i)},e,i,arguments.length>1)},E.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=Pe(e,"opacity");return""===i?"1":i}return e.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":E.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,i,r,a){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var n,o,s=E.camelCase(i),l=e.style,d=E.cssHooks[s];if(i=E.cssProps[s]||s,r===t)return d&&"get"in d&&(n=d.get(e,!1,a))!==t?n:l[i];if(o=typeof r,"string"===o&&(n=Oe.exec(r))&&(r=+(n[1]+1)*+n[2]+parseFloat(E.css(e,i)),o="number"),!(null==r||"number"===o&&isNaN(r)||("number"!==o||E.cssNumber[s]||(r+="px"),d&&"set"in d&&(r=d.set(e,r))===t)))try{l[i]=r}catch(u){}}},css:function(e,i,r){var a,n;return i=E.camelCase(i),n=E.cssHooks[i],i=E.cssProps[i]||i,"cssFloat"===i&&(i="float"),n&&"get"in n&&(a=n.get(e,!0,r))!==t?a:Pe?Pe(e,i):void 0},swap:function(e,t,i){var r,a,n={};for(a in t)n[a]=e.style[a],e.style[a]=t[a];r=i.call(e);for(a in t)e.style[a]=n[a];return r}}),E.curCSS=E.css,F.defaultView&&F.defaultView.getComputedStyle&&(Ie=function(e,t){var i,r,a,n,o=e.style;return t=t.replace(Ae,"-$1").toLowerCase(),(r=e.ownerDocument.defaultView)&&(a=r.getComputedStyle(e,null))&&(i=a.getPropertyValue(t),""!==i||E.contains(e.ownerDocument.documentElement,e)||(i=E.style(e,t))),!E.support.pixelMargin&&a&&Re.test(t)&&qe.test(i)&&(n=o.width,o.width=i,i=a.width,o.width=n),i}),F.documentElement.currentStyle&&($e=function(e,t){var i,r,a,n=e.currentStyle&&e.currentStyle[t],o=e.style;return null==n&&o&&(a=o[t])&&(n=a),qe.test(n)&&(i=o.left,r=e.runtimeStyle&&e.runtimeStyle.left,r&&(e.runtimeStyle.left=e.currentStyle.left),o.left="fontSize"===t?"1em":n,n=o.pixelLeft+"px",o.left=i,r&&(e.runtimeStyle.left=r)),""===n?"auto":n}),Pe=Ie||$e,E.each(["height","width"],function(e,t){E.cssHooks[t]={get:function(e,i,r){if(i)return 0!==e.offsetWidth?b(e,t,r):E.swap(e,Ne,function(){return b(e,t,r)})},set:function(e,t){return Ee.test(t)?t+"px":t}}}),E.support.opacity||(E.cssHooks.opacity={get:function(e,t){return Me.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?parseFloat(RegExp.$1)/100+"":t?"1":""},set:function(e,t){var i=e.style,r=e.currentStyle,a=E.isNumeric(t)?"alpha(opacity="+100*t+")":"",n=r&&r.filter||i.filter||"";i.zoom=1,t>=1&&""===E.trim(n.replace(Fe,""))&&(i.removeAttribute("filter"),r&&!r.filter)||(i.filter=Fe.test(n)?n.replace(Fe,a):n+" "+a)}}),E(function(){E.support.reliableMarginRight||(E.cssHooks.marginRight={get:function(e,t){return E.swap(e,{display:"inline-block"},function(){return t?Pe(e,"margin-right"):e.style.marginRight})}})}),E.expr&&E.expr.filters&&(E.expr.filters.hidden=function(e){var t=e.offsetWidth,i=e.offsetHeight;return 0===t&&0===i||!E.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||E.css(e,"display"))},E.expr.filters.visible=function(e){return!E.expr.filters.hidden(e)}),E.each({margin:"",padding:"",border:"Width"},function(e,t){E.cssHooks[e+t]={expand:function(i){var r,a="string"==typeof i?i.split(" "):[i],n={};for(r=0;r<4;r++)n[e+Ge[r]+t]=a[r]||a[r-2]||a[0];return n}}});var Le,ze,Qe=/%20/g,He=/\[\]$/,Be=/\r?\n/g,We=/#.*$/,Ue=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ve=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Ke=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,Xe=/^(?:GET|HEAD)$/,Ye=/^\/\//,Je=/\?/,Ze=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,et=/^(?:select|textarea)/i,tt=/\s+/,it=/([?&])_=[^&]*/,rt=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,at=E.fn.load,nt={},ot={},st=["*/"]+["*"];try{Le=A.href}catch(lt){Le=F.createElement("a"),Le.href="",Le=Le.href}ze=rt.exec(Le.toLowerCase())||[],E.fn.extend({load:function(e,i,r){if("string"!=typeof e&&at)return at.apply(this,arguments);if(!this.length)return this;var a=e.indexOf(" ");if(a>=0){var n=e.slice(a,e.length);e=e.slice(0,a)}var o="GET";i&&(E.isFunction(i)?(r=i,i=t):"object"==typeof i&&(i=E.param(i,E.ajaxSettings.traditional),o="POST"));var s=this;return E.ajax({url:e,type:o,dataType:"html",data:i,complete:function(e,t,i){i=e.responseText,e.isResolved()&&(e.done(function(e){i=e}),s.html(n?E("<div>").append(i.replace(Ze,"")).find(n):i)),r&&s.each(r,[i,t,e])}}),this},serialize:function(){return E.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?E.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||et.test(this.nodeName)||Ve.test(this.type))}).map(function(e,t){var i=E(this).val();return null==i?null:E.isArray(i)?E.map(i,function(e,i){return{name:t.name,value:e.replace(Be,"\r\n")}}):{name:t.name,value:i.replace(Be,"\r\n")}}).get()}}),E.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){E.fn[t]=function(e){return this.on(t,e)}}),E.each(["get","post"],function(e,i){E[i]=function(e,r,a,n){return E.isFunction(r)&&(n=n||a,a=r,r=t),E.ajax({type:i,url:e,data:r,success:a,dataType:n})}}),E.extend({getScript:function(e,i){return E.get(e,t,i,"script")},getJSON:function(e,t,i){return E.get(e,t,i,"json")},ajaxSetup:function(e,t){return t?x(e,E.ajaxSettings):(t=e,e=E.ajaxSettings),x(e,t),e},ajaxSettings:{url:Le,isLocal:Ke.test(ze[1]),
global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":st},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":E.parseJSON,"text xml":E.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:_(nt),ajaxTransport:_(ot),ajax:function(e,i){function r(e,i,r,o){if(2!==x){x=2,l&&clearTimeout(l),s=t,n=o||"",w.readyState=e>0?4:0;var d,c,b,_,y,C=i,D=r?j(p,w,r):t;if(e>=200&&e<300||304===e)if(p.ifModified&&((_=w.getResponseHeader("Last-Modified"))&&(E.lastModified[a]=_),(y=w.getResponseHeader("Etag"))&&(E.etag[a]=y)),304===e)C="notmodified",d=!0;else try{c=k(p,D),C="success",d=!0}catch(S){C="parsererror",b=S}else b=C,C&&!e||(C="error",e<0&&(e=0));w.status=e,w.statusText=""+(i||C),d?g.resolveWith(h,[c,C,w]):g.rejectWith(h,[w,C,b]),w.statusCode(v),v=t,u&&f.trigger("ajax"+(d?"Success":"Error"),[w,p,d?c:b]),m.fireWith(h,[w,C]),u&&(f.trigger("ajaxComplete",[w,p]),--E.active||E.event.trigger("ajaxStop"))}}"object"==typeof e&&(i=e,e=t),i=i||{};var a,n,o,s,l,d,u,c,p=E.ajaxSetup({},i),h=p.context||p,f=h!==p&&(h.nodeType||h instanceof E)?E(h):E.event,g=E.Deferred(),m=E.Callbacks("once memory"),v=p.statusCode||{},b={},_={},x=0,w={readyState:0,setRequestHeader:function(e,t){if(!x){var i=e.toLowerCase();e=_[i]=_[i]||e,b[e]=t}return this},getAllResponseHeaders:function(){return 2===x?n:null},getResponseHeader:function(e){var i;if(2===x){if(!o)for(o={};i=Ue.exec(n);)o[i[1].toLowerCase()]=i[2];i=o[e.toLowerCase()]}return i===t?null:i},overrideMimeType:function(e){return x||(p.mimeType=e),this},abort:function(e){return e=e||"abort",s&&s.abort(e),r(0,e),this}};if(g.promise(w),w.success=w.done,w.error=w.fail,w.complete=m.add,w.statusCode=function(e){if(e){var t;if(x<2)for(t in e)v[t]=[v[t],e[t]];else t=e[w.status],w.then(t,t)}return this},p.url=((e||p.url)+"").replace(We,"").replace(Ye,ze[1]+"//"),p.dataTypes=E.trim(p.dataType||"*").toLowerCase().split(tt),null==p.crossDomain&&(d=rt.exec(p.url.toLowerCase()),p.crossDomain=!(!d||d[1]==ze[1]&&d[2]==ze[2]&&(d[3]||("http:"===d[1]?80:443))==(ze[3]||("http:"===ze[1]?80:443)))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=E.param(p.data,p.traditional)),y(nt,p,i,w),2===x)return!1;if(u=p.global,p.type=p.type.toUpperCase(),p.hasContent=!Xe.test(p.type),u&&0===E.active++&&E.event.trigger("ajaxStart"),!p.hasContent&&(p.data&&(p.url+=(Je.test(p.url)?"&":"?")+p.data,delete p.data),a=p.url,p.cache===!1)){var C=E.now(),D=p.url.replace(it,"$1_="+C);p.url=D+(D===p.url?(Je.test(p.url)?"&":"?")+"_="+C:"")}(p.data&&p.hasContent&&p.contentType!==!1||i.contentType)&&w.setRequestHeader("Content-Type",p.contentType),p.ifModified&&(a=a||p.url,E.lastModified[a]&&w.setRequestHeader("If-Modified-Since",E.lastModified[a]),E.etag[a]&&w.setRequestHeader("If-None-Match",E.etag[a])),w.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+st+"; q=0.01":""):p.accepts["*"]);for(c in p.headers)w.setRequestHeader(c,p.headers[c]);if(p.beforeSend&&(p.beforeSend.call(h,w,p)===!1||2===x))return w.abort(),!1;for(c in{success:1,error:1,complete:1})w[c](p[c]);if(s=y(ot,p,i,w)){w.readyState=1,u&&f.trigger("ajaxSend",[w,p]),p.async&&p.timeout>0&&(l=setTimeout(function(){w.abort("timeout")},p.timeout));try{x=1,s.send(b,r)}catch(S){if(!(x<2))throw S;r(-1,S)}}else r(-1,"No Transport");return w},param:function(e,i){var r=[],a=function(e,t){t=E.isFunction(t)?t():t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(i===t&&(i=E.ajaxSettings.traditional),E.isArray(e)||e.jquery&&!E.isPlainObject(e))E.each(e,function(){a(this.name,this.value)});else for(var n in e)w(n,e[n],i,a);return r.join("&").replace(Qe,"+")}}),E.extend({active:0,lastModified:{},etag:{}});var dt=E.now(),ut=/(\=)\?(&|$)|\?\?/i;E.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return E.expando+"_"+dt++}}),E.ajaxPrefilter("json jsonp",function(t,i,r){var a="string"==typeof t.data&&/^application\/x\-www\-form\-urlencoded/.test(t.contentType);if("jsonp"===t.dataTypes[0]||t.jsonp!==!1&&(ut.test(t.url)||a&&ut.test(t.data))){var n,o=t.jsonpCallback=E.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s=e[o],l=t.url,d=t.data,u="$1"+o+"$2";return t.jsonp!==!1&&(l=l.replace(ut,u),t.url===l&&(a&&(d=d.replace(ut,u)),t.data===d&&(l+=(/\?/.test(l)?"&":"?")+t.jsonp+"="+o))),t.url=l,t.data=d,e[o]=function(e){n=[e]},r.always(function(){e[o]=s,n&&E.isFunction(s)&&e[o](n[0])}),t.converters["script json"]=function(){return n||E.error(o+" was not called"),n[0]},t.dataTypes[0]="json","script"}}),E.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return E.globalEval(e),e}}}),E.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),E.ajaxTransport("script",function(e){if(e.crossDomain){var i,r=F.head||F.getElementsByTagName("head")[0]||F.documentElement;return{send:function(a,n){i=F.createElement("script"),i.async="async",e.scriptCharset&&(i.charset=e.scriptCharset),i.src=e.url,i.onload=i.onreadystatechange=function(e,a){(a||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,r&&i.parentNode&&r.removeChild(i),i=t,a||n(200,"success"))},r.insertBefore(i,r.firstChild)},abort:function(){i&&i.onload(0,1)}}}});var ct,pt=!!e.ActiveXObject&&function(){for(var e in ct)ct[e](0,1)},ht=0;E.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&C()||D()}:C,function(e){E.extend(E.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(E.ajaxSettings.xhr()),E.support.ajax&&E.ajaxTransport(function(i){if(!i.crossDomain||E.support.cors){var r;return{send:function(a,n){var o,s,l=i.xhr();if(i.username?l.open(i.type,i.url,i.async,i.username,i.password):l.open(i.type,i.url,i.async),i.xhrFields)for(s in i.xhrFields)l[s]=i.xhrFields[s];i.mimeType&&l.overrideMimeType&&l.overrideMimeType(i.mimeType),i.crossDomain||a["X-Requested-With"]||(a["X-Requested-With"]="XMLHttpRequest");try{for(s in a)l.setRequestHeader(s,a[s])}catch(d){}l.send(i.hasContent&&i.data||null),r=function(e,a){var s,d,u,c,p;try{if(r&&(a||4===l.readyState))if(r=t,o&&(l.onreadystatechange=E.noop,pt&&delete ct[o]),a)4!==l.readyState&&l.abort();else{s=l.status,u=l.getAllResponseHeaders(),c={},p=l.responseXML,p&&p.documentElement&&(c.xml=p);try{c.text=l.responseText}catch(e){}try{d=l.statusText}catch(h){d=""}s||!i.isLocal||i.crossDomain?1223===s&&(s=204):s=c.text?200:404}}catch(f){a||n(-1,f)}c&&n(s,d,c,u)},i.async&&4!==l.readyState?(o=++ht,pt&&(ct||(ct={},E(e).unload(pt)),ct[o]=r),l.onreadystatechange=r):r()},abort:function(){r&&r(0,1)}}}});var ft,gt,mt,vt,bt={},_t=/^(?:toggle|show|hide)$/,yt=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,xt=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];E.fn.extend({show:function(e,t,i){var r,a;if(e||0===e)return this.animate(P("show",3),e,t,i);for(var n=0,o=this.length;n<o;n++)r=this[n],r.style&&(a=r.style.display,E._data(r,"olddisplay")||"none"!==a||(a=r.style.display=""),(""===a&&"none"===E.css(r,"display")||!E.contains(r.ownerDocument.documentElement,r))&&E._data(r,"olddisplay",I(r.nodeName)));for(n=0;n<o;n++)r=this[n],r.style&&(a=r.style.display,""!==a&&"none"!==a||(r.style.display=E._data(r,"olddisplay")||""));return this},hide:function(e,t,i){if(e||0===e)return this.animate(P("hide",3),e,t,i);for(var r,a,n=0,o=this.length;n<o;n++)r=this[n],r.style&&(a=E.css(r,"display"),"none"===a||E._data(r,"olddisplay")||E._data(r,"olddisplay",a));for(n=0;n<o;n++)this[n].style&&(this[n].style.display="none");return this},_toggle:E.fn.toggle,toggle:function(e,t,i){var r="boolean"==typeof e;return E.isFunction(e)&&E.isFunction(t)?this._toggle.apply(this,arguments):null==e||r?this.each(function(){var t=r?e:E(this).is(":hidden");E(this)[t?"show":"hide"]()}):this.animate(P("toggle",3),e,t,i),this},fadeTo:function(e,t,i,r){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:t},e,i,r)},animate:function(e,t,i,r){function a(){n.queue===!1&&E._mark(this);var t,i,r,a,o,s,l,d,u,c,p,h=E.extend({},n),f=1===this.nodeType,g=f&&E(this).is(":hidden");h.animatedProperties={};for(r in e)if(t=E.camelCase(r),r!==t&&(e[t]=e[r],delete e[r]),(o=E.cssHooks[t])&&"expand"in o){s=o.expand(e[t]),delete e[t];for(r in s)r in e||(e[r]=s[r])}for(t in e){if(i=e[t],E.isArray(i)?(h.animatedProperties[t]=i[1],i=e[t]=i[0]):h.animatedProperties[t]=h.specialEasing&&h.specialEasing[t]||h.easing||"swing","hide"===i&&g||"show"===i&&!g)return h.complete.call(this);!f||"height"!==t&&"width"!==t||(h.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],"inline"===E.css(this,"display")&&"none"===E.css(this,"float")&&(E.support.inlineBlockNeedsLayout&&"inline"!==I(this.nodeName)?this.style.zoom=1:this.style.display="inline-block"))}null!=h.overflow&&(this.style.overflow="hidden");for(r in e)a=new E.fx(this,h,r),i=e[r],_t.test(i)?(p=E._data(this,"toggle"+r)||("toggle"===i?g?"show":"hide":0),p?(E._data(this,"toggle"+r,"show"===p?"hide":"show"),a[p]()):a[i]()):(l=yt.exec(i),d=a.cur(),l?(u=parseFloat(l[2]),c=l[3]||(E.cssNumber[r]?"":"px"),"px"!==c&&(E.style(this,r,(u||1)+c),d=(u||1)/a.cur()*d,E.style(this,r,d+c)),l[1]&&(u=("-="===l[1]?-1:1)*u+d),a.custom(d,u,c)):a.custom(d,i,""));return!0}var n=E.speed(t,i,r);return E.isEmptyObject(e)?this.each(n.complete,[!1]):(e=E.extend({},e),n.queue===!1?this.each(a):this.queue(n.queue,a))},stop:function(e,i,r){return"string"!=typeof e&&(r=i,i=e,e=t),i&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){function t(e,t,i){var a=t[i];E.removeData(e,i,!0),a.stop(r)}var i,a=!1,n=E.timers,o=E._data(this);if(r||E._unmark(!0,this),null==e)for(i in o)o[i]&&o[i].stop&&i.indexOf(".run")===i.length-4&&t(this,o,i);else o[i=e+".run"]&&o[i].stop&&t(this,o,i);for(i=n.length;i--;)n[i].elem!==this||null!=e&&n[i].queue!==e||(r?n[i](!0):n[i].saveState(),a=!0,n.splice(i,1));r&&a||E.dequeue(this,e)})}}),E.each({slideDown:P("show",1),slideUp:P("hide",1),slideToggle:P("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){E.fn[e]=function(e,i,r){return this.animate(t,e,i,r)}}),E.extend({speed:function(e,t,i){var r=e&&"object"==typeof e?E.extend({},e):{complete:i||!i&&t||E.isFunction(e)&&e,duration:e,easing:i&&t||t&&!E.isFunction(t)&&t};return r.duration=E.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in E.fx.speeds?E.fx.speeds[r.duration]:E.fx.speeds._default,null!=r.queue&&r.queue!==!0||(r.queue="fx"),r.old=r.complete,r.complete=function(e){E.isFunction(r.old)&&r.old.call(this),r.queue?E.dequeue(this,r.queue):e!==!1&&E._unmark(this)},r},easing:{linear:function(e){return e},swing:function(e){return-Math.cos(e*Math.PI)/2+.5}},timers:[],fx:function(e,t,i){this.options=t,this.elem=e,this.prop=i,t.orig=t.orig||{}}}),E.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(E.fx.step[this.prop]||E.fx.step._default)(this)},cur:function(){if(null!=this.elem[this.prop]&&(!this.elem.style||null==this.elem.style[this.prop]))return this.elem[this.prop];var e,t=E.css(this.elem,this.prop);return isNaN(e=parseFloat(t))?t&&"auto"!==t?t:0:e},custom:function(e,i,r){function a(e){return n.step(e)}var n=this,o=E.fx;this.startTime=vt||S(),this.end=i,this.now=this.start=e,this.pos=this.state=0,this.unit=r||this.unit||(E.cssNumber[this.prop]?"":"px"),a.queue=this.options.queue,a.elem=this.elem,a.saveState=function(){E._data(n.elem,"fxshow"+n.prop)===t&&(n.options.hide?E._data(n.elem,"fxshow"+n.prop,n.start):n.options.show&&E._data(n.elem,"fxshow"+n.prop,n.end))},a()&&E.timers.push(a)&&!mt&&(mt=setInterval(o.tick,o.interval))},show:function(){var e=E._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=e||E.style(this.elem,this.prop),this.options.show=!0,e!==t?this.custom(this.cur(),e):this.custom("width"===this.prop||"height"===this.prop?1:0,this.cur()),E(this.elem).show()},hide:function(){this.options.orig[this.prop]=E._data(this.elem,"fxshow"+this.prop)||E.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(e){var t,i,r,a=vt||S(),n=!0,o=this.elem,s=this.options;if(e||a>=s.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),s.animatedProperties[this.prop]=!0;for(t in s.animatedProperties)s.animatedProperties[t]!==!0&&(n=!1);if(n){if(null==s.overflow||E.support.shrinkWrapBlocks||E.each(["","X","Y"],function(e,t){o.style["overflow"+t]=s.overflow[e]}),s.hide&&E(o).hide(),s.hide||s.show)for(t in s.animatedProperties)E.style(o,t,s.orig[t]),E.removeData(o,"fxshow"+t,!0),E.removeData(o,"toggle"+t,!0);r=s.complete,r&&(s.complete=!1,r.call(o))}return!1}return s.duration==1/0?this.now=a:(i=a-this.startTime,this.state=i/s.duration,this.pos=E.easing[s.animatedProperties[this.prop]](this.state,i,0,1,s.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update(),!0}},E.extend(E.fx,{tick:function(){for(var e,t=E.timers,i=0;i<t.length;i++)e=t[i],e()||t[i]!==e||t.splice(i--,1);t.length||E.fx.stop()},interval:13,stop:function(){clearInterval(mt),mt=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){E.style(e.elem,"opacity",e.now)},_default:function(e){e.elem.style&&null!=e.elem.style[e.prop]?e.elem.style[e.prop]=e.now+e.unit:e.elem[e.prop]=e.now}}}),E.each(xt.concat.apply([],xt),function(e,t){t.indexOf("margin")&&(E.fx.step[t]=function(e){E.style(e.elem,t,Math.max(0,e.now)+e.unit)})}),E.expr&&E.expr.filters&&(E.expr.filters.animated=function(e){return E.grep(E.timers,function(t){return e===t.elem}).length});var wt,jt=/^t(?:able|d|h)$/i,kt=/^(?:body|html)$/i;wt="getBoundingClientRect"in F.documentElement?function(e,t,i,r){try{r=e.getBoundingClientRect()}catch(a){}if(!r||!E.contains(i,e))return r?{top:r.top,left:r.left}:{top:0,left:0};var n=t.body,o=$(t),s=i.clientTop||n.clientTop||0,l=i.clientLeft||n.clientLeft||0,d=o.pageYOffset||E.support.boxModel&&i.scrollTop||n.scrollTop,u=o.pageXOffset||E.support.boxModel&&i.scrollLeft||n.scrollLeft,c=r.top+d-s,p=r.left+u-l;return{top:c,left:p}}:function(e,t,i){for(var r,a=e.offsetParent,n=e,o=t.body,s=t.defaultView,l=s?s.getComputedStyle(e,null):e.currentStyle,d=e.offsetTop,u=e.offsetLeft;(e=e.parentNode)&&e!==o&&e!==i&&(!E.support.fixedPosition||"fixed"!==l.position);)r=s?s.getComputedStyle(e,null):e.currentStyle,d-=e.scrollTop,u-=e.scrollLeft,e===a&&(d+=e.offsetTop,u+=e.offsetLeft,!E.support.doesNotAddBorder||E.support.doesAddBorderForTableAndCells&&jt.test(e.nodeName)||(d+=parseFloat(r.borderTopWidth)||0,u+=parseFloat(r.borderLeftWidth)||0),n=a,a=e.offsetParent),E.support.subtractsBorderForOverflowNotVisible&&"visible"!==r.overflow&&(d+=parseFloat(r.borderTopWidth)||0,u+=parseFloat(r.borderLeftWidth)||0),l=r;return"relative"!==l.position&&"static"!==l.position||(d+=o.offsetTop,u+=o.offsetLeft),E.support.fixedPosition&&"fixed"===l.position&&(d+=Math.max(i.scrollTop,o.scrollTop),u+=Math.max(i.scrollLeft,o.scrollLeft)),{top:d,left:u}},E.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){E.offset.setOffset(this,e,t)});var i=this[0],r=i&&i.ownerDocument;return r?i===r.body?E.offset.bodyOffset(i):wt(i,r,r.documentElement):null},E.offset={bodyOffset:function(e){var t=e.offsetTop,i=e.offsetLeft;return E.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(E.css(e,"marginTop"))||0,i+=parseFloat(E.css(e,"marginLeft"))||0),{top:t,left:i}},setOffset:function(e,t,i){var r=E.css(e,"position");"static"===r&&(e.style.position="relative");var a,n,o=E(e),s=o.offset(),l=E.css(e,"top"),d=E.css(e,"left"),u=("absolute"===r||"fixed"===r)&&E.inArray("auto",[l,d])>-1,c={},p={};u?(p=o.position(),a=p.top,n=p.left):(a=parseFloat(l)||0,n=parseFloat(d)||0),E.isFunction(t)&&(t=t.call(e,i,s)),null!=t.top&&(c.top=t.top-s.top+a),null!=t.left&&(c.left=t.left-s.left+n),"using"in t?t.using.call(e,c):o.css(c)}},E.fn.extend({position:function(){if(!this[0])return null;var e=this[0],t=this.offsetParent(),i=this.offset(),r=kt.test(t[0].nodeName)?{top:0,left:0}:t.offset();return i.top-=parseFloat(E.css(e,"marginTop"))||0,i.left-=parseFloat(E.css(e,"marginLeft"))||0,r.top+=parseFloat(E.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(E.css(t[0],"borderLeftWidth"))||0,{top:i.top-r.top,left:i.left-r.left}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||F.body;e&&!kt.test(e.nodeName)&&"static"===E.css(e,"position");)e=e.offsetParent;return e})}}),E.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,i){var r=/Y/.test(i);E.fn[e]=function(a){return E.access(this,function(e,a,n){var o=$(e);return n===t?o?i in o?o[i]:E.support.boxModel&&o.document.documentElement[a]||o.document.body[a]:e[a]:void(o?o.scrollTo(r?E(o).scrollLeft():n,r?n:E(o).scrollTop()):e[a]=n)},e,a,arguments.length,null)}}),E.each({Height:"height",Width:"width"},function(e,i){var r="client"+e,a="scroll"+e,n="offset"+e;E.fn["inner"+e]=function(){var e=this[0];return e?e.style?parseFloat(E.css(e,i,"padding")):this[i]():null},E.fn["outer"+e]=function(e){var t=this[0];return t?t.style?parseFloat(E.css(t,i,e?"margin":"border")):this[i]():null},E.fn[i]=function(e){return E.access(this,function(e,i,o){var s,l,d,u;return E.isWindow(e)?(s=e.document,l=s.documentElement[r],E.support.boxModel&&l||s.body&&s.body[r]||l):9===e.nodeType?(s=e.documentElement,s[r]>=s[a]?s[r]:Math.max(e.body[a],s[a],e.body[n],s[n])):o===t?(d=E.css(e,i),u=parseFloat(d),E.isNumeric(u)?u:d):void E(e).css(i,o)},i,e,arguments.length,null)}}),e.jQuery=e.$=E,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return E})}(window),function(e){"function"==typeof define&&define.amd?define(["private-jquery"],e):e(jQuery)}(function(e,t){function i(t,i){var a,n,o,s=t.nodeName.toLowerCase();return"area"===s?(a=t.parentNode,n=a.name,!(!t.href||!n||"map"!==a.nodeName.toLowerCase())&&(o=e("img[usemap=#"+n+"]")[0],!!o&&r(o))):(/input|select|textarea|button|object/.test(s)?!t.disabled:"a"===s?t.href||i:i)&&r(t)}function r(t){return!e(t).parents().andSelf().filter(function(){return"hidden"===e.css(this,"visibility")||e.expr.filters.hidden(this)}).length}if(e.ui=e.ui||{},!e.ui.version)return e.extend(e.ui,{version:"@VERSION",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,i){return"number"==typeof t?this.each(function(){var r=this;setTimeout(function(){e(r).focus(),i&&i.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return t=e.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(i){if(i!==t)return this.css("zIndex",i);if(this.length)for(var r,a,n=e(this[0]);n.length&&n[0]!==document;){if(r=n.css("position"),("absolute"===r||"relative"===r||"fixed"===r)&&(a=parseInt(n.css("zIndex"),10),!isNaN(a)&&0!==a))return a;n=n.parent()}return 0},disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.each(["Width","Height"],function(i,r){function a(t,i,r,a){return e.each(n,function(){i-=parseFloat(e.css(t,"padding"+this))||0,r&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),a&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var n="Width"===r?["Left","Right"]:["Top","Bottom"],o=r.toLowerCase(),s={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(i){return i===t?s["inner"+r].call(this):this.each(function(){e(this).css(o,a(this,i)+"px")})},e.fn["outer"+r]=function(t,i){return"number"!=typeof t?s["outer"+r].call(this,t):this.each(function(){e(this).css(o,a(this,t,!0,i)+"px")})}}),e.extend(e.expr[":"],{data:function(t,i,r){return!!e.data(t,r[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var r=e.attr(t,"tabindex"),a=isNaN(r);return(a||r>=0)&&i(t,!a)}}),e(function(){var t=document.body,i=t.appendChild(i=document.createElement("div"));i.offsetHeight,e.extend(i.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=100===i.offsetHeight,e.support.selectstart="onselectstart"in i,t.removeChild(i).style.display="none"}),e.extend(e.ui,{plugin:{add:function(t,i,r){var a,n=e.ui[t].prototype;for(a in r)n.plugins[a]=n.plugins[a]||[],n.plugins[a].push([i,r[a]])},call:function(e,t,i){var r,a=e.plugins[t];if(a&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(r=0;r<a.length;r++)e.options[a[r][0]]&&a[r][1].apply(e.element,i)}},contains:e.contains,hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var r=i&&"left"===i?"scrollLeft":"scrollTop",a=!1;return t[r]>0||(t[r]=1,a=t[r]>0,t[r]=0,a)},isOverAxis:function(e,t,i){return e>t&&e<t+i},isOver:function(t,i,r,a,n,o){return e.ui.isOverAxis(t,r,n)&&e.ui.isOverAxis(i,a,o)}}),e}),function(e){"function"==typeof define&&define.amd?define(["private-jqueryui-core-menu"],e):e(jQuery)}(function(e,t){var i=Array.prototype.slice,r=e.cleanData;return e.cleanData=function(t){for(var i,a=0;null!=(i=t[a]);a++)try{e(i).triggerHandler("remove")}catch(n){}r(t)},e.widget=function(t,i,r){var a,n,o,s,l=t.split(".")[0];t=t.split(".")[1],a=l+"-"+t,r||(r=i,i=e.Widget),e.expr[":"][a]=function(t){return!!e.data(t,a)},e[l]=e[l]||{},n=e[l][t],o=e[l][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new o(e,t)},e.extend(o,n,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),s=new i,s.options=e.widget.extend({},s.options),e.each(r,function(t,a){e.isFunction(a)&&(r[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},r=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,n=this._superApply;return this._super=e,this._superApply=r,t=a.apply(this,arguments),this._super=i,this._superApply=n,t}}())}),o.prototype=e.widget.extend(s,{widgetEventPrefix:t},r,{constructor:o,namespace:l,widgetName:t,widgetBaseClass:a,widgetFullName:a}),n?(e.each(n._childConstructors,function(t,i){var r=i.prototype;e.widget(r.namespace+"."+r.widgetName,o,i._proto)}),delete n._childConstructors):i._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(r){for(var a,n,o=i.call(arguments,1),s=0,l=o.length;s<l;s++)for(a in o[s])n=o[s][a],o[s].hasOwnProperty(a)&&n!==t&&(r[a]=e.isPlainObject(n)?e.widget.extend({},r[a],n):n);return r},e.widget.bridge=function(r,a){var n=a.prototype.widgetFullName;e.fn[r]=function(o){var s="string"==typeof o,l=i.call(arguments,1),d=this;return o=!s&&l.length?e.widget.extend.apply(null,[o].concat(l)):o,s?this.each(function(){var i,a=e.data(this,n);return a?e.isFunction(a[o])&&"_"!==o.charAt(0)?(i=a[o].apply(a,l),i!==a&&i!==t?(d=i&&i.jquery?d.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+o+"' for "+r+" widget instance"):e.error("cannot call methods on "+r+" prior to initialization; attempted to call method '"+o+"'")}):this.each(function(){var t=e.data(this,n);t?t.option(o||{})._init():new a(o,this)}),d}},e.Widget=function(e,t){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,i){i=e(i||this.defaultElement||this)[0],this.element=e(i),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),i!==this&&(e.data(i,this.widgetName,this),e.data(i,this.widgetFullName,this),this._bind({remove:"destroy"}),this.document=e(i.style?i.ownerDocument:i.document||i),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind("."+this.widgetName).removeData(this.widgetName).removeData(this.widgetFullName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind("."+this.widgetName),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(i,r){var a,n,o,s=i;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof i)if(s={},a=i.split("."),i=a.shift(),a.length){for(n=s[i]=e.widget.extend({},this.options[i]),o=0;o<a.length-1;o++)n[a[o]]=n[a[o]]||{},n=n[a[o]];if(i=a.pop(),r===t)return n[i]===t?null:n[i];n[i]=r}else{if(r===t)return this.options[i]===t?null:this.options[i];s[i]=r}return this._setOptions(s),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_bind:function(t,i){i?(t=e(t),this.bindings=this.bindings.add(t)):(i=t,t=this.element);var r=this;e.each(i,function(i,a){function n(){if(r.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof a?r[a]:a).apply(r,arguments)}"string"!=typeof a&&(n.guid=a.guid=a.guid||n.guid||jQuery.guid++);var o=i.match(/^(\w+)\s*(.*)$/),s=o[1]+"."+r.widgetName,l=o[2];l?r.widget().delegate(l,s,n):t.bind(s,n)})},_delay:function(e,t){function i(){return("string"==typeof e?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._bind(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._bind(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,r){var a,n,o=this.options[t];if(r=r||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],n=i.originalEvent)for(a in n)a in i||(i[a]=n[a]);return this.element.trigger(i,r),!(e.isFunction(o)&&o.apply(this.element[0],[i].concat(r))===!1||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(r,a,n){"string"==typeof a&&(a={effect:a});var o,s=a?a===!0||"number"==typeof a?i:a.effect||i:t;a=a||{},"number"==typeof a&&(a={duration:a}),o=!e.isEmptyObject(a),a.complete=n,a.delay&&r.delay(a.delay),o&&e.effects&&(e.effects.effect[s]||e.uiBackCompat!==!1&&e.effects[s])?r[t](a):s!==t&&r[s]?r[s](a.duration,a.easing,n):r.queue(function(i){e(this)[t](),n&&n.call(r[0]),i()})}}),e.uiBackCompat!==!1&&(e.Widget.prototype._getCreateOptions=function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]}),e}),/*!
 * jQuery UI Position @VERSION
 *
 * Copyright 2012, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Position
 */
function(e,t){e.ui=e.ui||{};var i=/left|center|right/,r=/top|center|bottom/,a=/[\+\-]\d+%?/,n=/^\w+/,o=/%$/,s="center",l=e.fn.position;e.position={scrollbarWidth:function(){var t,i,r=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=r.children()[0];return e("body").append(r),t=a.offsetWidth,r.css("overflow","scroll"),i=a.offsetWidth,t===i&&(i=r[0].clientWidth),r.remove(),t-i},getScrollInfo:function(t){var i=t[0]!==window,r=i?t.css("overflow-x"):"",a=i?t.css("overflow-y"):"",n="auto"===r||"scroll"===r?e.position.scrollbarWidth():0,o="auto"===a||"scroll"===a?e.position.scrollbarWidth():0;return{height:t.height()<t[0].scrollHeight?o:0,width:t.width()<t[0].scrollWidth?n:0}}},e.fn.position=function(t){if(!t||!t.of)return l.apply(this,arguments);t=e.extend({},t);var d,u,c,p,h=e(t.of),f=e(t.within||window),g=h[0],m=(t.collision||"flip").split(" "),v={};return 9===g.nodeType?(u=h.width(),c=h.height(),p={top:0,left:0}):e.isWindow(g)?(u=h.width(),c=h.height(),p={top:h.scrollTop(),left:h.scrollLeft()}):g.preventDefault?(t.at="left top",u=c=0,p={top:t.of.pageY,left:t.of.pageX}):(u=h.outerWidth(),c=h.outerHeight(),p=h.offset()),e.each(["my","at"],function(){var e,o,l=(t[this]||"").split(" ");1===l.length&&(l=i.test(l[0])?l.concat([s]):r.test(l[0])?[s].concat(l):[s,s]),l[0]=i.test(l[0])?l[0]:s,l[1]=r.test(l[1])?l[1]:s,e=a.exec(l[0]),o=a.exec(l[1]),v[this]=[e?e[0]:0,o?o[0]:0],t[this]=[n.exec(l[0])[0],n.exec(l[1])[0]]}),1===m.length&&(m[1]=m[0]),"right"===t.at[0]?p.left+=u:t.at[0]===s&&(p.left+=u/2),"bottom"===t.at[1]?p.top+=c:t.at[1]===s&&(p.top+=c/2),d=[parseInt(v.at[0],10)*(o.test(v.at[0])?u/100:1),parseInt(v.at[1],10)*(o.test(v.at[1])?c/100:1)],p.left+=d[0],p.top+=d[1],this.each(function(){var i,r=e(this),a=r.outerWidth(),n=r.outerHeight(),l=parseInt(e.css(this,"marginLeft"),10)||0,h=parseInt(e.css(this,"marginTop"),10)||0,g=e.position.getScrollInfo(f),b=a+l+(parseInt(e.css(this,"marginRight"),10)||0)+g.width,_=n+h+(parseInt(e.css(this,"marginBottom"),10)||0)+g.height,y=e.extend({},p),x=[parseInt(v.my[0],10)*(o.test(v.my[0])?r.outerWidth()/100:1),parseInt(v.my[1],10)*(o.test(v.my[1])?r.outerHeight()/100:1)];"right"===t.my[0]?y.left-=a:t.my[0]===s&&(y.left-=a/2),"bottom"===t.my[1]?y.top-=n:t.my[1]===s&&(y.top-=n/2),y.left+=x[0],y.top+=x[1],e.support.offsetFractions||(y.left=Math.round(y.left),y.top=Math.round(y.top)),i={marginLeft:l,marginTop:h},e.each(["left","top"],function(o,s){e.ui.position[m[o]]&&e.ui.position[m[o]][s](y,{targetWidth:u,targetHeight:c,elemWidth:a,elemHeight:n,collisionPosition:i,collisionWidth:b,collisionHeight:_,offset:[d[0]+x[0],d[1]+x[1]],my:t.my,at:t.at,within:f,elem:r})}),e.fn.bgiframe&&r.bgiframe(),r.offset(e.extend(y,{using:t.using}))})},e.ui.position={fit:{left:function(t,i){var r,a=i.within,n=e(window),o=e.isWindow(i.within[0]),s=o?n.scrollLeft():a.offset().left,l=o?n.width():a.outerWidth(),d=t.left-i.collisionPosition.marginLeft,u=s-d,c=d+i.collisionWidth-l-s;i.collisionWidth>l?u>0&&c<=0?(r=t.left+u+i.collisionWidth-l-s,t.left+=u-r):c>0&&u<=0?t.left=s:u>c?t.left=s+l-i.collisionWidth:t.left=s:u>0?t.left+=u:c>0?t.left-=c:t.left=Math.max(t.left-d,t.left)},top:function(t,i){var r,a=i.within,n=e(window),o=e.isWindow(i.within[0]),s=o?n.scrollTop():a.offset().top,l=o?n.height():a.outerHeight(),d=t.top-i.collisionPosition.marginTop,u=s-d,c=d+i.collisionHeight-l-s;i.collisionHeight>l?u>0&&c<=0?(r=t.top+u+i.collisionHeight-l-s,t.top+=u-r):c>0&&u<=0?t.top=s:u>c?t.top=s+l-i.collisionHeight:t.top=s:u>0?t.top+=u:c>0?t.top-=c:t.top=Math.max(t.top-d,t.top)}},flip:{left:function(t,i){if(i.at[0]!==s){i.elem.removeClass("ui-flipped-left ui-flipped-right");var r,a,n=i.within,o=(e(window),e.isWindow(i.within[0])),l=(o?0:n.offset().left)+n.scrollLeft(),d=o?n.width():n.outerWidth(),u=o?0:n.offset().left,c=t.left-i.collisionPosition.marginLeft,p=c-u,h=c+i.collisionWidth-d-u,f=("left"===i.my[0],"left"===i.my[0]?-i.elemWidth:"right"===i.my[0]?i.elemWidth:0),g="left"===i.at[0]?i.targetWidth:-i.targetWidth,m=-2*i.offset[0];p<0?(r=t.left+f+g+m+i.collisionWidth-d-l,(r<0||r<Math.abs(p))&&(i.elem.addClass("ui-flipped-right"),t.left+=f+g+m)):h>0&&(a=t.left-i.collisionPosition.marginLeft+f+g+m-u,(a>0||Math.abs(a)<h)&&(i.elem.addClass("ui-flipped-left"),t.left+=f+g+m))}},top:function(t,i){if(i.at[1]!==s){i.elem.removeClass("ui-flipped-top ui-flipped-bottom");var r,a,n=i.within,o=(e(window),e.isWindow(i.within[0])),l=(o?0:n.offset().top)+n.scrollTop(),d=o?n.height():n.outerHeight(),u=o?0:n.offset().top,c=t.top-i.collisionPosition.marginTop,p=c-u,h=c+i.collisionHeight-d-u,f="top"===i.my[1],g=f?-i.elemHeight:"bottom"===i.my[1]?i.elemHeight:0,m="top"===i.at[1]?i.targetHeight:-i.targetHeight,v=-2*i.offset[1];p<0?(a=t.top+g+m+v+i.collisionHeight-d-l,t.top+g+m+v>p&&(a<0||a<Math.abs(p))&&(i.elem.addClass("ui-flipped-bottom"),t.top+=g+m+v)):h>0&&(r=t.top-i.collisionPosition.marginTop+g+m+v-u,t.top+g+m+v>h&&(r>0||Math.abs(r)<h)&&(i.elem.addClass("ui-flipped-top"),t.top+=g+m+v))}}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,r,a,n,o=document.getElementsByTagName("body")[0],s=document.createElement("div");t=document.createElement(o?"div":"body"),r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(n in r)t.style[n]=r[n];t.appendChild(s),i=o||document.documentElement,i.insertBefore(t,i.firstChild),s.style.cssText="position: absolute; left: 10.7432222px;",a=e(s).offset().left,e.support.offsetFractions=a>10&&a<11,t.innerHTML="",i.removeChild(t)}(),e.uiBackCompat!==!1&&!function(e){var i=e.fn.position;e.fn.position=function(r){if(!r||!r.offset)return i.call(this,r);var a=r.offset.split(" "),n=r.at.split(" ");return 1===a.length&&(a[1]=a[0]),/^\d/.test(a[0])&&(a[0]="+"+a[0]),/^\d/.test(a[1])&&(a[1]="+"+a[1]),1===n.length&&(/left|center|right/.test(n[0])?n[1]="center":(n[1]=n[0],n[0]="center")),i.call(this,e.extend(r,{at:n[0]+a[0]+" "+n[1]+a[1],offset:t}))}}(jQuery)}(jQuery),function(e){"function"==typeof define&&define.amd?define(["private-jqueryui-widget-menu"],e):e(jQuery)}(function(e){var t=0;return e.widget("ui.menu",{version:"@VERSION",defaultElement:"<ul>",delay:300,options:{menus:"ul",position:{my:"left top",at:"right top"},blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.menuId=this.element.attr("id")||"ui-menu-"+t++,this.element.find(".ui-icon").length&&this.element.addClass("ui-menu-icons"),this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({id:this.menuId,role:"menu",tabIndex:0}).bind("click.menu",e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled"),this._bind({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){t.stopImmediatePropagation(),e(t.target).closest(".ui-menu-item").is(".ui-state-disabled")||(this.select(t),this._delay(function(){this.element.is(":focus")||this.element.focus()},20))},"mouseover .ui-menu-item":function(t){t.stopImmediatePropagation();var i=e(t.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t){var i=this.element,r=i.children(".ui-menu-item").not(".ui-state-disabled").eq(0);this._hasScroll()&&!this.active?i.children().each(function(){var t=e(this);if(t.offset().top-i.offset().top>=0)return r=t,!1}):this.active&&(r=this.active),this.focus(t,r)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._bind(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t)}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").show(),this.element.find(".ui-menu-item").unbind(".menu").removeClass("ui-menu-item").removeAttr("role").children("a").removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").removeAttr("id").children(".ui-icon").remove()},_keydown:function(t){function i(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t),t.preventDefault(),t.stopImmediatePropagation();break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t),t.preventDefault(),t.stopImmediatePropagation();break;case e.ui.keyCode.HOME:this._move("first","first",t),t.preventDefault(),t.stopImmediatePropagation();break;case e.ui.keyCode.END:this._move("last","last",t),t.preventDefault(),t.stopImmediatePropagation();break;case e.ui.keyCode.UP:this.previous(t),t.preventDefault(),t.stopImmediatePropagation();break;case e.ui.keyCode.DOWN:this.next(t),t.preventDefault(),t.stopImmediatePropagation();break;case e.ui.keyCode.LEFT:this.collapse(t)&&t.stopImmediatePropagation(),t.preventDefault();break;case e.ui.keyCode.RIGHT:this.expand(t)&&t.stopImmediatePropagation(),t.preventDefault();break;case e.ui.keyCode.ENTER:this.active.children("a[aria-haspopup='true']").length?this.expand(t)&&t.stopImmediatePropagation():(this.select(t),t.stopImmediatePropagation()),t.preventDefault();break;case e.ui.keyCode.ESCAPE:this.collapse(t)&&t.stopImmediatePropagation(),t.preventDefault();break;default:t.stopPropagation(),clearTimeout(this.filterTimer);var r,a=this.previousFilter||"",n=String.fromCharCode(t.keyCode),o=!1;n===a?o=!0:n=a+n,r=this.activeMenu.children(".ui-menu-item").filter(function(){return new RegExp("^"+i(n),"i").test(e(this).children("a").text())}),r=o&&r.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):r,r.length||(n=String.fromCharCode(t.keyCode),r=this.activeMenu.children(".ui-menu-item").filter(function(){return new RegExp("^"+i(n),"i").test(e(this).children("a").text())})),r.length?(this.focus(t,r),r.length>1?(this.previousFilter=n,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}},refresh:function(){var t,i=this.menuId,r=this.element.find(this.options.menus+":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:"menu","aria-hidden":"true","aria-expanded":"false"});t=r.add(this.element),t.children(":not( .ui-menu-item ):has( a )").addClass("ui-menu-item").attr("role","presentation").children("a").addClass("ui-corner-all").attr("tabIndex",-1).attr("role","menuitem").attr("id",function(e){return i+"-"+e}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-—–\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),r.each(function(){var t=e(this),i=t.prev("a");i.attr("aria-haspopup","true").prepend('<span class="ui-menu-icon ui-icon ui-icon-carat-1-e"></span>'),t.attr("aria-labelledby",i.attr("id"))})},focus:function(t,i){var r,a,n,o,s,l,d;this.blur(t),this._hasScroll()&&(a=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,n=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,o=i.offset().top-this.activeMenu.offset().top-a-n,s=this.activeMenu.scrollTop(),l=this.activeMenu.height(),d=i.height(),o<0?this.activeMenu.scrollTop(s+o):o+d>l&&this.activeMenu.scrollTop(s+o-l+d)),this.active=i.first(),this.element.attr("aria-activedescendant",this.active.children("a").addClass("ui-state-focus").attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),this.timer=this._delay(function(){this._close()},this.delay),r=e("> .ui-menu",i),r.length&&/^mouse/.test(t.type)&&this._startOpening(r),this.activeMenu=i.parent(),this._trigger("focus",t,{item:i})},blur:function(e){clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active}))},_startOpening:function(e){clearTimeout(this.timer),"true"===e.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(e)},this.delay))},_open:function(t){clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents()).hide().attr("aria-hidden","true");var i=e.extend({},{of:this.active},"function"===e.type(this.options.position)?this.options.position(this.active):this.options.position);t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(t,i){clearTimeout(this.timer),this.timer=this._delay(function(){var r=i?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));r.length||(r=this.element),this._close(r),this.blur(t),this.activeMenu=r},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);if(t&&t.length)return this._close(),this.focus(e,t),!0},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").not(".ui-state-disabled").first();if(t&&t.length)return this._open(t.parent()),this._delay(function(){this.focus(e,t)},20),!0},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,i){var r;this.active&&(r="first"===e||"last"===e?this.active["first"===e?"prevAll":"nextAll"](".ui-menu-item").not(".ui-state-disabled").eq(-1):this.active[e+"All"](".ui-menu-item").not(".ui-state-disabled").eq(0)),r&&r.length&&this.active||(r=this.activeMenu.children(".ui-menu-item")[t]()),this.focus(i,r),r.is(".ui-state-disabled")&&this._move(e,t,i)},nextPage:function(t){if(!this.active)return void this._move("next","first",t);if(!this.isLastItem())if(this._hasScroll()){var i,r=this.active.offset().top,a=this.element.height();this.active.nextAll(".ui-menu-item").not(".ui-state-disabled").each(function(){return i=e(this),e(this).offset().top-r-a<0}),this.focus(t,i)}else this.focus(t,this.activeMenu.children(".ui-menu-item").not(".ui-state-disabled")[this.active?"last":"first"]())},previousPage:function(t){if(!this.active)return void this._move("next","first",t);if(!this.isFirstItem())if(this._hasScroll()){var i,r=this.active.offset().top,a=this.element.height();this.active.prevAll(".ui-menu-item").not(".ui-state-disabled").each(function(){return i=e(this),e(this).offset().top-r+a>0}),this.focus(t,i)}else this.focus(t,this.activeMenu.children(".ui-menu-item").not(".ui-state-disabled").first())},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){var t={item:this.active};this.collapseAll(e,!0),this._trigger("select",e,t)}}),e});